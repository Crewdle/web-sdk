/*! For license information please see sdk.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var s=t();for(var n in s)("object"==typeof exports?exports:e)[n]=s[n]}}(this,(()=>(()=>{"use strict";var e={"./src/constants/Connection.ts":(e,t,s)=>{s.r(t),s.d(t,{CONNECTION_GROUP_RETRY_DELAY:()=>r,CONNECTION_MAX:()=>i,CONNECTION_MIN:()=>n});const n=3,i=4*n,r=100},"./src/constants/Content.ts":(e,t,s)=>{s.r(t),s.d(t,{CONTENT_BPP:()=>o,CONTENT_FILE_CHUNK_SIZE:()=>c,CONTENT_FILE_HEADER_SIZE:()=>d,CONTENT_FPS:()=>n,CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME:()=>b,CONTENT_KEY_VALUE_DATABASE_STATS_DEBOUNCE:()=>y,CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT:()=>S,CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME:()=>m,CONTENT_MAX_HEIGHT:()=>r,CONTENT_MAX_WIDTH:()=>i,CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME:()=>u,CONTENT_OBJECT_STORE_PENDING_EXTENSION:()=>h,CONTENT_OBJECT_STORE_PENDING_RETRY_DELAY:()=>p,CONTENT_OBJECT_STORE_STATS_DEBOUNCE:()=>g,CONTENT_PUBSUB_TOPIC_STATS_DEBOUNCE:()=>l,CONTENT_UPDATE_DEBOUNCE:()=>a});const n=24,i=1280,r=720,o=.12,a=500,c=260096,d=4,l=5e3,u=".crewdle-last-transaction",h=".crewdle-pending",p=6e4,g=5e3,m=".crewdle-transactions",b=".crewdle-layout",S=3e4,y=5e3},"./src/constants/Detection.ts":(e,t,s)=>{s.r(t),s.d(t,{DETECTION_ISSUE_TIMEOUT:()=>n});const n=3e4},"./src/constants/DetectionIssueRules.ts":(e,t,s)=>{s.r(t),s.d(t,{DETECTION_AUDIO_ISSUE_RULES:()=>m,DETECTION_CORE_ISSUE_RULES:()=>p,DETECTION_ISSUE_AV_DELAY_THRESHOLD:()=>l,DETECTION_ISSUE_BITRATE_THRESHOLD:()=>a,DETECTION_ISSUE_DT_THRESHOLD:()=>o,DETECTION_ISSUE_FPS_THRESHOLD:()=>h,DETECTION_ISSUE_JITTER_THRESHOLD:()=>c,DETECTION_ISSUE_RTT_THRESHOLD:()=>d,DETECTION_ISSUE_ST_THRESHOLD:()=>r,DETECTION_ISSUE_TPF_THRESHOLD:()=>u,DETECTION_RECEIVER_ISSUE_RULES:()=>S,DETECTION_SENDER_ISSUE_RULES:()=>b,DETECTION_VIDEO_ISSUE_RULES:()=>g});var n=s("./src/constants/Content.ts"),i=s("./src/interfaces/Detection/Detection.ts");const r=2.5,o=.5,a=.25,c=.6,d=1/0,l=300,u=.75,h=10,p=[{type:i.IssueType.STVolatility,reportMetric:e=>e.STVolatility,maxThreshold:r},{type:i.IssueType.DTVolatility,reportMetric:e=>e.DTVolatility,maxThreshold:o}],g=[{type:i.IssueType.TimePerFrame,reportMetric:e=>{const t=1e3/e.FPS;return e.timePerFrame/t},maxThreshold:u},{type:i.IssueType.Bitrate,reportMetric:e=>{const t=e.FPS*e.frameWidth*e.frameHeight*n.CONTENT_BPP;return e.bitrate/t},minThreshold:a},{type:i.IssueType.Jitter,reportMetric:e=>e.jitter,maxThreshold:c},{type:i.IssueType.FramePerSecond,reportMetric:e=>e.FPS,minThreshold:h}],m=[{type:i.IssueType.Jitter,reportMetric:e=>e.jitter,maxThreshold:c}],b=[{type:i.IssueType.RoundTripTime,reportMetric:e=>e.roundTripTime,maxThreshold:d}],S=[{type:i.IssueType.AudioVideoDelay,reportMetric:e=>e.AudioVideoDelay,maxThreshold:l}]},"./src/constants/DetectionProblemRules.ts":(e,t,s)=>{s.r(t),s.d(t,{DETECTION_PROBLEM_AV_DELAY_THRESHOLD:()=>a,DETECTION_PROBLEM_BITRATE_THRESHOLD:()=>d,DETECTION_PROBLEM_DT_THRESHOLD:()=>r,DETECTION_PROBLEM_FPS_THRESHOLD:()=>c,DETECTION_PROBLEM_JITTER_THRESHOLD:()=>l,DETECTION_PROBLEM_RTT_THRESHOLD:()=>u,DETECTION_PROBLEM_RULES:()=>h,DETECTION_PROBLEM_ST_THRESHOLD:()=>i,DETECTION_PROBLEM_TPF_THRESHOLD:()=>o});var n=s("./src/interfaces/Detection/Detection.ts");const i=5,r=5,o=3,a=2,c=3,d=3,l=3,u=3,h=[{type:n.ProblemType.CPUCycle,issues:[{type:n.IssueType.STVolatility,threshold:i},{type:n.IssueType.DTVolatility,threshold:r}]},{type:n.ProblemType.TimePerFrame,issues:[{type:n.IssueType.TimePerFrame,threshold:o}]},{type:n.ProblemType.AudioVideoDelay,issues:[{type:n.IssueType.AudioVideoDelay,threshold:a}]},{type:n.ProblemType.FramePerSecond,issues:[{type:n.IssueType.FramePerSecond,threshold:c}]},{type:n.ProblemType.Bitrate,issues:[{type:n.IssueType.Bitrate,threshold:d}]},{type:n.ProblemType.Jitter,issues:[{type:n.IssueType.Jitter,threshold:l}]},{type:n.ProblemType.RoundTripTime,issues:[{type:n.IssueType.RoundTripTime,threshold:u}]}]},"./src/constants/Interval.ts":(e,t,s)=>{s.r(t),s.d(t,{INTERVAL_TIME:()=>n});const n=100},"./src/constants/Node.ts":(e,t,s)=>{s.r(t),s.d(t,{NODE_AGENT_CAPACITY_REPORT_INTERVAL:()=>m,NODE_CLEAN_REMOTE_NODES_INTERVAL:()=>p,NODE_CLEAN_REMOTE_NODES_THRESHOLD:()=>g,NODE_DISTANCE_HOP:()=>d,NODE_DISTANCE_MAX:()=>h,NODE_DISTANCE_RESOLUTION:()=>l,NODE_DISTANCE_TRACKS:()=>u,NODE_PROCESS_RANK_DEBOUCE_TIME:()=>o,NODE_PROCESS_RANK_DEBOUCE_TIME_LIMIT:()=>c,NODE_PROCESS_RANK_DEBOUCE_TIME_MAX:()=>a,NODE_UPDATE_DEBOUNCE_TIME:()=>n,NODE_UPDATE_DEBOUNCE_TIME_LIMIT:()=>r,NODE_UPDATE_DEBOUNCE_TIME_MAX:()=>i});const n=1e3,i=1e4,r=i-n,o=1e3,a=1e4,c=a-o,d=1,l=0,u=10,h=10,p=6e4,g=3e5,m=3e5},"./src/constants/PeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{PEER_CONNECTION_BUFFER_THRESHOLD:()=>g,PEER_CONNECTION_CHUNK_IDENTIFIER:()=>h,PEER_CONNECTION_CHUNK_SIZE:()=>p,PEER_CONNECTION_DATACHANNEL_DISCONNECT_HANDLER_DELAY:()=>b,PEER_CONNECTION_DATACHANNEL_RETRY_DELAY:()=>m,PEER_CONNECTION_HANDSHAKE_DEBOUNCE:()=>u,PEER_CONNECTION_HEARTBEAT_INTERVAL:()=>r,PEER_CONNECTION_HEARTBEAT_PING:()=>n,PEER_CONNECTION_HEARTBEAT_PONG:()=>i,PEER_CONNECTION_HEARTBEAT_THRESHOLD:()=>o,PEER_CONNECTION_HEARTBEAT_TIMEOUT:()=>d,PEER_CONNECTION_MESSAGE_RETRY:()=>l,PEER_CONNECTION_RECONNECT_TIMEOUT:()=>a,PEER_CONNECTION_TIMEOUT:()=>c});const n="0",i="1",r=3e3,o=5*r,a=3e4,c=3e4,d=6e4,l=5e3,u=500,h="chunk",p=261120,g=65536,m=100,b=250},"./src/constants/Remediation.ts":(e,t,s)=>{s.r(t),s.d(t,{REMEDIATION_BITRATE:()=>l,REMEDIATION_DOWNGRADE_WAIT_TIME:()=>n,REMEDIATION_FPS:()=>d,REMEDIATION_MAX_RESOLUTION_SCALE:()=>o,REMEDIATION_MIN_BITRATE:()=>a,REMEDIATION_MIN_FPS:()=>r,REMEDIATION_RESOLUTION_SCALE:()=>c,REMEDIATION_UPGRADE_WAIT_TIME:()=>i});const n=5e3,i=15e3,r=15,o=4,a=5e4,c=.5,d=3,l=.25},"./src/constants/RemediationRules.ts":(e,t,s)=>{s.r(t),s.d(t,{REMEDIATION_RULES:()=>r});var n=s("./src/interfaces/Detection/Detection.ts"),i=s("./src/interfaces/Remediation/Remediation.ts");const r=[{problemType:n.ProblemType.CPUCycle,remediations:[{type:i.RemediationMessageType.Remediation,component:i.RemediationComponent.Resolution,action:i.RemediationAction.Downgrade},{type:i.RemediationMessageType.RemoteRemediation,component:i.RemediationComponent.Resolution,action:i.RemediationAction.Downgrade}]},{problemType:n.ProblemType.TimePerFrame,remediations:[{type:i.RemediationMessageType.Remediation,component:i.RemediationComponent.Resolution,action:i.RemediationAction.Downgrade}]},{problemType:n.ProblemType.AudioVideoDelay,remediations:[{type:i.RemediationMessageType.Remediation,component:i.RemediationComponent.Resolution,action:i.RemediationAction.Downgrade}]},{problemType:n.ProblemType.FramePerSecond,remediations:[{type:i.RemediationMessageType.Remediation,component:i.RemediationComponent.Resolution,action:i.RemediationAction.Downgrade}]},{problemType:n.ProblemType.Bitrate,remediations:[{type:i.RemediationMessageType.Remediation,component:i.RemediationComponent.Bitrate,action:i.RemediationAction.Downgrade}]},{problemType:n.ProblemType.Jitter,remediations:[{type:i.RemediationMessageType.Remediation,component:i.RemediationComponent.Bitrate,action:i.RemediationAction.Downgrade}]},{problemType:n.ProblemType.RoundTripTime,remediations:[{type:i.RemediationMessageType.Remediation,component:i.RemediationComponent.Bitrate,action:i.RemediationAction.Downgrade}]}]},"./src/constants/Services.ts":(e,t,s)=>{s.r(t),s.d(t,{MESSAGE_BUFFER_CLEANUP_INTERVAL:()=>i,MESSAGE_BUFFER_RETENTION_TIME:()=>n});const n=12e5,i=12e4},"./src/constants/Stats.ts":(e,t,s)=>{s.r(t),s.d(t,{STATS_COLLECT_DELAY:()=>n,STATS_INBOUND:()=>a,STATS_OUTBOUND:()=>r,STATS_RECEIVER_FILTERS:()=>d,STATS_REMOTE_INBOUND:()=>o,STATS_REPORT_DELAY:()=>i,STATS_SENDER_FILTERS:()=>c});const n=1e3,i=3e4,r="outbound-rtp",o="remote-inbound-rtp",a="inbound-rtp",c=[r,o],d=[a]},"./src/constants/Subscription.ts":(e,t,s)=>{s.r(t),s.d(t,{SUBSCRIPTION_MAX_OUTGOING:()=>r,SUBSCRIPTION_MAX_RETRY_COUNT:()=>i,SUBSCRIPTION_REQUEST_RETRY_DELAY:()=>a,SUBSCRIPTION_REQUEST_TIMEOUT:()=>n,SUBSCRIPTION_RETRY_DELAY:()=>o});const n=2e3,i=10,r=1,o=1e3,a=100},"./src/constants/System.ts":(e,t,s)=>{s.r(t),s.d(t,{SYSTEM_TOPIC:()=>n,SYSTEM_TOPIC_INTERNAL:()=>i});const n=0,i="internal"},"./src/environments/Environment.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>o,isObject:()=>i,mergeDeep:()=>r});let n=s("./src/environments/environment.default.ts").Environment;function i(e){return!(!e||"object"!=typeof e||Array.isArray(e))}function r(e,...t){if(!Array.isArray(t)||0===t.length)return e;const s=t.shift();if(i(e)&&i(s))for(const t in s)i(s[t])?(e[t]||Object.assign(e,{[t]:{}}),r(e[t],s[t])):Object.assign(e,{[t]:s[t]});return r(e,...t)}n=r(n,s("./src/environments/environment.dev.ts").Environment);const o=n},"./src/environments/environment.default.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={version:"0.1.0",isProduction:!1,firebaseConfig:{apiKey:"AIzaSyDHDgmA574NVeMWV9SpW-q4QQMjkANuueg",authDomain:"crewdle-sdk-stg.firebaseapp.com",databaseURL:"https://crewdle-sdk-stg-default-rtdb.firebaseio.com",projectId:"crewdle-sdk-stg",storageBucket:"crewdle-sdk-stg.appspot.com",appId:"1:519415702791:web:5dd39042f881cfde3251a2",functionsRegion:"northamerica-northeast1"},aws:{endpoint:"https://3nabhjyaabdadnpczsgrye6upu.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1"}}},"./src/environments/environment.dev.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={}},"./src/environments/environment.prd.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={isProduction:!0,firebaseConfig:{apiKey:"AIzaSyCY6T49D81QpoZ_ApZ6atpT4c3Yy0_lWvg",authDomain:"crewdle-sdk.firebaseapp.com",databaseURL:"https://crewdle-sdk-default-rtdb.firebaseio.com",projectId:"crewdle-sdk",storageBucket:"crewdle-sdk.appspot.com",messagingSenderId:"420235181083",appId:"1:420235181083:web:4eff6062bd845cb0748cbe",measurementId:"G-F7W8KXRKQB"},aws:{endpoint:"https://e7if27umpzf2ff4k63wgzo4pri.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1"}}},"./src/environments/environment.stg.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={}},"./src/errors/EarlyReturnError.ts":(e,t,s)=>{s.r(t),s.d(t,{EarlyReturnError:()=>n});class n extends Error{constructor(e){super(`Early return: ${e}`)}}},"./src/errors/SDKInternalError.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SDKInternalError:()=>r}),function(e){e.ConnectionNotinitialized="connection-not-initialized",e.ConnectionNotConnected="connection-not-connected",e.ConnectionNoRetryQueue="connection-no-retry-queue",e.ConnectionInvalidDataEvent="connection-invalid-data-event",e.ObjectStoreCannotWriteTransaction="object-store-cannot-write-transaction",e.ObjectStoreInvalidSyncMessage="object-store-invalid-sync-message",e.ObjectStoreNotSynced="object-store-not-synced",e.InvalidDataChannel="invalid-data-chanel",e.InvalidPublisher="invalid-publisher",e.InvalidSubscriber="invalid-subscriber",e.InvalidSubscription="invalid-subscription",e.KeyValueDatabaseCreationFailed="key-value-database-creation-failed",e.KeyValueDatabaseTableDoesNotExist="key-value-database-table-does-not-exist",e.KeyValueDatabaseTransactionTableNotInitialized="key-value-database-transaction-table-not-initialized",e.KeyValueDatabaseTransactionValueNotSet="key-value-database-transaction-value-not-set",e.LocalMediaStreamDoesNotExist="local-stream-does-not-exist",e.MissingRemoteConnection="missing-incoming-connection",e.MissingSystemTopic="missing-system-topic",e.OutgoingMediaStreamNoTopic="outgoing-stream-no-topic",e.RemoteMediaStreamDoesNotExist="remote-stream-does-not-exist",e.RemoteMediaStreamMissingProviderId="remote-stream-missing-provider-id",e.RemoteConnectionExists="remote-connection-exists",e.SubscriptionRequestDoesNotExist="subscription-request-does-not-exist",e.SubscriptionRequestFailed="subscription-request-failed",e.SubscriptionRequestNoAnswer="subscription-request-no-answer",e.NodeDoesNotExist="node-does-not-exist",e.NodeAlreadyExist="node-already-exist",e.PeerConnectionInvalidDestination="peer-connection-invalid-destination"}(n||(n={}));const i=new Map([[n.ConnectionNotinitialized,"Connection not initialized."],[n.ConnectionNotConnected,"Connection not connected."],[n.ConnectionNoRetryQueue,"Connection does not have a retry queue."],[n.ConnectionInvalidDataEvent,"Invalid data event."],[n.ObjectStoreCannotWriteTransaction,"Cannot write transaction."],[n.ObjectStoreInvalidSyncMessage,"Invalid object store sync message."],[n.ObjectStoreNotSynced,"Object store not synced."],[n.InvalidDataChannel,"Invalid data chan_NO_RENAMEENAl."],[n.InvalidPublisher,"Invalid publisher."],[n.InvalidSubscriber,"Invalid subscriber."],[n.InvalidSubscription,"Invalid subscription."],[n.KeyValueDatabaseCreationFailed,"Key-value database creation failed."],[n.KeyValueDatabaseTableDoesNotExist,"Key-value database table does not exist."],[n.KeyValueDatabaseTransactionTableNotInitialized,"Key-value database transaction table not initialized."],[n.KeyValueDatabaseTransactionValueNotSet,"Key-value database transaction value not set."],[n.LocalMediaStreamDoesNotExist,"Local stream does not exist."],[n.MissingRemoteConnection,"Connection does not exist."],[n.MissingSystemTopic,"The system topic has not been registered."],[n.OutgoingMediaStreamNoTopic,"Outgoing stream does not have a topic."],[n.RemoteMediaStreamDoesNotExist,"Remote stream does not exist."],[n.RemoteMediaStreamMissingProviderId,"Remote media stream is missing a provider id."],[n.RemoteConnectionExists,"Remote connection already exists."],[n.SubscriptionRequestDoesNotExist,"Subscription request does not exist."],[n.SubscriptionRequestFailed,"Subscription request failed."],[n.SubscriptionRequestNoAnswer,"Subscription request has not been answered."],[n.NodeDoesNotExist,"Node does not exist."],[n.NodeAlreadyExist,"Node already exists."],[n.PeerConnectionInvalidDestination,"Invalid peer connection event destination."]]);class r extends Error{code;static codes=n;data;constructor(e,t){super(`Internal SDK Error: ${e}: ${i.get(e)}\nAdditional data: ${JSON.stringify(t)}`),this.code=e,this.data=t||{}}}},"./src/interfaces/Connection/PeerConnection.ts":(e,t,s)=>{var n,i,r;s.r(t),s.d(t,{PeerConnectionMessageType:()=>i,PeerConnectionOrigin:()=>r,PeerConnectionType:()=>n}),function(e){e[e.Core=0]="Core",e[e.Optimization=1]="Optimization"}(n||(n={})),function(e){e[e.Offer=0]="Offer",e[e.Answer=1]="Answer",e[e.Handshake=2]="Handshake",e[e.Success=3]="Success",e[e.NeedRestart=4]="NeedRestart",e[e.Restart=5]="Restart",e[e.Disconnect=6]="Disconnect",e[e.Stats=7]="Stats",e[e.OptimizationConnectionSuccess=8]="OptimizationConnectionSuccess"}(i||(i={})),function(e){e[e.Sender=0]="Sender",e[e.Receiver=1]="Receiver"}(r||(r={}))},"./src/interfaces/Content/Content.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{ContentMessageType:()=>n}),function(e){e[e.PublishMediaStream=0]="PublishMediaStream",e[e.UnpublishMediaStream=1]="UnpublishMediaStream",e[e.SubscribeMediaStream=2]="SubscribeMediaStream",e[e.UpdateMediaStream=3]="UpdateMediaStream",e[e.UnsubscribeMediaStream=4]="UnsubscribeMediaStream",e[e.CloseObjectStoreBucket=5]="CloseObjectStoreBucket",e[e.CloseKeyValueDatabase=6]="CloseKeyValueDatabase",e[e.ClosePubSubTopic=7]="ClosePubSubTopic",e[e.CloseMediaStream=8]="CloseMediaStream",e[e.LocalMediaStreamTrackFail=9]="LocalMediaStreamTrackFail",e[e.RemoteMediaStreamTrackFail=10]="RemoteMediaStreamTrackFail",e[e.RequestSyncKeyValueDatabase=11]="RequestSyncKeyValueDatabase",e[e.SendTransactionsDump=12]="SendTransactionsDump",e[e.RequestTransactionsValue=13]="RequestTransactionsValue",e[e.PubSubTopicStats=14]="PubSubTopicStats",e[e.ObjectStoreStats=15]="ObjectStoreStats",e[e.KeyValueDatabaseStats=16]="KeyValueDatabaseStats"}(n||(n={}))},"./src/interfaces/Content/DataContent.ts":(e,t,s)=>{var n,i,r,o;s.r(t),s.d(t,{InternalDatabaseTableReadAction:()=>o,InternalDatabaseTableWriteAction:()=>r,InternalObjectStorePayloadAction:()=>n,InternalObjectStorePayloadType:()=>i}),function(e){e.FileWrite="file-write",e.FolderCreate="folder-create",e.Delete="delete",e.Move="move",e.RequestFile="request-file",e.RequestAccepted="request-accepted",e.RequestFileSync="request-file-sync",e.RequestFileWrite="request-file-write"}(n||(n={})),function(e){e.Request="request",e.Transaction="transaction"}(i||(i={})),function(e){e.Add="add",e.Update="update",e.Delete="delete"}(r||(r={})),function(e){e.Get="get",e.List="list",e.Count="count"}(o||(o={}))},"./src/interfaces/Detection/Detection.ts":(e,t,s)=>{var n,i,r;s.r(t),s.d(t,{DetectionMessageType:()=>r,IssueType:()=>n,ProblemType:()=>i}),function(e){e.STVolatility="st_volatility",e.DTVolatility="dt_volatility",e.TimePerFrame="time_per_frame",e.Bitrate="bitrate",e.Jitter="jitter",e.FramePerSecond="fps",e.RoundTripTime="rtt",e.AudioVideoDelay="av_delay"}(n||(n={})),function(e){e.CPUCycle="cpu.cycle",e.TimePerFrame="cpu.time_per_frame",e.AudioVideoDelay="cpu.av_delay",e.FramePerSecond="cpu.fps",e.Bitrate="bandwidth.bitrate",e.Jitter="bandwidth.jitter",e.RoundTripTime="bandwidth.rtt"}(i||(i={})),function(e){e[e.Problem=0]="Problem"}(r||(r={}))},"./src/interfaces/Node/Node.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{NodeStatus:()=>n}),function(e){e[e.Online=0]="Online",e[e.Offline=1]="Offline"}(n||(n={}))},"./src/interfaces/Node/NodeMessage.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{NodeMessageType:()=>n}),function(e){e[e.NodeJoin=0]="NodeJoin",e[e.NodeUpdate=1]="NodeUpdate",e[e.NodeConnectionsUpdate=2]="NodeConnectionsUpdate",e[e.NodeLeave=3]="NodeLeave"}(n||(n={}))},"./src/interfaces/Remediation/Remediation.ts":(e,t,s)=>{var n,i,r;s.r(t),s.d(t,{RemediationAction:()=>i,RemediationComponent:()=>r,RemediationMessageType:()=>n}),function(e){e[e.Remediation=0]="Remediation",e[e.RemoteRemediation=1]="RemoteRemediation"}(n||(n={})),function(e){e.Upgrade="upgrade",e.Downgrade="downgrade"}(i||(i={})),function(e){e.Resolution="resolution",e.Bitrate="bitrate"}(r||(r={}))},"./src/interfaces/SDK/SDK.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{IInternalFeatures:()=>n}),function(e){e.MediaStream="media-stream"}(n||(n={}))},"./src/interfaces/Stats/Stats.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{StatsMessageType:()=>n}),function(e){e[e.StreamReport=0]="StreamReport",e[e.LocalReport=1]="LocalReport"}(n||(n={}))},"./src/interfaces/Subscription/MediaSubscriptionEvent.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{MediaSubscriptionAction:()=>n}),function(e){e[e.Add=0]="Add",e[e.Remove=1]="Remove",e[e.Update=2]="Update",e[e.RemoteAdd=3]="RemoteAdd",e[e.RemoteRemove=4]="RemoteRemove"}(n||(n={}))},"./src/interfaces/Subscription/Subscription.ts":(e,t,s)=>{var n,i;s.r(t),s.d(t,{SubscriptionRequestType:()=>n,SubscriptionType:()=>i}),function(e){e[e.Waiting=0]="Waiting",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"}(n||(n={})),function(e){e.Incoming="in",e.Outgoing="out"}(i||(i={}))},"./src/interfaces/Subscription/SubscriptionMessage.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SubscriptionMessageType:()=>n}),function(e){e[e.SubscribeMediaStream=0]="SubscribeMediaStream",e[e.UpdateMediaStream=1]="UpdateMediaStream",e[e.UnsubscribeMediaStream=2]="UnsubscribeMediaStream",e[e.NeedMediaStream=3]="NeedMediaStream",e[e.RestartNeedMediaStream=4]="RestartNeedMediaStream",e[e.CanProvideMediaStream=5]="CanProvideMediaStream",e[e.CannotProvideMediaStream=6]="CannotProvideMediaStream",e[e.MediaStreamUnavailable=7]="MediaStreamUnavailable"}(n||(n={}))},"./src/interfaces/Subscription/SystemEvent.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SystemMessageType:()=>n}),function(e){e[e.PeerConnection=0]="PeerConnection",e[e.Node=1]="Node",e[e.Content=2]="Content",e[e.Subscription=3]="Subscription",e[e.Stats=4]="Stats",e[e.Detection=5]="Detection",e[e.Remediation=6]="Remediation"}(n||(n={}))},"./src/interfaces/Utils/Logger.ts":(e,t,s)=>{var n,i;s.r(t),s.d(t,{LoggingChannels:()=>i,LoggingServices:()=>n}),function(e){e.PubSub="pubsub",e.ObjectStorage="object-storage",e.KeyValueDatabase="key-value-database",e.MediaStream="media-stream"}(n||(n={})),function(e){e.All="all",e.Default="default",e.Connection="connection",e.ConnectionState="connection-state",e.Cluster="cluster",e.Content="content",e.Detection="detection",e.Events="events",e.Error="error",e.Node="node",e.Pool="pool",e.PubSub="pubsub",e.Remediation="remediation",e.Signaling="signaling",e.Stats="stats",e.Subscription="subscription",e.Support="support",e.System="system",e.SystemStats="system-stats",e.TestPage="test-page",e.PeerConnection="peer-connection"}(i||(i={}))},"./src/interfaces/Utils/Queue.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{QueueElementPriority:()=>n}),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(n||(n={}))},"./src/interfaces/Utils/Support.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SupportFeatureName:()=>n}),function(e){e.AudioContext="AudioContext",e.AudioOutput="AudioOutput",e.AudioVolume="AudioVolume",e.Backgrounds="Backgrounds",e.DeviceConfig="DeviceConfig",e.MediaStream="MediaStream",e.Recording="Recording",e.ScreenSharing="ScreenSharing",e.WebGL="WebGL",e.WebRTC="WebRTC"}(n||(n={}))},"./src/models/Cluster/Cluster.ts":(e,t,s)=>{s.r(t),s.d(t,{Cluster:()=>a});var n=s("@crewdle/web-sdk-types"),i=s("./src/public/errors/SDKClientError.ts"),r=s("./src/models/Cluster/ClusterEventEmitter.ts"),o=s("./src/models/Orchestrator/Orchestrator.ts");class a{vendorId;clusterId;authNode;eventEmitter;orchestrator;constructor(e,t,s,n,i,a,c=new r.ClusterEventEmitter){this.vendorId=e,this.clusterId=t,this.authNode=s,this.eventEmitter=c,this.orchestrator=new o.Orchestrator(this.vendorId,this.clusterId,s,n,i,a,this)}async join(){await this.orchestrator.initialize(),this.authNode.type===n.NodeType.User&&this.authNode.registerCluster(this.clusterId,(e=>{this.orchestrator.updateUser(e)}))}leave(){this.orchestrator.close(),this.authNode.type===n.NodeType.User&&this.authNode.unregisterCluster(this.clusterId),this.emit("cluster-leave",void 0)}openPubSubTopic(e){const t=this.orchestrator.openPubSubTopic(e);return{getName:t.getName.bind(t),getOwnerId:t.getOwnerId.bind(t),getContentType:t.getContentType.bind(t),publish:t.publish.bind(t),subscribe:t.subscribe.bind(t),unsubscribe:t.unsubscribe.bind(t),close:t.close.bind(t)}}async openObjectStoreBucket(e){const t=await this.orchestrator.openObjectStoreBucket(e);return{getName:t.getName.bind(t),getOwnerId:t.getOwnerId.bind(t),getContentType:t.getContentType.bind(t),publish:t.publish.bind(t),unpublish:t.unpublish.bind(t),get:t.get.bind(t),list:t.list.bind(t),subscribe:t.subscribe.bind(t),unsubscribe:t.unsubscribe.bind(t),close:t.close.bind(t)}}async openKeyValueDatabase(e,t){const s=await this.orchestrator.openKeyValueDatabase(e,t);return{getName:s.getName.bind(s),getOwnerId:s.getOwnerId.bind(s),getContentType:s.getContentType.bind(s),getTable:s.getTable.bind(s),subscribe:s.subscribe.bind(s),unsubscribe:s.unsubscribe.bind(s),close:s.close.bind(s)}}getPubSubTopics(e){return this.orchestrator.getPubSubTopics(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),publish:e.publish.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),close:e.close.bind(e)})))}getObjectStoreBuckets(e){return this.orchestrator.getObjectStoreBuckets(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),publish:e.publish.bind(e),unpublish:e.unpublish.bind(e),get:e.get.bind(e),list:e.list.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),close:e.close.bind(e)})))}getKeyValueDatabases(e){return this.orchestrator.getKeyValueDatabases(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),getTable:e.getTable.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),close:e.close.bind(e)})))}publishLocalMediaStream(e,t){const s=this.orchestrator.createLocalMediaStream(e,t);return{getLabel:s.getLabel.bind(s),getOwnerId:s.getOwnerId.bind(s),getContentType:s.getContentType.bind(s),getMediaStream:s.getMediaStream.bind(s),setPriority:s.setPriority.bind(s),unpublish:s.unpublish.bind(s)}}publishLocalDynamicMediaStream(e,t){const s=this.orchestrator.createLocalDynamicMediaStream(e,t);return{getLabel:s.getLabel.bind(s),getOwnerId:s.getOwnerId.bind(s),getContentType:s.getContentType.bind(s),setPriority:s.setPriority.bind(s),unpublish:s.unpublish.bind(s),getMediaStream:s.getMediaStream.bind(s),addTrack:s.addTrack.bind(s),removeTrack:s.removeTrack.bind(s),replaceTrack:s.replaceTrack.bind(s),setTransformations:s.setTransformations.bind(s)}}getLocalMediaStreams(e){return this.orchestrator.getLocalMediaStreams(e).map((e=>({getLabel:e.getLabel.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),getMediaStream:e.getMediaStream.bind(e),setPriority:e.setPriority.bind(e),unpublish:e.unpublish.bind(e)})))}getRemoteMediaStreams(e){return this.orchestrator.getRemoteMediaStreams(e).map((e=>({getLabel:e.getLabel.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),getMediaStream:e.getMediaStream.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),getAvailableTrackKinds:e.getAvailableTrackKinds.bind(e),update:e.update.bind(e),onProviderChange:e.onProviderChange.bind(e)})))}getLocalNode(){const e=this.orchestrator.getLocalNode();switch(e.type){case n.NodeType.User:return{type:n.NodeType.User,getId:e.getId.bind(e),getDisplayName:e.getDisplayName.bind(e),getEmail:e.getEmail.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e),setDisplayName:e.setDisplayName.bind(e),setEmail:e.setEmail.bind(e)};case n.NodeType.Agent:default:return{type:n.NodeType.Agent,getId:e.getId.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e)}}}getRemoteNodes(e){return this.orchestrator.getRemoteNodes(e).map((e=>{switch(e.type){case n.NodeType.User:return{type:n.NodeType.User,getId:e.getId.bind(e),getDisplayName:e.getDisplayName.bind(e),getEmail:e.getEmail.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e)};case n.NodeType.Agent:return{type:n.NodeType.Agent,getId:e.getId.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e)};default:throw new i.SDKClientError(i.SDKClientErrorCodes.NodeInvalidType,"Invalid node type")}}))}on=(...e)=>{this.eventEmitter.on(...e)};emit=(...e)=>this.eventEmitter.emit(...e);off(...e){this.eventEmitter.off(...e)}}},"./src/models/Cluster/ClusterEventEmitter.ts":(e,t,s)=>{s.r(t),s.d(t,{ClusterEventEmitter:()=>r});var n=s("./src/interfaces/Utils/Logger.ts"),i=s("./src/utils/Logger/Logger.ts");class r{registeredListeners;bufferedEvents;eventTarget;constructor(e=new Map,t=new Map,s=new EventTarget){this.registeredListeners=e,this.bufferedEvents=t,this.eventTarget=s}emit=(e,t)=>this.registeredListeners.has(e)?(i.default.log(n.LoggingChannels.Events,"Emitting event on local cluster",{event:e,data:t}),this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:t})),!0):(this.bufferEvent(e,t),!1);on=(e,t)=>{const s=e=>{i.default.log(n.LoggingChannels.Events,"Received event on cluster",e.type,e.detail),t(e.detail)};return this.registeredListeners.set(e,s),this.eventTarget.addEventListener(e,s),i.default.log(n.LoggingChannels.Cluster,"Subscribing to an event: on",e,t),this.consumeBufferedEvents(e),this};off(e){if(!e)return this.registeredListeners.forEach(((e,t)=>{this.eventTarget.removeEventListener(t,e)})),void this.registeredListeners.clear();"string"==typeof e&&this.removeListener(e),Array.isArray(e)&&e.forEach((e=>{this.removeListener(e)}))}removeListener(e){const t=this.registeredListeners.get(e);t&&(this.eventTarget.removeEventListener(e,t),this.registeredListeners.delete(e))}bufferEvent(e,t){i.default.log(n.LoggingChannels.Events,"Buffering event",{event:e,data:t});const s=this.bufferedEvents.get(e)||[];this.bufferedEvents.set(e,[...s,t])}consumeBufferedEvents(e){const t=this.bufferedEvents.get(e);t&&(t.forEach((t=>{i.default.log(n.LoggingChannels.Events,"Consuming buffered event",{event:e,data:t}),this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:t}))})),this.bufferedEvents.delete(e))}}},"./src/models/Connection/AppSyncPubSubConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{AppSyncPubSubConnection:()=>b});var n=s("aws-amplify"),i=s("aws-amplify/utils"),r=s("@aws-amplify/api"),o=s("@aws-amplify/core"),a=s("@crewdle/web-sdk-types"),c=s("./src/environments/Environment.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Connection/BaseConnection.ts"),u=s("./src/models/Subscription/Helpers.ts"),h=s("./src/utils/Logger/Logger.ts"),p=s("./src/utils/Observer/Observer.ts"),g=s("./src/utils/Queue/Queue.ts"),m=s("./src/utils/Queue/RetryQueue.ts");class b extends l.BaseConnection{vendorId;authService;connectionState=r.ConnectionState.Disconnected;connectionStateListener=(0,p.createSingleObserver)();messageListeners=(0,p.createObserver)();subscription;listenUnsubscriber;retryQueue=(0,m.createRetryQueue)(new g.AsyncQueueCallback(this.sendAction.bind(this),this.waitConnected.bind(this)));client;constructor(e,t,s,n,i){super(t,s,n),this.vendorId=e,this.authService=i}async connect(){try{const e={getTokens:async()=>{const e=await this.authService.getIdToken();return{accessToken:(0,o.decodeJWT)(e),idToken:(0,o.decodeJWT)(e)}}};n.Amplify.configure({API:{GraphQL:{endpoint:c.Environment.aws.endpoint,region:c.Environment.aws.region,defaultAuthMode:"oidc"}}},{Auth:{tokenProvider:e}}),this.client=(0,r.generateClient)(),await this.subscribe(),this.listenUnsubscriber=i.Hub.listen("api",(async({payload:e})=>{if(e.event===r.CONNECTION_STATE_CHANGE){const t=e.data;this.connectionState=t.connectionState,this.connectionStateListener.publish(t.connectionState),this.connectionState===r.ConnectionState.Disconnected&&h.default.error("appsync-disconnect",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type}),this.connectionState===r.ConnectionState.Connected&&h.default.warning("appsync-connect",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type})}}))}catch(e){h.default.error("appsync-connect-fail",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type})}}close(){h.default.warning("appsync-close",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type}),this.retryQueue.clear(),this.listenUnsubscriber?.(),this.subscription?.unsubscribe(),delete this.subscription}isConnected(){return this.connectionState===r.ConnectionState.Connected}send(e){this.retryQueue.push(e)}onMessage(e){return this.messageListeners.subscribe(e)}getSupportedContentTypes(){return[a.ContentType.Data]}async waitConnected(){if(!this.isConnected())return new Promise((e=>{const t=this.connectionStateListener.subscribe((s=>{s===r.ConnectionState.Connected&&(t(),e())}))}))}async sendAction(e){if(this.connectionState!==r.ConnectionState.Connected)throw new Error("AppSync connection not ready");e.destinationIds&&1===e.destinationIds.length?await this.publish(e.destinationIds[0],JSON.stringify(e)):h.default.error("appsync-no-destination",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type})}async publish(e,t){if(!this.client)throw new Error("AppSync client not ready");h.default.log(d.LoggingChannels.Signaling,"AppSync publish",this.getLocalId(),t),await this.client.graphql({query:"\n  mutation Publish($data: AWSJSON!, $name: String!) {\n    publish(data: $data, name: $name) {\n      data\n      name\n    }\n  }\n",variables:{name:await this.getHash(e),data:t}})}async subscribe(){if(this.subscription)return;if(!this.client)throw new Error("AppSync client not ready");h.default.log(d.LoggingChannels.Signaling,"AppSync subscribe",this.getLocalId());const e=await this.client.graphql({query:"\n  subscription Subscribe($name: String!) {\n    subscribe(name: $name) {\n      data\n      name\n    }\n  }\n",variables:{name:await this.getHash()},authToken:await this.authService.getIdToken()},{Authorization:await this.authService.getIdToken()});this.subscription=e.subscribe({next:({data:e})=>{const t=JSON.parse(e.subscribe.data);!(0,u.isSender)(t,this.getLocalId())&&(0,u.isReceiver)(t,this.getLocalId())&&this.messageListeners.publish(t)},error:console.log})}async getHash(e){const t=await crypto.subtle.digest("SHA-1",(new TextEncoder).encode(`${this.vendorId}-${this.clusterId}-${e??this.getLocalId()}`));return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}}},"./src/models/Connection/BaseConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseConnection:()=>n});class n{clusterId;localNode;remoteId;constructor(e,t,s){this.clusterId=e,this.localNode=t,this.remoteId=s}getLocalId(){return this.localNode.getId()}getRemoteId(){return this.remoteId}}},"./src/models/Connection/BasePeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{BasePeerConnection:()=>d});var n=s("./src/constants/PeerConnection.ts"),i=s("./src/errors/SDKInternalError.ts"),r=s("./src/interfaces/Connection/PeerConnection.ts"),o=s("./src/interfaces/Subscription/SystemEvent.ts"),a=s("./src/interfaces/Utils/Logger.ts"),c=s("./src/utils/Logger/Logger.ts");class d{clusterId;localNode;remoteId;iceServers;connectionType;connectionConstructor;connection;dataChannel;currentVersion=1;systemTopic;handshakeCandidates=[];pendingHandshakeCandidates=[];handshakeDebounce;constructor(e,t,s,n,i,r){this.clusterId=e,this.localNode=t,this.remoteId=s,this.iceServers=n,this.connectionType=i,this.connectionConstructor=r,this.connection=new this.connectionConstructor({handshakeServers:this.iceServers}),this.setupConnectionEvents()}close(){this.stopConnection()}setConnectionType(e){this.connectionType=e}async handleHandshake(e,t){if(t===this.currentVersion)for(const t of e){if(!this.connection.canAddCandidates)return this.addPendingHandshakeCandidate(t);await this.connection.addCandidate(t)}}isConnected(){return this.logConnectionState(),"connected"===this.connection.connectionState&&["connected","completed"].includes(this.connection.handshakeState)&&"closed"!==this.connection.signalingState&&"open"===this.dataChannel?.state}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}resetConnection(e){this.stopConnection(),this.connection=new this.connectionConstructor({handshakeServers:this.iceServers}),e?this.currentVersion=e:this.currentVersion+=1,this.setupConnectionEvents()}processPendingHandshakeCandidates(){this.pendingHandshakeCandidates.forEach((e=>this.connection.addCandidate(e))),this.pendingHandshakeCandidates=[]}publishSystemMessage(e,t){if(!this.systemTopic)throw new i.SDKInternalError(i.SDKInternalError.codes.MissingSystemTopic,{content:e});const s={sourceId:this.localNode.getId(),destinationIds:[this.remoteId],propagate:this.connectionType!==r.PeerConnectionType.Core,retry:this.connectionType!==r.PeerConnectionType.Core,messageType:o.SystemMessageType.PeerConnection,content:e};t&&(s.uuid=t),this.systemTopic.publish(s)}setupConnectionEvents(){this.connection.onGatheringStateChange=()=>{"complete"===this.connection.gatheringState&&this.handshakeCandidates.length>0&&(this.handshakeDebounce&&clearTimeout(this.handshakeDebounce),this.handshakeDebounce=setTimeout((()=>{delete this.handshakeDebounce,this.sendIceCandidates(),this.handshakeCandidates=[]}),n.PEER_CONNECTION_HANDSHAKE_DEBOUNCE))},this.connection.onCandidate=e=>{e.candidate&&this.handshakeCandidates.push(e.candidate)}}stopConnection(){clearTimeout(this.handshakeDebounce),delete this.handshakeDebounce,this.handshakeCandidates=[],this.pendingHandshakeCandidates=[],this.dataChannel&&(this.dataChannel.onMessage=null,this.dataChannel.onClose=null,this.dataChannel.close(),delete this.dataChannel),this.connection.onGatheringStateChange=null,this.connection.onCandidate=null,this.connection.onHandshakeStateChange=null,this.connection.onConnectionStateChange=null,this.connection.onTrack=null,this.connection.onDataChannel=null,this.connection.close()}addPendingHandshakeCandidate(e){this.pendingHandshakeCandidates.push(e)}logConnectionState(){c.default.log(a.LoggingChannels.ConnectionState,"Base Peer Connection",{localId:this.localNode.getId(),remoteId:this.remoteId,connectionState:this.connection.connectionState,handshakeState:this.connection.handshakeState,signalingState:this.connection.signalingState,dataChannelState:this.dataChannel?.state})}}},"./src/models/Connection/ConnectionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{ConnectionManager:()=>g});var n=s("./src/errors/EarlyReturnError.ts"),i=s("./src/errors/SDKInternalError.ts"),r=s("./src/interfaces/Connection/PeerConnection.ts"),o=s("./src/interfaces/Node/NodeMessage.ts"),a=s("./src/interfaces/Remediation/Remediation.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/models/Connection/AppSyncPubSubConnection.ts"),l=s("./src/models/Connection/PeerConnection.ts"),u=s("./src/models/Connection/PeerConnectionGroup.ts"),h=s("./src/models/Connection/PeerConnectionPool.ts"),p=s("./src/services/MessageBuffer/MessageBufferService.ts");class g{configs;authService;iceServers;maxFps;maxBpp;connectionConstructor;connections=new Map;connectionPool;connectionGroup;signalingServer;messageBuffer;constructor(e,t,s,n,i,r,o){this.configs=e,this.authService=t,this.iceServers=s,this.maxFps=n,this.maxBpp=i,this.connectionConstructor=o,this.messageBuffer=new p.MessageBufferService,this.connectionGroup=new u.PeerConnectionGroup(this.configs.localNode.getId(),this.messageBuffer,r),this.signalingServer=new d.AppSyncPubSubConnection(this.configs.vendorId,this.configs.clusterId,this.configs.localNode,"server",this.authService),this.connectionPool=new h.PeerConnectionPool(this.configs.localNode.getId(),this.messageBuffer),this.connectionPool.addConnection(this.connectionGroup),this.connectionPool.addConnection(this.signalingServer),this.configs.mediator.registerSystemSource(this.connectionPool)}close(){this.messageBuffer.close(),this.connections.forEach(((e,t)=>this.closeConnection(t))),this.configs.mediator.unregisterSystemSource(this.connectionPool),this.connectionPool.removeConnection(this.signalingServer),this.connectionPool.removeConnection(this.connectionGroup),this.connectionPool.close(),this.signalingServer.close(),this.connectionGroup.close()}async initialize(){await this.signalingServer.connect()}async createConnection(e,t=r.PeerConnectionType.Core){if(this.connections.has(e)){if(this.connections.get(e)?.getConnectionType()===r.PeerConnectionType.Optimization&&t===r.PeerConnectionType.Core)return void this.connections.get(e)?.setConnectionType(r.PeerConnectionType.Core);throw new i.SDKInternalError(i.SDKInternalError.codes.RemoteConnectionExists,{localId:this.configs.localNode.getId(),remoteId:e})}const s=new l.PeerConnection(this.configs.clusterId,this.configs.localNode,e,this.iceServers,t,this.maxFps,this.maxBpp,this.connectionConstructor);this.connections.set(e,s),this.connectionGroup.addConnection(s),this.configs.mediator.registerSystemSource(s),this.configs.mediator.registerRemoteNode(e),await s.connect()}getConnectionGroup(){return this.connectionGroup}getConnection(e){if(!this.connections.has(e))throw new i.SDKInternalError(i.SDKInternalError.codes.MissingRemoteConnection,{localId:this.configs.localNode.getId(),remoteId:e});return this.connections.get(e)}getConnections(e){const t=Array.from(this.connections.values());return e?t.filter(e):t}async collectStats(e){const t=this.connections.get(e);t&&t.isConnected()&&await t.collectStats()}handleOutgoingSystemEvents(e){if(e.messageType!==c.SystemMessageType.PeerConnection||e.propagate)try{this.connectionGroup.send(e)}catch(e){if(e instanceof n.EarlyReturnError)return;throw e}else this.connectionPool.send(e)}async handlePeerConnectionSystemEvents(e){switch(e.content.type){case r.PeerConnectionMessageType.Disconnect:case r.PeerConnectionMessageType.Stats:case r.PeerConnectionMessageType.OptimizationConnectionSuccess:return}if(!e.destinationIds||1!==e.destinationIds.length)throw new i.SDKInternalError(i.SDKInternalError.codes.PeerConnectionInvalidDestination,{message:"Peer Connection system events must have exactly one destination",event:e});if(e.destinationIds[0]!==this.configs.localNode.getId())throw new i.SDKInternalError(i.SDKInternalError.codes.PeerConnectionInvalidDestination,{message:"Incoming Peer Connection events must have the local id as a destination",event:e});if(!this.connections.has(e.sourceId)){let t=r.PeerConnectionType.Core;if(!(this.isOffer(e.content)||this.isIceCandidate(e.content)||this.isNeedRestart(e.content)))return;t=e.content.connectionType,await this.createConnection(e.sourceId,t)}const t=this.connections.get(e.sourceId);await t.handlePeerConnectionSystemEvents(e)}handleRemediationSystemEvents(e){if(e.content.type===a.RemediationMessageType.Remediation){if(e.content.targetId===this.configs.localNode.getId())return void this.connections.forEach((t=>t.handleRemediationSystemEvents(e)));this.connections.get(e.content.targetId)?.handleRemediationSystemEvents(e)}}handleNodeSystemEvents({content:e}){e.type===o.NodeMessageType.NodeLeave&&this.closeConnection(e.id)}closeConnection(e){const t=this.connections.get(e);t&&(this.configs.mediator.unregisterRemoteNode(e),this.configs.mediator.unregisterSystemSource(t),t instanceof l.PeerConnection&&this.connectionGroup.removeConnection(t),t.close(),this.connections.delete(e))}isOffer(e){return e.type===r.PeerConnectionMessageType.Offer}isNeedRestart(e){return e.type===r.PeerConnectionMessageType.NeedRestart}isIceCandidate(e){return e.type===r.PeerConnectionMessageType.Handshake}}},"./src/models/Connection/PeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{PeerConnection:()=>b});var n=s("@crewdle/web-sdk-types"),i=s("./src/constants/System.ts"),r=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Connection/PeerConnection.ts"),a=s("./src/interfaces/Subscription/MediaSubscriptionEvent.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Connection/BaseConnection.ts"),u=s("./src/models/Connection/ReceiverPeerConnection.ts"),h=s("./src/models/Connection/SenderPeerConnection.ts"),p=s("./src/models/Subscription/Helpers.ts"),g=s("./src/utils/Logger/Logger.ts"),m=s("./src/utils/Observer/Observer.ts");class b extends l.BaseConnection{iceServers;connectionType;maxFps;maxBpp;connectionConstructor;senderConnection;receiverConnection;receiverUnsubscribers=[];messageListeners=(0,m.createObserver)();trackListeners=(0,m.createObserver)();removeTrackListeners=(0,m.createObserver)();listenerUnsubscribers=[];systemTopic;dataTopics=new Map;dataUnsubscribers=new Map;mediaTopics=new Map;mediaUnsubscribers=new Map;successNotified=!1;constructor(e,t,s,n,i,r,o,a){super(e,t,s),this.iceServers=n,this.connectionType=i,this.maxFps=r,this.maxBpp=o,this.connectionConstructor=a}registerPublisher(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:this.dataTopics.set(e.getLabel(),e);break;case n.ContentType.Media:this.mediaTopics.set(e.getLabel(),e)}}unregisterPublisher(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:this.dataTopics.delete(e.getLabel());break;case n.ContentType.Media:this.mediaTopics.delete(e.getLabel())}}registerSubscriber(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:{const t=e.subscribe((e=>{(0,p.isSender)(e,this.getLocalId())&&(0,p.isReceiver)(e,this.remoteId)&&this.send(e)}));this.dataUnsubscribers.set(e.getLabel(),t);break}case n.ContentType.Media:{const t=e.subscribe((({content:e})=>{switch(e.action){case a.MediaSubscriptionAction.Add:this.addTrack(e.track,e.stream,e.priority,e.params);break;case a.MediaSubscriptionAction.Remove:this.removeTrack(e.track,e.stream);break;case a.MediaSubscriptionAction.Update:e.priority&&this.setPriority(e.stream,e.priority),e.params&&this.setParams(e.stream,e.params)}}));this.mediaUnsubscribers.set(e.getLabel(),t);break}}}unregisterSubscriber(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:this.dataUnsubscribers.get(e.getLabel())?.(),this.dataUnsubscribers.delete(e.getLabel());break;case n.ContentType.Media:this.mediaUnsubscribers.get(e.getLabel())?.(),this.mediaUnsubscribers.delete(e.getLabel())}}getSupportedContentTypes(){return[n.ContentType.Data,n.ContentType.Media,n.ContentType.PubSub,n.ContentType.ObjectStore,n.ContentType.KeyValueDatabase]}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}async connect(){this.setupListeners(),await this.createOffer()}close(){this.listenerUnsubscribers.forEach((e=>e())),this.listenerUnsubscribers=[],this.senderConnection?.unregisterSystemPublisher(),this.senderConnection?.close(),delete this.senderConnection,this.receiverUnsubscribers.forEach((e=>e())),this.receiverUnsubscribers=[],this.receiverConnection?.unregisterSystemPublisher(),this.receiverConnection?.close(),delete this.receiverConnection}isConnected(){return this.senderConnection?.isConnected()&&this.receiverConnection?.isConnected()||!1}send(e){if(!this.senderConnection||!this.isConnected())throw new r.SDKInternalError(r.SDKInternalError.codes.ConnectionNotinitialized,{message:"Sender connection is not initialized while trying to send a message.",senderConnected:this.senderConnection?.isConnected(),receiverConnected:this.receiverConnection?.isConnected(),localId:this.getLocalId(),remoteId:this.remoteId,data:e});this.senderConnection.send(e)}onMessage(e){return this.messageListeners.subscribe(e)}onTrack(e){return this.trackListeners.subscribe((({track:t,stream:s})=>e(t,s)))}onRemoveTrack(e){return this.removeTrackListeners.subscribe((({track:t,stream:s})=>e(t,s)))}addTrack(e,t,s,n){this.senderConnection?.addTrack(e,t,s,n)}setPriority(e,t){this.senderConnection?.setPriority(e,t)}setParams(e,t){this.senderConnection?.setParams(e,t)}removeTrack(e,t){this.senderConnection?.removeTrack(e,t)}async handlePeerConnectionSystemEvents(e){g.default.log(d.LoggingChannels.Connection,"CrewdleConnection handlePeerConnectionSystemEvents",this.getLocalId(),e);const{content:t}=e;switch(t.type){case o.PeerConnectionMessageType.Offer:await this.handleOffer(t);break;case o.PeerConnectionMessageType.Answer:await this.handleAnswer(t);break;case o.PeerConnectionMessageType.Success:this.handleSuccess();break;case o.PeerConnectionMessageType.Handshake:await this.handleIceCandidates(t);break;case o.PeerConnectionMessageType.NeedRestart:this.handleNeedRestart(t);break;case o.PeerConnectionMessageType.Restart:await this.createOffer()}}handleRemediationSystemEvents(e){this.senderConnection?.applyRemediation(e.content.data)}getConnectionType(){return this.connectionType}setConnectionType(e){this.connectionType=e,this.senderConnection?.setConnectionType(e),this.receiverConnection?.setConnectionType(e)}async collectStats(){await(this.senderConnection?.collectStats()),await(this.receiverConnection?.collectStats())}setupListeners(){this.listenerUnsubscribers.push(this.onMessage((e=>{(0,p.isReceiver)(e,this.getLocalId())&&e.topicLabel!==i.SYSTEM_TOPIC&&this.dataTopics.get(e.topicLabel)?.publish(e)}))),this.listenerUnsubscribers.push(this.onTrack(((e,t)=>{const s=(0,p.getTopicLabel)(n.ContentType.Media,t.id,this.remoteId);this.mediaTopics.get(s)?.publish({topicLabel:s,sourceId:this.remoteId,contentType:n.ContentType.Media,content:{action:a.MediaSubscriptionAction.RemoteAdd,track:e,stream:t,providerId:this.remoteId}})}))),this.listenerUnsubscribers.push(this.onRemoveTrack(((e,t)=>{const s=(0,p.getTopicLabel)(n.ContentType.Media,t.id,this.remoteId);this.mediaTopics.get(s)?.publish({topicLabel:s,sourceId:this.remoteId,contentType:n.ContentType.Media,content:{action:a.MediaSubscriptionAction.RemoteRemove,track:e,stream:t,providerId:this.remoteId}})})))}handleIceCandidates({candidates:e,origin:t,version:s}){return t===o.PeerConnectionOrigin.Sender?(this.receiverConnection||this.createReceiverConnection(),this.receiverConnection.handleHandshake(e,s)):this.senderConnection.handleHandshake(e,s)}async createOffer(){this.senderConnection||this.createSenderConnection(),await this.senderConnection.createOffer()}async handleOffer({offer:e,version:t}){this.receiverConnection||this.createReceiverConnection(),await this.receiverConnection.handleOffer(e,t)}async handleAnswer({answer:e,version:t}){if(!this.senderConnection)throw new r.SDKInternalError(r.SDKInternalError.codes.ConnectionNotinitialized,{message:"Sender connection is not initialized.",localId:this.getLocalId(),remoteId:this.remoteId,answer:e});await this.senderConnection.handleAnswer(e,t)}handleSuccess(){if(!this.receiverConnection)throw new r.SDKInternalError(r.SDKInternalError.codes.ConnectionNotinitialized,{message:"Receiver connection is not initialized.",localId:this.getLocalId(),remoteId:this.remoteId});this.receiverConnection.handleSuccess(),this.successNotified||this.connectionType!==o.PeerConnectionType.Optimization||(this.successNotified=!0,this.systemTopic?.publish({sourceId:this.remoteId,destinationIds:[this.getLocalId()],messageType:c.SystemMessageType.PeerConnection,content:{type:o.PeerConnectionMessageType.OptimizationConnectionSuccess}}))}handleNeedRestart(e){this.receiverConnection||this.createReceiverConnection(),this.receiverConnection.handleNeedRestart(e.version)}createSenderConnection(){this.senderConnection=new h.SenderPeerConnection(this.clusterId,this.localNode,this.remoteId,this.iceServers,this.connectionType,this.maxFps,this.maxBpp,this.connectionConstructor),this.senderConnection.registerSystemPublisher(this.systemTopic)}createReceiverConnection(){this.receiverConnection=new u.ReceiverPeerConnection(this.clusterId,this.localNode,this.remoteId,this.iceServers,this.connectionType,this.connectionConstructor),this.receiverConnection.registerSystemPublisher(this.systemTopic),this.receiverUnsubscribers.push(this.receiverConnection.onMessage((e=>this.messageListeners.publish(e)))),this.receiverUnsubscribers.push(this.receiverConnection.onTrack(((e,t)=>this.trackListeners.publish({track:e,stream:t})))),this.receiverUnsubscribers.push(this.receiverConnection.onRemoveTrack(((e,t)=>this.removeTrackListeners.publish({track:e,stream:t}))))}}},"./src/models/Connection/PeerConnectionGroup.ts":(e,t,s)=>{s.r(t),s.d(t,{PeerConnectionGroup:()=>S});var n=s("@crewdle/web-sdk-types"),i=s("./src/constants/Connection.ts"),r=s("./src/constants/System.ts"),o=s("./src/errors/EarlyReturnError.ts"),a=s("./src/errors/SDKInternalError.ts"),c=s("./src/interfaces/Connection/PeerConnection.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Subscription/Helpers.ts"),u=s("./src/utils/Interval/Interval.ts"),h=s("./src/utils/Logger/Logger.ts"),p=s("./src/utils/Logger/Helpers.ts"),g=s("./src/utils/Observer/Observer.ts"),m=s("./src/utils/Queue/Queue.ts"),b=s("./src/utils/Queue/VersionedRetryQueue.ts");class S{localId;messageBuffer;graphService;connections=new Map;messageListeners=(0,g.createObserver)();messageUnsubscriber;dataTopics=new Map;dataUnsubscribers=new Map;retryQueues=new Map;constructor(e,t,s){this.localId=e,this.messageBuffer=t,this.graphService=s,this.messageUnsubscriber=this.onMessage((e=>{this.messageBuffer.hasMessage(e.uuid)||((0,l.isReceiver)(e,this.localId)&&e.topicLabel!==r.SYSTEM_TOPIC&&(this.messageBuffer.addMessage(e.uuid),this.dataTopics.get(e.topicLabel)?.publish(e)),e.propagate&&this.send(e))}))}close(){this.messageUnsubscriber?.()}addConnection(e){const t=e.onMessage((e=>{this.messageListeners.publish(e)}));this.connections.set(e,t),this.retryQueues.set(e.getRemoteId(),(0,b.createVersionedRetryQueue)(new m.SyncQueueCallback((t=>e.send(t)),(()=>u.default.wait(i.CONNECTION_GROUP_RETRY_DELAY)))))}removeConnection(e){this.connections.get(e)?.(),this.connections.delete(e),this.retryQueues.get(e.getRemoteId())?.clear(),this.retryQueues.delete(e.getRemoteId())}isConnected(e){return h.default.log(d.LoggingChannels.ConnectionState,"ConnectionGroup",this.localId,this.connections.keys()),0!==this.connections.size&&(Array.from(this.connections.keys()).find((t=>t.getRemoteId()===e))?.isConnected()??!1)}registerPublisher(e){this.dataTopics.set(e.getLabel(),e)}unregisterPublisher(e){this.dataTopics.delete(e.getLabel())}registerSubscriber(e){const t=e.subscribe(this.send.bind(this));this.dataUnsubscribers.set(e.getLabel(),t)}unregisterSubscriber(e){this.dataUnsubscribers.get(e.getLabel())?.(),this.dataUnsubscribers.delete(e.getLabel())}getSupportedContentTypes(){return[n.ContentType.Data,n.ContentType.PubSub,n.ContentType.ObjectStore,n.ContentType.KeyValueDatabase]}send(e){if(!1===e.retry){if(e.propagate||!e.destinationIds||1!==e.destinationIds.length)throw new a.SDKInternalError(a.SDKInternalError.codes.ConnectionInvalidDataEvent,{message:"CrewdleConnectionGroup: Cannot broadcast with AppSync.",localId:this.localId});if(!this.isConnected(e.destinationIds[0]))throw new o.EarlyReturnError("Ignoring message - retry flag is false")}const t=e.recipients??[];try{const{filteredDestinationIds:s,extendedRecipients:n}=this.updatePropagationProperties(e,t);e.destinationIds=s,e.recipients=n}catch(t){if(t instanceof o.EarlyReturnError)return void h.default.log(d.LoggingChannels.Connection,"CrewdleConnectionGroup","Early return",e,t.message)}const s=this.shouldContinuePropagation(e);this.logPropagateSystemEvent(e,s),e.propagate=s;const n=this.getConnectionDestinations(e,t);for(const t of n){const s=this.retryQueues.get(t.getRemoteId());if(!s)throw new a.SDKInternalError(a.SDKInternalError.codes.ConnectionNoRetryQueue,{message:"CrewdleConnectionGroup: No retry queue available.",localId:this.localId,remoteId:t.getRemoteId(),data:e});s.push(e)}}getRemoteId(){return""}getLocalId(){return this.localId}onMessage(e){return this.messageListeners.subscribe(e)}updatePropagationProperties(e,t){const s={filteredDestinationIds:e.destinationIds,extendedRecipients:e.recipients};if(!e.propagate)return s;const n=Array.from(this.connections.keys()).filter((e=>e.getConnectionType()===c.PeerConnectionType.Core||e.isConnected())).map((e=>e.getRemoteId()));if(n.reduce(((t,s)=>t&&e.recipients.includes(s)),!0))throw new o.EarlyReturnError("All recipients already received");if(e.destinationIds){const t=e.destinationIds.filter((t=>t!==this.localId&&!e.recipients.includes(t)));if(0===t.length)throw new o.EarlyReturnError("No destinationIds left");s.filteredDestinationIds=t}return s.extendedRecipients=[...new Set([...t,...n,this.localId])],s}logPropagateSystemEvent(e,t=!1){if(e.topicLabel===r.SYSTEM_TOPIC&&!(0,l.isSender)(e,this.localId)&&e.propagate){const s=(0,p.getFormattedSytemLog)(e,this.localId);h.default.logRaw(d.LoggingChannels.System,`${e.uuid} - Sending propagation (${t}) ${s}`,e,t)}}shouldContinuePropagation(e){if(e.destinationIds&&e.propagate){const t=Array.from(this.connections.keys()).filter((e=>e.getConnectionType()===c.PeerConnectionType.Core||e.isConnected())).map((e=>e.getRemoteId()));return!e.destinationIds.reduce(((e,s)=>e&&t.includes(s)),!0)}return e.propagate??!1}getConnectionDestinations(e,t){if(e.propagate&&e.destinationIds){const t=Array.from(this.connections.keys()).filter((e=>e.getConnectionType()===c.PeerConnectionType.Core||e.isConnected())).map((e=>e.getRemoteId())),s=new Set,n=e.sourceId===this.localId?3:1;return e.destinationIds.forEach((e=>{const i=this.graphService.getClosestNodes(t,e);let r=0,o=0;i.forEach((e=>{if(r>=n)return;const t=Array.from(this.connections.keys()).find((t=>t.getRemoteId()===e));if(t){if(t.getConnectionType()===c.PeerConnectionType.Core&&o>0)return void(o-=1);s.add(t),t.getConnectionType()===c.PeerConnectionType.Optimization&&(o+=1),r+=1}}))})),Array.from(s)}return Array.from(this.connections.keys()).filter((s=>{return n=s.getRemoteId(),!t.includes(n)&&((0,l.isReceiver)(e,n)||e.propagate)&&(!e.propagate||s.isConnected()||s.getConnectionType()===c.PeerConnectionType.Core);var n}))}}},"./src/models/Connection/PeerConnectionPool.ts":(e,t,s)=>{s.r(t),s.d(t,{PeerConnectionPool:()=>d});var n=s("@crewdle/web-sdk-types"),i=s("./src/constants/System.ts"),r=s("./src/errors/EarlyReturnError.ts"),o=s("./src/interfaces/Utils/Logger.ts"),a=s("./src/models/Subscription/Helpers.ts"),c=s("./src/utils/Logger/Logger.ts");class d{localId;messageBuffer;connections=new Map;systemTopic;constructor(e,t){this.localId=e,this.messageBuffer=t}close(){}send(e){for(const t of this.connections.keys())try{return void t.send({retry:!1,...e})}catch(s){s instanceof r.EarlyReturnError||c.default.log(o.LoggingChannels.Pool,`send error on ${t}`,s,e)}c.default.log(o.LoggingChannels.Pool,"No connections available to send message")}addConnection(e){const t=e.onMessage((e=>{this.messageBuffer.hasMessage(e.uuid)||e.topicLabel===i.SYSTEM_TOPIC&&(this.messageBuffer.addMessage(e.uuid),(0,a.isReceiver)(e,this.localId)&&this.systemTopic?.publish(e))}));this.connections.set(e,t)}removeConnection(e){this.connections.get(e)?.(),this.connections.delete(e)}getLocalId(){return this.localId}getRemoteId(){return""}getSupportedContentTypes(){return[n.ContentType.Data]}isConnected(){throw new Error("Method not implemented.")}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}}},"./src/models/Connection/ReceiverPeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{ReceiverPeerConnection:()=>b});var n=s("uuid"),i=s("./src/constants/Content.ts"),r=s("./src/constants/System.ts"),o=s("./src/constants/PeerConnection.ts"),a=s("./src/interfaces/Connection/PeerConnection.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Connection/BasePeerConnection.ts"),u=s("./src/models/Stats/Helpers.ts"),h=s("./src/utils/Interval/Interval.ts"),p=s("./src/utils/Logger/Helpers.ts"),g=s("./src/utils/Logger/Logger.ts"),m=s("./src/utils/Observer/Observer.ts");class b extends l.BasePeerConnection{messageCallback=(0,m.createSingleObserver)();trackCallback=(0,m.createSingleObserver)();removeTrackCallback=(0,m.createSingleObserver)();receivers=new Map;chunks=new Map;waitSuccess;messagesReceived=0;systemMessagesReceived={messages:{total:0}};bytesReceived=0;timeReceiving=0;close(){this.clearWaitSuccess(),this.receivers.clear(),super.close()}async handleOffer(e,t){this.currentVersion=t,this.clearWaitSuccess();const s=await this.connection.createAnswer(e);this.processPendingHandshakeCandidates();const i=(0,n.v4)();this.publishSystemMessage({type:a.PeerConnectionMessageType.Answer,answer:s,version:t,connectionType:this.connectionType},i),this.connectionType===a.PeerConnectionType.Core&&(this.waitSuccess=h.default.setInterval((()=>{this.publishSystemMessage({type:a.PeerConnectionMessageType.Answer,answer:s,version:t,connectionType:this.connectionType},i)}),o.PEER_CONNECTION_MESSAGE_RETRY))}handleSuccess(){this.clearWaitSuccess()}handleNeedRestart(e){this.resetConnection(e),this.publishSystemMessage({type:a.PeerConnectionMessageType.Restart})}async collectStats(){this.systemTopic&&(await this.connection.collectReceiversStats(this.receivers,((e,t)=>{(0,u.sendStats)({type:a.PeerConnectionMessageType.Stats,streamId:t,nodeId:this.remoteId,stats:e},this.systemTopic)})),this.systemTopic.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.PeerConnection,content:{type:a.PeerConnectionMessageType.Stats,nodeId:this.remoteId,stats:{origin:a.PeerConnectionOrigin.Receiver,timestamp:Date.now(),messagesReceived:this.messagesReceived,bytesReceived:this.bytesReceived,timeReceiving:this.timeReceiving,systemMessages:this.systemMessagesReceived}}}))}onMessage(e){return this.messageCallback.subscribe(e)}onTrack(e){return this.trackCallback.subscribe((({track:t,stream:s})=>e(t,s)))}onRemoveTrack(e){return this.removeTrackCallback.subscribe((({track:t,stream:s})=>e(t,s)))}resetConnection(e){this.clearWaitSuccess(),this.receivers.forEach((e=>{e.clear()})),super.resetConnection(e)}sendIceCandidates(){this.publishSystemMessage({type:a.PeerConnectionMessageType.Handshake,candidates:this.handshakeCandidates,origin:a.PeerConnectionOrigin.Receiver,version:this.currentVersion,connectionType:this.connectionType})}setupConnectionEvents(){super.setupConnectionEvents(),this.connection.onTrack=e=>{g.default.log(d.LoggingChannels.Connection,"CrewdleReceiverConnection ontrack",this.localNode.getId(),e),e.streams[0].onremovetrack=t=>{this.receivers.get(e.streams[0].id)?.delete(t.track),0===this.receivers.get(e.streams[0].id)?.size&&this.receivers.delete(e.streams[0].id),this.removeTrackCallback.publish({track:t.track,stream:e.streams[0]})},this.receivers.has(e.streams[0].id)||this.receivers.set(e.streams[0].id,new Set),this.receivers.get(e.streams[0].id).add(e.track),this.trackCallback.publish({track:e.track,stream:e.streams[0]})},this.connection.onDataChannel=e=>{this.dataChannel=e.channel,this.dataChannel.onMessage=e=>{if(e.data!==o.PEER_CONNECTION_HEARTBEAT_PING)this.handleOnMessage(e.data);else{if(!this.dataChannel)return void g.default.error("missing-datachannel",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type,remoteId:this.remoteId,data:{connection:"receiver"}});if("open"!==this.dataChannel.state)return;this.dataChannel.send(o.PEER_CONNECTION_HEARTBEAT_PONG)}}}}handleOnMessage(e){if("string"==typeof e&&e.startsWith(o.PEER_CONNECTION_CHUNK_IDENTIFIER))return this.messagesReceived+=1,this.bytesReceived+=e.length,this.handleChunkMessage(e);setTimeout((()=>{const t=Date.now();let s;if((e instanceof ArrayBuffer||e.length<=o.PEER_CONNECTION_CHUNK_SIZE)&&(this.messagesReceived+=1,this.bytesReceived+=e instanceof ArrayBuffer?e.byteLength:e.length),e instanceof ArrayBuffer){const[t,n]=this.splitParts(e);s=t,s.content.data=n}else s=JSON.parse(e);if(s.topicLabel===r.SYSTEM_TOPIC){this.systemMessagesReceived.messages.total+=1;const{systemMessageType:e,systemContentMessageType:t}=(0,p.getLoggableSystemMessage)(s);this.systemMessagesReceived[e]||(this.systemMessagesReceived[e]={[t]:0}),this.systemMessagesReceived[e][t]||(this.systemMessagesReceived[e][t]=0),this.systemMessagesReceived[e].total||(this.systemMessagesReceived[e].total=0),this.systemMessagesReceived[e][t]+=1,this.systemMessagesReceived[e].total+=1}this.messageCallback.publish(s),this.timeReceiving+=Date.now()-t}),0)}handleChunkMessage(e){const t=e.split(";"),s=t[1],n=parseInt(t[2],10),i=parseInt(t[3],10),r=e.replace(`${o.PEER_CONNECTION_CHUNK_IDENTIFIER};${s};${n};${i};`,"");this.chunks.has(s)||this.chunks.set(s,[]);const a=this.chunks.get(s);a[n]=r,a.length===i&&(this.handleOnMessage(a.join("")),this.chunks.delete(s))}clearWaitSuccess(){this.waitSuccess?.(),delete this.waitSuccess}arrayBufferToObject(e){const t=(new TextDecoder).decode(e);return JSON.parse(t)}splitParts(e){const t=new Uint8Array(e.slice(0,i.CONTENT_FILE_HEADER_SIZE)),s=new Uint32Array(t.buffer)[0],n=new Uint8Array(e.slice(i.CONTENT_FILE_HEADER_SIZE,i.CONTENT_FILE_HEADER_SIZE+s)),r=new Uint8Array(e.slice(i.CONTENT_FILE_HEADER_SIZE+s));return[this.arrayBufferToObject(n.buffer),r.buffer]}}},"./src/models/Connection/SenderPeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{SenderPeerConnection:()=>I});var n=s("uuid"),i=s("./src/constants/Content.ts"),r=s("./src/constants/Remediation.ts"),o=s("./src/constants/System.ts"),a=s("./src/constants/PeerConnection.ts"),c=s("./src/errors/SDKInternalError.ts"),d=s("./src/interfaces/Connection/PeerConnection.ts"),l=s("./src/interfaces/Remediation/Remediation.ts"),u=s("./src/interfaces/Subscription/SystemEvent.ts"),h=s("./src/interfaces/Utils/Logger.ts"),p=s("./src/interfaces/Utils/Queue.ts"),g=s("./src/models/Connection/BasePeerConnection.ts"),m=s("./src/models/Remediation/Helpers.ts"),b=s("./src/models/Stats/Helpers.ts"),S=s("./src/utils/Interval/Interval.ts"),y=s("./src/utils/Logger/Logger.ts"),T=s("./src/utils/Queue/PriorityRetryQueue.ts"),C=s("./src/utils/Queue/Queue.ts");class I extends g.BasePeerConnection{maxFps;maxBpp;senders=new Map;heartbeatUnsubscriber;waitAnswer;lastHeartbeat;isReconnecting=!1;connectionTimeout;restartTimeout;upgradeTimeout;retryQueue=(0,T.createPriorityRetryQueue)(new C.SyncQueueCallback(this.sendAction.bind(this),this.waitSendBuffer.bind(this)));messagesSent=0;bytesSent=0;timeSending=0;roundTripTime=0;oncloseTimeout;constructor(e,t,s,n,i,r,o,a){super(e,t,s,n,i,a),this.maxFps=r,this.maxBpp=o}close(){this.clearUpgradeTimeout(),this.clearHeartbeat(),delete this.lastHeartbeat,this.clearRestartTimeout(),this.clearConnectionTimeout(),this.clearWaitAnswer(),this.senders.clear(),this.isReconnecting=!1,this.retryQueue.queues.forEach((e=>e.clear())),this.clearOncloseTimeout(),super.close()}isConnected(){return!!this.lastHeartbeat&&super.isConnected()&&Date.now()-this.lastHeartbeat<a.PEER_CONNECTION_HEARTBEAT_THRESHOLD}async collectStats(){this.systemTopic&&(await this.connection.collectSendersStats(this.senders,((e,t)=>{(0,b.sendStats)({type:d.PeerConnectionMessageType.Stats,streamId:t,nodeId:this.remoteId,stats:e},this.systemTopic)})),this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.PeerConnection,content:{type:d.PeerConnectionMessageType.Stats,nodeId:this.remoteId,stats:{origin:d.PeerConnectionOrigin.Sender,timestamp:Date.now(),messagesSent:this.messagesSent,bytesSent:this.bytesSent,timeSending:this.timeSending,roundTripTime:this.roundTripTime}}}))}async createOffer(e){y.default.log(h.LoggingChannels.Connection,"CrewdleSenderConnection createOffer",this.localNode.getId(),this.remoteId),this.clearRestartTimeout(),this.clearConnectionTimeout(),this.clearWaitAnswer(),this.connectionTimeout=setTimeout((()=>{this.handleDisconnect()}),a.PEER_CONNECTION_TIMEOUT),this.dataChannel||(this.dataChannel=this.connection.createDataChannel("data"),this.dataChannel.bufferedAmountLowThreshold=a.PEER_CONNECTION_BUFFER_THRESHOLD,this.dataChannel.onClose=()=>{this.oncloseTimeout=setTimeout((()=>{delete this.oncloseTimeout,["connecting","open"].includes(this.dataChannel?.state??"")||this.handleDisconnect()}),a.PEER_CONNECTION_DATACHANNEL_DISCONNECT_HANDLER_DELAY)});const t=await this.connection.createOffer(e);this.lastHeartbeat||(this.lastHeartbeat=Date.now());const s=(0,n.v4)();this.publishSystemMessage({type:d.PeerConnectionMessageType.Offer,offer:t,version:this.currentVersion,connectionType:this.connectionType},s),this.connectionType===d.PeerConnectionType.Core&&(this.waitAnswer=S.default.setInterval((()=>{this.publishSystemMessage({type:d.PeerConnectionMessageType.Offer,offer:t,version:this.currentVersion,connectionType:this.connectionType},s)}),a.PEER_CONNECTION_MESSAGE_RETRY))}async handleAnswer(e,t){if(t===this.currentVersion){this.clearWaitAnswer();try{await this.connection.handleAnswer(e,this.createOffer.bind(this)),this.processPendingHandshakeCandidates(),this.clearConnectionTimeout(),this.startHeartbeat()}catch(e){this.handleDisconnect()}}}send(e){if(!this.dataChannel)throw new c.SDKInternalError(c.SDKInternalError.codes.InvalidDataChannel,{message:"DataChannel is not initialized.",localId:this.localNode.getId(),remoteId:this.remoteId,eventMessage:e});if("open"!==this.dataChannel.state)throw new c.SDKInternalError(c.SDKInternalError.codes.InvalidDataChannel,{message:"Data cluster is not open.",localId:this.localNode.getId(),remoteId:this.remoteId,eventMessage:e});let t;if(e.content.data instanceof ArrayBuffer){const s=e.content.data;delete e.content.data,t=this.mergeParts(e,s)}else t=JSON.stringify(e);if("string"==typeof t&&t.length>a.PEER_CONNECTION_CHUNK_SIZE)return this.sendChunked(e,t);const s=e.topicLabel===o.SYSTEM_TOPIC&&[u.SystemMessageType.Subscription,u.SystemMessageType.PeerConnection].includes(e.messageType)?p.QueueElementPriority.High:e instanceof ArrayBuffer?p.QueueElementPriority.Low:p.QueueElementPriority.Medium;this.sendWithRetry(t,s)}addTrack(e,t,s,n){const i=(0,m.getMaxBitrate)(this.maxFps,this.maxBpp),r=this.senders.get(t.id)||{stream:t,priority:s,resolutionScale:1,minResolutionScale:1,bitrate:i,maxBitrate:i,framerate:this.maxFps,maxFramerate:this.maxFps,tracks:{},params:n},o=r.tracks[e.kind]||{track:e};if(o.sender?(o.track=e,this.connection.replaceTrack(e,o.sender)):o.sender=this.connection.addTrack(e,t),r.tracks[e.kind]=o,n&&(r.params=n),n&&"video"===n.kind&&n.resolution&&n.maxResolution&&(r.resolutionScale=this.getResolutionScale(n.resolution,n.maxResolution),r.minResolutionScale=r.resolutionScale,r.tracks.video&&r.tracks.video.sender)){const e=r.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*r.resolutionScale)/10,r.framerate,r.bitrate,r.priority)}this.senders.set(t.id,r)}setPriority(e,t){const s=this.senders.get(e.id);if(s&&s.priority!==t&&(s.priority=t,s.tracks.video&&s.tracks.video.sender)){const e=s.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*s.resolutionScale)/10,s.framerate,s.bitrate,s.priority)}}setParams(e,t){const s=this.senders.get(e.id);if(s){if(s.params=t,t&&"video"===t.kind&&t.resolution&&t.maxResolution){if(s.minResolutionScale=this.getResolutionScale(t.resolution,t.maxResolution),s.resolutionScale<s.minResolutionScale&&(s.resolutionScale=s.minResolutionScale),s.tracks.video&&s.tracks.video.sender){const e=s.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*s.resolutionScale)/10,s.framerate,s.bitrate,s.priority)}this.clearUpgradeTimeout(),this.setUpgradeTimeout()}this.senders.set(e.id,s)}}removeTrack(e,t){const s=this.senders.get(t.id);if(s){const t=s.tracks[e.kind];t&&(t.sender&&this.connection.removeTrack(t.sender),t.track=void 0)}}applyRemediation(e){this.clearUpgradeTimeout();const t=(0,m.findSender)(Array.from(this.senders.values()),e);if(t&&((0,m.applyRemediation)(t,e),t.tracks.video&&t.tracks.video.sender)){const e=t.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*t.resolutionScale)/10,t.framerate,t.bitrate,t.priority)}(t||e.action===l.RemediationAction.Downgrade)&&this.setUpgradeTimeout()}resetConnection(){super.resetConnection(),this.clearOncloseTimeout(),this.clearWaitAnswer(),this.senders.forEach((e=>{e.tracks.video&&(e.tracks.video.sender=void 0),e.tracks.audio&&(e.tracks.audio.sender=void 0)})),this.isReconnecting=!0}async waitSendBuffer(){return new Promise((async e=>{if(!this.dataChannel||"open"!==this.dataChannel.state)return await S.default.wait(a.PEER_CONNECTION_DATACHANNEL_RETRY_DELAY),void e();this.dataChannel.bufferedAmount<a.PEER_CONNECTION_BUFFER_THRESHOLD?e():this.dataChannel.onBufferedAmountLow=()=>{this.dataChannel&&(this.dataChannel.onBufferedAmountLow=null),e()}}))}sendChunked(e,t){const s=[];for(let e=0;e<t.length;e+=a.PEER_CONNECTION_CHUNK_SIZE)s.push(t.slice(e,e+a.PEER_CONNECTION_CHUNK_SIZE));for(const t of s)this.sendWithRetry(`${a.PEER_CONNECTION_CHUNK_IDENTIFIER};${e.uuid};${s.indexOf(t)};${s.length};${t}`,p.QueueElementPriority.Low)}async sendWithRetry(e,t){e===a.PEER_CONNECTION_HEARTBEAT_PING?this.retryQueue.queues[t].head?.value!==a.PEER_CONNECTION_HEARTBEAT_PING&&this.retryQueue.queues[t].unshift(e):this.retryQueue.queues[t].push(e)}sendAction(e){if(!this.dataChannel||"open"!==this.dataChannel.state)throw new Error("DataChannel is not open.");const t=Date.now();e!==a.PEER_CONNECTION_HEARTBEAT_PING&&(this.messagesSent+=1,this.bytesSent+=e instanceof ArrayBuffer?e.byteLength:e.length),ArrayBuffer,this.dataChannel.send(e),this.timeSending+=Date.now()-t}startHeartbeat(){this.heartbeatUnsubscriber&&this.clearHeartbeat();let e=!0,t=Date.now();this.lastHeartbeat=Date.now(),this.dataChannel.onMessage=s=>{s.data===a.PEER_CONNECTION_HEARTBEAT_PONG&&(this.roundTripTime=Date.now()-t,e&&this.publishSystemMessage({type:d.PeerConnectionMessageType.Success}),e=!1,this.lastHeartbeat=Date.now(),this.isReconnecting&&(this.isReconnecting=!1,this.handleMissingSenders()))},this.heartbeatUnsubscriber=S.default.setInterval((()=>{t=Date.now(),this.sendWithRetry(a.PEER_CONNECTION_HEARTBEAT_PING,p.QueueElementPriority.High),Date.now()-this.lastHeartbeat>(e&&6*a.PEER_CONNECTION_HEARTBEAT_THRESHOLD||a.PEER_CONNECTION_HEARTBEAT_THRESHOLD)&&this.handleDisconnect()}),a.PEER_CONNECTION_HEARTBEAT_INTERVAL)}handleMissingSenders(){this.senders.forEach((e=>{e.tracks.video&&e.tracks.video.track&&!e.tracks.video.sender&&(e.tracks.video.sender=this.connection.addTrack(e.tracks.video.track,e.stream)),e.tracks.audio&&e.tracks.audio.track&&!e.tracks.audio.sender&&(e.tracks.audio.sender=this.connection.addTrack(e.tracks.audio.track,e.stream))}))}sendIceCandidates(){this.publishSystemMessage({type:d.PeerConnectionMessageType.Handshake,candidates:this.handshakeCandidates,origin:d.PeerConnectionOrigin.Sender,version:this.currentVersion,connectionType:this.connectionType})}setupConnectionEvents(){super.setupConnectionEvents(),this.connection.onHandshakeStateChange=()=>{if("failed"===this.connection.handshakeState){y.default.log(h.LoggingChannels.ConnectionState,"iceConnectionState failed",this.localNode.getId(),this.remoteId);try{if(this.connection.canRestartHandshake)return void this.connection.restartHandshake()}catch(e){}this.createOffer({handshakeRestart:!0})}},this.connection.onConnectionStateChange=()=>{"disconnected"!==this.connection.connectionState&&"failed"!==this.connection.connectionState||this.handleDisconnect()}}handleDisconnect(){this.clearHeartbeat(),this.clearRestartTimeout(),this.clearConnectionTimeout(),y.default.warning("disconnect",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type,remoteId:this.remoteId,data:{connectionType:this.connectionType,connectionState:this.connection.connectionState,iceConnectionState:this.connection.handshakeState,signalingState:this.connection.signalingState,readyState:this.dataChannel?.state||"",lastHeartbeat:this.lastHeartbeat?Date.now()-this.lastHeartbeat:"",retryQueue:this.retryQueue}}),(this.lastHeartbeat&&Date.now()-this.lastHeartbeat>a.PEER_CONNECTION_HEARTBEAT_TIMEOUT)??1?this.systemTopic.publish({sourceId:this.remoteId,destinationIds:[this.localNode.getId()],messageType:u.SystemMessageType.PeerConnection,content:{type:d.PeerConnectionMessageType.Disconnect}}):(this.resetConnection(),this.publishSystemMessage({type:d.PeerConnectionMessageType.NeedRestart,version:this.currentVersion,connectionType:this.connectionType}),this.restartTimeout=setTimeout((()=>{this.handleDisconnect()}),a.PEER_CONNECTION_RECONNECT_TIMEOUT))}clearHeartbeat(){this.heartbeatUnsubscriber?.(),delete this.heartbeatUnsubscriber}clearConnectionTimeout(){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),delete this.connectionTimeout)}clearRestartTimeout(){this.restartTimeout&&(clearTimeout(this.restartTimeout),delete this.restartTimeout)}clearUpgradeTimeout(){this.upgradeTimeout&&(clearTimeout(this.upgradeTimeout),delete this.upgradeTimeout)}setUpgradeTimeout(){this.upgradeTimeout=setTimeout((()=>{this.applyRemediation({type:l.RemediationMessageType.Remediation,action:l.RemediationAction.Upgrade})}),r.REMEDIATION_UPGRADE_WAIT_TIME)}getResolutionScale(e,t){const s=Math.max(e.width/t.width,e.height/t.height);return Math.min(Math.max(s,1),r.REMEDIATION_MAX_RESOLUTION_SCALE)}clearWaitAnswer(){this.waitAnswer?.(),delete this.waitAnswer}clearOncloseTimeout(){this.oncloseTimeout&&(clearTimeout(this.oncloseTimeout),delete this.oncloseTimeout)}objectToArrayBuffer(e){const t=JSON.stringify(e);return(new TextEncoder).encode(t).buffer}mergeParts(e,t){const s=this.objectToArrayBuffer(e),n=new Uint8Array(i.CONTENT_FILE_HEADER_SIZE),r=new Uint8Array(s),o=new Uint8Array(t);n.set(new Uint8Array(new Uint32Array([r.length]).buffer));const a=new Uint8Array(i.CONTENT_FILE_HEADER_SIZE+r.length+o.length);return a.set(n),a.set(r,i.CONTENT_FILE_HEADER_SIZE),a.set(o,i.CONTENT_FILE_HEADER_SIZE+r.length),a.buffer}}},"./src/models/Content/BaseDataStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseDataStream:()=>a});var n=s("@crewdle/web-sdk-types"),i=s("./src/errors/SDKInternalError.ts"),r=s("./src/models/Content/BaseStream.ts"),o=s("./src/utils/ObjectStore/Helpers.ts");class a extends r.BaseStream{outgoingTopic;incomingTopic;fileChunks=new Map;messagesSent=0;messagesReceived=0;bytesSent=0;bytesReceived=0;constructor(e,t){super(e,t)}getLabel(){return this.label}getName(){return this.label}getContentType(){return n.ContentType.Data}getInternalStreamId(){return this.label}registerPublisher(e){if(this.outgoingTopic)throw new i.SDKInternalError(i.SDKInternalError.codes.InvalidPublisher,{message:`Publisher already registered on PubSubTopic ${this.owner.getId()} - ${this.label}`,topic:this.outgoingTopic});this.outgoingTopic=e}registerSubscriber(e){if(this.incomingTopic)throw new i.SDKInternalError(i.SDKInternalError.codes.InvalidSubscriber,{message:`Subscriber already registered on PubSubTopic ${this.owner.getId()} - ${this.label}`,topic:this.incomingTopic});this.incomingTopic=e}unregisterPublisher(){delete this.outgoingTopic}unregisterSubscriber(){delete this.incomingTopic}async send(e,t){if(this.messagesSent+=1,e instanceof File){const s=await(0,o.readFileContent)(e);return this.bytesSent+=s.reduce(((e,t)=>e+t.byteLength),0),void s.forEach(((i,r)=>{this.outgoingTopic.publish({sourceId:this.owner.getId(),destinationIds:t,propagate:!0,contentType:n.ContentType.File,content:{name:e.name,type:e.type,data:i,index:r,total:s.length}})}))}this.bytesSent+=JSON.stringify(e).length,this.outgoingTopic.publish({sourceId:this.owner.getId(),destinationIds:t,propagate:!0,contentType:n.ContentType.Data,content:e})}onMessage(e){return this.incomingTopic.subscribe((t=>{switch(t.contentType){case n.ContentType.Data:this.messagesReceived+=1,this.bytesReceived+=JSON.stringify(t.content).length,e(t.sourceId,t.content);break;case n.ContentType.File:this.fileChunks.has(t.content.name)||this.fileChunks.set(t.content.name,[]);const s=this.fileChunks.get(t.content.name);s[t.content.index]=t.content.data,s.length===t.content.total&&(this.messagesReceived+=1,this.bytesReceived+=s.reduce(((e,t)=>e+t.byteLength),0),e(t.sourceId,(0,o.getFileContent)(s,t.content.name,t.content.type)),this.fileChunks.delete(t.content.name))}}))}}},"./src/models/Content/BaseLocalMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseLocalMediaStream:()=>u});var n=s("@crewdle/web-sdk-types"),i=s("./src/constants/System.ts"),r=s("./src/interfaces/Content/Content.ts"),o=s("./src/interfaces/Subscription/SystemEvent.ts"),a=s("./src/interfaces/Utils/Logger.ts"),c=s("./src/models/Content/BaseMediaStream.ts"),d=s("./src/models/Content/OutgoingMediaStream.ts"),l=s("./src/utils/Logger/Logger.ts");class u extends c.BaseMediaStream{clusterId;priority=n.MediaStreamPriority.Default;trackEndedListeners=new Map;outgoingStreams=new Map;constructor(e,t,s,n){super(e,t,s instanceof MediaStream?s:s.srcObject?s.srcObject:s.captureStream()),this.clusterId=n,this.mediaStream.getTracks().forEach((e=>this.setupTrackEndedListeners(e))),l.default.logServiceEvent(a.LoggingServices.MediaStream,{type:"publish",label:this.label,nodeId:this.owner.getId(),nodeType:this.owner.type,clusterId:this.clusterId,streamId:this.getInternalStreamId(),trackKinds:this.mediaStream.getTracks().map((e=>e.kind))})}destroy(){this.outgoingStreams.size>0&&(this.outgoingStreams.forEach((e=>{e.unregisterSystemPublisher(),e.destroy()})),this.outgoingStreams.clear()),this.trackEndedListeners.forEach((e=>e())),super.destroy()}publish(e){this.systemTopic.publish({sourceId:this.owner.getId(),destinationIds:e?[e]:void 0,propagate:!0,messageType:o.SystemMessageType.Content,content:{type:r.ContentMessageType.PublishMediaStream,ownerId:this.owner.getId(),label:this.label,stream:{streamId:this.getInternalStreamId(),availableTrackKinds:this.mediaStream.getTracks().map((e=>e.kind))}}})}unpublish(){this.systemTopic.publish({sourceId:this.owner.getId(),propagate:!0,messageType:o.SystemMessageType.Content,content:{type:r.ContentMessageType.UnpublishMediaStream,ownerId:this.owner.getId(),label:this.label}}),this.systemTopic.publish({sourceId:i.SYSTEM_TOPIC_INTERNAL,messageType:o.SystemMessageType.Content,content:{type:r.ContentMessageType.CloseMediaStream,label:this.label}}),l.default.logServiceEvent(a.LoggingServices.MediaStream,{type:"unpublish",label:this.label,nodeId:this.owner.getId(),nodeType:this.owner.type,clusterId:this.clusterId,streamId:this.getInternalStreamId()})}getPriority(){return this.priority}setPriority(e){this.priority=e,this.outgoingStreams.forEach((t=>t.setPriority(e)))}getShareableStream(e,t){if(!this.outgoingStreams.has(e)){const s=new d.OutgoingMediaStream(this.owner,this.label,this.mediaStream,e,t),n=s.onUnregisterPublisher((()=>{n(),this.outgoingStreams.get(e)?.destroy(),this.outgoingStreams.delete(e)}));this.outgoingStreams.set(e,s),s.registerSystemPublisher(this.systemTopic)}return this.outgoingStreams.get(e)}getShareableStreamId(){return this.mediaStream.id}handleLocalTrackFailure(e){this.systemTopic.publish({sourceId:i.SYSTEM_TOPIC_INTERNAL,messageType:o.SystemMessageType.Content,content:{type:r.ContentMessageType.LocalMediaStreamTrackFail,label:this.label,trackKinds:[e.kind]}})}setupTrackEndedListeners(e){const t=()=>this.handleLocalTrackFailure(e);e.addEventListener("ended",t),e.addEventListener("mute",t),this.trackEndedListeners.set(e.kind,(()=>{e.removeEventListener("ended",t),e.removeEventListener("mute",t),this.trackEndedListeners.delete(e.kind)}))}}},"./src/models/Content/BaseMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseMediaStream:()=>r});var n=s("@crewdle/web-sdk-types"),i=s("./src/models/Content/BaseStream.ts");class r extends i.BaseStream{mediaStream;constructor(e,t,s){super(e,t),this.mediaStream=s}getContentType(){return n.ContentType.Media}getMediaStream(){return this.mediaStream}getInternalStreamId(){return this.mediaStream.id}}},"./src/models/Content/BaseStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseStream:()=>n});class n{owner;label;systemTopic;constructor(e,t){this.owner=e,this.label=t}getLabel(){return this.label}getOwnerId(){return this.owner.getId()}destroy(){}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}}},"./src/models/Content/ContentManager.ts":(e,t,s)=>{s.r(t),s.d(t,{ContentManager:()=>y});var n=s("./src/public/errors/SDKClientError.ts"),i=s("./src/errors/SDKInternalError.ts"),r=s("./src/interfaces/Content/Content.ts"),o=s("./src/interfaces/Node/NodeMessage.ts"),a=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),c=s("./src/interfaces/Utils/Logger.ts"),d=s("./src/models/Content/ObjectStore.ts"),l=s("./src/models/Content/KeyValueDatabase.ts"),u=s("./src/models/Content/LocalDynamicMediaStream.ts"),h=s("./src/models/Content/LocalMediaStream.ts"),p=s("./src/models/Content/PubSubTopic.ts"),g=s("./src/models/Content/RemoteMediaStream.ts"),m=s("./src/models/Node/User.ts"),b=s("./src/services/Transaction/FirebaseRDBTransactionService.ts"),S=s("./src/utils/Logger/Logger.ts");class y{configs;maxFps;audioContext;localMediaStreams=new Map;remoteMediaStreams=new Map;pubSubTopics=new Map;objectStores=new Map;keyValueDatabases=new Map;transactionService;constructor(e,t,s){this.configs=e,this.maxFps=t,this.audioContext=s,this.transactionService=new b.FirebaseRDBTransactionService(this.configs.vendorId,this.configs.clusterId)}close(e=!1){this.remoteMediaStreams.forEach(((e,t)=>{e.forEach(((e,s)=>{this.removeRemoteMediaStream(t,s)}))})),e||(this.localMediaStreams.forEach(((e,t)=>{this.removeLocalMediaStream(t)})),this.pubSubTopics.forEach(((e,t)=>{this.removePubSubTopic(t)})),this.objectStores.forEach(((e,t)=>{this.removeObjectStore(t)})),this.keyValueDatabases.forEach(((e,t)=>{this.removeKeyValueDatabase(t)})))}createObjectStoreBucket(e,t){if(this.objectStores.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.ObjectStoreAlreadyExists,"Store already exists");const s=new d.ObjectStore(this.configs.localNode,e,this.configs.clusterId,this.configs.vendorId,this.transactionService,t);return this.objectStores.set(e,s),this.configs.mediator.registerSystemSource(s),s}async createKeyValueDatabase(e,t,s){if(this.keyValueDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseAlreadyExists,"Database already exists");try{const n=new l.KeyValueDatabase(this.configs.localNode,e,this.configs.clusterId,this.configs.vendorId,t,s);return this.keyValueDatabases.set(e,n),this.configs.mediator.registerSystemSource(n),n}catch(t){if(t instanceof n.SDKClientError)throw t;throw console.warn("Failed to create key value database",t),new i.SDKInternalError(i.SDKInternalError.codes.KeyValueDatabaseCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}createLocalDynamicMediaStream(e,t){if(this.localMediaStreams.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.LocalMediaStreamAlreadyExists,"Local MediaStream already exists");if(!this.audioContext)throw new n.SDKClientError(n.SDKClientErrorCodes.LocalMediaStreamNoAudioContext,"AudioContext is not available");const s=new u.LocalDynamicMediaStream(this.configs.localNode,e,t,this.maxFps,this.audioContext,this.configs.clusterId);return this.localMediaStreams.set(e,s),this.configs.mediator.registerSystemSource(s),s.publish(),s}createLocalMediaStream(e,t){if(this.localMediaStreams.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.LocalMediaStreamAlreadyExists,"Stream already exists");const s=new h.LocalMediaStream(this.configs.localNode,e,t,this.configs.clusterId);return this.localMediaStreams.set(e,s),this.configs.mediator.registerSystemSource(s),s.publish(),s}createPubSubTopic(e){if(this.pubSubTopics.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.PubSubTopicAlreadyExists,"PubSub already exists");const t=new p.PubSubTopic(this.configs.localNode,e,this.configs.clusterId);return this.pubSubTopics.set(e,t),this.configs.mediator.registerSystemSource(t),t}createRemoteMediaStream(e,t,s,i){this.remoteMediaStreams.has(e)||this.remoteMediaStreams.set(e,new Map);const r=this.remoteMediaStreams.get(e);if(r.has(t))throw new n.SDKClientError(n.SDKClientErrorCodes.RemoteMediaStreamAlreadyExists,"Remote MediaStream already exists");const o=new m.User(e,"",""),a=new g.RemoteMediaStream(this.configs.localNode,o,t,s,i,this.configs.clusterId);return r.set(t,a),this.configs.mediator.registerSystemSource(a),a}getObjectStoreBuckets(e){const t=Array.from(this.objectStores.values());return e?t.filter(e):t}getKeyValueDatabases(e){const t=Array.from(this.keyValueDatabases.values());return e?t.filter(e):t}getLocalMediaStreams(e){const t=Array.from(this.localMediaStreams.values());return e?t.filter(e):t}getPubSubTopics(e){const t=Array.from(this.pubSubTopics.values());return e?t.filter(e):t}getRemoteMediaStreams(e){const t=Array.from(this.remoteMediaStreams.values()).reduce(((e,t)=>[...e,...Array.from(t.values())]),[]);return e?t.filter(e):t}handleContentSystemEvents(e){switch(e.content.type){case r.ContentMessageType.PublishMediaStream:this.handlePublishMediaStream(e.content);break;case r.ContentMessageType.UnpublishMediaStream:this.handleUnpublishMediaStream(e.content);break;case r.ContentMessageType.CloseMediaStream:this.handleCloseMediaStream(e.content);break;case r.ContentMessageType.ClosePubSubTopic:this.handleClosePubSubTopic(e.content);break;case r.ContentMessageType.CloseObjectStoreBucket:this.handleCloseObjectStore(e.content);break;case r.ContentMessageType.CloseKeyValueDatabase:this.handleCloseKeyValueDatabase(e.content);break;case r.ContentMessageType.UnsubscribeMediaStream:this.handleContentUnsubscribeMediaStream(e.content);break;case r.ContentMessageType.RequestSyncKeyValueDatabase:this.keyValueDatabases.get(e.content.label)?.sendTransactionsDump(e.sourceId);break;case r.ContentMessageType.SendTransactionsDump:this.keyValueDatabases.get(e.content.label)?.processTransactionsDump(e.sourceId,e.content.transactions);break;case r.ContentMessageType.RequestTransactionsValue:this.keyValueDatabases.get(e.content.label)?.sendTransactionsValue(e.sourceId,e.content.transactionIds);break;case r.ContentMessageType.LocalMediaStreamTrackFail:this.configs.mediator.notifyCluster("local-media-stream-track-fail",{label:e.content.label,trackKinds:e.content.trackKinds})}}handleNodeSystemEvents({content:e}){switch(e.type){case o.NodeMessageType.NodeJoin:this.handleNodeJoinNeedPublishedStream(e),this.notifyObjectStoreOfNodeJoin(e);break;case o.NodeMessageType.NodeLeave:this.handleNodeLeave(e),this.notifyObjectStoreOfNodeLeave(e)}}handleSubscriptionSystemEvents(e){switch(e.content.type){case a.SubscriptionMessageType.SubscribeMediaStream:this.handleSubscribeMediaStream(e.sourceId,e.content);break;case a.SubscriptionMessageType.UpdateMediaStream:this.handleUpdateMediaStream(e.sourceId,e.content);break;case a.SubscriptionMessageType.UnsubscribeMediaStream:this.handleUnsubscribeMediaStream(e.sourceId,e.content)}}handleContentUnsubscribeMediaStream(e){if(0===e.remainingTracks)this.remoteMediaStreams.get(e.ownerId)?.get(e.label)?.destroy();else{const t=this.remoteMediaStreams.get(e.ownerId)?.get(e.label);if(!t)return;e.trackKinds.forEach((e=>t.unsubscribeTrackEndedListener(e)))}}handlePublishMediaStream(e){const{label:t,ownerId:s,stream:{streamId:n,availableTrackKinds:i}}=e;if(this.remoteMediaStreams.get(s)?.has(t))return void S.default.log(c.LoggingChannels.Content,"Stream already exists",n);const r=this.createRemoteMediaStream(s,t,n,i);this.configs.mediator.notifyCluster("content-publish-media",{ownerId:s,stream:r})}handleUnpublishMediaStream({ownerId:e,label:t}){this.removeRemoteMediaStream(e,t),this.configs.mediator.notifyCluster("content-unpublish-media",{ownerId:e,label:t})}handleCloseMediaStream(e){this.removeLocalMediaStream(e.label)}handleCloseObjectStore(e){this.removeObjectStore(e.label)}handleClosePubSubTopic(e){this.removePubSubTopic(e.label)}handleCloseKeyValueDatabase(e){this.removeKeyValueDatabase(e.label)}handleSubscribeMediaStream(e,t){const{ownerId:s,label:n}=t;let i;i=s!==this.configs.localNode.getId()?this.remoteMediaStreams.get(s).get(n):this.localMediaStreams.get(n),i.getShareableStream(e,t.params).subscribe(t,i.getPriority())}handleUpdateMediaStream(e,t){const{ownerId:s,label:n}=t;let i;i=s!==this.configs.localNode.getId()?this.remoteMediaStreams.get(s).get(n):this.localMediaStreams.get(n),i.getShareableStream(e,t.params).update(t)}handleUnsubscribeMediaStream(e,t){const{ownerId:s,label:n}=t;let i;i=s!==this.configs.localNode.getId()?this.remoteMediaStreams.get(s).get(n):this.localMediaStreams.get(n),i.getShareableStream(e).unsubscribe(t)}handleNodeJoinNeedPublishedStream({id:e}){this.getLocalMediaStreams().forEach((t=>{t.publish(e)}))}handleNodeLeave({id:e}){this.getRemoteMediaStreams((t=>t.getOwnerId()===e)).forEach((e=>{this.removeRemoteMediaStream(e.getOwnerId(),e.getLabel())}))}notifyObjectStoreOfNodeJoin({id:e}){this.objectStores.forEach((t=>t.handleNodeJoin(e)))}notifyObjectStoreOfNodeLeave({id:e}){this.objectStores.forEach((t=>t.handleNodeLeave(e)))}removeObjectStore(e){if(!this.objectStores.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.ObjectStoreDoesNotExist,"Stream does not exist");const t=this.objectStores.get(e);this.objectStores.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removePubSubTopic(e){if(!this.pubSubTopics.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.PubSubTopicDoesNotExist,"Stream does not exist");const t=this.pubSubTopics.get(e);this.pubSubTopics.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeKeyValueDatabase(e){if(!this.keyValueDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseDoesNotExist,"Database does not exist");const t=this.keyValueDatabases.get(e);this.keyValueDatabases.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeLocalMediaStream(e){if(!this.localMediaStreams.has(e))throw new i.SDKInternalError(i.SDKInternalError.codes.LocalMediaStreamDoesNotExist,{label:e,localId:this.configs.localNode.getId()});const t=this.localMediaStreams.get(e);this.configs.mediator.unregisterSystemSource(t),t.destroy(),this.localMediaStreams.delete(e)}removeRemoteMediaStream(e,t){if(!this.remoteMediaStreams.has(e))throw new i.SDKInternalError(i.SDKInternalError.codes.NodeDoesNotExist,{nodeId:e,localId:this.configs.localNode.getId()});const s=this.remoteMediaStreams.get(e);if(!s.has(t))throw new i.SDKInternalError(i.SDKInternalError.codes.RemoteMediaStreamDoesNotExist,{nodeId:e,label:t,localId:this.configs.localNode.getId()});const n=s.get(t);this.configs.mediator.unregisterSystemSource(n),n.destroy(),s.delete(t)}}},"./src/models/Content/KeyValueDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{KeyValueDatabase:()=>T});var n=s("@crewdle/web-sdk-types"),i=s("./src/public/errors/SDKClientError.ts"),r=s("./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts"),o=s("./src/public/models/Content/KeyValueDatabaseLayoutBuilder.ts"),a=s("./src/constants/Content.ts"),c=s("./src/constants/System.ts"),d=s("./src/errors/SDKInternalError.ts"),l=s("./src/interfaces/Content/Content.ts"),u=s("./src/interfaces/Content/DataContent.ts"),h=s("./src/interfaces/Subscription/SystemEvent.ts"),p=s("./src/interfaces/Utils/Logger.ts"),g=s("./src/models/Content/BaseDataStream.ts"),m=s("./src/models/Content/KeyValueDatabaseTable.ts"),b=s("./src/services/Firebase/FirebaseService.ts"),S=s("./src/utils/Observer/Observer.ts"),y=s("./src/utils/Logger/Logger.ts");class T extends g.BaseDataStream{localNode;clusterId;vendorId;db;dbKey;tables=new Map;tableObserver;transactionTable;tableUnsubscriber;isSync;syncResolve;transactionsToSync=[];timeoutCallback=()=>{};syncTimeout;eventListener=(0,S.createSingleObserver)();listenerUnsubscriber;syncTransactionsWritten=[];layout;debounceStats;writes=0;reads=0;constructor(e,t,s,n,r,a){if("string"!=typeof t)throw new i.SDKClientError(i.SDKClientErrorCodes.KeyValueDatabaseNameNotString,"Cannot create Key-Value Database: Name must be a string");if(super(e,t),this.localNode=e,this.clusterId=s,this.vendorId=n,this.dbKey=`ccc${this.vendorId}ccc${this.clusterId}ccc${this.label}`,this.tableObserver=(0,S.createSingleObserver)(),this.isSync=new Promise((e=>{this.syncResolve=e})),r instanceof o.LayoutBuilder)this.layout=r.getLayout();else{const[e,t]=o.LayoutBuilder.validateLayout(r);if(!e)throw new i.SDKClientError(i.SDKClientErrorCodes.KeyValueDatabaseInvalidLayout,`Invalid layout: ${t}`);this.layout=r}this.addReservedTables(this.layout),this.db=new a(this.dbKey,this.layout),this.sendStats()}reset(){this.sendStats()}getContentType(){return n.ContentType.KeyValueDatabase}destroy(){this.db.close(),this.tableUnsubscriber?.(),clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic.publish({sourceId:c.SYSTEM_TOPIC_INTERNAL,messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.CloseKeyValueDatabase,label:this.label}})}getTable(e){const t=this.tables.get(e);if(t)return t;try{if(!this.db.hasTable(e))throw new i.SDKClientError(i.SDKClientErrorCodes.KeyValueDatabaseTableNotFound,"Table not found");const t=new m.DatabaseTable(this.db.getTableConnector(e),e,this.tableObserver);return this.tables.set(e,t),{get:t.get.bind(t),set:t.set.bind(t),add:t.add.bind(t),delete:t.delete.bind(t),clear:t.clear.bind(t),list:t.list.bind(t),count:t.count.bind(t),subscribe:t.subscribe.bind(t),unsubscribe:t.unsubscribe.bind(t)}}catch(e){throw new i.SDKClientError(i.SDKClientErrorCodes.KeyValueDatabaseNotOpen,"Database not open")}}subscribe(e){this.listenerUnsubscriber=this.eventListener.subscribe(e)}unsubscribe(){this.listenerUnsubscriber?.()}async open(){const e=[a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME,a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME],t=[];try{await this.db.open();const s=this.db.getTableConnector(a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME),n=await s.list(),{id:i,layout:r}=n[0]??{};if(r){for(const s in r)e.includes(s)||this.db.hasTable(s)||t.push(s);s.set(i,{layout:this.layout})}else s.add({layout:this.layout})}catch(e){throw new i.SDKClientError(i.SDKClientErrorCodes.KeyValueDatabaseNotOpen,e.message||"Error encountered while opening database")}this.instantiateTransactionTable(),this.setOnMessageHandler(),this.setOnTableWriteHandler(),t.forEach((e=>this.deleteTransactionsForTable(e)))}async sync(e,t){e?(this.timeoutCallback=t,this.syncTimeout=setTimeout(t,a.CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT),this.systemTopic.publish({sourceId:this.localNode.getId(),destinationIds:[e],messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.RequestSyncKeyValueDatabase,label:this.label}}),await this.isSync):setTimeout((()=>{this.clearSyncTimeout(),this.publishSyncCompleted()}),0)}async sendTransactionsDump(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);await this.isSync;const t=await this.transactionTable.list();this.systemTopic.publish({sourceId:this.localNode.getId(),destinationIds:[e],messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.SendTransactionsDump,label:this.label,transactions:t}})}async processTransactionsDump(e,t){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);this.clearSyncTimeout();const s=await this.transactionTable.list();for(const e of s){const s=t.find((t=>t.id===e.id));if(s&&this.compareTransactions(e,s)<=0)continue;const[n,i]=e.id.split("::"),r=this.tables.get(n),o=await(r?.get(i));e.value=o,this.send(e)}for(const e of t){const t=await this.transactionTable.get(e.id);if(!(t&&this.compareTransactions(e,t)<=0))if(e.action===u.InternalDatabaseTableWriteAction.Delete){const[t,s]=e.id.split("::"),n=this.tables.get(t);await(n?.delete(s,!1))}else this.transactionsToSync.push(e.id)}if(0===this.transactionsToSync.length)return this.clearSyncTimeout(),void this.publishSyncCompleted();this.syncTimeout=setTimeout(this.timeoutCallback,a.CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT),this.systemTopic.publish({sourceId:this.localNode.getId(),destinationIds:[e],messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.RequestTransactionsValue,label:this.label,transactionIds:this.transactionsToSync}})}async sendTransactionsValue(e,t){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);for(const s of t){const t=await this.transactionTable.get(s);if(!t)continue;const[n,i]=s.split("::"),r=this.tables.get(n),o=await(r?.get(i));t.value=o,this.send(t,[e])}}async writeTransaction(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);const t=await this.transactionTable.get(e.id);if(t&&this.compareTransactions(e,t)<=0)return;const s={...e};return delete s.value,await this.transactionTable.set(e.id,s),e}compareTransactions(e,t){return e.timestamp<t.timestamp?-1:e.timestamp>t.timestamp?1:e.priority-t.priority}async getTransactionFromTableWriteEvent(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);const t=`${e.tableName}::${e.key}`,s=await b.default.getEstimatedTimestamp(),n={id:t,priority:Math.random(),timestamp:s,action:e.action};if(await this.writeTransaction(n))return n}async deleteTransactionsForTable(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);const t=r.QueryBuilder.index("id").where("between",[`${e}::`,`${e}::￿`]),s=await this.transactionTable.list(t.getQuery());for(const e of s)await this.transactionTable.delete(e.id)}setOnMessageHandler(){this.onMessage((async(e,t)=>{if(t instanceof File)return;if(!await this.writeTransaction(t))return void this.checkSyncComplete(t);if(!t.value)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionValueNotSet);const[s,n]=t.id.split("::"),i=this.tables.get(s);if(!i)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTableDoesNotExist,{table:i});let r=0;switch(t.action){case u.InternalDatabaseTableWriteAction.Add:case u.InternalDatabaseTableWriteAction.Update:{const e=i.set(n,t.value,!1);r=JSON.stringify(t.value).length,this.transactionsToSync.includes(t.id)&&this.syncTransactionsWritten.push(e);break}case u.InternalDatabaseTableWriteAction.Delete:{const e=i.delete(n,!1);this.transactionsToSync.includes(t.id)&&this.syncTransactionsWritten.push(e);break}}y.default.logServiceEvent(p.LoggingServices.KeyValueDatabase,{type:"sync",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,tableName:s,key:n,size:r}),this.checkSyncComplete(t)}))}setOnTableWriteHandler(){this.tableUnsubscriber=this.tableObserver.subscribe((async e=>{let t=0;switch(e.action){case u.InternalDatabaseTableWriteAction.Add:case u.InternalDatabaseTableWriteAction.Update:case u.InternalDatabaseTableWriteAction.Delete:{const s=await this.getTransactionFromTableWriteEvent(e);if(!s)return;s.value=e.value,this.send(s),t=JSON.stringify(e.value).length,this.writes+=1;break}case u.InternalDatabaseTableReadAction.Get:case u.InternalDatabaseTableReadAction.List:case u.InternalDatabaseTableReadAction.Count:this.reads+=1}y.default.logServiceEvent(p.LoggingServices.KeyValueDatabase,{type:e.action,label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,tableName:e.tableName,key:e.key,size:t}),this.sendStats()}))}instantiateTransactionTable(){this.db&&(this.transactionTable||(this.transactionTable=this.db.getTableConnector(a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME)))}clearSyncTimeout(){this.syncTimeout&&(clearTimeout(this.syncTimeout),delete this.syncTimeout)}publishSyncCompleted(){this.eventListener.publish({event:n.DatabaseEvent.SyncComplete}),this.syncResolve?.(!0),delete this.syncResolve,this.sendStats()}async publishSyncCompletedAfterWrites(){await Promise.all(this.syncTransactionsWritten),this.publishSyncCompleted()}checkSyncComplete(e){this.transactionsToSync.includes(e.id)&&(this.clearSyncTimeout(),this.transactionsToSync=this.transactionsToSync.filter((t=>t!==e.id)),0!==this.transactionsToSync.length?this.syncTimeout=setTimeout(this.timeoutCallback,a.CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT):this.publishSyncCompletedAfterWrites())}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{delete this.debounceStats;let e=0;for(const t of this.tables.values())e+=await t.calculateSize();this.systemTopic.publish({sourceId:c.SYSTEM_TOPIC_INTERNAL,messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.KeyValueDatabaseStats,label:this.label,stats:{timestamp:Date.now(),storage:e,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:this.writes,reads:this.reads}}}),y.default.logStorage(p.LoggingServices.KeyValueDatabase,`ccc${this.clusterId}ccc${this.label}`,e)}),a.CONTENT_KEY_VALUE_DATABASE_STATS_DEBOUNCE)}addReservedTables(e){if(e.tables[a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME])throw new i.SDKClientError(i.SDKClientErrorCodes.KeyValueDatabaseTableNameReserved,`Cannot create Key-Value Database: Table '${a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME}' reserved`);if(e.tables[a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME])throw new i.SDKClientError(i.SDKClientErrorCodes.KeyValueDatabaseTableNameReserved,`Cannot create Key-Value Database: Table '${a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME}' reserved`);e.tables[a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME]={indexes:[]},e.tables[a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME]={indexes:[]}}}},"./src/models/Content/KeyValueDatabaseTable.ts":(e,t,s)=>{s.r(t),s.d(t,{DatabaseTable:()=>a});var n=s("./src/public/errors/SDKClientError.ts"),i=s("./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts"),r=s("./src/interfaces/Content/DataContent.ts"),o=s("./src/utils/Observer/Observer.ts");class a{connector;tableName;tableObserver;eventListener=(0,o.createSingleObserver)();listenerUnsubscriber;constructor(e,t,s){this.connector=e,this.tableName=t,this.tableObserver=s}destroy(){this.listenerUnsubscriber?.()}async get(e){const t={key:e,tableName:this.tableName,action:r.InternalDatabaseTableReadAction.Get};return this.tableObserver.publish(t),this.connector.get(e)}async set(e,t,s=!0){this.validateValue(t);const n=await this.connector.get(e),i=await this.connector.set(e,t),o=n?r.InternalDatabaseTableWriteAction.Update:r.InternalDatabaseTableWriteAction.Add;if(this.publish(o,i),!s)return i;const a={key:e,tableName:this.tableName,action:o,value:i};return this.tableObserver.publish(a),i}async add(e){this.validateValue(e);const t=await this.connector.add(e),s={key:t.id,tableName:this.tableName,action:r.InternalDatabaseTableWriteAction.Add,value:t};return this.tableObserver.publish(s),this.publish(s.action,t),t}async delete(e,t=!0){const s=await this.connector.get(e);if(!s)return;await this.connector.delete(e);const n=r.InternalDatabaseTableWriteAction.Delete;if(this.publish(n,s),!t)return;const i={key:e,tableName:this.tableName,action:n,value:s};this.tableObserver.publish(i)}async clear(){const e=await this.list();for(const t of e){const e=r.InternalDatabaseTableWriteAction.Delete;this.publish(e,t);const s={key:t.id,tableName:this.tableName,action:e,value:t};this.tableObserver.publish(s)}return this.connector.clear()}async list(e){const t={key:"",tableName:this.tableName,action:r.InternalDatabaseTableReadAction.List};this.tableObserver.publish(t);try{e&&(e=e instanceof i.QueryBuilder?e.getQuery():i.QueryBuilder.buildQuery(e).getQuery())}catch(e){throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,"Invalid query")}try{return await this.connector.list(e)}catch(e){let t="Invalid query";throw e instanceof Error&&(t=e.message),new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,t)}}async count(e){const t={key:"",tableName:this.tableName,action:r.InternalDatabaseTableReadAction.Count};this.tableObserver.publish(t);try{e&&(e=e instanceof i.QueryBuilder?e.getQuery():i.QueryBuilder.buildQuery(e).getQuery())}catch(e){throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,"Invalid query")}try{return await this.connector.count(e)}catch(e){let t="Invalid query";throw e instanceof Error&&(t=e.message),new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,t)}}calculateSize(){return this.connector.calculateSize()}subscribe(e){this.listenerUnsubscriber=this.eventListener.subscribe(e)}unsubscribe(){this.listenerUnsubscriber?.()}publish(e,t){const s=this.buildTableEvent(e,t);this.eventListener.publish(s)}buildTableEvent(e,t){let s;switch(e){case r.InternalDatabaseTableWriteAction.Add:s="add";break;case r.InternalDatabaseTableWriteAction.Update:s="update";break;case r.InternalDatabaseTableWriteAction.Delete:s="delete"}return{action:s,value:t}}validateValue(e){if("object"!=typeof e||null===e)throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidValue,"Invalid value. Must be an object.");for(const t in e){const s=e[t];if("object"!=typeof s||s instanceof Date){if(!["string","number","boolean"].includes(typeof s))throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidValue,`Invalid value. Property '${t}' must be a string, number, boolean, or Date.`)}else this.validateValue(s)}}}},"./src/models/Content/LocalDynamicMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalDynamicMediaStream:()=>i});var n=s("./src/models/Content/BaseLocalMediaStream.ts");class i extends n.BaseLocalMediaStream{audioContext;transformations=[];clientStream;audioSource;audioDestination;sourceVideo;canvas;context;interval;constructor(e,t,s,n,i,r){if(super(e,t,s,r),this.audioContext=i,this.clientStream=this.mediaStream,this.sourceVideo=document.createElement("video"),this.sourceVideo.autoplay=!0,this.sourceVideo.muted=!0,this.sourceVideo.srcObject=this.clientStream,this.sourceVideo.load(),this.sourceVideo.onloadeddata=()=>{this.sourceVideo.play()},this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.mediaStream=this.canvas.captureStream(n),this.audioDestination=this.audioContext.createMediaStreamDestination(),this.clientStream.getAudioTracks().length>0){const e=this.clientStream.getAudioTracks()[0];this.audioSource=this.audioContext.createMediaStreamSource(new MediaStream([e])),this.audioSource.connect(this.audioDestination)}const o=this.audioDestination.stream.getTracks()[0];this.mediaStream.addTrack(o),this.interval=setInterval((()=>{this.canvas.width=this.sourceVideo.videoWidth,this.canvas.height=this.sourceVideo.videoHeight,this.sourceVideo.videoWidth?(0!==this.clientStream.getVideoTracks().length&&this.clientStream.getVideoTracks()[0].enabled?this.mediaStream.getVideoTracks()[0].enabled=!0:this.mediaStream.getVideoTracks()[0].enabled=!1,0!==this.clientStream.getAudioTracks().length&&this.clientStream.getAudioTracks()[0].enabled?this.mediaStream.getAudioTracks()[0].enabled=!0:this.mediaStream.getAudioTracks()[0].enabled=!1,this.context.drawImage(this.sourceVideo,0,0)):this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}),1e3/n)}destroy(){clearInterval(this.interval),this.sourceVideo.remove(),this.canvas.remove(),this.audioSource?.disconnect(),this.audioDestination.disconnect(),this.mediaStream.getTracks().forEach((e=>{e.stop(),this.mediaStream.removeTrack(e)})),super.destroy()}addTrack(e){const t=this.getTrack(e.kind);t&&this.removeTrack(t),"audio"!==e.kind?("video"===e.kind&&this.addVideoTrack(e),this.setupTrackEndedListeners(e)):this.addAudioTrack(e)}removeTrack(e){const t=this.getTrackFromParam(e);return t&&("audio"===t.kind&&(this.audioSource?.disconnect(),this.audioSource=void 0),this.trackEndedListeners.get(t.kind)?.(),this.clientStream.removeTrack(t)),t}replaceTrack(e){this.removeTrack(e.kind),this.addTrack(e)}setTransformations(e){this.transformations=e}getTrack(e){return this.clientStream.getTracks().find((t=>t.kind===e))||null}getTrackFromParam(e){return"string"==typeof e?this.getTrack(e):e}addAudioTrack(e){"suspended"===this.audioContext.state&&this.audioContext.resume(),this.clientStream.addTrack(e),this.audioSource=this.audioContext.createMediaStreamSource(this.clientStream),this.audioSource.connect(this.audioDestination)}addVideoTrack(e){this.clientStream.addTrack(e),this.sourceVideo.load()}}},"./src/models/Content/LocalMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalMediaStream:()=>i});var n=s("./src/models/Content/BaseLocalMediaStream.ts");class i extends n.BaseLocalMediaStream{}},"./src/models/Content/ObjectStore.ts":(e,t,s)=>{s.r(t),s.d(t,{ObjectStore:()=>S});var n=s("uuid"),i=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),o=s("./src/constants/Content.ts"),a=s("./src/constants/System.ts"),c=s("./src/errors/SDKInternalError.ts"),d=s("./src/interfaces/Content/Content.ts"),l=s("./src/interfaces/Content/DataContent.ts"),u=s("./src/interfaces/Subscription/SystemEvent.ts"),h=s("./src/interfaces/Utils/Logger.ts"),p=s("./src/models/Content/BaseDataStream.ts"),g=s("./src/utils/Logger/Logger.ts"),m=s("./src/utils/ObjectStore/Helpers.ts"),b=s("./src/utils/Observer/Observer.ts");class S extends p.BaseDataStream{localNode;clusterId;vendorId;transactionService;unsubscribeHandler;lastTransactionId;pendingSyncTransactions=new Map;objectRequests=new Map;pendingFilesSyncing=new Map;pendingFilesTransactions=new Map;pendingFilesRename=new Map;objectStoreConnector;eventListener=(0,b.createSingleObserver)();listenerUnsubscriber;debounceStats;writes=0;reads=0;constructor(e,t,s,n,i,o){if("string"!=typeof t)throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreNameNotString,"Cannot create ObjectStore: Label must be a string");super(e,t),this.localNode=e,this.clusterId=s,this.vendorId=n,this.transactionService=i;const a=`ccc${this.vendorId}ccc${this.clusterId}ccc${t}`;this.objectStoreConnector=new o(a),this.sendStats()}reset(){this.sendStats()}getContentType(){return i.ContentType.ObjectStore}async sync(){try{const e=await this.objectStoreConnector.get(o.CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME),t=await e.text();this.lastTransactionId=t}catch(e){}this.unsubscribeHandler=this.onMessage((async(e,t)=>{if(!(t instanceof File))try{if(t.payloadType===l.InternalObjectStorePayloadType.Request)return void this.handleRequestPayload(t);this.handleTransactionPayload(t)}catch(e){if(e instanceof c.SDKInternalError)throw e;throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{payload:t})}})),await this.syncTransactions(),await this.syncPendingFiles(),this.sendStats()}destroy(){this.unsubscribeHandler?.(),clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic?.publish({sourceId:a.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Content,content:{type:d.ContentMessageType.CloseObjectStoreBucket,label:this.label}})}subscribe(e){if(this.listenerUnsubscriber)throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreAlreadySubscribed,"Cannot subscribe to ObjectStore: Already subscribed");this.listenerUnsubscriber=this.eventListener.subscribe(e)}unsubscribe(){this.listenerUnsubscriber&&this.listenerUnsubscriber()}publish(e){switch(e.action){case i.PayloadAction.File:return this.publishFile(e.file,e.path);case i.PayloadAction.Folder:return this.publishFolder(e.path);case i.PayloadAction.Move:return this.publishMove(e.path,e.newPath);default:throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreInvalidPayload,`Cannot publish payload: ${e}`)}}async unpublish(e){try{const t=(0,n.v4)(),s=this.lastTransactionId,i={payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.Delete,id:t,parentId:s,path:e};await this.publishTransaction(i);const r=await this.deleteObject(e);await this.send(i),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"unpublish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:r,path:e}),this.writes+=1,this.sendStats()}catch(t){if(t instanceof c.SDKInternalError)throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store data stream is not in sync");throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot unpublish object: ${e}`)}}async get(e){g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"get",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,path:e}),this.reads+=1,this.sendStats();try{return await this.objectStoreConnector.get(e)}catch(t){try{await this.objectStoreConnector.get(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}catch(t){throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot get file: ${e}`)}throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync")}}async list(e,t=!1,s=!1){g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"list",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,path:e}),this.reads+=1,this.sendStats();try{const n=await this.objectStoreConnector.list(e,t);return s?n:this.cleanList(n)}catch(t){throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot list directory: ${e}`)}}handleNodeJoin(e){for(const t of this.objectRequests.values())this.send(t,[e])}handleNodeLeave(e){const t=this.pendingFilesSyncing.get(e);if(t){for(const[e,s]of t.values())this.sendFileRequestPayload(e,s);this.pendingFilesSyncing.delete(e)}}cleanList(e){for(const t of e)t.kind===i.ObjectKind.Folder&&(t.entries=this.cleanList(t.entries??[])),(t.name.endsWith(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)||t.name===o.CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME)&&e.splice(e.indexOf(t),1);return e}async publishFile(e,t){try{const s=(0,n.v4)(),r=this.lastTransactionId,o=await(0,m.getFileChecksum)(e);await this.publishTransaction({payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.FileWrite,id:s,parentId:r,answererId:this.localNode.getId(),name:e.name,type:e.type,path:t??"/",checksum:o}),await this.writeFile(e,t),await this.sendFile(e,{payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.FileWrite,id:s,parentId:r,answererId:this.localNode.getId(),name:e.name,type:e.type,path:t??"/",checksum:o}),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"publish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:i.ObjectKind.File,path:t,fileName:e.name,fileType:e.type,size:e.size}),this.writes+=1,this.sendStats()}catch(e){if(e instanceof c.SDKInternalError)throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync");throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot publish file: ${t}`)}}async publishFolder(e){try{const t=(0,n.v4)(),s=this.lastTransactionId,r={payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.FolderCreate,id:t,parentId:s,path:e};await this.publishTransaction(r),await this.objectStoreConnector.createFolder(e),await this.send(r),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"publish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:i.ObjectKind.Folder,path:e}),this.writes+=1,this.sendStats()}catch(t){if(t instanceof c.SDKInternalError)throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync");throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot publish folder: ${e}`)}}async publishMove(e,t){try{const s=(0,n.v4)(),i=this.lastTransactionId,r={payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.Move,id:s,parentId:i,path:e,newPath:t};await this.publishTransaction(r);const o=await this.moveObject(e,t);await this.send(r),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"move",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:o,path:e,newPath:t}),this.writes+=1,this.sendStats()}catch(t){if(t instanceof c.SDKInternalError)throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync");throw new r.SDKClientError(r.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot publish move operation: ${e}`)}}async handleTransactionPayload(e){if(this.lastTransactionId&&e.parentId!==this.lastTransactionId&&e.id!==this.lastTransactionId){if(!e.parentId)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage);this.pendingSyncTransactions.set(e.parentId,e)}else{try{await this.processTransactionPayload(e)}catch(e){}await this.updateLastTransactionId(e.id),await this.processPendingSyncTransactions(e.id)}}async processTransactionPayload(e){switch(e.action){case l.InternalObjectStorePayloadAction.FileWrite:await this.handleFileWrite(e);break;case l.InternalObjectStorePayloadAction.FolderCreate:await this.handleFolderCreate(e);break;case l.InternalObjectStorePayloadAction.Move:await this.handleObjectMove(e);break;case l.InternalObjectStorePayloadAction.Delete:await this.handleObjectDelete(e);break;default:throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{payload:e})}}async processPendingSyncTransactions(e){if(this.pendingSyncTransactions.has(e)){const t=this.pendingSyncTransactions.get(e);this.pendingSyncTransactions.delete(e),await this.handleTransactionPayload(t)}}async handleRequestPayload(e){switch(e.action){case l.InternalObjectStorePayloadAction.RequestFile:return this.handleFileRequest(e);case l.InternalObjectStorePayloadAction.RequestAccepted:return this.handleFileRequestAnswer(e);case l.InternalObjectStorePayloadAction.RequestFileSync:return this.handleFileSync(e);case l.InternalObjectStorePayloadAction.RequestFileWrite:return this.handleFileWrite(e);default:throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{payload:e})}}async handleFileWrite(e){if(!e.data||void 0===e.index||!e.total)return void await this.createPendingFileWrite(e);const t=(0,m.getPathName)(e.path,e.name);this.fileChunks.has(t)||(this.fileChunks.set(t,[]),await this.createPendingFileWrite(e)),this.setPendingFileSyncingPayload(e,t);const s=this.fileChunks.get(t);if(s[e.index]=e.data,s.filter((e=>e)).length<e.total)return;const n=(0,m.getFileContent)(s,e.name,e.type);await this.writeFile(n,e.path),await this.deletePendingFile(e),this.fileChunks.delete(t),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"sync",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:i.ObjectKind.File,path:e.path,fileName:e.name,fileType:e.type,size:n.size});const r=this.pendingFilesTransactions.get(e.path)??[];for(const e of r)await this.processTransactionPayload(e);this.pendingFilesTransactions.delete(e.path),this.eventListener.publish({event:i.StorageEventType.FileWrite,payload:{file:{kind:i.ObjectKind.File,path:e.path,type:n.type,size:n.size,name:e.name,pathName:t}}})}async handleFolderCreate(e){await this.objectStoreConnector.createFolder(e.path);const[t,s]=(0,m.splitPathName)(e.path);this.eventListener.publish({event:i.StorageEventType.FolderCreate,payload:{folder:{kind:i.ObjectKind.Folder,name:s,path:t,pathName:e.path}}})}async handleObjectDelete(e){if(!this.shouldProcessTransaction(e))return;const t=await this.deleteObject(e.path),[s,n]=(0,m.splitPathName)(e.path);this.eventListener.publish({event:t===i.ObjectKind.Folder?i.StorageEventType.FolderDelete:i.StorageEventType.FileDelete,payload:{name:n,path:s,pathName:e.path}})}async handleObjectMove(e){if(!this.shouldProcessTransaction(e))return this.pendingFilesRename.set(e.newPath,this.pendingFilesRename.get(e.path)??e.path),void this.pendingFilesRename.delete(e.path);this.pendingFilesRename.delete(e.path);const t=await this.objectStoreConnector.moveObject(e.path,e.newPath),[s,n]=(0,m.splitPathName)(e.path),[r,o]=(0,m.splitPathName)(e.newPath);this.eventListener.publish({event:t===i.ObjectKind.Folder?i.StorageEventType.FolderMove:i.StorageEventType.FileMove,payload:{name:o,path:r,pathName:e.newPath,oldName:n,oldPath:s,oldPathName:e.path}})}shouldProcessTransaction(e){const t=this.pendingFilesRename.get(e.path)??e.path;let s=!1;for(const n of this.fileChunks.keys())if(n.startsWith(t)){const t=this.pendingFilesTransactions.get(n)??[];t.push(e),this.pendingFilesTransactions.set(n,t),s=!0}return!s}async publishTransaction(e){if(!e.id)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Missing transaction id"});await this.transactionService.writeTransaction(e,this.label,this.lastTransactionId),await this.updateLastTransactionId(e.id)}async updateLastTransactionId(e){this.lastTransactionId=e;const t=new File([new Blob([this.lastTransactionId])],o.CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME,{type:"text/plain"});await this.writeFile(t,"/")}async handleFileRequest(e){try{const t=await this.get(e.path+"/"+e.name);if(await(0,m.getFileChecksum)(t)!==e.checksum)return;e.answererId=this.localNode.getId(),e.action=l.InternalObjectStorePayloadAction.RequestAccepted,await this.send(e,[e.sourceId])}catch(e){}}async handleFileRequestAnswer(e){const t=(0,m.getPathName)(e.path,e.name);if(!this.objectRequests.has(t))return;const s=this.objectRequests.get(t);s.action=l.InternalObjectStorePayloadAction.RequestFileSync;const n=e.answererId;if(!n)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Missing answerer id on request answer"});this.objectRequests.delete(t),this.pendingFilesSyncing.has(n)||this.pendingFilesSyncing.set(n,new Map),this.pendingFilesSyncing.get(n).set(t,[s,this.getOrResetPendingFileTimeout(n,t)]),s.answererId=n,this.send(s,[n])}async handleFileSync(e){const t=(0,m.getPathName)(e.path,e.name),s=await this.get(t),n={...e,answererId:this.localNode.getId(),action:l.InternalObjectStorePayloadAction.RequestFileWrite};await this.sendFile(s,n,[e.sourceId])}async sendFile(e,t,s){const n=await(0,m.readFileContent)(e);for(const[i,r]of n.entries()){const o={...t,type:e.type,data:r,index:i,total:n.length};this.send(o,s)}}async deletePendingFile(e){try{const t=(0,m.getPathName)(e.path,e.name),s=t+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION;await this.deleteObject(s);const[,n]=this.pendingFilesSyncing.get(e.answererId)?.get(t)??[];n&&(clearTimeout(n),this.pendingFilesSyncing.get(e.answererId).delete(t))}catch(e){}}async syncTransactions(){const e=await this.transactionService.getTransactions(this.label,this.lastTransactionId);for(const t of e)await this.handleTransactionPayload(t)}async syncPendingFiles(){const e=await this.list("/",!0,!0),t=async e=>{for(const s of e){if(s.kind===i.ObjectKind.Folder){s.entries&&s.entries.length>0&&await t(s.entries);continue}if(!s.name.endsWith(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION))continue;const e=await this.get(s.pathName),n=await e.text(),r=s.name.replace(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,""),a={payloadType:l.InternalObjectStorePayloadType.Request,action:l.InternalObjectStorePayloadAction.RequestFile,sourceId:this.localNode.getId(),type:"",path:s.path,name:r,checksum:n},c=(0,m.getPathName)(s.path,r);this.objectRequests.set(c,a)}};await t(e)}async createPendingFileWrite(e){const t=new File([new Blob([e.checksum])],`${e.name}${o.CONTENT_OBJECT_STORE_PENDING_EXTENSION}`,{type:"text/plain"});await this.writeFile(t,e.path)}getOrResetPendingFileTimeout(e,t){const[s,n]=this.pendingFilesSyncing.get(e)?.get(t)??[];return n&&clearTimeout(n),setTimeout((()=>{const[s,n]=this.pendingFilesSyncing.get(e).get(t);this.sendFileRequestPayload(s,n)}),o.CONTENT_OBJECT_STORE_PENDING_RETRY_DELAY)}async sendFileRequestPayload(e,t){clearTimeout(t),e.action=l.InternalObjectStorePayloadAction.RequestFile,this.objectRequests.set((0,m.getPathName)(e.path,e.name),e),this.send(e)}setPendingFileSyncingPayload(e,t){this.pendingFilesSyncing.has(e.answererId)||this.pendingFilesSyncing.set(e.answererId,new Map);const[s]=this.pendingFilesSyncing.get(e.answererId).get(t)??[{payloadType:l.InternalObjectStorePayloadType.Request,action:l.InternalObjectStorePayloadAction.RequestFile,sourceId:this.localNode.getId(),type:e.type,name:e.name,path:e.path,checksum:e.checksum,answererId:e.answererId}];this.pendingFilesSyncing.get(e.answererId).set(t,[s,this.getOrResetPendingFileTimeout(e.answererId,t)])}async writeFile(e,t){await this.objectStoreConnector.writeFile(e,t)}async deleteObject(e){try{return await this.objectStoreConnector.deleteObject(e)}catch(t){return await this.objectStoreConnector.deleteObject(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}}async moveObject(e,t){try{return await this.objectStoreConnector.moveObject(e,t)}catch(s){return await this.objectStoreConnector.moveObject(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,t+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{delete this.debounceStats;const e=await this.objectStoreConnector.calculateSize("/");this.systemTopic?.publish({sourceId:a.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Content,content:{type:d.ContentMessageType.ObjectStoreStats,label:this.label,stats:{timestamp:Date.now(),storage:e,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:this.writes,reads:this.reads}}}),g.default.logStorage(h.LoggingServices.ObjectStorage,`ccc${this.clusterId}ccc${this.label}`,e)}),o.CONTENT_OBJECT_STORE_STATS_DEBOUNCE)}}},"./src/models/Content/OutgoingMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{OutgoingMediaStream:()=>c});var n=s("@crewdle/web-sdk-types"),i=s("./src/errors/SDKInternalError.ts"),r=s("./src/interfaces/Subscription/MediaSubscriptionEvent.ts"),o=s("./src/models/Content/BaseMediaStream.ts"),a=s("./src/utils/Observer/Observer.ts");class c extends o.BaseMediaStream{remoteId;params;topic;unregisterPublisherListener=(0,a.createSingleObserver)();constructor(e,t,s,n,i){super(e,t,s),this.remoteId=n,this.params=i}destroy(){this.removeTrack("audio"),this.removeTrack("video"),super.destroy()}addTrack(e){if(!this.topic)throw new i.SDKInternalError(i.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});this.topic.publish({sourceId:this.owner.getId(),content:{action:r.MediaSubscriptionAction.Add,track:e,stream:this.mediaStream,priority:n.MediaStreamPriority.Default,params:this.getInternalTrackParams(e.kind,this.params)}})}removeTrack(e){const t=this.getTrack(e);if(t){if(!this.topic)return null;this.topic.publish({sourceId:this.owner.getId(),content:{action:r.MediaSubscriptionAction.Remove,track:t,stream:this.mediaStream}})}return t}setPriority(e){if(!this.topic)throw new i.SDKInternalError(i.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});this.topic.publish({sourceId:this.owner.getId(),content:{action:r.MediaSubscriptionAction.Update,priority:e,stream:this.mediaStream}})}subscribe({trackKinds:e,params:t},s){if(!this.topic)throw new i.SDKInternalError(i.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});for(const n of this.mediaStream.getTracks())e.includes(n.kind)&&this.topic.publish({sourceId:this.owner.getId(),content:{action:r.MediaSubscriptionAction.Add,track:n,stream:this.mediaStream,priority:s,params:this.getInternalTrackParams(n.kind,t)}})}update({params:e}){if(!this.topic)throw new i.SDKInternalError(i.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});for(const t of this.mediaStream.getTracks())this.topic.publish({sourceId:this.owner.getId(),content:{action:r.MediaSubscriptionAction.Update,stream:this.mediaStream,params:this.getInternalTrackParams(t.kind,e)}})}unsubscribe({trackKinds:e}){if(this.topic)for(const t of this.mediaStream.getTracks())e.includes(t.kind)&&this.topic.publish({sourceId:this.owner.getId(),content:{action:r.MediaSubscriptionAction.Remove,stream:this.mediaStream,track:t}})}registerPublisher(e){this.topic=e}unregisterPublisher(e){e===this.topic&&(delete this.topic,this.unregisterPublisherListener.publish())}onUnregisterPublisher(e){return this.unregisterPublisherListener.subscribe(e)}getTrack(e){return this.mediaStream.getTracks().find((t=>t.kind===e))||null}getInternalTrackParams(e,t){let s;return"video"===e&&t?.video&&"boolean"!=typeof t.video&&(s={kind:"video",...t.video},s.resolution=this.getResolution()),"audio"===e&&t?.audio&&"boolean"!=typeof t.audio&&(s={kind:"audio",...t.audio}),s}getResolution(){let e={width:0,height:0};const t=this.mediaStream.getVideoTracks();if(t.length>0){const s=t[0].getSettings();s.width&&s.height&&(e={width:s.width,height:s.height})}return e}}},"./src/models/Content/PubSubTopic.ts":(e,t,s)=>{s.r(t),s.d(t,{PubSubTopic:()=>h});var n=s("@crewdle/web-sdk-types"),i=s("./src/public/errors/SDKClientError.ts"),r=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Content/BaseDataStream.ts"),u=s("./src/utils/Logger/Logger.ts");class h extends l.BaseDataStream{localNode;clusterId;unsubscribeHandler=new Map;debounceStats;constructor(e,t,s){if("string"!=typeof t)throw new i.SDKClientError(i.SDKClientErrorCodes.PubSubTopicNameNotString,"Cannot create PubSubStream: Label must be a string");super(e,t),this.localNode=e,this.clusterId=s,this.sendStats()}reset(){this.sendStats()}getContentType(){return n.ContentType.PubSub}publish(e,t){u.default.log(d.LoggingChannels.PubSub,"PubSubTopic publish",this.localNode.getId(),e,t),u.default.logServiceEvent(d.LoggingServices.PubSub,{type:"publish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,remoteIds:t??[],contentType:e instanceof File?n.ContentType.File:n.ContentType.Data,size:e instanceof File?e.size:JSON.stringify(e).length}),this.sendStats(),this.send(e,t)}subscribe(e,t){if(this.unsubscribeHandler.has(e))throw new i.SDKClientError(i.SDKClientErrorCodes.PubSubTopicAlreadySubscribed,"Cannot subscribe to PubSubTopic: Already subscribed");this.unsubscribeHandler.set(e,this.onMessage(((s,n)=>{"data"===e&&n instanceof File||!("file"!==e||n instanceof File)||(u.default.log(d.LoggingChannels.PubSub,"PubSubTopic onMessage",this.localNode.getId(),s,n),u.default.logServiceEvent(d.LoggingServices.PubSub,{type:"subscribe",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,remoteId:s,contentType:e,size:n instanceof File?n.size:JSON.stringify(n).length}),this.sendStats(),t(s,n))})))}unsubscribe(e){this.unsubscribeHandler.get(e)?.(),this.unsubscribeHandler.delete(e)}destroy(){this.unsubscribeHandler.forEach((e=>e())),clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic?.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.ClosePubSubTopic,label:this.label}})}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((()=>{this.systemTopic?.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.PubSubTopicStats,label:this.label,stats:{timestamp:Date.now(),storage:0,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:0,reads:0}}})}),r.CONTENT_PUBSUB_TOPIC_STATS_DEBOUNCE)}}},"./src/models/Content/RemoteMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{RemoteMediaStream:()=>m});var n=s("@crewdle/web-sdk-types"),i=s("./src/public/errors/SDKClientError.ts"),r=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Subscription/MediaSubscriptionEvent.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/models/Content/BaseMediaStream.ts"),h=s("./src/models/Content/OutgoingMediaStream.ts"),p=s("./src/utils/Logger/Logger.ts"),g=s("./src/utils/Observer/Observer.ts");class m extends u.BaseMediaStream{localNode;internalId;availableTrackKinds;clusterId;unsubscribeHandler;resizeHandler;updateDebounce;outgoingStreams=new Map;renderElement;subscribedTracks=new Set;providerId;providerListener=(0,g.createObserver)();trackEndedListeners=new Map;constructor(e,t,s,n,i,r){super(t,s,new MediaStream),this.localNode=e,this.internalId=n,this.availableTrackKinds=i,this.clusterId=r,this.mediaStream.getTracks().forEach((e=>this.setupTrackEndedListeners(e)))}destroy(){this.outgoingStreams.size>0&&(this.outgoingStreams.forEach((e=>{e.unregisterSystemPublisher(),e.destroy()})),this.outgoingStreams.clear()),this.trackEndedListeners.forEach((e=>e())),this.mediaStream.getTracks().forEach((e=>this.mediaStream.removeTrack(e))),this.updateDebounce&&(clearTimeout(this.updateDebounce),delete this.updateDebounce),this.resizeHandler?.(),super.destroy()}registerSubscriber(e){this.unsubscribeHandler=e.subscribe((({content:e})=>{switch(e.action){case c.MediaSubscriptionAction.RemoteAdd:if(p.default.log(l.LoggingChannels.Subscription,"Received track",this.localNode.getId(),this.providerId),e.stream.id!==this.internalId||e.providerId!==this.providerId)return;this.removeTrack(e.track.kind),this.mediaStream.addTrack(e.track);for(const[t,s]of this.outgoingStreams.entries())try{s.addTrack(e.track)}catch(e){s.destroy(),this.outgoingStreams.delete(t)}this.setupTrackEndedListeners(e.track),this.setupRenderElement(),"video"===e.track.kind&&this.renderElement&&(this.mediaStream.active?setTimeout((()=>this.renderElement?.play()),0):setTimeout((()=>this.renderElement?.load()),0),this.setupResizeHandler());break;case c.MediaSubscriptionAction.RemoteRemove:if(e.stream.id!==this.internalId||e.providerId!==this.providerId)return;this.removeTrack(e.track.kind),this.renderElement&&"video"===e.track.kind&&(this.resizeHandler?.(),this.mediaStream.getTracks().length>0?this.renderElement.load():this.renderElement.srcObject=null)}}))}unregisterSubscriber(){this.unsubscribeHandler?.(),this.trackEndedListeners.forEach((e=>e())),delete this.unsubscribeHandler}getInternalStreamId(){return this.internalId}setInternalId(e){this.internalId=e}getAvailableTrackKinds(){return this.availableTrackKinds}hasTracks(e){for(const t of e||this.availableTrackKinds)if(!this.mediaStream.getTracks().find((e=>e.kind===t)))return!1;return!0}getResolution(){let e={width:0,height:0};const t=this.mediaStream.getVideoTracks();if(t.length>0){const s=t[0].getSettings();s.width&&s.height&&(e={width:s.width,height:s.height})}return e}isSubscribed(e){for(const t of e)if(!this.subscribedTracks.has(t))return!1;return!0}getShareableStream(e,t){if(!this.outgoingStreams.has(e)){const s=new h.OutgoingMediaStream(this.owner,this.label,this.mediaStream,e,t),n=s.onUnregisterPublisher((()=>{n(),this.outgoingStreams.get(e)?.destroy(),this.outgoingStreams.delete(e)}));this.outgoingStreams.set(e,s),s.registerSystemPublisher(this.systemTopic)}return this.outgoingStreams.get(e)}getShareableStreamId(){return this.mediaStream.id}getPriority(){return n.MediaStreamPriority.Default}getSubscribedTracks(){return Array.from(this.subscribedTracks)}subscribe(e){let t=[];if(e){"object"!=typeof e.video||e.video.renderElement instanceof HTMLVideoElement||!this.renderElement||(e.video={renderElement:this.renderElement});try{(0,n.isValidMediaSubscriptionParams)(e)}catch(e){throw new i.SDKClientError(i.SDKClientErrorCodes.RemoteMediaStreamInvalidSubscriptionParams,"Invalid params")}e.video&&(t.push("video"),"boolean"!=typeof e.video&&e.video.renderElement&&(this.renderElement=e.video.renderElement,e.video.maxResolution||(e.video.maxResolution={width:this.renderElement.clientWidth,height:this.renderElement.clientHeight}),delete e.video.renderElement)),e.audio&&t.push("audio")}else t=this.getAvailableTrackKinds();this.isSubscribed(t)||(t.forEach((e=>this.subscribedTracks.add(e))),this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.SubscribeMediaStream,label:this.label,ownerId:this.owner.getId(),trackKinds:t,params:e}}),p.default.logServiceEvent(l.LoggingServices.MediaStream,{type:"subscribe",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,sourceId:this.owner.getId(),streamId:this.internalId,trackKinds:t}))}update(e){try{(0,n.isValidMediaSubscriptionParams)(e)}catch(e){throw new i.SDKClientError(i.SDKClientErrorCodes.RemoteMediaStreamInvalidSubscriptionParams,"Invalid params")}this.updateDebounce&&clearTimeout(this.updateDebounce),this.updateDebounce=setTimeout((()=>{delete this.updateDebounce,this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.UpdateMediaStream,label:this.label,ownerId:this.owner.getId(),params:e}})}),r.CONTENT_UPDATE_DEBOUNCE)}unsubscribe(e){e||(e=this.getAvailableTrackKinds()),(e=Array.isArray(e)?e:[e]).forEach((e=>this.subscribedTracks.delete(e))),this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.UnsubscribeMediaStream,label:this.label,ownerId:this.owner.getId(),trackKinds:e,remainingTracks:this.subscribedTracks.size}})}onProviderChange(e){return this.providerListener.subscribe(e)}getProviderId(){return this.providerId}setProviderId(e){this.providerId!==e&&(this.providerId=e,this.providerListener.publish(e))}unsubscribeTrackEndedListener(e){this.trackEndedListeners.get(e)?.(),this.trackEndedListeners.delete(e)}removeTrack(e){const t=this.mediaStream.getTracks().find((t=>t.kind===e));t&&(this.mediaStream.removeTrack(t),this.outgoingStreams.forEach((t=>t.removeTrack(e))),this.trackEndedListeners.get(e)?.())}setupRenderElement(){this.renderElement&&(this.renderElement.srcObject&&this.renderElement.srcObject===this.mediaStream||(this.renderElement.srcObject=this.mediaStream))}setupResizeHandler(){if(this.renderElement&&!this.resizeHandler&&"undefined"!=typeof ResizeObserver){let e=this.renderElement.clientWidth,t=this.renderElement.clientHeight;const s=new ResizeObserver((s=>{const{width:n,height:i}=s[0].contentRect;e===n&&t===i||(e=Math.floor(n),t=Math.floor(i),this.update({video:{maxResolution:{width:n,height:i}}}))}));s.observe(this.renderElement),this.resizeHandler=()=>s.disconnect()}}handleRemoteTrackFailure(e){const t=[];for(const e of this.subscribedTracks)this.removeTrack(e),t.push(e);this.providerId&&this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.RemoteMediaStreamTrackFail,label:this.label,streamId:this.internalId,ownerId:this.owner.getId(),providerId:this.providerId,trackKinds:t}})}setupTrackEndedListeners(e){const t=()=>this.handleRemoteTrackFailure(e);e.addEventListener("ended",t),e.addEventListener("mute",t),this.trackEndedListeners.set(e.kind,(()=>{e.removeEventListener("ended",t),e.removeEventListener("mute",t),this.trackEndedListeners.delete(e.kind)}))}}},"./src/models/Detection/DetectionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{DetectionManager:()=>p});var n=s("./src/constants/Detection.ts"),i=s("./src/constants/DetectionIssueRules.ts"),r=s("./src/constants/DetectionProblemRules.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Connection/PeerConnection.ts"),c=s("./src/interfaces/Detection/Detection.ts"),d=s("./src/interfaces/Stats/Stats.ts"),l=s("./src/interfaces/Subscription/SystemEvent.ts"),u=s("./src/interfaces/Utils/Logger.ts"),h=s("./src/utils/Logger/Logger.ts");class p{configs;issues=[];systemTopic;constructor(e){this.configs=e,this.configs.mediator.registerSystemSource(this)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){this.systemTopic=void 0}close(){this.configs.mediator.unregisterSystemSource(this),this.issues=[]}handleStatsSystemEvents(e){switch(e.content.type){case d.StatsMessageType.LocalReport:this.detectLocalIssues(e.content.data);break;case d.StatsMessageType.StreamReport:this.detectStreamIssues(e.content.data)}}detectProblems(e,t,s,n){const i=r.DETECTION_PROBLEM_RULES.find((t=>t.issues.some((t=>t.type===e))));n>=i.issues.find((t=>t.type===e)).threshold&&(this.addProblem(i.type,t,s),this.issues=this.issues.filter((n=>!(n.type===e&&n.nodeId===t&&n.origin===s))))}detectLocalIssues(e){i.DETECTION_CORE_ISSUE_RULES.forEach((t=>{const s=t.reportMetric(e);t.maxThreshold&&s>t.maxThreshold&&this.addIssue(t.type,this.configs.localNode.getId(),a.PeerConnectionOrigin.Sender,s),t.minThreshold&&s<t.minThreshold&&this.addIssue(t.type,this.configs.localNode.getId(),a.PeerConnectionOrigin.Sender,s)}))}detectStreamIssues(e){let t=[];switch(e.origin){case a.PeerConnectionOrigin.Sender:t=i.DETECTION_SENDER_ISSUE_RULES;break;case a.PeerConnectionOrigin.Receiver:t=i.DETECTION_RECEIVER_ISSUE_RULES}e.video&&this.detectVideoIssues(e.nodeId,a.PeerConnectionOrigin.Sender,e.video),e.audio&&this.detectAudioIssues(e.nodeId,a.PeerConnectionOrigin.Sender,e.audio),t.forEach((t=>{const s=t.reportMetric(e);t.maxThreshold&&s>t.maxThreshold&&this.addIssue(t.type,e.nodeId,a.PeerConnectionOrigin.Sender,s),t.minThreshold&&s<t.minThreshold&&this.addIssue(t.type,e.nodeId,a.PeerConnectionOrigin.Sender,s)}))}detectVideoIssues(e,t,s){0!==s.bitrate&&i.DETECTION_VIDEO_ISSUE_RULES.forEach((n=>{const i=n.reportMetric(s);n.maxThreshold&&i>n.maxThreshold&&this.addIssue(n.type,e,t,i,"video"),n.minThreshold&&i<n.minThreshold&&this.addIssue(n.type,e,t,i,"video")}))}detectAudioIssues(e,t,s){0!==s.bitrate&&i.DETECTION_AUDIO_ISSUE_RULES.forEach((n=>{const i=n.reportMetric(s);n.maxThreshold&&i>n.maxThreshold&&this.addIssue(n.type,e,t,i,"audio"),n.minThreshold&&i<n.minThreshold&&this.addIssue(n.type,e,t,i,"audio")}))}addIssue(e,t,s,i,r){h.default.log(u.LoggingChannels.Detection,`Issue detected: ${e}`,e,i),h.default.logEvent("issue",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,remoteId:t,data:{type:e,value:i,kind:r}}),this.issues=this.issues.filter((e=>Date.now()-e.timestamp<n.DETECTION_ISSUE_TIMEOUT)),this.issues.push({timestamp:Date.now(),type:e,nodeId:t,origin:s,value:i,kind:r});const o=this.issues.filter((n=>n.type===e&&n.nodeId===t&&n.origin===s)).length;this.detectProblems(e,t,s,o)}addProblem(e,t,s){h.default.log(u.LoggingChannels.Detection,`Problem detected: ${e}`),h.default.logEvent("problem",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,remoteId:t,data:{type:e}}),this.systemTopic?.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:l.SystemMessageType.Detection,content:{type:c.DetectionMessageType.Problem,data:{timestamp:Date.now(),nodeId:t,origin:a.PeerConnectionOrigin.Sender,type:e}}})}}},"./src/models/Node/Agent.ts":(e,t,s)=>{s.r(t),s.d(t,{Agent:()=>r});var n=s("@crewdle/web-sdk-types"),i=s("./src/models/Node/Node.ts");class r extends i.Node{type=n.NodeType.Agent}},"./src/models/Node/AuthAgent.ts":(e,t,s)=>{s.r(t),s.d(t,{AuthAgent:()=>l});var n=s("firebase/firestore"),i=s("@crewdle/web-sdk-types"),r=s("./src/constants/Node.ts"),o=s("./src/interfaces/Utils/Logger.ts"),a=s("./src/services/Firebase/FirebaseService.ts"),c=s("./src/utils/Interval/Interval.ts"),d=s("./src/utils/Logger/Logger.ts");class l{id;groupId;vendorId;agentConfig;type=i.NodeType.Agent;constructor(e,t,s,n){this.id=e,this.groupId=t,this.vendorId=s,this.agentConfig=n}getId(){return this.id}onConfigurationChange(e){const t=(0,n.onSnapshot)((0,n.doc)(a.default.getFirestore(),`developers/${this.vendorId}/resources/agent/items/${this.groupId}`),(t=>{if(t.exists()){const s=t.data();if(this.agentConfig.timestamp.isEqual(s.timestamp))return;d.default.log(o.LoggingChannels.Node,"agent-config-changed",{agentId:this.id,groupId:this.groupId,oldConfig:this.agentConfig,newConfig:s}),this.agentConfig=s,e()}}));return()=>t()}setReportCapacity(e){return this.reportCapacity(this.groupId,e),c.default.setInterval((()=>this.reportCapacity(this.groupId,e)),r.NODE_AGENT_CAPACITY_REPORT_INTERVAL)}async reportCapacity(e,t){const s=await t();await(0,n.addDoc)((0,n.collection)(a.default.getFirestore(),`developers/${this.vendorId}/capacities`),{agentId:this.id,groupId:e,timestamp:(0,n.serverTimestamp)(),capacity:s})}}},"./src/models/Node/AuthUser.ts":(e,t,s)=>{s.r(t),s.d(t,{AuthUser:()=>r});var n=s("@crewdle/web-sdk-types"),i=s("./src/utils/Observer/Observer.ts");class r{id;displayName;email;type=n.NodeType.User;joinedClusters=new Map;observer=(0,i.createObserver)();constructor(e,t,s){this.id=e,this.displayName=t,this.email=s}getId(){return this.id}getDisplayName(){return this.displayName}getEmail(){return this.email}setDisplayName(e){this.displayName!==e&&(this.displayName=e,this.observer.publish(this))}setEmail(e){this.email!==e&&(this.email=e,this.observer.publish(this))}registerCluster(e,t){if(this.joinedClusters.has(e))return;const s=this.observer.subscribe(t);this.joinedClusters.set(e,s)}unregisterCluster(e){if(!this.joinedClusters.has(e))return;const t=this.joinedClusters.get(e);t&&t(),this.joinedClusters.delete(e)}}},"./src/models/Node/LocalAgent.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalAgent:()=>a});var n=s("./src/constants/Node.ts"),i=s("./src/interfaces/Node/NodeMessage.ts"),r=s("./src/interfaces/Subscription/SystemEvent.ts"),o=s("./src/models/Node/Agent.ts");class a extends o.Agent{systemTopic;currentVersion=Date.now();updateDebounceTimeout;lastUpdated;close(){this.updateDebounceTimeout&&(clearTimeout(this.updateDebounceTimeout),delete this.updateDebounceTimeout),delete this.lastUpdated,this.currentVersion=Date.now(),super.close()}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}answerJoin(e){!this.updateDebounceTimeout&&this.rank&&this.systemTopic.publish({sourceId:this.id,destinationIds:[e],propagate:!0,messageType:r.SystemMessageType.Node,content:{type:i.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}addRemoteConnection(e){this.remoteConnections.has(e)||(this.remoteConnections.add(e),this.incrementVersion(),this.publishUserUpdate(!0))}removeRemoteConnection(e){this.remoteConnections.has(e)&&(this.remoteConnections.delete(e),this.incrementVersion(),this.publishUserUpdate(!0))}getCurrentVersion(){return this.currentVersion}setRank(e,t=!0){this.rank!==e&&(this.rank=e,t&&(this.incrementVersion(),this.publishUserUpdate()))}incrementVersion(){this.currentVersion=Date.now()}publishUserUpdate(e=!1){if(this.rank){if(this.lastUpdated||(this.lastUpdated=Date.now()),this.updateDebounceTimeout){if(Date.now()-this.lastUpdated>n.NODE_UPDATE_DEBOUNCE_TIME_LIMIT)return;clearTimeout(this.updateDebounceTimeout)}this.updateDebounceTimeout=setTimeout((()=>{delete this.lastUpdated,delete this.updateDebounceTimeout,this.systemTopic.publish({sourceId:this.id,propagate:!0,messageType:r.SystemMessageType.Node,content:{type:e?i.NodeMessageType.NodeConnectionsUpdate:i.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}),n.NODE_UPDATE_DEBOUNCE_TIME)}}}},"./src/models/Node/LocalUser.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalUser:()=>a});var n=s("./src/constants/Node.ts"),i=s("./src/interfaces/Node/NodeMessage.ts"),r=s("./src/interfaces/Subscription/SystemEvent.ts"),o=s("./src/models/Node/User.ts");class a extends o.User{systemTopic;currentVersion=Date.now();updateDebounceTimeout;lastUpdated;close(){this.updateDebounceTimeout&&(clearTimeout(this.updateDebounceTimeout),delete this.updateDebounceTimeout),delete this.lastUpdated,this.currentVersion=Date.now(),super.close()}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}answerJoin(e){!this.updateDebounceTimeout&&this.rank&&this.systemTopic.publish({sourceId:this.id,destinationIds:[e],propagate:!0,messageType:r.SystemMessageType.Node,content:{type:i.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type,displayName:this.getDisplayName(),email:this.getEmail()},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}addRemoteConnection(e){this.remoteConnections.has(e)||(this.remoteConnections.add(e),this.incrementVersion(),this.publishUserUpdate(!0))}removeRemoteConnection(e){this.remoteConnections.has(e)&&(this.remoteConnections.delete(e),this.incrementVersion(),this.publishUserUpdate(!0))}getCurrentVersion(){return this.currentVersion}setDisplayName(e){this.displayName!==e&&(this.displayName=e,this.incrementVersion(),this.publishUserUpdate())}setEmail(e){this.email!==e&&(this.email=e,this.incrementVersion(),this.publishUserUpdate())}setRank(e,t=!0){this.rank!==e&&(this.rank=e,t&&(this.incrementVersion(),this.publishUserUpdate()))}incrementVersion(){this.currentVersion=Date.now()}publishUserUpdate(e=!1){if(this.rank){if(this.lastUpdated||(this.lastUpdated=Date.now()),this.updateDebounceTimeout){if(Date.now()-this.lastUpdated>n.NODE_UPDATE_DEBOUNCE_TIME_LIMIT)return;clearTimeout(this.updateDebounceTimeout)}this.updateDebounceTimeout=setTimeout((()=>{delete this.lastUpdated,delete this.updateDebounceTimeout,this.systemTopic.publish({sourceId:this.id,propagate:!0,messageType:r.SystemMessageType.Node,content:{type:e?i.NodeMessageType.NodeConnectionsUpdate:i.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type,displayName:this.getDisplayName(),email:this.getEmail()},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}),n.NODE_UPDATE_DEBOUNCE_TIME)}}}},"./src/models/Node/Node.ts":(e,t,s)=>{s.r(t),s.d(t,{Node:()=>n});class n{id;remoteConnections;rank;constructor(e,t=new Set,s){this.id=e,this.remoteConnections=t,this.rank=s}close(){this.rank=void 0,this.remoteConnections.clear()}getId(){return this.id}getRank(){return this.rank}getRemoteConnections(){return this.remoteConnections}}},"./src/models/Node/NodeManager.ts":(e,t,s)=>{s.r(t),s.d(t,{NodeManager:()=>y});var n=s("@crewdle/web-sdk-types"),i=s("./src/constants/Node.ts"),r=s("./src/constants/System.ts"),o=s("./src/errors/EarlyReturnError.ts"),a=s("./src/errors/SDKInternalError.ts"),c=s("./src/interfaces/Connection/PeerConnection.ts"),d=s("./src/interfaces/Node/Node.ts"),l=s("./src/interfaces/Node/NodeMessage.ts"),u=s("./src/interfaces/Subscription/SystemEvent.ts"),h=s("./src/interfaces/Utils/Logger.ts"),p=s("./src/models/Node/RemoteAgent.ts"),g=s("./src/models/Node/RemoteUser.ts"),m=s("./src/services/Discovery/FirebaseRDBDiscoveryService.ts"),b=s("./src/utils/Interval/Interval.ts"),S=s("./src/utils/Logger/Logger.ts");class y{configs;graphService;localNode;remoteUnsubscriber;discoveryService;discoveryUnsubscriber;ancestors=[];systemTopic;optimizationLayers=new Map;debounceProcessRank;lastProcessRank;constructor(e,t,s){this.configs=e,this.graphService=t,this.localNode=s,this.discoveryService=new m.FirebaseRDBDiscoveryService(this.configs.vendorId,this.configs.clusterId,this.localNode,this.graphService.getMinConnections()),this.discoveryUnsubscriber=this.discoveryService.onNodeDisconnect(this.handleNodeDisconnect.bind(this)),this.configs.mediator.registerSystemSource(this.localNode),this.configs.mediator.registerSystemSource(this),this.remoteUnsubscriber=b.default.setInterval((()=>{const e=Date.now();this.graphService.getRemoteNodes().forEach((t=>{t.getStatus()===d.NodeStatus.Offline&&t.getLastUpdated()<e-i.NODE_CLEAN_REMOTE_NODES_THRESHOLD&&this.graphService.deleteRemoteNode(t.getId())}))}),i.NODE_CLEAN_REMOTE_NODES_INTERVAL)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}close(){this.debounceProcessRank&&(clearTimeout(this.debounceProcessRank),delete this.debounceProcessRank),delete this.lastProcessRank,this.localNode.close(),this.remoteUnsubscriber(),this.discoveryUnsubscriber(),this.configs.mediator.unregisterSystemSource(this.localNode),this.configs.mediator.unregisterSystemSource(this),this.discoveryService.close()}getAncestorIds(){return this.ancestors}getLocalId(){return this.localNode.getId()}getLocalNode(){return this.localNode}getRemoteNodes(e){const t=Array.from(this.graphService.getRemoteNodes().values()).filter((e=>e.getStatus()===d.NodeStatus.Online));return e?t.filter(e):t}async discover(){return this.ancestors=await this.discoveryService.join(),this.ancestors.length<this.graphService.getMinConnections()&&(this.localNode.setRank(this.ancestors.length+1),this.processRank()),this.ancestors}getDistance(e,t){const s=this.localNode.getRemoteConnections(),n=new Set(s),r=Array.from(s).filter((t=>t!==e)).map((e=>({id:e,distance:1})));for(;r.length>0;){const e=r.shift();if(!e)continue;if(e.id===t)return e.distance;const s=this.graphService.getRemoteNode(e.id);s&&s.getStatus()!==d.NodeStatus.Offline&&s.getRemoteConnections().forEach((t=>{n.has(t)||(n.add(t),r.push({id:t,distance:e.distance+i.NODE_DISTANCE_HOP}))}))}return-1}handleNodeSystemEvents(e){try{switch(e.content.type){case l.NodeMessageType.NodeUpdate:case l.NodeMessageType.NodeConnectionsUpdate:this.handleNodeUpdate(e.content),S.default.log(h.LoggingChannels.Node,"NodeManager - NodeUpdate",`'${this.localNode.getId()}, ${e.sourceId}'`,e,e.content);break;case l.NodeMessageType.NodeLeave:this.removeNode(e.content.id),S.default.log(h.LoggingChannels.Node,"NodeManager - NodeLeave",`'${this.localNode.getId()}, ${e.sourceId}'`,e,e.content)}}catch(e){if(e instanceof o.EarlyReturnError)return void S.default.log(h.LoggingChannels.Node,e.message);throw e}}handlePeerConnectionSystemEvents(e){switch(e.content.type){case c.PeerConnectionMessageType.Success:this.handleConnectionSuccess(e.sourceId),S.default.log(h.LoggingChannels.Node,"NodeManager - ConnectionSuccess",`'${this.localNode.getId()}, ${e.sourceId}'`,e,e.content);break;case c.PeerConnectionMessageType.Disconnect:this.publishNodeLeave(e.sourceId),S.default.log(h.LoggingChannels.Node,"NodeManager - PublishNodeLeave",this.localNode.getId(),e,e.content)}}handleNodeJoin(e){this.createRemoteNode(e),this.notifyJoin(e)}notifyJoin(e){this.localNode.answerJoin(e.id),this.publishNodeJoin(e.id),this.notifyClusterNodeJoin(e)}handleNodeUpdate(e){const{id:t,metaData:s,rank:i,remoteConnections:r,version:o}=e,a=this.graphService.getRemoteNode(t);if(a){if(!(o<=a.getCurrentVersion())){if(a.setRemoteConnections(r),a.setCurrentVersion(o),a.type===n.NodeType.User&&s.type===n.NodeType.User&&(a.setDisplayName(s.displayName),a.setEmail(s.email)),i&&a.setRank(i),this.setLocalRank(t,i),a.getStatus()===d.NodeStatus.Offline)return a.setStatus(d.NodeStatus.Online),this.processRank(),void this.notifyJoin(e);this.processRank(),this.notifyClusterNodeUpdate({id:t,metaData:s,remoteConnections:r,version:o})}}else this.handleNodeJoin(e)}setLocalRank(e,t){t&&this.ancestors.includes(e)&&this.localNode.setRank(t+this.ancestors.indexOf(e)+1)}handleConnectionSuccess(e){this.localNode.addRemoteConnection(e)}createRemoteNode({id:e,metaData:t,rank:s,remoteConnections:i,version:r}){if(this.graphService.hasRemoteNode(e))throw new o.EarlyReturnError(`Cannot create remote node: Node already exists: ${e}`);switch(t.type){case n.NodeType.User:const{displayName:o,email:a}=t;this.graphService.setRemoteNode(e,new g.RemoteUser(e,o,a,new Set(i),r,s));break;case n.NodeType.Agent:this.graphService.setRemoteNode(e,new p.RemoteAgent(e,new Set(i),r,s))}this.setLocalRank(e,s),this.processRank()}publishNodeJoin(e){this.systemTopic.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Node,content:{type:l.NodeMessageType.NodeJoin,id:e}})}publishNodeLeave(e){this.systemTopic?.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Node,content:{type:l.NodeMessageType.NodeLeave,id:e}})}handleNodeDisconnect(e){if(e===this.localNode.getId())return this.configs.mediator.notifyCluster("cluster-disconnect",{id:e}),this.configs.mediator.close(!0),this.configs.mediator.open(),void this.configs.mediator.initialize();this.publishNodeLeave(e)}removeNode(e){this.ancestors.includes(e)?this.manageAncestor(e):this.localNode.getRemoteConnections().has(e)&&this.manageOptimization(e),this.localNode.removeRemoteConnection(e);const t=Array.from(this.optimizationLayers.entries()).find((([,e])=>e==e));t&&this.optimizationLayers.delete(t[0]);const s=this.graphService.getRemoteNode(e);if(!s)return;const n=s.getRank(),i=this.localNode.getRank();i&&n&&n<i&&this.localNode.setRank(i-1,!1),Array.from(this.graphService.getRemoteNodes().values()).forEach((e=>{const t=e.getRank();t&&n&&n<t&&e.setRank(t-1)})),s.setStatus(d.NodeStatus.Offline),this.configs.mediator.notifyCluster(`${s.type}-leave`,{id:e})}notifyClusterNodeJoin({id:e,metaData:t,remoteConnections:s}){switch(t.type){case n.NodeType.User:this.configs.mediator.notifyCluster("user-join",{id:e,metaData:t,remoteConnections:s});break;case n.NodeType.Agent:this.configs.mediator.notifyCluster("agent-join",{id:e,metaData:t,remoteConnections:s})}}notifyClusterNodeUpdate({id:e,metaData:t,remoteConnections:s}){switch(t.type){case n.NodeType.User:this.configs.mediator.notifyCluster("user-update",{id:e,metaData:t,remoteConnections:s});break;case n.NodeType.Agent:this.configs.mediator.notifyCluster("agent-update",{id:e,metaData:t,remoteConnections:s})}}processRank(){if(this.lastProcessRank||(this.lastProcessRank=Date.now()),this.debounceProcessRank){if(Date.now()-this.lastProcessRank>i.NODE_PROCESS_RANK_DEBOUCE_TIME_LIMIT)return;clearTimeout(this.debounceProcessRank)}this.debounceProcessRank=setTimeout((async()=>{delete this.lastProcessRank,delete this.debounceProcessRank;const e=this.localNode.getRank();if(!e)return;const t=this.graphService.getCurrentMaxLayer(this.graphService.getRemoteNodes().size);if(this.optimizationLayers.size>=t)return;let s=1;for(;this.configs.mediator.getConnections().length<this.graphService.getMaxConnections()&&s<=t;){if(this.optimizationLayers.has(s)){s+=1;continue}const t=this.graphService.getNextTargetRank(e,s),n=Array.from(this.graphService.getRemoteNodes().values()).find((e=>e.getRank()===t&&e.getStatus()===d.NodeStatus.Online));if(n){try{await this.configs.mediator.createConnection(n.getId(),c.PeerConnectionType.Optimization),this.optimizationLayers.set(s,n.getId())}catch(e){if(!(e instanceof a.SDKInternalError&&e.code===a.SDKInternalError.codes.RemoteConnectionExists))throw e;S.default.log(h.LoggingChannels.Node,this.localNode.getId(),n.getId(),e.message)}s+=1}else s+=1}}),i.NODE_PROCESS_RANK_DEBOUCE_TIME)}async manageAncestor(e){this.ancestors.splice(this.ancestors.indexOf(e),1);const t=await this.discoveryService.getAncestors();for(const e of t)if(!this.ancestors.includes(e)){const t=Array.from(this.optimizationLayers.entries()).find((([,t])=>t===e));t&&this.optimizationLayers.delete(t[0]),this.configs.mediator.createConnection(e,c.PeerConnectionType.Core)}0===t.length&&this.localNode.setRank(1),this.ancestors=t}async manageOptimization(e){const t=this.localNode.getRank();if(!t)return;const s=this.graphService.getRemoteNode(e);if(!s||s.getStatus()===d.NodeStatus.Offline)return;const n=s.getRank();if(!n||n<t)return;const i=this.getOutgoingOptimizationConnections(this.localNode.getRemoteConnections(),t),r=this.getOutgoingOptimizationConnections(s.getRemoteConnections(),n)[i.findIndex((([t])=>t===e))];if(!r||this.localNode.getRemoteConnections().has(r[0]))return;const o=this.graphService.getRemoteNode(r[0]);if(o&&o.getStatus()!==d.NodeStatus.Offline)try{await this.configs.mediator.createConnection(r[0],c.PeerConnectionType.Optimization);const t=Array.from(this.optimizationLayers.entries()).find((([,t])=>t===e));t&&this.optimizationLayers.set(t[0],r[0])}catch(e){if(!(e instanceof a.SDKInternalError&&e.code===a.SDKInternalError.codes.RemoteConnectionExists))throw e;S.default.log(h.LoggingChannels.Node,this.localNode.getId(),r[0],e.message)}}getOutgoingOptimizationConnections(e,t){return Array.from(e).reduce(((e,s)=>{const n=this.graphService.getRemoteNode(s);if(!n||n.getStatus()===d.NodeStatus.Offline)return e;const i=n.getRank();if(!i)return e;const r=i-t;return r<=this.graphService.getMinConnections()||e.push([s,r]),e}),[]).sort((([,e],[,t])=>e-t))}}},"./src/models/Node/RemoteAgent.ts":(e,t,s)=>{s.r(t),s.d(t,{RemoteAgent:()=>r});var n=s("./src/interfaces/Node/Node.ts"),i=s("./src/models/Node/Agent.ts");class r extends i.Agent{currentVersion;status=n.NodeStatus.Online;lastUpdated=Date.now();constructor(e,t=new Set,s,n){super(e,t,n),this.currentVersion=s}getCurrentVersion(){return this.currentVersion}getStatus(){return this.status}getLastUpdated(){return this.lastUpdated}setRank(e){this.rank!==e&&(this.rank=e,this.updateLastUpdated())}setRemoteConnections(e){let t=!1;for(const s of this.remoteConnections)e.includes(s)||(t=!0,this.remoteConnections.delete(s));for(const s of e)this.remoteConnections.has(s)||(t=!0,this.remoteConnections.add(s));t&&this.updateLastUpdated()}setCurrentVersion(e){this.currentVersion!==e&&(this.currentVersion=e,this.updateLastUpdated())}setStatus(e){this.status!==e&&(this.status=e,this.updateLastUpdated(),e===n.NodeStatus.Offline&&this.close())}updateLastUpdated(){this.lastUpdated=Date.now()}}},"./src/models/Node/RemoteUser.ts":(e,t,s)=>{s.r(t),s.d(t,{RemoteUser:()=>r});var n=s("./src/interfaces/Node/Node.ts"),i=s("./src/models/Node/User.ts");class r extends i.User{currentVersion;status=n.NodeStatus.Online;lastUpdated=Date.now();constructor(e,t,s,n=new Set,i,r){super(e,t,s,n,r),this.currentVersion=i}getCurrentVersion(){return this.currentVersion}getStatus(){return this.status}getLastUpdated(){return this.lastUpdated}setDisplayName(e){this.displayName!==e&&(this.displayName=e,this.updateLastUpdated())}setEmail(e){this.email!==e&&(this.email=e,this.updateLastUpdated())}setRank(e){this.rank!==e&&(this.rank=e,this.updateLastUpdated())}setRemoteConnections(e){let t=!1;for(const s of this.remoteConnections)e.includes(s)||(t=!0,this.remoteConnections.delete(s));for(const s of e)this.remoteConnections.has(s)||(t=!0,this.remoteConnections.add(s));t&&this.updateLastUpdated()}setCurrentVersion(e){this.currentVersion!==e&&(this.currentVersion=e,this.updateLastUpdated())}setStatus(e){this.status!==e&&(this.status=e,this.updateLastUpdated(),e===n.NodeStatus.Offline&&this.close())}updateLastUpdated(){this.lastUpdated=Date.now()}}},"./src/models/Node/User.ts":(e,t,s)=>{s.r(t),s.d(t,{User:()=>r});var n=s("@crewdle/web-sdk-types"),i=s("./src/models/Node/Node.ts");class r extends i.Node{id;displayName;email;remoteConnections;rank;type=n.NodeType.User;constructor(e,t,s,n=new Set,i){super(e,n,i),this.id=e,this.displayName=t,this.email=s,this.remoteConnections=n,this.rank=i}getDisplayName(){return this.displayName}getEmail(){return this.email}}},"./src/models/Orchestrator/Orchestrator.ts":(e,t,s)=>{s.r(t),s.d(t,{Orchestrator:()=>R});var n=s("@crewdle/web-sdk-types"),i=s("./src/public/errors/SDKClientError.ts"),r=s("./src/errors/EarlyReturnError.ts"),o=s("./src/errors/SDKInternalError.ts"),a=s("./src/interfaces/Connection/PeerConnection.ts"),c=s("./src/interfaces/SDK/SDK.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/models/Connection/ConnectionManager.ts"),h=s("./src/models/Content/ContentManager.ts"),p=s("./src/models/Detection/DetectionManager.ts"),g=s("./src/models/Node/LocalAgent.ts"),m=s("./src/models/Node/LocalUser.ts"),b=s("./src/models/Node/NodeManager.ts"),S=s("./src/models/Remediation/RemediationManager.ts"),y=s("./src/models/Stats/StatsManager.ts"),T=s("./src/models/Subscription/Helpers.ts"),C=s("./src/models/Subscription/SubscriptionManager.ts"),I=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),f=s("./src/models/Subscription/SystemTopic.ts"),E=s("./src/services/Graph/GraphService.ts"),v=s("./src/utils/Logger/Helpers.ts"),N=s("./src/utils/Logger/Logger.ts");class R{vendorId;clusterId;authService;options;configs;clusterEventEmitter;contentManager;connectionManager;subscriptionManager;statsManager;detectionManager;remediationManager;nodeManager;graphService;systemTopic=new f.SystemTopic;systemTopicUnsubscribe;localNode;constructor(e,t,s,i,r,o,a){switch(this.vendorId=e,this.clusterId=t,this.authService=i,this.options=r,this.configs=o,this.clusterEventEmitter=a,s.type){case n.NodeType.User:this.localNode=new m.LocalUser(s.getId(),s.getDisplayName(),s.getEmail());break;case n.NodeType.Agent:default:this.localNode=new g.LocalAgent(s.getId())}const c=this.getConfigs();this.graphService=new E.GraphService(this.options.minConnections,this.options.maxConnections,this.options.maxDistance),this.contentManager=new h.ContentManager(c,this.options.maxFps,this.options.audioContext),this.connectionManager=new u.ConnectionManager(c,this.authService,this.configs.iceServers,this.options.maxFps,this.options.maxBpp,this.graphService,this.options.peerConnectionConnector),this.subscriptionManager=new C.SubscriptionManager(c,this.options.maxOutgoingSubscriptions,this.graphService.getMaxDistance()),this.statsManager=new y.StatsManager(c),this.detectionManager=new p.DetectionManager(c),this.remediationManager=new S.RemediationManager(c),this.nodeManager=new b.NodeManager(c,this.graphService,this.localNode),this.systemTopicUnsubscribe=this.initializeSystemTopic()}open(){const e=this.getConfigs();this.connectionManager=new u.ConnectionManager(e,this.authService,this.configs.iceServers,this.options.maxFps,this.options.maxBpp,this.graphService,this.options.peerConnectionConnector),this.subscriptionManager=new C.SubscriptionManager(e,this.options.maxOutgoingSubscriptions,this.graphService.getMaxDistance()),this.statsManager=new y.StatsManager(e),this.detectionManager=new p.DetectionManager(e),this.remediationManager=new S.RemediationManager(e),this.nodeManager=new b.NodeManager(e,this.graphService,this.localNode);const t=this.connectionManager.getConnectionGroup();this.contentManager.getPubSubTopics().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset()})),this.contentManager.getObjectStoreBuckets().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset(),e.sync()})),this.contentManager.getKeyValueDatabases().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset(),this.syncKeyValueDatabase(e)})),this.systemTopicUnsubscribe=this.initializeSystemTopic()}registerSystemSource(e){try{this.systemTopic.registerSource(e)}catch(e){this.handleError(e,{})}}unregisterSystemSource(e){try{this.systemTopic.unregisterSource(e)}catch(e){this.handleError(e,{})}}createConnection(e,t){return this.connectionManager.createConnection(e,t)}getConnection(e){try{return this.connectionManager.getConnection(e)}catch(e){throw this.handleError(e,{})}}getConnections(e){try{return this.connectionManager.getConnections(e)}catch(e){throw this.handleError(e,{})}}getRemoteMediaStream(e,t){try{return this.contentManager.getRemoteMediaStreams((s=>s.getOwnerId()===e&&s.getLabel()===t))[0]}catch(e){throw this.handleError(e,{})}}getLocalMediaStream(e){try{return this.contentManager.getLocalMediaStreams((t=>t.getLabel()===e))[0]}catch(e){throw this.handleError(e,{})}}notifyCluster=(...e)=>{try{return this.clusterEventEmitter.emit(...e)}catch(e){throw this.handleError(e,{})}};registerRemoteNode(e){try{this.statsManager.addRemoteNode(e)}catch(e){throw this.handleError(e,{})}}unregisterRemoteNode(e){try{this.statsManager.removeRemoteNode(e)}catch(e){throw this.handleError(e,{})}}collectStats(e){return this.connectionManager.collectStats(e)}async initialize(){try{await this.connectionManager.initialize();const e=await this.nodeManager.discover();for(const t of e)this.connectionManager.createConnection(t)}catch(e){throw this.handleError(e,{})}}updateUser(e){this.localNode.type===n.NodeType.User&&(this.localNode.setEmail(e.getEmail()),this.localNode.setDisplayName(e.getDisplayName()))}close(e=!1){N.default.warning("orchestrator-close",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type}),this.systemTopicUnsubscribe(),this.remediationManager.close(),this.detectionManager.close(),this.statsManager.close(),this.subscriptionManager.close(),this.connectionManager.close(),this.contentManager.close(e),this.nodeManager.close()}openPubSubTopic(e){try{const t=this.contentManager.createPubSubTopic(e),s=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(t,s),this.subscriptionManager.createIncomingSubscription(s,t),t}catch(e){throw this.handleError(e,{})}}async openObjectStoreBucket(e){try{const t=this.contentManager.createObjectStoreBucket(e,this.options.objectStoreConnector),s=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(t,s),this.subscriptionManager.createIncomingSubscription(s,t),await t.sync(),t}catch(e){throw this.handleError(e,{})}}async openKeyValueDatabase(e,t){try{const s=await this.contentManager.createKeyValueDatabase(e,t,this.options.keyValueDatabaseConnector),n=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(s,n),this.subscriptionManager.createIncomingSubscription(n,s),await s.open(),this.syncKeyValueDatabase(s),s}catch(e){throw this.handleError(e,{})}}getPubSubTopics(e){try{return this.contentManager.getPubSubTopics(e)}catch(e){throw this.handleError(e,{})}}getObjectStoreBuckets(e){try{return this.contentManager.getObjectStoreBuckets(e)}catch(e){throw this.handleError(e,{})}}getKeyValueDatabases(e){try{return this.contentManager.getKeyValueDatabases(e)}catch(e){throw this.handleError(e,{})}}createLocalMediaStream(e,t){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new i.SDKClientError(i.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.createLocalMediaStream(e,t)}catch(e){throw this.handleError(e,{})}}createLocalDynamicMediaStream(e,t){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new i.SDKClientError(i.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.createLocalDynamicMediaStream(e,t)}catch(e){throw this.handleError(e,{})}}getLocalMediaStreams(e){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new i.SDKClientError(i.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.getLocalMediaStreams(e)}catch(e){throw this.handleError(e,{})}}getRemoteMediaStreams(e){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new i.SDKClientError(i.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.getRemoteMediaStreams(e)}catch(e){throw this.handleError(e,{})}}getDistance(e,t){return this.nodeManager.getDistance(e,t)}getLocalNode(){return this.nodeManager.getLocalNode()}getRemoteNodes(e){try{return this.nodeManager.getRemoteNodes(e)}catch(e){throw this.handleError(e,{})}}async handleSystemEvents(e){try{if(N.default.log(l.LoggingChannels.Events,"Orchestrator handleSystemEvents",this.nodeManager.getLocalId(),e),(0,T.isSender)(e,this.nodeManager.getLocalId()))return void this.connectionManager.handleOutgoingSystemEvents(e);switch(e.messageType){case d.SystemMessageType.Content:this.statsManager.handleContentSystemEvents(e),this.subscriptionManager.handleContentSystemEvents(e),this.contentManager.handleContentSystemEvents(e);break;case d.SystemMessageType.Node:this.subscriptionManager.handleNodeSystemEvents(e),this.connectionManager.handleNodeSystemEvents(e),this.contentManager.handleNodeSystemEvents(e),this.nodeManager.handleNodeSystemEvents(e);break;case d.SystemMessageType.Detection:this.remediationManager.handleDetectionSystemEvents(e);break;case d.SystemMessageType.Remediation:this.remediationManager.handleRemediationSystemEvents(e);break;case d.SystemMessageType.Stats:this.detectionManager.handleStatsSystemEvents(e);break;case d.SystemMessageType.Subscription:e.content.type!==I.SubscriptionMessageType.UnsubscribeMediaStream?(this.subscriptionManager.handleSubscriptionSystemEvents(e),this.contentManager.handleSubscriptionSystemEvents(e)):(this.contentManager.handleSubscriptionSystemEvents(e),this.subscriptionManager.handleSubscriptionSystemEvents(e));break;case d.SystemMessageType.PeerConnection:await this.connectionManager.handlePeerConnectionSystemEvents(e),this.statsManager.handlePeerConnectionSystemEvents(e),this.nodeManager.handlePeerConnectionSystemEvents(e),this.subscriptionManager.handlePeerConnectionSystemEvents(e)}}catch(e){throw this.handleError(e,{})}}handleError(e,t){if(!(e instanceof r.EarlyReturnError)){if(e instanceof i.SDKClientError)throw e;if(!(e instanceof Error))throw new i.SDKClientError(i.SDKClientErrorCodes.InternalSDKError,`Internal unknown error: ${e}`);if(!(e instanceof o.SDKInternalError))throw new i.SDKClientError(i.SDKClientErrorCodes.InternalSDKError,`Internal error: ${e.message}`);switch(e.code){case o.SDKInternalError.codes.MissingSystemTopic:case o.SDKInternalError.codes.MissingRemoteConnection:case o.SDKInternalError.codes.PeerConnectionInvalidDestination:case o.SDKInternalError.codes.ConnectionNotinitialized:case o.SDKInternalError.codes.ConnectionNotConnected:case o.SDKInternalError.codes.InvalidDataChannel:case o.SDKInternalError.codes.InvalidPublisher:case o.SDKInternalError.codes.InvalidSubscriber:case o.SDKInternalError.codes.SubscriptionRequestDoesNotExist:case o.SDKInternalError.codes.SubscriptionRequestFailed:case o.SDKInternalError.codes.SubscriptionRequestNoAnswer:case o.SDKInternalError.codes.InvalidSubscription:}throw N.default.error(`sdk-internal-error: ${e.message}`,{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type},e),new i.SDKClientError(i.SDKClientErrorCodes.InternalSDKError,`Internal SDK error: ${e.message}`)}}getConfigs(){return{mediator:this,vendorId:this.vendorId,clusterId:this.clusterId,localNode:this.localNode}}initializeSystemTopic(){return this.systemTopic.subscribe((e=>{const t=(0,v.getFormattedSytemLog)(e,this.localNode.getId()),s=e.messageType===d.SystemMessageType.Stats||e.messageType===d.SystemMessageType.PeerConnection&&e.content.type===a.PeerConnectionMessageType.Stats?l.LoggingChannels.SystemStats:l.LoggingChannels.System;N.default.logRaw(s,`${e.uuid} - ${t}`,e),this.handleSystemEvents(e).catch((e=>{console.error(e)}))}))}async syncKeyValueDatabase(e,t){t=this.findNextAncestor(t),await e.sync(t,(()=>this.syncKeyValueDatabase(e,t)))}findNextAncestor(e){const t=this.nodeManager.getAncestorIds();if(!e)return t[0];const s=t.findIndex((t=>e===t)),n=t[s+1];return t.length>0&&!n?e[0]:n}}},"./src/models/Remediation/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{applyRemediation:()=>a,findSender:()=>o,getMaxBitrate:()=>c});var n=s("./src/constants/Content.ts"),i=s("./src/constants/Remediation.ts"),r=s("./src/interfaces/Remediation/Remediation.ts");function o(e,t){return e.sort(((e,s)=>t.action===r.RemediationAction.Downgrade?s.priority-e.priority:e.priority-s.priority)).find((e=>function(e,t){if(t.action===r.RemediationAction.Downgrade){if(t.component===r.RemediationComponent.Resolution)return e.resolutionScale<i.REMEDIATION_MAX_RESOLUTION_SCALE||e.maxFramerate>i.REMEDIATION_MIN_FPS;if(t.component===r.RemediationComponent.Bitrate)return e.maxBitrate>i.REMEDIATION_MIN_BITRATE}return e.resolutionScale>e.minResolutionScale||e.framerate<e.maxFramerate||e.bitrate<e.maxBitrate}(e,t)))}function a(e,t){e.tracks.video&&e.tracks.video.sender&&(e.resolutionScale=function(e,t,s){switch(s.action){case r.RemediationAction.Downgrade:s.component===r.RemediationComponent.Resolution&&(e+=i.REMEDIATION_RESOLUTION_SCALE)>i.REMEDIATION_MAX_RESOLUTION_SCALE&&(e=i.REMEDIATION_MAX_RESOLUTION_SCALE);break;case r.RemediationAction.Upgrade:(e-=i.REMEDIATION_RESOLUTION_SCALE)<t&&(e=t)}return e}(e.resolutionScale,e.minResolutionScale,t),e.framerate=function(e,t,s){switch(s.action){case r.RemediationAction.Downgrade:s.component===r.RemediationComponent.Resolution&&(e-=i.REMEDIATION_FPS)<i.REMEDIATION_MIN_FPS&&(e=i.REMEDIATION_MIN_FPS);break;case r.RemediationAction.Upgrade:(e+=i.REMEDIATION_FPS)>t&&(e=t)}return e}(e.framerate,e.maxFramerate,t),e.bitrate=function(e,t,s){switch(s.action){case r.RemediationAction.Downgrade:s.component===r.RemediationComponent.Bitrate&&(e*=1-i.REMEDIATION_BITRATE)<i.REMEDIATION_MIN_BITRATE&&(e=i.REMEDIATION_MIN_BITRATE);break;case r.RemediationAction.Upgrade:(e*=1+i.REMEDIATION_BITRATE)>t&&(e=t)}return e}(e.bitrate,e.maxBitrate,t))}function c(e,t){return Math.floor(n.CONTENT_MAX_WIDTH*n.CONTENT_MAX_HEIGHT*e*t)}},"./src/models/Remediation/RemediationManager.ts":(e,t,s)=>{s.r(t),s.d(t,{RemediationManager:()=>h});var n=s("./src/constants/Remediation.ts"),i=s("./src/constants/RemediationRules.ts"),r=s("./src/constants/System.ts"),o=s("./src/interfaces/Connection/PeerConnection.ts"),a=s("./src/interfaces/Detection/Detection.ts"),c=s("./src/interfaces/Remediation/Remediation.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/utils/Logger/Logger.ts");class h{configs;systemTopic;lastRemediations=new Map;constructor(e){this.configs=e,this.configs.mediator.registerSystemSource(this)}close(){this.configs.mediator.unregisterSystemSource(this)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}handleDetectionSystemEvents(e){e.content.type===a.DetectionMessageType.Problem&&this.handleProblem(e.content.data)}handleRemediationSystemEvents(e){e.content.type===c.RemediationMessageType.RemoteRemediation&&this.applyRemediation(e.sourceId,{type:c.RemediationMessageType.Remediation,component:e.content.data.component,action:e.content.data.action})}handleProblem(e){const t=i.REMEDIATION_RULES.find((t=>t.problemType===e.type));t.remediations?.forEach((t=>{this.applyRemediation(e.nodeId,{type:e.origin===o.PeerConnectionOrigin.Sender?c.RemediationMessageType.Remediation:c.RemediationMessageType.RemoteRemediation,component:t.component,action:t.action})}))}applyRemediation(e,t){if(t.type===c.RemediationMessageType.Remediation){const t=Date.now(),s=this.lastRemediations.get(e);if(s&&t-s<n.REMEDIATION_DOWNGRADE_WAIT_TIME)return;this.lastRemediations.set(e,t)}u.default.log(l.LoggingChannels.Remediation,"Apply remediation",t),u.default.logEvent("remediation",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,remoteId:e,data:{type:t.type,component:t.component,action:t.action}});let s,i=r.SYSTEM_TOPIC_INTERNAL;t.type===c.RemediationMessageType.RemoteRemediation&&(i=this.configs.localNode.getId(),s=[e]),this.systemTopic.publish({sourceId:i,destinationIds:s,messageType:d.SystemMessageType.Remediation,content:{type:t.type,targetId:e,data:t}})}}},"./src/models/SDK/SDK.ts":(e,t,s)=>{s.r(t),s.d(t,{SDK:()=>v});var n=s("firebase/firestore"),i=s("firebase/functions"),r=s("@crewdle/web-sdk-types"),o=s("@crewdle/mist-connector-opfs"),a=s("@crewdle/mist-connector-indexed-db"),c=s("@crewdle/mist-connector-webrtc-browser"),d=s("./src/public/errors/SDKClientError.ts"),l=s("./src/constants/Connection.ts"),u=s("./src/constants/Content.ts"),h=s("./src/constants/Node.ts"),p=s("./src/constants/Subscription.ts"),g=s("./src/interfaces/Utils/Support.ts"),m=s("./src/models/Cluster/Cluster.ts"),b=s("./src/models/Node/AuthAgent.ts"),S=s("./src/models/Node/AuthUser.ts"),y=s("./src/services/Auth/FirebaseAuthService.ts"),T=s("./src/services/Firebase/FirebaseService.ts"),C=s("./src/utils/Interval/Interval.ts"),I=s("./src/utils/Logger/Logger.ts"),f=s("./src/utils/Support/Support.ts"),E=s("./src/environments/Environment.ts");class v{static instance;authService;vendorId;options;configs;clusters=new Map;authContext;unsubscribe;constructor(e,t,s){this.vendorId=e,this.configs=t,this.authService=new y.FirebaseAuthService(this.vendorId),f.default.initialize(),this.options={audioContext:s?.audioContext??(f.default.isFeatureSupported(g.SupportFeatureName.AudioContext)&&new AudioContext||void 0),maxOutgoingSubscriptions:s?.maxOutgoingSubscriptions??p.SUBSCRIPTION_MAX_OUTGOING,minConnections:s?.minConnections??l.CONNECTION_MIN,maxConnections:s?.maxConnections??(s?.minConnections&&4*s.minConnections)??l.CONNECTION_MAX,maxDistance:s?.maxDistance??h.NODE_DISTANCE_MAX,maxFps:s?.maxFps??u.CONTENT_FPS,maxBpp:s?.maxBpp??u.CONTENT_BPP,objectStoreConnector:s?.objectStoreConnector??o.OPFSObjectStoreConnector,keyValueDatabaseConnector:s?.keyValueDatabaseConnector??a.IDBDatabaseConnector,peerConnectionConnector:s?.peerConnectionConnector??c.WebRTCBrowserPeerConnectionConnector},s?.disableIntervalHack&&this.options.audioContext&&C.default.startNoThrottlingHack(this.options.audioContext),I.default.setVendorId(this.vendorId),s?.loggingConnectors&&I.default.setLoggingConnectors(s.loggingConnectors)}static async getInstance(e,t,s,n){const i=await this.validateAccess(e,t,n);return v.instance||(v.instance=new v(e,i,s)),{close:v.instance.close.bind(v.instance),authenticateUser:v.instance.authenticateUser.bind(v.instance),authenticateAgent:v.instance.authenticateAgent.bind(v.instance),joinCluster:v.instance.joinCluster.bind(v.instance)}}static async timestamp(){return T.default.getEstimatedTimestamp()}static isProduction(){return E.Environment.isProduction}async close(){this.clusters.forEach((e=>{e.off(),e.leave()})),this.clusters.clear(),this.options.audioContext&&C.default.stopNoThrottlingHack(),this.unsubscribe?.(),this.authContext=void 0,await this.authService.signOut()}static async validateAccess(e,t,s){const n=(await(0,i.httpsCallable)(T.default.getFunctions(),"sdkValidateAccess")({vendorId:e,accessToken:t,secretKey:s})).data;return n.features||(n.features=[]),n}async authenticateUser(e){await this.authService.signInWithCredential(e);const t=new S.AuthUser(e.id,e.displayName,e.email);return this.authContext={node:t},f.default.logSupport(t),{type:r.NodeType.User,getId:t.getId.bind(t),getDisplayName:t.getDisplayName.bind(t),getEmail:t.getEmail.bind(t),setDisplayName:t.setDisplayName.bind(t),setEmail:t.setEmail.bind(t)}}async authenticateAgent(e){const{id:t,groupId:s}=e,i=await(0,n.getDoc)((0,n.doc)(T.default.getFirestore(),`developers/${this.vendorId}/resources/agent/items/${s}`));if(!i.exists())throw new d.SDKClientError(d.SDKClientErrorCodes.NodeNotAuthenticated,"Agent group not found");const o=i.data();await this.authService.signInWithCredential({id:t});const a=new b.AuthAgent(t,s,this.vendorId,o);return this.authContext={node:a},f.default.logSupport(a),await this.connectAgent(a),{type:r.NodeType.Agent,getId:a.getId.bind(a),onConfigurationChange:a.onConfigurationChange.bind(a),setReportCapacity:a.setReportCapacity.bind(a)}}async joinCluster(e){if(!this.authContext)throw new d.SDKClientError(d.SDKClientErrorCodes.NodeNotAuthenticated,"Node not authenticated");if(this.authContext.node.type!==r.NodeType.User)throw new d.SDKClientError(d.SDKClientErrorCodes.NodeTypeNotSupported,"Cannot join a cluster if the node is not a user");if(this.clusters.has(e))throw new d.SDKClientError(d.SDKClientErrorCodes.ClusterAlreadyJoined,"Cluster already joined");const t=new m.Cluster(this.vendorId,e,this.authContext.node,this.authService,this.options,this.configs);return await t.join(),this.addCluster(e,t),I.default.logEvent("join-cluster",{clusterId:e,nodeId:this.authContext.node.getId(),nodeType:this.authContext.node.type}),{leave:t.leave.bind(t),getLocalNode:t.getLocalNode.bind(t),openPubSubTopic:t.openPubSubTopic.bind(t),openObjectStoreBucket:t.openObjectStoreBucket.bind(t),openKeyValueDatabase:t.openKeyValueDatabase.bind(t),publishLocalMediaStream:t.publishLocalMediaStream.bind(t),publishLocalDynamicMediaStream:t.publishLocalDynamicMediaStream.bind(t),getPubSubTopics:t.getPubSubTopics.bind(t),getObjectStoreBuckets:t.getObjectStoreBuckets.bind(t),getKeyValueDatabases:t.getKeyValueDatabases.bind(t),getLocalMediaStreams:t.getLocalMediaStreams.bind(t),getRemoteMediaStreams:t.getRemoteMediaStreams.bind(t),getRemoteNodes:t.getRemoteNodes.bind(t),on:t.on.bind(t),off:t.off.bind(t)}}async connectAgent(e){for(const t of e.agentConfig.clusters){const s=new m.Cluster(this.vendorId,t.id,e,this.authService,this.options,this.configs);await s.join(),this.addCluster(t.id,s);for(const e of t.pubsub)s.openPubSubTopic(e);for(const e of t.objectStorage)await s.openObjectStoreBucket(e);for(const e of t.keyValueDatabase)await s.openKeyValueDatabase(e,{version:1,tables:{}})}}addCluster(e,t){this.clusters.set(e,t),t.on("cluster-leave",(()=>{t.off(),this.clusters.delete(e)}))}}},"./src/models/Stats/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{sendStats:()=>r});var n=s("./src/constants/System.ts"),i=s("./src/interfaces/Subscription/SystemEvent.ts");function r(e,t){t.publish({sourceId:n.SYSTEM_TOPIC_INTERNAL,messageType:i.SystemMessageType.PeerConnection,content:e})}},"./src/models/Stats/Stats.ts":(e,t,s)=>{s.r(t),s.d(t,{Stats:()=>l});var n=s("./src/constants/Stats.ts"),i=s("./src/constants/System.ts"),r=s("./src/interfaces/Connection/PeerConnection.ts"),o=s("./src/interfaces/Content/Content.ts"),a=s("./src/interfaces/Stats/Stats.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/models/Stats/StatsNode.ts");class l{nodes=new Map;scheduleTime=0;durationTime=0;pubsubTopics=new Map;objectStores=new Map;keyValueDatabases=new Map;senderTotalMessages=new Map;receiverTotalMessages=new Map;senderTimeProcessing=new Map;receiverTimeProcessing=new Map;systemMessages=new Map;systemTopic;getReport(){const e={};this.nodes.forEach(((t,s)=>{e[s]=t.getReport()}));let t=0;this.senderTimeProcessing.forEach((e=>{t+=e}));let s=0;this.receiverTimeProcessing.forEach((e=>{s+=e}));const n=t+s;let i={messages:{total:0}};this.systemMessages.forEach((e=>{Object.keys(e).forEach((t=>{i[t]||(i[t]={}),Object.keys(e[t]).forEach((s=>{i[t][s]||(i[t][s]=0),i[t][s]+=e[t][s]}))}))}));let r=0,o=0,a=0,c=0,d=0;return this.pubsubTopics.forEach((e=>{o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.objectStores.forEach((e=>{r+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.keyValueDatabases.forEach((e=>{r+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),{STVolatility:this.getSTVolatility(),DTVolatility:this.getDTVolatility(),bitrate:this.getBitrate(),senderBitrate:this.getSenderBitrate(),receiverBitrate:this.getReceiverBitrate(),totalStorageSize:r,totalMessages:o+a,totalMessagesSent:o,totalMessagesReceived:a,totalBytes:c+d,totalBytesSent:c,totalBytesReceived:d,systemMessages:i,timeProcessing:n,nodes:e,pubsubTopics:Object.fromEntries(this.pubsubTopics),objectStores:Object.fromEntries(this.objectStores),keyValueDatabases:Object.fromEntries(this.keyValueDatabases)}}addRemoteNode(e){this.nodes.set(e,new d.StatsNode)}removeRemoteNode(e){this.nodes.delete(e)}processReports(e,t,s){t instanceof Array||this.processDataChannelReport(e,t);const n=this.nodes.get(e)?.processReports(t,s);n&&this.systemTopic.publish({sourceId:i.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Stats,content:{type:a.StatsMessageType.StreamReport,data:{...n,nodeId:e}}})}processLocalReport(e){this.setScheduleTime(e.secheduleTime),this.setDurationTime(e.durationTime),this.systemTopic.publish({sourceId:i.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Stats,content:{type:a.StatsMessageType.LocalReport,data:{STVolatility:this.getSTVolatility(),DTVolatility:this.getDTVolatility()}}})}processServiceReport(e,t,s){switch(t){case o.ContentMessageType.PubSubTopicStats:this.pubsubTopics.set(e,s);break;case o.ContentMessageType.ObjectStoreStats:this.objectStores.set(e,s);break;case o.ContentMessageType.KeyValueDatabaseStats:this.keyValueDatabases.set(e,s)}}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}getSTVolatility(){return this.scheduleTime>0&&this.scheduleTime-n.STATS_COLLECT_DELAY>0?(this.scheduleTime-n.STATS_COLLECT_DELAY)/n.STATS_COLLECT_DELAY:0}getDTVolatility(){return this.durationTime>0&&this.durationTime-n.STATS_COLLECT_DELAY/10>0?(this.durationTime-n.STATS_COLLECT_DELAY/10)/(n.STATS_COLLECT_DELAY/10):0}getSenderBitrate(){let e=0;return this.nodes.forEach((t=>{e+=t.senderBitrate})),e}getReceiverBitrate(){let e=0;return this.nodes.forEach((t=>{e+=t.receiverBitrate})),e}getBitrate(){let e=0;return this.nodes.forEach((t=>{e+=t.bitrate})),e}setScheduleTime(e){this.scheduleTime=e}setDurationTime(e){this.durationTime=e}processDataChannelReport(e,t){switch(t.origin){case r.PeerConnectionOrigin.Sender:this.processSenderReport(e,t);break;case r.PeerConnectionOrigin.Receiver:this.processReceiverReport(e,t)}}processSenderReport(e,t){this.senderTotalMessages.set(e,t.messagesSent),this.senderTimeProcessing.set(e,t.timeSending)}processReceiverReport(e,t){this.receiverTotalMessages.set(e,t.messagesReceived),this.receiverTimeProcessing.set(e,t.timeReceiving),this.systemMessages.set(e,t.systemMessages)}}},"./src/models/Stats/StatsDataChannel.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsDataChannel:()=>r});var n=s("./src/constants/Stats.ts"),i=s("./src/interfaces/Connection/PeerConnection.ts");class r{senderCurrentTimestamp=0;senderPreviousTimestamp=0;receiverCurrentTimestamp=0;receiverPreviousTimestamp=0;senderCurrentBytes=0;senderPreviousBytes=0;receiverCurrentBytes=0;receiverPreviousBytes=0;senderTotalMessages=0;receiverTotalMessages=0;senderTimeProcessing=0;receiverTimeProcessing=0;roundTripTime=0;get bitrate(){return this.senderBitrate+this.receiverBitrate}get senderBitrate(){return this.senderCurrentTimestamp>0&&this.senderPreviousTimestamp>0&&Date.now()-this.senderCurrentTimestamp<n.STATS_REPORT_DELAY?(this.senderCurrentBytes-this.senderPreviousBytes)/(this.senderCurrentTimestamp-this.senderPreviousTimestamp)*8*1e3:0}get receiverBitrate(){return this.receiverCurrentTimestamp>0&&this.receiverPreviousTimestamp>0&&Date.now()-this.receiverCurrentTimestamp<n.STATS_REPORT_DELAY?(this.receiverCurrentBytes-this.receiverPreviousBytes)/(this.receiverCurrentTimestamp-this.receiverPreviousTimestamp)*8*1e3:0}processReport(e){switch(e.origin){case i.PeerConnectionOrigin.Sender:this.processSenderReport(e);break;case i.PeerConnectionOrigin.Receiver:this.processReceiverReport(e)}}getReport(){return{bitrate:this.bitrate,senderBitrate:this.senderBitrate,receiverBitrate:this.receiverBitrate,totalBytes:this.getTotalBytes(),senderTotalBytes:this.getSenderTotalBytes(),receiverTotalBytes:this.getReceiverTotalBytes(),totalMessages:this.senderTotalMessages+this.receiverTotalMessages,senderTotalMessages:this.senderTotalMessages,receiverTotalMessages:this.receiverTotalMessages,timeProcessing:this.senderTimeProcessing+this.receiverTimeProcessing,senderTimeProcessing:this.senderTimeProcessing,receiverTimeProcessing:this.receiverTimeProcessing,roundTripTime:this.roundTripTime}}getTotalBytes(){return this.senderCurrentBytes+this.receiverCurrentBytes}getSenderTotalBytes(){return this.senderCurrentBytes}getReceiverTotalBytes(){return this.receiverCurrentBytes}processSenderReport(e){this.setSenderTimestamp(e.timestamp),this.setBytes(e.bytesSent),this.senderTotalMessages=e.messagesSent,this.senderTimeProcessing=e.timeSending,this.roundTripTime=e.roundTripTime}processReceiverReport(e){this.setReceiverTimestamp(e.timestamp),this.setReceiverBytes(e.bytesReceived),this.receiverTotalMessages=e.messagesReceived,this.receiverTimeProcessing=e.timeReceiving}setSenderTimestamp(e){e>this.senderCurrentTimestamp&&(this.senderPreviousTimestamp=this.senderCurrentTimestamp,this.senderCurrentTimestamp=e)}setReceiverTimestamp(e){e>this.receiverCurrentTimestamp&&(this.receiverPreviousTimestamp=this.receiverCurrentTimestamp,this.receiverCurrentTimestamp=e)}setBytes(e){this.senderPreviousBytes=this.senderCurrentBytes,this.senderCurrentBytes=e}setReceiverBytes(e){this.receiverPreviousBytes=this.receiverCurrentBytes,this.receiverCurrentBytes=e}}},"./src/models/Stats/StatsManager.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsManager:()=>h});var n=s("firebase/firestore"),i=s("./src/constants/Stats.ts"),r=s("./src/interfaces/Connection/PeerConnection.ts"),o=s("./src/interfaces/Content/Content.ts"),a=s("./src/interfaces/Utils/Logger.ts"),c=s("./src/models/Stats/Stats.ts"),d=s("./src/services/Firebase/FirebaseService.ts"),l=s("./src/utils/Interval/Interval.ts"),u=s("./src/utils/Logger/Logger.ts");class h{configs;remoteNodes=new Set;nextNodeId;statsCollection;statsReporting;statsReport=new c.Stats;constructor(e){this.configs=e,this.configs.mediator.registerSystemSource(this.statsReport),this.statsCollection=this.setupStatsCollection(),this.statsReporting=this.setupStatsReporting()}close(){this.configs.mediator.unregisterSystemSource(this.statsReport),this.statsReporting(),this.statsCollection()}addRemoteNode(e){this.remoteNodes.add(e),this.statsReport.addRemoteNode(e)}removeRemoteNode(e){this.remoteNodes.delete(e),this.statsReport.removeRemoteNode(e)}handlePeerConnectionSystemEvents(e){if(e.content.type===r.PeerConnectionMessageType.Stats){const{nodeId:t,streamId:s,stats:n}=e.content;this.statsReport.processReports(t,n,s)}}handleContentSystemEvents(e){switch(e.content.type){case o.ContentMessageType.ObjectStoreStats:case o.ContentMessageType.KeyValueDatabaseStats:case o.ContentMessageType.PubSubTopicStats:this.statsReport.processServiceReport(e.content.label,e.content.type,e.content.stats)}}setupStatsReporting(){return l.default.setInterval((()=>{const e=this.statsReport.getReport();u.default.log(a.LoggingChannels.Stats,"Stats: report",e),(0,n.addDoc)((0,n.collection)(d.default.getFirestore(),`developers/${this.configs.vendorId}/stats`),{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,timestamp:(0,n.serverTimestamp)(),report:e}),u.default.logEvent("stats",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,data:{report:e}})}),i.STATS_REPORT_DELAY)}setupStatsCollection(){let e=!1,t=Date.now();return l.default.setInterval((async()=>{if(e)return;if(e=!0,0===this.remoteNodes.size)return delete this.nextNodeId,void(e=!1);const s=Date.now();this.findNextNodeId();try{await this.configs.mediator.collectStats(this.nextNodeId)}catch(e){}this.statsReport.processLocalReport({secheduleTime:s-t,durationTime:Date.now()-s}),t=s,e=!1}),i.STATS_COLLECT_DELAY)}findNextNodeId(){let e,t=!1;this.nextNodeId&&(this.remoteNodes.has(this.nextNodeId)||delete this.nextNodeId);for(const s of this.remoteNodes)if(e||(e=s),this.nextNodeId!==s){if(t)return void(this.nextNodeId=s)}else t=!0,delete this.nextNodeId;this.nextNodeId||(this.nextNodeId=e)}}},"./src/models/Stats/StatsNode.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsNode:()=>a});var n=s("./src/constants/Stats.ts"),i=s("./src/interfaces/Connection/PeerConnection.ts"),r=s("./src/models/Stats/StatsStream.ts"),o=s("./src/models/Stats/StatsDataChannel.ts");class a{senderStreams=new Map;receiverStreams=new Map;dataChannel=new o.StatsDataChannel;get senderBitrate(){let e=0;return this.senderStreams.forEach((t=>{e+=t.bitrate})),e+=this.dataChannel.senderBitrate,e}get receiverBitrate(){let e=0;return this.receiverStreams.forEach((t=>{e+=t.bitrate})),e+=this.dataChannel.receiverBitrate,e}get bitrate(){return this.senderBitrate+this.receiverBitrate}processReports(e,t){const s=[],r=[];return e instanceof Array?e.forEach((e=>{e.forEach((e=>{n.STATS_RECEIVER_FILTERS.includes(e.type)&&s.push(e),n.STATS_SENDER_FILTERS.includes(e.type)&&r.push(e)}))})):this.dataChannel.processReport(e),s.length>0&&t?{...this.processInboundReports(t,s),origin:i.PeerConnectionOrigin.Receiver,streamId:t}:r.length>0&&t?{...this.processOutboundReports(t,r),origin:i.PeerConnectionOrigin.Sender,streamId:t}:void 0}getReport(){const e={};this.senderStreams.forEach(((t,s)=>{e[s]=t.getReport()}));const t={};return this.receiverStreams.forEach(((e,s)=>{t[s]=e.getReport()})),{bitrate:this.bitrate,senderBitrate:this.senderBitrate,receiverBitrate:this.receiverBitrate,senderStreams:e,receiverStreams:t,dataChannel:this.dataChannel.getReport()}}processInboundReports(e,t){return this.receiverStreams.has(e)||this.receiverStreams.set(e,new r.StatsStream),this.receiverStreams.get(e).processReports(t)}processOutboundReports(e,t){return this.senderStreams.has(e)||this.senderStreams.set(e,new r.StatsStream),this.senderStreams.get(e).processReports(t)}}},"./src/models/Stats/StatsStream.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsStream:()=>r});var n=s("./src/models/Stats/StatsTrackAudio.ts"),i=s("./src/models/Stats/StatsTrackVideo.ts");class r{audio=new n.StatsTrackAudio;video=new i.StatsTrackVideo;get bitrate(){return this.audio.bitrate+this.video.bitrate}processReports(e){return e.forEach((e=>{switch(e.kind){case"audio":this.audio.processReport(e);break;case"video":this.video.processReport(e)}})),this.getReport()}getReport(){return{audio:this.audio.getReport(),video:this.video.getReport(),roundTripTime:this.getRoundTripTime(),AudioVideoDelay:this.getAudioVideoDelay(),bitrate:this.bitrate}}getRoundTripTime(){return Math.floor((this.audio.roundTripTime+this.video.roundTripTime)/2)}getAudioVideoDelay(){return this.audio.estimatedPlayoutTimestamp-this.video.estimatedPlayoutTimestamp}}},"./src/models/Stats/StatsTrack.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsTrack:()=>i});var n=s("./src/constants/Stats.ts");class i{roundTripTime=0;estimatedPlayoutTimestamp=0;jitter=0;packetsLost=0;packets=0;currentTimestamp=0;previousTimestamp=0;currentBytes=0;previousBytes=0;get bitrate(){return this.currentTimestamp>0&&this.previousTimestamp>0&&Date.now()-this.currentTimestamp<n.STATS_REPORT_DELAY?(this.currentBytes-this.previousBytes)/(this.currentTimestamp-this.previousTimestamp)*8*1e3:0}processReport(e){switch(e.type){case n.STATS_INBOUND:this.processInboundReport(e);break;case n.STATS_OUTBOUND:this.processOutboundReport(e);break;case n.STATS_REMOTE_INBOUND:this.processRemoteInboundReport(e)}}getReport(){return{bitrate:this.bitrate,packetsLostPerc:this.getPacketsLostPerc(),roundTripTime:this.roundTripTime,jitter:this.jitter}}processInboundReport(e){this.setBytes(e.bytesReceived),this.setTimestamp(e.timestamp),this.packets=e.packetsReceived,this.packetsLost=e.packetsLost,void 0!==e.jitter?this.jitter=e.jitter:this.jitter=0,void 0!==e.estimatedPlayoutTimestamp?this.estimatedPlayoutTimestamp=e.estimatedPlayoutTimestamp:this.estimatedPlayoutTimestamp=0}processOutboundReport(e){this.setBytes(e.bytesSent),this.setTimestamp(e.timestamp),this.packets=e.packetsSent}processRemoteInboundReport(e){this.roundTripTime=1e3*e.roundTripTime,void 0!==e.jitter?this.jitter=e.jitter:this.jitter=0}getPacketsLostPerc(){return this.packets>0?this.packetsLost/this.packets:0}setTimestamp(e){e>this.currentTimestamp&&(this.previousTimestamp=this.currentTimestamp,this.currentTimestamp=e)}setBytes(e){this.previousBytes=this.currentBytes,this.currentBytes=e}}},"./src/models/Stats/StatsTrackAudio.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsTrackAudio:()=>i});var n=s("./src/models/Stats/StatsTrack.ts");class i extends n.StatsTrack{}},"./src/models/Stats/StatsTrackVideo.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsTrackVideo:()=>r});var n=s("./src/constants/Stats.ts"),i=s("./src/models/Stats/StatsTrack.ts");class r extends i.StatsTrack{frameTime=0;frameWidth=0;frameHeight=0;currentFrames=0;previousFrames=0;get fps(){return this.currentTimestamp>0&&this.previousTimestamp>0&&Date.now()-this.currentTimestamp<n.STATS_REPORT_DELAY?(this.currentFrames-this.previousFrames)/(this.currentTimestamp-this.previousTimestamp)*1e3:0}get timePerFrame(){return this.frameTime&&this.currentFrames&&this.currentFrames>0?this.frameTime/this.currentFrames:0}set frames(e){this.previousFrames=this.currentFrames,this.currentFrames=e}getReport(){return{...super.getReport(),FPS:this.fps,timePerFrame:this.timePerFrame,frameWidth:this.frameWidth,frameHeight:this.frameHeight}}processInboundReport(e){super.processInboundReport(e),this.frameTime=e.totalDecodeTime,this.frames=e.framesDecoded,this.frameWidth=e.frameWidth,this.frameHeight=e.frameHeight}processOutboundReport(e){super.processOutboundReport(e),this.frameTime=e.totalEncodeTime,this.frames=e.framesEncoded,this.frameWidth=e.frameWidth,this.frameHeight=e.frameHeight}}},"./src/models/Subscription/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{getParts:()=>l,getPrefix:()=>d,getSubscriptionLabel:()=>a,getTopicLabel:()=>c,isBroadcast:()=>o,isReceiver:()=>r,isSender:()=>i});var n=s("./src/interfaces/Subscription/Subscription.ts");function i(e,t){return e.sourceId===t}function r(e,t){return e.destinationIds?.includes(t)??o(e)}function o(e){return void 0===e.destinationIds}function a(e,{contentType:t,label:s,remoteId:n}){return`${e}-${t}-${s}-${n}`}function c(e,t,s){return`${e}${t}${s}`}function d(e){return e===n.SubscriptionType.Incoming?"IncomingSubscription":"OutgoingSubscription"}function l(e,t){return{label:e.getInternalStreamId(),contentType:e.getContentType(),remoteId:t.getRemoteId(),supportsContentType:t.getSupportedContentTypes().includes(e.getContentType())}}},"./src/models/Subscription/IncomingSubscription.ts":(e,t,s)=>{s.r(t),s.d(t,{IncomingMediaSubscription:()=>a,IncomingSubscription:()=>o});var n=s("@crewdle/web-sdk-types"),i=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),r=s("./src/interfaces/Subscription/SystemEvent.ts");class o{source;destination;systemTopic;constructor(e,t){this.source=e,this.destination=t}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}}class a extends o{source;destination;params;constructor(e,t,s){super(e,t),this.source=e,this.destination=t,this.params=s}subscribe(e,t,s){if(this.destination.getContentType()===n.ContentType.Media){const n={type:i.SubscriptionMessageType.SubscribeMediaStream,label:this.destination.getLabel(),ownerId:e,trackKinds:t??this.destination.getAvailableTrackKinds(),params:s};this.systemTopic.publish({sourceId:this.source.getLocalId(),destinationIds:[this.source.getRemoteId()],messageType:r.SystemMessageType.Subscription,content:n}),this.params=s}}update(e,t){if(this.destination.getContentType()===n.ContentType.Media){const s={type:i.SubscriptionMessageType.UpdateMediaStream,label:this.destination.getLabel(),ownerId:e,params:t};this.systemTopic.publish({sourceId:this.source.getLocalId(),destinationIds:[this.source.getRemoteId()],messageType:r.SystemMessageType.Subscription,content:s}),this.params=t}}unsubscribe(e,t,s){if(this.destination.getContentType()===n.ContentType.Media){const n={type:i.SubscriptionMessageType.UnsubscribeMediaStream,label:this.destination.getLabel(),ownerId:e,trackKinds:s??this.destination.getAvailableTrackKinds(),remainingTracks:t};this.systemTopic.publish({sourceId:this.source.getLocalId(),destinationIds:[this.source.getRemoteId()],messageType:r.SystemMessageType.Subscription,content:n})}}}},"./src/models/Subscription/IncomingSubscriptionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{IncomingSubscriptionManager:()=>b});var n=s("@crewdle/web-sdk-types"),i=s("./src/constants/Subscription.ts"),r=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Subscription/Subscription.ts"),a=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),c=s("./src/models/Subscription/Helpers.ts"),d=s("./src/models/Subscription/IncomingSubscription.ts"),l=s("./src/models/Subscription/SubscriptionRequest.ts"),u=s("./src/models/Subscription/SubscriptionMaps.ts"),h=s("./src/utils/Interval/Interval.ts"),p=s("./src/utils/Logger/Logger.ts"),g=s("./src/utils/Queue/Queue.ts"),m=s("./src/utils/Queue/RetryQueue.ts");class b{configs;maxDistance;subscriptionRequests=new Map;subscriptionRequestsQueue=(0,m.createRetryQueue)(new g.SyncQueueCallback(this.requestSubscriptionAction.bind(this),(()=>h.default.wait(i.SUBSCRIPTION_REQUEST_RETRY_DELAY))),!0);subscriptionRequestTimeouts=new Map;maps;chosenAnswers=new Map;constructor(e,t){this.configs=e,this.maxDistance=t,this.maps=new u.SubscriptionMaps((({source:e,destination:t})=>c.getParts(t,e)))}createSubscription(e,t){const s=this.isMediaSource(e)&&this.isMediaDestination(t)?new d.IncomingMediaSubscription(e,t):new d.IncomingSubscription(e,t);this.maps.createSubscription(o.SubscriptionType.Incoming,s),this.configs.mediator.registerSystemSource(s)}removeSubscription(e,t,s=""){const n={contentType:t,label:e,remoteId:s},i=c.getSubscriptionLabel(o.SubscriptionType.Incoming,n),r=this.maps.subscriptions.get(i);r&&this.closeSubscription(r,i)}handleContentUnpublishMediaStream(e){this.removeRemoteStreamSubscription(e)}handleContentSubscribeMediaStream({label:e,ownerId:t,trackKinds:s,params:n}){this.requestSubscription(e,t,s,n)}handleContentUpdateMediaStream({ownerId:e,label:t,params:s}){const{subscriptionLabel:n}=this.getSubscriptionLabel(t,e),i=this.getMediaSubscription(n);i&&i.update(e,s)}handleContentUnsubscribeMediaStream({ownerId:e,label:t,trackKinds:s,remainingTracks:i}){const r=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:t,remoteId:e});this.clearSubscriptionRequestTimeout(r);const a=this.subscriptionRequests.get(r);a&&(this.configs.mediator.unregisterSystemSource(a),this.subscriptionRequests.delete(r));const{parts:d,subscriptionLabel:l}=this.getSubscriptionLabel(t,e),u=this.getMediaSubscription(l);u&&(u.unsubscribe(e,i,s),0===i&&this.removeSubscription(d.label,d.contentType,d.remoteId))}handleSubscriptionRestartNeedMediaStream(e,{label:t,ownerId:s,trackKinds:i,streamId:a,params:l}){const u=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:a,remoteId:e}),h=this.maps.subscriptions.get(u);if(!(h&&h instanceof d.IncomingMediaSubscription))throw new r.SDKInternalError(r.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:u,ownerId:s});this.closeSubscription(h,u),this.requestSubscription(t,s,i,l)}handleSubscriptionProvideMediaStream(e,t){const{label:s,ownerId:i,trackKinds:a,params:d}=t,l=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:s,remoteId:i});if(!this.subscriptionRequests.has(l))throw new r.SDKInternalError(r.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:l,ownerId:i,streamId:t.streamId,requests:this.subscriptionRequests});const u=this.subscriptionRequests.get(l);if(a.length===u.getTracks().length&&a.every((e=>u.getTracks().includes(e))))try{const n=u.handleSubscriptionSystemEvents(e,t);if(!n)return;this.subscribe(n,i,s,l,a)}catch(e){return void this.handleNoAnswer(s,i,a,d)}}handleSubscriptionMediaStreamUnavailable(e,{label:t,ownerId:s,trackKinds:n}){const i=this.configs.mediator.getRemoteMediaStream(s,t);if(!i)return;const r=i.getInternalStreamId(),o=i.getSubscribedTracks();o.some((e=>n.includes(e)))&&this.findNewMediaSubscription(e,t,r,s,o)}handleContentRemoteMediaStreamTrackFail({label:e,providerId:t,ownerId:s,streamId:n,trackKinds:i}){this.findNewMediaSubscription(t,e,n,s,i)}handleOptimizationConnectionSuccess(e){for(const t of this.chosenAnswers.values()){const{streamLabel:s,ownerId:n,trackKinds:i,params:r}=t;if(!n||!i||!s)return;this.subscriptionRequestsQueue.push({label:s,ownerId:n,trackKinds:i,params:r,remoteId:e})}}removeSubscriptionsForNode(e){this.maps.subscriptions.forEach(((t,s)=>{if(s.endsWith(e)){if(t.destination.getContentType()===n.ContentType.Media){const s=t.destination;if(s.getSubscribedTracks().length>0){const t={type:a.SubscriptionMessageType.MediaStreamUnavailable,label:s.getLabel(),ownerId:s.getOwnerId(),trackKinds:s.getSubscribedTracks()};return void this.handleSubscriptionMediaStreamUnavailable(e,t)}}this.closeSubscription(t,s)}}))}close(){this.maps.subscriptions.forEach(this.closeSubscription.bind(this))}subscribe(e,t,s,n,i){const a=this.configs.mediator.getConnection(e.nodeId),l=this.configs.mediator.getRemoteMediaStream(t,s);this.clearSubscriptionRequestTimeout(n),this.subscriptionRequests.has(n)&&(this.configs.mediator.unregisterSystemSource(this.subscriptionRequests.get(n)),this.subscriptionRequests.delete(n)),this.cleanOldSubscription(e,t,s,l),l.setInternalId(e.streamId),l.setProviderId(e.nodeId);const u=c.getParts(l,a),h=c.getSubscriptionLabel(o.SubscriptionType.Incoming,u);this.maps.subscriptions.has(h)||this.createSubscription(a,l);const g=this.maps.subscriptions.get(h);if(!(g&&g instanceof d.IncomingMediaSubscription))throw new r.SDKInternalError(r.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:n,ownerId:t});p.default.logEvent("subscription",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,data:{subscriptionLabel:h,chosenAnswer:e}}),this.chosenAnswers.set(h,e),g.subscribe(t,i,e.params)}removeRemoteStreamSubscription({ownerId:e,label:t}){const s=this.configs.mediator.getRemoteMediaStream(e,t),[n,i]=Array.from(this.maps.subscriptions.entries()).find((([e,t])=>-1!==e.indexOf(s.getInternalStreamId())));return this.closeSubscription(i,n)}closeSubscription(e,t){this.configs.mediator.unregisterSystemSource(e),this.maps.closeSubscription(e,t)}isMediaSource(e){return e.getSupportedContentTypes().includes(n.ContentType.Media)}isMediaDestination(e){return e.getContentType()===n.ContentType.Media}async handleNoAnswer(e,t,s,a){await h.default.wait(i.SUBSCRIPTION_RETRY_DELAY);const d=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:e,remoteId:t});this.clearSubscriptionRequestTimeout(d);const l=this.subscriptionRequests.get(d);if(!l)throw new r.SDKInternalError(r.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:d,ownerId:t});const u=this.configs.mediator.getConnections((e=>e.isConnected())),p=this.configs.mediator.getDistance(this.configs.localNode.getId(),t);l.reset(u.map((e=>e.getRemoteId())),p);try{l.sendRequest(this.configs.localNode.getId(),t,e,s,a),this.setSubscriptionRequestTimeout(e,t,s,a,d,l)}catch(n){this.subscriptionRequestsQueue.push({label:e,ownerId:t,trackKinds:s,params:a})}}requestSubscription(e,t,s,n){this.subscriptionRequestsQueue.push({label:e,ownerId:t,trackKinds:s,params:n})}requestSubscriptionAction({label:e,ownerId:t,trackKinds:s,params:i,remoteId:r}){if(!this.configs.mediator.getRemoteMediaStream(t,e))return;if(!this.configs.mediator.getLocalNode().getRank())throw new Error("Local node rank is not set");if(r){const s=this.configs.mediator.getRemoteNodes().find((e=>e.getId()===r)),n=s?.getRank();if(!s||!n)throw new Error("Missing remote node or rank");const i=this.configs.mediator.getRemoteNodes().find((e=>e.getId()===t)),o=i?.getRank();if(!i||!o)throw new Error("Missing owner node or rank");const a=this.chosenAnswers.get(e);if(a){const e=this.configs.mediator.getRemoteNodes().find((e=>e.getId()===a.nodeId)),t=e?.getRank();if(!e||!t)throw new Error("Retry request with chosen answer node or rank");if(Math.abs(t-o)<Math.abs(n-o))return}}const a=this.configs.mediator.getConnections((e=>e.isConnected()&&(!r||e.getRemoteId()===r)));if(!a.length||0===a.length)throw new Error("No connections available to send subscription request");const d=this.configs.mediator.getDistance(this.configs.localNode.getId(),t),u=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:e,remoteId:t});if(this.subscriptionRequests.has(u)){if(r)throw new Error("We need to treat requests sequentially when the remote id is set");const e=this.subscriptionRequests.get(u).getTracks();if(e.length===s.length&&e.every((e=>s.includes(e))))return;this.configs.mediator.unregisterSystemSource(this.subscriptionRequests.get(u)),this.subscriptionRequests.delete(u),s=Array.from(new Set(s.concat(e))),this.clearSubscriptionRequestTimeout(u)}const h=new l.SubscriptionRequest(a.map((e=>e.getRemoteId())),d,this.maxDistance,s);this.configs.mediator.registerSystemSource(h),this.subscriptionRequests.set(u,h),h.sendRequest(this.configs.localNode.getId(),t,e,s,i),this.setSubscriptionRequestTimeout(e,t,s,i,u,h)}clearSubscriptionRequestTimeout(e){this.subscriptionRequestTimeouts.has(e)&&(clearTimeout(this.subscriptionRequestTimeouts.get(e)),this.subscriptionRequestTimeouts.delete(e))}setSubscriptionRequestTimeout(e,t,s,n,r,o){this.clearSubscriptionRequestTimeout(r),this.subscriptionRequestTimeouts.set(r,setTimeout((()=>{this.subscriptionRequestTimeouts.delete(r);try{const n=o.chooseAnswer();this.subscribe(n,t,e,r,s)}catch(i){this.handleNoAnswer(e,t,s,n)}}),i.SUBSCRIPTION_REQUEST_TIMEOUT))}findNewMediaSubscription(e,t,s,i,r){const{subscriptionLabel:o}=this.getSubscriptionLabel(t,i),a=this.getMediaSubscription(o),c=a?.params;a&&(a.unsubscribe(i,0),this.removeSubscription(s,n.ContentType.Media,e)),this.requestSubscription(t,i,r,c)}getMediaSubscription(e){const t=this.maps.subscriptions.get(e);if(t){if(!(t instanceof d.IncomingMediaSubscription))throw new r.SDKInternalError(r.SDKInternalError.codes.InvalidSubscription,{label:e,subscription:t});return t}}getSubscriptionLabel(e,t){const s=this.getPartsForSubscriptionLabel(e,t);return{parts:s,subscriptionLabel:c.getSubscriptionLabel(o.SubscriptionType.Incoming,s)}}getPartsForSubscriptionLabel(e,t){const s=this.configs.mediator.getRemoteMediaStream(t,e),i=s.getProviderId();if(!i)throw new r.SDKInternalError(r.SDKInternalError.codes.RemoteMediaStreamMissingProviderId,{label:e,streamId:s.getInternalStreamId(),ownerId:t,localId:this.configs.localNode.getId()});return{contentType:n.ContentType.Media,label:s.getInternalStreamId(),remoteId:i}}cleanOldSubscription(e,t,s,n){const i=n.getProviderId();if(i&&i!==e.nodeId){const{parts:e,subscriptionLabel:n}=this.getSubscriptionLabel(s,t),i=this.getMediaSubscription(n);i&&(i.unsubscribe(t,0),this.removeSubscription(e.label,e.contentType,e.remoteId))}}}},"./src/models/Subscription/OutgoingSubscriptionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{OutgoingSubscriptionManager:()=>h});var n=s("@crewdle/web-sdk-types"),i=s("./src/constants/Node.ts"),r=s("./src/constants/System.ts"),o=s("./src/interfaces/Subscription/Subscription.ts"),a=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/models/Subscription/Helpers.ts"),l=s("./src/models/Subscription/SubscriptionMaps.ts"),u=s("./src/models/Content/RemoteMediaStream.ts");class h{configs;maxOutgoingSubscriptions;maps;constructor(e,t){this.configs=e,this.maxOutgoingSubscriptions=t,this.maps=new l.SubscriptionMaps((({source:e,destination:t})=>d.getParts(e,t)))}createSubscription(e,t){const s={source:e,destination:t};this.maps.createSubscription(o.SubscriptionType.Outgoing,s)}removeSubscription(e,t,s=""){const n={contentType:t,label:e,remoteId:s};this.maps.removeSubscription(n,o.SubscriptionType.Outgoing)}handleSubscriptionSubscribeMediaStream(e,t){let s;s=t.ownerId!==this.configs.localNode.getId()?this.configs.mediator.getRemoteMediaStream(t.ownerId,t.label):this.configs.mediator.getLocalMediaStream(t.label);const i=d.getSubscriptionLabel(o.SubscriptionType.Outgoing,{contentType:n.ContentType.Media,label:s.getShareableStreamId(),remoteId:e}),r=this.getNumberOutgoingSubscriptions();if(!this.maps.subscriptions.has(i)&&r>=this.maxOutgoingSubscriptions)return{type:a.SubscriptionMessageType.RestartNeedMediaStream,ownerId:t.ownerId,label:t.label,streamId:s.getShareableStreamId(),trackKinds:t.trackKinds,params:t.params};s instanceof u.RemoteMediaStream&&!s.isSubscribed(t.trackKinds)&&s.subscribe(t.params),this.maps.subscriptions.has(i)||this.createSubscription(s.getShareableStream(e),this.configs.mediator.getConnection(e))}handleSubscriptionUnsubscribeMediaStream(e,{label:t,ownerId:s,remainingTracks:i}){if(i>0)return;let r;r=s!==this.configs.localNode.getId()?this.configs.mediator.getRemoteMediaStream(s,t):this.configs.mediator.getLocalMediaStream(t);const o=r.getShareableStreamId(),a=n.ContentType.Media;this.removeSubscription(o,a,e)}handleContentUnsubscribeMediaStream(e,{label:t,ownerId:s,trackKinds:n}){if(e!==r.SYSTEM_TOPIC_INTERNAL)return[];let i=[];for(const e of this.maps.subscriptions){const{source:r,destination:o}=e[1];r.getLabel()===t&&r.getOwnerId()===s&&i.push({sourceId:this.configs.localNode.getId(),destinationIds:[o.getRemoteId()],messageType:c.SystemMessageType.Subscription,content:{type:a.SubscriptionMessageType.MediaStreamUnavailable,label:t,ownerId:s,trackKinds:n}})}return i}handleSubscriptionNeedMediaStream(e,t){const{label:s,ownerId:n,trackKinds:r,params:o}=t,{hasTracks:c,streamId:d,hasResolution:l,distance:u,subscriptionLabel:h}=this.getSubscriptionInfo(e,t);let p=this.getNumberOutgoingSubscriptions()<this.maxOutgoingSubscriptions&&(c||u>-1)?a.SubscriptionMessageType.CanProvideMediaStream:a.SubscriptionMessageType.CannotProvideMediaStream;const g=u<0?i.NODE_DISTANCE_MAX:u;let m=c?l?g:g+i.NODE_DISTANCE_RESOLUTION:g+i.NODE_DISTANCE_TRACKS;return h&&this.maps.subscriptions.has(h)&&(c&&(m=0),p=a.SubscriptionMessageType.CanProvideMediaStream),{type:p,cost:m,distance:u,label:s,ownerId:n,streamId:d,trackKinds:r,params:o}}handleContentUnpublishMediaStream(e){const{label:t,ownerId:s}=e,i=this.configs.mediator.getRemoteMediaStream(s,t);this.maps.subscriptions.forEach((e=>{if(e.source.getInternalStreamId()===i.getShareableStreamId()){const t=e.destination;this.removeSubscription(i.getShareableStreamId(),n.ContentType.Media,t.getRemoteId())}}))}handleContentCloseMediaStream({label:e}){const t=this.configs.mediator.getLocalMediaStream(e);this.maps.subscriptions.forEach((e=>{if(e.source.getInternalStreamId()===t.getShareableStreamId()){const s=e.destination;this.removeSubscription(t.getShareableStreamId(),n.ContentType.Media,s.getRemoteId())}}))}removeSubscriptionsForNode(e){this.maps.removeSubscriptionsForNode(e)}close(){this.maps.subscriptions.forEach(this.closeSubscription.bind(this))}closeSubscription(e,t){this.maps.closeSubscription(e,t)}getSubscriptionInfo(e,{label:t,ownerId:s,trackKinds:i,params:r}){if(s!==this.configs.localNode.getId()){const a=this.configs.mediator.getRemoteMediaStream(s,t);return a&&a.getProviderId()!==e?{hasTracks:a.hasTracks(i),hasResolution:this.canProvideResolution(a.getResolution(),r),streamId:a.getShareableStreamId(),distance:this.configs.mediator.getDistance(e,s),subscriptionLabel:d.getSubscriptionLabel(o.SubscriptionType.Outgoing,{contentType:n.ContentType.Media,label:a.getShareableStreamId(),remoteId:e})}:{hasTracks:!1,hasResolution:!1,streamId:"",distance:-1,subscriptionLabel:null}}const a=this.configs.mediator.getLocalMediaStream(t);return{hasTracks:!0,hasResolution:!0,streamId:a.getShareableStreamId(),distance:0,subscriptionLabel:d.getSubscriptionLabel(o.SubscriptionType.Outgoing,{contentType:n.ContentType.Media,label:a.getShareableStreamId(),remoteId:e})}}getNumberOutgoingSubscriptions(){return Array.from(this.maps.subscriptions.entries()).filter((([e,{source:t}])=>e.startsWith(o.SubscriptionType.Outgoing)&&t.getContentType()===n.ContentType.Media)).length}canProvideResolution(e,t){if(!t||!t.video||"boolean"==typeof t.video||!t.video.maxResolution)return!0;const{width:s,height:n}=t.video.maxResolution;return e.width>=s&&e.height>=n}}},"./src/models/Subscription/SubscriptionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{SubscriptionManager:()=>p});var n=s("@crewdle/web-sdk-types"),i=s("./src/errors/EarlyReturnError.ts"),r=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Connection/PeerConnection.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Node/NodeMessage.ts"),d=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),l=s("./src/interfaces/Subscription/SystemEvent.ts"),u=s("./src/models/Subscription/IncomingSubscriptionManager.ts"),h=s("./src/models/Subscription/OutgoingSubscriptionManager.ts");class p{configs;maxOutgoingSubscriptions;maxDistance;systemTopic;incomingManager;outgoingManager;constructor(e,t,s){this.configs=e,this.maxOutgoingSubscriptions=t,this.maxDistance=s,this.configs.mediator.registerSystemSource(this),this.incomingManager=new u.IncomingSubscriptionManager(this.configs,this.maxDistance),this.outgoingManager=new h.OutgoingSubscriptionManager(this.configs,this.maxOutgoingSubscriptions)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}close(){this.incomingManager.close(),this.outgoingManager.close(),this.configs.mediator.unregisterSystemSource(this)}createIncomingSubscription(e,t){this.incomingManager.createSubscription(e,t)}createOutgoingSubscription(e,t){this.outgoingManager.createSubscription(e,t)}removeIncomingSubscription(e,t,s=""){this.incomingManager.removeSubscription(e,t,s)}removeOutgoingSubscription(e,t,s=""){try{this.outgoingManager.removeSubscription(e,t,s)}catch(e){if(e instanceof r.SDKInternalError&&e.code===r.SDKInternalError.codes.InvalidSubscription)return}}handleSubscriptionSystemEvents(e){switch(e.content.type){case d.SubscriptionMessageType.SubscribeMediaStream:this.handleSubscriptionSubscribeMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.UnsubscribeMediaStream:this.outgoingManager.handleSubscriptionUnsubscribeMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.NeedMediaStream:this.handleSubscriptionNeedMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.RestartNeedMediaStream:this.incomingManager.handleSubscriptionRestartNeedMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.CanProvideMediaStream:case d.SubscriptionMessageType.CannotProvideMediaStream:this.incomingManager.handleSubscriptionProvideMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.MediaStreamUnavailable:this.incomingManager.handleSubscriptionMediaStreamUnavailable(e.sourceId,e.content)}}handleContentSystemEvents(e){switch(e.content.type){case a.ContentMessageType.UnpublishMediaStream:this.incomingManager.handleContentUnpublishMediaStream(e.content),this.outgoingManager.handleContentUnpublishMediaStream(e.content);break;case a.ContentMessageType.SubscribeMediaStream:this.incomingManager.handleContentSubscribeMediaStream(e.content);break;case a.ContentMessageType.UpdateMediaStream:this.incomingManager.handleContentUpdateMediaStream(e.content);break;case a.ContentMessageType.UnsubscribeMediaStream:this.handleContentUnsubscribeMediaStream(e.sourceId,e.content);break;case a.ContentMessageType.CloseMediaStream:this.outgoingManager.handleContentCloseMediaStream(e.content);break;case a.ContentMessageType.ClosePubSubTopic:this.handleContentClosePubSubTopic(e.content);break;case a.ContentMessageType.CloseObjectStoreBucket:this.handleContentCloseObjectStore(e.content);break;case a.ContentMessageType.CloseKeyValueDatabase:this.handleContentCloseKeyValueDatabase(e.content);break;case a.ContentMessageType.RemoteMediaStreamTrackFail:this.incomingManager.handleContentRemoteMediaStreamTrackFail(e.content)}}handleNodeSystemEvents({content:e}){e.type===c.NodeMessageType.NodeLeave&&this.removeSubscriptionsForNode(e)}handlePeerConnectionSystemEvents(e){e.content.type===o.PeerConnectionMessageType.OptimizationConnectionSuccess&&this.incomingManager.handleOptimizationConnectionSuccess(e.sourceId)}handleContentUnsubscribeMediaStream(e,t){this.incomingManager.handleContentUnsubscribeMediaStream(t),this.outgoingManager.handleContentUnsubscribeMediaStream(e,t).forEach((e=>this.systemTopic.publish(e)))}handleSubscriptionSubscribeMediaStream(e,t){const s=this.outgoingManager.handleSubscriptionSubscribeMediaStream(e,t);if(s&&(this.systemTopic.publish({sourceId:this.configs.localNode.getId(),destinationIds:[e],messageType:l.SystemMessageType.Subscription,content:s}),s.type===d.SubscriptionMessageType.RestartNeedMediaStream))throw new i.EarlyReturnError("Restart NeedMediaStream")}handleSubscriptionNeedMediaStream(e,t){const s=this.outgoingManager.handleSubscriptionNeedMediaStream(e,t);this.systemTopic.publish({sourceId:this.configs.localNode.getId(),destinationIds:[e],messageType:l.SystemMessageType.Subscription,content:s})}handleContentCloseObjectStore({label:e}){this.removeIncomingSubscription(e,n.ContentType.ObjectStore),this.removeOutgoingSubscription(e,n.ContentType.ObjectStore)}handleContentCloseKeyValueDatabase({label:e}){this.removeIncomingSubscription(e,n.ContentType.KeyValueDatabase),this.removeOutgoingSubscription(e,n.ContentType.KeyValueDatabase)}handleContentClosePubSubTopic({label:e}){this.removeIncomingSubscription(e,n.ContentType.PubSub),this.removeOutgoingSubscription(e,n.ContentType.PubSub)}removeSubscriptionsForNode({id:e}){this.incomingManager.removeSubscriptionsForNode(e),this.outgoingManager.removeSubscriptionsForNode(e)}}},"./src/models/Subscription/SubscriptionMaps.ts":(e,t,s)=>{s.r(t),s.d(t,{SubscriptionMaps:()=>o});var n=s("./src/errors/SDKInternalError.ts"),i=s("./src/models/Subscription/Helpers.ts"),r=s("./src/models/Subscription/Topic.ts");class o{maps={topics:new Map,subscriptions:new Map};getPartsFromSubscription;constructor(e){this.getPartsFromSubscription=e}get subscriptions(){return this.maps.subscriptions}get topics(){return this.maps.topics}createSubscription(e,t){const s=this.getPartsFromSubscription(t),r=(0,i.getPrefix)(e);if(!s.supportsContentType)throw new n.SDKInternalError(n.SDKInternalError.codes.InvalidSubscription,{message:`${r}: ${s.remoteId} does not support content type ${s.contentType}`,subscriptionType:e,subscription:t,subscriptonParts:s});const o=(0,i.getSubscriptionLabel)(e,s);if(this.maps.subscriptions.has(o))throw new n.SDKInternalError(n.SDKInternalError.codes.InvalidSubscription,{message:`${r}: ${o} already exists`,subscriptionType:e,subscription:t,subscriptonParts:s});this.maps.subscriptions.set(o,t),this.createTopic(s,t)}removeSubscription(e,t){const s=(0,i.getSubscriptionLabel)(t,e),r=this.maps.subscriptions.get(s);if(!r)throw new n.SDKInternalError(n.SDKInternalError.codes.InvalidSubscription,{message:`${(0,i.getPrefix)(t)}: ${s} does not exists`,subscriptionType:t,subscription:r,subscriptonParts:e});this.closeSubscription(r,s,e)}closeSubscription(e,t,s){s=s||this.getPartsFromSubscription(e),this.maps.subscriptions.delete(t),this.removeTopic(s,e)}createTopic(e,{source:t,destination:s}){const{contentType:n,label:o,remoteId:a}=e,c=(0,i.getTopicLabel)(n,o,a),d=new r.Topic(c,n);d.registerSource(t),d.registerDestination(s),this.maps.topics.set(d.getLabel(),d)}removeTopic(e,t){const{contentType:s,label:n,remoteId:r}=e,o=(0,i.getTopicLabel)(s,n,r),a=this.maps.topics.get(o);a&&(this.closeTopic(a,t),this.maps.topics.delete(o))}closeTopic(e,{source:t,destination:s}){e.unregisterSource(t),e.unregisterDestination(s)}removeSubscriptionsForNode(e){this.maps.subscriptions.forEach(((t,s)=>{s.endsWith(e)&&this.closeSubscription(t,s)}))}}},"./src/models/Subscription/SubscriptionRequest.ts":(e,t,s)=>{s.r(t),s.d(t,{SubscriptionRequest:()=>l});var n=s("./src/constants/Subscription.ts"),i=s("./src/errors/SDKInternalError.ts"),r=s("./src/interfaces/Subscription/Subscription.ts"),o=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),a=s("./src/interfaces/Subscription/SystemEvent.ts"),c=s("./src/interfaces/Utils/Logger.ts"),d=s("./src/utils/Logger/Logger.ts");class l{currentDistance;maxDistance;tracks;systemTopic;answers=new Set;startTime=Date.now();params;retryCount=0;constructor(e,t,s,n){this.currentDistance=t,this.maxDistance=s,this.tracks=n,e.forEach((e=>{this.answers.add({nodeId:e,type:r.SubscriptionRequestType.Waiting})}))}getTracks(){return this.tracks}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}reset(e,t){this.startTime=Date.now(),this.answers.clear(),e.forEach((e=>{this.answers.add({nodeId:e,type:r.SubscriptionRequestType.Waiting})})),this.retryCount+=1,this.currentDistance=t}sendRequest(e,t,s,r,l){if(this.retryCount>n.SUBSCRIPTION_MAX_RETRY_COUNT)throw new i.SDKInternalError(i.SDKInternalError.codes.SubscriptionRequestNoAnswer,{answers:Array.from(this.answers).map((e=>({nodeId:e.nodeId,type:e.type})))});const u=Array.from(this.answers).map((e=>e.nodeId));this.params=l,this.systemTopic.publish({sourceId:e,destinationIds:u,messageType:a.SystemMessageType.Subscription,content:{type:o.SubscriptionMessageType.NeedMediaStream,label:s,ownerId:t,trackKinds:r,params:l}}),d.default.log(c.LoggingChannels.Subscription,"Send request",e,u)}handleSubscriptionSystemEvents(e,t){switch(t.type){case o.SubscriptionMessageType.CanProvideMediaStream:{const s=this.currentDistance>=t.distance&&t.distance<=this.maxDistance,n=Array.from(this.answers).find((t=>t.nodeId===e));n.type=s?r.SubscriptionRequestType.Accepted:r.SubscriptionRequestType.Rejected,n.cost=t.cost,n.distance=t.distance,n.streamId=t.streamId,n.roundTripTime=Date.now()-this.startTime,n.params=this.params,n.ownerId=t.ownerId,n.trackKinds=t.trackKinds,n.streamLabel=t.label,d.default.log(c.LoggingChannels.Subscription,(s?"Accepted":"Rejected")+" answer",n);break}case o.SubscriptionMessageType.CannotProvideMediaStream:{const t=Array.from(this.answers).find((t=>t.nodeId===e));t.type=r.SubscriptionRequestType.Rejected,d.default.log(c.LoggingChannels.Subscription,"Rejected answer",t);break}}if(this.canChooseAnswer())return this.chooseAnswer()}chooseAnswer(){const e=Array.from(this.answers).filter((e=>e.type===r.SubscriptionRequestType.Accepted)).sort(((e,t)=>e.cost===t.cost?e.roundTripTime-t.roundTripTime:e.cost-t.cost));if(0===e.length)throw new i.SDKInternalError(i.SDKInternalError.codes.SubscriptionRequestNoAnswer,{answers:Array.from(this.answers).map((e=>({nodeId:e.nodeId,type:e.type})))});return d.default.log(c.LoggingChannels.Subscription,"Chosen answer",e[0],this.answers),e[0]}canChooseAnswer(){for(const e of this.answers)if(e.type===r.SubscriptionRequestType.Waiting)return!1;return!0}}},"./src/models/Subscription/SystemTopic.ts":(e,t,s)=>{s.r(t),s.d(t,{SystemTopic:()=>d});var n=s("uuid"),i=s("@crewdle/web-sdk-types"),r=s("./src/constants/System.ts"),o=s("./src/interfaces/Utils/Logger.ts"),a=s("./src/utils/Logger/Logger.ts"),c=s("./src/utils/Observer/Observer.ts");class d{label;listener=(0,c.createObserver)();constructor(){this.label=r.SYSTEM_TOPIC}getLabel(){return this.label}getContentType(){return i.ContentType.Data}registerSource(e){e.registerSystemPublisher(this)}unregisterSource(e){e.unregisterSystemPublisher()}publish(e){a.default.log(o.LoggingChannels.Events,"SystemTopic publish",e.sourceId,e),this.listener.publish({topicLabel:this.label,contentType:i.ContentType.Data,uuid:e.uuid??(0,n.v4)(),recipients:e.recipients??[],...e})}subscribe(e){return this.listener.subscribe(e)}}},"./src/models/Subscription/Topic.ts":(e,t,s)=>{s.r(t),s.d(t,{Topic:()=>r});var n=s("uuid"),i=s("./src/utils/Observer/Observer.ts");class r{label;contentType;listener=(0,i.createObserver)();constructor(e,t){this.label=e,this.contentType=t}getLabel(){return this.label}getContentType(){return this.contentType}registerSource(e){e.registerPublisher(this)}registerDestination(e){e.registerSubscriber(this)}publish(e){this.listener.publish({topicLabel:this.label,contentType:this.contentType,uuid:(0,n.v4)(),recipients:[],...e})}subscribe(e){return this.listener.subscribe(e)}unregisterSource(e){e.unregisterPublisher(this)}unregisterDestination(e){e.unregisterSubscriber(this)}}},"./src/public/errors/SDKClientError.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SDKClientError:()=>i,SDKClientErrorCodes:()=>n}),function(e){e.ClusterAlreadyJoined="cluster-already-joined",e.FeatureNotEnabled="feature-not-enabled",e.ObjectStoreAlreadyExists="object-store-already-exists",e.ObjectStoreAlreadySubscribed="object-store-already-subscribed",e.ObjectStoreDoesNotExist="object-store-stream-does-not-exist",e.ObjectStoreNameNotString="object-store-name-not-string",e.ObjectStoreInvalidPayload="object-store-invalid-payload",e.ObjectStoreInvalidPath="object-store-invalid-path",e.ObjectStoreNotInSync="object-store-not-in-sync",e.InternalSDKError="internal-sdk-error",e.KeyValueDatabaseAlreadyExists="key-value-database-already-exists",e.KeyValueDatabaseDoesNotExist="key-value-database-does-not-exist",e.KeyValueDatabaseIndexNotFound="key-value-database-index-not-found",e.KeyValueDatabaseInvalidQuery="key-value-database-invalid-query",e.KeyValueDatabaseInvalidValue="key-value-database-invalid-value",e.KeyValueDatabaseNameNotString="key-value-database-name-not-string",e.KeyValueDatabaseNotOpen="key-value-database-not-open",e.KeyValueDatabaseTableNameReserved="key-value-database-table-name-reserved",e.KeyValueDatabaseTableNotFound="key-value-database-table-not-found",e.KeyValueDatabaseInvalidLayout="key-value-database-invalid-layout",e.LocalMediaStreamAlreadyExists="local-media-stream-already-exists",e.LocalMediaStreamNoAudioContext="local-media-stream-no-audio-context",e.PubSubTopicAlreadyExists="pub-sub-topic-already-exists",e.PubSubTopicDoesNotExist="pub-sub-topic-does-not-exist",e.PubSubTopicNameNotString="pub-sub-topic-name-not-string",e.PubSubTopicAlreadySubscribed="pub-sub-topic-already-subscribed",e.QueryBuilderInvalidArgument="query-helper-invalid-argument",e.RemoteMediaStreamAlreadyExists="remote-media-stream-already-exists",e.RemoteMediaStreamInvalidSubscriptionParams="remote-media-stream-invalid-subscription-params",e.SubscriptionRequestInProgress="subscription-request-in-progress",e.NodeNotAuthenticated="node-not-authenticated",e.NodeInvalidType="node-invalid-type",e.NodeTypeNotSupported="node-type-not-supported"}(n||(n={}));class i extends Error{code;constructor(e,t){super(t),this.code=e}}},"./src/public/models/Content/KeyValueDatabaseLayoutBuilder.ts":(e,t,s)=>{s.r(t),s.d(t,{LayoutBuilder:()=>n,TableBuilder:()=>i});class n{layout;constructor(e){this.layout={tables:{},version:e}}static validateLayout(e){for(const t in e){if("version"!==t&&"tables"!==t)return[!1,`Invalid key '${t}' in layout`];if("tables"===t)for(const t in e.tables){if("string"!=typeof t)return[!1,`Invalid table name '${t}'`];for(const s in e.tables[t]){if("indexes"!==s)return[!1,`Invalid key '${s}' in table '${t}'`];const n=e.tables[t][s]??[];for(const e of n)if(void 0===e.keyPath||"string"!=typeof e.keyPath)return[!1,`Invalid index in table '${t}': missing or invalid keyPath`]}}else if("version"===t&&"number"!=typeof e[t])return[!1,`Invalid version '${e[t]}' in layout: Version must be a number`]}return[!0,"Valid layout"]}static layout(e){const t=new n(e);return t.layout.version=e,t}table(e){return this.layout.tables[e]={},new i(this.layout.tables[e])}getLayout(){return this.layout}}class i{tableLayout;constructor(e){this.tableLayout=e}index(e){return this.tableLayout.indexes=this.tableLayout.indexes??[],this.tableLayout.indexes.push({keyPath:e}),this}}},"./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts":(e,t,s)=>{s.r(t),s.d(t,{QueryBuilder:()=>i});var n=s("./src/public/errors/SDKClientError.ts");class i{query;constructor(e){this.query={orderBy:{key:e,direction:"asc"}}}static index(e){if("string"!=typeof e||0===e.length)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid index key: must be a string");return new i(e)}static validateQuery(e){try{return i.buildQuery(e),!0}catch(e){return!1}}static buildQuery(e){const t=i.index(e.orderBy?.key??e.where?.key??"");if(e.where){const s=e.where;if((i.isWhereValue(s)||i.isWhereValues(s)||i.isWhereBetween(s))&&t.where(s.operator,s.value),e.orderBy?.key&&e.orderBy?.key!==e.where.key)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid query: where and orderBy clauses must use the same key")}return e.orderBy&&t.orderBy(e.orderBy.direction),e.limit&&t.limit(e.limit),e.offset&&t.offset(e.offset),t}getQuery(){return{...this.query}}where(e,t){const s={key:this.query.orderBy.key,operator:e,value:t};if(!i.isWhereValue(s)&&!i.isWhereValues(s)&&!i.isWhereBetween(s))throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid where clause");return this.query.where=s,this}orderBy(e){if("asc"!==e&&"desc"!==e)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid order: must be asc or desc");return this.query.orderBy.direction=e,this}limit(e){if("number"!=typeof e||e<0)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid limit: must be a positive number");return this.query.limit=e,this}offset(e){if("number"!=typeof e||e<0)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid offset: must be a positive number");return this.query.offset=e,this}static isWhereValue(e){if(!(e&&"object"==typeof e&&"operator"in e&&"value"in e))return!1;const{operator:t,value:s}=e;return!(!["==","!=",">","<","<=",">="].includes(t)||Array.isArray(s))}static isWhereValues(e){if(!(e&&"object"==typeof e&&"operator"in e&&"value"in e))return!1;const{operator:t,value:s}=e;return!(!["in","not-in"].includes(t)||!Array.isArray(s))}static isWhereBetween(e){if(!(e&&"object"==typeof e&&"operator"in e&&"value"in e))return!1;const{operator:t,value:s}=e;return!("between"!==t||!Array.isArray(s)||2!==s.length)}}},"./src/services/Auth/FirebaseAuthService.ts":(e,t,s)=>{s.r(t),s.d(t,{FirebaseAuthService:()=>o});var n=s("firebase/auth"),i=s("firebase/functions"),r=s("./src/services/Firebase/FirebaseService.ts");class o{vendorId;user;constructor(e){this.vendorId=e}async signInWithCredential(e){const t=await(0,i.httpsCallable)(r.default.getFunctions(),"sdkCreateToken")({uid:`ccc${this.vendorId}ccc${e.id}`}),s=await(0,n.signInWithCustomToken)(r.default.getAuth(),t.data.token);this.user=s.user}async signOut(){await(0,n.signOut)(r.default.getAuth())}getIdToken(){return this.user?.getIdToken()??Promise.reject("User not signed in")}}},"./src/services/Discovery/FirebaseRDBDiscoveryService.ts":(e,t,s)=>{s.r(t),s.d(t,{FirebaseRDBDiscoveryService:()=>a});var n=s("firebase/database"),i=s("./src/services/Firebase/FirebaseService.ts"),r=s("./src/utils/Logger/Logger.ts"),o=s("./src/utils/Observer/Observer.ts");class a{vendorId;clusterId;localNode;minConnections;disconnectCallback=(0,o.createSingleObserver)();firebaseUnsubscriber;childRemovedUnsubscriber;onDisconnectHandler;connected=!1;clusterKey;nodeKey;constructor(e,t,s,o){this.vendorId=e,this.clusterId=t,this.localNode=s,this.minConnections=o,this.clusterKey=`ccc${this.vendorId}ccc${this.clusterId}`,this.nodeKey=`ccc${this.vendorId}ccc${this.localNode.getId()}`,this.firebaseUnsubscriber=(0,n.onValue)((0,n.ref)(i.default.getDatabase(),".info/connected"),(e=>{!0!==e.val()?this.connected&&r.default.error("firebase-disconnect",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type}):(this.connected=!0,this.setOnDisconnectHandler(),r.default.warning("firebase-connect",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type}))}))}async join(){await this.joinCluster();const e=await this.getAncestors();return this.childRemovedUnsubscriber=(0,n.onChildRemoved)((0,n.ref)(i.default.getDatabase(),`clusters/${this.clusterKey}/nodes`),(e=>{const t=e.key;if(!t)return;const s=t.replace(`ccc${this.vendorId}ccc`,"");this.disconnectCallback.publish(s)})),e}async close(){this.childRemovedUnsubscriber?.(),delete this.childRemovedUnsubscriber,this.onDisconnectHandler?.cancel(),delete this.onDisconnectHandler,this.firebaseUnsubscriber?.(),delete this.firebaseUnsubscriber,await(0,n.remove)((0,n.ref)(i.default.getDatabase(),`clusters/${this.clusterKey}/nodes/${this.nodeKey}`))}onNodeDisconnect(e){return this.disconnectCallback.subscribe(e)}async getAncestors(){const e=[],t=await(0,n.get)((0,n.ref)(i.default.getDatabase(),`clusters/${this.clusterKey}/nodes`)),s=[];return t.forEach((e=>{const t=e.key?.replace(`ccc${this.vendorId}ccc`,"");s.push({id:t,joinedAt:e.val().joinedAt,priority:e.val().priority})})),s.sort(((e,t)=>e.joinedAt===t.joinedAt?e.priority-t.priority:e.joinedAt-t.joinedAt)).splice(s.findIndex((e=>e.id===this.localNode.getId()))),s.sort(((e,t)=>t.joinedAt===e.joinedAt?t.priority-e.priority:t.joinedAt-e.joinedAt)).forEach((t=>{e.length>=this.minConnections||e.push(t.id)})),r.default.logEvent("discover",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type,data:{ancestorIds:e,allNodes:s}}),e}async joinCluster(){await(0,n.set)((0,n.ref)(i.default.getDatabase(),`clusters/${this.clusterKey}/nodes/${this.nodeKey}`),{joinedAt:(0,n.serverTimestamp)(),priority:Math.random()})}setOnDisconnectHandler(){this.onDisconnectHandler&&this.onDisconnectHandler.cancel(),this.onDisconnectHandler=(0,n.onDisconnect)((0,n.ref)(i.default.getDatabase(),`clusters/${this.clusterKey}/nodes/${this.nodeKey}`)),this.onDisconnectHandler.remove()}}},"./src/services/Firebase/FirebaseService.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var n=s("firebase/app"),i=s("firebase/auth"),r=s("firebase/database"),o=s("firebase/firestore"),a=s("firebase/functions"),c=s("./src/environments/Environment.ts");class d{static instance;app;auth;functions;database;firestore;clockSkew;constructor(){}static getInstance(){return d.instance||(d.instance=new d),d.instance}getApp(){return this.app||(this.app=(0,n.initializeApp)(c.Environment.firebaseConfig)),this.app}getAuth(){return this.auth||(this.auth=(0,i.getAuth)(this.getApp())),this.auth}getFunctions(){return this.functions||(this.functions=(0,a.getFunctions)(this.getApp(),c.Environment.firebaseConfig.functionsRegion)),this.functions}getDatabase(){return this.database||(this.database=(0,r.getDatabase)(this.getApp())),this.database}getFirestore(){return this.firestore||(this.firestore=(0,o.getFirestore)(this.getApp())),this.firestore}async getEstimatedTimestamp(){if(this.clockSkew)return Date.now()+this.clockSkew;const e=this.getDatabase(),t=(0,r.ref)(e,".info/connected"),s=(0,r.onValue)(t,(e=>{!1===e.val()&&(s(),delete this.clockSkew)})),n=(0,r.ref)(e,".info/serverTimeOffset");return new Promise((e=>{(0,r.onValue)(n,(t=>{(0,r.off)(n),this.clockSkew=t.val(),e(Date.now()+(this.clockSkew??0))}))}))}}const l=d.getInstance()},"./src/services/Graph/GraphService.ts":(e,t,s)=>{s.r(t),s.d(t,{GraphService:()=>n});class n{minConnections;maxConnections;maxDistance;ranges=[];maxLayer;remoteNodes=new Map;constructor(e,t,s){this.minConnections=e,this.maxConnections=t,this.maxDistance=s,this.maxLayer=(this.maxConnections-2*this.minConnections)/2,this.ranges.push({start:1,end:this.getNextTargetRank(1,1)-1});for(let e=0;e<this.maxLayer;++e)this.ranges.push({start:this.getNextTargetRank(1,e+1),end:this.getNextTargetRank(1,e+2)-1})}getNextTargetRank(e,t=1){let s=this.maxDistance-this.minConnections,n=1;for(let e=1;e<t;++e)s*=this.maxDistance-this.minConnections-e,n*=this.maxDistance-this.minConnections-e+1;return s*this.minConnections+e-n}getCurrentMaxLayer(e){let t=0;for(;this.ranges[t].end<e;)t+=1;return t}getMinConnections(){return this.minConnections}getMaxConnections(){return this.maxConnections}getMaxDistance(){return this.maxDistance}getRemoteNodes(){return this.remoteNodes}setRemoteNode(e,t){this.remoteNodes.set(e,t)}hasRemoteNode(e){return this.remoteNodes.has(e)}getRemoteNode(e){return this.remoteNodes.get(e)}deleteRemoteNode(e){this.remoteNodes.delete(e)}getClosestNodes(e,t){const s=this.getRemoteNode(t)?.getRank()??0;return e.map((e=>this.getRemoteNode(e))).filter((e=>void 0!==e)).sort(((e,t)=>Math.abs(s-(e&&e.getRank()||1/0))-Math.abs(s-(t&&t.getRank()||1/0)))).map((e=>e.getId()))}}},"./src/services/MessageBuffer/MessageBufferService.ts":(e,t,s)=>{s.r(t),s.d(t,{MessageBufferService:()=>r});var n=s("./src/constants/Services.ts"),i=s("./src/utils/Interval/Interval.ts");class r{buffer=new Map;unsubscribeHandler;constructor(){this.unsubscribeHandler=i.default.setInterval((()=>{for(const[e,t]of this.buffer.entries())Date.now()-t>n.MESSAGE_BUFFER_RETENTION_TIME&&this.buffer.delete(e)}),n.MESSAGE_BUFFER_CLEANUP_INTERVAL)}close(){this.unsubscribeHandler()}addMessage(e){this.buffer.set(e,Date.now())}hasMessage(e){return this.buffer.has(e)}}},"./src/services/Transaction/FirebaseRDBTransactionService.ts":(e,t,s)=>{s.r(t),s.d(t,{FirebaseRDBTransactionService:()=>o});var n=s("./src/errors/SDKInternalError.ts"),i=s("firebase/database"),r=s("./src/services/Firebase/FirebaseService.ts");class o{vendorId;clusterId;clusterKey;constructor(e,t){this.vendorId=e,this.clusterId=t,this.clusterKey=`ccc${this.vendorId}ccc${this.clusterId}`}async writeTransaction(e,t,s){if(!1===(await(0,i.runTransaction)((0,i.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/objectstores/${t}/transactions/lastTransaction`),(t=>{if(!t)return e.id;if(t!==s)throw new n.SDKInternalError(n.SDKInternalError.codes.ObjectStoreNotSynced);return e.id}))).committed)throw new n.SDKInternalError(n.SDKInternalError.codes.ObjectStoreCannotWriteTransaction);e.parentId||delete e.parentId,await(0,i.set)((0,i.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/objectstores/${t}/transactions/${e.id}`),e)}async getTransactions(e,t){let s=[];const n=await(0,i.get)((0,i.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/objectstores/${e}/transactions`));if(!n.exists())return s;const o=n.val();s=Object.values(o).filter((e=>"string"!=typeof e));const a=[];let c=s.find((e=>e.parentId===t));for(;c;)a.push(c),c=s.find((e=>e.parentId===c.id));return a}}},"./src/utils/Interval/Interval.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var n=s("./src/constants/Interval.ts");class i{static instance;parameters=[];source;constructor(){setInterval((()=>{this.parameters.forEach((e=>{if(Date.now()-e.lastExecuted>e.interval){try{e.callback()}catch(e){}e.lastExecuted=Date.now()}}))}),n.INTERVAL_TIME)}static getInstance(){return i.instance||(i.instance=new i),i.instance}startNoThrottlingHack(e){const t=this.createConstantSource(e),s=e.createGain();s&&t&&(s.gain.value=.001,t.connect(s),s.connect(e.destination),t.start())}stopNoThrottlingHack(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=void 0)}wait(e){return new Promise((t=>{setTimeout(t,e)}))}setInterval(e,t){return this.parameters.push({callback:e,interval:t,lastExecuted:Date.now()}),()=>{this.parameters=this.parameters.filter((t=>t.callback!==e))}}createConstantSource(e){if(e.createConstantSource)return e.createConstantSource();const t=e.createBufferSource(),s=e.createBuffer(1,1,e.sampleRate);return s.getChannelData(0)[0]=10,t.buffer=s,t.loop=!0,t}}const r=i.getInstance()},"./src/utils/Logger/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{formatCurrentDate:()=>c,getFormattedSytemLog:()=>d,getLoggableSystemMessage:()=>o});var n=s("./src/constants/System.ts");const i=["PeerConnection","Node","Content","Subscription","Stats","Detection","Remediation"],r=[["Offer","Answer","Handshake","Success","NeedRestart","Restart","Disconnect","Stats","OptimizationConnectionSuccess"],["NodeJoin","NodeUpdate","NodeConnectionsUpdate","NodeLeave"],["PublishMediaStream","UnpublishMediaStream","SubscribeMediaStream","UpdateMediaStream","UnsubscribeMediaStream","CloseObjectStoreBucket","CloseKeyValueDatabase","ClosePubSubTopic","CloseMediaStream","LocalMediaStreamTrackFail","RemoteMediaStreamTrackFail","RequestSyncKeyValueDatabase","SendTransactionsDump","RequestTransactionsValue","ObjectStoreStats","KeyValueDatabaseStats"],["SubscribeMediaStream","UpdateMediaStream","UnsubscribeMediaStream","NeedMediaStream","RestartNeedMediaStream","CanProvideMediaStream","CannotProvideMediaStream","MediaStreamUnavailable"],["StreamReport","LocalReport"],["Problem"],["Remediation","RemoteRemediation"]];function o(e){return{...e,systemMessageType:i[e.messageType],systemContentMessageType:r[e.messageType][e.content.type]}}const a={hour:"2-digit",minute:"2-digit",second:"2-digit"};function c(){const e=new Date,t=e.getMilliseconds(),s=e.toLocaleDateString("en-US",a).match(/\d\d:\d\d:\d\d/)?.[0];return`${s}.${t>100?`${t}`:t>10?`0${t}`:`00${t}`}`}function d(e,t){const s=c(),{sourceId:i,destinationIds:r,systemMessageType:a,systemContentMessageType:d}=o(e);return`${s} - ${t} - ${i===t?`Sending '${a}' to ${r?`${r}`:"everyone"}`:e.sourceId===n.SYSTEM_TOPIC_INTERNAL?`Internal event '${a}'`:`${r?"":"Everyone "}Receiving '${a}' from ${i}`} with '${d}' payload:`}},"./src/utils/Logger/Logger.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var n=s("firebase/firestore"),i=s("./src/environments/Environment.ts"),r=s("./src/interfaces/Utils/Logger.ts"),o=s("./src/services/Firebase/FirebaseService.ts");class a{static instance;enabledChannels=[r.LoggingChannels.Default];debugEnabled=!0;loggingConnectors;vendorId="";globalObject;batchQueue=[];currentBatch=this.createNewBatch();batchTimeout;retryLimit=10;retryDelay=500;batchSize=450;timeoutValue=1e3;constructor(){if("undefined"!=typeof window)this.globalObject=window;else{if(void 0===s.g)throw new Error("No global object found");this.globalObject=s.g}this.loadEnabledChannels(),this.globalObject.crewdleSDKEnableLogging=e=>{if(e===r.LoggingChannels.All)return this.enabledChannels=Object.keys(r.LoggingChannels).map((e=>{const t=e;return r.LoggingChannels[t]})),void Object.keys(r.LoggingChannels).forEach((e=>{const t=e;localStorage.setItem(`crewdle-sdk-logging-${r.LoggingChannels[t]}`,"true")}));this.enabledChannels.includes(e)||(this.enabledChannels.push(e),localStorage.setItem(`crewdle-sdk-logging-${e}`,"true"))},this.globalObject.crewdleSDKDisableLogging=e=>{if(!e||e===r.LoggingChannels.All)return this.enabledChannels=[],void Object.keys(r.LoggingChannels).forEach((e=>{const t=e;localStorage.removeItem(`crewdle-sdk-logging-${r.LoggingChannels[t]}`)}));this.enabledChannels.includes(e)&&(this.enabledChannels=this.enabledChannels.filter((t=>t!==e)),localStorage.removeItem(`crewdle-sdk-logging-${e}`))},this.globalObject.crewdleSDKLoggingChannels=r.LoggingChannels}static getInstance(){try{return a.instance||(a.instance=new a),a.instance}catch(e){return console.error("Logger.getInstance",e),{log:()=>{},logRaw:()=>{},debug:()=>{},setVendorId:()=>{},setLoggingConnectors:()=>{},error:()=>{},logEvent:()=>{},logServiceEvent:()=>{},logStorage:()=>{},warning:()=>{},isChannelEnabled:()=>!1}}}setVendorId(e){this.vendorId=e}setLoggingConnectors(e){this.loggingConnectors=e}debug(e,...t){this.debugEnabled&&this.log(r.LoggingChannels.Default,`DEBUG - ${e}`,...t)}log(e,t,...s){i.Environment.isProduction||(this.enabledChannels.includes(e)&&console.log(`Channel '${e}'\n`,new Date+"\n",t,...s),this.loggingConnectors&&this.loggingConnectors.forEach((n=>{this.isInternalLoggingConnector(n)&&n.getEnabledChannels().includes(e)&&n.log(t,{vendorId:this.vendorId,nodeId:"",nodeType:"",data:{channel:e,...s}})})))}logRaw(e,t,...s){i.Environment.isProduction||(this.enabledChannels.includes(e)&&console.log(t,...s),this.loggingConnectors&&this.loggingConnectors.forEach((n=>{this.isInternalLoggingConnector(n)&&n.getEnabledChannels().includes(e)&&n.log(t,{vendorId:this.vendorId,nodeId:"",nodeType:"",data:{channel:e,...s}})})))}logEvent(e,t){if(this.loggingConnectors){const s={vendorId:this.vendorId,...t};this.loggingConnectors.forEach((t=>{t.log(e,s)}))}}logServiceEvent(e,t){const s=(0,n.doc)((0,n.collection)(o.default.getFirestore(),`developers/${this.vendorId}/logs`));this.currentBatch.batch.set(s,{...t,service:e,timestamp:(0,n.serverTimestamp)()}),this.currentBatch.operations.push({type:"set",ref:s.path,data:t}),this.logBatch()}logStorage(e,t,s){(0,n.setDoc)((0,n.doc)(o.default.getFirestore(),`developers/${this.vendorId}/${e}/${t}`),{storage:s,timestamp:(0,n.serverTimestamp)()})}logBatch(){this.currentBatch.counter++,this.currentBatch.counter===this.batchSize?this.processBatch():this.batchTimeout||(this.batchTimeout=this.globalObject.setTimeout((()=>this.processBatch()),this.timeoutValue))}async processBatch(){for(this.batchQueue.push(this.currentBatch),this.currentBatch=this.createNewBatch();this.batchQueue.length>0;){const e=this.batchQueue.shift();if(!await this.commitBatch(e,0))break}clearTimeout(this.batchTimeout),this.batchTimeout=void 0}async commitBatch(e,t){if(e.counter>0)try{return await e.batch.commit(),!0}catch(s){if(console.error("Error committing batch:",s,"Operations:",e.operations),!(t<this.retryLimit)){const{nodeId:t="",nodeType:n="",clusterId:i=""}=e.operations[0].data,r={nodeId:t,nodeType:n,clusterId:i,data:{operations:e.operations,error:s}};return this.error("Failed to commit batch after retries:",r),!1}setTimeout((()=>this.commitBatch(e,t+1)),this.retryDelay*Math.pow(2,t))}}error(e,t,...s){if(console.error(new Date,e,t,...s),this.loggingConnectors){const s={vendorId:this.vendorId,...t};this.loggingConnectors.forEach((t=>{t.error(e,s)}))}}warning(e,t,...s){if(console.warn(new Date,e,t,s),this.loggingConnectors){const s={vendorId:this.vendorId,...t};this.loggingConnectors.forEach((t=>{t.warn(e,s)}))}}isChannelEnabled(e){return this.enabledChannels.includes(e)}loadEnabledChannels(){try{Object.keys(r.LoggingChannels).forEach((e=>{const t=e;localStorage.getItem(`crewdle-sdk-logging-${r.LoggingChannels[t]}`)&&(console.log("LoggingService: logging enabled for",r.LoggingChannels[t]),this.enabledChannels.push(r.LoggingChannels[t]))}))}catch(e){}}isInternalLoggingConnector(e){return void 0!==e.getEnabledChannels}createNewBatch(){return{batch:(0,n.writeBatch)(o.default.getFirestore()),operations:[],counter:0}}}const c=a.getInstance()},"./src/utils/ObjectStore/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{getFileChecksum:()=>a,getFileContent:()=>d,getPathName:()=>r,getPathParts:()=>i,readFileContent:()=>c,splitPathName:()=>o});var n=s("./src/constants/Content.ts");function i(e){return e.split("/").filter((e=>e.length>0))}function r(e,t){return"/"===e?e+t:e+"/"+t}function o(e){const t=i(e),s=t.pop()||"",n=t.join("/");return[0===n.length?"/":n,s]}async function a(e){const t=await e.arrayBuffer(),s=new Uint8Array(t);let n=0;for(const e of s)n+=e;return n.toString()}function c(e){return new Promise(((t,s)=>{!function(e,t,s){let i=0;const r=[],o=()=>{let a=i+n.CONTENT_FILE_CHUNK_SIZE;a>e.size&&(a=e.size);let c=e.slice(i,a),d=new FileReader;d.onload=s=>{r.push(d.result),i=a,i<e.size?o():t(r)},d.onerror=e=>{s(e)},d.readAsArrayBuffer(c)};o()}(e,t,s)}))}function d(e,t,s){return new File(e,t,{type:s})}},"./src/utils/Observer/Observer.ts":(e,t,s)=>{function n(){let e=[];return{subscribe:t=>(e.push(t),()=>{e=e.filter((e=>e!==t))}),publish:t=>{e.forEach((e=>e(t)))}}}function i(){let e;return{subscribe:t=>(e=t,()=>{e=void 0}),publish:t=>{e&&e(t)}}}s.r(t),s.d(t,{createObserver:()=>n,createSingleObserver:()=>i})},"./src/utils/Queue/PriorityRetryQueue.ts":(e,t,s)=>{s.r(t),s.d(t,{createPriorityRetryQueue:()=>o});var n=s("./src/interfaces/Utils/Queue.ts"),i=s("./src/utils/Interval/Interval.ts"),r=s("./src/utils/Queue/Queue.ts");function o(e,t=n.QueueElementPriority,s=!1){let o=!1;const a=[];async function c(){if(!o){for(o=!0;a.some((e=>e.head));){let t,n=0;for(const[e,s]of a.entries())if(t=s.shift(),n=e,t)break;if(t)try{if(e instanceof r.SyncQueueCallback&&e.call(t),e instanceof r.AsyncQueueCallback&&await e.call(t),a.slice(-1).some((e=>e.head)))continue;const s=a.length-1;n===s&&a[s].head&&await i.default.wait(0)}catch(i){s?a[n].push(t,!1):a[n].unshift(t,!1),await e.wait()}}o=!1}}return Object.values(t).forEach((e=>{"string"!=typeof e&&(a[e]=(0,r.createQueue)(c))})),{queues:a}}},"./src/utils/Queue/Queue.ts":(e,t,s)=>{s.r(t),s.d(t,{AsyncQueueCallback:()=>i,SyncQueueCallback:()=>n,createQueue:()=>r});class n{callback;retryCallback;constructor(e,t){this.callback=e,this.retryCallback=t}call(e){this.callback(e)}async wait(){await this.retryCallback()}}class i{callback;retryCallback;constructor(e,t){this.callback=e,this.retryCallback=t}async call(e){await this.callback(e)}async wait(){await this.retryCallback()}}function r(e=(()=>{}),t=(()=>!1),s=(()=>{})){let n,i,r=0;return{get size(){return r},get head(){return n},get tail(){return i},set head(e){n=e},set tail(e){i=e},push(s,o=!0){const a={value:s};o&&t(a)?e():(i&&(a.previous=i,i.next=a),i=a,n||(n=a),r+=1,o&&e())},pop(){if(!i)return;const e=i.value;return i=i.previous,i&&delete i.next,i||(n=void 0),r-=1,e},unshift(s,o=!0){const a={value:s};o&&t(a)?e():(n&&(n.previous=a,a.next=n),n=a,i||(i=a),r+=1,o&&e())},shift(){if(!n)return;const e=n.value;return n=n.next,n&&delete n.previous,n||(i=void 0),r-=1,e},clear(){s(),n=void 0,i=void 0,r=0}}}},"./src/utils/Queue/RetryQueue.ts":(e,t,s)=>{s.r(t),s.d(t,{createRetryQueue:()=>i});var n=s("./src/utils/Queue/Queue.ts");function i(e,t=!1,s=(()=>{}),i=(()=>!1),r=(()=>{})){let o=!1;const a=(0,n.createQueue)((async function(){if(!o){for(o=!0;a.head;){const i=a.shift();if(i)try{e instanceof n.SyncQueueCallback&&e.call(i),e instanceof n.AsyncQueueCallback&&await e.call(i),s(i)}catch(s){t?a.push(i,!1):a.unshift(i,!1),await e.wait()}}o=!1}}),i,r);return a}},"./src/utils/Queue/VersionedRetryQueue.ts":(e,t,s)=>{s.r(t),s.d(t,{createVersionedRetryQueue:()=>i});var n=s("./src/utils/Queue/RetryQueue.ts");function i(e,t=!1){let s=new Map;const i=(0,n.createRetryQueue)(e,t,(function(e){r(e)&&s.delete(`${e.sourceId}-${e.destinationIds??[]}-${e.messageType}-${e.content.type}`)}),(function(e){return!!function(e){const t=e.value;if(!r(t))return!1;const n=`${t.sourceId}-${t.destinationIds??[]}-${t.messageType}-${t.content.type}`,o={version:t.content.version,element:e},a=s.get(n);return a?(a.version>=t.content.version||(a.element.previous&&(a.element.previous.next=e,e.previous=a.element.previous),a.element.next&&(a.element.next.previous=e,e.next=a.element.next),a.element===i.head&&(i.head=e),a.element===i.tail&&(i.tail=e),s.set(n,o)),!0):(s.set(n,o),!1)}(e)}),(function(){s.clear()}));function r(e){if(e&&"object"==typeof e&&e.hasOwnProperty("content")&&e.hasOwnProperty("messageType")&&e.hasOwnProperty("sourceId")){const t=e;if(t.content&&"object"==typeof t.content&&t.content.hasOwnProperty("version")&&t.content.hasOwnProperty("type"))return!0}return!1}return i}},"./src/utils/Support/Support.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var n=s("./src/interfaces/Utils/Logger.ts"),i=s("./src/interfaces/Utils/Support.ts"),r=s("./src/utils/Logger/Logger.ts");class o{static instance;featureSupport=[];constructor(){}static getInstance(){return o.instance||(o.instance=new o),o.instance}initialize(){this.checkWebRTC(),this.checkMediaStream(),this.checkScreenSharing(),this.checkAudioVolume(),this.checkDeviceConfig(),this.checkAudioOutput(),this.checkMediaRecording(),this.checkBackgrounds(),this.checkWebGL(),this.checkAudioContext(),r.default.log(n.LoggingChannels.Support,"Support: current config",{featureSupport:this.featureSupport})}isFeatureSupported(e){const t=this.featureSupport.find((t=>t.name===e));return!!t&&t.supported}logSupport(e){r.default.logEvent("support",{nodeId:e.getId(),nodeType:e.type,data:{featureSupport:this.featureSupport}})}checkWebRTC(){const e=i.SupportFeatureName.WebRTC;let t=!1;"function"==typeof RTCPeerConnection&&"function"==typeof RTCIceCandidate&&"function"==typeof RTCSessionDescription?t=!0:r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkMediaStream(){const e=i.SupportFeatureName.MediaStream;let t=!1;"function"==typeof MediaStream&&"function"==typeof MediaStreamTrack&&"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?t=!0:r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkScreenSharing(){const e=i.SupportFeatureName.ScreenSharing;let t=!1;"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getDisplayMedia?t=!0:r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkAudioVolume(){const e=i.SupportFeatureName.AudioVolume;let t=!1;"function"!=typeof AudioContext||"function"!=typeof ScriptProcessorNode&&"function"!=typeof AudioWorkletNode||"function"!=typeof MediaStreamAudioSourceNode?r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`):t=!0,this.featureSupport.push({name:e,supported:t})}checkDeviceConfig(){const e=i.SupportFeatureName.DeviceConfig;let t=!1;"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.enumerateDevices&&"function"==typeof MediaDeviceInfo?t=!0:r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkAudioOutput(){const e=i.SupportFeatureName.AudioOutput;let t=!1;"object"==typeof document&&"function"==typeof document.createElement("video").setSinkId?t=!0:r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}async checkMediaRecording(){const e=i.SupportFeatureName.Recording;let t=!1;try{const e=document.createElement("canvas");if(MediaRecorder&&MediaSource&&e.captureStream){const s=e.captureStream(),n=new MediaRecorder(s);n.start(),await new Promise((e=>setTimeout(e,2e3))),n.stop(),t="inactive"===n.state}}catch(t){r.default.log(n.LoggingChannels.Support,`Support: ${e} check failed`,t)}this.featureSupport.push({name:e,supported:t}),t||r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`)}checkBackgrounds(){const e=i.SupportFeatureName.Backgrounds;let t=!1;try{document.createElement("canvas").captureStream&&(t=!0)}catch(t){r.default.log(n.LoggingChannels.Support,`Support: ${e} check failed`,t)}this.featureSupport.push({name:e,supported:t}),t||r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`)}checkWebGL(){const e=i.SupportFeatureName.WebGL;let t=!1;try{const e=document.createElement("canvas");WebGLRenderingContext&&e.getContext("webgl")&&(t=!0)}catch(t){r.default.log(n.LoggingChannels.Support,`Support: ${e} check failed`,t)}this.featureSupport.push({name:e,supported:t}),t||r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`)}checkAudioContext(){const e=i.SupportFeatureName.AudioContext;let t=!1;"function"==typeof AudioContext?t=!0:r.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}}const a=o.getInstance()},"@aws-amplify/api":e=>{e.exports=require("@aws-amplify/api")},"@aws-amplify/core":e=>{e.exports=require("@aws-amplify/core")},"@crewdle/mist-connector-indexed-db":e=>{e.exports=require("@crewdle/mist-connector-indexed-db")},"@crewdle/mist-connector-opfs":e=>{e.exports=require("@crewdle/mist-connector-opfs")},"@crewdle/mist-connector-webrtc-browser":e=>{e.exports=require("@crewdle/mist-connector-webrtc-browser")},"@crewdle/web-sdk-types":e=>{e.exports=require("@crewdle/web-sdk-types")},"aws-amplify":e=>{e.exports=require("aws-amplify")},"aws-amplify/utils":e=>{e.exports=require("aws-amplify/utils")},"firebase/app":e=>{e.exports=require("firebase/app")},"firebase/auth":e=>{e.exports=require("firebase/auth")},"firebase/database":e=>{e.exports=require("firebase/database")},"firebase/firestore":e=>{e.exports=require("firebase/firestore")},"firebase/functions":e=>{e.exports=require("firebase/functions")},uuid:e=>{e.exports=require("uuid")}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{s.r(n),s.d(n,{KeyValueDatabase:()=>i.KeyValueDatabase,LayoutBuilder:()=>a.LayoutBuilder,LoggingChannels:()=>t.LoggingChannels,QueryBuilder:()=>o.QueryBuilder,SDK:()=>c.SDK,SDKClientErrorCodes:()=>e.SDKClientErrorCodes,TableBuilder:()=>a.TableBuilder,logger:()=>r.default});var e=s("./src/public/errors/SDKClientError.ts"),t=s("./src/interfaces/Utils/Logger.ts"),i=s("./src/models/Content/KeyValueDatabase.ts"),r=s("./src/utils/Logger/Logger.ts"),o=s("./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts"),a=s("./src/public/models/Content/KeyValueDatabaseLayoutBuilder.ts"),c=s("./src/models/SDK/SDK.ts")})(),n})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JRLEVBQUVELEVBQVlob0QsS0FBU3luRCxFQUFvQlEsRUFBRXp4RCxFQUFTd0osSUFDNUVDLE9BQU9pb0QsZUFBZTF4RCxFQUFTd0osRUFBSyxDQUFFbW9ELFlBQVksRUFBTXhrRCxJQUFLcWtELEVBQVdob0QsSUFFMUUsRUNORHluRCxFQUFvQmhILEVBQUksV0FDdkIsR0FBMEIsaUJBQWYySCxXQUF5QixPQUFPQSxXQUMzQyxJQUNDLE9BQU90eEQsTUFBUSxJQUFJdXhELFNBQVMsY0FBYixFQUNoQixDQUFFLE1BQU85NUMsR0FDUixHQUFzQixpQkFBWGl5QyxPQUFxQixPQUFPQSxNQUN4QyxDQUNBLENBUHVCLEdDQXhCaUgsRUFBb0JRLEVBQUksQ0FBQzlpQyxFQUFLbWpDLElBQVVyb0QsT0FBT3NvRCxVQUFVM0QsZUFBZWpCLEtBQUt4K0IsRUFBS21qQyxHQ0NsRmIsRUFBb0J0cEIsRUFBSzNuQyxJQUNILG9CQUFYZ3lELFFBQTBCQSxPQUFPQyxhQUMxQ3hvRCxPQUFPaW9ELGVBQWUxeEQsRUFBU2d5RCxPQUFPQyxZQUFhLENBQUV0a0MsTUFBTyxXQUU3RGxrQixPQUFPaW9ELGVBQWUxeEQsRUFBUyxhQUFjLENBQUUydEIsT0FBTyxHQUFPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9Db250ZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL0RldGVjdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9EZXRlY3Rpb25Jc3N1ZVJ1bGVzLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL0RldGVjdGlvblByb2JsZW1SdWxlcy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9JbnRlcnZhbC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9Ob2RlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL1BlZXJDb25uZWN0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL1JlbWVkaWF0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL1JlbWVkaWF0aW9uUnVsZXMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvU2VydmljZXMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvU3RhdHMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvU3Vic2NyaXB0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL1N5c3RlbS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2Vudmlyb25tZW50cy9FbnZpcm9ubWVudC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudC5kZWZhdWx0LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvZW52aXJvbm1lbnRzL2Vudmlyb25tZW50LmRldi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudC5wcmQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9lbnZpcm9ubWVudHMvZW52aXJvbm1lbnQuc3RnLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvZXJyb3JzL0Vhcmx5UmV0dXJuRXJyb3IudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9lcnJvcnMvU0RLSW50ZXJuYWxFcnJvci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9Db250ZW50L0RhdGFDb250ZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9EZXRlY3Rpb24vRGV0ZWN0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9Ob2RlL05vZGUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL05vZGUvTm9kZU1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1JlbWVkaWF0aW9uL1JlbWVkaWF0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9TREsvU0RLLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9TdGF0cy9TdGF0cy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL01lZGlhU3Vic2NyaXB0aW9uRXZlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1V0aWxzL0xvZ2dlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvVXRpbHMvUXVldWUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1V0aWxzL1N1cHBvcnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ2x1c3Rlci9DbHVzdGVyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NsdXN0ZXIvQ2x1c3RlckV2ZW50RW1pdHRlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL0FwcFN5bmNQdWJTdWJDb25uZWN0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0Nvbm5lY3Rpb24vQmFzZUNvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29ubmVjdGlvbi9CYXNlUGVlckNvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29ubmVjdGlvbi9Db25uZWN0aW9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb25Hcm91cC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uUG9vbC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL1JlY2VpdmVyUGVlckNvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29ubmVjdGlvbi9TZW5kZXJQZWVyQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db250ZW50L0Jhc2VEYXRhU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvQmFzZUxvY2FsTWVkaWFTdHJlYW0udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9CYXNlTWVkaWFTdHJlYW0udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9CYXNlU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvQ29udGVudE1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9LZXlWYWx1ZURhdGFiYXNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvS2V5VmFsdWVEYXRhYmFzZVRhYmxlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9Mb2NhbE1lZGlhU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvT2JqZWN0U3RvcmUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9PdXRnb2luZ01lZGlhU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvUHViU3ViVG9waWMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9SZW1vdGVNZWRpYVN0cmVhbS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9EZXRlY3Rpb24vRGV0ZWN0aW9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Ob2RlL0FnZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvQXV0aEFnZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvQXV0aFVzZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9Mb2NhbEFnZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvTG9jYWxVc2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvTm9kZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Ob2RlL05vZGVNYW5hZ2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvUmVtb3RlQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9SZW1vdGVVc2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvVXNlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9PcmNoZXN0cmF0b3IvT3JjaGVzdHJhdG9yLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1JlbWVkaWF0aW9uL0hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvUmVtZWRpYXRpb24vUmVtZWRpYXRpb25NYW5hZ2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1NESy9TREsudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3RhdHMvSGVscGVycy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9TdGF0cy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9TdGF0c0RhdGFDaGFubmVsLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N0YXRzL1N0YXRzTWFuYWdlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9TdGF0c05vZGUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3RhdHMvU3RhdHNTdHJlYW0udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3RhdHMvU3RhdHNUcmFjay50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9TdGF0c1RyYWNrQXVkaW8udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3RhdHMvU3RhdHNUcmFja1ZpZGVvLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N1YnNjcmlwdGlvbi9IZWxwZXJzLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N1YnNjcmlwdGlvbi9JbmNvbWluZ1N1YnNjcmlwdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdWJzY3JpcHRpb24vSW5jb21pbmdTdWJzY3JpcHRpb25NYW5hZ2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N1YnNjcmlwdGlvbi9PdXRnb2luZ1N1YnNjcmlwdGlvbk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1hcHMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvblJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL1N5c3RlbVRvcGljLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N1YnNjcmlwdGlvbi9Ub3BpYy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3B1YmxpYy9lcnJvcnMvU0RLQ2xpZW50RXJyb3IudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9wdWJsaWMvbW9kZWxzL0NvbnRlbnQvS2V5VmFsdWVEYXRhYmFzZUxheW91dEJ1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9wdWJsaWMvbW9kZWxzL0NvbnRlbnQvS2V5VmFsdWVEYXRhYmFzZVF1ZXJ5QnVpbGRlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3NlcnZpY2VzL0F1dGgvRmlyZWJhc2VBdXRoU2VydmljZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3NlcnZpY2VzL0Rpc2NvdmVyeS9GaXJlYmFzZVJEQkRpc2NvdmVyeVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9zZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9zZXJ2aWNlcy9HcmFwaC9HcmFwaFNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9zZXJ2aWNlcy9NZXNzYWdlQnVmZmVyL01lc3NhZ2VCdWZmZXJTZXJ2aWNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvc2VydmljZXMvVHJhbnNhY3Rpb24vRmlyZWJhc2VSREJUcmFuc2FjdGlvblNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9JbnRlcnZhbC9JbnRlcnZhbC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0xvZ2dlci9IZWxwZXJzLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvTG9nZ2VyL0xvZ2dlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL09iamVjdFN0b3JlL0hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9PYnNlcnZlci9PYnNlcnZlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL1F1ZXVlL1ByaW9yaXR5UmV0cnlRdWV1ZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL1F1ZXVlL1F1ZXVlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvUXVldWUvUmV0cnlRdWV1ZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL1F1ZXVlL1ZlcnNpb25lZFJldHJ5UXVldWUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9TdXBwb3J0L1N1cHBvcnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcIkBhd3MtYW1wbGlmeS9hcGlcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiQGF3cy1hbXBsaWZ5L2NvcmVcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiQGNyZXdkbGUvbWlzdC1jb25uZWN0b3ItaW5kZXhlZC1kYlwiIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJAY3Jld2RsZS9taXN0LWNvbm5lY3Rvci1vcGZzXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcIkBjcmV3ZGxlL21pc3QtY29ubmVjdG9yLXdlYnJ0Yy1icm93c2VyXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcIkBjcmV3ZGxlL3dlYi1zZGstdHlwZXNcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiYXdzLWFtcGxpZnlcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiYXdzLWFtcGxpZnkvdXRpbHNcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiZmlyZWJhc2UvYXBwXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcImZpcmViYXNlL2F1dGhcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiZmlyZWJhc2UvZGF0YWJhc2VcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcImZpcmViYXNlL2Z1bmN0aW9uc1wiIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJ1dWlkXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwiZXhwb3J0IGNvbnN0IENPTk5FQ1RJT05fTUlOID0gMztcbmV4cG9ydCBjb25zdCBDT05ORUNUSU9OX01BWCA9IDQgKiBDT05ORUNUSU9OX01JTjtcbmV4cG9ydCBjb25zdCBDT05ORUNUSU9OX0dST1VQX1JFVFJZX0RFTEFZID0gMTAwO1xuIiwiZXhwb3J0IGNvbnN0IENPTlRFTlRfRlBTID0gMjQ7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9NQVhfV0lEVEggPSAxMjgwO1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfTUFYX0hFSUdIVCA9IDcyMDtcbmV4cG9ydCBjb25zdCBDT05URU5UX0JQUCA9IDAuMTI7IC8vIGJpdHMgcGVyIHBpeGVsXG5leHBvcnQgY29uc3QgQ09OVEVOVF9VUERBVEVfREVCT1VOQ0UgPSA1MDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUgPSAyNTQgKiAxMDI0OyAvLyAyNTRLQlxuZXhwb3J0IGNvbnN0IENPTlRFTlRfRklMRV9IRUFERVJfU0laRSA9IDQ7IC8vIDQgYnl0ZXNcbmV4cG9ydCBjb25zdCBDT05URU5UX1BVQlNVQl9UT1BJQ19TVEFUU19ERUJPVU5DRSA9IDUwMDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfTEFTVF9UUkFOU0FDVElPTl9PQkpFQ1RfTkFNRSA9ICcuY3Jld2RsZS1sYXN0LXRyYW5zYWN0aW9uJztcbmV4cG9ydCBjb25zdCBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiA9ICcuY3Jld2RsZS1wZW5kaW5nJztcbmV4cG9ydCBjb25zdCBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX1JFVFJZX0RFTEFZID0gNjAgKiAxMDAwOyAvLyAxIG1pbnV0ZVxuZXhwb3J0IGNvbnN0IENPTlRFTlRfT0JKRUNUX1NUT1JFX1NUQVRTX0RFQk9VTkNFID0gNTAwMDtcbmV4cG9ydCBjb25zdCBDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9UUkFOU0FDVElPTl9UQUJMRV9OQU1FID0gJy5jcmV3ZGxlLXRyYW5zYWN0aW9ucyc7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfTEFZT1VUX1RBQkxFX05BTUUgPSAnLmNyZXdkbGUtbGF5b3V0JztcbmV4cG9ydCBjb25zdCBDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9TWU5DX1RJTUVPVVQgPSAzMCAqIDEwMDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfU1RBVFNfREVCT1VOQ0UgPSA1MDAwO1xuIiwiZXhwb3J0IGNvbnN0IERFVEVDVElPTl9JU1NVRV9USU1FT1VUID0gMzAwMDA7XG4iLCJpbXBvcnQgeyBDT05URU5UX0JQUCB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IElzc3VlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvRGV0ZWN0aW9uL0RldGVjdGlvbic7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX0lTU1VFX1NUX1RIUkVTSE9MRCA9IDI1MCAvIDEwMDtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fSVNTVUVfRFRfVEhSRVNIT0xEID0gNTAgLyAxMDA7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX0lTU1VFX0JJVFJBVEVfVEhSRVNIT0xEID0gMjUgLyAxMDA7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX0lTU1VFX0pJVFRFUl9USFJFU0hPTEQgPSAwLjY7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX0lTU1VFX1JUVF9USFJFU0hPTEQgPSBJbmZpbml0eTtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fSVNTVUVfQVZfREVMQVlfVEhSRVNIT0xEID0gMzAwO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9JU1NVRV9UUEZfVEhSRVNIT0xEID0gNzUgLyAxMDA7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX0lTU1VFX0ZQU19USFJFU0hPTEQgPSAxMDtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fQ09SRV9JU1NVRV9SVUxFUyA9IFtcbiAgICB7XG4gICAgICAgIHR5cGU6IElzc3VlVHlwZS5TVFZvbGF0aWxpdHksXG4gICAgICAgIHJlcG9ydE1ldHJpYzogKHJlcG9ydCkgPT4gcmVwb3J0LlNUVm9sYXRpbGl0eSxcbiAgICAgICAgbWF4VGhyZXNob2xkOiBERVRFQ1RJT05fSVNTVUVfU1RfVEhSRVNIT0xELFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuRFRWb2xhdGlsaXR5LFxuICAgICAgICByZXBvcnRNZXRyaWM6IChyZXBvcnQpID0+IHJlcG9ydC5EVFZvbGF0aWxpdHksXG4gICAgICAgIG1heFRocmVzaG9sZDogREVURUNUSU9OX0lTU1VFX0RUX1RIUkVTSE9MRCxcbiAgICB9LFxuXTtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fVklERU9fSVNTVUVfUlVMRVMgPSBbXG4gICAge1xuICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuVGltZVBlckZyYW1lLFxuICAgICAgICByZXBvcnRNZXRyaWM6IChyZXBvcnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVQZXJGcmFtZUxpbWl0ID0gKDEwMDAgLyByZXBvcnQuRlBTKTtcbiAgICAgICAgICAgIHJldHVybiByZXBvcnQudGltZVBlckZyYW1lIC8gdGltZVBlckZyYW1lTGltaXQ7XG4gICAgICAgIH0sXG4gICAgICAgIG1heFRocmVzaG9sZDogREVURUNUSU9OX0lTU1VFX1RQRl9USFJFU0hPTEQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IElzc3VlVHlwZS5CaXRyYXRlLFxuICAgICAgICByZXBvcnRNZXRyaWM6IChyZXBvcnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEJpdHJhdGUgPSByZXBvcnQuRlBTICogcmVwb3J0LmZyYW1lV2lkdGggKiByZXBvcnQuZnJhbWVIZWlnaHQgKiBDT05URU5UX0JQUDtcbiAgICAgICAgICAgIHJldHVybiByZXBvcnQuYml0cmF0ZSAvIHRhcmdldEJpdHJhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIG1pblRocmVzaG9sZDogREVURUNUSU9OX0lTU1VFX0JJVFJBVEVfVEhSRVNIT0xELFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuSml0dGVyLFxuICAgICAgICByZXBvcnRNZXRyaWM6IChyZXBvcnQpID0+IHJlcG9ydC5qaXR0ZXIsXG4gICAgICAgIG1heFRocmVzaG9sZDogREVURUNUSU9OX0lTU1VFX0pJVFRFUl9USFJFU0hPTEQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IElzc3VlVHlwZS5GcmFtZVBlclNlY29uZCxcbiAgICAgICAgcmVwb3J0TWV0cmljOiAocmVwb3J0KSA9PiByZXBvcnQuRlBTLFxuICAgICAgICBtaW5UaHJlc2hvbGQ6IERFVEVDVElPTl9JU1NVRV9GUFNfVEhSRVNIT0xELFxuICAgIH0sXG5dO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9BVURJT19JU1NVRV9SVUxFUyA9IFtcbiAgICB7XG4gICAgICAgIHR5cGU6IElzc3VlVHlwZS5KaXR0ZXIsXG4gICAgICAgIHJlcG9ydE1ldHJpYzogKHJlcG9ydCkgPT4gcmVwb3J0LmppdHRlcixcbiAgICAgICAgbWF4VGhyZXNob2xkOiBERVRFQ1RJT05fSVNTVUVfSklUVEVSX1RIUkVTSE9MRCxcbiAgICB9LFxuXTtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fU0VOREVSX0lTU1VFX1JVTEVTID0gW1xuICAgIHtcbiAgICAgICAgdHlwZTogSXNzdWVUeXBlLlJvdW5kVHJpcFRpbWUsXG4gICAgICAgIHJlcG9ydE1ldHJpYzogKHJlcG9ydCkgPT4gcmVwb3J0LnJvdW5kVHJpcFRpbWUsXG4gICAgICAgIG1heFRocmVzaG9sZDogREVURUNUSU9OX0lTU1VFX1JUVF9USFJFU0hPTEQsXG4gICAgfSxcbl07XG5leHBvcnQgY29uc3QgREVURUNUSU9OX1JFQ0VJVkVSX0lTU1VFX1JVTEVTID0gW1xuICAgIHtcbiAgICAgICAgdHlwZTogSXNzdWVUeXBlLkF1ZGlvVmlkZW9EZWxheSxcbiAgICAgICAgcmVwb3J0TWV0cmljOiAocmVwb3J0KSA9PiByZXBvcnQuQXVkaW9WaWRlb0RlbGF5LFxuICAgICAgICBtYXhUaHJlc2hvbGQ6IERFVEVDVElPTl9JU1NVRV9BVl9ERUxBWV9USFJFU0hPTEQsXG4gICAgfSxcbl07XG4iLCJpbXBvcnQgeyBJc3N1ZVR5cGUsIFByb2JsZW1UeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9EZXRlY3Rpb24vRGV0ZWN0aW9uJztcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9TVF9USFJFU0hPTEQgPSA1O1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9QUk9CTEVNX0RUX1RIUkVTSE9MRCA9IDU7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX1BST0JMRU1fVFBGX1RIUkVTSE9MRCA9IDM7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX1BST0JMRU1fQVZfREVMQVlfVEhSRVNIT0xEID0gMjtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9GUFNfVEhSRVNIT0xEID0gMztcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9CSVRSQVRFX1RIUkVTSE9MRCA9IDM7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX1BST0JMRU1fSklUVEVSX1RIUkVTSE9MRCA9IDM7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX1BST0JMRU1fUlRUX1RIUkVTSE9MRCA9IDM7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX1BST0JMRU1fUlVMRVMgPSBbXG4gICAge1xuICAgICAgICB0eXBlOiBQcm9ibGVtVHlwZS5DUFVDeWNsZSxcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLlNUVm9sYXRpbGl0eSxcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IERFVEVDVElPTl9QUk9CTEVNX1NUX1RIUkVTSE9MRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLkRUVm9sYXRpbGl0eSxcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IERFVEVDVElPTl9QUk9CTEVNX0RUX1RIUkVTSE9MRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IFByb2JsZW1UeXBlLlRpbWVQZXJGcmFtZSxcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLlRpbWVQZXJGcmFtZSxcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IERFVEVDVElPTl9QUk9CTEVNX1RQRl9USFJFU0hPTEQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiBQcm9ibGVtVHlwZS5BdWRpb1ZpZGVvRGVsYXksXG4gICAgICAgIGlzc3VlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IElzc3VlVHlwZS5BdWRpb1ZpZGVvRGVsYXksXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiBERVRFQ1RJT05fUFJPQkxFTV9BVl9ERUxBWV9USFJFU0hPTEQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiBQcm9ibGVtVHlwZS5GcmFtZVBlclNlY29uZCxcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLkZyYW1lUGVyU2Vjb25kLFxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogREVURUNUSU9OX1BST0JMRU1fRlBTX1RIUkVTSE9MRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IFByb2JsZW1UeXBlLkJpdHJhdGUsXG4gICAgICAgIGlzc3VlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IElzc3VlVHlwZS5CaXRyYXRlLFxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogREVURUNUSU9OX1BST0JMRU1fQklUUkFURV9USFJFU0hPTEQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiBQcm9ibGVtVHlwZS5KaXR0ZXIsXG4gICAgICAgIGlzc3VlczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IElzc3VlVHlwZS5KaXR0ZXIsXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiBERVRFQ1RJT05fUFJPQkxFTV9KSVRURVJfVEhSRVNIT0xELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogUHJvYmxlbVR5cGUuUm91bmRUcmlwVGltZSxcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLlJvdW5kVHJpcFRpbWUsXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiBERVRFQ1RJT05fUFJPQkxFTV9SVFRfVEhSRVNIT0xELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuXTtcbiIsImV4cG9ydCBjb25zdCBJTlRFUlZBTF9USU1FID0gMTAwO1xuIiwiZXhwb3J0IGNvbnN0IE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUUgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUVfTUFYID0gMTAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUVfTElNSVQgPSBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FX01BWCAtIE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUU7XG5leHBvcnQgY29uc3QgTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FID0gMTAwMDtcbmV4cG9ydCBjb25zdCBOT0RFX1BST0NFU1NfUkFOS19ERUJPVUNFX1RJTUVfTUFYID0gMTAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRV9MSU1JVCA9IE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRV9NQVggLSBOT0RFX1BST0NFU1NfUkFOS19ERUJPVUNFX1RJTUU7XG5leHBvcnQgY29uc3QgTk9ERV9ESVNUQU5DRV9IT1AgPSAxO1xuLy8gVE9ETyAtIFJldmlldyB0aGlzIHZhbHVlXG5leHBvcnQgY29uc3QgTk9ERV9ESVNUQU5DRV9SRVNPTFVUSU9OID0gMDtcbmV4cG9ydCBjb25zdCBOT0RFX0RJU1RBTkNFX1RSQUNLUyA9IDEwO1xuZXhwb3J0IGNvbnN0IE5PREVfRElTVEFOQ0VfTUFYID0gMTA7XG5leHBvcnQgY29uc3QgTk9ERV9DTEVBTl9SRU1PVEVfTk9ERVNfSU5URVJWQUwgPSA2MCAqIDEwMDA7XG5leHBvcnQgY29uc3QgTk9ERV9DTEVBTl9SRU1PVEVfTk9ERVNfVEhSRVNIT0xEID0gNSAqIDYwICogMTAwMDtcbmV4cG9ydCBjb25zdCBOT0RFX0FHRU5UX0NBUEFDSVRZX1JFUE9SVF9JTlRFUlZBTCA9IDUgKiA2MCAqIDEwMDA7XG4iLCJleHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9QSU5HID0gJzAnO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUE9ORyA9ICcxJztcbmV4cG9ydCBjb25zdCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX0lOVEVSVkFMID0gMzAwMDtcbmV4cG9ydCBjb25zdCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1RIUkVTSE9MRCA9IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfSU5URVJWQUwgKiA1O1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9SRUNPTk5FQ1RfVElNRU9VVCA9IDMwMDAwO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9USU1FT1VUID0gMzAwMDA7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9USU1FT1VUID0gNjAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9NRVNTQUdFX1JFVFJZID0gNTAwMDtcbmV4cG9ydCBjb25zdCBQRUVSX0NPTk5FQ1RJT05fSEFORFNIQUtFX0RFQk9VTkNFID0gNTAwO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9DSFVOS19JREVOVElGSUVSID0gJ2NodW5rJztcbmV4cG9ydCBjb25zdCBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSA9IDI1NSAqIDEwMjQ7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9USFJFU0hPTEQgPSA2NCAqIDEwMjQ7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX0RBVEFDSEFOTkVMX1JFVFJZX0RFTEFZID0gMTAwO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9ESVNDT05ORUNUX0hBTkRMRVJfREVMQVkgPSAyNTA7XG4iLCJleHBvcnQgY29uc3QgUkVNRURJQVRJT05fRE9XTkdSQURFX1dBSVRfVElNRSA9IDUwMDA7XG5leHBvcnQgY29uc3QgUkVNRURJQVRJT05fVVBHUkFERV9XQUlUX1RJTUUgPSAxNTAwMDtcbmV4cG9ydCBjb25zdCBSRU1FRElBVElPTl9NSU5fRlBTID0gMTU7XG5leHBvcnQgY29uc3QgUkVNRURJQVRJT05fTUFYX1JFU09MVVRJT05fU0NBTEUgPSA0O1xuZXhwb3J0IGNvbnN0IFJFTUVESUFUSU9OX01JTl9CSVRSQVRFID0gNTAwMDA7XG5leHBvcnQgY29uc3QgUkVNRURJQVRJT05fUkVTT0xVVElPTl9TQ0FMRSA9IDAuNTtcbmV4cG9ydCBjb25zdCBSRU1FRElBVElPTl9GUFMgPSAzO1xuZXhwb3J0IGNvbnN0IFJFTUVESUFUSU9OX0JJVFJBVEUgPSAwLjI1O1xuIiwiaW1wb3J0IHsgUHJvYmxlbVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0RldGVjdGlvbi9EZXRlY3Rpb24nO1xuaW1wb3J0IHsgUmVtZWRpYXRpb25Db21wb25lbnQsIFJlbWVkaWF0aW9uQWN0aW9uLCBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9SZW1lZGlhdGlvbi9SZW1lZGlhdGlvbic7XG5leHBvcnQgY29uc3QgUkVNRURJQVRJT05fUlVMRVMgPSBbXG4gICAge1xuICAgICAgICBwcm9ibGVtVHlwZTogUHJvYmxlbVR5cGUuQ1BVQ3ljbGUsXG4gICAgICAgIHJlbWVkaWF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBSZW1lZGlhdGlvbkNvbXBvbmVudC5SZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbW90ZVJlbWVkaWF0aW9uLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogUmVtZWRpYXRpb25Db21wb25lbnQuUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHByb2JsZW1UeXBlOiBQcm9ibGVtVHlwZS5UaW1lUGVyRnJhbWUsXG4gICAgICAgIHJlbWVkaWF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBSZW1lZGlhdGlvbkNvbXBvbmVudC5SZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcHJvYmxlbVR5cGU6IFByb2JsZW1UeXBlLkF1ZGlvVmlkZW9EZWxheSxcbiAgICAgICAgcmVtZWRpYXRpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbixcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IFJlbWVkaWF0aW9uQ29tcG9uZW50LlJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICBwcm9ibGVtVHlwZTogUHJvYmxlbVR5cGUuRnJhbWVQZXJTZWNvbmQsXG4gICAgICAgIHJlbWVkaWF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBSZW1lZGlhdGlvbkNvbXBvbmVudC5SZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcHJvYmxlbVR5cGU6IFByb2JsZW1UeXBlLkJpdHJhdGUsXG4gICAgICAgIHJlbWVkaWF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBSZW1lZGlhdGlvbkNvbXBvbmVudC5CaXRyYXRlLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcHJvYmxlbVR5cGU6IFByb2JsZW1UeXBlLkppdHRlcixcbiAgICAgICAgcmVtZWRpYXRpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbixcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IFJlbWVkaWF0aW9uQ29tcG9uZW50LkJpdHJhdGUsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICBwcm9ibGVtVHlwZTogUHJvYmxlbVR5cGUuUm91bmRUcmlwVGltZSxcbiAgICAgICAgcmVtZWRpYXRpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbixcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IFJlbWVkaWF0aW9uQ29tcG9uZW50LkJpdHJhdGUsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG5dO1xuIiwiZXhwb3J0IGNvbnN0IE1FU1NBR0VfQlVGRkVSX1JFVEVOVElPTl9USU1FID0gMjAgKiA2MCAqIDEwMDA7XG5leHBvcnQgY29uc3QgTUVTU0FHRV9CVUZGRVJfQ0xFQU5VUF9JTlRFUlZBTCA9IDIgKiA2MCAqIDEwMDA7XG4iLCJleHBvcnQgY29uc3QgU1RBVFNfQ09MTEVDVF9ERUxBWSA9IDEwMDA7XG5leHBvcnQgY29uc3QgU1RBVFNfUkVQT1JUX0RFTEFZID0gMzAwMDA7XG5leHBvcnQgY29uc3QgU1RBVFNfT1VUQk9VTkQgPSAnb3V0Ym91bmQtcnRwJztcbmV4cG9ydCBjb25zdCBTVEFUU19SRU1PVEVfSU5CT1VORCA9ICdyZW1vdGUtaW5ib3VuZC1ydHAnO1xuZXhwb3J0IGNvbnN0IFNUQVRTX0lOQk9VTkQgPSAnaW5ib3VuZC1ydHAnO1xuZXhwb3J0IGNvbnN0IFNUQVRTX1NFTkRFUl9GSUxURVJTID0gW1xuICAgIFNUQVRTX09VVEJPVU5ELFxuICAgIFNUQVRTX1JFTU9URV9JTkJPVU5ELFxuXTtcbmV4cG9ydCBjb25zdCBTVEFUU19SRUNFSVZFUl9GSUxURVJTID0gW1xuICAgIFNUQVRTX0lOQk9VTkQsXG5dO1xuIiwiZXhwb3J0IGNvbnN0IFNVQlNDUklQVElPTl9SRVFVRVNUX1RJTUVPVVQgPSAyMDAwO1xuZXhwb3J0IGNvbnN0IFNVQlNDUklQVElPTl9NQVhfUkVUUllfQ09VTlQgPSAxMDtcbmV4cG9ydCBjb25zdCBTVUJTQ1JJUFRJT05fTUFYX09VVEdPSU5HID0gMTtcbmV4cG9ydCBjb25zdCBTVUJTQ1JJUFRJT05fUkVUUllfREVMQVkgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IFNVQlNDUklQVElPTl9SRVFVRVNUX1JFVFJZX0RFTEFZID0gMTAwO1xuIiwiZXhwb3J0IGNvbnN0IFNZU1RFTV9UT1BJQyA9IDA7XG5leHBvcnQgY29uc3QgU1lTVEVNX1RPUElDX0lOVEVSTkFMID0gJ2ludGVybmFsJztcbiIsImxldCBlbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2Vudmlyb25tZW50cy9lbnZpcm9ubWVudC5kZWZhdWx0JykuRW52aXJvbm1lbnQ7XG5zd2l0Y2ggKHByb2Nlc3MuZW52LkNSRVdETEVfRU5WKSB7XG4gICAgY2FzZSAncHJkJzpcbiAgICAgICAgZW52aXJvbm1lbnQgPSBtZXJnZURlZXAoZW52aXJvbm1lbnQsIHJlcXVpcmUoJ2Vudmlyb25tZW50cy9lbnZpcm9ubWVudC5wcmQnKS5FbnZpcm9ubWVudCk7XG4gICAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3N0Zyc6XG4gICAgICAgIGVudmlyb25tZW50ID0gbWVyZ2VEZWVwKGVudmlyb25tZW50LCByZXF1aXJlKCdlbnZpcm9ubWVudHMvZW52aXJvbm1lbnQuc3RnJykuRW52aXJvbm1lbnQpO1xuICAgICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgICBlbnZpcm9ubWVudCA9IG1lcmdlRGVlcChlbnZpcm9ubWVudCwgcmVxdWlyZSgnZW52aXJvbm1lbnRzL2Vudmlyb25tZW50LmRldicpLkVudmlyb25tZW50KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW0pID8gdHJ1ZSA6IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVlcCh0YXJnZXQsIC4uLnNvdXJjZXMpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc291cmNlcykgfHwgc291cmNlcy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgY29uc3Qgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuICAgIGlmIChpc09iamVjdCh0YXJnZXQpICYmIGlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoaXNPYmplY3Qoc291cmNlW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRba2V5XSlcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHsgW2tleV06IHt9IH0pO1xuICAgICAgICAgICAgICAgIG1lcmdlRGVlcCh0YXJnZXRba2V5XSwgc291cmNlW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHsgW2tleV06IHNvdXJjZVtrZXldIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtZXJnZURlZXAodGFyZ2V0LCAuLi5zb3VyY2VzKTtcbn1cbmV4cG9ydCBjb25zdCBFbnZpcm9ubWVudCA9IGVudmlyb25tZW50O1xuIiwiZXhwb3J0IGNvbnN0IEVudmlyb25tZW50ID0ge1xuICAgIHZlcnNpb246ICcwLjEuMCcsXG4gICAgaXNQcm9kdWN0aW9uOiBmYWxzZSxcbiAgICBmaXJlYmFzZUNvbmZpZzoge1xuICAgICAgICBhcGlLZXk6IFwiQUl6YVN5REhEZ21BNTc0TlZlTVdWOVNwVy1xNFFRTWprQU51dWVnXCIsXG4gICAgICAgIGF1dGhEb21haW46IFwiY3Jld2RsZS1zZGstc3RnLmZpcmViYXNlYXBwLmNvbVwiLFxuICAgICAgICBkYXRhYmFzZVVSTDogXCJodHRwczovL2NyZXdkbGUtc2RrLXN0Zy1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb21cIixcbiAgICAgICAgcHJvamVjdElkOiBcImNyZXdkbGUtc2RrLXN0Z1wiLFxuICAgICAgICBzdG9yYWdlQnVja2V0OiBcImNyZXdkbGUtc2RrLXN0Zy5hcHBzcG90LmNvbVwiLFxuICAgICAgICBhcHBJZDogXCIxOjUxOTQxNTcwMjc5MTp3ZWI6NWRkMzkwNDJmODgxY2ZkZTMyNTFhMlwiLFxuICAgICAgICBmdW5jdGlvbnNSZWdpb246ICdub3J0aGFtZXJpY2Etbm9ydGhlYXN0MScsXG4gICAgfSxcbiAgICBhd3M6IHtcbiAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzNuYWJoanlhYWJkYWRucGN6c2dyeWU2dXB1LmFwcHN5bmMtYXBpLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tL2dyYXBocWwnLFxuICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxuICAgIH0sXG59O1xuIiwiZXhwb3J0IGNvbnN0IEVudmlyb25tZW50ID0ge307XG4iLCJleHBvcnQgY29uc3QgRW52aXJvbm1lbnQgPSB7XG4gICAgaXNQcm9kdWN0aW9uOiB0cnVlLFxuICAgIGZpcmViYXNlQ29uZmlnOiB7XG4gICAgICAgIGFwaUtleTogXCJBSXphU3lDWTZUNDlEODFRcG9aX0FwWjZhdHBUNGMzWXkwX2xXdmdcIixcbiAgICAgICAgYXV0aERvbWFpbjogXCJjcmV3ZGxlLXNkay5maXJlYmFzZWFwcC5jb21cIixcbiAgICAgICAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9jcmV3ZGxlLXNkay1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb21cIixcbiAgICAgICAgcHJvamVjdElkOiBcImNyZXdkbGUtc2RrXCIsXG4gICAgICAgIHN0b3JhZ2VCdWNrZXQ6IFwiY3Jld2RsZS1zZGsuYXBwc3BvdC5jb21cIixcbiAgICAgICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiNDIwMjM1MTgxMDgzXCIsXG4gICAgICAgIGFwcElkOiBcIjE6NDIwMjM1MTgxMDgzOndlYjo0ZWZmNjA2MmJkODQ1Y2IwNzQ4Y2JlXCIsXG4gICAgICAgIG1lYXN1cmVtZW50SWQ6IFwiRy1GN1c4S1hSS1FCXCJcbiAgICB9LFxuICAgIGF3czoge1xuICAgICAgICBlbmRwb2ludDogJ2h0dHBzOi8vZTdpZjI3dW1wemYyZmY0azYzd2d6bzRwcmkuYXBwc3luYy1hcGkudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vZ3JhcGhxbCcsXG4gICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXG4gICAgfSxcbn07XG4iLCJleHBvcnQgY29uc3QgRW52aXJvbm1lbnQgPSB7fTtcbiIsIi8qKlxuICogRXJyb3IgdGhyb3duIHRvIGFsbG93IGVhcmx5IHJldHVybiBmcm9tIGEgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBFYXJseVJldHVybkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGVycm9yKSB7XG4gICAgICAgIHN1cGVyKGBFYXJseSByZXR1cm46ICR7ZXJyb3J9YCk7XG4gICAgfVxufVxuIiwidmFyIFNES0ludGVybmFsRXJyb3JDb2RlcztcbihmdW5jdGlvbiAoU0RLSW50ZXJuYWxFcnJvckNvZGVzKSB7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkXCJdID0gXCJjb25uZWN0aW9uLW5vdC1pbml0aWFsaXplZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkNvbm5lY3Rpb25Ob3RDb25uZWN0ZWRcIl0gPSBcImNvbm5lY3Rpb24tbm90LWNvbm5lY3RlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkNvbm5lY3Rpb25Ob1JldHJ5UXVldWVcIl0gPSBcImNvbm5lY3Rpb24tbm8tcmV0cnktcXVldWVcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJDb25uZWN0aW9uSW52YWxpZERhdGFFdmVudFwiXSA9IFwiY29ubmVjdGlvbi1pbnZhbGlkLWRhdGEtZXZlbnRcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJPYmplY3RTdG9yZUNhbm5vdFdyaXRlVHJhbnNhY3Rpb25cIl0gPSBcIm9iamVjdC1zdG9yZS1jYW5ub3Qtd3JpdGUtdHJhbnNhY3Rpb25cIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJPYmplY3RTdG9yZUludmFsaWRTeW5jTWVzc2FnZVwiXSA9IFwib2JqZWN0LXN0b3JlLWludmFsaWQtc3luYy1tZXNzYWdlXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVOb3RTeW5jZWRcIl0gPSBcIm9iamVjdC1zdG9yZS1ub3Qtc3luY2VkXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSW52YWxpZERhdGFDaGFubmVsXCJdID0gXCJpbnZhbGlkLWRhdGEtY2hhbmVsXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSW52YWxpZFB1Ymxpc2hlclwiXSA9IFwiaW52YWxpZC1wdWJsaXNoZXJcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJJbnZhbGlkU3Vic2NyaWJlclwiXSA9IFwiaW52YWxpZC1zdWJzY3JpYmVyXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSW52YWxpZFN1YnNjcmlwdGlvblwiXSA9IFwiaW52YWxpZC1zdWJzY3JpcHRpb25cIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlQ3JlYXRpb25GYWlsZWRcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS1jcmVhdGlvbi1mYWlsZWRcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlVGFibGVEb2VzTm90RXhpc3RcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS10YWJsZS1kb2VzLW5vdC1leGlzdFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VUcmFuc2FjdGlvblRhYmxlTm90SW5pdGlhbGl6ZWRcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS10cmFuc2FjdGlvbi10YWJsZS1ub3QtaW5pdGlhbGl6ZWRcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25WYWx1ZU5vdFNldFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLXRyYW5zYWN0aW9uLXZhbHVlLW5vdC1zZXRcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJMb2NhbE1lZGlhU3RyZWFtRG9lc05vdEV4aXN0XCJdID0gXCJsb2NhbC1zdHJlYW0tZG9lcy1ub3QtZXhpc3RcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJNaXNzaW5nUmVtb3RlQ29ubmVjdGlvblwiXSA9IFwibWlzc2luZy1pbmNvbWluZy1jb25uZWN0aW9uXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiTWlzc2luZ1N5c3RlbVRvcGljXCJdID0gXCJtaXNzaW5nLXN5c3RlbS10b3BpY1wiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIk91dGdvaW5nTWVkaWFTdHJlYW1Ob1RvcGljXCJdID0gXCJvdXRnb2luZy1zdHJlYW0tbm8tdG9waWNcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJSZW1vdGVNZWRpYVN0cmVhbURvZXNOb3RFeGlzdFwiXSA9IFwicmVtb3RlLXN0cmVhbS1kb2VzLW5vdC1leGlzdFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIlJlbW90ZU1lZGlhU3RyZWFtTWlzc2luZ1Byb3ZpZGVySWRcIl0gPSBcInJlbW90ZS1zdHJlYW0tbWlzc2luZy1wcm92aWRlci1pZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIlJlbW90ZUNvbm5lY3Rpb25FeGlzdHNcIl0gPSBcInJlbW90ZS1jb25uZWN0aW9uLWV4aXN0c1wiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIlN1YnNjcmlwdGlvblJlcXVlc3REb2VzTm90RXhpc3RcIl0gPSBcInN1YnNjcmlwdGlvbi1yZXF1ZXN0LWRvZXMtbm90LWV4aXN0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiU3Vic2NyaXB0aW9uUmVxdWVzdEZhaWxlZFwiXSA9IFwic3Vic2NyaXB0aW9uLXJlcXVlc3QtZmFpbGVkXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiU3Vic2NyaXB0aW9uUmVxdWVzdE5vQW5zd2VyXCJdID0gXCJzdWJzY3JpcHRpb24tcmVxdWVzdC1uby1hbnN3ZXJcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJOb2RlRG9lc05vdEV4aXN0XCJdID0gXCJub2RlLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiTm9kZUFscmVhZHlFeGlzdFwiXSA9IFwibm9kZS1hbHJlYWR5LWV4aXN0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiUGVlckNvbm5lY3Rpb25JbnZhbGlkRGVzdGluYXRpb25cIl0gPSBcInBlZXItY29ubmVjdGlvbi1pbnZhbGlkLWRlc3RpbmF0aW9uXCI7XG59KShTREtJbnRlcm5hbEVycm9yQ29kZXMgfHwgKFNES0ludGVybmFsRXJyb3JDb2RlcyA9IHt9KSk7XG5jb25zdCBtZXNzYWdlcyA9IG5ldyBNYXAoW1xuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkLCAnQ29ubmVjdGlvbiBub3QgaW5pdGlhbGl6ZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Db25uZWN0aW9uTm90Q29ubmVjdGVkLCAnQ29ubmVjdGlvbiBub3QgY29ubmVjdGVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuQ29ubmVjdGlvbk5vUmV0cnlRdWV1ZSwgJ0Nvbm5lY3Rpb24gZG9lcyBub3QgaGF2ZSBhIHJldHJ5IHF1ZXVlLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuQ29ubmVjdGlvbkludmFsaWREYXRhRXZlbnQsICdJbnZhbGlkIGRhdGEgZXZlbnQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5PYmplY3RTdG9yZUNhbm5vdFdyaXRlVHJhbnNhY3Rpb24sICdDYW5ub3Qgd3JpdGUgdHJhbnNhY3Rpb24uJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5PYmplY3RTdG9yZUludmFsaWRTeW5jTWVzc2FnZSwgJ0ludmFsaWQgb2JqZWN0IHN0b3JlIHN5bmMgbWVzc2FnZS4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLk9iamVjdFN0b3JlTm90U3luY2VkLCAnT2JqZWN0IHN0b3JlIG5vdCBzeW5jZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5JbnZhbGlkRGF0YUNoYW5uZWwsICdJbnZhbGlkIGRhdGEgY2hhbl9OT19SRU5BTUVFTkFsLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuSW52YWxpZFB1Ymxpc2hlciwgJ0ludmFsaWQgcHVibGlzaGVyLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuSW52YWxpZFN1YnNjcmliZXIsICdJbnZhbGlkIHN1YnNjcmliZXIuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5JbnZhbGlkU3Vic2NyaXB0aW9uLCAnSW52YWxpZCBzdWJzY3JpcHRpb24uJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlQ3JlYXRpb25GYWlsZWQsICdLZXktdmFsdWUgZGF0YWJhc2UgY3JlYXRpb24gZmFpbGVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZVRhYmxlRG9lc05vdEV4aXN0LCAnS2V5LXZhbHVlIGRhdGFiYXNlIHRhYmxlIGRvZXMgbm90IGV4aXN0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCwgJ0tleS12YWx1ZSBkYXRhYmFzZSB0cmFuc2FjdGlvbiB0YWJsZSBub3QgaW5pdGlhbGl6ZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25WYWx1ZU5vdFNldCwgJ0tleS12YWx1ZSBkYXRhYmFzZSB0cmFuc2FjdGlvbiB2YWx1ZSBub3Qgc2V0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuTG9jYWxNZWRpYVN0cmVhbURvZXNOb3RFeGlzdCwgJ0xvY2FsIHN0cmVhbSBkb2VzIG5vdCBleGlzdC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLk1pc3NpbmdSZW1vdGVDb25uZWN0aW9uLCAnQ29ubmVjdGlvbiBkb2VzIG5vdCBleGlzdC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLk1pc3NpbmdTeXN0ZW1Ub3BpYywgJ1RoZSBzeXN0ZW0gdG9waWMgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5PdXRnb2luZ01lZGlhU3RyZWFtTm9Ub3BpYywgJ091dGdvaW5nIHN0cmVhbSBkb2VzIG5vdCBoYXZlIGEgdG9waWMuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5SZW1vdGVNZWRpYVN0cmVhbURvZXNOb3RFeGlzdCwgJ1JlbW90ZSBzdHJlYW0gZG9lcyBub3QgZXhpc3QuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5SZW1vdGVNZWRpYVN0cmVhbU1pc3NpbmdQcm92aWRlcklkLCAnUmVtb3RlIG1lZGlhIHN0cmVhbSBpcyBtaXNzaW5nIGEgcHJvdmlkZXIgaWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5SZW1vdGVDb25uZWN0aW9uRXhpc3RzLCAnUmVtb3RlIGNvbm5lY3Rpb24gYWxyZWFkeSBleGlzdHMuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0RG9lc05vdEV4aXN0LCAnU3Vic2NyaXB0aW9uIHJlcXVlc3QgZG9lcyBub3QgZXhpc3QuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0RmFpbGVkLCAnU3Vic2NyaXB0aW9uIHJlcXVlc3QgZmFpbGVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdE5vQW5zd2VyLCAnU3Vic2NyaXB0aW9uIHJlcXVlc3QgaGFzIG5vdCBiZWVuIGFuc3dlcmVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuTm9kZURvZXNOb3RFeGlzdCwgJ05vZGUgZG9lcyBub3QgZXhpc3QuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Ob2RlQWxyZWFkeUV4aXN0LCAnTm9kZSBhbHJlYWR5IGV4aXN0cy4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLlBlZXJDb25uZWN0aW9uSW52YWxpZERlc3RpbmF0aW9uLCAnSW52YWxpZCBwZWVyIGNvbm5lY3Rpb24gZXZlbnQgZGVzdGluYXRpb24uJ10sXG5dKTtcbmV4cG9ydCBjbGFzcyBTREtJbnRlcm5hbEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvZGU7XG4gICAgc3RhdGljIGNvZGVzID0gU0RLSW50ZXJuYWxFcnJvckNvZGVzO1xuICAgIGRhdGE7XG4gICAgY29uc3RydWN0b3IoY29kZSwgZGF0YSkge1xuICAgICAgICBzdXBlcihgSW50ZXJuYWwgU0RLIEVycm9yOiAke2NvZGV9OiAke21lc3NhZ2VzLmdldChjb2RlKX1cXG5BZGRpdGlvbmFsIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGEgfHwge307XG4gICAgfVxufVxuIiwiZXhwb3J0IHZhciBQZWVyQ29ubmVjdGlvblR5cGU7XG4oZnVuY3Rpb24gKFBlZXJDb25uZWN0aW9uVHlwZSkge1xuICAgIFBlZXJDb25uZWN0aW9uVHlwZVtQZWVyQ29ubmVjdGlvblR5cGVbXCJDb3JlXCJdID0gMF0gPSBcIkNvcmVcIjtcbiAgICBQZWVyQ29ubmVjdGlvblR5cGVbUGVlckNvbm5lY3Rpb25UeXBlW1wiT3B0aW1pemF0aW9uXCJdID0gMV0gPSBcIk9wdGltaXphdGlvblwiO1xufSkoUGVlckNvbm5lY3Rpb25UeXBlIHx8IChQZWVyQ29ubmVjdGlvblR5cGUgPSB7fSkpO1xuZXhwb3J0IHZhciBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlKSB7XG4gICAgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1wiT2ZmZXJcIl0gPSAwXSA9IFwiT2ZmZXJcIjtcbiAgICBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1BlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbXCJBbnN3ZXJcIl0gPSAxXSA9IFwiQW5zd2VyXCI7XG4gICAgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1wiSGFuZHNoYWtlXCJdID0gMl0gPSBcIkhhbmRzaGFrZVwiO1xuICAgIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtcIlN1Y2Nlc3NcIl0gPSAzXSA9IFwiU3VjY2Vzc1wiO1xuICAgIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtcIk5lZWRSZXN0YXJ0XCJdID0gNF0gPSBcIk5lZWRSZXN0YXJ0XCI7XG4gICAgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1wiUmVzdGFydFwiXSA9IDVdID0gXCJSZXN0YXJ0XCI7XG4gICAgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1wiRGlzY29ubmVjdFwiXSA9IDZdID0gXCJEaXNjb25uZWN0XCI7XG4gICAgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1wiU3RhdHNcIl0gPSA3XSA9IFwiU3RhdHNcIjtcbiAgICBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1BlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbXCJPcHRpbWl6YXRpb25Db25uZWN0aW9uU3VjY2Vzc1wiXSA9IDhdID0gXCJPcHRpbWl6YXRpb25Db25uZWN0aW9uU3VjY2Vzc1wiO1xufSkoUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZSB8fCAoUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIFBlZXJDb25uZWN0aW9uT3JpZ2luO1xuKGZ1bmN0aW9uIChQZWVyQ29ubmVjdGlvbk9yaWdpbikge1xuICAgIFBlZXJDb25uZWN0aW9uT3JpZ2luW1BlZXJDb25uZWN0aW9uT3JpZ2luW1wiU2VuZGVyXCJdID0gMF0gPSBcIlNlbmRlclwiO1xuICAgIFBlZXJDb25uZWN0aW9uT3JpZ2luW1BlZXJDb25uZWN0aW9uT3JpZ2luW1wiUmVjZWl2ZXJcIl0gPSAxXSA9IFwiUmVjZWl2ZXJcIjtcbn0pKFBlZXJDb25uZWN0aW9uT3JpZ2luIHx8IChQZWVyQ29ubmVjdGlvbk9yaWdpbiA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIENvbnRlbnRNZXNzYWdlVHlwZTtcbihmdW5jdGlvbiAoQ29udGVudE1lc3NhZ2VUeXBlKSB7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIlB1Ymxpc2hNZWRpYVN0cmVhbVwiXSA9IDBdID0gXCJQdWJsaXNoTWVkaWFTdHJlYW1cIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiVW5wdWJsaXNoTWVkaWFTdHJlYW1cIl0gPSAxXSA9IFwiVW5wdWJsaXNoTWVkaWFTdHJlYW1cIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiU3Vic2NyaWJlTWVkaWFTdHJlYW1cIl0gPSAyXSA9IFwiU3Vic2NyaWJlTWVkaWFTdHJlYW1cIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiVXBkYXRlTWVkaWFTdHJlYW1cIl0gPSAzXSA9IFwiVXBkYXRlTWVkaWFTdHJlYW1cIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiVW5zdWJzY3JpYmVNZWRpYVN0cmVhbVwiXSA9IDRdID0gXCJVbnN1YnNjcmliZU1lZGlhU3RyZWFtXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIkNsb3NlT2JqZWN0U3RvcmVCdWNrZXRcIl0gPSA1XSA9IFwiQ2xvc2VPYmplY3RTdG9yZUJ1Y2tldFwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJDbG9zZUtleVZhbHVlRGF0YWJhc2VcIl0gPSA2XSA9IFwiQ2xvc2VLZXlWYWx1ZURhdGFiYXNlXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIkNsb3NlUHViU3ViVG9waWNcIl0gPSA3XSA9IFwiQ2xvc2VQdWJTdWJUb3BpY1wiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJDbG9zZU1lZGlhU3RyZWFtXCJdID0gOF0gPSBcIkNsb3NlTWVkaWFTdHJlYW1cIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiTG9jYWxNZWRpYVN0cmVhbVRyYWNrRmFpbFwiXSA9IDldID0gXCJMb2NhbE1lZGlhU3RyZWFtVHJhY2tGYWlsXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIlJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsXCJdID0gMTBdID0gXCJSZW1vdGVNZWRpYVN0cmVhbVRyYWNrRmFpbFwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJSZXF1ZXN0U3luY0tleVZhbHVlRGF0YWJhc2VcIl0gPSAxMV0gPSBcIlJlcXVlc3RTeW5jS2V5VmFsdWVEYXRhYmFzZVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJTZW5kVHJhbnNhY3Rpb25zRHVtcFwiXSA9IDEyXSA9IFwiU2VuZFRyYW5zYWN0aW9uc0R1bXBcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiUmVxdWVzdFRyYW5zYWN0aW9uc1ZhbHVlXCJdID0gMTNdID0gXCJSZXF1ZXN0VHJhbnNhY3Rpb25zVmFsdWVcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiUHViU3ViVG9waWNTdGF0c1wiXSA9IDE0XSA9IFwiUHViU3ViVG9waWNTdGF0c1wiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJPYmplY3RTdG9yZVN0YXRzXCJdID0gMTVdID0gXCJPYmplY3RTdG9yZVN0YXRzXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIktleVZhbHVlRGF0YWJhc2VTdGF0c1wiXSA9IDE2XSA9IFwiS2V5VmFsdWVEYXRhYmFzZVN0YXRzXCI7XG59KShDb250ZW50TWVzc2FnZVR5cGUgfHwgKENvbnRlbnRNZXNzYWdlVHlwZSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uO1xuKGZ1bmN0aW9uIChJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbikge1xuICAgIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uW1wiRmlsZVdyaXRlXCJdID0gXCJmaWxlLXdyaXRlXCI7XG4gICAgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb25bXCJGb2xkZXJDcmVhdGVcIl0gPSBcImZvbGRlci1jcmVhdGVcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbltcIkRlbGV0ZVwiXSA9IFwiZGVsZXRlXCI7XG4gICAgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb25bXCJNb3ZlXCJdID0gXCJtb3ZlXCI7XG4gICAgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb25bXCJSZXF1ZXN0RmlsZVwiXSA9IFwicmVxdWVzdC1maWxlXCI7XG4gICAgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb25bXCJSZXF1ZXN0QWNjZXB0ZWRcIl0gPSBcInJlcXVlc3QtYWNjZXB0ZWRcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbltcIlJlcXVlc3RGaWxlU3luY1wiXSA9IFwicmVxdWVzdC1maWxlLXN5bmNcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbltcIlJlcXVlc3RGaWxlV3JpdGVcIl0gPSBcInJlcXVlc3QtZmlsZS13cml0ZVwiO1xufSkoSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24gfHwgKEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uID0ge30pKTtcbmV4cG9ydCB2YXIgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlO1xuKGZ1bmN0aW9uIChJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZFR5cGUpIHtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZFR5cGVbXCJSZXF1ZXN0XCJdID0gXCJyZXF1ZXN0XCI7XG4gICAgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlW1wiVHJhbnNhY3Rpb25cIl0gPSBcInRyYW5zYWN0aW9uXCI7XG59KShJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZFR5cGUgfHwgKEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uO1xuKGZ1bmN0aW9uIChJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbikge1xuICAgIEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uW1wiQWRkXCJdID0gXCJhZGRcIjtcbiAgICBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbltcIlVwZGF0ZVwiXSA9IFwidXBkYXRlXCI7XG4gICAgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb25bXCJEZWxldGVcIl0gPSBcImRlbGV0ZVwiO1xufSkoSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24gfHwgKEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uID0ge30pKTtcbmV4cG9ydCB2YXIgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbjtcbihmdW5jdGlvbiAoSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbikge1xuICAgIEludGVybmFsRGF0YWJhc2VUYWJsZVJlYWRBY3Rpb25bXCJHZXRcIl0gPSBcImdldFwiO1xuICAgIEludGVybmFsRGF0YWJhc2VUYWJsZVJlYWRBY3Rpb25bXCJMaXN0XCJdID0gXCJsaXN0XCI7XG4gICAgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbltcIkNvdW50XCJdID0gXCJjb3VudFwiO1xufSkoSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbiB8fCAoSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbiA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIElzc3VlVHlwZTtcbihmdW5jdGlvbiAoSXNzdWVUeXBlKSB7XG4gICAgSXNzdWVUeXBlW1wiU1RWb2xhdGlsaXR5XCJdID0gXCJzdF92b2xhdGlsaXR5XCI7XG4gICAgSXNzdWVUeXBlW1wiRFRWb2xhdGlsaXR5XCJdID0gXCJkdF92b2xhdGlsaXR5XCI7XG4gICAgSXNzdWVUeXBlW1wiVGltZVBlckZyYW1lXCJdID0gXCJ0aW1lX3Blcl9mcmFtZVwiO1xuICAgIElzc3VlVHlwZVtcIkJpdHJhdGVcIl0gPSBcImJpdHJhdGVcIjtcbiAgICBJc3N1ZVR5cGVbXCJKaXR0ZXJcIl0gPSBcImppdHRlclwiO1xuICAgIElzc3VlVHlwZVtcIkZyYW1lUGVyU2Vjb25kXCJdID0gXCJmcHNcIjtcbiAgICBJc3N1ZVR5cGVbXCJSb3VuZFRyaXBUaW1lXCJdID0gXCJydHRcIjtcbiAgICBJc3N1ZVR5cGVbXCJBdWRpb1ZpZGVvRGVsYXlcIl0gPSBcImF2X2RlbGF5XCI7XG59KShJc3N1ZVR5cGUgfHwgKElzc3VlVHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIFByb2JsZW1UeXBlO1xuKGZ1bmN0aW9uIChQcm9ibGVtVHlwZSkge1xuICAgIFByb2JsZW1UeXBlW1wiQ1BVQ3ljbGVcIl0gPSBcImNwdS5jeWNsZVwiO1xuICAgIFByb2JsZW1UeXBlW1wiVGltZVBlckZyYW1lXCJdID0gXCJjcHUudGltZV9wZXJfZnJhbWVcIjtcbiAgICBQcm9ibGVtVHlwZVtcIkF1ZGlvVmlkZW9EZWxheVwiXSA9IFwiY3B1LmF2X2RlbGF5XCI7XG4gICAgUHJvYmxlbVR5cGVbXCJGcmFtZVBlclNlY29uZFwiXSA9IFwiY3B1LmZwc1wiO1xuICAgIFByb2JsZW1UeXBlW1wiQml0cmF0ZVwiXSA9IFwiYmFuZHdpZHRoLmJpdHJhdGVcIjtcbiAgICBQcm9ibGVtVHlwZVtcIkppdHRlclwiXSA9IFwiYmFuZHdpZHRoLmppdHRlclwiO1xuICAgIFByb2JsZW1UeXBlW1wiUm91bmRUcmlwVGltZVwiXSA9IFwiYmFuZHdpZHRoLnJ0dFwiO1xufSkoUHJvYmxlbVR5cGUgfHwgKFByb2JsZW1UeXBlID0ge30pKTtcbmV4cG9ydCB2YXIgRGV0ZWN0aW9uTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKERldGVjdGlvbk1lc3NhZ2VUeXBlKSB7XG4gICAgRGV0ZWN0aW9uTWVzc2FnZVR5cGVbRGV0ZWN0aW9uTWVzc2FnZVR5cGVbXCJQcm9ibGVtXCJdID0gMF0gPSBcIlByb2JsZW1cIjtcbn0pKERldGVjdGlvbk1lc3NhZ2VUeXBlIHx8IChEZXRlY3Rpb25NZXNzYWdlVHlwZSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIE5vZGVTdGF0dXM7XG4oZnVuY3Rpb24gKE5vZGVTdGF0dXMpIHtcbiAgICBOb2RlU3RhdHVzW05vZGVTdGF0dXNbXCJPbmxpbmVcIl0gPSAwXSA9IFwiT25saW5lXCI7XG4gICAgTm9kZVN0YXR1c1tOb2RlU3RhdHVzW1wiT2ZmbGluZVwiXSA9IDFdID0gXCJPZmZsaW5lXCI7XG59KShOb2RlU3RhdHVzIHx8IChOb2RlU3RhdHVzID0ge30pKTtcbjtcbiIsImV4cG9ydCB2YXIgTm9kZU1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChOb2RlTWVzc2FnZVR5cGUpIHtcbiAgICBOb2RlTWVzc2FnZVR5cGVbTm9kZU1lc3NhZ2VUeXBlW1wiTm9kZUpvaW5cIl0gPSAwXSA9IFwiTm9kZUpvaW5cIjtcbiAgICBOb2RlTWVzc2FnZVR5cGVbTm9kZU1lc3NhZ2VUeXBlW1wiTm9kZVVwZGF0ZVwiXSA9IDFdID0gXCJOb2RlVXBkYXRlXCI7XG4gICAgTm9kZU1lc3NhZ2VUeXBlW05vZGVNZXNzYWdlVHlwZVtcIk5vZGVDb25uZWN0aW9uc1VwZGF0ZVwiXSA9IDJdID0gXCJOb2RlQ29ubmVjdGlvbnNVcGRhdGVcIjtcbiAgICBOb2RlTWVzc2FnZVR5cGVbTm9kZU1lc3NhZ2VUeXBlW1wiTm9kZUxlYXZlXCJdID0gM10gPSBcIk5vZGVMZWF2ZVwiO1xufSkoTm9kZU1lc3NhZ2VUeXBlIHx8IChOb2RlTWVzc2FnZVR5cGUgPSB7fSkpO1xuIiwiZXhwb3J0IHZhciBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlKSB7XG4gICAgUmVtZWRpYXRpb25NZXNzYWdlVHlwZVtSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlW1wiUmVtZWRpYXRpb25cIl0gPSAwXSA9IFwiUmVtZWRpYXRpb25cIjtcbiAgICBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlW1JlbWVkaWF0aW9uTWVzc2FnZVR5cGVbXCJSZW1vdGVSZW1lZGlhdGlvblwiXSA9IDFdID0gXCJSZW1vdGVSZW1lZGlhdGlvblwiO1xufSkoUmVtZWRpYXRpb25NZXNzYWdlVHlwZSB8fCAoUmVtZWRpYXRpb25NZXNzYWdlVHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIFJlbWVkaWF0aW9uQWN0aW9uO1xuKGZ1bmN0aW9uIChSZW1lZGlhdGlvbkFjdGlvbikge1xuICAgIFJlbWVkaWF0aW9uQWN0aW9uW1wiVXBncmFkZVwiXSA9IFwidXBncmFkZVwiO1xuICAgIFJlbWVkaWF0aW9uQWN0aW9uW1wiRG93bmdyYWRlXCJdID0gXCJkb3duZ3JhZGVcIjtcbn0pKFJlbWVkaWF0aW9uQWN0aW9uIHx8IChSZW1lZGlhdGlvbkFjdGlvbiA9IHt9KSk7XG5leHBvcnQgdmFyIFJlbWVkaWF0aW9uQ29tcG9uZW50O1xuKGZ1bmN0aW9uIChSZW1lZGlhdGlvbkNvbXBvbmVudCkge1xuICAgIFJlbWVkaWF0aW9uQ29tcG9uZW50W1wiUmVzb2x1dGlvblwiXSA9IFwicmVzb2x1dGlvblwiO1xuICAgIFJlbWVkaWF0aW9uQ29tcG9uZW50W1wiQml0cmF0ZVwiXSA9IFwiYml0cmF0ZVwiO1xufSkoUmVtZWRpYXRpb25Db21wb25lbnQgfHwgKFJlbWVkaWF0aW9uQ29tcG9uZW50ID0ge30pKTtcbiIsImV4cG9ydCB2YXIgSUludGVybmFsRmVhdHVyZXM7XG4oZnVuY3Rpb24gKElJbnRlcm5hbEZlYXR1cmVzKSB7XG4gICAgSUludGVybmFsRmVhdHVyZXNbXCJNZWRpYVN0cmVhbVwiXSA9IFwibWVkaWEtc3RyZWFtXCI7XG59KShJSW50ZXJuYWxGZWF0dXJlcyB8fCAoSUludGVybmFsRmVhdHVyZXMgPSB7fSkpO1xuIiwiZXhwb3J0IHZhciBTdGF0c01lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChTdGF0c01lc3NhZ2VUeXBlKSB7XG4gICAgU3RhdHNNZXNzYWdlVHlwZVtTdGF0c01lc3NhZ2VUeXBlW1wiU3RyZWFtUmVwb3J0XCJdID0gMF0gPSBcIlN0cmVhbVJlcG9ydFwiO1xuICAgIFN0YXRzTWVzc2FnZVR5cGVbU3RhdHNNZXNzYWdlVHlwZVtcIkxvY2FsUmVwb3J0XCJdID0gMV0gPSBcIkxvY2FsUmVwb3J0XCI7XG59KShTdGF0c01lc3NhZ2VUeXBlIHx8IChTdGF0c01lc3NhZ2VUeXBlID0ge30pKTtcbiIsImV4cG9ydCB2YXIgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb247XG4oZnVuY3Rpb24gKE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uKSB7XG4gICAgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bXCJBZGRcIl0gPSAwXSA9IFwiQWRkXCI7XG4gICAgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bXCJSZW1vdmVcIl0gPSAxXSA9IFwiUmVtb3ZlXCI7XG4gICAgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bXCJVcGRhdGVcIl0gPSAyXSA9IFwiVXBkYXRlXCI7XG4gICAgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bXCJSZW1vdGVBZGRcIl0gPSAzXSA9IFwiUmVtb3RlQWRkXCI7XG4gICAgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bTWVkaWFTdWJzY3JpcHRpb25BY3Rpb25bXCJSZW1vdGVSZW1vdmVcIl0gPSA0XSA9IFwiUmVtb3RlUmVtb3ZlXCI7XG59KShNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbiB8fCAoTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24gPSB7fSkpO1xuIiwiZXhwb3J0IHZhciBTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZTtcbihmdW5jdGlvbiAoU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUpIHtcbiAgICBTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZVtTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZVtcIldhaXRpbmdcIl0gPSAwXSA9IFwiV2FpdGluZ1wiO1xuICAgIFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlW1N1YnNjcmlwdGlvblJlcXVlc3RUeXBlW1wiQWNjZXB0ZWRcIl0gPSAxXSA9IFwiQWNjZXB0ZWRcIjtcbiAgICBTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZVtTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZVtcIlJlamVjdGVkXCJdID0gMl0gPSBcIlJlamVjdGVkXCI7XG59KShTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZSB8fCAoU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUgPSB7fSkpO1xuZXhwb3J0IHZhciBTdWJzY3JpcHRpb25UeXBlO1xuKGZ1bmN0aW9uIChTdWJzY3JpcHRpb25UeXBlKSB7XG4gICAgU3Vic2NyaXB0aW9uVHlwZVtcIkluY29taW5nXCJdID0gXCJpblwiO1xuICAgIFN1YnNjcmlwdGlvblR5cGVbXCJPdXRnb2luZ1wiXSA9IFwib3V0XCI7XG59KShTdWJzY3JpcHRpb25UeXBlIHx8IChTdWJzY3JpcHRpb25UeXBlID0ge30pKTtcbjtcbiIsImV4cG9ydCB2YXIgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlKSB7XG4gICAgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbXCJTdWJzY3JpYmVNZWRpYVN0cmVhbVwiXSA9IDBdID0gXCJTdWJzY3JpYmVNZWRpYVN0cmVhbVwiO1xuICAgIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1N1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1wiVXBkYXRlTWVkaWFTdHJlYW1cIl0gPSAxXSA9IFwiVXBkYXRlTWVkaWFTdHJlYW1cIjtcbiAgICBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtcIlVuc3Vic2NyaWJlTWVkaWFTdHJlYW1cIl0gPSAyXSA9IFwiVW5zdWJzY3JpYmVNZWRpYVN0cmVhbVwiO1xuICAgIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1N1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1wiTmVlZE1lZGlhU3RyZWFtXCJdID0gM10gPSBcIk5lZWRNZWRpYVN0cmVhbVwiO1xuICAgIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1N1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1wiUmVzdGFydE5lZWRNZWRpYVN0cmVhbVwiXSA9IDRdID0gXCJSZXN0YXJ0TmVlZE1lZGlhU3RyZWFtXCI7XG4gICAgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbXCJDYW5Qcm92aWRlTWVkaWFTdHJlYW1cIl0gPSA1XSA9IFwiQ2FuUHJvdmlkZU1lZGlhU3RyZWFtXCI7XG4gICAgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbXCJDYW5ub3RQcm92aWRlTWVkaWFTdHJlYW1cIl0gPSA2XSA9IFwiQ2Fubm90UHJvdmlkZU1lZGlhU3RyZWFtXCI7XG4gICAgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbXCJNZWRpYVN0cmVhbVVuYXZhaWxhYmxlXCJdID0gN10gPSBcIk1lZGlhU3RyZWFtVW5hdmFpbGFibGVcIjtcbn0pKFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlIHx8IChTdWJzY3JpcHRpb25NZXNzYWdlVHlwZSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFN5c3RlbU1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChTeXN0ZW1NZXNzYWdlVHlwZSkge1xuICAgIFN5c3RlbU1lc3NhZ2VUeXBlW1N5c3RlbU1lc3NhZ2VUeXBlW1wiUGVlckNvbm5lY3Rpb25cIl0gPSAwXSA9IFwiUGVlckNvbm5lY3Rpb25cIjtcbiAgICBTeXN0ZW1NZXNzYWdlVHlwZVtTeXN0ZW1NZXNzYWdlVHlwZVtcIk5vZGVcIl0gPSAxXSA9IFwiTm9kZVwiO1xuICAgIFN5c3RlbU1lc3NhZ2VUeXBlW1N5c3RlbU1lc3NhZ2VUeXBlW1wiQ29udGVudFwiXSA9IDJdID0gXCJDb250ZW50XCI7XG4gICAgU3lzdGVtTWVzc2FnZVR5cGVbU3lzdGVtTWVzc2FnZVR5cGVbXCJTdWJzY3JpcHRpb25cIl0gPSAzXSA9IFwiU3Vic2NyaXB0aW9uXCI7XG4gICAgU3lzdGVtTWVzc2FnZVR5cGVbU3lzdGVtTWVzc2FnZVR5cGVbXCJTdGF0c1wiXSA9IDRdID0gXCJTdGF0c1wiO1xuICAgIFN5c3RlbU1lc3NhZ2VUeXBlW1N5c3RlbU1lc3NhZ2VUeXBlW1wiRGV0ZWN0aW9uXCJdID0gNV0gPSBcIkRldGVjdGlvblwiO1xuICAgIFN5c3RlbU1lc3NhZ2VUeXBlW1N5c3RlbU1lc3NhZ2VUeXBlW1wiUmVtZWRpYXRpb25cIl0gPSA2XSA9IFwiUmVtZWRpYXRpb25cIjtcbn0pKFN5c3RlbU1lc3NhZ2VUeXBlIHx8IChTeXN0ZW1NZXNzYWdlVHlwZSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIExvZ2dpbmdTZXJ2aWNlcztcbihmdW5jdGlvbiAoTG9nZ2luZ1NlcnZpY2VzKSB7XG4gICAgTG9nZ2luZ1NlcnZpY2VzW1wiUHViU3ViXCJdID0gXCJwdWJzdWJcIjtcbiAgICBMb2dnaW5nU2VydmljZXNbXCJPYmplY3RTdG9yYWdlXCJdID0gXCJvYmplY3Qtc3RvcmFnZVwiO1xuICAgIExvZ2dpbmdTZXJ2aWNlc1tcIktleVZhbHVlRGF0YWJhc2VcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZVwiO1xuICAgIExvZ2dpbmdTZXJ2aWNlc1tcIk1lZGlhU3RyZWFtXCJdID0gXCJtZWRpYS1zdHJlYW1cIjtcbn0pKExvZ2dpbmdTZXJ2aWNlcyB8fCAoTG9nZ2luZ1NlcnZpY2VzID0ge30pKTtcbjtcbmV4cG9ydCB2YXIgTG9nZ2luZ0NoYW5uZWxzO1xuKGZ1bmN0aW9uIChMb2dnaW5nQ2hhbm5lbHMpIHtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJBbGxcIl0gPSBcImFsbFwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIkRlZmF1bHRcIl0gPSBcImRlZmF1bHRcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJDb25uZWN0aW9uXCJdID0gXCJjb25uZWN0aW9uXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiQ29ubmVjdGlvblN0YXRlXCJdID0gXCJjb25uZWN0aW9uLXN0YXRlXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiQ2x1c3RlclwiXSA9IFwiY2x1c3RlclwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIkNvbnRlbnRcIl0gPSBcImNvbnRlbnRcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJEZXRlY3Rpb25cIl0gPSBcImRldGVjdGlvblwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIkV2ZW50c1wiXSA9IFwiZXZlbnRzXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiRXJyb3JcIl0gPSBcImVycm9yXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiTm9kZVwiXSA9IFwibm9kZVwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlBvb2xcIl0gPSBcInBvb2xcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJQdWJTdWJcIl0gPSBcInB1YnN1YlwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlJlbWVkaWF0aW9uXCJdID0gXCJyZW1lZGlhdGlvblwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlNpZ25hbGluZ1wiXSA9IFwic2lnbmFsaW5nXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiU3RhdHNcIl0gPSBcInN0YXRzXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiU3Vic2NyaXB0aW9uXCJdID0gXCJzdWJzY3JpcHRpb25cIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJTdXBwb3J0XCJdID0gXCJzdXBwb3J0XCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiU3lzdGVtXCJdID0gXCJzeXN0ZW1cIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJTeXN0ZW1TdGF0c1wiXSA9IFwic3lzdGVtLXN0YXRzXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiVGVzdFBhZ2VcIl0gPSBcInRlc3QtcGFnZVwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlBlZXJDb25uZWN0aW9uXCJdID0gXCJwZWVyLWNvbm5lY3Rpb25cIjtcbn0pKExvZ2dpbmdDaGFubmVscyB8fCAoTG9nZ2luZ0NoYW5uZWxzID0ge30pKTtcbiIsImV4cG9ydCB2YXIgUXVldWVFbGVtZW50UHJpb3JpdHk7XG4oZnVuY3Rpb24gKFF1ZXVlRWxlbWVudFByaW9yaXR5KSB7XG4gICAgUXVldWVFbGVtZW50UHJpb3JpdHlbUXVldWVFbGVtZW50UHJpb3JpdHlbXCJIaWdoXCJdID0gMF0gPSBcIkhpZ2hcIjtcbiAgICBRdWV1ZUVsZW1lbnRQcmlvcml0eVtRdWV1ZUVsZW1lbnRQcmlvcml0eVtcIk1lZGl1bVwiXSA9IDFdID0gXCJNZWRpdW1cIjtcbiAgICBRdWV1ZUVsZW1lbnRQcmlvcml0eVtRdWV1ZUVsZW1lbnRQcmlvcml0eVtcIkxvd1wiXSA9IDJdID0gXCJMb3dcIjtcbn0pKFF1ZXVlRWxlbWVudFByaW9yaXR5IHx8IChRdWV1ZUVsZW1lbnRQcmlvcml0eSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFN1cHBvcnRGZWF0dXJlTmFtZTtcbihmdW5jdGlvbiAoU3VwcG9ydEZlYXR1cmVOYW1lKSB7XG4gICAgU3VwcG9ydEZlYXR1cmVOYW1lW1wiQXVkaW9Db250ZXh0XCJdID0gXCJBdWRpb0NvbnRleHRcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJBdWRpb091dHB1dFwiXSA9IFwiQXVkaW9PdXRwdXRcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJBdWRpb1ZvbHVtZVwiXSA9IFwiQXVkaW9Wb2x1bWVcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJCYWNrZ3JvdW5kc1wiXSA9IFwiQmFja2dyb3VuZHNcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJEZXZpY2VDb25maWdcIl0gPSBcIkRldmljZUNvbmZpZ1wiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIk1lZGlhU3RyZWFtXCJdID0gXCJNZWRpYVN0cmVhbVwiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIlJlY29yZGluZ1wiXSA9IFwiUmVjb3JkaW5nXCI7XG4gICAgU3VwcG9ydEZlYXR1cmVOYW1lW1wiU2NyZWVuU2hhcmluZ1wiXSA9IFwiU2NyZWVuU2hhcmluZ1wiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIldlYkdMXCJdID0gXCJXZWJHTFwiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIldlYlJUQ1wiXSA9IFwiV2ViUlRDXCI7XG59KShTdXBwb3J0RmVhdHVyZU5hbWUgfHwgKFN1cHBvcnRGZWF0dXJlTmFtZSA9IHt9KSk7XG4iLCJpbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IENsdXN0ZXJFdmVudEVtaXR0ZXIgfSBmcm9tICdtb2RlbHMvQ2x1c3Rlci9DbHVzdGVyRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IE9yY2hlc3RyYXRvciB9IGZyb20gJ21vZGVscy9PcmNoZXN0cmF0b3IvT3JjaGVzdHJhdG9yJztcbmV4cG9ydCBjbGFzcyBDbHVzdGVyIHtcbiAgICB2ZW5kb3JJZDtcbiAgICBjbHVzdGVySWQ7XG4gICAgYXV0aE5vZGU7XG4gICAgZXZlbnRFbWl0dGVyO1xuICAgIG9yY2hlc3RyYXRvcjtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY2x1c3RlcklkLCBhdXRoTm9kZSwgYXV0aFNlcnZpY2UsIG9wdGlvbnMsIGNvbmZpZ3MsIGV2ZW50RW1pdHRlciA9IG5ldyBDbHVzdGVyRXZlbnRFbWl0dGVyKSB7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMuYXV0aE5vZGUgPSBhdXRoTm9kZTtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBldmVudEVtaXR0ZXI7XG4gICAgICAgIHRoaXMub3JjaGVzdHJhdG9yID0gbmV3IE9yY2hlc3RyYXRvcih0aGlzLnZlbmRvcklkLCB0aGlzLmNsdXN0ZXJJZCwgYXV0aE5vZGUsIGF1dGhTZXJ2aWNlLCBvcHRpb25zLCBjb25maWdzLCB0aGlzKTtcbiAgICB9XG4gICAgYXN5bmMgam9pbigpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5vcmNoZXN0cmF0b3IuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuYXV0aE5vZGUudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5Vc2VyOlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aE5vZGUucmVnaXN0ZXJDbHVzdGVyKHRoaXMuY2x1c3RlcklkLCAodXNlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9yY2hlc3RyYXRvci51cGRhdGVVc2VyKHVzZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZWF2ZSgpIHtcbiAgICAgICAgdGhpcy5vcmNoZXN0cmF0b3IuY2xvc2UoKTtcbiAgICAgICAgc3dpdGNoICh0aGlzLmF1dGhOb2RlLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhOb2RlLnVucmVnaXN0ZXJDbHVzdGVyKHRoaXMuY2x1c3RlcklkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdjbHVzdGVyLWxlYXZlJywgdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgb3BlblB1YlN1YlRvcGljKG5hbWUpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5vcmNoZXN0cmF0b3Iub3BlblB1YlN1YlRvcGljKG5hbWUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0TmFtZTogc3RyZWFtLmdldE5hbWUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogc3RyZWFtLmdldE93bmVySWQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IHN0cmVhbS5nZXRDb250ZW50VHlwZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBwdWJsaXNoOiBzdHJlYW0ucHVibGlzaC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBzdWJzY3JpYmU6IHN0cmVhbS5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6IHN0cmVhbS51bnN1YnNjcmliZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBjbG9zZTogc3RyZWFtLmNsb3NlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgb3Blbk9iamVjdFN0b3JlQnVja2V0KGxhYmVsKSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMub3JjaGVzdHJhdG9yLm9wZW5PYmplY3RTdG9yZUJ1Y2tldChsYWJlbCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXROYW1lOiBzdHJlYW0uZ2V0TmFtZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHB1Ymxpc2g6IHN0cmVhbS5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVucHVibGlzaDogc3RyZWFtLnVucHVibGlzaC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXQ6IHN0cmVhbS5nZXQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgbGlzdDogc3RyZWFtLmxpc3QuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgY2xvc2U6IHN0cmVhbS5jbG9zZS5iaW5kKHN0cmVhbSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIG9wZW5LZXlWYWx1ZURhdGFiYXNlKGxhYmVsLCBsYXlvdXQpIHtcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLm9yY2hlc3RyYXRvci5vcGVuS2V5VmFsdWVEYXRhYmFzZShsYWJlbCwgbGF5b3V0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldE5hbWU6IGRiLmdldE5hbWUuYmluZChkYiksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBkYi5nZXRPd25lcklkLmJpbmQoZGIpLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IGRiLmdldENvbnRlbnRUeXBlLmJpbmQoZGIpLFxuICAgICAgICAgICAgZ2V0VGFibGU6IGRiLmdldFRhYmxlLmJpbmQoZGIpLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBkYi5zdWJzY3JpYmUuYmluZChkYiksXG4gICAgICAgICAgICB1bnN1YnNjcmliZTogZGIudW5zdWJzY3JpYmUuYmluZChkYiksXG4gICAgICAgICAgICBjbG9zZTogZGIuY2xvc2UuYmluZChkYiksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFB1YlN1YlRvcGljcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0UHViU3ViVG9waWNzKHN0cmF0ZWd5KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbXMubWFwKChzdHJlYW0pID0+ICh7XG4gICAgICAgICAgICBnZXROYW1lOiBzdHJlYW0uZ2V0TmFtZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHB1Ymxpc2g6IHN0cmVhbS5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHN1YnNjcmliZTogc3RyZWFtLnN1YnNjcmliZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICB1bnN1YnNjcmliZTogc3RyZWFtLnVuc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGNsb3NlOiBzdHJlYW0uY2xvc2UuYmluZChzdHJlYW0pLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE9iamVjdFN0b3JlQnVja2V0cyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0T2JqZWN0U3RvcmVCdWNrZXRzKHN0cmF0ZWd5KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbXMubWFwKChzdHJlYW0pID0+ICh7XG4gICAgICAgICAgICBnZXROYW1lOiBzdHJlYW0uZ2V0TmFtZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHB1Ymxpc2g6IHN0cmVhbS5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVucHVibGlzaDogc3RyZWFtLnVucHVibGlzaC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXQ6IHN0cmVhbS5nZXQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgbGlzdDogc3RyZWFtLmxpc3QuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgY2xvc2U6IHN0cmVhbS5jbG9zZS5iaW5kKHN0cmVhbSksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0S2V5VmFsdWVEYXRhYmFzZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IHRoaXMub3JjaGVzdHJhdG9yLmdldEtleVZhbHVlRGF0YWJhc2VzKHN0cmF0ZWd5KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbXMubWFwKChzdHJlYW0pID0+ICh7XG4gICAgICAgICAgICBnZXROYW1lOiBzdHJlYW0uZ2V0TmFtZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldFRhYmxlOiBzdHJlYW0uZ2V0VGFibGUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgY2xvc2U6IHN0cmVhbS5jbG9zZS5iaW5kKHN0cmVhbSksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcHVibGlzaExvY2FsTWVkaWFTdHJlYW0obGFiZWwsIG1lZGlhU291cmNlKSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMub3JjaGVzdHJhdG9yLmNyZWF0ZUxvY2FsTWVkaWFTdHJlYW0obGFiZWwsIG1lZGlhU291cmNlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldExhYmVsOiBzdHJlYW0uZ2V0TGFiZWwuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogc3RyZWFtLmdldE93bmVySWQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IHN0cmVhbS5nZXRDb250ZW50VHlwZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRNZWRpYVN0cmVhbTogc3RyZWFtLmdldE1lZGlhU3RyZWFtLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHNldFByaW9yaXR5OiBzdHJlYW0uc2V0UHJpb3JpdHkuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdW5wdWJsaXNoOiBzdHJlYW0udW5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHVibGlzaExvY2FsRHluYW1pY01lZGlhU3RyZWFtKGxhYmVsLCBtZWRpYVNvdXJjZSkge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLm9yY2hlc3RyYXRvci5jcmVhdGVMb2NhbER5bmFtaWNNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0TGFiZWw6IHN0cmVhbS5nZXRMYWJlbC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHNldFByaW9yaXR5OiBzdHJlYW0uc2V0UHJpb3JpdHkuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdW5wdWJsaXNoOiBzdHJlYW0udW5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldE1lZGlhU3RyZWFtOiBzdHJlYW0uZ2V0TWVkaWFTdHJlYW0uYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgYWRkVHJhY2s6IHN0cmVhbS5hZGRUcmFjay5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICByZW1vdmVUcmFjazogc3RyZWFtLnJlbW92ZVRyYWNrLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHJlcGxhY2VUcmFjazogc3RyZWFtLnJlcGxhY2VUcmFjay5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBzZXRUcmFuc2Zvcm1hdGlvbnM6IHN0cmVhbS5zZXRUcmFuc2Zvcm1hdGlvbnMuYmluZChzdHJlYW0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRMb2NhbE1lZGlhU3RyZWFtcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0TG9jYWxNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpO1xuICAgICAgICByZXR1cm4gc3RyZWFtcy5tYXAoKHN0cmVhbSkgPT4gKHtcbiAgICAgICAgICAgIGdldExhYmVsOiBzdHJlYW0uZ2V0TGFiZWwuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogc3RyZWFtLmdldE93bmVySWQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IHN0cmVhbS5nZXRDb250ZW50VHlwZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRNZWRpYVN0cmVhbTogc3RyZWFtLmdldE1lZGlhU3RyZWFtLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHNldFByaW9yaXR5OiBzdHJlYW0uc2V0UHJpb3JpdHkuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdW5wdWJsaXNoOiBzdHJlYW0udW5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRSZW1vdGVNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IHRoaXMub3JjaGVzdHJhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtcyhzdHJhdGVneSk7XG4gICAgICAgIHJldHVybiBzdHJlYW1zLm1hcCgoc3RyZWFtKSA9PiAoe1xuICAgICAgICAgICAgZ2V0TGFiZWw6IHN0cmVhbS5nZXRMYWJlbC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldE1lZGlhU3RyZWFtOiBzdHJlYW0uZ2V0TWVkaWFTdHJlYW0uYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0QXZhaWxhYmxlVHJhY2tLaW5kczogc3RyZWFtLmdldEF2YWlsYWJsZVRyYWNrS2luZHMuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdXBkYXRlOiBzdHJlYW0udXBkYXRlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIG9uUHJvdmlkZXJDaGFuZ2U6IHN0cmVhbS5vblByb3ZpZGVyQ2hhbmdlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMb2NhbE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm9yY2hlc3RyYXRvci5nZXRMb2NhbE5vZGUoKTtcbiAgICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5Vc2VyLFxuICAgICAgICAgICAgICAgICAgICBnZXRJZDogbm9kZS5nZXRJZC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBnZXREaXNwbGF5TmFtZTogbm9kZS5nZXREaXNwbGF5TmFtZS5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBnZXRFbWFpbDogbm9kZS5nZXRFbWFpbC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBnZXRSZW1vdGVDb25uZWN0aW9uczogbm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucy5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBzZXREaXNwbGF5TmFtZTogbm9kZS5zZXREaXNwbGF5TmFtZS5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBzZXRFbWFpbDogbm9kZS5zZXRFbWFpbC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLkFnZW50OlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5BZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgZ2V0SWQ6IG5vZGUuZ2V0SWQuYmluZChub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0UmVtb3RlQ29ubmVjdGlvbnM6IG5vZGUuZ2V0UmVtb3RlQ29ubmVjdGlvbnMuYmluZChub2RlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlbW90ZU5vZGVzKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0UmVtb3RlTm9kZXMoc3RyYXRlZ3kpO1xuICAgICAgICByZXR1cm4gbm9kZXMubWFwKChub2RlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKG5vZGUudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRJZDogbm9kZS5nZXRJZC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RGlzcGxheU5hbWU6IG5vZGUuZ2V0RGlzcGxheU5hbWUuYmluZChub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEVtYWlsOiBub2RlLmdldEVtYWlsLmJpbmQobm9kZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRSZW1vdGVDb25uZWN0aW9uczogbm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucy5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuQWdlbnQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5BZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldElkOiBub2RlLmdldElkLmJpbmQobm9kZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRSZW1vdGVDb25uZWN0aW9uczogbm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucy5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk5vZGVJbnZhbGlkVHlwZSwgJ0ludmFsaWQgbm9kZSB0eXBlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDbHVzdGVyIGV2ZW50cyBtZXRob2RzXG4gICAgb24gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbiguLi5hcmdzKTtcbiAgICB9O1xuICAgIGVtaXQgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCguLi5hcmdzKTtcbiAgICB9O1xuICAgIG9mZiguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZiguLi5hcmdzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIENsdXN0ZXJFdmVudEVtaXR0ZXIge1xuICAgIHJlZ2lzdGVyZWRMaXN0ZW5lcnM7XG4gICAgYnVmZmVyZWRFdmVudHM7XG4gICAgZXZlbnRUYXJnZXQ7XG4gICAgY29uc3RydWN0b3IocmVnaXN0ZXJlZExpc3RlbmVycyA9IG5ldyBNYXAoKSwgYnVmZmVyZWRFdmVudHMgPSBuZXcgTWFwKCksIGV2ZW50VGFyZ2V0ID0gbmV3IEV2ZW50VGFyZ2V0KCkpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlcmVkTGlzdGVuZXJzID0gcmVnaXN0ZXJlZExpc3RlbmVycztcbiAgICAgICAgdGhpcy5idWZmZXJlZEV2ZW50cyA9IGJ1ZmZlcmVkRXZlbnRzO1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XG4gICAgfVxuICAgIGVtaXQgPSAoZXZlbnQsIGRhdGEpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnMuaGFzKGV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJFdmVudChldmVudCwgZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRXZlbnRzLCAnRW1pdHRpbmcgZXZlbnQgb24gbG9jYWwgY2x1c3RlcicsIHsgZXZlbnQsIGRhdGEgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnQsIHsgZGV0YWlsOiBkYXRhIH0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBvbiA9IChldmVudCwgbGlzdGVuZXIpID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnRUYXJnZXRMaXN0ZW5lciA9ICgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkV2ZW50cywgJ1JlY2VpdmVkIGV2ZW50IG9uIGNsdXN0ZXInLCBldmVudC50eXBlLCBldmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgbGlzdGVuZXIoZXZlbnQuZGV0YWlsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5zZXQoZXZlbnQsIGV2ZW50VGFyZ2V0TGlzdGVuZXIpO1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGV2ZW50VGFyZ2V0TGlzdGVuZXIpO1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5DbHVzdGVyLCAnU3Vic2NyaWJpbmcgdG8gYW4gZXZlbnQ6IG9uJywgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5jb25zdW1lQnVmZmVyZWRFdmVudHMoZXZlbnQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIG9mZihldmVudHMpIHtcbiAgICAgICAgaWYgKCFldmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lciwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkTGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBldmVudHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xuICAgICAgICAgICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihldmVudCkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgICAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5kZWxldGUoZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGJ1ZmZlckV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkV2ZW50cywgJ0J1ZmZlcmluZyBldmVudCcsIHsgZXZlbnQsIGRhdGEgfSk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcmVkRGF0YSA9IHRoaXMuYnVmZmVyZWRFdmVudHMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgdGhpcy5idWZmZXJlZEV2ZW50cy5zZXQoZXZlbnQsIFsuLi5idWZmZXJlZERhdGEsIGRhdGFdKTtcbiAgICB9XG4gICAgY29uc3VtZUJ1ZmZlcmVkRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcmVkRGF0YSA9IHRoaXMuYnVmZmVyZWRFdmVudHMuZ2V0KGV2ZW50KTtcbiAgICAgICAgaWYgKCFidWZmZXJlZERhdGEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXJlZERhdGEuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRXZlbnRzLCAnQ29uc3VtaW5nIGJ1ZmZlcmVkIGV2ZW50JywgeyBldmVudCwgZGF0YSB9KTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnQsIHsgZGV0YWlsOiBkYXRhIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnVmZmVyZWRFdmVudHMuZGVsZXRlKGV2ZW50KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBbXBsaWZ5IH0gZnJvbSAnYXdzLWFtcGxpZnknO1xuaW1wb3J0IHsgSHViIH0gZnJvbSAnYXdzLWFtcGxpZnkvdXRpbHMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVDbGllbnQsIENvbm5lY3Rpb25TdGF0ZSwgQ09OTkVDVElPTl9TVEFURV9DSEFOR0UgfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJztcbmltcG9ydCB7IGRlY29kZUpXVCB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9jb3JlJztcbmltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gJ2Vudmlyb25tZW50cy9FbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgeyBCYXNlQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL0Jhc2VDb25uZWN0aW9uJztcbmltcG9ydCB7IGlzUmVjZWl2ZXIsIGlzU2VuZGVyIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9IZWxwZXJzJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBjcmVhdGVPYnNlcnZlciwgY3JlYXRlU2luZ2xlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5pbXBvcnQgeyBBc3luY1F1ZXVlQ2FsbGJhY2sgfSBmcm9tICd1dGlscy9RdWV1ZS9RdWV1ZSc7XG5pbXBvcnQgeyBjcmVhdGVSZXRyeVF1ZXVlIH0gZnJvbSAndXRpbHMvUXVldWUvUmV0cnlRdWV1ZSc7XG5jb25zdCBzdWJzY3JpYmVEb2MgPSAvKiBHcmFwaFFMICovIGBcbiAgc3Vic2NyaXB0aW9uIFN1YnNjcmliZSgkbmFtZTogU3RyaW5nISkge1xuICAgIHN1YnNjcmliZShuYW1lOiAkbmFtZSkge1xuICAgICAgZGF0YVxuICAgICAgbmFtZVxuICAgIH1cbiAgfVxuYDtcbmNvbnN0IHB1Ymxpc2hEb2MgPSAvKiBHcmFwaFFMICovIGBcbiAgbXV0YXRpb24gUHVibGlzaCgkZGF0YTogQVdTSlNPTiEsICRuYW1lOiBTdHJpbmchKSB7XG4gICAgcHVibGlzaChkYXRhOiAkZGF0YSwgbmFtZTogJG5hbWUpIHtcbiAgICAgIGRhdGFcbiAgICAgIG5hbWVcbiAgICB9XG4gIH1cbmA7XG5leHBvcnQgY2xhc3MgQXBwU3luY1B1YlN1YkNvbm5lY3Rpb24gZXh0ZW5kcyBCYXNlQ29ubmVjdGlvbiB7XG4gICAgdmVuZG9ySWQ7XG4gICAgYXV0aFNlcnZpY2U7XG4gICAgY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICBjb25uZWN0aW9uU3RhdGVMaXN0ZW5lciA9IGNyZWF0ZVNpbmdsZU9ic2VydmVyKCk7XG4gICAgbWVzc2FnZUxpc3RlbmVycyA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgc3Vic2NyaXB0aW9uO1xuICAgIGxpc3RlblVuc3Vic2NyaWJlcjtcbiAgICByZXRyeVF1ZXVlID0gY3JlYXRlUmV0cnlRdWV1ZShuZXcgQXN5bmNRdWV1ZUNhbGxiYWNrKHRoaXMuc2VuZEFjdGlvbi5iaW5kKHRoaXMpLCB0aGlzLndhaXRDb25uZWN0ZWQuYmluZCh0aGlzKSkpO1xuICAgIGNsaWVudDtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkLCBhdXRoU2VydmljZSkge1xuICAgICAgICBzdXBlcihjbHVzdGVySWQsIGxvY2FsTm9kZSwgcmVtb3RlSWQpO1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UgPSBhdXRoU2VydmljZTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG15VG9rZW5Qcm92aWRlciA9IHtcbiAgICAgICAgICAgICAgICBnZXRUb2tlbnM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmF1dGhTZXJ2aWNlLmdldElkVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBkZWNvZGVKV1QoYWNjZXNzVG9rZW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogZGVjb2RlSldUKGFjY2Vzc1Rva2VuKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIEFtcGxpZnkuY29uZmlndXJlKHtcbiAgICAgICAgICAgICAgICBBUEk6IHtcbiAgICAgICAgICAgICAgICAgICAgR3JhcGhRTDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IEVudmlyb25tZW50LmF3cy5lbmRwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogRW52aXJvbm1lbnQuYXdzLnJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBdXRoTW9kZTogJ29pZGMnLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBBdXRoOiB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuUHJvdmlkZXI6IG15VG9rZW5Qcm92aWRlcixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50ID0gZ2VuZXJhdGVDbGllbnQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBsZXQgbmJSZXRyaWVzID0gMDtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuVW5zdWJzY3JpYmVyID0gSHViLmxpc3RlbignYXBpJywgYXN5bmMgKHsgcGF5bG9hZCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBheWxvYWQuZXZlbnQgPT09IENPTk5FQ1RJT05fU1RBVEVfQ0hBTkdFKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBwYXlsb2FkLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gZGF0YS5jb25uZWN0aW9uU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlTGlzdGVuZXIucHVibGlzaChkYXRhLmNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdhcHBzeW5jLWRpc2Nvbm5lY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZygnYXBwc3luYy1jb25uZWN0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmdldExvY2FsSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignYXBwc3luYy1jb25uZWN0LWZhaWwnLCB7XG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGxvZ2dlci53YXJuaW5nKCdhcHBzeW5jLWNsb3NlJywge1xuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmV0cnlRdWV1ZS5jbGVhcigpO1xuICAgICAgICB0aGlzLmxpc3RlblVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uPy51bnN1YnNjcmliZSgpO1xuICAgICAgICBkZWxldGUgdGhpcy5zdWJzY3JpcHRpb247XG4gICAgfVxuICAgIGlzQ29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQ7XG4gICAgfVxuICAgIHNlbmQoZGF0YSkge1xuICAgICAgICB0aGlzLnJldHJ5UXVldWUucHVzaChkYXRhKTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VMaXN0ZW5lcnMuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkQ29udGVudFR5cGVzKCkge1xuICAgICAgICByZXR1cm4gW0NvbnRlbnRUeXBlLkRhdGFdO1xuICAgIH1cbiAgICBhc3luYyB3YWl0Q29ubmVjdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuY29ubmVjdGlvblN0YXRlTGlzdGVuZXIuc3Vic2NyaWJlKChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZW5kQWN0aW9uKGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblN0YXRlICE9PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FwcFN5bmMgY29ubmVjdGlvbiBub3QgcmVhZHknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRhdGEuZGVzdGluYXRpb25JZHMgfHwgZGF0YS5kZXN0aW5hdGlvbklkcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignYXBwc3luYy1uby1kZXN0aW5hdGlvbicsIHtcbiAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnB1Ymxpc2goZGF0YS5kZXN0aW5hdGlvbklkc1swXSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH1cbiAgICBhc3luYyBwdWJsaXNoKGRlc3RpbmF0aW9uSWQsIGRhdGEpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcHBTeW5jIGNsaWVudCBub3QgcmVhZHknKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TaWduYWxpbmcsICdBcHBTeW5jIHB1Ymxpc2gnLCB0aGlzLmdldExvY2FsSWQoKSwgZGF0YSk7XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmdyYXBocWwoe1xuICAgICAgICAgICAgcXVlcnk6IHB1Ymxpc2hEb2MsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHsgbmFtZTogYXdhaXQgdGhpcy5nZXRIYXNoKGRlc3RpbmF0aW9uSWQpLCBkYXRhIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXBwU3luYyBjbGllbnQgbm90IHJlYWR5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU2lnbmFsaW5nLCAnQXBwU3luYyBzdWJzY3JpYmUnLCB0aGlzLmdldExvY2FsSWQoKSk7XG4gICAgICAgIGNvbnN0IGdyYXBocWwgPSBhd2FpdCB0aGlzLmNsaWVudC5ncmFwaHFsKHtcbiAgICAgICAgICAgIHF1ZXJ5OiBzdWJzY3JpYmVEb2MsXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHsgbmFtZTogYXdhaXQgdGhpcy5nZXRIYXNoKCkgfSxcbiAgICAgICAgICAgIGF1dGhUb2tlbjogYXdhaXQgdGhpcy5hdXRoU2VydmljZS5nZXRJZFRva2VuKCksXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGF3YWl0IHRoaXMuYXV0aFNlcnZpY2UuZ2V0SWRUb2tlbigpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBncmFwaHFsLnN1YnNjcmliZSh7XG4gICAgICAgICAgICBuZXh0OiAoeyBkYXRhIH0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShkYXRhLnN1YnNjcmliZS5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNTZW5kZXIobWVzc2FnZSwgdGhpcy5nZXRMb2NhbElkKCkpIHx8ICFpc1JlY2VpdmVyKG1lc3NhZ2UsIHRoaXMuZ2V0TG9jYWxJZCgpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUxpc3RlbmVycy5wdWJsaXNoKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBjb25zb2xlLmxvZyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldEhhc2gobm9kZUlkKSB7XG4gICAgICAgIGNvbnN0IGhhc2hCdWZmZXIgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTEnLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYCR7dGhpcy52ZW5kb3JJZH0tJHt0aGlzLmNsdXN0ZXJJZH0tJHtub2RlSWQgPz8gdGhpcy5nZXRMb2NhbElkKCl9YCkpO1xuICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcbiAgICAgICAgY29uc3QgaGFzaCA9IGhhc2hBcnJheS5tYXAoKGIpID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xuICAgICAgICByZXR1cm4gaGFzaDtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgQmFzZUNvbm5lY3Rpb24ge1xuICAgIGNsdXN0ZXJJZDtcbiAgICBsb2NhbE5vZGU7XG4gICAgcmVtb3RlSWQ7XG4gICAgY29uc3RydWN0b3IoY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkKSB7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLmxvY2FsTm9kZSA9IGxvY2FsTm9kZTtcbiAgICAgICAgdGhpcy5yZW1vdGVJZCA9IHJlbW90ZUlkO1xuICAgIH1cbiAgICBnZXRMb2NhbElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZUlkO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBFRVJfQ09OTkVDVElPTl9IQU5EU0hBS0VfREVCT1VOQ0UgfSBmcm9tICdjb25zdGFudHMvUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgQmFzZVBlZXJDb25uZWN0aW9uIHtcbiAgICBjbHVzdGVySWQ7XG4gICAgbG9jYWxOb2RlO1xuICAgIHJlbW90ZUlkO1xuICAgIGljZVNlcnZlcnM7XG4gICAgY29ubmVjdGlvblR5cGU7XG4gICAgY29ubmVjdGlvbkNvbnN0cnVjdG9yO1xuICAgIGNvbm5lY3Rpb247XG4gICAgZGF0YUNoYW5uZWw7XG4gICAgY3VycmVudFZlcnNpb24gPSAxO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGhhbmRzaGFrZUNhbmRpZGF0ZXMgPSBbXTtcbiAgICBwZW5kaW5nSGFuZHNoYWtlQ2FuZGlkYXRlcyA9IFtdO1xuICAgIGhhbmRzaGFrZURlYm91bmNlO1xuICAgIGNvbnN0cnVjdG9yKGNsdXN0ZXJJZCwgbG9jYWxOb2RlLCByZW1vdGVJZCwgaWNlU2VydmVycywgY29ubmVjdGlvblR5cGUsIGNvbm5lY3Rpb25Db25zdHJ1Y3Rvcikge1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUgPSBsb2NhbE5vZGU7XG4gICAgICAgIHRoaXMucmVtb3RlSWQgPSByZW1vdGVJZDtcbiAgICAgICAgdGhpcy5pY2VTZXJ2ZXJzID0gaWNlU2VydmVycztcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uVHlwZSA9IGNvbm5lY3Rpb25UeXBlO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Db25zdHJ1Y3RvciA9IGNvbm5lY3Rpb25Db25zdHJ1Y3RvcjtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbmV3IHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yKHsgaGFuZHNoYWtlU2VydmVyczogdGhpcy5pY2VTZXJ2ZXJzIH0pO1xuICAgICAgICB0aGlzLnNldHVwQ29ubmVjdGlvbkV2ZW50cygpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zdG9wQ29ubmVjdGlvbigpO1xuICAgIH1cbiAgICBzZXRDb25uZWN0aW9uVHlwZShjb25uZWN0aW9uVHlwZSkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25UeXBlID0gY29ubmVjdGlvblR5cGU7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUhhbmRzaGFrZShjYW5kaWRhdGVzLCB2ZXJzaW9uKSB7XG4gICAgICAgIGlmICh2ZXJzaW9uICE9PSB0aGlzLmN1cnJlbnRWZXJzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3Rpb24uY2FuQWRkQ2FuZGlkYXRlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZFBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5hZGRDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgdGhpcy5sb2dDb25uZWN0aW9uU3RhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUgPT09ICdjb25uZWN0ZWQnICYmXG4gICAgICAgICAgICBbJ2Nvbm5lY3RlZCcsICdjb21wbGV0ZWQnXS5pbmNsdWRlcyh0aGlzLmNvbm5lY3Rpb24uaGFuZHNoYWtlU3RhdGUpICYmXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUgIT09ICdjbG9zZWQnICYmXG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsPy5zdGF0ZSA9PT0gJ29wZW4nO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxuICAgIHJlc2V0Q29ubmVjdGlvbih2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMuc3RvcENvbm5lY3Rpb24oKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbmV3IHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yKHsgaGFuZHNoYWtlU2VydmVyczogdGhpcy5pY2VTZXJ2ZXJzIH0pO1xuICAgICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXR1cENvbm5lY3Rpb25FdmVudHMoKTtcbiAgICB9XG4gICAgcHJvY2Vzc1BlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzKCkge1xuICAgICAgICB0aGlzLnBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzLmZvckVhY2goY2FuZGlkYXRlID0+IHRoaXMuY29ubmVjdGlvbi5hZGRDYW5kaWRhdGUoY2FuZGlkYXRlKSk7XG4gICAgICAgIHRoaXMucGVuZGluZ0hhbmRzaGFrZUNhbmRpZGF0ZXMgPSBbXTtcbiAgICB9XG4gICAgcHVibGlzaFN5c3RlbU1lc3NhZ2UoY29udGVudCwgdXVpZCkge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtVG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuTWlzc2luZ1N5c3RlbVRvcGljLCB7IGNvbnRlbnQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdGhpcy5yZW1vdGVJZF0sXG4gICAgICAgICAgICBwcm9wYWdhdGU6IHRoaXMuY29ubmVjdGlvblR5cGUgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgcmV0cnk6IHRoaXMuY29ubmVjdGlvblR5cGUgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHV1aWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnV1aWQgPSB1dWlkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaChldmVudCk7XG4gICAgfVxuICAgIHNldHVwQ29ubmVjdGlvbkV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uR2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBnYXRoZXJpbmcgc3RhdGUgdG8gYmUgY29tcGxldGUgYmVmb3JlIHNlbmRpbmcgdGhlIGNhbmRpZGF0ZXMuXG4gICAgICAgICAgICAvLyBBIGRlYm91bmNlIGlzIHVzZWQgYmVjYXVzZSB0aGUgZ2F0aGVyaW5nIHN0YXRlIGNhbiBiZSBjb21wbGV0ZSBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb24uZ2F0aGVyaW5nU3RhdGUgPT09ICdjb21wbGV0ZScgJiYgdGhpcy5oYW5kc2hha2VDYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYW5kc2hha2VEZWJvdW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oYW5kc2hha2VEZWJvdW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlRGVib3VuY2UgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFuZHNoYWtlRGVib3VuY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZEljZUNhbmRpZGF0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kc2hha2VDYW5kaWRhdGVzID0gW107XG4gICAgICAgICAgICAgICAgfSwgUEVFUl9DT05ORUNUSU9OX0hBTkRTSEFLRV9ERUJPVU5DRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkNhbmRpZGF0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlQ2FuZGlkYXRlcy5wdXNoKGV2ZW50LmNhbmRpZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0b3BDb25uZWN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oYW5kc2hha2VEZWJvdW5jZSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmhhbmRzaGFrZURlYm91bmNlO1xuICAgICAgICB0aGlzLmhhbmRzaGFrZUNhbmRpZGF0ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wZW5kaW5nSGFuZHNoYWtlQ2FuZGlkYXRlcyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbk1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbkNsb3NlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFDaGFubmVsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkdhdGhlcmluZ1N0YXRlQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uQ2FuZGlkYXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uSGFuZHNoYWtlU3RhdGVDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25Db25uZWN0aW9uU3RhdGVDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25UcmFjayA9IG51bGw7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkRhdGFDaGFubmVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGUoY2FuZGlkYXRlKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0hhbmRzaGFrZUNhbmRpZGF0ZXMucHVzaChjYW5kaWRhdGUpO1xuICAgIH1cbiAgICBsb2dDb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkNvbm5lY3Rpb25TdGF0ZSwgJ0Jhc2UgUGVlciBDb25uZWN0aW9uJywge1xuICAgICAgICAgICAgbG9jYWxJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgY29ubmVjdGlvblN0YXRlOiB0aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlLFxuICAgICAgICAgICAgaGFuZHNoYWtlU3RhdGU6IHRoaXMuY29ubmVjdGlvbi5oYW5kc2hha2VTdGF0ZSxcbiAgICAgICAgICAgIHNpZ25hbGluZ1N0YXRlOiB0aGlzLmNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUsXG4gICAgICAgICAgICBkYXRhQ2hhbm5lbFN0YXRlOiB0aGlzLmRhdGFDaGFubmVsPy5zdGF0ZVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBFYXJseVJldHVybkVycm9yIH0gZnJvbSAnZXJyb3JzL0Vhcmx5UmV0dXJuRXJyb3InO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IE5vZGVNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvTm9kZS9Ob2RlTWVzc2FnZSc7XG5pbXBvcnQgeyBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9SZW1lZGlhdGlvbi9SZW1lZGlhdGlvbic7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IEFwcFN5bmNQdWJTdWJDb25uZWN0aW9uIH0gZnJvbSAnbW9kZWxzL0Nvbm5lY3Rpb24vQXBwU3luY1B1YlN1YkNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb24gfSBmcm9tICdtb2RlbHMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbkdyb3VwIH0gZnJvbSAnbW9kZWxzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb25Hcm91cCc7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvblBvb2wgfSBmcm9tICdtb2RlbHMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvblBvb2wnO1xuaW1wb3J0IHsgTWVzc2FnZUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlcy9NZXNzYWdlQnVmZmVyL01lc3NhZ2VCdWZmZXJTZXJ2aWNlJztcbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uTWFuYWdlciB7XG4gICAgY29uZmlncztcbiAgICBhdXRoU2VydmljZTtcbiAgICBpY2VTZXJ2ZXJzO1xuICAgIG1heEZwcztcbiAgICBtYXhCcHA7XG4gICAgY29ubmVjdGlvbkNvbnN0cnVjdG9yO1xuICAgIGNvbm5lY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgIGNvbm5lY3Rpb25Qb29sO1xuICAgIGNvbm5lY3Rpb25Hcm91cDtcbiAgICBzaWduYWxpbmdTZXJ2ZXI7XG4gICAgbWVzc2FnZUJ1ZmZlcjtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBhdXRoU2VydmljZSwgaWNlU2VydmVycywgbWF4RnBzLCBtYXhCcHAsIGdyYXBoU2VydmljZSwgY29ubmVjdGlvbkNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UgPSBhdXRoU2VydmljZTtcbiAgICAgICAgdGhpcy5pY2VTZXJ2ZXJzID0gaWNlU2VydmVycztcbiAgICAgICAgdGhpcy5tYXhGcHMgPSBtYXhGcHM7XG4gICAgICAgIHRoaXMubWF4QnBwID0gbWF4QnBwO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Db25zdHJ1Y3RvciA9IGNvbm5lY3Rpb25Db25zdHJ1Y3RvcjtcbiAgICAgICAgdGhpcy5tZXNzYWdlQnVmZmVyID0gbmV3IE1lc3NhZ2VCdWZmZXJTZXJ2aWNlKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkdyb3VwID0gbmV3IFBlZXJDb25uZWN0aW9uR3JvdXAodGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCB0aGlzLm1lc3NhZ2VCdWZmZXIsIGdyYXBoU2VydmljZSk7XG4gICAgICAgIHRoaXMuc2lnbmFsaW5nU2VydmVyID0gbmV3IEFwcFN5bmNQdWJTdWJDb25uZWN0aW9uKHRoaXMuY29uZmlncy52ZW5kb3JJZCwgdGhpcy5jb25maWdzLmNsdXN0ZXJJZCwgdGhpcy5jb25maWdzLmxvY2FsTm9kZSwgJ3NlcnZlcicsIHRoaXMuYXV0aFNlcnZpY2UpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Qb29sID0gbmV3IFBlZXJDb25uZWN0aW9uUG9vbCh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksIHRoaXMubWVzc2FnZUJ1ZmZlcik7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblBvb2wuYWRkQ29ubmVjdGlvbih0aGlzLmNvbm5lY3Rpb25Hcm91cCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblBvb2wuYWRkQ29ubmVjdGlvbih0aGlzLnNpZ25hbGluZ1NlcnZlcik7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLmNvbm5lY3Rpb25Qb29sKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZUJ1ZmZlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmZvckVhY2goKF8sIHJlbW90ZUlkKSA9PiB0aGlzLmNsb3NlQ29ubmVjdGlvbihyZW1vdGVJZCkpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLmNvbm5lY3Rpb25Qb29sKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uUG9vbC5yZW1vdmVDb25uZWN0aW9uKHRoaXMuc2lnbmFsaW5nU2VydmVyKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uUG9vbC5yZW1vdmVDb25uZWN0aW9uKHRoaXMuY29ubmVjdGlvbkdyb3VwKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uUG9vbC5jbG9zZSgpO1xuICAgICAgICB0aGlzLnNpZ25hbGluZ1NlcnZlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Hcm91cC5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNpZ25hbGluZ1NlcnZlci5jb25uZWN0KCk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZUNvbm5lY3Rpb24ocmVtb3RlSWQsIGNvbm5lY3Rpb25UeXBlID0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbnMuaGFzKHJlbW90ZUlkKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbnMuZ2V0KHJlbW90ZUlkKT8uZ2V0Q29ubmVjdGlvblR5cGUoKSA9PT0gUGVlckNvbm5lY3Rpb25UeXBlLk9wdGltaXphdGlvbiAmJiBjb25uZWN0aW9uVHlwZSA9PT0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmdldChyZW1vdGVJZCk/LnNldENvbm5lY3Rpb25UeXBlKFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLlJlbW90ZUNvbm5lY3Rpb25FeGlzdHMsIHsgbG9jYWxJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCByZW1vdGVJZCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gbmV3IFBlZXJDb25uZWN0aW9uKHRoaXMuY29uZmlncy5jbHVzdGVySWQsIHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIHJlbW90ZUlkLCB0aGlzLmljZVNlcnZlcnMsIGNvbm5lY3Rpb25UeXBlLCB0aGlzLm1heEZwcywgdGhpcy5tYXhCcHAsIHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5zZXQocmVtb3RlSWQsIGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Hcm91cC5hZGRDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoY29ubmVjdGlvbik7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclJlbW90ZU5vZGUocmVtb3RlSWQpO1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgZ2V0Q29ubmVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uR3JvdXA7XG4gICAgfVxuICAgIGdldENvbm5lY3Rpb24ocmVtb3RlSWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3Rpb25zLmhhcyhyZW1vdGVJZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuTWlzc2luZ1JlbW90ZUNvbm5lY3Rpb24sIHsgbG9jYWxJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCByZW1vdGVJZCB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9ucy5nZXQocmVtb3RlSWQpO1xuICAgIH1cbiAgICBnZXRDb25uZWN0aW9ucyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25zLmZpbHRlcihzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25zO1xuICAgIH1cbiAgICBhc3luYyBjb2xsZWN0U3RhdHMocmVtb3RlSWQpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbnMuZ2V0KHJlbW90ZUlkKTtcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uIHx8ICFjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbGxlY3RTdGF0cygpO1xuICAgIH1cbiAgICBoYW5kbGVPdXRnb2luZ1N5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICAvLyBQZWVyIENvbm5lY3Rpb24gZXZlbnRzIGNhbiBmYWxsYmFjayBvbiB0aGUgc2lnbmFsaW5nIHNlcnZlclxuICAgICAgICBpZiAoZXZlbnQubWVzc2FnZVR5cGUgPT09IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uICYmICFldmVudC5wcm9wYWdhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblBvb2wuc2VuZChldmVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkdyb3VwLnNlbmQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVhcmx5UmV0dXJuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZWFybHkgcmV0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICAvLyBJZ25vcmUgZXZlbnRzIHdlIGRvbid0IHdhbnQgdG8gaGFuZGxlXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuRGlzY29ubmVjdDpcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdGF0czpcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5PcHRpbWl6YXRpb25Db25uZWN0aW9uU3VjY2VzczpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFldmVudC5kZXN0aW5hdGlvbklkcyB8fCBldmVudC5kZXN0aW5hdGlvbklkcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuUGVlckNvbm5lY3Rpb25JbnZhbGlkRGVzdGluYXRpb24sIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGVlciBDb25uZWN0aW9uIHN5c3RlbSBldmVudHMgbXVzdCBoYXZlIGV4YWN0bHkgb25lIGRlc3RpbmF0aW9uJyxcbiAgICAgICAgICAgICAgICBldmVudFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmRlc3RpbmF0aW9uSWRzWzBdICE9PSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuUGVlckNvbm5lY3Rpb25JbnZhbGlkRGVzdGluYXRpb24sIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW5jb21pbmcgUGVlciBDb25uZWN0aW9uIGV2ZW50cyBtdXN0IGhhdmUgdGhlIGxvY2FsIGlkIGFzIGEgZGVzdGluYXRpb24nLFxuICAgICAgICAgICAgICAgIGV2ZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGlvbnMuaGFzKGV2ZW50LnNvdXJjZUlkKSkge1xuICAgICAgICAgICAgbGV0IGNvbm5lY3Rpb25UeXBlID0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc09mZmVyKGV2ZW50LmNvbnRlbnQpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5pc0ljZUNhbmRpZGF0ZShldmVudC5jb250ZW50KSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuaXNOZWVkUmVzdGFydChldmVudC5jb250ZW50KSkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlID0gZXZlbnQuY29udGVudC5jb25uZWN0aW9uVHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBldmVudHMgd2hlbiB0aGUgY29ubmVjdGlvbiBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVDb25uZWN0aW9uKGV2ZW50LnNvdXJjZUlkLCBjb25uZWN0aW9uVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbnMuZ2V0KGV2ZW50LnNvdXJjZUlkKTtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5oYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgfVxuICAgIGhhbmRsZVJlbWVkaWF0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb246XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRlbnQudGFyZ2V0SWQgPT09IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmZvckVhY2goKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uaGFuZGxlUmVtZWRpYXRpb25TeXN0ZW1FdmVudHMoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmdldChldmVudC5jb250ZW50LnRhcmdldElkKT8uaGFuZGxlUmVtZWRpYXRpb25TeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZU5vZGVTeXN0ZW1FdmVudHMoeyBjb250ZW50IH0pIHtcbiAgICAgICAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZU1lc3NhZ2VUeXBlLk5vZGVMZWF2ZTpcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ29ubmVjdGlvbihjb250ZW50LmlkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZUNvbm5lY3Rpb24ocmVtb3RlSWQpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbnMuZ2V0KHJlbW90ZUlkKTtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyUmVtb3RlTm9kZShyZW1vdGVJZCk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uIGluc3RhbmNlb2YgUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25Hcm91cC5yZW1vdmVDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5kZWxldGUocmVtb3RlSWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzT2ZmZXIoY29udGVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudC50eXBlID09PSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk9mZmVyO1xuICAgIH1cbiAgICBpc05lZWRSZXN0YXJ0KGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQudHlwZSA9PT0gUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5OZWVkUmVzdGFydDtcbiAgICB9XG4gICAgaXNJY2VDYW5kaWRhdGUoY29udGVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudC50eXBlID09PSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLkhhbmRzaGFrZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25UeXBlLCBQZWVyQ29ubmVjdGlvbk9yaWdpbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vTWVkaWFTdWJzY3JpcHRpb25FdmVudCc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VDb25uZWN0aW9uIH0gZnJvbSAnbW9kZWxzL0Nvbm5lY3Rpb24vQmFzZUNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUmVjZWl2ZXJQZWVyQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL1JlY2VpdmVyUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgU2VuZGVyUGVlckNvbm5lY3Rpb24gfSBmcm9tICdtb2RlbHMvQ29ubmVjdGlvbi9TZW5kZXJQZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBpc1JlY2VpdmVyLCBpc1NlbmRlciwgZ2V0VG9waWNMYWJlbCB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vSGVscGVycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgUGVlckNvbm5lY3Rpb24gZXh0ZW5kcyBCYXNlQ29ubmVjdGlvbiB7XG4gICAgaWNlU2VydmVycztcbiAgICBjb25uZWN0aW9uVHlwZTtcbiAgICBtYXhGcHM7XG4gICAgbWF4QnBwO1xuICAgIGNvbm5lY3Rpb25Db25zdHJ1Y3RvcjtcbiAgICBzZW5kZXJDb25uZWN0aW9uO1xuICAgIHJlY2VpdmVyQ29ubmVjdGlvbjtcbiAgICByZWNlaXZlclVuc3Vic2NyaWJlcnMgPSBbXTtcbiAgICBtZXNzYWdlTGlzdGVuZXJzID0gY3JlYXRlT2JzZXJ2ZXIoKTtcbiAgICB0cmFja0xpc3RlbmVycyA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgcmVtb3ZlVHJhY2tMaXN0ZW5lcnMgPSBjcmVhdGVPYnNlcnZlcigpO1xuICAgIGxpc3RlbmVyVW5zdWJzY3JpYmVycyA9IFtdO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGRhdGFUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgZGF0YVVuc3Vic2NyaWJlcnMgPSBuZXcgTWFwKCk7XG4gICAgbWVkaWFUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgbWVkaWFVbnN1YnNjcmliZXJzID0gbmV3IE1hcCgpO1xuICAgIHN1Y2Nlc3NOb3RpZmllZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKGNsdXN0ZXJJZCwgbG9jYWxOb2RlLCByZW1vdGVJZCwgaWNlU2VydmVycywgY29ubmVjdGlvblR5cGUsIG1heEZwcywgbWF4QnBwLCBjb25uZWN0aW9uQ29uc3RydWN0b3IpIHtcbiAgICAgICAgc3VwZXIoY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkKTtcbiAgICAgICAgdGhpcy5pY2VTZXJ2ZXJzID0gaWNlU2VydmVycztcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uVHlwZSA9IGNvbm5lY3Rpb25UeXBlO1xuICAgICAgICB0aGlzLm1heEZwcyA9IG1heEZwcztcbiAgICAgICAgdGhpcy5tYXhCcHAgPSBtYXhCcHA7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yID0gY29ubmVjdGlvbkNvbnN0cnVjdG9yO1xuICAgIH1cbiAgICByZWdpc3RlclB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgc3dpdGNoIChwdWJsaXNoZXIuZ2V0Q29udGVudFR5cGUoKSkge1xuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5EYXRhOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5QdWJTdWI6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLk9iamVjdFN0b3JlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5LZXlWYWx1ZURhdGFiYXNlOlxuICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBUaGUgc3dpdGNoIHNob3VsZCBkaXNjcmltaW5hdGVcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgd2UgYWRkIGEgdW5pb24gdHlwZSBiZXR3ZWVuIElUb3BpY1B1Ymxpc2hlcjxJRGF0YVN1YnNjcmlwdGlvbkV2ZW50PiBhbmQgSVRvcGljUHVibGlzaGVyPElNZWRpYVN1YnNjcmlwdGlvbkV2ZW50Pj9cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFUb3BpY3Muc2V0KHB1Ymxpc2hlci5nZXRMYWJlbCgpLCBwdWJsaXNoZXIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5NZWRpYTpcbiAgICAgICAgICAgICAgICB0aGlzLm1lZGlhVG9waWNzLnNldChwdWJsaXNoZXIuZ2V0TGFiZWwoKSwgcHVibGlzaGVyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnJlZ2lzdGVyUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICBzd2l0Y2ggKHB1Ymxpc2hlci5nZXRDb250ZW50VHlwZSgpKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkRhdGE6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLlB1YlN1YjpcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuT2JqZWN0U3RvcmU6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVG9waWNzLmRlbGV0ZShwdWJsaXNoZXIuZ2V0TGFiZWwoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLk1lZGlhOlxuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFUb3BpY3MuZGVsZXRlKHB1Ymxpc2hlci5nZXRMYWJlbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3RlclN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgICBzd2l0Y2ggKHN1YnNjcmliZXIuZ2V0Q29udGVudFR5cGUoKSkge1xuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5EYXRhOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5QdWJTdWI6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLk9iamVjdFN0b3JlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5LZXlWYWx1ZURhdGFiYXNlOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBzdWJzY3JpYmVyLnN1YnNjcmliZSgoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZW5kZXIoY29udGVudCwgdGhpcy5nZXRMb2NhbElkKCkpICYmIGlzUmVjZWl2ZXIoY29udGVudCwgdGhpcy5yZW1vdGVJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZChjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVVuc3Vic2NyaWJlcnMuc2V0KHN1YnNjcmliZXIuZ2V0TGFiZWwoKSwgdW5zdWJzY3JpYmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5NZWRpYToge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc3Vic2NyaWJlci5zdWJzY3JpYmUoKHsgY29udGVudCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29udGVudC5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uQWRkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJhY2soY29udGVudC50cmFjaywgY29udGVudC5zdHJlYW0sIGNvbnRlbnQucHJpb3JpdHksIGNvbnRlbnQucGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uUmVtb3ZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVHJhY2soY29udGVudC50cmFjaywgY29udGVudC5zdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5VcGRhdGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcmlvcml0eShjb250ZW50LnN0cmVhbSwgY29udGVudC5wcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBhcmFtcyhjb250ZW50LnN0cmVhbSwgY29udGVudC5wYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFVbnN1YnNjcmliZXJzLnNldChzdWJzY3JpYmVyLmdldExhYmVsKCksIHVuc3Vic2NyaWJlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnJlZ2lzdGVyU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICAgIHN3aXRjaCAoc3Vic2NyaWJlci5nZXRDb250ZW50VHlwZSgpKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkRhdGE6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLlB1YlN1YjpcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuT2JqZWN0U3RvcmU6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVW5zdWJzY3JpYmVycy5nZXQoc3Vic2NyaWJlci5nZXRMYWJlbCgpKT8uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVW5zdWJzY3JpYmVycy5kZWxldGUoc3Vic2NyaWJlci5nZXRMYWJlbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuTWVkaWE6XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYVVuc3Vic2NyaWJlcnMuZ2V0KHN1YnNjcmliZXIuZ2V0TGFiZWwoKSk/LigpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFVbnN1YnNjcmliZXJzLmRlbGV0ZShzdWJzY3JpYmVyLmdldExhYmVsKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZENvbnRlbnRUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIFtDb250ZW50VHlwZS5EYXRhLCBDb250ZW50VHlwZS5NZWRpYSwgQ29udGVudFR5cGUuUHViU3ViLCBDb250ZW50VHlwZS5PYmplY3RTdG9yZSwgQ29udGVudFR5cGUuS2V5VmFsdWVEYXRhYmFzZV07XG4gICAgfVxuICAgIHJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljID0gcHVibGlzaGVyO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5zeXN0ZW1Ub3BpYztcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5zZXR1cExpc3RlbmVycygpO1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9mZmVyKCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVycy5mb3JFYWNoKCh1bnN1YnNjcmliZSkgPT4gdW5zdWJzY3JpYmUoKSk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXJzID0gW107XG4gICAgICAgIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8udW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpO1xuICAgICAgICB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LmNsb3NlKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNlbmRlckNvbm5lY3Rpb247XG4gICAgICAgIHRoaXMucmVjZWl2ZXJVbnN1YnNjcmliZXJzLmZvckVhY2goKHVuc3Vic2NyaWJlKSA9PiB1bnN1YnNjcmliZSgpKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlclVuc3Vic2NyaWJlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24/LnVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24/LmNsb3NlKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbjtcbiAgICB9XG4gICAgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LmlzQ29ubmVjdGVkKCkgJiYgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24/LmlzQ29ubmVjdGVkKCkgfHwgZmFsc2U7XG4gICAgfVxuICAgIHNlbmQoZGF0YSkge1xuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyQ29ubmVjdGlvbiB8fCAhdGhpcy5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkNvbm5lY3Rpb25Ob3Rpbml0aWFsaXplZCwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTZW5kZXIgY29ubmVjdGlvbiBpcyBub3QgaW5pdGlhbGl6ZWQgd2hpbGUgdHJ5aW5nIHRvIHNlbmQgYSBtZXNzYWdlLicsXG4gICAgICAgICAgICAgICAgc2VuZGVyQ29ubmVjdGVkOiB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LmlzQ29ubmVjdGVkKCksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXJDb25uZWN0ZWQ6IHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uPy5pc0Nvbm5lY3RlZCgpLFxuICAgICAgICAgICAgICAgIGxvY2FsSWQ6IHRoaXMuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRlckNvbm5lY3Rpb24uc2VuZChkYXRhKTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VMaXN0ZW5lcnMuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgb25UcmFjayhjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFja0xpc3RlbmVycy5zdWJzY3JpYmUoKHsgdHJhY2ssIHN0cmVhbSB9KSA9PiBjYWxsYmFjayh0cmFjaywgc3RyZWFtKSk7XG4gICAgfVxuICAgIG9uUmVtb3ZlVHJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlVHJhY2tMaXN0ZW5lcnMuc3Vic2NyaWJlKCh7IHRyYWNrLCBzdHJlYW0gfSkgPT4gY2FsbGJhY2sodHJhY2ssIHN0cmVhbSkpO1xuICAgIH1cbiAgICBhZGRUcmFjayh0cmFjaywgc3RyZWFtLCBwcmlvcml0eSwgcGFyYW1zKSB7XG4gICAgICAgIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8uYWRkVHJhY2sodHJhY2ssIHN0cmVhbSwgcHJpb3JpdHksIHBhcmFtcyk7XG4gICAgfVxuICAgIHNldFByaW9yaXR5KHN0cmVhbSwgcHJpb3JpdHkpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uPy5zZXRQcmlvcml0eShzdHJlYW0sIHByaW9yaXR5KTtcbiAgICB9XG4gICAgc2V0UGFyYW1zKHN0cmVhbSwgcGFyYW1zKSB7XG4gICAgICAgIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8uc2V0UGFyYW1zKHN0cmVhbSwgcGFyYW1zKTtcbiAgICB9XG4gICAgcmVtb3ZlVHJhY2sodHJhY2ssIHN0cmVhbSkge1xuICAgICAgICB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LnJlbW92ZVRyYWNrKHRyYWNrLCBzdHJlYW0pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Db25uZWN0aW9uLCAnQ3Jld2RsZUNvbm5lY3Rpb24gaGFuZGxlUGVlckNvbm5lY3Rpb25TeXN0ZW1FdmVudHMnLCB0aGlzLmdldExvY2FsSWQoKSwgZXZlbnQpO1xuICAgICAgICBjb25zdCB7IGNvbnRlbnQgfSA9IGV2ZW50O1xuICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk9mZmVyOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlT2ZmZXIoY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuQW5zd2VyOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlQW5zd2VyKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLlN1Y2Nlc3M6XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuSGFuZHNoYWtlOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlSWNlQ2FuZGlkYXRlcyhjb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5OZWVkUmVzdGFydDpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5lZWRSZXN0YXJ0KGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLlJlc3RhcnQ6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVJlbWVkaWF0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8uYXBwbHlSZW1lZGlhdGlvbihldmVudC5jb250ZW50LmRhdGEpO1xuICAgIH1cbiAgICBnZXRDb25uZWN0aW9uVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvblR5cGU7XG4gICAgfVxuICAgIHNldENvbm5lY3Rpb25UeXBlKGNvbm5lY3Rpb25UeXBlKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblR5cGUgPSBjb25uZWN0aW9uVHlwZTtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uPy5zZXRDb25uZWN0aW9uVHlwZShjb25uZWN0aW9uVHlwZSk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uPy5zZXRDb25uZWN0aW9uVHlwZShjb25uZWN0aW9uVHlwZSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbGxlY3RTdGF0cygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kZXJDb25uZWN0aW9uPy5jb2xsZWN0U3RhdHMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24/LmNvbGxlY3RTdGF0cygpO1xuICAgIH1cbiAgICBzZXR1cExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlcnMucHVzaCh0aGlzLm9uTWVzc2FnZSgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyAtIFNob3VsZCB3ZSBhZGQgYSBoZWxwZXIgdG8gY2hlY2sgZm9yIHN5c3RlbSB0b3BpYz9cbiAgICAgICAgICAgIGlmIChpc1JlY2VpdmVyKGRhdGEsIHRoaXMuZ2V0TG9jYWxJZCgpKSAmJiBkYXRhLnRvcGljTGFiZWwgIT09IFNZU1RFTV9UT1BJQykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVRvcGljcy5nZXQoZGF0YS50b3BpY0xhYmVsKT8ucHVibGlzaChkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVycy5wdXNoKHRoaXMub25UcmFjaygodHJhY2ssIHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9waWNMYWJlbCA9IGdldFRvcGljTGFiZWwoQ29udGVudFR5cGUuTWVkaWEsIHN0cmVhbS5pZCwgdGhpcy5yZW1vdGVJZCk7XG4gICAgICAgICAgICB0aGlzLm1lZGlhVG9waWNzLmdldCh0b3BpY0xhYmVsKT8ucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgdG9waWNMYWJlbDogdG9waWNMYWJlbCxcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uLlJlbW90ZUFkZCxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVycy5wdXNoKHRoaXMub25SZW1vdmVUcmFjaygodHJhY2ssIHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9waWNMYWJlbCA9IGdldFRvcGljTGFiZWwoQ29udGVudFR5cGUuTWVkaWEsIHN0cmVhbS5pZCwgdGhpcy5yZW1vdGVJZCk7XG4gICAgICAgICAgICB0aGlzLm1lZGlhVG9waWNzLmdldCh0b3BpY0xhYmVsKT8ucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgdG9waWNMYWJlbDogdG9waWNMYWJlbCxcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uLlJlbW90ZVJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBoYW5kbGVJY2VDYW5kaWRhdGVzKHsgY2FuZGlkYXRlcywgb3JpZ2luLCB2ZXJzaW9uIH0pIHtcbiAgICAgICAgaWYgKG9yaWdpbiA9PT0gUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVjZWl2ZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZWNlaXZlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbi5oYW5kbGVIYW5kc2hha2UoY2FuZGlkYXRlcywgdmVyc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyQ29ubmVjdGlvbi5oYW5kbGVIYW5kc2hha2UoY2FuZGlkYXRlcywgdmVyc2lvbik7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZU9mZmVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTZW5kZXJDb25uZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZU9mZmVyKHsgb2ZmZXIsIHZlcnNpb24gfSkge1xuICAgICAgICBpZiAoIXRoaXMucmVjZWl2ZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVJlY2VpdmVyQ29ubmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uLmhhbmRsZU9mZmVyKG9mZmVyLCB2ZXJzaW9uKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQW5zd2VyKHsgYW5zd2VyLCB2ZXJzaW9uIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlbmRlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1NlbmRlciBjb25uZWN0aW9uIGlzIG5vdCBpbml0aWFsaXplZC4nLFxuICAgICAgICAgICAgICAgIGxvY2FsSWQ6IHRoaXMuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgICAgIGFuc3dlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyQ29ubmVjdGlvbi5oYW5kbGVBbnN3ZXIoYW5zd2VyLCB2ZXJzaW9uKTtcbiAgICB9XG4gICAgaGFuZGxlU3VjY2VzcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Db25uZWN0aW9uTm90aW5pdGlhbGl6ZWQsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUmVjZWl2ZXIgY29ubmVjdGlvbiBpcyBub3QgaW5pdGlhbGl6ZWQuJyxcbiAgICAgICAgICAgICAgICBsb2NhbElkOiB0aGlzLmdldExvY2FsSWQoKSxcbiAgICAgICAgICAgICAgICByZW1vdGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uLmhhbmRsZVN1Y2Nlc3MoKTtcbiAgICAgICAgaWYgKCF0aGlzLnN1Y2Nlc3NOb3RpZmllZCAmJiB0aGlzLmNvbm5lY3Rpb25UeXBlID09PSBQZWVyQ29ubmVjdGlvblR5cGUuT3B0aW1pemF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3NOb3RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljPy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbklkczogW3RoaXMuZ2V0TG9jYWxJZCgpXSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuUGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZU5lZWRSZXN0YXJ0KGNvbnRlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZWNlaXZlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbi5oYW5kbGVOZWVkUmVzdGFydChjb250ZW50LnZlcnNpb24pO1xuICAgIH1cbiAgICBjcmVhdGVTZW5kZXJDb25uZWN0aW9uKCkge1xuICAgICAgICB0aGlzLnNlbmRlckNvbm5lY3Rpb24gPSBuZXcgU2VuZGVyUGVlckNvbm5lY3Rpb24odGhpcy5jbHVzdGVySWQsIHRoaXMubG9jYWxOb2RlLCB0aGlzLnJlbW90ZUlkLCB0aGlzLmljZVNlcnZlcnMsIHRoaXMuY29ubmVjdGlvblR5cGUsIHRoaXMubWF4RnBzLCB0aGlzLm1heEJwcCwgdGhpcy5jb25uZWN0aW9uQ29uc3RydWN0b3IpO1xuICAgICAgICB0aGlzLnNlbmRlckNvbm5lY3Rpb24ucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIodGhpcy5zeXN0ZW1Ub3BpYyk7XG4gICAgfVxuICAgIGNyZWF0ZVJlY2VpdmVyQ29ubmVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24gPSBuZXcgUmVjZWl2ZXJQZWVyQ29ubmVjdGlvbih0aGlzLmNsdXN0ZXJJZCwgdGhpcy5sb2NhbE5vZGUsIHRoaXMucmVtb3RlSWQsIHRoaXMuaWNlU2VydmVycywgdGhpcy5jb25uZWN0aW9uVHlwZSwgdGhpcy5jb25uZWN0aW9uQ29uc3RydWN0b3IpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbi5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcih0aGlzLnN5c3RlbVRvcGljKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlclVuc3Vic2NyaWJlcnMucHVzaCh0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbi5vbk1lc3NhZ2UoKG1lc3NhZ2UpID0+IHRoaXMubWVzc2FnZUxpc3RlbmVycy5wdWJsaXNoKG1lc3NhZ2UpKSk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJVbnN1YnNjcmliZXJzLnB1c2godGhpcy5yZWNlaXZlckNvbm5lY3Rpb24ub25UcmFjaygodHJhY2ssIHN0cmVhbSkgPT4gdGhpcy50cmFja0xpc3RlbmVycy5wdWJsaXNoKHsgdHJhY2ssIHN0cmVhbSB9KSkpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyVW5zdWJzY3JpYmVycy5wdXNoKHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uLm9uUmVtb3ZlVHJhY2soKHRyYWNrLCBzdHJlYW0pID0+IHRoaXMucmVtb3ZlVHJhY2tMaXN0ZW5lcnMucHVibGlzaCh7IHRyYWNrLCBzdHJlYW0gfSkpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgQ09OTkVDVElPTl9HUk9VUF9SRVRSWV9ERUxBWSB9IGZyb20gJ2NvbnN0YW50cy9Db25uZWN0aW9uJztcbmltcG9ydCB7IFNZU1RFTV9UT1BJQyB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgRWFybHlSZXR1cm5FcnJvciB9IGZyb20gJ2Vycm9ycy9FYXJseVJldHVybkVycm9yJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvblR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgaXNSZWNlaXZlciwgaXNTZW5kZXIgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL0hlbHBlcnMnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBnZXRGb3JtYXR0ZWRTeXRlbUxvZyB9IGZyb20gJ3V0aWxzL0xvZ2dlci9IZWxwZXJzJztcbmltcG9ydCB7IGNyZWF0ZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuaW1wb3J0IHsgU3luY1F1ZXVlQ2FsbGJhY2sgfSBmcm9tICd1dGlscy9RdWV1ZS9RdWV1ZSc7XG5pbXBvcnQgeyBjcmVhdGVWZXJzaW9uZWRSZXRyeVF1ZXVlIH0gZnJvbSAndXRpbHMvUXVldWUvVmVyc2lvbmVkUmV0cnlRdWV1ZSc7XG5leHBvcnQgY2xhc3MgUGVlckNvbm5lY3Rpb25Hcm91cCB7XG4gICAgbG9jYWxJZDtcbiAgICBtZXNzYWdlQnVmZmVyO1xuICAgIGdyYXBoU2VydmljZTtcbiAgICBjb25uZWN0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICBtZXNzYWdlTGlzdGVuZXJzID0gY3JlYXRlT2JzZXJ2ZXIoKTtcbiAgICBtZXNzYWdlVW5zdWJzY3JpYmVyO1xuICAgIGRhdGFUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgZGF0YVVuc3Vic2NyaWJlcnMgPSBuZXcgTWFwKCk7XG4gICAgcmV0cnlRdWV1ZXMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3RydWN0b3IobG9jYWxJZCwgbWVzc2FnZUJ1ZmZlciwgZ3JhcGhTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMubG9jYWxJZCA9IGxvY2FsSWQ7XG4gICAgICAgIHRoaXMubWVzc2FnZUJ1ZmZlciA9IG1lc3NhZ2VCdWZmZXI7XG4gICAgICAgIHRoaXMuZ3JhcGhTZXJ2aWNlID0gZ3JhcGhTZXJ2aWNlO1xuICAgICAgICB0aGlzLm1lc3NhZ2VVbnN1YnNjcmliZXIgPSB0aGlzLm9uTWVzc2FnZSgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZUJ1ZmZlci5oYXNNZXNzYWdlKGRhdGEudXVpZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNSZWNlaXZlcihkYXRhLCB0aGlzLmxvY2FsSWQpICYmIGRhdGEudG9waWNMYWJlbCAhPT0gU1lTVEVNX1RPUElDKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlQnVmZmVyLmFkZE1lc3NhZ2UoZGF0YS51dWlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFUb3BpY3MuZ2V0KGRhdGEudG9waWNMYWJlbCk/LnB1Ymxpc2goZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWRhdGEucHJvcGFnYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZW5kKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZVVuc3Vic2NyaWJlcj8uKCk7XG4gICAgfVxuICAgIGFkZENvbm5lY3Rpb24oY29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IGNvbm5lY3Rpb24ub25NZXNzYWdlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VMaXN0ZW5lcnMucHVibGlzaChkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbnMuc2V0KGNvbm5lY3Rpb24sIHVuc3Vic2NyaWJlKTtcbiAgICAgICAgdGhpcy5yZXRyeVF1ZXVlcy5zZXQoY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpLCBjcmVhdGVWZXJzaW9uZWRSZXRyeVF1ZXVlKG5ldyBTeW5jUXVldWVDYWxsYmFjaygoZGF0YSkgPT4gY29ubmVjdGlvbi5zZW5kKGRhdGEpLCAoKSA9PiBpbnRlcnZhbC53YWl0KENPTk5FQ1RJT05fR1JPVVBfUkVUUllfREVMQVkpKSkpO1xuICAgIH1cbiAgICByZW1vdmVDb25uZWN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5nZXQoY29ubmVjdGlvbik/LigpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmRlbGV0ZShjb25uZWN0aW9uKTtcbiAgICAgICAgLy8gVE9ETyAtIG5lZWQgdG8gc2F2ZSB0aGUgcXVldWUgdG8gdHJhbnNmZXIgaXQgdG8gYW5vdGhlciBjb25uZWN0aW9uXG4gICAgICAgIHRoaXMucmV0cnlRdWV1ZXMuZ2V0KGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSk/LmNsZWFyKCk7XG4gICAgICAgIHRoaXMucmV0cnlRdWV1ZXMuZGVsZXRlKGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSk7XG4gICAgfVxuICAgIGlzQ29ubmVjdGVkKGRlc3RpbmF0aW9uSWQpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuQ29ubmVjdGlvblN0YXRlLCAnQ29ubmVjdGlvbkdyb3VwJywgdGhpcy5sb2NhbElkLCB0aGlzLmNvbm5lY3Rpb25zLmtleXMoKSk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25zLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNvbm5lY3Rpb25zLmtleXMoKSlcbiAgICAgICAgICAgIC5maW5kKChjb25uZWN0aW9uKSA9PiBjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkgPT09IGRlc3RpbmF0aW9uSWQpPy5pc0Nvbm5lY3RlZCgpID8/IGZhbHNlO1xuICAgIH1cbiAgICByZWdpc3RlclB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhVG9waWNzLnNldChwdWJsaXNoZXIuZ2V0TGFiZWwoKSwgcHVibGlzaGVyKTtcbiAgICB9XG4gICAgdW5yZWdpc3RlclB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhVG9waWNzLmRlbGV0ZShwdWJsaXNoZXIuZ2V0TGFiZWwoKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc3Vic2NyaWJlci5zdWJzY3JpYmUodGhpcy5zZW5kLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmRhdGFVbnN1YnNjcmliZXJzLnNldChzdWJzY3JpYmVyLmdldExhYmVsKCksIHVuc3Vic2NyaWJlKTtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLmRhdGFVbnN1YnNjcmliZXJzLmdldChzdWJzY3JpYmVyLmdldExhYmVsKCkpPy4oKTtcbiAgICAgICAgdGhpcy5kYXRhVW5zdWJzY3JpYmVycy5kZWxldGUoc3Vic2NyaWJlci5nZXRMYWJlbCgpKTtcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkQ29udGVudFR5cGVzKCkge1xuICAgICAgICByZXR1cm4gW0NvbnRlbnRUeXBlLkRhdGEsIENvbnRlbnRUeXBlLlB1YlN1YiwgQ29udGVudFR5cGUuT2JqZWN0U3RvcmUsIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2VdO1xuICAgIH1cbiAgICBzZW5kKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEucmV0cnkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5wcm9wYWdhdGUgfHwgIWRhdGEuZGVzdGluYXRpb25JZHMgfHwgZGF0YS5kZXN0aW5hdGlvbklkcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkNvbm5lY3Rpb25JbnZhbGlkRGF0YUV2ZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDcmV3ZGxlQ29ubmVjdGlvbkdyb3VwOiBDYW5ub3QgYnJvYWRjYXN0IHdpdGggQXBwU3luYy4nLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbElkOiB0aGlzLmxvY2FsSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNDb25uZWN0ZWQoZGF0YS5kZXN0aW5hdGlvbklkc1swXSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWFybHlSZXR1cm5FcnJvcignSWdub3JpbmcgbWVzc2FnZSAtIHJldHJ5IGZsYWcgaXMgZmFsc2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGlzdGluZ1JlY2lwaWVudHMgPSBkYXRhLnJlY2lwaWVudHMgPz8gW107XG4gICAgICAgIC8vIEZpbHRlciBvdXQgZGVzdGluYXRpb25JZHMgdGhhdCBhcmUgYWxyZWFkeSBpbiByZWNpcGllbnRzXG4gICAgICAgIC8vIEFuZCBleHRlbmQgcmVjaXBpZW50cyB3aXRoIGFsbCBjb25uZWN0aW9uc1xuICAgICAgICAvLyBJZiB0aHJvd3MsIGl0IG1lYW5zIHRoYXQgYWxsIGNvbm5lY3Rpb25zIGFyZSBhbHJlYWR5IGluIHJlY2lwaWVudHMsIHdlIGNhbiBzdG9wIHByb3BhZ2F0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBUT0RPIC0gUmV2aWV3IGlmIHdlIG5lZWQgdG8gYWRqdXN0IGV4dGVuZGVkUmVjaXBpZW50cyB3aXRoIHRoZSBuZXcgcnVsZXNcbiAgICAgICAgICAgIGNvbnN0IHsgZmlsdGVyZWREZXN0aW5hdGlvbklkcywgZXh0ZW5kZWRSZWNpcGllbnRzIH0gPSB0aGlzLnVwZGF0ZVByb3BhZ2F0aW9uUHJvcGVydGllcyhkYXRhLCBleGlzdGluZ1JlY2lwaWVudHMpO1xuICAgICAgICAgICAgZGF0YS5kZXN0aW5hdGlvbklkcyA9IGZpbHRlcmVkRGVzdGluYXRpb25JZHM7XG4gICAgICAgICAgICBkYXRhLnJlY2lwaWVudHMgPSBleHRlbmRlZFJlY2lwaWVudHM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRWFybHlSZXR1cm5FcnJvcikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkNvbm5lY3Rpb24sICdDcmV3ZGxlQ29ubmVjdGlvbkdyb3VwJywgJ0Vhcmx5IHJldHVybicsIGRhdGEsIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE9ubHkgcHJvcGFnYXRlIGlmIG5vdCBhbGwgZGVzdGluYXRpb25JZHMgYXJlIGluIGNvbm5lY3Rpb25zXG4gICAgICAgIGNvbnN0IHByb3BhZ2F0ZSA9IHRoaXMuc2hvdWxkQ29udGludWVQcm9wYWdhdGlvbihkYXRhKTtcbiAgICAgICAgdGhpcy5sb2dQcm9wYWdhdGVTeXN0ZW1FdmVudChkYXRhLCBwcm9wYWdhdGUpO1xuICAgICAgICBkYXRhLnByb3BhZ2F0ZSA9IHByb3BhZ2F0ZTtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmdldENvbm5lY3Rpb25EZXN0aW5hdGlvbnMoZGF0YSwgZXhpc3RpbmdSZWNpcGllbnRzKTtcbiAgICAgICAgLy8gVE9ETyAtIFNob3VsZCB3ZSBoYXZlIGEgZ2xvYmFsIENvbm5lY3Rpb25Hcm91cCByZXRyeSBxdWV1ZT9cbiAgICAgICAgLy8gSWYgd2UgY3VycmVudGx5IGhhdmUgMCBjb25uZWN0aW9ucyAoZm9yIGV4YW1wbGUgb3VyIGNvbm5lY3Rpb25zIGFyZSBsZWZ0IGF0IHRoZSBzYW1lIHRpbWUpXG4gICAgICAgIC8vIFdoZW4gcHVibGlzaGluZyBhIG1lc3NhZ2UsIHRoZSBtZXNzYWdlIHdpbGwgc2ltcGx5IGJlIGxvc3RcbiAgICAgICAgZm9yIChjb25zdCBjb25uZWN0aW9uIG9mIGNvbm5lY3Rpb25zKSB7XG4gICAgICAgICAgICBjb25zdCByZXRyeVF1ZXVlID0gdGhpcy5yZXRyeVF1ZXVlcy5nZXQoY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpKTtcbiAgICAgICAgICAgIGlmICghcmV0cnlRdWV1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuQ29ubmVjdGlvbk5vUmV0cnlRdWV1ZSwge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ3Jld2RsZUNvbm5lY3Rpb25Hcm91cDogTm8gcmV0cnkgcXVldWUgYXZhaWxhYmxlLicsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsSWQ6IHRoaXMubG9jYWxJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlSWQ6IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHJ5UXVldWUucHVzaChkYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSZW1vdGVJZCgpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBnZXRMb2NhbElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbElkO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUxpc3RlbmVycy5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICB1cGRhdGVQcm9wYWdhdGlvblByb3BlcnRpZXMoZGF0YSwgZXhpc3RpbmdSZWNpcGllbnRzKSB7XG4gICAgICAgIGNvbnN0IG5ld1Byb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICBmaWx0ZXJlZERlc3RpbmF0aW9uSWRzOiBkYXRhLmRlc3RpbmF0aW9uSWRzLFxuICAgICAgICAgICAgZXh0ZW5kZWRSZWNpcGllbnRzOiBkYXRhLnJlY2lwaWVudHMsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghZGF0YS5wcm9wYWdhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdQcm9wZXJ0aWVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlY2lwaWVudHMgPSBBcnJheS5mcm9tKHRoaXMuY29ubmVjdGlvbnMua2V5cygpKVxuICAgICAgICAgICAgLmZpbHRlcigoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRDb25uZWN0aW9uVHlwZSgpID09PSBQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSB8fCBjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpXG4gICAgICAgICAgICAubWFwKChjb25uZWN0aW9uKSA9PiBjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkpO1xuICAgICAgICBjb25zdCBhbGxSZWNpcGllbnRzUmVjZWl2ZWQgPSByZWNpcGllbnRzLnJlZHVjZSgoYWNjLCByZWNpcGllbnQpID0+IGFjYyAmJiBkYXRhLnJlY2lwaWVudHMuaW5jbHVkZXMocmVjaXBpZW50KSwgdHJ1ZSk7XG4gICAgICAgIGlmIChhbGxSZWNpcGllbnRzUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFYXJseVJldHVybkVycm9yKCdBbGwgcmVjaXBpZW50cyBhbHJlYWR5IHJlY2VpdmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEuZGVzdGluYXRpb25JZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkRGVzdGluYXRpb25JZHMgPSBkYXRhLmRlc3RpbmF0aW9uSWRzLmZpbHRlcigoZGVzdGluYXRpb25JZCkgPT4gZGVzdGluYXRpb25JZCAhPT0gdGhpcy5sb2NhbElkICYmICFkYXRhLnJlY2lwaWVudHMuaW5jbHVkZXMoZGVzdGluYXRpb25JZCkpO1xuICAgICAgICAgICAgaWYgKGZpbHRlcmVkRGVzdGluYXRpb25JZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVhcmx5UmV0dXJuRXJyb3IoJ05vIGRlc3RpbmF0aW9uSWRzIGxlZnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1Byb3BlcnRpZXMuZmlsdGVyZWREZXN0aW5hdGlvbklkcyA9IGZpbHRlcmVkRGVzdGluYXRpb25JZHM7XG4gICAgICAgIH1cbiAgICAgICAgbmV3UHJvcGVydGllcy5leHRlbmRlZFJlY2lwaWVudHMgPSBbLi4ubmV3IFNldChbLi4uZXhpc3RpbmdSZWNpcGllbnRzLCAuLi5yZWNpcGllbnRzLCB0aGlzLmxvY2FsSWRdKV07IC8vIFJlbW92ZXMgZHVwbGljYXRlc1xuICAgICAgICByZXR1cm4gbmV3UHJvcGVydGllcztcbiAgICB9XG4gICAgbG9nUHJvcGFnYXRlU3lzdGVtRXZlbnQoZGF0YSwgcHJvcGFnYXRlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGRhdGEudG9waWNMYWJlbCA9PT0gU1lTVEVNX1RPUElDICYmICFpc1NlbmRlcihkYXRhLCB0aGlzLmxvY2FsSWQpICYmIGRhdGEucHJvcGFnYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRTeXN0ZW1Mb2cgPSBnZXRGb3JtYXR0ZWRTeXRlbUxvZyhkYXRhLCB0aGlzLmxvY2FsSWQpO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ1JhdyhMb2dnaW5nQ2hhbm5lbHMuU3lzdGVtLCBgJHtkYXRhLnV1aWR9IC0gU2VuZGluZyBwcm9wYWdhdGlvbiAoJHtwcm9wYWdhdGV9KSAke2Zvcm1hdHRlZFN5c3RlbUxvZ31gLCBkYXRhLCBwcm9wYWdhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNob3VsZENvbnRpbnVlUHJvcGFnYXRpb24oZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5kZXN0aW5hdGlvbklkcyAmJiBkYXRhLnByb3BhZ2F0ZSkge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbklkcyA9IEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRDb25uZWN0aW9uVHlwZSgpID09PSBQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSB8fCBjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpXG4gICAgICAgICAgICAgICAgLm1hcCgoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpKTtcbiAgICAgICAgICAgIHJldHVybiAhZGF0YS5kZXN0aW5hdGlvbklkcy5yZWR1Y2UoKGFjYywgZGVzdGluYXRpb25JZCkgPT4gYWNjICYmIGNvbm5lY3Rpb25JZHMuaW5jbHVkZXMoZGVzdGluYXRpb25JZCksIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhLnByb3BhZ2F0ZSA/PyBmYWxzZTtcbiAgICB9XG4gICAgZ2V0Q29ubmVjdGlvbkRlc3RpbmF0aW9ucyhkYXRhLCBleGlzdGluZ1JlY2lwaWVudHMpIHtcbiAgICAgICAgLy8gRmlsdGVyIGNvbm5lY3Rpb24gaWYgaXQgYWxyZWFkeSBleGlzdHMgaW4gcmVjaXBpZW50c1xuICAgICAgICAvLyBPciBpZiBpdCdzIG5vdCBhIHJlY2VpdmVyIGFuZCB3ZSBkb24ndCB3YW50IHRvIHByb3BhZ2F0ZVxuICAgICAgICBjb25zdCBmaWx0ZXJDb25uZWN0aW9uID0gKGNvbm5lY3Rpb25JZCkgPT4gIWV4aXN0aW5nUmVjaXBpZW50cy5pbmNsdWRlcyhjb25uZWN0aW9uSWQpXG4gICAgICAgICAgICAmJiAoaXNSZWNlaXZlcihkYXRhLCBjb25uZWN0aW9uSWQpIHx8IGRhdGEucHJvcGFnYXRlKTtcbiAgICAgICAgaWYgKGRhdGEucHJvcGFnYXRlICYmIGRhdGEuZGVzdGluYXRpb25JZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25JZHMgPSBBcnJheS5mcm9tKHRoaXMuY29ubmVjdGlvbnMua2V5cygpKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvblR5cGUoKSA9PT0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUgfHwgY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpKVxuICAgICAgICAgICAgICAgIC5tYXAoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSk7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IG51bWJlck9mQ29ubmVjdGlvbnNUb0Nob29zZSA9IGRhdGEuc291cmNlSWQgPT09IHRoaXMubG9jYWxJZCA/IDMgOiAxO1xuICAgICAgICAgICAgZGF0YS5kZXN0aW5hdGlvbklkcy5mb3JFYWNoKChkZXN0aW5hdGlvbklkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZUlkcyA9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldENsb3Nlc3ROb2Rlcyhjb25uZWN0aW9uSWRzLCBkZXN0aW5hdGlvbklkKTtcbiAgICAgICAgICAgICAgICBsZXQgbm9kZUlkc0NvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW1pemF0aW9uQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIG5vZGVJZHMuZm9yRWFjaCgobm9kZUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlSWRzQ291bnQgPj0gbnVtYmVyT2ZDb25uZWN0aW9uc1RvQ2hvb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpLmZpbmQoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSA9PT0gbm9kZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBjb3JlIGNvbm5lY3Rpb25zIGlmIHdlIHVzZWQgb3B0aW1pemF0aW9ucyBjb25uZWN0aW9ucyB1bnRpbCB3ZSd2ZSBpZ25vcmVkIHRoZSBmaXJzdCBuIGNvbm5lY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGFsbG93IHRvIGhhdmUgYSBiZXR0ZXIgZGlzdHJpYnV0aW9uIG9mIGNvbm5lY3Rpb25zIGJ5IHNlbGVjdGluZyB0aGUgY29yZSBjb25uZWN0aW9ucyBjbG9zZXN0IHRvIHlvdVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gdGhlIHJpZ2h0IGRpcmVjdGlvbiAoYW5jZXN0b3IgdnMgc3VjY2Vzc29yKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvblR5cGUoKSA9PT0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUgJiYgb3B0aW1pemF0aW9uQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pemF0aW9uQ291bnQgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5hZGQoY29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5nZXRDb25uZWN0aW9uVHlwZSgpID09PSBQZWVyQ29ubmVjdGlvblR5cGUuT3B0aW1pemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW1pemF0aW9uQ291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVJZHNDb3VudCArPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKGNvbm5lY3Rpb25zKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgc2VuZCB0byBjb3JlIGNvbm5lY3Rpb25zIG9yIGlmIGl0J3MgYSBkaXJlY3QgbWVzc2FnZSwgb3RoZXJ3aXNlIHNlbmQgdG8gY29ubmVjdGVkIGNvbm5lY3Rpb25zXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY29ubmVjdGlvbnMua2V5cygpKVxuICAgICAgICAgICAgLmZpbHRlcigoY29ubmVjdGlvbikgPT4gZmlsdGVyQ29ubmVjdGlvbihjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkpICYmICghZGF0YS5wcm9wYWdhdGUgfHwgY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpIHx8IGNvbm5lY3Rpb24uZ2V0Q29ubmVjdGlvblR5cGUoKSA9PT0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBFYXJseVJldHVybkVycm9yIH0gZnJvbSAnZXJyb3JzL0Vhcmx5UmV0dXJuRXJyb3InO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgaXNSZWNlaXZlciB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vSGVscGVycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIFBlZXJDb25uZWN0aW9uUG9vbCB7XG4gICAgbG9jYWxJZDtcbiAgICBtZXNzYWdlQnVmZmVyO1xuICAgIGNvbm5lY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsSWQsIG1lc3NhZ2VCdWZmZXIpIHtcbiAgICAgICAgdGhpcy5sb2NhbElkID0gbG9jYWxJZDtcbiAgICAgICAgdGhpcy5tZXNzYWdlQnVmZmVyID0gbWVzc2FnZUJ1ZmZlcjtcbiAgICB9XG4gICAgY2xvc2UoKSB7IH1cbiAgICBzZW5kKG1lc3NhZ2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb25uZWN0aW9uIG9mIHRoaXMuY29ubmVjdGlvbnMua2V5cygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24uc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIHJldHJ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBlYXJseSByZXR1cm5cbiAgICAgICAgICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRWFybHlSZXR1cm5FcnJvcikpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuUG9vbCwgYHNlbmQgZXJyb3Igb24gJHtjb25uZWN0aW9ufWAsIGUsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Qb29sLCAnTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIHRvIHNlbmQgbWVzc2FnZScpO1xuICAgIH1cbiAgICBhZGRDb25uZWN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBjb25uZWN0aW9uLm9uTWVzc2FnZSgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZUJ1ZmZlci5oYXNNZXNzYWdlKGRhdGEudXVpZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS50b3BpY0xhYmVsID09PSBTWVNURU1fVE9QSUMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VCdWZmZXIuYWRkTWVzc2FnZShkYXRhLnV1aWQpO1xuICAgICAgICAgICAgICAgIGlmIChpc1JlY2VpdmVyKGRhdGEsIHRoaXMubG9jYWxJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYz8ucHVibGlzaChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLnNldChjb25uZWN0aW9uLCB1bnN1YnNjcmliZSk7XG4gICAgfVxuICAgIHJlbW92ZUNvbm5lY3Rpb24oY29ubmVjdGlvbikge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmdldChjb25uZWN0aW9uKT8uKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbnMuZGVsZXRlKGNvbm5lY3Rpb24pO1xuICAgIH1cbiAgICBnZXRMb2NhbElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbElkO1xuICAgIH1cbiAgICBnZXRSZW1vdGVJZCgpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBnZXRTdXBwb3J0ZWRDb250ZW50VHlwZXMoKSB7XG4gICAgICAgIHJldHVybiBbQ29udGVudFR5cGUuRGF0YV07XG4gICAgfVxuICAgIGlzQ29ubmVjdGVkKCkge1xuICAgICAgICAvLyBUT0RPIC0gaW1wbGVtZW50XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFIH0gZnJvbSAnY29uc3RhbnRzL0NvbnRlbnQnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDLCBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFBFRVJfQ09OTkVDVElPTl9DSFVOS19JREVOVElGSUVSLCBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSwgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9QSU5HLCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BPTkcsIFBFRVJfQ09OTkVDVElPTl9NRVNTQUdFX1JFVFJZIH0gZnJvbSAnY29uc3RhbnRzL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLCBQZWVyQ29ubmVjdGlvbk9yaWdpbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VQZWVyQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL0Jhc2VQZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBzZW5kU3RhdHMgfSBmcm9tICdtb2RlbHMvU3RhdHMvSGVscGVycyc7XG5pbXBvcnQgaW50ZXJ2YWwgZnJvbSAndXRpbHMvSW50ZXJ2YWwvSW50ZXJ2YWwnO1xuaW1wb3J0IHsgZ2V0TG9nZ2FibGVTeXN0ZW1NZXNzYWdlIH0gZnJvbSAndXRpbHMvTG9nZ2VyL0hlbHBlcnMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7IGNyZWF0ZVNpbmdsZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIFJlY2VpdmVyUGVlckNvbm5lY3Rpb24gZXh0ZW5kcyBCYXNlUGVlckNvbm5lY3Rpb24ge1xuICAgIG1lc3NhZ2VDYWxsYmFjayA9IGNyZWF0ZVNpbmdsZU9ic2VydmVyKCk7XG4gICAgdHJhY2tDYWxsYmFjayA9IGNyZWF0ZVNpbmdsZU9ic2VydmVyKCk7XG4gICAgcmVtb3ZlVHJhY2tDYWxsYmFjayA9IGNyZWF0ZVNpbmdsZU9ic2VydmVyKCk7XG4gICAgcmVjZWl2ZXJzID0gbmV3IE1hcCgpO1xuICAgIGNodW5rcyA9IG5ldyBNYXAoKTtcbiAgICB3YWl0U3VjY2VzcztcbiAgICBtZXNzYWdlc1JlY2VpdmVkID0gMDtcbiAgICBzeXN0ZW1NZXNzYWdlc1JlY2VpdmVkID0geyBtZXNzYWdlczogeyB0b3RhbDogMCB9IH07XG4gICAgYnl0ZXNSZWNlaXZlZCA9IDA7XG4gICAgdGltZVJlY2VpdmluZyA9IDA7XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJXYWl0U3VjY2VzcygpO1xuICAgICAgICB0aGlzLnJlY2VpdmVycy5jbGVhcigpO1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVPZmZlcihvZmZlciwgdmVyc2lvbikge1xuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5jbGVhcldhaXRTdWNjZXNzKCk7XG4gICAgICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIob2ZmZXIpO1xuICAgICAgICB0aGlzLnByb2Nlc3NQZW5kaW5nSGFuZHNoYWtlQ2FuZGlkYXRlcygpO1xuICAgICAgICBjb25zdCB1dWlkID0gdXVpZHY0KCk7XG4gICAgICAgIHRoaXMucHVibGlzaFN5c3RlbU1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5BbnN3ZXIsXG4gICAgICAgICAgICBhbnN3ZXIsXG4gICAgICAgICAgICB2ZXJzaW9uLFxuICAgICAgICAgICAgY29ubmVjdGlvblR5cGU6IHRoaXMuY29ubmVjdGlvblR5cGUsXG4gICAgICAgIH0sIHV1aWQpO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uVHlwZSAhPT0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndhaXRTdWNjZXNzID0gaW50ZXJ2YWwuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5BbnN3ZXIsXG4gICAgICAgICAgICAgICAgYW5zd2VyLFxuICAgICAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblR5cGU6IHRoaXMuY29ubmVjdGlvblR5cGUsXG4gICAgICAgICAgICB9LCB1dWlkKTtcbiAgICAgICAgfSwgUEVFUl9DT05ORUNUSU9OX01FU1NBR0VfUkVUUlkpO1xuICAgIH1cbiAgICBoYW5kbGVTdWNjZXNzKCkge1xuICAgICAgICB0aGlzLmNsZWFyV2FpdFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgaGFuZGxlTmVlZFJlc3RhcnQodmVyc2lvbikge1xuICAgICAgICB0aGlzLnJlc2V0Q29ubmVjdGlvbih2ZXJzaW9uKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoU3lzdGVtTWVzc2FnZSh7IHR5cGU6IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuUmVzdGFydCB9KTtcbiAgICB9XG4gICAgYXN5bmMgY29sbGVjdFN0YXRzKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtVG9waWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uY29sbGVjdFJlY2VpdmVyc1N0YXRzKHRoaXMucmVjZWl2ZXJzLCAoc3RhdHMsIHN0cmVhbUlkKSA9PiB7XG4gICAgICAgICAgICBzZW5kU3RhdHMoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuU3RhdHMsXG4gICAgICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgICAgIHN0YXRzLFxuICAgICAgICAgICAgfSwgdGhpcy5zeXN0ZW1Ub3BpYyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5QZWVyQ29ubmVjdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLlN0YXRzLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBzdGF0czoge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFBlZXJDb25uZWN0aW9uT3JpZ2luLlJlY2VpdmVyLFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IHRoaXMubWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNSZWNlaXZlZDogdGhpcy5ieXRlc1JlY2VpdmVkLFxuICAgICAgICAgICAgICAgICAgICB0aW1lUmVjZWl2aW5nOiB0aGlzLnRpbWVSZWNlaXZpbmcsXG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbU1lc3NhZ2VzOiB0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUNhbGxiYWNrLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIG9uVHJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tDYWxsYmFjay5zdWJzY3JpYmUoKHsgdHJhY2ssIHN0cmVhbSB9KSA9PiBjYWxsYmFjayh0cmFjaywgc3RyZWFtKSk7XG4gICAgfVxuICAgIG9uUmVtb3ZlVHJhY2soY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlVHJhY2tDYWxsYmFjay5zdWJzY3JpYmUoKHsgdHJhY2ssIHN0cmVhbSB9KSA9PiBjYWxsYmFjayh0cmFjaywgc3RyZWFtKSk7XG4gICAgfVxuICAgIHJlc2V0Q29ubmVjdGlvbih2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMuY2xlYXJXYWl0U3VjY2VzcygpO1xuICAgICAgICB0aGlzLnJlY2VpdmVycy5mb3JFYWNoKCh0cmFja3MpID0+IHtcbiAgICAgICAgICAgIHRyYWNrcy5jbGVhcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3VwZXIucmVzZXRDb25uZWN0aW9uKHZlcnNpb24pO1xuICAgIH1cbiAgICBzZW5kSWNlQ2FuZGlkYXRlcygpIHtcbiAgICAgICAgdGhpcy5wdWJsaXNoU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLkhhbmRzaGFrZSxcbiAgICAgICAgICAgIGNhbmRpZGF0ZXM6IHRoaXMuaGFuZHNoYWtlQ2FuZGlkYXRlcyxcbiAgICAgICAgICAgIG9yaWdpbjogUGVlckNvbm5lY3Rpb25PcmlnaW4uUmVjZWl2ZXIsXG4gICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLmN1cnJlbnRWZXJzaW9uLFxuICAgICAgICAgICAgY29ubmVjdGlvblR5cGU6IHRoaXMuY29ubmVjdGlvblR5cGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXR1cENvbm5lY3Rpb25FdmVudHMoKSB7XG4gICAgICAgIHN1cGVyLnNldHVwQ29ubmVjdGlvbkV2ZW50cygpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25UcmFjayA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuQ29ubmVjdGlvbiwgJ0NyZXdkbGVSZWNlaXZlckNvbm5lY3Rpb24gb250cmFjaycsIHRoaXMubG9jYWxOb2RlLmdldElkKCksIGV2ZW50KTtcbiAgICAgICAgICAgIGV2ZW50LnN0cmVhbXNbMF0ub25yZW1vdmV0cmFjayA9IChyZW1vdmVFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZXJzLmdldChldmVudC5zdHJlYW1zWzBdLmlkKT8uZGVsZXRlKHJlbW92ZUV2ZW50LnRyYWNrKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWNlaXZlcnMuZ2V0KGV2ZW50LnN0cmVhbXNbMF0uaWQpPy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZXJzLmRlbGV0ZShldmVudC5zdHJlYW1zWzBdLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUcmFja0NhbGxiYWNrLnB1Ymxpc2goeyB0cmFjazogcmVtb3ZlRXZlbnQudHJhY2ssIHN0cmVhbTogZXZlbnQuc3RyZWFtc1swXSB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVjZWl2ZXJzLmhhcyhldmVudC5zdHJlYW1zWzBdLmlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZXJzLnNldChldmVudC5zdHJlYW1zWzBdLmlkLCBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWNlaXZlcnMuZ2V0KGV2ZW50LnN0cmVhbXNbMF0uaWQpLmFkZChldmVudC50cmFjayk7XG4gICAgICAgICAgICB0aGlzLnRyYWNrQ2FsbGJhY2sucHVibGlzaCh7IHRyYWNrOiBldmVudC50cmFjaywgc3RyZWFtOiBldmVudC5zdHJlYW1zWzBdIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25EYXRhQ2hhbm5lbCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbCA9IGV2ZW50LmNoYW5uZWw7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLm9uTWVzc2FnZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5kYXRhID09PSBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ21pc3NpbmctZGF0YWNoYW5uZWwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uOiAncmVjZWl2ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbC5zdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5zZW5kKFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUE9ORyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVPbk1lc3NhZ2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cbiAgICBoYW5kbGVPbk1lc3NhZ2UoZGF0YSkge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICYmIGRhdGEuc3RhcnRzV2l0aChQRUVSX0NPTk5FQ1RJT05fQ0hVTktfSURFTlRJRklFUikpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNSZWNlaXZlZCArPSAxO1xuICAgICAgICAgICAgdGhpcy5ieXRlc1JlY2VpdmVkICs9IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQ2h1bmtNZXNzYWdlKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgZGF0YS5sZW5ndGggPD0gUEVFUl9DT05ORUNUSU9OX0NIVU5LX1NJWkUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzUmVjZWl2ZWQgKz0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVzUmVjZWl2ZWQgKz0gZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gZGF0YS5ieXRlTGVuZ3RoIDogZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBbaGVhZGVyLCBjb250ZW50XSA9IHRoaXMuc3BsaXRQYXJ0cyhkYXRhKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gaGVhZGVyO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudC5kYXRhID0gY29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudG9waWNMYWJlbCA9PT0gU1lTVEVNX1RPUElDKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1NZXNzYWdlc1JlY2VpdmVkLm1lc3NhZ2VzLnRvdGFsICs9IDE7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzeXN0ZW1NZXNzYWdlVHlwZSwgc3lzdGVtQ29udGVudE1lc3NhZ2VUeXBlIH0gPSBnZXRMb2dnYWJsZVN5c3RlbU1lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWRbc3lzdGVtTWVzc2FnZVR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtTWVzc2FnZXNSZWNlaXZlZFtzeXN0ZW1NZXNzYWdlVHlwZV0gPSB7IFtzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGVdOiAwIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zeXN0ZW1NZXNzYWdlc1JlY2VpdmVkW3N5c3RlbU1lc3NhZ2VUeXBlXVtzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtTWVzc2FnZXNSZWNlaXZlZFtzeXN0ZW1NZXNzYWdlVHlwZV1bc3lzdGVtQ29udGVudE1lc3NhZ2VUeXBlXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zeXN0ZW1NZXNzYWdlc1JlY2VpdmVkW3N5c3RlbU1lc3NhZ2VUeXBlXS50b3RhbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWRbc3lzdGVtTWVzc2FnZVR5cGVdLnRvdGFsID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1NZXNzYWdlc1JlY2VpdmVkW3N5c3RlbU1lc3NhZ2VUeXBlXVtzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGVdICs9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1NZXNzYWdlc1JlY2VpdmVkW3N5c3RlbU1lc3NhZ2VUeXBlXS50b3RhbCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlQ2FsbGJhY2sucHVibGlzaChtZXNzYWdlKTtcbiAgICAgICAgICAgIHRoaXMudGltZVJlY2VpdmluZyArPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG4gICAgaGFuZGxlQ2h1bmtNZXNzYWdlKGRhdGEpIHtcbiAgICAgICAgY29uc3QgaW5mbyA9IGRhdGEuc3BsaXQoJzsnKTtcbiAgICAgICAgY29uc3QgaWQgPSBpbmZvWzFdO1xuICAgICAgICBjb25zdCBjaHVuayA9IHBhcnNlSW50KGluZm9bMl0sIDEwKTtcbiAgICAgICAgY29uc3QgdG90YWwgPSBwYXJzZUludChpbmZvWzNdLCAxMCk7XG4gICAgICAgIGNvbnN0IGNodW5rRGF0YSA9IGRhdGEucmVwbGFjZShgJHtQRUVSX0NPTk5FQ1RJT05fQ0hVTktfSURFTlRJRklFUn07JHtpZH07JHtjaHVua307JHt0b3RhbH07YCwgJycpO1xuICAgICAgICBpZiAoIXRoaXMuY2h1bmtzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtzLnNldChpZCwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuY2h1bmtzLmdldChpZCk7XG4gICAgICAgIGNodW5rc1tjaHVua10gPSBjaHVua0RhdGE7XG4gICAgICAgIGlmIChjaHVua3MubGVuZ3RoID09PSB0b3RhbCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVPbk1lc3NhZ2UoY2h1bmtzLmpvaW4oJycpKTtcbiAgICAgICAgICAgIHRoaXMuY2h1bmtzLmRlbGV0ZShpZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXJXYWl0U3VjY2VzcygpIHtcbiAgICAgICAgdGhpcy53YWl0U3VjY2Vzcz8uKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLndhaXRTdWNjZXNzO1xuICAgIH1cbiAgICBhcnJheUJ1ZmZlclRvT2JqZWN0KGJ1ZmZlcikge1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGpzb25TdHJpbmcgPSBkZWNvZGVyLmRlY29kZShidWZmZXIpO1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICB9XG4gICAgc3BsaXRQYXJ0cyhidWZmZXIpIHtcbiAgICAgICAgY29uc3QgaGVhZGVyU2l6ZVZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIuc2xpY2UoMCwgQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFKSk7XG4gICAgICAgIGNvbnN0IGhlYWRlclNpemUgPSBuZXcgVWludDMyQXJyYXkoaGVhZGVyU2l6ZVZpZXcuYnVmZmVyKVswXTtcbiAgICAgICAgY29uc3QgaGVhZGVyVmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlci5zbGljZShDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUsIENPTlRFTlRfRklMRV9IRUFERVJfU0laRSArIGhlYWRlclNpemUpKTtcbiAgICAgICAgY29uc3QgY29udGVudFZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIuc2xpY2UoQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFICsgaGVhZGVyU2l6ZSkpO1xuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmFycmF5QnVmZmVyVG9PYmplY3QoaGVhZGVyVmlldy5idWZmZXIpO1xuICAgICAgICByZXR1cm4gW2hlYWRlciwgY29udGVudFZpZXcuYnVmZmVyXTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IENPTlRFTlRfRklMRV9IRUFERVJfU0laRSB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IFJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFLCBSRU1FRElBVElPTl9VUEdSQURFX1dBSVRfVElNRSB9IGZyb20gJ2NvbnN0YW50cy9SZW1lZGlhdGlvbic7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUMsIFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgUEVFUl9DT05ORUNUSU9OX1JFQ09OTkVDVF9USU1FT1VULCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkcsIFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUE9ORywgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9USFJFU0hPTEQsIFBFRVJfQ09OTkVDVElPTl9USU1FT1VULCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1RJTUVPVVQsIFBFRVJfQ09OTkVDVElPTl9NRVNTQUdFX1JFVFJZLCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX0lOVEVSVkFMLCBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSwgUEVFUl9DT05ORUNUSU9OX0NIVU5LX0lERU5USUZJRVIsIFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9SRVRSWV9ERUxBWSwgUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9USFJFU0hPTEQsIFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9ESVNDT05ORUNUX0hBTkRMRVJfREVMQVkgfSBmcm9tICdjb25zdGFudHMvUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uVHlwZSwgUGVlckNvbm5lY3Rpb25PcmlnaW4sIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUmVtZWRpYXRpb25BY3Rpb24sIFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1JlbWVkaWF0aW9uL1JlbWVkaWF0aW9uJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgUXVldWVFbGVtZW50UHJpb3JpdHkgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL1F1ZXVlJztcbmltcG9ydCB7IEJhc2VQZWVyQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL0Jhc2VQZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBhcHBseVJlbWVkaWF0aW9uLCBmaW5kU2VuZGVyLCBnZXRNYXhCaXRyYXRlIH0gZnJvbSAnbW9kZWxzL1JlbWVkaWF0aW9uL0hlbHBlcnMnO1xuaW1wb3J0IHsgc2VuZFN0YXRzIH0gZnJvbSAnbW9kZWxzL1N0YXRzL0hlbHBlcnMnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBjcmVhdGVQcmlvcml0eVJldHJ5UXVldWUgfSBmcm9tICd1dGlscy9RdWV1ZS9Qcmlvcml0eVJldHJ5UXVldWUnO1xuaW1wb3J0IHsgU3luY1F1ZXVlQ2FsbGJhY2sgfSBmcm9tICd1dGlscy9RdWV1ZS9RdWV1ZSc7XG5leHBvcnQgY2xhc3MgU2VuZGVyUGVlckNvbm5lY3Rpb24gZXh0ZW5kcyBCYXNlUGVlckNvbm5lY3Rpb24ge1xuICAgIG1heEZwcztcbiAgICBtYXhCcHA7XG4gICAgc2VuZGVycyA9IG5ldyBNYXAoKTtcbiAgICBoZWFydGJlYXRVbnN1YnNjcmliZXI7XG4gICAgd2FpdEFuc3dlcjtcbiAgICBsYXN0SGVhcnRiZWF0O1xuICAgIGlzUmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgY29ubmVjdGlvblRpbWVvdXQ7XG4gICAgcmVzdGFydFRpbWVvdXQ7XG4gICAgdXBncmFkZVRpbWVvdXQ7XG4gICAgcmV0cnlRdWV1ZSA9IGNyZWF0ZVByaW9yaXR5UmV0cnlRdWV1ZShuZXcgU3luY1F1ZXVlQ2FsbGJhY2sodGhpcy5zZW5kQWN0aW9uLmJpbmQodGhpcyksIHRoaXMud2FpdFNlbmRCdWZmZXIuYmluZCh0aGlzKSkpO1xuICAgIG1lc3NhZ2VzU2VudCA9IDA7XG4gICAgYnl0ZXNTZW50ID0gMDtcbiAgICB0aW1lU2VuZGluZyA9IDA7XG4gICAgcm91bmRUcmlwVGltZSA9IDA7XG4gICAgb25jbG9zZVRpbWVvdXQ7XG4gICAgY29uc3RydWN0b3IoY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkLCBpY2VTZXJ2ZXJzLCBjb25uZWN0aW9uVHlwZSwgbWF4RnBzLCBtYXhCcHAsIGNvbm5lY3Rpb25Db25zdHJ1Y3Rvcikge1xuICAgICAgICBzdXBlcihjbHVzdGVySWQsIGxvY2FsTm9kZSwgcmVtb3RlSWQsIGljZVNlcnZlcnMsIGNvbm5lY3Rpb25UeXBlLCBjb25uZWN0aW9uQ29uc3RydWN0b3IpO1xuICAgICAgICB0aGlzLm1heEZwcyA9IG1heEZwcztcbiAgICAgICAgdGhpcy5tYXhCcHAgPSBtYXhCcHA7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNsZWFyVXBncmFkZVRpbWVvdXQoKTtcbiAgICAgICAgdGhpcy5jbGVhckhlYXJ0YmVhdCgpO1xuICAgICAgICBkZWxldGUgdGhpcy5sYXN0SGVhcnRiZWF0O1xuICAgICAgICB0aGlzLmNsZWFyUmVzdGFydFRpbWVvdXQoKTtcbiAgICAgICAgdGhpcy5jbGVhckNvbm5lY3Rpb25UaW1lb3V0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJXYWl0QW5zd2VyKCk7XG4gICAgICAgIHRoaXMuc2VuZGVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLmlzUmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmV0cnlRdWV1ZS5xdWV1ZXMuZm9yRWFjaCgocXVldWUpID0+IHF1ZXVlLmNsZWFyKCkpO1xuICAgICAgICB0aGlzLmNsZWFyT25jbG9zZVRpbWVvdXQoKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG4gICAgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5sYXN0SGVhcnRiZWF0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzQ29ubmVjdGVkKCkgJiYgRGF0ZS5ub3coKSAtIHRoaXMubGFzdEhlYXJ0YmVhdCA8IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfVEhSRVNIT0xEO1xuICAgIH1cbiAgICBhc3luYyBjb2xsZWN0U3RhdHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW1Ub3BpYykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jb2xsZWN0U2VuZGVyc1N0YXRzKHRoaXMuc2VuZGVycywgKHN0YXRzLCBzdHJlYW1JZCkgPT4ge1xuICAgICAgICAgICAgc2VuZFN0YXRzKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLlN0YXRzLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBzdGF0cyxcbiAgICAgICAgICAgIH0sIHRoaXMuc3lzdGVtVG9waWMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuUGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdGF0cyxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZW50OiB0aGlzLm1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNTZW50OiB0aGlzLmJ5dGVzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgdGltZVNlbmRpbmc6IHRoaXMudGltZVNlbmRpbmcsXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kVHJpcFRpbWU6IHRoaXMucm91bmRUcmlwVGltZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZU9mZmVyKG9wdGlvbnMpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuQ29ubmVjdGlvbiwgJ0NyZXdkbGVTZW5kZXJDb25uZWN0aW9uIGNyZWF0ZU9mZmVyJywgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgdGhpcy5yZW1vdGVJZCk7XG4gICAgICAgIHRoaXMuY2xlYXJSZXN0YXJ0VGltZW91dCgpO1xuICAgICAgICB0aGlzLmNsZWFyQ29ubmVjdGlvblRpbWVvdXQoKTtcbiAgICAgICAgdGhpcy5jbGVhcldhaXRBbnN3ZXIoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7XG4gICAgICAgIH0sIFBFRVJfQ09OTkVDVElPTl9USU1FT1VUKTtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsID0gdGhpcy5jb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdkYXRhJyk7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLmJ1ZmZlcmVkQW1vdW50TG93VGhyZXNob2xkID0gUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9USFJFU0hPTEQ7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmNsb3NlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5vbmNsb3NlVGltZW91dDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFsnY29ubmVjdGluZycsICdvcGVuJ10uaW5jbHVkZXModGhpcy5kYXRhQ2hhbm5lbD8uc3RhdGUgPz8gJycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgfSwgUEVFUl9DT05ORUNUSU9OX0RBVEFDSEFOTkVMX0RJU0NPTk5FQ1RfSEFORExFUl9ERUxBWSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9mZmVyID0gYXdhaXQgdGhpcy5jb25uZWN0aW9uLmNyZWF0ZU9mZmVyKG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXRoaXMubGFzdEhlYXJ0YmVhdCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0SGVhcnRiZWF0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1dWlkID0gdXVpZHY0KCk7XG4gICAgICAgIHRoaXMucHVibGlzaFN5c3RlbU1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5PZmZlcixcbiAgICAgICAgICAgIG9mZmVyLFxuICAgICAgICAgICAgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlOiB0aGlzLmNvbm5lY3Rpb25UeXBlLFxuICAgICAgICB9LCB1dWlkKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblR5cGUgIT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53YWl0QW5zd2VyID0gaW50ZXJ2YWwuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5PZmZlcixcbiAgICAgICAgICAgICAgICBvZmZlcixcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiB0aGlzLmN1cnJlbnRWZXJzaW9uLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlOiB0aGlzLmNvbm5lY3Rpb25UeXBlLFxuICAgICAgICAgICAgfSwgdXVpZCk7XG4gICAgICAgIH0sIFBFRVJfQ09OTkVDVElPTl9NRVNTQUdFX1JFVFJZKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQW5zd2VyKGFuc3dlciwgdmVyc2lvbikge1xuICAgICAgICBpZiAodmVyc2lvbiAhPT0gdGhpcy5jdXJyZW50VmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXJXYWl0QW5zd2VyKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uaGFuZGxlQW5zd2VyKGFuc3dlciwgdGhpcy5jcmVhdGVPZmZlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1BlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ29ubmVjdGlvblRpbWVvdXQoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRIZWFydGJlYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VuZChtZXNzYWdlKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkRGF0YUNoYW5uZWwsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGF0YUNoYW5uZWwgaXMgbm90IGluaXRpYWxpemVkLicsXG4gICAgICAgICAgICAgICAgbG9jYWxJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICByZW1vdGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBldmVudE1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbC5zdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkludmFsaWREYXRhQ2hhbm5lbCwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEYXRhIGNsdXN0ZXIgaXMgbm90IG9wZW4uJyxcbiAgICAgICAgICAgICAgICBsb2NhbElkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgICAgIGV2ZW50TWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlbmNvZGVkTWVzc2FnZTtcbiAgICAgICAgaWYgKG1lc3NhZ2UuY29udGVudC5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBtZXNzYWdlLmNvbnRlbnQuZGF0YTtcbiAgICAgICAgICAgIGRlbGV0ZSBtZXNzYWdlLmNvbnRlbnQuZGF0YTtcbiAgICAgICAgICAgIGVuY29kZWRNZXNzYWdlID0gdGhpcy5tZXJnZVBhcnRzKG1lc3NhZ2UsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW5jb2RlZE1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGVuY29kZWRNZXNzYWdlID09PSAnc3RyaW5nJyAmJiBlbmNvZGVkTWVzc2FnZS5sZW5ndGggPiBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZENodW5rZWQobWVzc2FnZSwgZW5jb2RlZE1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gbWVzc2FnZS50b3BpY0xhYmVsID09PSBTWVNURU1fVE9QSUMgJiYgW1N5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbiwgU3lzdGVtTWVzc2FnZVR5cGUuUGVlckNvbm5lY3Rpb25dLmluY2x1ZGVzKG1lc3NhZ2UubWVzc2FnZVR5cGUpXG4gICAgICAgICAgICA/IFF1ZXVlRWxlbWVudFByaW9yaXR5LkhpZ2hcbiAgICAgICAgICAgIDogbWVzc2FnZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gUXVldWVFbGVtZW50UHJpb3JpdHkuTG93IDogUXVldWVFbGVtZW50UHJpb3JpdHkuTWVkaXVtO1xuICAgICAgICB0aGlzLnNlbmRXaXRoUmV0cnkoZW5jb2RlZE1lc3NhZ2UsIHByaW9yaXR5KTtcbiAgICB9XG4gICAgYWRkVHJhY2sodHJhY2ssIHN0cmVhbSwgcHJpb3JpdHksIHBhcmFtcykge1xuICAgICAgICBjb25zdCBtYXhCaXRyYXRlID0gZ2V0TWF4Qml0cmF0ZSh0aGlzLm1heEZwcywgdGhpcy5tYXhCcHApO1xuICAgICAgICBjb25zdCBzZW5kZXJzID0gdGhpcy5zZW5kZXJzLmdldChzdHJlYW0uaWQpIHx8IHtcbiAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgIHByaW9yaXR5LFxuICAgICAgICAgICAgcmVzb2x1dGlvblNjYWxlOiAxLFxuICAgICAgICAgICAgbWluUmVzb2x1dGlvblNjYWxlOiAxLFxuICAgICAgICAgICAgYml0cmF0ZTogbWF4Qml0cmF0ZSxcbiAgICAgICAgICAgIG1heEJpdHJhdGU6IG1heEJpdHJhdGUsXG4gICAgICAgICAgICBmcmFtZXJhdGU6IHRoaXMubWF4RnBzLFxuICAgICAgICAgICAgbWF4RnJhbWVyYXRlOiB0aGlzLm1heEZwcyxcbiAgICAgICAgICAgIHRyYWNrczoge30sXG4gICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHRyYWNrcyA9IHNlbmRlcnMudHJhY2tzW3RyYWNrLmtpbmRdIHx8IHsgdHJhY2sgfTtcbiAgICAgICAgaWYgKHRyYWNrcy5zZW5kZXIpIHtcbiAgICAgICAgICAgIHRyYWNrcy50cmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlcGxhY2VUcmFjayh0cmFjaywgdHJhY2tzLnNlbmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmFja3Muc2VuZGVyID0gdGhpcy5jb25uZWN0aW9uLmFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHNlbmRlcnMudHJhY2tzW3RyYWNrLmtpbmRdID0gdHJhY2tzO1xuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICBzZW5kZXJzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5raW5kID09PSAndmlkZW8nICYmIHBhcmFtcy5yZXNvbHV0aW9uICYmIHBhcmFtcy5tYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICBzZW5kZXJzLnJlc29sdXRpb25TY2FsZSA9IHRoaXMuZ2V0UmVzb2x1dGlvblNjYWxlKHBhcmFtcy5yZXNvbHV0aW9uLCBwYXJhbXMubWF4UmVzb2x1dGlvbik7XG4gICAgICAgICAgICBzZW5kZXJzLm1pblJlc29sdXRpb25TY2FsZSA9IHNlbmRlcnMucmVzb2x1dGlvblNjYWxlO1xuICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLnZpZGVvICYmIHNlbmRlcnMudHJhY2tzLnZpZGVvLnNlbmRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbmRlciA9IHNlbmRlcnMudHJhY2tzLnZpZGVvLnNlbmRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2V0RW5jb2RpbmdQYXJhbWV0ZXJzKHNlbmRlciwgTWF0aC5mbG9vcihzZW5kZXJzLnJlc29sdXRpb25TY2FsZSAqIDEwKSAvIDEwLCBzZW5kZXJzLmZyYW1lcmF0ZSwgc2VuZGVycy5iaXRyYXRlLCBzZW5kZXJzLnByaW9yaXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRlcnMuc2V0KHN0cmVhbS5pZCwgc2VuZGVycyk7XG4gICAgfVxuICAgIHNldFByaW9yaXR5KHN0cmVhbSwgcHJpb3JpdHkpIHtcbiAgICAgICAgY29uc3Qgc2VuZGVycyA9IHRoaXMuc2VuZGVycy5nZXQoc3RyZWFtLmlkKTtcbiAgICAgICAgaWYgKHNlbmRlcnMgJiYgc2VuZGVycy5wcmlvcml0eSAhPT0gcHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHNlbmRlcnMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgICAgIGlmIChzZW5kZXJzLnRyYWNrcy52aWRlbyAmJiBzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZW5kZXIgPSBzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNldEVuY29kaW5nUGFyYW1ldGVycyhzZW5kZXIsIE1hdGguZmxvb3Ioc2VuZGVycy5yZXNvbHV0aW9uU2NhbGUgKiAxMCkgLyAxMCwgc2VuZGVycy5mcmFtZXJhdGUsIHNlbmRlcnMuYml0cmF0ZSwgc2VuZGVycy5wcmlvcml0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UGFyYW1zKHN0cmVhbSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHNlbmRlcnMgPSB0aGlzLnNlbmRlcnMuZ2V0KHN0cmVhbS5pZCk7XG4gICAgICAgIGlmIChzZW5kZXJzKSB7XG4gICAgICAgICAgICBzZW5kZXJzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLmtpbmQgPT09ICd2aWRlbycgJiYgcGFyYW1zLnJlc29sdXRpb24gJiYgcGFyYW1zLm1heFJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICBzZW5kZXJzLm1pblJlc29sdXRpb25TY2FsZSA9IHRoaXMuZ2V0UmVzb2x1dGlvblNjYWxlKHBhcmFtcy5yZXNvbHV0aW9uLCBwYXJhbXMubWF4UmVzb2x1dGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlcnMucmVzb2x1dGlvblNjYWxlIDwgc2VuZGVycy5taW5SZXNvbHV0aW9uU2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVycy5yZXNvbHV0aW9uU2NhbGUgPSBzZW5kZXJzLm1pblJlc29sdXRpb25TY2FsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLnZpZGVvICYmIHNlbmRlcnMudHJhY2tzLnZpZGVvLnNlbmRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZW5kZXIgPSBzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZXRFbmNvZGluZ1BhcmFtZXRlcnMoc2VuZGVyLCBNYXRoLmZsb29yKHNlbmRlcnMucmVzb2x1dGlvblNjYWxlICogMTApIC8gMTAsIHNlbmRlcnMuZnJhbWVyYXRlLCBzZW5kZXJzLmJpdHJhdGUsIHNlbmRlcnMucHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyVXBncmFkZVRpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVwZ3JhZGVUaW1lb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbmRlcnMuc2V0KHN0cmVhbS5pZCwgc2VuZGVycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlVHJhY2sodHJhY2ssIHN0cmVhbSkge1xuICAgICAgICBjb25zdCBzZW5kZXJzID0gdGhpcy5zZW5kZXJzLmdldChzdHJlYW0uaWQpO1xuICAgICAgICBpZiAoc2VuZGVycykge1xuICAgICAgICAgICAgY29uc3QgdHJhY2tzID0gc2VuZGVycy50cmFja3NbdHJhY2sua2luZF07XG4gICAgICAgICAgICBpZiAodHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrcy5zZW5kZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlbW92ZVRyYWNrKHRyYWNrcy5zZW5kZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cmFja3MudHJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwbHlSZW1lZGlhdGlvbihyZW1lZGlhdGlvbikge1xuICAgICAgICB0aGlzLmNsZWFyVXBncmFkZVRpbWVvdXQoKTtcbiAgICAgICAgY29uc3Qgc2VuZGVyID0gZmluZFNlbmRlcihBcnJheS5mcm9tKHRoaXMuc2VuZGVycy52YWx1ZXMoKSksIHJlbWVkaWF0aW9uKTtcbiAgICAgICAgaWYgKHNlbmRlcikge1xuICAgICAgICAgICAgYXBwbHlSZW1lZGlhdGlvbihzZW5kZXIsIHJlbWVkaWF0aW9uKTtcbiAgICAgICAgICAgIGlmIChzZW5kZXIudHJhY2tzLnZpZGVvICYmIHNlbmRlci50cmFja3MudmlkZW8uc2VuZGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlkZW9TZW5kZXIgPSBzZW5kZXIudHJhY2tzLnZpZGVvLnNlbmRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2V0RW5jb2RpbmdQYXJhbWV0ZXJzKHZpZGVvU2VuZGVyLCBNYXRoLmZsb29yKHNlbmRlci5yZXNvbHV0aW9uU2NhbGUgKiAxMCkgLyAxMCwgc2VuZGVyLmZyYW1lcmF0ZSwgc2VuZGVyLmJpdHJhdGUsIHNlbmRlci5wcmlvcml0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbmRlciB8fCByZW1lZGlhdGlvbi5hY3Rpb24gPT09IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRVcGdyYWRlVGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlc2V0Q29ubmVjdGlvbigpIHtcbiAgICAgICAgc3VwZXIucmVzZXRDb25uZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuY2xlYXJPbmNsb3NlVGltZW91dCgpO1xuICAgICAgICB0aGlzLmNsZWFyV2FpdEFuc3dlcigpO1xuICAgICAgICB0aGlzLnNlbmRlcnMuZm9yRWFjaCgoc2VuZGVycykgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLnZpZGVvKSB7XG4gICAgICAgICAgICAgICAgc2VuZGVycy50cmFja3MudmlkZW8uc2VuZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLmF1ZGlvKSB7XG4gICAgICAgICAgICAgICAgc2VuZGVycy50cmFja3MuYXVkaW8uc2VuZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pc1JlY29ubmVjdGluZyA9IHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRTZW5kQnVmZmVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kYXRhQ2hhbm5lbCB8fCB0aGlzLmRhdGFDaGFubmVsLnN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpbnRlcnZhbC53YWl0KFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9SRVRSWV9ERUxBWSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFDaGFubmVsLmJ1ZmZlcmVkQW1vdW50IDwgUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbkJ1ZmZlcmVkQW1vdW50TG93ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwub25CdWZmZXJlZEFtb3VudExvdyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kQ2h1bmtlZChtZXNzYWdlLCBtZXNzYWdlU3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lc3NhZ2VTdHJpbmcubGVuZ3RoOyBpICs9IFBFRVJfQ09OTkVDVElPTl9DSFVOS19TSVpFKSB7XG4gICAgICAgICAgICBjaHVua3MucHVzaChtZXNzYWdlU3RyaW5nLnNsaWNlKGksIGkgKyBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRXaXRoUmV0cnkoYCR7UEVFUl9DT05ORUNUSU9OX0NIVU5LX0lERU5USUZJRVJ9OyR7bWVzc2FnZS51dWlkfTske2NodW5rcy5pbmRleE9mKGNodW5rKX07JHtjaHVua3MubGVuZ3RofTske2NodW5rfWAsIFF1ZXVlRWxlbWVudFByaW9yaXR5Lkxvdyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2VuZFdpdGhSZXRyeShtZXNzYWdlLCBwcmlvcml0eSkge1xuICAgICAgICBpZiAobWVzc2FnZSA9PT0gUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9QSU5HKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXRyeVF1ZXVlLnF1ZXVlc1twcmlvcml0eV0uaGVhZD8udmFsdWUgIT09IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUElORykge1xuICAgICAgICAgICAgICAgIHRoaXMucmV0cnlRdWV1ZS5xdWV1ZXNbcHJpb3JpdHldLnVuc2hpZnQobWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJldHJ5UXVldWUucXVldWVzW3ByaW9yaXR5XS5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRBY3Rpb24obWVzc2FnZSkge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YUNoYW5uZWwgfHwgdGhpcy5kYXRhQ2hhbm5lbC5zdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFDaGFubmVsIGlzIG5vdCBvcGVuLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGlmIChtZXNzYWdlICE9PSBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkcpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNTZW50ICs9IDE7XG4gICAgICAgICAgICB0aGlzLmJ5dGVzU2VudCArPSBtZXNzYWdlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBtZXNzYWdlLmJ5dGVMZW5ndGggOiBtZXNzYWdlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLnNlbmQobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLnNlbmQobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lU2VuZGluZyArPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgIH1cbiAgICBzdGFydEhlYXJ0YmVhdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhcnRiZWF0VW5zdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFySGVhcnRiZWF0KCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluaXRpYWxQb25nID0gdHJ1ZTtcbiAgICAgICAgbGV0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMubGFzdEhlYXJ0YmVhdCA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWwub25NZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSA9PT0gUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9QT05HKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3VuZFRyaXBUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFBvbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3lzdGVtTWVzc2FnZSh7IHR5cGU6IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuU3VjY2VzcyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5pdGlhbFBvbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RIZWFydGJlYXQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzUmVjb25uZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWNvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNaXNzaW5nU2VuZGVycygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oZWFydGJlYXRVbnN1YnNjcmliZXIgPSBpbnRlcnZhbC5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5zZW5kV2l0aFJldHJ5KFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUElORywgUXVldWVFbGVtZW50UHJpb3JpdHkuSGlnaCk7XG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdEhlYXJ0YmVhdCA+IChpbml0aWFsUG9uZyAmJiBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1RIUkVTSE9MRCAqIDYgfHwgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9USFJFU0hPTEQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfSU5URVJWQUwpO1xuICAgIH1cbiAgICBoYW5kbGVNaXNzaW5nU2VuZGVycygpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJzLmZvckVhY2goKHNlbmRlcnMpID0+IHtcbiAgICAgICAgICAgIGlmIChzZW5kZXJzLnRyYWNrcy52aWRlbyAmJiBzZW5kZXJzLnRyYWNrcy52aWRlby50cmFjayAmJiAhc2VuZGVycy50cmFja3MudmlkZW8uc2VuZGVyKSB7XG4gICAgICAgICAgICAgICAgc2VuZGVycy50cmFja3MudmlkZW8uc2VuZGVyID0gdGhpcy5jb25uZWN0aW9uLmFkZFRyYWNrKHNlbmRlcnMudHJhY2tzLnZpZGVvLnRyYWNrLCBzZW5kZXJzLnN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VuZGVycy50cmFja3MuYXVkaW8gJiYgc2VuZGVycy50cmFja3MuYXVkaW8udHJhY2sgJiYgIXNlbmRlcnMudHJhY2tzLmF1ZGlvLnNlbmRlcikge1xuICAgICAgICAgICAgICAgIHNlbmRlcnMudHJhY2tzLmF1ZGlvLnNlbmRlciA9IHRoaXMuY29ubmVjdGlvbi5hZGRUcmFjayhzZW5kZXJzLnRyYWNrcy5hdWRpby50cmFjaywgc2VuZGVycy5zdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZEljZUNhbmRpZGF0ZXMoKSB7XG4gICAgICAgIHRoaXMucHVibGlzaFN5c3RlbU1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5IYW5kc2hha2UsXG4gICAgICAgICAgICBjYW5kaWRhdGVzOiB0aGlzLmhhbmRzaGFrZUNhbmRpZGF0ZXMsXG4gICAgICAgICAgICBvcmlnaW46IFBlZXJDb25uZWN0aW9uT3JpZ2luLlNlbmRlcixcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICBjb25uZWN0aW9uVHlwZTogdGhpcy5jb25uZWN0aW9uVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldHVwQ29ubmVjdGlvbkV2ZW50cygpIHtcbiAgICAgICAgc3VwZXIuc2V0dXBDb25uZWN0aW9uRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkhhbmRzaGFrZVN0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5oYW5kc2hha2VTdGF0ZSA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Db25uZWN0aW9uU3RhdGUsICdpY2VDb25uZWN0aW9uU3RhdGUgZmFpbGVkJywgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgdGhpcy5yZW1vdGVJZCk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5jYW5SZXN0YXJ0SGFuZHNoYWtlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucmVzdGFydEhhbmRzaGFrZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU9mZmVyKHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZHNoYWtlUmVzdGFydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUgPT09ICdkaXNjb25uZWN0ZWQnIHx8IHRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUgPT09ICdmYWlsZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGhhbmRsZURpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJIZWFydGJlYXQoKTtcbiAgICAgICAgdGhpcy5jbGVhclJlc3RhcnRUaW1lb3V0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJDb25uZWN0aW9uVGltZW91dCgpO1xuICAgICAgICBsb2dnZXIud2FybmluZygnZGlzY29ubmVjdCcsIHtcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlOiB0aGlzLmNvbm5lY3Rpb25UeXBlLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25TdGF0ZTogdGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSxcbiAgICAgICAgICAgICAgICBpY2VDb25uZWN0aW9uU3RhdGU6IHRoaXMuY29ubmVjdGlvbi5oYW5kc2hha2VTdGF0ZSxcbiAgICAgICAgICAgICAgICBzaWduYWxpbmdTdGF0ZTogdGhpcy5jb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlLFxuICAgICAgICAgICAgICAgIHJlYWR5U3RhdGU6IHRoaXMuZGF0YUNoYW5uZWw/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgICAgIGxhc3RIZWFydGJlYXQ6IHRoaXMubGFzdEhlYXJ0YmVhdCA/IERhdGUubm93KCkgLSB0aGlzLmxhc3RIZWFydGJlYXQgOiAnJyxcbiAgICAgICAgICAgICAgICByZXRyeVF1ZXVlOiB0aGlzLnJldHJ5UXVldWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaXNDb25uZWN0aW9uVGltZWRPdXQgPSAodGhpcy5sYXN0SGVhcnRiZWF0ICYmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0SGVhcnRiZWF0KSA+IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfVElNRU9VVCkgPz8gdHJ1ZTtcbiAgICAgICAgaWYgKGlzQ29ubmVjdGlvblRpbWVkT3V0KSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKV0sXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5EaXNjb25uZWN0LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0Q29ubmVjdGlvbigpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hTeXN0ZW1NZXNzYWdlKHsgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5OZWVkUmVzdGFydCwgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbiwgY29ubmVjdGlvblR5cGU6IHRoaXMuY29ubmVjdGlvblR5cGUgfSk7XG4gICAgICAgIHRoaXMucmVzdGFydFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRGlzY29ubmVjdCgpO1xuICAgICAgICB9LCBQRUVSX0NPTk5FQ1RJT05fUkVDT05ORUNUX1RJTUVPVVQpO1xuICAgIH1cbiAgICBjbGVhckhlYXJ0YmVhdCgpIHtcbiAgICAgICAgdGhpcy5oZWFydGJlYXRVbnN1YnNjcmliZXI/LigpO1xuICAgICAgICBkZWxldGUgdGhpcy5oZWFydGJlYXRVbnN1YnNjcmliZXI7XG4gICAgfVxuICAgIGNsZWFyQ29ubmVjdGlvblRpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25UaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jb25uZWN0aW9uVGltZW91dCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5jb25uZWN0aW9uVGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhclJlc3RhcnRUaW1lb3V0KCkge1xuICAgICAgICBpZiAodGhpcy5yZXN0YXJ0VGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzdGFydFRpbWVvdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVzdGFydFRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXJVcGdyYWRlVGltZW91dCgpIHtcbiAgICAgICAgaWYgKHRoaXMudXBncmFkZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZ3JhZGVUaW1lb3V0KTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnVwZ3JhZGVUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFVwZ3JhZGVUaW1lb3V0KCkge1xuICAgICAgICB0aGlzLnVwZ3JhZGVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5UmVtZWRpYXRpb24oe1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZW1lZGlhdGlvbkFjdGlvbi5VcGdyYWRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIFJFTUVESUFUSU9OX1VQR1JBREVfV0FJVF9USU1FKTtcbiAgICB9XG4gICAgZ2V0UmVzb2x1dGlvblNjYWxlKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24pIHtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBNYXRoLm1heChyZXNvbHV0aW9uLndpZHRoIC8gbWF4UmVzb2x1dGlvbi53aWR0aCwgcmVzb2x1dGlvbi5oZWlnaHQgLyBtYXhSZXNvbHV0aW9uLmhlaWdodCk7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heChzY2FsZSwgMSksIFJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFKTtcbiAgICB9XG4gICAgY2xlYXJXYWl0QW5zd2VyKCkge1xuICAgICAgICB0aGlzLndhaXRBbnN3ZXI/LigpO1xuICAgICAgICBkZWxldGUgdGhpcy53YWl0QW5zd2VyO1xuICAgIH1cbiAgICBjbGVhck9uY2xvc2VUaW1lb3V0KCkge1xuICAgICAgICBpZiAodGhpcy5vbmNsb3NlVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMub25jbG9zZVRpbWVvdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMub25jbG9zZVRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2JqZWN0VG9BcnJheUJ1ZmZlcihvYmopIHtcbiAgICAgICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KG9iaik7XG4gICAgICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICAgICAgcmV0dXJuIGVuY29kZXIuZW5jb2RlKGpzb25TdHJpbmcpLmJ1ZmZlcjtcbiAgICB9XG4gICAgbWVyZ2VQYXJ0cyhoZWFkZXIsIGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgaGVhZGVyQnVmZmVyID0gdGhpcy5vYmplY3RUb0FycmF5QnVmZmVyKGhlYWRlcik7XG4gICAgICAgIGNvbnN0IGhlYWRlclNpemVWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFKTtcbiAgICAgICAgY29uc3QgaGVhZGVyVmlldyA9IG5ldyBVaW50OEFycmF5KGhlYWRlckJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoY29udGVudCk7XG4gICAgICAgIGhlYWRlclNpemVWaWV3LnNldChuZXcgVWludDhBcnJheShuZXcgVWludDMyQXJyYXkoW2hlYWRlclZpZXcubGVuZ3RoXSkuYnVmZmVyKSk7XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IG5ldyBVaW50OEFycmF5KENPTlRFTlRfRklMRV9IRUFERVJfU0laRSArIGhlYWRlclZpZXcubGVuZ3RoICsgY29udGVudFZpZXcubGVuZ3RoKTtcbiAgICAgICAgbWVyZ2VkLnNldChoZWFkZXJTaXplVmlldyk7XG4gICAgICAgIG1lcmdlZC5zZXQoaGVhZGVyVmlldywgQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFKTtcbiAgICAgICAgbWVyZ2VkLnNldChjb250ZW50VmlldywgQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFICsgaGVhZGVyVmlldy5sZW5ndGgpO1xuICAgICAgICByZXR1cm4gbWVyZ2VkLmJ1ZmZlcjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IEJhc2VTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlU3RyZWFtJztcbmltcG9ydCB7IGdldEZpbGVDb250ZW50LCByZWFkRmlsZUNvbnRlbnQgfSBmcm9tICd1dGlscy9PYmplY3RTdG9yZS9IZWxwZXJzJztcbmV4cG9ydCBjbGFzcyBCYXNlRGF0YVN0cmVhbSBleHRlbmRzIEJhc2VTdHJlYW0ge1xuICAgIG91dGdvaW5nVG9waWM7XG4gICAgaW5jb21pbmdUb3BpYztcbiAgICBmaWxlQ2h1bmtzID0gbmV3IE1hcCgpO1xuICAgIG1lc3NhZ2VzU2VudCA9IDA7XG4gICAgbWVzc2FnZXNSZWNlaXZlZCA9IDA7XG4gICAgYnl0ZXNTZW50ID0gMDtcbiAgICBieXRlc1JlY2VpdmVkID0gMDtcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgbGFiZWwpIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsKTtcbiAgICB9XG4gICAgZ2V0TGFiZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsO1xuICAgIH1cbiAgICBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgICB9XG4gICAgZ2V0Q29udGVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBDb250ZW50VHlwZS5EYXRhO1xuICAgIH1cbiAgICBnZXRJbnRlcm5hbFN0cmVhbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgICB9XG4gICAgcmVnaXN0ZXJQdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIGlmICh0aGlzLm91dGdvaW5nVG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFB1Ymxpc2hlciwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBQdWJsaXNoZXIgYWxyZWFkeSByZWdpc3RlcmVkIG9uIFB1YlN1YlRvcGljICR7dGhpcy5vd25lci5nZXRJZCgpfSAtICR7dGhpcy5sYWJlbH1gLFxuICAgICAgICAgICAgICAgIHRvcGljOiB0aGlzLm91dGdvaW5nVG9waWMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm91dGdvaW5nVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHJlZ2lzdGVyU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmluY29taW5nVG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFN1YnNjcmliZXIsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgU3Vic2NyaWJlciBhbHJlYWR5IHJlZ2lzdGVyZWQgb24gUHViU3ViVG9waWMgJHt0aGlzLm93bmVyLmdldElkKCl9IC0gJHt0aGlzLmxhYmVsfWAsXG4gICAgICAgICAgICAgICAgdG9waWM6IHRoaXMuaW5jb21pbmdUb3BpYyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5jb21pbmdUb3BpYyA9IHN1YnNjcmliZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJQdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm91dGdvaW5nVG9waWM7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTdWJzY3JpYmVyKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5pbmNvbWluZ1RvcGljO1xuICAgIH1cbiAgICBhc3luYyBzZW5kKGNvbnRlbnQsIG5vZGVJZHMpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlc1NlbnQgKz0gMTtcbiAgICAgICAgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlQ2h1bmtzID0gYXdhaXQgcmVhZEZpbGVDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICAgICAgdGhpcy5ieXRlc1NlbnQgKz0gZmlsZUNodW5rcy5yZWR1Y2UoKGFjYywgY2h1bmspID0+IGFjYyArIGNodW5rLmJ5dGVMZW5ndGgsIDApO1xuICAgICAgICAgICAgZmlsZUNodW5rcy5mb3JFYWNoKChjaHVuaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBub2RlSWRzLFxuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZS5GaWxlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBjb250ZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBjb250ZW50LnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw6IGZpbGVDaHVua3MubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ieXRlc1NlbnQgKz0gSlNPTi5zdHJpbmdpZnkoY29udGVudCkubGVuZ3RoO1xuICAgICAgICB0aGlzLm91dGdvaW5nVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IG5vZGVJZHMsXG4gICAgICAgICAgICBwcm9wYWdhdGU6IHRydWUsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogQ29udGVudFR5cGUuRGF0YSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jb21pbmdUb3BpYy5zdWJzY3JpYmUoKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5EYXRhOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzUmVjZWl2ZWQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ieXRlc1JlY2VpdmVkICs9IEpTT04uc3RyaW5naWZ5KGV2ZW50LmNvbnRlbnQpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQuc291cmNlSWQsIGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkZpbGU6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5maWxlQ2h1bmtzLmhhcyhldmVudC5jb250ZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVDaHVua3Muc2V0KGV2ZW50LmNvbnRlbnQubmFtZSwgW10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuZmlsZUNodW5rcy5nZXQoZXZlbnQuY29udGVudC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtzW2V2ZW50LmNvbnRlbnQuaW5kZXhdID0gZXZlbnQuY29udGVudC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gZXZlbnQuY29udGVudC50b3RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc1JlY2VpdmVkICs9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ5dGVzUmVjZWl2ZWQgKz0gY2h1bmtzLnJlZHVjZSgoYWNjLCBjaHVuaykgPT4gYWNjICsgY2h1bmsuYnl0ZUxlbmd0aCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhldmVudC5zb3VyY2VJZCwgZ2V0RmlsZUNvbnRlbnQoY2h1bmtzLCBldmVudC5jb250ZW50Lm5hbWUsIGV2ZW50LmNvbnRlbnQudHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlQ2h1bmtzLmRlbGV0ZShldmVudC5jb250ZW50Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBNZWRpYVN0cmVhbVByaW9yaXR5IH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ1NlcnZpY2VzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZU1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZU1lZGlhU3RyZWFtJztcbmltcG9ydCB7IE91dGdvaW5nTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9PdXRnb2luZ01lZGlhU3RyZWFtJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgQmFzZUxvY2FsTWVkaWFTdHJlYW0gZXh0ZW5kcyBCYXNlTWVkaWFTdHJlYW0ge1xuICAgIGNsdXN0ZXJJZDtcbiAgICBwcmlvcml0eSA9IE1lZGlhU3RyZWFtUHJpb3JpdHkuRGVmYXVsdDtcbiAgICB0cmFja0VuZGVkTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIG91dGdvaW5nU3RyZWFtcyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgbGFiZWwsIG1lZGlhU291cmNlLCBjbHVzdGVySWQpIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsLCBtZWRpYVNvdXJjZSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtID8gbWVkaWFTb3VyY2UgOlxuICAgICAgICAgICAgbWVkaWFTb3VyY2Uuc3JjT2JqZWN0ID8gbWVkaWFTb3VyY2Uuc3JjT2JqZWN0IDpcbiAgICAgICAgICAgICAgICBtZWRpYVNvdXJjZS5jYXB0dXJlU3RyZWFtKCkpO1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdGhpcy5zZXR1cFRyYWNrRW5kZWRMaXN0ZW5lcnModHJhY2spKTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuTWVkaWFTdHJlYW0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdwdWJsaXNoJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5vd25lci50eXBlLFxuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLmdldEludGVybmFsU3RyZWFtSWQoKSxcbiAgICAgICAgICAgIHRyYWNrS2luZHM6IHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkubWFwKCh0cmFjaykgPT4gdHJhY2sua2luZCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5vdXRnb2luZ1N0cmVhbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmZvckVhY2goKG91dGdvaW5nU3RyZWFtKSA9PiB7XG4gICAgICAgICAgICAgICAgb3V0Z29pbmdTdHJlYW0udW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpO1xuICAgICAgICAgICAgICAgIG91dGdvaW5nU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vdXRnb2luZ1N0cmVhbXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuZm9yRWFjaCgocmVtb3ZlTGlzdGVuZXIpID0+IHJlbW92ZUxpc3RlbmVyKCkpO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHB1Ymxpc2gocmVtb3RlSWQpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkczogcmVtb3RlSWQgPyBbcmVtb3RlSWRdIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlB1Ymxpc2hNZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgc3RyZWFtOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLmdldEludGVybmFsU3RyZWFtSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlVHJhY2tLaW5kczogdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5tYXAoKHRyYWNrKSA9PiB0cmFjay5raW5kKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVucHVibGlzaCgpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICBwcm9wYWdhdGU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuVW5wdWJsaXNoTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuTWVkaWFTdHJlYW0sIHtcbiAgICAgICAgICAgIHR5cGU6ICd1bnB1Ymxpc2gnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLm93bmVyLnR5cGUsXG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgc3RyZWFtSWQ6IHRoaXMuZ2V0SW50ZXJuYWxTdHJlYW1JZCgpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5O1xuICAgIH1cbiAgICBzZXRQcmlvcml0eShwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmZvckVhY2goKG91dGdvaW5nU3RyZWFtKSA9PiBvdXRnb2luZ1N0cmVhbS5zZXRQcmlvcml0eShwcmlvcml0eSkpO1xuICAgIH1cbiAgICBnZXRTaGFyZWFibGVTdHJlYW0oZGVzdGluYXRpb25JZCwgcGFyYW1zKSB7XG4gICAgICAgIGlmICghdGhpcy5vdXRnb2luZ1N0cmVhbXMuaGFzKGRlc3RpbmF0aW9uSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRnb2luZ1N0cmVhbSA9IG5ldyBPdXRnb2luZ01lZGlhU3RyZWFtKHRoaXMub3duZXIsIHRoaXMubGFiZWwsIHRoaXMubWVkaWFTdHJlYW0sIGRlc3RpbmF0aW9uSWQsIHBhcmFtcyk7XG4gICAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG91dGdvaW5nU3RyZWFtLm9uVW5yZWdpc3RlclB1Ymxpc2hlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5nZXQoZGVzdGluYXRpb25JZCk/LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5kZWxldGUoZGVzdGluYXRpb25JZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLnNldChkZXN0aW5hdGlvbklkLCBvdXRnb2luZ1N0cmVhbSk7XG4gICAgICAgICAgICBvdXRnb2luZ1N0cmVhbS5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcih0aGlzLnN5c3RlbVRvcGljKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vdXRnb2luZ1N0cmVhbXMuZ2V0KGRlc3RpbmF0aW9uSWQpO1xuICAgIH1cbiAgICBnZXRTaGFyZWFibGVTdHJlYW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW0uaWQ7XG4gICAgfVxuICAgIGhhbmRsZUxvY2FsVHJhY2tGYWlsdXJlKHRyYWNrKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLkxvY2FsTWVkaWFTdHJlYW1UcmFja0ZhaWwsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kczogW3RyYWNrLmtpbmRdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldHVwVHJhY2tFbmRlZExpc3RlbmVycyh0cmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9ICgpID0+IHRoaXMuaGFuZGxlTG9jYWxUcmFja0ZhaWx1cmUodHJhY2spO1xuICAgICAgICBjb25zdCByZW1vdmVMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgY2FsbGJhY2spO1xuICAgICAgICAgICAgdHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignbXV0ZScsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHRoaXMudHJhY2tFbmRlZExpc3RlbmVycy5kZWxldGUodHJhY2sua2luZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgY2FsbGJhY2spO1xuICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdtdXRlJywgY2FsbGJhY2spO1xuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuc2V0KHRyYWNrLmtpbmQsIHJlbW92ZUxpc3RlbmVyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgQmFzZVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L0Jhc2VTdHJlYW0nO1xuZXhwb3J0IGNsYXNzIEJhc2VNZWRpYVN0cmVhbSBleHRlbmRzIEJhc2VTdHJlYW0ge1xuICAgIG1lZGlhU3RyZWFtO1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBsYWJlbCwgbWVkaWFTdHJlYW0pIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbSA9IG1lZGlhU3RyZWFtO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLk1lZGlhO1xuICAgIH1cbiAgICBnZXRNZWRpYVN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW07XG4gICAgfVxuICAgIGdldEludGVybmFsU3RyZWFtSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lZGlhU3RyZWFtLmlkO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBCYXNlU3RyZWFtIHtcbiAgICBvd25lcjtcbiAgICBsYWJlbDtcbiAgICBzeXN0ZW1Ub3BpYztcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgbGFiZWwpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgfVxuICAgIGdldExhYmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgICB9XG4gICAgZ2V0T3duZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuZ2V0SWQoKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHsgfVxuICAgIHJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHRvcGljKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSB0b3BpYztcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBOb2RlTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL05vZGUvTm9kZU1lc3NhZ2UnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlJztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IE9iamVjdFN0b3JlIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvT2JqZWN0U3RvcmUnO1xuaW1wb3J0IHsgS2V5VmFsdWVEYXRhYmFzZSB9IGZyb20gJ21vZGVscy9Db250ZW50L0tleVZhbHVlRGF0YWJhc2UnO1xuaW1wb3J0IHsgTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9Mb2NhbER5bmFtaWNNZWRpYVN0cmVhbSc7XG5pbXBvcnQgeyBMb2NhbE1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvTG9jYWxNZWRpYVN0cmVhbSc7XG5pbXBvcnQgeyBQdWJTdWJUb3BpYyB9IGZyb20gJ21vZGVscy9Db250ZW50L1B1YlN1YlRvcGljJztcbmltcG9ydCB7IFJlbW90ZU1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvUmVtb3RlTWVkaWFTdHJlYW0nO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ21vZGVscy9Ob2RlL1VzZXInO1xuaW1wb3J0IHsgRmlyZWJhc2VSREJUcmFuc2FjdGlvblNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlcy9UcmFuc2FjdGlvbi9GaXJlYmFzZVJEQlRyYW5zYWN0aW9uU2VydmljZSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIENvbnRlbnRNYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIG1heEZwcztcbiAgICBhdWRpb0NvbnRleHQ7XG4gICAgbG9jYWxNZWRpYVN0cmVhbXMgPSBuZXcgTWFwKCk7XG4gICAgcmVtb3RlTWVkaWFTdHJlYW1zID0gbmV3IE1hcCgpO1xuICAgIHB1YlN1YlRvcGljcyA9IG5ldyBNYXAoKTtcbiAgICBvYmplY3RTdG9yZXMgPSBuZXcgTWFwKCk7XG4gICAga2V5VmFsdWVEYXRhYmFzZXMgPSBuZXcgTWFwKCk7XG4gICAgdHJhbnNhY3Rpb25TZXJ2aWNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3MsIG1heEZwcywgYXVkaW9Db250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMubWF4RnBzID0gbWF4RnBzO1xuICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dCA9IGF1ZGlvQ29udGV4dDtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblNlcnZpY2UgPSBuZXcgRmlyZWJhc2VSREJUcmFuc2FjdGlvblNlcnZpY2UodGhpcy5jb25maWdzLnZlbmRvcklkLCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkKTtcbiAgICB9XG4gICAgY2xvc2UocmVzZXQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnJlbW90ZU1lZGlhU3RyZWFtcy5mb3JFYWNoKChzdHJlYW1zLCBub2RlSWQpID0+IHtcbiAgICAgICAgICAgIHN0cmVhbXMuZm9yRWFjaCgoXywgbGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVJlbW90ZU1lZGlhU3RyZWFtKG5vZGVJZCwgbGFiZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc2V0KSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsTWVkaWFTdHJlYW1zLmZvckVhY2goKF8sIGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMb2NhbE1lZGlhU3RyZWFtKGxhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wdWJTdWJUb3BpY3MuZm9yRWFjaCgoXywgbGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVB1YlN1YlRvcGljKGxhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vYmplY3RTdG9yZXMuZm9yRWFjaCgoXywgbGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU9iamVjdFN0b3JlKGxhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5rZXlWYWx1ZURhdGFiYXNlcy5mb3JFYWNoKChfLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlS2V5VmFsdWVEYXRhYmFzZShsYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVPYmplY3RTdG9yZUJ1Y2tldChsYWJlbCwgY29ubmVjdG9yQ29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKHRoaXMub2JqZWN0U3RvcmVzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlQWxyZWFkeUV4aXN0cywgJ1N0b3JlIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YVN0cmVhbSA9IG5ldyBPYmplY3RTdG9yZSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLCBsYWJlbCwgdGhpcy5jb25maWdzLmNsdXN0ZXJJZCwgdGhpcy5jb25maWdzLnZlbmRvcklkLCB0aGlzLnRyYW5zYWN0aW9uU2VydmljZSwgY29ubmVjdG9yQ29uc3RydWN0b3IpO1xuICAgICAgICB0aGlzLm9iamVjdFN0b3Jlcy5zZXQobGFiZWwsIGRhdGFTdHJlYW0pO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZGF0YVN0cmVhbSk7XG4gICAgICAgIHJldHVybiBkYXRhU3RyZWFtO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVLZXlWYWx1ZURhdGFiYXNlKGxhYmVsLCBsYXlvdXQsIGNvbm5lY3RvckNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGlmICh0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VBbHJlYWR5RXhpc3RzLCAnRGF0YWJhc2UgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qga2V5VmFsdWVEYXRhYmFzZSA9IG5ldyBLZXlWYWx1ZURhdGFiYXNlKHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIGxhYmVsLCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCB0aGlzLmNvbmZpZ3MudmVuZG9ySWQsIGxheW91dCwgY29ubmVjdG9yQ29uc3RydWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5rZXlWYWx1ZURhdGFiYXNlcy5zZXQobGFiZWwsIGtleVZhbHVlRGF0YWJhc2UpO1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKGtleVZhbHVlRGF0YWJhc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGtleVZhbHVlRGF0YWJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLQ2xpZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gY3JlYXRlIGtleSB2YWx1ZSBkYXRhYmFzZScsIGUpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5LZXlWYWx1ZURhdGFiYXNlQ3JlYXRpb25GYWlsZWQsIHsgbGFiZWwsIGNsdXN0ZXJJZDogdGhpcy5jb25maWdzLmNsdXN0ZXJJZCwgdmVuZG9ySWQ6IHRoaXMuY29uZmlncy52ZW5kb3JJZCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVMb2NhbER5bmFtaWNNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpIHtcbiAgICAgICAgaWYgKHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuaGFzKGxhYmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuTG9jYWxNZWRpYVN0cmVhbUFscmVhZHlFeGlzdHMsICdMb2NhbCBNZWRpYVN0cmVhbSBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5hdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkxvY2FsTWVkaWFTdHJlYW1Ob0F1ZGlvQ29udGV4dCwgJ0F1ZGlvQ29udGV4dCBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxNZWRpYVN0cmVhbSA9IG5ldyBMb2NhbER5bmFtaWNNZWRpYVN0cmVhbSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLCBsYWJlbCwgbWVkaWFTb3VyY2UsIHRoaXMubWF4RnBzLCB0aGlzLmF1ZGlvQ29udGV4dCwgdGhpcy5jb25maWdzLmNsdXN0ZXJJZCk7XG4gICAgICAgIHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuc2V0KGxhYmVsLCBsb2NhbE1lZGlhU3RyZWFtKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKGxvY2FsTWVkaWFTdHJlYW0pO1xuICAgICAgICBsb2NhbE1lZGlhU3RyZWFtLnB1Ymxpc2goKTtcbiAgICAgICAgcmV0dXJuIGxvY2FsTWVkaWFTdHJlYW07XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsTWVkaWFTdHJlYW0obGFiZWwsIG1lZGlhU291cmNlKSB7XG4gICAgICAgIGlmICh0aGlzLmxvY2FsTWVkaWFTdHJlYW1zLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkxvY2FsTWVkaWFTdHJlYW1BbHJlYWR5RXhpc3RzLCAnU3RyZWFtIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxNZWRpYVN0cmVhbSA9IG5ldyBMb2NhbE1lZGlhU3RyZWFtKHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIGxhYmVsLCBtZWRpYVNvdXJjZSwgdGhpcy5jb25maWdzLmNsdXN0ZXJJZCk7XG4gICAgICAgIHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuc2V0KGxhYmVsLCBsb2NhbE1lZGlhU3RyZWFtKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKGxvY2FsTWVkaWFTdHJlYW0pO1xuICAgICAgICBsb2NhbE1lZGlhU3RyZWFtLnB1Ymxpc2goKTtcbiAgICAgICAgcmV0dXJuIGxvY2FsTWVkaWFTdHJlYW07XG4gICAgfVxuICAgIGNyZWF0ZVB1YlN1YlRvcGljKGxhYmVsKSB7XG4gICAgICAgIGlmICh0aGlzLnB1YlN1YlRvcGljcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5QdWJTdWJUb3BpY0FscmVhZHlFeGlzdHMsICdQdWJTdWIgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhU3RyZWFtID0gbmV3IFB1YlN1YlRvcGljKHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIGxhYmVsLCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkKTtcbiAgICAgICAgdGhpcy5wdWJTdWJUb3BpY3Muc2V0KGxhYmVsLCBkYXRhU3RyZWFtKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKGRhdGFTdHJlYW0pO1xuICAgICAgICByZXR1cm4gZGF0YVN0cmVhbTtcbiAgICB9XG4gICAgY3JlYXRlUmVtb3RlTWVkaWFTdHJlYW0obm9kZUlkLCBsYWJlbCwgaW50ZXJuYWxJZCwgYXZhaWxhYmxlVHJhY2tLaW5kcykge1xuICAgICAgICBpZiAoIXRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmhhcyhub2RlSWQpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW90ZU1lZGlhU3RyZWFtcy5zZXQobm9kZUlkLCBuZXcgTWFwKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZU1lZGlhU3RyZWFtcyA9IHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmdldChub2RlSWQpO1xuICAgICAgICBpZiAocmVtb3RlTWVkaWFTdHJlYW1zLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlJlbW90ZU1lZGlhU3RyZWFtQWxyZWFkeUV4aXN0cywgJ1JlbW90ZSBNZWRpYVN0cmVhbSBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZU5vZGUgPSBuZXcgVXNlcihub2RlSWQsICcnLCAnJyk7XG4gICAgICAgIGNvbnN0IHJlbW90ZU1lZGlhU3RyZWFtID0gbmV3IFJlbW90ZU1lZGlhU3RyZWFtKHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIHJlbW90ZU5vZGUsIGxhYmVsLCBpbnRlcm5hbElkLCBhdmFpbGFibGVUcmFja0tpbmRzLCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkKTtcbiAgICAgICAgcmVtb3RlTWVkaWFTdHJlYW1zLnNldChsYWJlbCwgcmVtb3RlTWVkaWFTdHJlYW0pO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UocmVtb3RlTWVkaWFTdHJlYW0pO1xuICAgICAgICByZXR1cm4gcmVtb3RlTWVkaWFTdHJlYW07XG4gICAgfVxuICAgIGdldE9iamVjdFN0b3JlQnVja2V0cyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gQXJyYXkuZnJvbSh0aGlzLm9iamVjdFN0b3Jlcy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0S2V5VmFsdWVEYXRhYmFzZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IEFycmF5LmZyb20odGhpcy5rZXlWYWx1ZURhdGFiYXNlcy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0TG9jYWxNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IEFycmF5LmZyb20odGhpcy5sb2NhbE1lZGlhU3RyZWFtcy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0UHViU3ViVG9waWNzKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbXMgPSBBcnJheS5mcm9tKHRoaXMucHViU3ViVG9waWNzLnZhbHVlcygpKTtcbiAgICAgICAgaWYgKHN0cmF0ZWd5KSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtcy5maWx0ZXIoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW1zO1xuICAgIH1cbiAgICBnZXRSZW1vdGVNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IEFycmF5LmZyb20odGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMudmFsdWVzKCkpLnJlZHVjZSgoYWNjLCByZW1vdGVTdHJlYW1zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgLi4uQXJyYXkuZnJvbShyZW1vdGVTdHJlYW1zLnZhbHVlcygpKV07XG4gICAgICAgIH0sIFtdKTtcbiAgICAgICAgaWYgKHN0cmF0ZWd5KSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtcy5maWx0ZXIoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW1zO1xuICAgIH1cbiAgICBoYW5kbGVDb250ZW50U3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5QdWJsaXNoTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVQdWJsaXNoTWVkaWFTdHJlYW0oZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5VbnB1Ymxpc2hNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVVucHVibGlzaE1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNsb3NlTWVkaWFTdHJlYW0oZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZVB1YlN1YlRvcGljOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2VQdWJTdWJUb3BpYyhldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlT2JqZWN0U3RvcmVCdWNrZXQ6XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDbG9zZU9iamVjdFN0b3JlKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VLZXlWYWx1ZURhdGFiYXNlOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2VLZXlWYWx1ZURhdGFiYXNlKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuVW5zdWJzY3JpYmVNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNvbnRlbnRVbnN1YnNjcmliZU1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuUmVxdWVzdFN5bmNLZXlWYWx1ZURhdGFiYXNlOlxuICAgICAgICAgICAgICAgIHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuZ2V0KGV2ZW50LmNvbnRlbnQubGFiZWwpPy5zZW5kVHJhbnNhY3Rpb25zRHVtcChldmVudC5zb3VyY2VJZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5TZW5kVHJhbnNhY3Rpb25zRHVtcDpcbiAgICAgICAgICAgICAgICB0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmdldChldmVudC5jb250ZW50LmxhYmVsKT8ucHJvY2Vzc1RyYW5zYWN0aW9uc0R1bXAoZXZlbnQuc291cmNlSWQsIGV2ZW50LmNvbnRlbnQudHJhbnNhY3Rpb25zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlJlcXVlc3RUcmFuc2FjdGlvbnNWYWx1ZTpcbiAgICAgICAgICAgICAgICB0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmdldChldmVudC5jb250ZW50LmxhYmVsKT8uc2VuZFRyYW5zYWN0aW9uc1ZhbHVlKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50LnRyYW5zYWN0aW9uSWRzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkxvY2FsTWVkaWFTdHJlYW1UcmFja0ZhaWw6XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLm5vdGlmeUNsdXN0ZXIoJ2xvY2FsLW1lZGlhLXN0cmVhbS10cmFjay1mYWlsJywge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZXZlbnQuY29udGVudC5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tLaW5kczogZXZlbnQuY29udGVudC50cmFja0tpbmRzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZU5vZGVTeXN0ZW1FdmVudHMoeyBjb250ZW50IH0pIHtcbiAgICAgICAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZU1lc3NhZ2VUeXBlLk5vZGVKb2luOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTm9kZUpvaW5OZWVkUHVibGlzaGVkU3RyZWFtKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5T2JqZWN0U3RvcmVPZk5vZGVKb2luKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBOb2RlTWVzc2FnZVR5cGUuTm9kZUxlYXZlOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTm9kZUxlYXZlKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5T2JqZWN0U3RvcmVPZk5vZGVMZWF2ZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25TeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuU3Vic2NyaWJlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJzY3JpYmVNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlVwZGF0ZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVXBkYXRlTWVkaWFTdHJlYW0oZXZlbnQuc291cmNlSWQsIGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5VbnN1YnNjcmliZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVW5zdWJzY3JpYmVNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFVuc3Vic2NyaWJlTWVkaWFTdHJlYW0oY29udGVudCkge1xuICAgICAgICBpZiAoY29udGVudC5yZW1haW5pbmdUcmFja3MgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmdldChjb250ZW50Lm93bmVySWQpPy5nZXQoY29udGVudC5sYWJlbCk/LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBSZW1vdGVNZWRpYVN0cmVhbSwgd2UgbmVlZCB0byB1bnN1YnNjcmliZSBpdHMgdHJhY2tFbmRlZExpc3RlbmVyKHMpXG4gICAgICAgICAgICAvLyBCZWZvcmUgd2UgdW5zdWJzY3JpYmUgdGhlIHRyYWNrLiBPdGhlcndpc2Ugd2Ugd2lsbCByZWNlaXZlIGEgUmVtb3RlVHJhY2tGYWlsdXJlXG4gICAgICAgICAgICAvLyB3aGVuIHRoZSB0cmFjayBpcyByZW1vdmVkIGZyb20gdGhlIGNvbm5lY3Rpb24uXG4gICAgICAgICAgICBjb25zdCByZW1vdGVNZWRpYVN0cmVhbSA9IHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmdldChjb250ZW50Lm93bmVySWQpPy5nZXQoY29udGVudC5sYWJlbCk7XG4gICAgICAgICAgICBpZiAoIXJlbW90ZU1lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVudC50cmFja0tpbmRzLmZvckVhY2goKHRyYWNrS2luZCkgPT4gcmVtb3RlTWVkaWFTdHJlYW0udW5zdWJzY3JpYmVUcmFja0VuZGVkTGlzdGVuZXIodHJhY2tLaW5kKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlUHVibGlzaE1lZGlhU3RyZWFtKGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgeyBsYWJlbCwgb3duZXJJZCwgc3RyZWFtOiB7IHN0cmVhbUlkLCBhdmFpbGFibGVUcmFja0tpbmRzIH0gfSA9IGNvbnRlbnQ7XG4gICAgICAgIGlmICh0aGlzLnJlbW90ZU1lZGlhU3RyZWFtcy5nZXQob3duZXJJZCk/LmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkNvbnRlbnQsICdTdHJlYW0gYWxyZWFkeSBleGlzdHMnLCBzdHJlYW1JZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5jcmVhdGVSZW1vdGVNZWRpYVN0cmVhbShvd25lcklkLCBsYWJlbCwgc3RyZWFtSWQsIGF2YWlsYWJsZVRyYWNrS2luZHMpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iubm90aWZ5Q2x1c3RlcignY29udGVudC1wdWJsaXNoLW1lZGlhJywge1xuICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZVVucHVibGlzaE1lZGlhU3RyZWFtKHsgb3duZXJJZCwgbGFiZWwgfSkge1xuICAgICAgICB0aGlzLnJlbW92ZVJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLm5vdGlmeUNsdXN0ZXIoJ2NvbnRlbnQtdW5wdWJsaXNoLW1lZGlhJywge1xuICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlQ2xvc2VNZWRpYVN0cmVhbShjb250ZW50KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTG9jYWxNZWRpYVN0cmVhbShjb250ZW50LmxhYmVsKTtcbiAgICB9XG4gICAgaGFuZGxlQ2xvc2VPYmplY3RTdG9yZShjb250ZW50KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlT2JqZWN0U3RvcmUoY29udGVudC5sYWJlbCk7XG4gICAgfVxuICAgIGhhbmRsZUNsb3NlUHViU3ViVG9waWMoY29udGVudCkge1xuICAgICAgICB0aGlzLnJlbW92ZVB1YlN1YlRvcGljKGNvbnRlbnQubGFiZWwpO1xuICAgIH1cbiAgICBoYW5kbGVDbG9zZUtleVZhbHVlRGF0YWJhc2UoY29udGVudCkge1xuICAgICAgICB0aGlzLnJlbW92ZUtleVZhbHVlRGF0YWJhc2UoY29udGVudC5sYWJlbCk7XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmliZU1lZGlhU3RyZWFtKHNvdXJjZUlkLCBjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgb3duZXJJZCwgbGFiZWwgfSA9IGNvbnRlbnQ7XG4gICAgICAgIGxldCBzb3VyY2U7XG4gICAgICAgIGlmIChvd25lcklkICE9PSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCkpIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmdldChvd25lcklkKS5nZXQobGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc291cmNlID0gdGhpcy5sb2NhbE1lZGlhU3RyZWFtcy5nZXQobGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIHNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW0oc291cmNlSWQsIGNvbnRlbnQucGFyYW1zKS5zdWJzY3JpYmUoY29udGVudCwgc291cmNlLmdldFByaW9yaXR5KCkpO1xuICAgIH1cbiAgICBoYW5kbGVVcGRhdGVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICBjb25zdCB7IG93bmVySWQsIGxhYmVsIH0gPSBjb250ZW50O1xuICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICBpZiAob3duZXJJZCAhPT0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpKSB7XG4gICAgICAgICAgICBzb3VyY2UgPSB0aGlzLnJlbW90ZU1lZGlhU3RyZWFtcy5nZXQob3duZXJJZCkuZ2V0KGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuZ2V0KGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBzb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtKHNvdXJjZUlkLCBjb250ZW50LnBhcmFtcykudXBkYXRlKGNvbnRlbnQpO1xuICAgIH1cbiAgICBoYW5kbGVVbnN1YnNjcmliZU1lZGlhU3RyZWFtKHNvdXJjZUlkLCBjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgb3duZXJJZCwgbGFiZWwgfSA9IGNvbnRlbnQ7XG4gICAgICAgIGxldCBzb3VyY2U7XG4gICAgICAgIGlmIChvd25lcklkICE9PSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCkpIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmdldChvd25lcklkKS5nZXQobGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc291cmNlID0gdGhpcy5sb2NhbE1lZGlhU3RyZWFtcy5nZXQobGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIHNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW0oc291cmNlSWQpLnVuc3Vic2NyaWJlKGNvbnRlbnQpO1xuICAgIH1cbiAgICBoYW5kbGVOb2RlSm9pbk5lZWRQdWJsaXNoZWRTdHJlYW0oeyBpZCB9KSB7XG4gICAgICAgIHRoaXMuZ2V0TG9jYWxNZWRpYVN0cmVhbXMoKS5mb3JFYWNoKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIHN0cmVhbS5wdWJsaXNoKGlkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZU5vZGVMZWF2ZSh7IGlkIH0pIHtcbiAgICAgICAgdGhpcy5nZXRSZW1vdGVNZWRpYVN0cmVhbXMoKHN0cmVhbSkgPT4gc3RyZWFtLmdldE93bmVySWQoKSA9PT0gaWQpLmZvckVhY2goKHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVSZW1vdGVNZWRpYVN0cmVhbShzdHJlYW0uZ2V0T3duZXJJZCgpLCBzdHJlYW0uZ2V0TGFiZWwoKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub3RpZnlPYmplY3RTdG9yZU9mTm9kZUpvaW4oeyBpZCB9KSB7XG4gICAgICAgIHRoaXMub2JqZWN0U3RvcmVzLmZvckVhY2goKHN0cmVhbSkgPT4gc3RyZWFtLmhhbmRsZU5vZGVKb2luKGlkKSk7XG4gICAgfVxuICAgIG5vdGlmeU9iamVjdFN0b3JlT2ZOb2RlTGVhdmUoeyBpZCB9KSB7XG4gICAgICAgIHRoaXMub2JqZWN0U3RvcmVzLmZvckVhY2goKHN0cmVhbSkgPT4gc3RyZWFtLmhhbmRsZU5vZGVMZWF2ZShpZCkpO1xuICAgIH1cbiAgICByZW1vdmVPYmplY3RTdG9yZShsYWJlbCkge1xuICAgICAgICBpZiAoIXRoaXMub2JqZWN0U3RvcmVzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlRG9lc05vdEV4aXN0LCAnU3RyZWFtIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YVN0cmVhbSA9IHRoaXMub2JqZWN0U3RvcmVzLmdldChsYWJlbCk7XG4gICAgICAgIHRoaXMub2JqZWN0U3RvcmVzLmRlbGV0ZShsYWJlbCk7XG4gICAgICAgIGRhdGFTdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShkYXRhU3RyZWFtKTtcbiAgICB9XG4gICAgcmVtb3ZlUHViU3ViVG9waWMobGFiZWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnB1YlN1YlRvcGljcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5QdWJTdWJUb3BpY0RvZXNOb3RFeGlzdCwgJ1N0cmVhbSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFTdHJlYW0gPSB0aGlzLnB1YlN1YlRvcGljcy5nZXQobGFiZWwpO1xuICAgICAgICB0aGlzLnB1YlN1YlRvcGljcy5kZWxldGUobGFiZWwpO1xuICAgICAgICBkYXRhU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZGF0YVN0cmVhbSk7XG4gICAgfVxuICAgIHJlbW92ZUtleVZhbHVlRGF0YWJhc2UobGFiZWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VEb2VzTm90RXhpc3QsICdEYXRhYmFzZSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlID0gdGhpcy5rZXlWYWx1ZURhdGFiYXNlcy5nZXQobGFiZWwpO1xuICAgICAgICB0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmRlbGV0ZShsYWJlbCk7XG4gICAgICAgIGRhdGFiYXNlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZGF0YWJhc2UpO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbE1lZGlhU3RyZWFtKGxhYmVsKSB7XG4gICAgICAgIGlmICghdGhpcy5sb2NhbE1lZGlhU3RyZWFtcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkxvY2FsTWVkaWFTdHJlYW1Eb2VzTm90RXhpc3QsIHsgbGFiZWwsIGxvY2FsSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhbE1lZGlhU3RyZWFtID0gdGhpcy5sb2NhbE1lZGlhU3RyZWFtcy5nZXQobGFiZWwpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShsb2NhbE1lZGlhU3RyZWFtKTtcbiAgICAgICAgbG9jYWxNZWRpYVN0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuZGVsZXRlKGxhYmVsKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVtb3RlTWVkaWFTdHJlYW0obm9kZUlkLCBsYWJlbCkge1xuICAgICAgICBpZiAoIXRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmhhcyhub2RlSWQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk5vZGVEb2VzTm90RXhpc3QsIHsgbm9kZUlkLCBsb2NhbElkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlTWVkaWFTdHJlYW1zID0gdGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMuZ2V0KG5vZGVJZCk7XG4gICAgICAgIGlmICghcmVtb3RlTWVkaWFTdHJlYW1zLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuUmVtb3RlTWVkaWFTdHJlYW1Eb2VzTm90RXhpc3QsIHsgbm9kZUlkLCBsYWJlbCwgbG9jYWxJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZVN0cmVhbSA9IHJlbW90ZU1lZGlhU3RyZWFtcy5nZXQobGFiZWwpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShyZW1vdGVTdHJlYW0pO1xuICAgICAgICByZW1vdGVTdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICByZW1vdGVNZWRpYVN0cmVhbXMuZGVsZXRlKGxhYmVsKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhYmFzZUV2ZW50LCBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IFF1ZXJ5QnVpbGRlciB9IGZyb20gJ3B1YmxpYy9tb2RlbHMvQ29udGVudC9LZXlWYWx1ZURhdGFiYXNlUXVlcnlCdWlsZGVyJztcbmltcG9ydCB7IExheW91dEJ1aWxkZXIgfSBmcm9tICdwdWJsaWMvbW9kZWxzL0NvbnRlbnQvS2V5VmFsdWVEYXRhYmFzZUxheW91dEJ1aWxkZXInO1xuaW1wb3J0IHsgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfTEFZT1VUX1RBQkxFX05BTUUsIENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NUQVRTX0RFQk9VTkNFLCBDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9TWU5DX1RJTUVPVVQsIENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1RSQU5TQUNUSU9OX1RBQkxFX05BTUUgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbiwgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9EYXRhQ29udGVudCc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdTZXJ2aWNlcyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VEYXRhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZURhdGFTdHJlYW0nO1xuaW1wb3J0IHsgRGF0YWJhc2VUYWJsZSB9IGZyb20gJ21vZGVscy9Db250ZW50L0tleVZhbHVlRGF0YWJhc2VUYWJsZSc7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnc2VydmljZXMvRmlyZWJhc2UvRmlyZWJhc2VTZXJ2aWNlJztcbmltcG9ydCB7IGNyZWF0ZVNpbmdsZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBLZXlWYWx1ZURhdGFiYXNlIGV4dGVuZHMgQmFzZURhdGFTdHJlYW0ge1xuICAgIGxvY2FsTm9kZTtcbiAgICBjbHVzdGVySWQ7XG4gICAgdmVuZG9ySWQ7XG4gICAgZGI7XG4gICAgZGJLZXk7XG4gICAgdGFibGVzID0gbmV3IE1hcCgpO1xuICAgIHRhYmxlT2JzZXJ2ZXI7XG4gICAgdHJhbnNhY3Rpb25UYWJsZTtcbiAgICB0YWJsZVVuc3Vic2NyaWJlcjtcbiAgICBpc1N5bmM7XG4gICAgc3luY1Jlc29sdmU7XG4gICAgdHJhbnNhY3Rpb25zVG9TeW5jID0gW107XG4gICAgdGltZW91dENhbGxiYWNrID0gKCkgPT4geyB9O1xuICAgIHN5bmNUaW1lb3V0O1xuICAgIGV2ZW50TGlzdGVuZXIgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgIGxpc3RlbmVyVW5zdWJzY3JpYmVyO1xuICAgIHN5bmNUcmFuc2FjdGlvbnNXcml0dGVuID0gW107XG4gICAgbGF5b3V0O1xuICAgIGRlYm91bmNlU3RhdHM7XG4gICAgd3JpdGVzID0gMDtcbiAgICByZWFkcyA9IDA7XG4gICAgY29uc3RydWN0b3IobG9jYWxOb2RlLCBsYWJlbCwgY2x1c3RlcklkLCB2ZW5kb3JJZCwgbGF5b3V0LCBjb25uZWN0b3JDb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAodHlwZW9mIGxhYmVsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZU5hbWVOb3RTdHJpbmcsICdDYW5ub3QgY3JlYXRlIEtleS1WYWx1ZSBEYXRhYmFzZTogTmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobG9jYWxOb2RlLCBsYWJlbCk7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy52ZW5kb3JJZCA9IHZlbmRvcklkO1xuICAgICAgICB0aGlzLmRiS2V5ID0gYGNjYyR7dGhpcy52ZW5kb3JJZH1jY2Mke3RoaXMuY2x1c3RlcklkfWNjYyR7dGhpcy5sYWJlbH1gO1xuICAgICAgICB0aGlzLnRhYmxlT2JzZXJ2ZXIgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgICAgICB0aGlzLmlzU3luYyA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN5bmNSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsYXlvdXQgaW5zdGFuY2VvZiBMYXlvdXRCdWlsZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dC5nZXRMYXlvdXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IFtpc1ZhbGlkLCByZWFzb25dID0gTGF5b3V0QnVpbGRlci52YWxpZGF0ZUxheW91dChsYXlvdXQpO1xuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZUludmFsaWRMYXlvdXQsIGBJbnZhbGlkIGxheW91dDogJHtyZWFzb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFJlc2VydmVkVGFibGVzKHRoaXMubGF5b3V0KTtcbiAgICAgICAgdGhpcy5kYiA9IG5ldyBjb25uZWN0b3JDb25zdHJ1Y3Rvcih0aGlzLmRiS2V5LCB0aGlzLmxheW91dCk7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2U7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy50YWJsZVVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZUtleVZhbHVlRGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VGFibGUodGFibGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZXMuZ2V0KHRhYmxlTmFtZSk7XG4gICAgICAgIGlmICh0YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGIuaGFzVGFibGUodGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VUYWJsZU5vdEZvdW5kLCAnVGFibGUgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdUYWJsZSA9IG5ldyBEYXRhYmFzZVRhYmxlKHRoaXMuZGIuZ2V0VGFibGVDb25uZWN0b3IodGFibGVOYW1lKSwgdGFibGVOYW1lLCB0aGlzLnRhYmxlT2JzZXJ2ZXIpO1xuICAgICAgICAgICAgdGhpcy50YWJsZXMuc2V0KHRhYmxlTmFtZSwgbmV3VGFibGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBnZXQ6IG5ld1RhYmxlLmdldC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBzZXQ6IG5ld1RhYmxlLnNldC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBhZGQ6IG5ld1RhYmxlLmFkZC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBkZWxldGU6IG5ld1RhYmxlLmRlbGV0ZS5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBjbGVhcjogbmV3VGFibGUuY2xlYXIuYmluZChuZXdUYWJsZSksXG4gICAgICAgICAgICAgICAgbGlzdDogbmV3VGFibGUubGlzdC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBjb3VudDogbmV3VGFibGUuY291bnQuYmluZChuZXdUYWJsZSksXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlOiBuZXdUYWJsZS5zdWJzY3JpYmUuYmluZChuZXdUYWJsZSksXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IG5ld1RhYmxlLnVuc3Vic2NyaWJlLmJpbmQobmV3VGFibGUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZU5vdE9wZW4sICdEYXRhYmFzZSBub3Qgb3BlbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVyID0gdGhpcy5ldmVudExpc3RlbmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVyPy4oKTtcbiAgICB9XG4gICAgYXN5bmMgb3BlbigpIHtcbiAgICAgICAgY29uc3QgcmVzZXJ2ZWRUYWJsZXMgPSBbQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRSwgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfTEFZT1VUX1RBQkxFX05BTUVdO1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvblRhYmxlc1RvRGVsZXRlID0gW107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLm9wZW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGxheW91dFRhYmxlID0gdGhpcy5kYi5nZXRUYWJsZUNvbm5lY3RvcihDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9MQVlPVVRfVEFCTEVfTkFNRSk7XG4gICAgICAgICAgICBjb25zdCBsYXlvdXRMaXN0ID0gYXdhaXQgbGF5b3V0VGFibGUubGlzdCgpO1xuICAgICAgICAgICAgY29uc3QgeyBpZCwgbGF5b3V0IH0gPSBsYXlvdXRMaXN0WzBdID8/IHt9O1xuICAgICAgICAgICAgaWYgKCFsYXlvdXQpIHtcbiAgICAgICAgICAgICAgICBsYXlvdXRUYWJsZS5hZGQoeyBsYXlvdXQ6IHRoaXMubGF5b3V0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWJsZSBpbiBsYXlvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc2VydmVkVGFibGVzLmluY2x1ZGVzKHRhYmxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRiLmhhc1RhYmxlKHRhYmxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UYWJsZXNUb0RlbGV0ZS5wdXNoKHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxheW91dFRhYmxlLnNldChpZCwgeyBsYXlvdXQ6IHRoaXMubGF5b3V0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlTm90T3BlbiwgZS5tZXNzYWdlIHx8ICdFcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBvcGVuaW5nIGRhdGFiYXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnN0YW50aWF0ZVRyYW5zYWN0aW9uVGFibGUoKTtcbiAgICAgICAgdGhpcy5zZXRPbk1lc3NhZ2VIYW5kbGVyKCk7XG4gICAgICAgIHRoaXMuc2V0T25UYWJsZVdyaXRlSGFuZGxlcigpO1xuICAgICAgICB0cmFuc2FjdGlvblRhYmxlc1RvRGVsZXRlLmZvckVhY2goKHRhYmxlTmFtZSkgPT4gdGhpcy5kZWxldGVUcmFuc2FjdGlvbnNGb3JUYWJsZSh0YWJsZU5hbWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luY3MgdGhlIGRhdGFiYXNlIHdpdGggdGhlIGNsb3Nlc3QgYW5jZXN0b3IuXG4gICAgICogU3RlcDE6IFJlcXVlc3QgYSBkdW1wIG9mIGFsbCB0cmFuc2FjdGlvbnMgZnJvbSB0aGUgYW5jZXN0b3JcbiAgICAgKiBTdGVwMjogQ29tcGFyZSB0aGUgZHVtcCBvZiB0cmFuc2FjdGlvbnMgd2l0aCBsb2NhbCB0cmFuc2FjdGlvbnMgYW5kIHJlcXVlc3QgdmFsdWUgb2YgYWxsIG1pc3NpbmcgdHJhbnNhY3Rpb25zXG4gICAgICogU3RlcDM6IENvbXBhcmUgbG9jYWwgdHJhbnNhY3Rpb25zIHdpdGggZHVtcCBvZiB0cmFuc2FjdGlvbnMgYW5kIGJyb2FkY2FzdCBhbGwgbmV3IHRyYW5zYWN0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jIHN5bmMoYW5jZXN0b3JJZCwgdGltZW91dENhbGxiYWNrKSB7XG4gICAgICAgIGlmICghYW5jZXN0b3JJZCkge1xuICAgICAgICAgICAgLy8gU2V0IGluIGEgbWljcm90YXNrIHRvIGFsbG93IHRoZSBjbGllbnQgdG8gc3Vic2NyaWJlIHRvIHRoZSBldmVudFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclN5bmNUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3luY0NvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lb3V0Q2FsbGJhY2sgPSB0aW1lb3V0Q2FsbGJhY2s7XG4gICAgICAgIHRoaXMuc3luY1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFjaywgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfU1lOQ19USU1FT1VUKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFthbmNlc3RvcklkXSxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5SZXF1ZXN0U3luY0tleVZhbHVlRGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5pc1N5bmM7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRUcmFuc2FjdGlvbnNEdW1wKG5vZGVJZCkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNhY3Rpb25UYWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25UYWJsZU5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmlzU3luYztcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmxpc3QoKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFtub2RlSWRdLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlNlbmRUcmFuc2FjdGlvbnNEdW1wLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzVHJhbnNhY3Rpb25zRHVtcChub2RlSWQsIHRyYW5zYWN0aW9uc0R1bXApIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uVGFibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhclN5bmNUaW1lb3V0KCk7XG4gICAgICAgIGNvbnN0IGxvY2FsVHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmxpc3QoKTtcbiAgICAgICAgZm9yIChjb25zdCBsb2NhbFRyYW5zYWN0aW9uIG9mIGxvY2FsVHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uc0R1bXAuZmluZCgodCkgPT4gdC5pZCA9PT0gbG9jYWxUcmFuc2FjdGlvbi5pZCk7XG4gICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24gJiYgdGhpcy5jb21wYXJlVHJhbnNhY3Rpb25zKGxvY2FsVHJhbnNhY3Rpb24sIHRyYW5zYWN0aW9uKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbdGFibGVOYW1lLCBrZXldID0gbG9jYWxUcmFuc2FjdGlvbi5pZC5zcGxpdCgnOjonKTtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZXMuZ2V0KHRhYmxlTmFtZSk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRhYmxlPy5nZXQoa2V5KTtcbiAgICAgICAgICAgIGxvY2FsVHJhbnNhY3Rpb24udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2VuZChsb2NhbFRyYW5zYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYW5zYWN0aW9uIG9mIHRyYW5zYWN0aW9uc0R1bXApIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uVGFibGUuZ2V0KHRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgICAgIGlmIChsb2NhbFRyYW5zYWN0aW9uICYmIHRoaXMuY29tcGFyZVRyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbiwgbG9jYWxUcmFuc2FjdGlvbikgPD0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmFjdGlvbiA9PT0gSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uRGVsZXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW3RhYmxlTmFtZSwga2V5XSA9IHRyYW5zYWN0aW9uLmlkLnNwbGl0KCc6OicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZXMuZ2V0KHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGFibGU/LmRlbGV0ZShrZXksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25zVG9TeW5jLnB1c2godHJhbnNhY3Rpb24uaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1RvU3luYy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTeW5jVGltZW91dCgpO1xuICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3luY0NvbXBsZXRlZCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3luY1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMudGltZW91dENhbGxiYWNrLCBDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9TWU5DX1RJTUVPVVQpO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkczogW25vZGVJZF0sXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuUmVxdWVzdFRyYW5zYWN0aW9uc1ZhbHVlLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSWRzOiB0aGlzLnRyYW5zYWN0aW9uc1RvU3luYyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZW5kVHJhbnNhY3Rpb25zVmFsdWUobm9kZUlkLCB0cmFuc2FjdGlvbklkcykge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNhY3Rpb25UYWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25UYWJsZU5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYW5zYWN0aW9uSWQgb2YgdHJhbnNhY3Rpb25JZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmdldCh0cmFuc2FjdGlvbklkKTtcbiAgICAgICAgICAgIGlmICghdHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFt0YWJsZU5hbWUsIGtleV0gPSB0cmFuc2FjdGlvbklkLnNwbGl0KCc6OicpO1xuICAgICAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLnRhYmxlcy5nZXQodGFibGVOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGFibGU/LmdldChrZXkpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb24udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2VuZCh0cmFuc2FjdGlvbiwgW25vZGVJZF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHdyaXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uVGFibGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBTaG91bGQgd2UgcXVldWUgdGhlIHdyaXRlcz9cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMudHJhbnNhY3Rpb25UYWJsZS5nZXQodHJhbnNhY3Rpb24uaWQpO1xuICAgICAgICBpZiAobG9jYWxUcmFuc2FjdGlvbiAmJiB0aGlzLmNvbXBhcmVUcmFuc2FjdGlvbnModHJhbnNhY3Rpb24sIGxvY2FsVHJhbnNhY3Rpb24pIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cml0ZVRyYW5zYWN0aW9uID0ge1xuICAgICAgICAgICAgLi4udHJhbnNhY3Rpb24sXG4gICAgICAgIH07XG4gICAgICAgIGRlbGV0ZSB3cml0ZVRyYW5zYWN0aW9uLnZhbHVlO1xuICAgICAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uVGFibGUuc2V0KHRyYW5zYWN0aW9uLmlkLCB3cml0ZVRyYW5zYWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICAgIH1cbiAgICBjb21wYXJlVHJhbnNhY3Rpb25zKGEsIGIpIHtcbiAgICAgICAgaWYgKGEudGltZXN0YW1wIDwgYi50aW1lc3RhbXApIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS50aW1lc3RhbXAgPiBiLnRpbWVzdGFtcCkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGEucHJpb3JpdHkgLSBiLnByaW9yaXR5O1xuICAgIH1cbiAgICBhc3luYyBnZXRUcmFuc2FjdGlvbkZyb21UYWJsZVdyaXRlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uVGFibGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBTaG91bGQgd2UgcXVldWUgdGhlIHdyaXRlcz9cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25LZXkgPSBgJHtldmVudC50YWJsZU5hbWV9Ojoke2V2ZW50LmtleX1gO1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBhd2FpdCBmaXJlYmFzZS5nZXRFc3RpbWF0ZWRUaW1lc3RhbXAoKTtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB7XG4gICAgICAgICAgICBpZDogdHJhbnNhY3Rpb25LZXksXG4gICAgICAgICAgICBwcmlvcml0eTogTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGFjdGlvbjogZXZlbnQuYWN0aW9uLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBpc1dyaXR0ZW4gPSBhd2FpdCB0aGlzLndyaXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgICAgICBpZiAoIWlzV3JpdHRlbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlVHJhbnNhY3Rpb25zRm9yVGFibGUodGFibGVOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy50cmFuc2FjdGlvblRhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLktleVZhbHVlRGF0YWJhc2VUcmFuc2FjdGlvblRhYmxlTm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhYmxlUHJlZml4ID0gYCR7dGFibGVOYW1lfTo6YDtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBRdWVyeUJ1aWxkZXIuaW5kZXgoJ2lkJykud2hlcmUoJ2JldHdlZW4nLCBbYCR7dGFibGVOYW1lfTo6YCwgYCR7dGFibGVOYW1lfTo6XFx1ZmZmZmBdKTtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmxpc3QocXVlcnkuZ2V0UXVlcnkoKSk7XG4gICAgICAgIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uVGFibGUuZGVsZXRlKHRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRPbk1lc3NhZ2VIYW5kbGVyKCkge1xuICAgICAgICB0aGlzLm9uTWVzc2FnZShhc3luYyAoXywgdHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc1dyaXR0ZW4gPSBhd2FpdCB0aGlzLndyaXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCFpc1dyaXR0ZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU3luY0NvbXBsZXRlKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRyYW5zYWN0aW9uLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25WYWx1ZU5vdFNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbdGFibGVOYW1lLCBrZXldID0gdHJhbnNhY3Rpb24uaWQuc3BsaXQoJzo6Jyk7XG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IHRoaXMudGFibGVzLmdldCh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgaWYgKCF0YWJsZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRhYmxlRG9lc05vdEV4aXN0LCB7IHRhYmxlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETyAtIEhhbmRsZSBzZXQgZXJyb3JzXG4gICAgICAgICAgICBsZXQgc2l6ZSA9IDA7XG4gICAgICAgICAgICBzd2l0Y2ggKHRyYW5zYWN0aW9uLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uQWRkOlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uVXBkYXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdyaXRlVmFsdWUgPSB0YWJsZS5zZXQoa2V5LCB0cmFuc2FjdGlvbi52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzaXplID0gSlNPTi5zdHJpbmdpZnkodHJhbnNhY3Rpb24udmFsdWUpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zVG9TeW5jLmluY2x1ZGVzKHRyYW5zYWN0aW9uLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jVHJhbnNhY3Rpb25zV3JpdHRlbi5wdXNoKHdyaXRlVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uLkRlbGV0ZToge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3cml0ZVZhbHVlID0gdGFibGUuZGVsZXRlKGtleSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNUb1N5bmMuaW5jbHVkZXModHJhbnNhY3Rpb24uaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNUcmFuc2FjdGlvbnNXcml0dGVuLnB1c2god3JpdGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuS2V5VmFsdWVEYXRhYmFzZSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzeW5jJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tTeW5jQ29tcGxldGUodHJhbnNhY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0T25UYWJsZVdyaXRlSGFuZGxlcigpIHtcbiAgICAgICAgdGhpcy50YWJsZVVuc3Vic2NyaWJlciA9IHRoaXMudGFibGVPYnNlcnZlci5zdWJzY3JpYmUoYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgc2l6ZSA9IDA7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uQWRkOlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uVXBkYXRlOlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uRGVsZXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgdGhpcy5nZXRUcmFuc2FjdGlvbkZyb21UYWJsZVdyaXRlRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udmFsdWUgPSBldmVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnZhbHVlKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVzICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIEludGVybmFsRGF0YWJhc2VUYWJsZVJlYWRBY3Rpb24uR2V0OlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbi5MaXN0OlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbi5Db3VudDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkcyArPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLktleVZhbHVlRGF0YWJhc2UsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBldmVudC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgdGFibGVOYW1lOiBldmVudC50YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAga2V5OiBldmVudC5rZXksXG4gICAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGluc3RhbnRpYXRlVHJhbnNhY3Rpb25UYWJsZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25UYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25UYWJsZSA9IHRoaXMuZGIuZ2V0VGFibGVDb25uZWN0b3IoQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRSk7XG4gICAgfVxuICAgIGNsZWFyU3luY1RpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN5bmNUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zeW5jVGltZW91dCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zeW5jVGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaXNoU3luY0NvbXBsZXRlZCgpIHtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyLnB1Ymxpc2goe1xuICAgICAgICAgICAgZXZlbnQ6IERhdGFiYXNlRXZlbnQuU3luY0NvbXBsZXRlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zeW5jUmVzb2x2ZT8uKHRydWUpO1xuICAgICAgICBkZWxldGUgdGhpcy5zeW5jUmVzb2x2ZTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgYXN5bmMgcHVibGlzaFN5bmNDb21wbGV0ZWRBZnRlcldyaXRlcygpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5zeW5jVHJhbnNhY3Rpb25zV3JpdHRlbik7XG4gICAgICAgIHRoaXMucHVibGlzaFN5bmNDb21wbGV0ZWQoKTtcbiAgICB9XG4gICAgY2hlY2tTeW5jQ29tcGxldGUodHJhbnNhY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uc1RvU3luYy5pbmNsdWRlcyh0cmFuc2FjdGlvbi5pZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyU3luY1RpbWVvdXQoKTtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbnNUb1N5bmMgPSB0aGlzLnRyYW5zYWN0aW9uc1RvU3luYy5maWx0ZXIoKHQpID0+IHQgIT09IHRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zVG9TeW5jLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3luY0NvbXBsZXRlZEFmdGVyV3JpdGVzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zeW5jVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy50aW1lb3V0Q2FsbGJhY2ssIENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NZTkNfVElNRU9VVCk7XG4gICAgfVxuICAgIHNlbmRTdGF0cygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVib3VuY2VTdGF0cykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VTdGF0cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJvdW5jZVN0YXRzID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICAgICAgbGV0IHNpemUgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0YWJsZSBvZiB0aGlzLnRhYmxlcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgICAgIHNpemUgKz0gYXdhaXQgdGFibGUuY2FsY3VsYXRlU2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLktleVZhbHVlRGF0YWJhc2VTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlOiBzaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZW50OiB0aGlzLm1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IHRoaXMubWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzU2VudDogdGhpcy5ieXRlc1NlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkOiB0aGlzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXM6IHRoaXMud3JpdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHM6IHRoaXMucmVhZHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ1N0b3JhZ2UoTG9nZ2luZ1NlcnZpY2VzLktleVZhbHVlRGF0YWJhc2UsIGBjY2Mke3RoaXMuY2x1c3RlcklkfWNjYyR7dGhpcy5sYWJlbH1gLCBzaXplKTtcbiAgICAgICAgfSwgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfU1RBVFNfREVCT1VOQ0UpO1xuICAgIH1cbiAgICBhZGRSZXNlcnZlZFRhYmxlcyhsYXlvdXQpIHtcbiAgICAgICAgaWYgKGxheW91dC50YWJsZXNbQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VUYWJsZU5hbWVSZXNlcnZlZCwgYENhbm5vdCBjcmVhdGUgS2V5LVZhbHVlIERhdGFiYXNlOiBUYWJsZSAnJHtDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9UUkFOU0FDVElPTl9UQUJMRV9OQU1FfScgcmVzZXJ2ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGF5b3V0LnRhYmxlc1tDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9MQVlPVVRfVEFCTEVfTkFNRV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VUYWJsZU5hbWVSZXNlcnZlZCwgYENhbm5vdCBjcmVhdGUgS2V5LVZhbHVlIERhdGFiYXNlOiBUYWJsZSAnJHtDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9MQVlPVVRfVEFCTEVfTkFNRX0nIHJlc2VydmVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgbGF5b3V0LnRhYmxlc1tDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9UUkFOU0FDVElPTl9UQUJMRV9OQU1FXSA9IHtcbiAgICAgICAgICAgIGluZGV4ZXM6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBsYXlvdXQudGFibGVzW0NPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX0xBWU9VVF9UQUJMRV9OQU1FXSA9IHtcbiAgICAgICAgICAgIGluZGV4ZXM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNES0NsaWVudEVycm9yLCBTREtDbGllbnRFcnJvckNvZGVzIH0gZnJvbSAncHVibGljL2Vycm9ycy9TREtDbGllbnRFcnJvcic7XG5pbXBvcnQgeyBRdWVyeUJ1aWxkZXIgfSBmcm9tICdwdWJsaWMvbW9kZWxzL0NvbnRlbnQvS2V5VmFsdWVEYXRhYmFzZVF1ZXJ5QnVpbGRlcic7XG5pbXBvcnQgeyBJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uLCBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9EYXRhQ29udGVudCc7XG5pbXBvcnQgeyBjcmVhdGVTaW5nbGVPYnNlcnZlciB9IGZyb20gJ3V0aWxzL09ic2VydmVyL09ic2VydmVyJztcbmV4cG9ydCBjbGFzcyBEYXRhYmFzZVRhYmxlIHtcbiAgICBjb25uZWN0b3I7XG4gICAgdGFibGVOYW1lO1xuICAgIHRhYmxlT2JzZXJ2ZXI7XG4gICAgLy8gVE9ETyAtIFJldmlldyBpZiB3ZSBpbnN0ZWFkIHVzZSBhbiBvYnNlcnZlciBhbmQgcmV0dXJuIGFuIHVuc3Vic2NyaWJlIG9uIHRoZSBzdWJzY3JpYmUgbWV0aG9kXG4gICAgZXZlbnRMaXN0ZW5lciA9IGNyZWF0ZVNpbmdsZU9ic2VydmVyKCk7XG4gICAgbGlzdGVuZXJVbnN1YnNjcmliZXI7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdG9yLCB0YWJsZU5hbWUsIHRhYmxlT2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0b3IgPSBjb25uZWN0b3I7XG4gICAgICAgIHRoaXMudGFibGVOYW1lID0gdGFibGVOYW1lO1xuICAgICAgICB0aGlzLnRhYmxlT2JzZXJ2ZXIgPSB0YWJsZU9ic2VydmVyO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVyPy4oKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0KGtleSkge1xuICAgICAgICBjb25zdCByZWFkRXZlbnQgPSB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICAgICAgYWN0aW9uOiBJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uLkdldCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YWJsZU9ic2VydmVyLnB1Ymxpc2gocmVhZEV2ZW50KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdG9yLmdldChrZXkpO1xuICAgIH1cbiAgICBhc3luYyBzZXQoa2V5LCB2YWx1ZSwgcHVibGlzaFdyaXRlRXZlbnQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIGNvbnN0IGlzVXBkYXRlID0gYXdhaXQgdGhpcy5jb25uZWN0b3IuZ2V0KGtleSk7XG4gICAgICAgIGNvbnN0IHdyaXRlVmFsdWUgPSBhd2FpdCB0aGlzLmNvbm5lY3Rvci5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGlzVXBkYXRlID8gSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uVXBkYXRlIDogSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uQWRkO1xuICAgICAgICB0aGlzLnB1Ymxpc2goYWN0aW9uLCB3cml0ZVZhbHVlKTtcbiAgICAgICAgaWYgKCFwdWJsaXNoV3JpdGVFdmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHdyaXRlVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JpdGVFdmVudCA9IHtcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy50YWJsZU5hbWUsXG4gICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICB2YWx1ZTogd3JpdGVWYWx1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YWJsZU9ic2VydmVyLnB1Ymxpc2god3JpdGVFdmVudCk7XG4gICAgICAgIHJldHVybiB3cml0ZVZhbHVlO1xuICAgIH1cbiAgICBhc3luYyBhZGQodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgY29uc3Qgd3JpdGVWYWx1ZSA9IGF3YWl0IHRoaXMuY29ubmVjdG9yLmFkZCh2YWx1ZSk7XG4gICAgICAgIGNvbnN0IHdyaXRlRXZlbnQgPSB7XG4gICAgICAgICAgICBrZXk6IHdyaXRlVmFsdWUuaWQsXG4gICAgICAgICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICAgICAgYWN0aW9uOiBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbi5BZGQsXG4gICAgICAgICAgICB2YWx1ZTogd3JpdGVWYWx1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YWJsZU9ic2VydmVyLnB1Ymxpc2god3JpdGVFdmVudCk7XG4gICAgICAgIHRoaXMucHVibGlzaCh3cml0ZUV2ZW50LmFjdGlvbiwgd3JpdGVWYWx1ZSk7XG4gICAgICAgIHJldHVybiB3cml0ZVZhbHVlO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGUoa2V5LCBwdWJsaXNoV3JpdGVFdmVudCA9IHRydWUpIHtcbiAgICAgICAgY29uc3Qgd3JpdGVWYWx1ZSA9IGF3YWl0IHRoaXMuY29ubmVjdG9yLmdldChrZXkpO1xuICAgICAgICBpZiAoIXdyaXRlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rvci5kZWxldGUoa2V5KTtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uRGVsZXRlO1xuICAgICAgICB0aGlzLnB1Ymxpc2goYWN0aW9uLCB3cml0ZVZhbHVlKTtcbiAgICAgICAgaWYgKCFwdWJsaXNoV3JpdGVFdmVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyaXRlRXZlbnQgPSB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgICAgdmFsdWU6IHdyaXRlVmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGFibGVPYnNlcnZlci5wdWJsaXNoKHdyaXRlRXZlbnQpO1xuICAgIH1cbiAgICBhc3luYyBjbGVhcigpIHtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gYXdhaXQgdGhpcy5saXN0KCk7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICBjb25zdCBhY3Rpb24gPSBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbi5EZWxldGU7XG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2goYWN0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCB3cml0ZUV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIGtleTogdmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgdGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICBhY3Rpb24sXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50YWJsZU9ic2VydmVyLnB1Ymxpc2god3JpdGVFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdG9yLmNsZWFyKCk7XG4gICAgfVxuICAgIGFzeW5jIGxpc3QocXVlcnkpIHtcbiAgICAgICAgY29uc3QgcmVhZEV2ZW50ID0ge1xuICAgICAgICAgICAga2V5OiAnJyxcbiAgICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy50YWJsZU5hbWUsXG4gICAgICAgICAgICBhY3Rpb246IEludGVybmFsRGF0YWJhc2VUYWJsZVJlYWRBY3Rpb24uTGlzdCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YWJsZU9ic2VydmVyLnB1Ymxpc2gocmVhZEV2ZW50KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICAgICAgICAgIGlmIChxdWVyeSBpbnN0YW5jZW9mIFF1ZXJ5QnVpbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LmdldFF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IFF1ZXJ5QnVpbGRlci5idWlsZFF1ZXJ5KHF1ZXJ5KS5nZXRRdWVyeSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZUludmFsaWRRdWVyeSwgJ0ludmFsaWQgcXVlcnknKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29ubmVjdG9yLmxpc3QocXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICdJbnZhbGlkIHF1ZXJ5JztcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gZS5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZUludmFsaWRRdWVyeSwgbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY291bnQocXVlcnkpIHtcbiAgICAgICAgY29uc3QgcmVhZEV2ZW50ID0ge1xuICAgICAgICAgICAga2V5OiAnJyxcbiAgICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy50YWJsZU5hbWUsXG4gICAgICAgICAgICBhY3Rpb246IEludGVybmFsRGF0YWJhc2VUYWJsZVJlYWRBY3Rpb24uQ291bnQsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGFibGVPYnNlcnZlci5wdWJsaXNoKHJlYWRFdmVudCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgICAgICBpZiAocXVlcnkgaW5zdGFuY2VvZiBRdWVyeUJ1aWxkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5nZXRRdWVyeSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBRdWVyeUJ1aWxkZXIuYnVpbGRRdWVyeShxdWVyeSkuZ2V0UXVlcnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VJbnZhbGlkUXVlcnksICdJbnZhbGlkIHF1ZXJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbm5lY3Rvci5jb3VudChxdWVyeSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ0ludmFsaWQgcXVlcnknO1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlSW52YWxpZFF1ZXJ5LCBtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWxjdWxhdGVTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0b3IuY2FsY3VsYXRlU2l6ZSgpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlciA9IHRoaXMuZXZlbnRMaXN0ZW5lci5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlcj8uKCk7XG4gICAgfVxuICAgIHB1Ymxpc2godGFibGVBY3Rpb24sIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5idWlsZFRhYmxlRXZlbnQodGFibGVBY3Rpb24sIHZhbHVlKTtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyLnB1Ymxpc2goZXZlbnQpO1xuICAgIH1cbiAgICBidWlsZFRhYmxlRXZlbnQodGFibGVBY3Rpb24sIHZhbHVlKSB7XG4gICAgICAgIGxldCBhY3Rpb247XG4gICAgICAgIHN3aXRjaCAodGFibGVBY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uQWRkOlxuICAgICAgICAgICAgICAgIGFjdGlvbiA9ICdhZGQnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbi5VcGRhdGU6XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gJ3VwZGF0ZSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uLkRlbGV0ZTpcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSAnZGVsZXRlJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBhY3Rpb24sIHZhbHVlIH07XG4gICAgfVxuICAgIHZhbGlkYXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VJbnZhbGlkVmFsdWUsICdJbnZhbGlkIHZhbHVlLiBNdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHlWYWx1ZSA9IHZhbHVlW2tleV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5VmFsdWUgPT09ICdvYmplY3QnICYmICEocHJvcGVydHlWYWx1ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVZhbHVlKHByb3BlcnR5VmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFbJ3N0cmluZycsICdudW1iZXInLCAnYm9vbGVhbiddLmluY2x1ZGVzKHR5cGVvZiBwcm9wZXJ0eVZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VJbnZhbGlkVmFsdWUsIGBJbnZhbGlkIHZhbHVlLiBQcm9wZXJ0eSAnJHtrZXl9JyBtdXN0IGJlIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9yIERhdGUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBCYXNlTG9jYWxNZWRpYVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L0Jhc2VMb2NhbE1lZGlhU3RyZWFtJztcbmV4cG9ydCBjbGFzcyBMb2NhbER5bmFtaWNNZWRpYVN0cmVhbSBleHRlbmRzIEJhc2VMb2NhbE1lZGlhU3RyZWFtIHtcbiAgICBhdWRpb0NvbnRleHQ7XG4gICAgdHJhbnNmb3JtYXRpb25zID0gW107XG4gICAgY2xpZW50U3RyZWFtO1xuICAgIGF1ZGlvU291cmNlO1xuICAgIGF1ZGlvRGVzdGluYXRpb247XG4gICAgc291cmNlVmlkZW87XG4gICAgY2FudmFzO1xuICAgIGNvbnRleHQ7XG4gICAgaW50ZXJ2YWw7XG4gICAgY29uc3RydWN0b3Iob3duZXIsIGxhYmVsLCBtZWRpYVNvdXJjZSwgbWF4RnBzLCBhdWRpb0NvbnRleHQsIGNsdXN0ZXJJZCkge1xuICAgICAgICBzdXBlcihvd25lciwgbGFiZWwsIG1lZGlhU291cmNlLCBjbHVzdGVySWQpO1xuICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dCA9IGF1ZGlvQ29udGV4dDtcbiAgICAgICAgdGhpcy5jbGllbnRTdHJlYW0gPSB0aGlzLm1lZGlhU3RyZWFtO1xuICAgICAgICB0aGlzLnNvdXJjZVZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgdGhpcy5zb3VyY2VWaWRlby5hdXRvcGxheSA9IHRydWU7XG4gICAgICAgIHRoaXMuc291cmNlVmlkZW8ubXV0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNvdXJjZVZpZGVvLnNyY09iamVjdCA9IHRoaXMuY2xpZW50U3RyZWFtO1xuICAgICAgICB0aGlzLnNvdXJjZVZpZGVvLmxvYWQoKTtcbiAgICAgICAgdGhpcy5zb3VyY2VWaWRlby5vbmxvYWRlZGRhdGEgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVZpZGVvLnBsYXkoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbSA9IHRoaXMuY2FudmFzLmNhcHR1cmVTdHJlYW0obWF4RnBzKTtcbiAgICAgICAgdGhpcy5hdWRpb0Rlc3RpbmF0aW9uID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpO1xuICAgICAgICBpZiAodGhpcy5jbGllbnRTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb1NvdXJjZSA9IHRoaXMuY2xpZW50U3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF07XG4gICAgICAgICAgICB0aGlzLmF1ZGlvU291cmNlID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UobmV3IE1lZGlhU3RyZWFtKFthdWRpb1NvdXJjZV0pKTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW9Tb3VyY2UuY29ubmVjdCh0aGlzLmF1ZGlvRGVzdGluYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGF1ZGlvVHJhY2sgPSB0aGlzLmF1ZGlvRGVzdGluYXRpb24uc3RyZWFtLmdldFRyYWNrcygpWzBdO1xuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLmFkZFRyYWNrKGF1ZGlvVHJhY2spO1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLnNvdXJjZVZpZGVvLnZpZGVvV2lkdGg7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLnNvdXJjZVZpZGVvLnZpZGVvSGVpZ2h0O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNvdXJjZVZpZGVvLnZpZGVvV2lkdGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudFN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PT0gMCB8fCAhdGhpcy5jbGllbnRTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudFN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PT0gMCB8fCAhdGhpcy5jbGllbnRTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5zb3VyY2VWaWRlbywgMCwgMCk7XG4gICAgICAgIH0sIDEwMDAgLyBtYXhGcHMpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLnNvdXJjZVZpZGVvLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmNhbnZhcy5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5hdWRpb1NvdXJjZT8uZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLmF1ZGlvRGVzdGluYXRpb24uZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB7XG4gICAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgYWRkVHJhY2sodHJhY2spIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUcmFjayA9IHRoaXMuZ2V0VHJhY2sodHJhY2sua2luZCk7XG4gICAgICAgIGlmIChleGlzdGluZ1RyYWNrKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKGV4aXN0aW5nVHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjay5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEF1ZGlvVHJhY2sodHJhY2spO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjay5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFZpZGVvVHJhY2sodHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0dXBUcmFja0VuZGVkTGlzdGVuZXJzKHRyYWNrKTtcbiAgICB9XG4gICAgcmVtb3ZlVHJhY2socGFyYW0pIHtcbiAgICAgICAgY29uc3QgdHJhY2sgPSB0aGlzLmdldFRyYWNrRnJvbVBhcmFtKHBhcmFtKTtcbiAgICAgICAgaWYgKHRyYWNrKSB7XG4gICAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9Tb3VyY2U/LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvU291cmNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmFja0VuZGVkTGlzdGVuZXJzLmdldCh0cmFjay5raW5kKT8uKCk7XG4gICAgICAgICAgICB0aGlzLmNsaWVudFN0cmVhbS5yZW1vdmVUcmFjayh0cmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgIH1cbiAgICByZXBsYWNlVHJhY2sodHJhY2spIHtcbiAgICAgICAgdGhpcy5yZW1vdmVUcmFjayh0cmFjay5raW5kKTtcbiAgICAgICAgdGhpcy5hZGRUcmFjayh0cmFjayk7XG4gICAgfVxuICAgIHNldFRyYW5zZm9ybWF0aW9ucyh0cmFuc2Zvcm1hdGlvbnMpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1hdGlvbnMgPSB0cmFuc2Zvcm1hdGlvbnM7XG4gICAgfVxuICAgIGdldFRyYWNrKGtpbmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpZW50U3RyZWFtLmdldFRyYWNrcygpLmZpbmQoKHRyYWNrKSA9PiB0cmFjay5raW5kID09PSBraW5kKSB8fCBudWxsO1xuICAgIH1cbiAgICBnZXRUcmFja0Zyb21QYXJhbShwYXJhbSkge1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VHJhY2socGFyYW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbTtcbiAgICB9XG4gICAgYWRkQXVkaW9UcmFjayh0cmFjaykge1xuICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgICAgICAvLyBOZWVkZWQgc2luY2UgdGhlIEF1ZGlvQ29udGV4dCBpcyBpbml0aWFsaXplZCBiZWZvcmUgYSB1c2VyIGludGVyYWN0aW9uIHdpdGggdGhlIHBhZ2UuXG4gICAgICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dC5yZXN1bWUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsaWVudFN0cmVhbS5hZGRUcmFjayh0cmFjayk7XG4gICAgICAgIHRoaXMuYXVkaW9Tb3VyY2UgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSh0aGlzLmNsaWVudFN0cmVhbSk7XG4gICAgICAgIHRoaXMuYXVkaW9Tb3VyY2UuY29ubmVjdCh0aGlzLmF1ZGlvRGVzdGluYXRpb24pO1xuICAgIH1cbiAgICBhZGRWaWRlb1RyYWNrKHRyYWNrKSB7XG4gICAgICAgIHRoaXMuY2xpZW50U3RyZWFtLmFkZFRyYWNrKHRyYWNrKTtcbiAgICAgICAgdGhpcy5zb3VyY2VWaWRlby5sb2FkKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQmFzZUxvY2FsTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlTG9jYWxNZWRpYVN0cmVhbSc7XG5leHBvcnQgY2xhc3MgTG9jYWxNZWRpYVN0cmVhbSBleHRlbmRzIEJhc2VMb2NhbE1lZGlhU3RyZWFtIHtcbn1cbiIsImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgT2JqZWN0S2luZCwgUGF5bG9hZEFjdGlvbiwgU3RvcmFnZUV2ZW50VHlwZSwgQ29udGVudFR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IFNES0NsaWVudEVycm9yLCBTREtDbGllbnRFcnJvckNvZGVzIH0gZnJvbSAncHVibGljL2Vycm9ycy9TREtDbGllbnRFcnJvcic7XG5pbXBvcnQgeyBDT05URU5UX09CSkVDVF9TVE9SRV9MQVNUX1RSQU5TQUNUSU9OX09CSkVDVF9OQU1FLCBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiwgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19SRVRSWV9ERUxBWSwgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfU1RBVFNfREVCT1VOQ0UgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbiwgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0RhdGFDb250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ1NlcnZpY2VzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZURhdGFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlRGF0YVN0cmVhbSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgZ2V0RmlsZUNoZWNrc3VtLCBnZXRGaWxlQ29udGVudCwgcmVhZEZpbGVDb250ZW50LCBnZXRQYXRoTmFtZSwgc3BsaXRQYXRoTmFtZSB9IGZyb20gJ3V0aWxzL09iamVjdFN0b3JlL0hlbHBlcnMnO1xuaW1wb3J0IHsgY3JlYXRlU2luZ2xlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgT2JqZWN0U3RvcmUgZXh0ZW5kcyBCYXNlRGF0YVN0cmVhbSB7XG4gICAgbG9jYWxOb2RlO1xuICAgIGNsdXN0ZXJJZDtcbiAgICB2ZW5kb3JJZDtcbiAgICB0cmFuc2FjdGlvblNlcnZpY2U7XG4gICAgdW5zdWJzY3JpYmVIYW5kbGVyO1xuICAgIGxhc3RUcmFuc2FjdGlvbklkO1xuICAgIHBlbmRpbmdTeW5jVHJhbnNhY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgIG9iamVjdFJlcXVlc3RzID0gbmV3IE1hcCgpO1xuICAgIHBlbmRpbmdGaWxlc1N5bmNpbmcgPSBuZXcgTWFwKCk7XG4gICAgcGVuZGluZ0ZpbGVzVHJhbnNhY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgIHBlbmRpbmdGaWxlc1JlbmFtZSA9IG5ldyBNYXAoKTtcbiAgICBvYmplY3RTdG9yZUNvbm5lY3RvcjtcbiAgICBldmVudExpc3RlbmVyID0gY3JlYXRlU2luZ2xlT2JzZXJ2ZXIoKTtcbiAgICBsaXN0ZW5lclVuc3Vic2NyaWJlcjtcbiAgICBkZWJvdW5jZVN0YXRzO1xuICAgIHdyaXRlcyA9IDA7XG4gICAgcmVhZHMgPSAwO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsTm9kZSwgbGFiZWwsIGNsdXN0ZXJJZCwgdmVuZG9ySWQsIHRyYW5zYWN0aW9uU2VydmljZSwgY29ubmVjdG9yQ29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlTmFtZU5vdFN0cmluZywgJ0Nhbm5vdCBjcmVhdGUgT2JqZWN0U3RvcmU6IExhYmVsIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihsb2NhbE5vZGUsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUgPSBsb2NhbE5vZGU7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TZXJ2aWNlID0gdHJhbnNhY3Rpb25TZXJ2aWNlO1xuICAgICAgICBjb25zdCBzdG9yZUtleSA9IGBjY2Mke3RoaXMudmVuZG9ySWR9Y2NjJHt0aGlzLmNsdXN0ZXJJZH1jY2Mke2xhYmVsfWA7XG4gICAgICAgIHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IgPSBuZXcgY29ubmVjdG9yQ29uc3RydWN0b3Ioc3RvcmVLZXkpO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgZ2V0Q29udGVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBDb250ZW50VHlwZS5PYmplY3RTdG9yZTtcbiAgICB9XG4gICAgYXN5bmMgc3luYygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmdldChDT05URU5UX09CSkVDVF9TVE9SRV9MQVNUX1RSQU5TQUNUSU9OX09CSkVDVF9OQU1FKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RUcmFuc2FjdGlvbklkID0gYXdhaXQgZmlsZS50ZXh0KCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RUcmFuc2FjdGlvbklkID0gbGFzdFRyYW5zYWN0aW9uSWQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlciA9IHRoaXMub25NZXNzYWdlKGFzeW5jIChfLCBjb250ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBheWxvYWRUeXBlID09PSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZFR5cGUuUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlcXVlc3RQYXlsb2FkKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVHJhbnNhY3Rpb25QYXlsb2FkKGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNES0ludGVybmFsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZUludmFsaWRTeW5jTWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBjb250ZW50LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5zeW5jVHJhbnNhY3Rpb25zKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc3luY1BlbmRpbmdGaWxlcygpO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcj8uKCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljPy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VPYmplY3RTdG9yZUJ1Y2tldCxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlQWxyZWFkeVN1YnNjcmliZWQsICdDYW5ub3Qgc3Vic2NyaWJlIHRvIE9iamVjdFN0b3JlOiBBbHJlYWR5IHN1YnNjcmliZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVyID0gdGhpcy5ldmVudExpc3RlbmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVyKCk7XG4gICAgfVxuICAgIHB1Ymxpc2gocGF5bG9hZCkge1xuICAgICAgICBzd2l0Y2ggKHBheWxvYWQuYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFBheWxvYWRBY3Rpb24uRmlsZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdWJsaXNoRmlsZShwYXlsb2FkLmZpbGUsIHBheWxvYWQucGF0aCk7XG4gICAgICAgICAgICBjYXNlIFBheWxvYWRBY3Rpb24uRm9sZGVyOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1Ymxpc2hGb2xkZXIocGF5bG9hZC5wYXRoKTtcbiAgICAgICAgICAgIGNhc2UgUGF5bG9hZEFjdGlvbi5Nb3ZlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1Ymxpc2hNb3ZlKHBheWxvYWQucGF0aCwgcGF5bG9hZC5uZXdQYXRoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkUGF5bG9hZCwgYENhbm5vdCBwdWJsaXNoIHBheWxvYWQ6ICR7cGF5bG9hZH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1bnB1Ymxpc2gocGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudElkID0gdGhpcy5sYXN0VHJhbnNhY3Rpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5UcmFuc2FjdGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLkRlbGV0ZSxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRJZCxcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFRyYW5zYWN0aW9uKHBheWxvYWQpO1xuICAgICAgICAgICAgY29uc3Qga2luZCA9IGF3YWl0IHRoaXMuZGVsZXRlT2JqZWN0KHBhdGgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHBheWxvYWQpO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd1bnB1Ymxpc2gnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53cml0ZXMgKz0gMTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlTm90SW5TeW5jLCBgT2JqZWN0IHN0b3JlIGRhdGEgc3RyZWFtIGlzIG5vdCBpbiBzeW5jYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZUludmFsaWRQYXRoLCBgQ2Fubm90IHVucHVibGlzaCBvYmplY3Q6ICR7cGF0aH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXQocGF0aCkge1xuICAgICAgICBsb2dnZXIubG9nU2VydmljZUV2ZW50KExvZ2dpbmdTZXJ2aWNlcy5PYmplY3RTdG9yYWdlLCB7XG4gICAgICAgICAgICB0eXBlOiAnZ2V0JyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVhZHMgKz0gMTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmdldChwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmdldChwYXRoICsgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZUludmFsaWRQYXRoLCBgQ2Fubm90IGdldCBmaWxlOiAke3BhdGh9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZU5vdEluU3luYywgYE9iamVjdCBzdG9yZSBpcyBub3QgaW4gc3luY2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGxpc3QocGF0aCwgcmVjdXJzaXZlID0gZmFsc2UsIGluY2x1ZGVQZW5kaW5nID0gZmFsc2UpIHtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgdHlwZTogJ2xpc3QnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZWFkcyArPSAxO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IubGlzdChwYXRoLCByZWN1cnNpdmUpO1xuICAgICAgICAgICAgaWYgKGluY2x1ZGVQZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbGVhbkxpc3QobGlzdCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFBhdGgsIGBDYW5ub3QgbGlzdCBkaXJlY3Rvcnk6ICR7cGF0aH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOb2RlSm9pbihub2RlSWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwYXlsb2FkIG9mIHRoaXMub2JqZWN0UmVxdWVzdHMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZChwYXlsb2FkLCBbbm9kZUlkXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTm9kZUxlYXZlKG5vZGVJZCkge1xuICAgICAgICBjb25zdCBwZW5kaW5nRmlsZXMgPSB0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuZ2V0KG5vZGVJZCk7XG4gICAgICAgIGlmICghcGVuZGluZ0ZpbGVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBbcGF5bG9hZCwgdGltZW91dF0gb2YgcGVuZGluZ0ZpbGVzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRGaWxlUmVxdWVzdFBheWxvYWQocGF5bG9hZCwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmRlbGV0ZShub2RlSWQpO1xuICAgIH1cbiAgICBjbGVhbkxpc3QobGlzdCkge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGxpc3QpIHtcbiAgICAgICAgICAgIGlmIChlbnRyeS5raW5kID09PSBPYmplY3RLaW5kLkZvbGRlcikge1xuICAgICAgICAgICAgICAgIGVudHJ5LmVudHJpZXMgPSB0aGlzLmNsZWFuTGlzdChlbnRyeS5lbnRyaWVzID8/IFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbnRyeS5uYW1lLmVuZHNXaXRoKENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OKSB8fCBlbnRyeS5uYW1lID09PSBDT05URU5UX09CSkVDVF9TVE9SRV9MQVNUX1RSQU5TQUNUSU9OX09CSkVDVF9OQU1FKSB7XG4gICAgICAgICAgICAgICAgbGlzdC5zcGxpY2UobGlzdC5pbmRleE9mKGVudHJ5KSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuICAgIGFzeW5jIHB1Ymxpc2hGaWxlKGZpbGUsIHBhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRJZCA9IHRoaXMubGFzdFRyYW5zYWN0aW9uSWQ7XG4gICAgICAgICAgICBjb25zdCBjaGVja3N1bSA9IGF3YWl0IGdldEZpbGVDaGVja3N1bShmaWxlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFRyYW5zYWN0aW9uKHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkVHlwZTogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlLlRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRmlsZVdyaXRlLFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgICAgICAgIGFuc3dlcmVySWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoID8/ICcvJyxcbiAgICAgICAgICAgICAgICBjaGVja3N1bSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZUZpbGUoZmlsZSwgcGF0aCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRGaWxlKGZpbGUsIHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkVHlwZTogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlLlRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRmlsZVdyaXRlLFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgICAgICAgIGFuc3dlcmVySWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoID8/ICcvJyxcbiAgICAgICAgICAgICAgICBjaGVja3N1bSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdwdWJsaXNoJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICBraW5kOiBPYmplY3RLaW5kLkZpbGUsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlcyArPSAxO1xuICAgICAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgICAgIC8vIFRPRE8gLSB0cmlnZ2VyIGFuIGV2ZW50IHdoZW4gdGhlIGZpbGUgaGFzIGJlZW4gc3luY2VkIGF0IGxlYXN0IG9uY2VcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTREtJbnRlcm5hbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuT2JqZWN0U3RvcmVOb3RJblN5bmMsIGBPYmplY3Qgc3RvcmUgaXMgbm90IGluIHN5bmNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFBhdGgsIGBDYW5ub3QgcHVibGlzaCBmaWxlOiAke3BhdGh9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcHVibGlzaEZvbGRlcihwYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHV1aWR2NCgpO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50SWQgPSB0aGlzLmxhc3RUcmFuc2FjdGlvbklkO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkVHlwZTogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlLlRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRm9sZGVyQ3JlYXRlLFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wdWJsaXNoVHJhbnNhY3Rpb24ocGF5bG9hZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmNyZWF0ZUZvbGRlcihwYXRoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkKTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLk9iamVjdFN0b3JhZ2UsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncHVibGlzaCcsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAga2luZDogT2JqZWN0S2luZC5Gb2xkZXIsXG4gICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53cml0ZXMgKz0gMTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlTm90SW5TeW5jLCBgT2JqZWN0IHN0b3JlIGlzIG5vdCBpbiBzeW5jYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZUludmFsaWRQYXRoLCBgQ2Fubm90IHB1Ymxpc2ggZm9sZGVyOiAke3BhdGh9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcHVibGlzaE1vdmUocGF0aCwgbmV3UGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudElkID0gdGhpcy5sYXN0VHJhbnNhY3Rpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5UcmFuc2FjdGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLk1vdmUsXG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICBuZXdQYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFRyYW5zYWN0aW9uKHBheWxvYWQpO1xuICAgICAgICAgICAgY29uc3Qga2luZCA9IGF3YWl0IHRoaXMubW92ZU9iamVjdChwYXRoLCBuZXdQYXRoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkKTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLk9iamVjdFN0b3JhZ2UsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbW92ZScsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgIG5ld1BhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVzICs9IDE7XG4gICAgICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNES0ludGVybmFsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZU5vdEluU3luYywgYE9iamVjdCBzdG9yZSBpcyBub3QgaW4gc3luY2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkUGF0aCwgYENhbm5vdCBwdWJsaXNoIG1vdmUgb3BlcmF0aW9uOiAke3BhdGh9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVHJhbnNhY3Rpb25QYXlsb2FkKHBheWxvYWQpIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdFRyYW5zYWN0aW9uSWQgJiYgcGF5bG9hZC5wYXJlbnRJZCAhPT0gdGhpcy5sYXN0VHJhbnNhY3Rpb25JZCAmJiBwYXlsb2FkLmlkICE9PSB0aGlzLmxhc3RUcmFuc2FjdGlvbklkKSB7XG4gICAgICAgICAgICBpZiAoIXBheWxvYWQucGFyZW50SWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1N5bmNUcmFuc2FjdGlvbnMuc2V0KHBheWxvYWQucGFyZW50SWQsIHBheWxvYWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gLSBoYW5kbGUgZmFpbGluZyB0cmFuc2FjdGlvblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzVHJhbnNhY3Rpb25QYXlsb2FkKHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMYXN0VHJhbnNhY3Rpb25JZChwYXlsb2FkLmlkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzUGVuZGluZ1N5bmNUcmFuc2FjdGlvbnMocGF5bG9hZC5pZCk7XG4gICAgfVxuICAgIGFzeW5jIHByb2Nlc3NUcmFuc2FjdGlvblBheWxvYWQocGF5bG9hZCkge1xuICAgICAgICBzd2l0Y2ggKHBheWxvYWQuYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLkZpbGVXcml0ZTpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUZpbGVXcml0ZShwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRm9sZGVyQ3JlYXRlOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlRm9sZGVyQ3JlYXRlKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5Nb3ZlOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlT2JqZWN0TW92ZShwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRGVsZXRlOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlT2JqZWN0RGVsZXRlKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlLCB7IHBheWxvYWQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcHJvY2Vzc1BlbmRpbmdTeW5jVHJhbnNhY3Rpb25zKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdTeW5jVHJhbnNhY3Rpb25zLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdQYXlsb2FkID0gdGhpcy5wZW5kaW5nU3luY1RyYW5zYWN0aW9ucy5nZXQoaWQpO1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nU3luY1RyYW5zYWN0aW9ucy5kZWxldGUoaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVUcmFuc2FjdGlvblBheWxvYWQocGVuZGluZ1BheWxvYWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJlcXVlc3RQYXlsb2FkKHBheWxvYWQpIHtcbiAgICAgICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5SZXF1ZXN0RmlsZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVGaWxlUmVxdWVzdChwYXlsb2FkKTtcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEFjY2VwdGVkOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUZpbGVSZXF1ZXN0QW5zd2VyKHBheWxvYWQpO1xuICAgICAgICAgICAgY2FzZSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5SZXF1ZXN0RmlsZVN5bmM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRmlsZVN5bmMocGF5bG9hZCk7XG4gICAgICAgICAgICBjYXNlIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLlJlcXVlc3RGaWxlV3JpdGU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRmlsZVdyaXRlKHBheWxvYWQpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlLCB7IHBheWxvYWQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlRmlsZVdyaXRlKHBheWxvYWQpIHtcbiAgICAgICAgLy8gcGF5bG9hZC5pbmRleCBjYW4gYmUgMCwgd2hpY2ggbWVhbnMgIXBheWxvYWQuaW5kZXggd2lsbCBiZSB0cnVlXG4gICAgICAgIGlmICghcGF5bG9hZC5kYXRhIHx8IHBheWxvYWQuaW5kZXggPT09IHVuZGVmaW5lZCB8fCAhcGF5bG9hZC50b3RhbCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVQZW5kaW5nRmlsZVdyaXRlKHBheWxvYWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGhOYW1lID0gZ2V0UGF0aE5hbWUocGF5bG9hZC5wYXRoLCBwYXlsb2FkLm5hbWUpO1xuICAgICAgICBpZiAoIXRoaXMuZmlsZUNodW5rcy5oYXMocGF0aE5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVDaHVua3Muc2V0KHBhdGhOYW1lLCBbXSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVBlbmRpbmdGaWxlV3JpdGUocGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRQZW5kaW5nRmlsZVN5bmNpbmdQYXlsb2FkKHBheWxvYWQsIHBhdGhOYW1lKTtcbiAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5maWxlQ2h1bmtzLmdldChwYXRoTmFtZSk7XG4gICAgICAgIGNodW5rc1twYXlsb2FkLmluZGV4XSA9IHBheWxvYWQuZGF0YTtcbiAgICAgICAgaWYgKGNodW5rcy5maWx0ZXIoYyA9PiBjKS5sZW5ndGggPCBwYXlsb2FkLnRvdGFsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZSA9IGdldEZpbGVDb250ZW50KGNodW5rcywgcGF5bG9hZC5uYW1lLCBwYXlsb2FkLnR5cGUpO1xuICAgICAgICBhd2FpdCB0aGlzLndyaXRlRmlsZShmaWxlLCBwYXlsb2FkLnBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZVBlbmRpbmdGaWxlKHBheWxvYWQpO1xuICAgICAgICB0aGlzLmZpbGVDaHVua3MuZGVsZXRlKHBhdGhOYW1lKTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgdHlwZTogJ3N5bmMnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBraW5kOiBPYmplY3RLaW5kLkZpbGUsXG4gICAgICAgICAgICBwYXRoOiBwYXlsb2FkLnBhdGgsXG4gICAgICAgICAgICBmaWxlTmFtZTogcGF5bG9hZC5uYW1lLFxuICAgICAgICAgICAgZmlsZVR5cGU6IHBheWxvYWQudHlwZSxcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IHRoaXMucGVuZGluZ0ZpbGVzVHJhbnNhY3Rpb25zLmdldChwYXlsb2FkLnBhdGgpID8/IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHRyYW5zYWN0aW9uIG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzVHJhbnNhY3Rpb25QYXlsb2FkKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmdGaWxlc1RyYW5zYWN0aW9ucy5kZWxldGUocGF5bG9hZC5wYXRoKTtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyLnB1Ymxpc2goe1xuICAgICAgICAgICAgZXZlbnQ6IFN0b3JhZ2VFdmVudFR5cGUuRmlsZVdyaXRlLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIGZpbGU6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogT2JqZWN0S2luZC5GaWxlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXlsb2FkLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXlsb2FkLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGhOYW1lLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlRm9sZGVyQ3JlYXRlKHBheWxvYWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5jcmVhdGVGb2xkZXIocGF5bG9hZC5wYXRoKTtcbiAgICAgICAgY29uc3QgW3BhdGgsIG5hbWVdID0gc3BsaXRQYXRoTmFtZShwYXlsb2FkLnBhdGgpO1xuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIucHVibGlzaCh7XG4gICAgICAgICAgICBldmVudDogU3RvcmFnZUV2ZW50VHlwZS5Gb2xkZXJDcmVhdGUsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgZm9sZGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IE9iamVjdEtpbmQuRm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXRoTmFtZTogcGF5bG9hZC5wYXRoLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlT2JqZWN0RGVsZXRlKHBheWxvYWQpIHtcbiAgICAgICAgLy8gVE9ETyAtIHN0b3Agc3luY2luZyBmaWxlcyB0aGF0IGFyZSBkZWxldGVkXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRQcm9jZXNzVHJhbnNhY3Rpb24ocGF5bG9hZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBraW5kID0gYXdhaXQgdGhpcy5kZWxldGVPYmplY3QocGF5bG9hZC5wYXRoKTtcbiAgICAgICAgY29uc3QgW3BhdGgsIG5hbWVdID0gc3BsaXRQYXRoTmFtZShwYXlsb2FkLnBhdGgpO1xuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIucHVibGlzaCh7XG4gICAgICAgICAgICBldmVudDoga2luZCA9PT0gT2JqZWN0S2luZC5Gb2xkZXIgPyBTdG9yYWdlRXZlbnRUeXBlLkZvbGRlckRlbGV0ZSA6IFN0b3JhZ2VFdmVudFR5cGUuRmlsZURlbGV0ZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgcGF0aE5hbWU6IHBheWxvYWQucGF0aCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVPYmplY3RNb3ZlKHBheWxvYWQpIHtcbiAgICAgICAgLy8gVE9ETyAtIGhhbmRsZSBtb3Zpbmcgc3luY2luZyBmaWxlc1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkUHJvY2Vzc1RyYW5zYWN0aW9uKHBheWxvYWQpKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdGaWxlc1JlbmFtZS5zZXQocGF5bG9hZC5uZXdQYXRoLCB0aGlzLnBlbmRpbmdGaWxlc1JlbmFtZS5nZXQocGF5bG9hZC5wYXRoKSA/PyBwYXlsb2FkLnBhdGgpO1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNSZW5hbWUuZGVsZXRlKHBheWxvYWQucGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNSZW5hbWUuZGVsZXRlKHBheWxvYWQucGF0aCk7XG4gICAgICAgIGNvbnN0IGtpbmQgPSBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLm1vdmVPYmplY3QocGF5bG9hZC5wYXRoLCBwYXlsb2FkLm5ld1BhdGgpO1xuICAgICAgICBjb25zdCBbb2xkUGF0aCwgb2xkTmFtZV0gPSBzcGxpdFBhdGhOYW1lKHBheWxvYWQucGF0aCk7XG4gICAgICAgIGNvbnN0IFtwYXRoLCBuYW1lXSA9IHNwbGl0UGF0aE5hbWUocGF5bG9hZC5uZXdQYXRoKTtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyLnB1Ymxpc2goe1xuICAgICAgICAgICAgZXZlbnQ6IGtpbmQgPT09IE9iamVjdEtpbmQuRm9sZGVyID8gU3RvcmFnZUV2ZW50VHlwZS5Gb2xkZXJNb3ZlIDogU3RvcmFnZUV2ZW50VHlwZS5GaWxlTW92ZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgcGF0aE5hbWU6IHBheWxvYWQubmV3UGF0aCxcbiAgICAgICAgICAgICAgICBvbGROYW1lLFxuICAgICAgICAgICAgICAgIG9sZFBhdGgsXG4gICAgICAgICAgICAgICAgb2xkUGF0aE5hbWU6IHBheWxvYWQucGF0aCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaG91bGRQcm9jZXNzVHJhbnNhY3Rpb24ocGF5bG9hZCkge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFBhdGggPSB0aGlzLnBlbmRpbmdGaWxlc1JlbmFtZS5nZXQocGF5bG9hZC5wYXRoKSA/PyBwYXlsb2FkLnBhdGg7XG4gICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB0aGlzLmZpbGVDaHVua3Mua2V5cygpKSB7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgob3JpZ2luYWxQYXRoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IHRoaXMucGVuZGluZ0ZpbGVzVHJhbnNhY3Rpb25zLmdldChrZXkpID8/IFtdO1xuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9ucy5wdXNoKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0ZpbGVzVHJhbnNhY3Rpb25zLnNldChrZXksIHRyYW5zYWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhZm91bmQ7XG4gICAgfVxuICAgIGFzeW5jIHB1Ymxpc2hUcmFuc2FjdGlvbihwYXlsb2FkKSB7XG4gICAgICAgIGlmICghcGF5bG9hZC5pZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZUludmFsaWRTeW5jTWVzc2FnZSwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIHRyYW5zYWN0aW9uIGlkJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMudHJhbnNhY3Rpb25TZXJ2aWNlLndyaXRlVHJhbnNhY3Rpb24ocGF5bG9hZCwgdGhpcy5sYWJlbCwgdGhpcy5sYXN0VHJhbnNhY3Rpb25JZCk7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTGFzdFRyYW5zYWN0aW9uSWQocGF5bG9hZC5pZCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUxhc3RUcmFuc2FjdGlvbklkKGxhc3RUcmFuc2FjdGlvbklkKSB7XG4gICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uSWQgPSBsYXN0VHJhbnNhY3Rpb25JZDtcbiAgICAgICAgY29uc3QgZmlsZSA9IG5ldyBGaWxlKFtuZXcgQmxvYihbdGhpcy5sYXN0VHJhbnNhY3Rpb25JZF0pXSwgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfTEFTVF9UUkFOU0FDVElPTl9PQkpFQ1RfTkFNRSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMud3JpdGVGaWxlKGZpbGUsICcvJyk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUZpbGVSZXF1ZXN0KHBheWxvYWQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHJlcXVlc3RlZCBmaWxlIGlzIGF2YWlsYWJsZSAoY29tcGFyZSBjaGVja3N1bXMpXG4gICAgICAgIC8vIEFuc3dlciBpbml0aWFsIEZpbGVSZXF1ZXN0IChhY2NlcHQgb3IgcmVqZWN0KVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuZ2V0KHBheWxvYWQucGF0aCArICcvJyArIHBheWxvYWQubmFtZSk7XG4gICAgICAgICAgICBjb25zdCBjaGVja3N1bSA9IGF3YWl0IGdldEZpbGVDaGVja3N1bShmaWxlKTtcbiAgICAgICAgICAgIGlmIChjaGVja3N1bSAhPT0gcGF5bG9hZC5jaGVja3N1bSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBheWxvYWQuYW5zd2VyZXJJZCA9IHRoaXMubG9jYWxOb2RlLmdldElkKCk7XG4gICAgICAgICAgICBwYXlsb2FkLmFjdGlvbiA9IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLlJlcXVlc3RBY2NlcHRlZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkLCBbcGF5bG9hZC5zb3VyY2VJZF0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlRmlsZVJlcXVlc3RBbnN3ZXIocGF5bG9hZCkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVxdWVzdCB3YXMgYWxyZWFkeSBhY2NlcHRlZFxuICAgICAgICBjb25zdCBwYXRoTmFtZSA9IGdldFBhdGhOYW1lKHBheWxvYWQucGF0aCwgcGF5bG9hZC5uYW1lKTtcbiAgICAgICAgaWYgKCF0aGlzLm9iamVjdFJlcXVlc3RzLmhhcyhwYXRoTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvYmplY3RSZXF1ZXN0ID0gdGhpcy5vYmplY3RSZXF1ZXN0cy5nZXQocGF0aE5hbWUpO1xuICAgICAgICBvYmplY3RSZXF1ZXN0LmFjdGlvbiA9IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLlJlcXVlc3RGaWxlU3luYztcbiAgICAgICAgY29uc3QgYW5zd2VyZXJJZCA9IHBheWxvYWQuYW5zd2VyZXJJZDtcbiAgICAgICAgaWYgKCFhbnN3ZXJlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgYW5zd2VyZXIgaWQgb24gcmVxdWVzdCBhbnN3ZXInLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3Qgd2FzIGFjY2VwdGVkLCBzZW5kIGZpbGUgc3luYyByZXF1ZXN0IGFuZCBjcmVhdGUgdGhlIHN5bmNpbmcgcGF5bG9hZCBhbGxvd2luZyB0byByZXRyeSB0aGUgcmVxdWVzdFxuICAgICAgICB0aGlzLm9iamVjdFJlcXVlc3RzLmRlbGV0ZShwYXRoTmFtZSk7XG4gICAgICAgIGlmICghdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmhhcyhhbnN3ZXJlcklkKSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLnNldChhbnN3ZXJlcklkLCBuZXcgTWFwKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5nZXQoYW5zd2VyZXJJZCkuc2V0KHBhdGhOYW1lLCBbb2JqZWN0UmVxdWVzdCwgdGhpcy5nZXRPclJlc2V0UGVuZGluZ0ZpbGVUaW1lb3V0KGFuc3dlcmVySWQsIHBhdGhOYW1lKV0pO1xuICAgICAgICBvYmplY3RSZXF1ZXN0LmFuc3dlcmVySWQgPSBhbnN3ZXJlcklkO1xuICAgICAgICB0aGlzLnNlbmQob2JqZWN0UmVxdWVzdCwgW2Fuc3dlcmVySWRdKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlRmlsZVN5bmMocGF5bG9hZCkge1xuICAgICAgICBjb25zdCBwYXRoTmFtZSA9IGdldFBhdGhOYW1lKHBheWxvYWQucGF0aCwgcGF5bG9hZC5uYW1lKTtcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuZ2V0KHBhdGhOYW1lKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdFBheWxvYWQgPSB7XG4gICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgYW5zd2VyZXJJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEZpbGVXcml0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kRmlsZShmaWxlLCByZXF1ZXN0UGF5bG9hZCwgW3BheWxvYWQuc291cmNlSWRdKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZEZpbGUoZmlsZSwgcGF5bG9hZCwgbm9kZUlkcykge1xuICAgICAgICBjb25zdCBmaWxlQ2h1bmtzID0gYXdhaXQgcmVhZEZpbGVDb250ZW50KGZpbGUpO1xuICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgZGF0YV0gb2YgZmlsZUNodW5rcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgLy8gVE9ETyByZXZpZXcgaWYgd2UgY2FuIGluZmVyIHR5cGUgZnJvbSBEYXRhVVJMIHdoZW4gZmlsZSBoYXMgbm8gZXh0ZW5zaW9uXG4gICAgICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgdG90YWw6IGZpbGVDaHVua3MubGVuZ3RoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2VuZChmaWxlUGF5bG9hZCwgbm9kZUlkcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlUGVuZGluZ0ZpbGUocGF5bG9hZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGF0aE5hbWUgPSBnZXRQYXRoTmFtZShwYXlsb2FkLnBhdGgsIHBheWxvYWQubmFtZSk7XG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nTmFtZSA9IHBhdGhOYW1lICsgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT047XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZU9iamVjdChwZW5kaW5nTmFtZSk7XG4gICAgICAgICAgICBjb25zdCBbLCB0aW1lb3V0XSA9IHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5nZXQocGF5bG9hZC5hbnN3ZXJlcklkKT8uZ2V0KHBhdGhOYW1lKSA/PyBbXTtcbiAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5nZXQocGF5bG9hZC5hbnN3ZXJlcklkKS5kZWxldGUocGF0aE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICB9XG4gICAgYXN5bmMgc3luY1RyYW5zYWN0aW9ucygpIHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblNlcnZpY2UuZ2V0VHJhbnNhY3Rpb25zKHRoaXMubGFiZWwsIHRoaXMubGFzdFRyYW5zYWN0aW9uSWQpO1xuICAgICAgICBmb3IgKGNvbnN0IHRyYW5zYWN0aW9uIG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVUcmFuc2FjdGlvblBheWxvYWQodHJhbnNhY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN5bmNQZW5kaW5nRmlsZXMoKSB7XG4gICAgICAgIGNvbnN0IHJlcG9zaXRvcnkgPSBhd2FpdCB0aGlzLmxpc3QoJy8nLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgY29uc3QgY3JlYXRlRmlsZVJlcXVlc3RzID0gYXN5bmMgKHJlcG9zaXRvcnkpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgcmVwb3NpdG9yeSkge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5raW5kID09PSBPYmplY3RLaW5kLkZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZW50cmllcyAmJiBlbnRyeS5lbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZUZpbGVSZXF1ZXN0cyhlbnRyeS5lbnRyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbnRyeS5uYW1lLmVuZHNXaXRoKENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuZ2V0KGVudHJ5LnBhdGhOYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja3N1bSA9IGF3YWl0IGZpbGUudGV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBlbnRyeS5uYW1lLnJlcGxhY2UoQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04sICcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0UGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5SZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLlJlcXVlc3RGaWxlLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJycsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGVudHJ5LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrc3VtLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aE5hbWUgPSBnZXRQYXRoTmFtZShlbnRyeS5wYXRoLCBuYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdFJlcXVlc3RzLnNldChwYXRoTmFtZSwgcmVxdWVzdFBheWxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBjcmVhdGVGaWxlUmVxdWVzdHMocmVwb3NpdG9yeSk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZVBlbmRpbmdGaWxlV3JpdGUocGF5bG9hZCkge1xuICAgICAgICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW25ldyBCbG9iKFtwYXlsb2FkLmNoZWNrc3VtXSldLCBgJHtwYXlsb2FkLm5hbWV9JHtDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTn1gLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZUZpbGUoZmlsZSwgcGF5bG9hZC5wYXRoKTtcbiAgICB9XG4gICAgZ2V0T3JSZXNldFBlbmRpbmdGaWxlVGltZW91dChub2RlSWQsIHBhdGhOYW1lKSB7XG4gICAgICAgIGNvbnN0IFtfLCB0aW1lb3V0XSA9IHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5nZXQobm9kZUlkKT8uZ2V0KHBhdGhOYW1lKSA/PyBbXTtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbcGF5bG9hZCwgdGltZW91dF0gPSB0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuZ2V0KG5vZGVJZCkuZ2V0KHBhdGhOYW1lKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZEZpbGVSZXF1ZXN0UGF5bG9hZChwYXlsb2FkLCB0aW1lb3V0KTtcbiAgICAgICAgfSwgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19SRVRSWV9ERUxBWSk7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRGaWxlUmVxdWVzdFBheWxvYWQocGF5bG9hZCwgdGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIHBheWxvYWQuYWN0aW9uID0gSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEZpbGU7XG4gICAgICAgIHRoaXMub2JqZWN0UmVxdWVzdHMuc2V0KGdldFBhdGhOYW1lKHBheWxvYWQucGF0aCwgcGF5bG9hZC5uYW1lKSwgcGF5bG9hZCk7XG4gICAgICAgIHRoaXMuc2VuZChwYXlsb2FkKTtcbiAgICB9XG4gICAgc2V0UGVuZGluZ0ZpbGVTeW5jaW5nUGF5bG9hZChwYXlsb2FkLCBwYXRoTmFtZSkge1xuICAgICAgICBpZiAoIXRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5oYXMocGF5bG9hZC5hbnN3ZXJlcklkKSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLnNldChwYXlsb2FkLmFuc3dlcmVySWQsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW29iamVjdFJlcXVlc3RQYXlsb2FkXSA9IHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5nZXQocGF5bG9hZC5hbnN3ZXJlcklkKS5nZXQocGF0aE5hbWUpID8/IFt7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5SZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEZpbGUsXG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgdHlwZTogcGF5bG9hZC50eXBlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXlsb2FkLnBhdGgsXG4gICAgICAgICAgICAgICAgY2hlY2tzdW06IHBheWxvYWQuY2hlY2tzdW0sXG4gICAgICAgICAgICAgICAgYW5zd2VyZXJJZDogcGF5bG9hZC5hbnN3ZXJlcklkLFxuICAgICAgICAgICAgfV07XG4gICAgICAgIHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5nZXQocGF5bG9hZC5hbnN3ZXJlcklkKS5zZXQocGF0aE5hbWUsIFtvYmplY3RSZXF1ZXN0UGF5bG9hZCwgdGhpcy5nZXRPclJlc2V0UGVuZGluZ0ZpbGVUaW1lb3V0KHBheWxvYWQuYW5zd2VyZXJJZCwgcGF0aE5hbWUpXSk7XG4gICAgfVxuICAgIGFzeW5jIHdyaXRlRmlsZShmaWxlLCBwYXRoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3Iud3JpdGVGaWxlKGZpbGUsIHBhdGgpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVPYmplY3QocGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuZGVsZXRlT2JqZWN0KHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5kZWxldGVPYmplY3QocGF0aCArIENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBtb3ZlT2JqZWN0KHBhdGgsIG5ld1BhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLm1vdmVPYmplY3QocGF0aCwgbmV3UGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLm1vdmVPYmplY3QocGF0aCArIENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OLCBuZXdQYXRoICsgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRTdGF0cygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVib3VuY2VTdGF0cykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VTdGF0cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJvdW5jZVN0YXRzID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICAgICAgY29uc3Qgc3RvcmFnZSA9IGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuY2FsY3VsYXRlU2l6ZSgnLycpO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYz8ucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5PYmplY3RTdG9yZVN0YXRzLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc1NlbnQ6IHRoaXMubWVzc2FnZXNTZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNSZWNlaXZlZDogdGhpcy5tZXNzYWdlc1JlY2VpdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNTZW50OiB0aGlzLmJ5dGVzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVjZWl2ZWQ6IHRoaXMuYnl0ZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlczogdGhpcy53cml0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkczogdGhpcy5yZWFkcyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsb2dnZXIubG9nU3RvcmFnZShMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwgYGNjYyR7dGhpcy5jbHVzdGVySWR9Y2NjJHt0aGlzLmxhYmVsfWAsIHN0b3JhZ2UpO1xuICAgICAgICB9LCBDT05URU5UX09CSkVDVF9TVE9SRV9TVEFUU19ERUJPVU5DRSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTWVkaWFTdHJlYW1Qcmlvcml0eSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vTWVkaWFTdWJzY3JpcHRpb25FdmVudCc7XG5pbXBvcnQgeyBCYXNlTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlTWVkaWFTdHJlYW0nO1xuaW1wb3J0IHsgY3JlYXRlU2luZ2xlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgT3V0Z29pbmdNZWRpYVN0cmVhbSBleHRlbmRzIEJhc2VNZWRpYVN0cmVhbSB7XG4gICAgcmVtb3RlSWQ7XG4gICAgcGFyYW1zO1xuICAgIHRvcGljO1xuICAgIHVucmVnaXN0ZXJQdWJsaXNoZXJMaXN0ZW5lciA9IGNyZWF0ZVNpbmdsZU9ic2VydmVyKCk7XG4gICAgY29uc3RydWN0b3Iob3duZXIsIGxhYmVsLCBtZWRpYVN0cmVhbSwgcmVtb3RlSWQsIHBhcmFtcykge1xuICAgICAgICBzdXBlcihvd25lciwgbGFiZWwsIG1lZGlhU3RyZWFtKTtcbiAgICAgICAgdGhpcy5yZW1vdGVJZCA9IHJlbW90ZUlkO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVUcmFjaygnYXVkaW8nKTtcbiAgICAgICAgdGhpcy5yZW1vdmVUcmFjaygndmlkZW8nKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICBhZGRUcmFjayh0cmFjaykge1xuICAgICAgICBpZiAoIXRoaXMudG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT3V0Z29pbmdNZWRpYVN0cmVhbU5vVG9waWMsIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uLkFkZCxcbiAgICAgICAgICAgICAgICB0cmFjayxcbiAgICAgICAgICAgICAgICBzdHJlYW06IHRoaXMubWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IE1lZGlhU3RyZWFtUHJpb3JpdHkuRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHRoaXMuZ2V0SW50ZXJuYWxUcmFja1BhcmFtcyh0cmFjay5raW5kLCB0aGlzLnBhcmFtcyksXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVUcmFjayh0cmFja0tpbmQpIHtcbiAgICAgICAgY29uc3QgdHJhY2sgPSB0aGlzLmdldFRyYWNrKHRyYWNrS2luZCk7XG4gICAgICAgIGlmICh0cmFjaykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRvcGljKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uLlJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogdGhpcy5tZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhY2s7XG4gICAgfVxuICAgIHNldFByaW9yaXR5KHByaW9yaXR5KSB7XG4gICAgICAgIGlmICghdGhpcy50b3BpYykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PdXRnb2luZ01lZGlhU3RyZWFtTm9Ub3BpYywge1xuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIG93bmVySWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICByZW1vdGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIGFjdGlvbjogTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uVXBkYXRlLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5LFxuICAgICAgICAgICAgICAgIHN0cmVhbTogdGhpcy5tZWRpYVN0cmVhbSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1YnNjcmliZSh7IHRyYWNrS2luZHMsIHBhcmFtcyB9LCBwcmlvcml0eSkge1xuICAgICAgICBpZiAoIXRoaXMudG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT3V0Z29pbmdNZWRpYVN0cmVhbU5vVG9waWMsIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkpIHtcbiAgICAgICAgICAgIGlmICh0cmFja0tpbmRzLmluY2x1ZGVzKHRyYWNrLmtpbmQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5BZGQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbTogdGhpcy5tZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiBwcmlvcml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogdGhpcy5nZXRJbnRlcm5hbFRyYWNrUGFyYW1zKHRyYWNrLmtpbmQsIHBhcmFtcyksXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoeyBwYXJhbXMgfSkge1xuICAgICAgICBpZiAoIXRoaXMudG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT3V0Z29pbmdNZWRpYVN0cmVhbU5vVG9waWMsIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkpIHtcbiAgICAgICAgICAgIHRoaXMudG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uVXBkYXRlLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRoaXMubWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogdGhpcy5nZXRJbnRlcm5hbFRyYWNrUGFyYW1zKHRyYWNrLmtpbmQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZSh7IHRyYWNrS2luZHMgfSkge1xuICAgICAgICBpZiAoIXRoaXMudG9waWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkpIHtcbiAgICAgICAgICAgIGlmICh0cmFja0tpbmRzLmluY2x1ZGVzKHRyYWNrLmtpbmQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5SZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRoaXMubWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjayxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIDtcbiAgICB9XG4gICAgcmVnaXN0ZXJQdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMudG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJQdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIGlmIChwdWJsaXNoZXIgPT09IHRoaXMudG9waWMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRvcGljO1xuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyUHVibGlzaGVyTGlzdGVuZXIucHVibGlzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uVW5yZWdpc3RlclB1Ymxpc2hlcihjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy51bnJlZ2lzdGVyUHVibGlzaGVyTGlzdGVuZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZ2V0VHJhY2soa2luZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5maW5kKCh0cmFjaykgPT4gdHJhY2sua2luZCA9PT0ga2luZCkgfHwgbnVsbDtcbiAgICB9XG4gICAgZ2V0SW50ZXJuYWxUcmFja1BhcmFtcyh0cmFja0tpbmQsIHBhcmFtcykge1xuICAgICAgICBsZXQgdHJhY2tQYXJhbXM7XG4gICAgICAgIGlmICh0cmFja0tpbmQgPT09ICd2aWRlbycgJiYgcGFyYW1zPy52aWRlbyAmJiB0eXBlb2YgcGFyYW1zLnZpZGVvICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRyYWNrUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGtpbmQ6ICd2aWRlbycsXG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLnZpZGVvLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyYWNrUGFyYW1zLnJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2tLaW5kID09PSAnYXVkaW8nICYmIHBhcmFtcz8uYXVkaW8gJiYgdHlwZW9mIHBhcmFtcy5hdWRpbyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0cmFja1BhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBraW5kOiAnYXVkaW8nLFxuICAgICAgICAgICAgICAgIC4uLnBhcmFtcy5hdWRpbyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYWNrUGFyYW1zO1xuICAgIH1cbiAgICBnZXRSZXNvbHV0aW9uKCkge1xuICAgICAgICBsZXQgcmVzb2x1dGlvbiA9IHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuICAgICAgICBjb25zdCB2aWRlb1RyYWNrcyA9IHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICAgICAgaWYgKHZpZGVvVHJhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdmlkZW9UcmFja3NbMF0uZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy53aWR0aCAmJiBzZXR0aW5ncy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2V0dGluZ3Mud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogc2V0dGluZ3MuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb247XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGVudFR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IFNES0NsaWVudEVycm9yLCBTREtDbGllbnRFcnJvckNvZGVzIH0gZnJvbSAncHVibGljL2Vycm9ycy9TREtDbGllbnRFcnJvcic7XG5pbXBvcnQgeyBDT05URU5UX1BVQlNVQl9UT1BJQ19TVEFUU19ERUJPVU5DRSB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgQ29udGVudE1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0NvbnRlbnQnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMsIExvZ2dpbmdTZXJ2aWNlcyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VEYXRhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZURhdGFTdHJlYW0nO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBQdWJTdWJUb3BpYyBleHRlbmRzIEJhc2VEYXRhU3RyZWFtIHtcbiAgICBsb2NhbE5vZGU7XG4gICAgY2x1c3RlcklkO1xuICAgIHVuc3Vic2NyaWJlSGFuZGxlciA9IG5ldyBNYXAoKTtcbiAgICBkZWJvdW5jZVN0YXRzO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsTm9kZSwgbGFiZWwsIGNsdXN0ZXJJZCkge1xuICAgICAgICBpZiAodHlwZW9mIGxhYmVsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUHViU3ViVG9waWNOYW1lTm90U3RyaW5nLCAnQ2Fubm90IGNyZWF0ZSBQdWJTdWJTdHJlYW06IExhYmVsIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihsb2NhbE5vZGUsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUgPSBsb2NhbE5vZGU7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgZ2V0Q29udGVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBDb250ZW50VHlwZS5QdWJTdWI7XG4gICAgfVxuICAgIC8vIFRPRE8gLSB0ZXN0IHdpdGggc2V0dGluZ3Mgbm9kZUlkc1xuICAgIHB1Ymxpc2goY29udGVudCwgbm9kZUlkcykge1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5QdWJTdWIsICdQdWJTdWJUb3BpYyBwdWJsaXNoJywgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgY29udGVudCwgbm9kZUlkcyk7XG4gICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLlB1YlN1Yiwge1xuICAgICAgICAgICAgdHlwZTogJ3B1Ymxpc2gnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICByZW1vdGVJZHM6IG5vZGVJZHMgPz8gW10sXG4gICAgICAgICAgICBjb250ZW50VHlwZTogY29udGVudCBpbnN0YW5jZW9mIEZpbGUgPyBDb250ZW50VHlwZS5GaWxlIDogQ29udGVudFR5cGUuRGF0YSxcbiAgICAgICAgICAgIHNpemU6IGNvbnRlbnQgaW5zdGFuY2VvZiBGaWxlID8gY29udGVudC5zaXplIDogSlNPTi5zdHJpbmdpZnkoY29udGVudCkubGVuZ3RoLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgdGhpcy5zZW5kKGNvbnRlbnQsIG5vZGVJZHMpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoY29udGVudFR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlSGFuZGxlci5oYXMoY29udGVudFR5cGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5QdWJTdWJUb3BpY0FscmVhZHlTdWJzY3JpYmVkLCAnQ2Fubm90IHN1YnNjcmliZSB0byBQdWJTdWJUb3BpYzogQWxyZWFkeSBzdWJzY3JpYmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXIuc2V0KGNvbnRlbnRUeXBlLCB0aGlzLm9uTWVzc2FnZSgobm9kZUlkLCBjb250ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoY29udGVudFR5cGUgPT09ICdkYXRhJyAmJiBjb250ZW50IGluc3RhbmNlb2YgRmlsZSB8fCBjb250ZW50VHlwZSA9PT0gJ2ZpbGUnICYmICEoY29udGVudCBpbnN0YW5jZW9mIEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuUHViU3ViLCAnUHViU3ViVG9waWMgb25NZXNzYWdlJywgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgbm9kZUlkLCBjb250ZW50KTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLlB1YlN1Yiwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgIHJlbW90ZUlkOiBub2RlSWQsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGUsXG4gICAgICAgICAgICAgICAgc2l6ZTogY29udGVudCBpbnN0YW5jZW9mIEZpbGUgPyBjb250ZW50LnNpemUgOiBKU09OLnN0cmluZ2lmeShjb250ZW50KS5sZW5ndGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgICAgICBjYWxsYmFjayhub2RlSWQsIGNvbnRlbnQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyLmdldChjb250ZW50VHlwZSk/LigpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlci5kZWxldGUoY29udGVudFR5cGUpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlci5mb3JFYWNoKCh1bnN1YnNjcmliZSkgPT4gdW5zdWJzY3JpYmUoKSk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljPy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VQdWJTdWJUb3BpYyxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kU3RhdHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlU3RhdHMpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVib3VuY2VTdGF0cyA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYz8ucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5QdWJTdWJUb3BpY1N0YXRzLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2U6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc1NlbnQ6IHRoaXMubWVzc2FnZXNTZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNSZWNlaXZlZDogdGhpcy5tZXNzYWdlc1JlY2VpdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNTZW50OiB0aGlzLmJ5dGVzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVjZWl2ZWQ6IHRoaXMuYnl0ZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRzOiAwLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgQ09OVEVOVF9QVUJTVUJfVE9QSUNfU1RBVFNfREVCT1VOQ0UpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1lZGlhU3RyZWFtUHJpb3JpdHksIGlzVmFsaWRNZWRpYVN1YnNjcmlwdGlvblBhcmFtcyB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IENPTlRFTlRfVVBEQVRFX0RFQk9VTkNFIH0gZnJvbSAnY29uc3RhbnRzL0NvbnRlbnQnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbiB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL01lZGlhU3Vic2NyaXB0aW9uRXZlbnQnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMsIExvZ2dpbmdTZXJ2aWNlcyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VNZWRpYVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L0Jhc2VNZWRpYVN0cmVhbSc7XG5pbXBvcnQgeyBPdXRnb2luZ01lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvT3V0Z29pbmdNZWRpYVN0cmVhbSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgUmVtb3RlTWVkaWFTdHJlYW0gZXh0ZW5kcyBCYXNlTWVkaWFTdHJlYW0ge1xuICAgIGxvY2FsTm9kZTtcbiAgICBpbnRlcm5hbElkO1xuICAgIGF2YWlsYWJsZVRyYWNrS2luZHM7XG4gICAgY2x1c3RlcklkO1xuICAgIHVuc3Vic2NyaWJlSGFuZGxlcjtcbiAgICByZXNpemVIYW5kbGVyO1xuICAgIHVwZGF0ZURlYm91bmNlO1xuICAgIG91dGdvaW5nU3RyZWFtcyA9IG5ldyBNYXAoKTtcbiAgICByZW5kZXJFbGVtZW50O1xuICAgIHN1YnNjcmliZWRUcmFja3MgPSBuZXcgU2V0KCk7XG4gICAgcHJvdmlkZXJJZDtcbiAgICBwcm92aWRlckxpc3RlbmVyID0gY3JlYXRlT2JzZXJ2ZXIoKTtcbiAgICB0cmFja0VuZGVkTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsTm9kZSwgb3duZXIsIGxhYmVsLCBpbnRlcm5hbElkLCBhdmFpbGFibGVUcmFja0tpbmRzLCBjbHVzdGVySWQpIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsLCBuZXcgTWVkaWFTdHJlYW0oKSk7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLmludGVybmFsSWQgPSBpbnRlcm5hbElkO1xuICAgICAgICB0aGlzLmF2YWlsYWJsZVRyYWNrS2luZHMgPSBhdmFpbGFibGVUcmFja0tpbmRzO1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdGhpcy5zZXR1cFRyYWNrRW5kZWRMaXN0ZW5lcnModHJhY2spKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0Z29pbmdTdHJlYW1zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5mb3JFYWNoKChvdXRnb2luZ1N0cmVhbSkgPT4ge1xuICAgICAgICAgICAgICAgIG91dGdvaW5nU3RyZWFtLnVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKTtcbiAgICAgICAgICAgICAgICBvdXRnb2luZ1N0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFja0VuZGVkTGlzdGVuZXJzLmZvckVhY2goKHJlbW92ZUxpc3RlbmVyKSA9PiByZW1vdmVMaXN0ZW5lcigpKTtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdGhpcy5tZWRpYVN0cmVhbS5yZW1vdmVUcmFjayh0cmFjaykpO1xuICAgICAgICBpZiAodGhpcy51cGRhdGVEZWJvdW5jZSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlRGVib3VuY2UpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudXBkYXRlRGVib3VuY2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXNpemVIYW5kbGVyPy4oKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICByZWdpc3RlclN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlciA9IHN1YnNjcmliZXIuc3Vic2NyaWJlKCh7IGNvbnRlbnQgfSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChjb250ZW50LmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uUmVtb3RlQWRkOlxuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdWJzY3JpcHRpb24sICdSZWNlaXZlZCB0cmFjaycsIHRoaXMubG9jYWxOb2RlLmdldElkKCksIHRoaXMucHJvdmlkZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnN0cmVhbS5pZCAhPT0gdGhpcy5pbnRlcm5hbElkIHx8IGNvbnRlbnQucHJvdmlkZXJJZCAhPT0gdGhpcy5wcm92aWRlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVUcmFjayhjb250ZW50LnRyYWNrLmtpbmQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLmFkZFRyYWNrKGNvbnRlbnQudHJhY2spO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtkZXN0aW5hdGlvbklkLCBvdXRnb2luZ1N0cmVhbV0gb2YgdGhpcy5vdXRnb2luZ1N0cmVhbXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGdvaW5nU3RyZWFtLmFkZFRyYWNrKGNvbnRlbnQudHJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRnb2luZ1N0cmVhbS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRnb2luZ1N0cmVhbXMuZGVsZXRlKGRlc3RpbmF0aW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBUcmFja0VuZGVkTGlzdGVuZXJzKGNvbnRlbnQudHJhY2spO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHVwUmVuZGVyRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC50cmFjay5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVkaWFTdHJlYW0uYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZW5kZXJFbGVtZW50Py5wbGF5KCksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbmRlckVsZW1lbnQ/LmxvYWQoKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBSZXNpemVIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5SZW1vdGVSZW1vdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3RyZWFtLmlkICE9PSB0aGlzLmludGVybmFsSWQgfHwgY29udGVudC5wcm92aWRlcklkICE9PSB0aGlzLnByb3ZpZGVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKGNvbnRlbnQudHJhY2sua2luZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlckVsZW1lbnQgJiYgY29udGVudC50cmFjay5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXI/LigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRWxlbWVudC5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnQuc3JjT2JqZWN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyU3Vic2NyaWJlcigpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXI/LigpO1xuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuZm9yRWFjaCgocmVtb3ZlTGlzdGVuZXIpID0+IHJlbW92ZUxpc3RlbmVyKCkpO1xuICAgICAgICBkZWxldGUgdGhpcy51bnN1YnNjcmliZUhhbmRsZXI7XG4gICAgfVxuICAgIGdldEludGVybmFsU3RyZWFtSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsSWQ7XG4gICAgfVxuICAgIHNldEludGVybmFsSWQoaW50ZXJuYWxJZCkge1xuICAgICAgICB0aGlzLmludGVybmFsSWQgPSBpbnRlcm5hbElkO1xuICAgIH1cbiAgICBnZXRBdmFpbGFibGVUcmFja0tpbmRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdmFpbGFibGVUcmFja0tpbmRzO1xuICAgIH1cbiAgICBoYXNUcmFja3ModHJhY2tLaW5kcykge1xuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrS2luZCBvZiB0cmFja0tpbmRzIHx8IHRoaXMuYXZhaWxhYmxlVHJhY2tLaW5kcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZpbmQoKHRyYWNrKSA9PiB0cmFjay5raW5kID09PSB0cmFja0tpbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXRSZXNvbHV0aW9uKCkge1xuICAgICAgICBsZXQgcmVzb2x1dGlvbiA9IHsgd2lkdGg6IDAsIGhlaWdodDogMCB9O1xuICAgICAgICBjb25zdCB2aWRlb1RyYWNrcyA9IHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICAgICAgaWYgKHZpZGVvVHJhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdmlkZW9UcmFja3NbMF0uZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy53aWR0aCAmJiBzZXR0aW5ncy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2V0dGluZ3Mud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogc2V0dGluZ3MuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb247XG4gICAgfVxuICAgIGlzU3Vic2NyaWJlZCh0cmFja0tpbmRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2tLaW5kIG9mIHRyYWNrS2luZHMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdWJzY3JpYmVkVHJhY2tzLmhhcyh0cmFja0tpbmQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXRTaGFyZWFibGVTdHJlYW0oZGVzdGluYXRpb25JZCwgcGFyYW1zKSB7XG4gICAgICAgIGlmICghdGhpcy5vdXRnb2luZ1N0cmVhbXMuaGFzKGRlc3RpbmF0aW9uSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRnb2luZ1N0cmVhbSA9IG5ldyBPdXRnb2luZ01lZGlhU3RyZWFtKHRoaXMub3duZXIsIHRoaXMubGFiZWwsIHRoaXMubWVkaWFTdHJlYW0sIGRlc3RpbmF0aW9uSWQsIHBhcmFtcyk7XG4gICAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG91dGdvaW5nU3RyZWFtLm9uVW5yZWdpc3RlclB1Ymxpc2hlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5nZXQoZGVzdGluYXRpb25JZCk/LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5kZWxldGUoZGVzdGluYXRpb25JZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLnNldChkZXN0aW5hdGlvbklkLCBvdXRnb2luZ1N0cmVhbSk7XG4gICAgICAgICAgICBvdXRnb2luZ1N0cmVhbS5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcih0aGlzLnN5c3RlbVRvcGljKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vdXRnb2luZ1N0cmVhbXMuZ2V0KGRlc3RpbmF0aW9uSWQpO1xuICAgIH1cbiAgICBnZXRTaGFyZWFibGVTdHJlYW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW0uaWQ7XG4gICAgfVxuICAgIC8vIFRPRE8gLSBOZWVkIHRvIGhhbmRsZSB0aGlzXG4gICAgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiBNZWRpYVN0cmVhbVByaW9yaXR5LkRlZmF1bHQ7XG4gICAgfVxuICAgIGdldFN1YnNjcmliZWRUcmFja3MoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuc3Vic2NyaWJlZFRyYWNrcyk7XG4gICAgfVxuICAgIHN1YnNjcmliZShwYXJhbXMpIHtcbiAgICAgICAgbGV0IHRyYWNrS2luZHMgPSBbXTtcbiAgICAgICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgICAgICAgIHRyYWNrS2luZHMgPSB0aGlzLmdldEF2YWlsYWJsZVRyYWNrS2luZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLnZpZGVvID09PSAnb2JqZWN0JyAmJiAhKHBhcmFtcy52aWRlby5yZW5kZXJFbGVtZW50IGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkgJiYgdGhpcy5yZW5kZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLnZpZGVvID0geyByZW5kZXJFbGVtZW50OiB0aGlzLnJlbmRlckVsZW1lbnQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaXNWYWxpZE1lZGlhU3Vic2NyaXB0aW9uUGFyYW1zKHBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlJlbW90ZU1lZGlhU3RyZWFtSW52YWxpZFN1YnNjcmlwdGlvblBhcmFtcywgJ0ludmFsaWQgcGFyYW1zJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyYW1zLnZpZGVvKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kcy5wdXNoKCd2aWRlbycpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zLnZpZGVvICE9PSAnYm9vbGVhbicgJiYgcGFyYW1zLnZpZGVvLnJlbmRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFbGVtZW50ID0gcGFyYW1zLnZpZGVvLnJlbmRlckVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zLnZpZGVvLm1heFJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtcy52aWRlby5tYXhSZXNvbHV0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLnJlbmRlckVsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnJlbmRlckVsZW1lbnQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLnZpZGVvLnJlbmRlckVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtcy5hdWRpbykge1xuICAgICAgICAgICAgICAgIHRyYWNrS2luZHMucHVzaCgnYXVkaW8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1N1YnNjcmliZWQodHJhY2tLaW5kcykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cmFja0tpbmRzLmZvckVhY2goKHRyYWNrS2luZCkgPT4gdGhpcy5zdWJzY3JpYmVkVHJhY2tzLmFkZCh0cmFja0tpbmQpKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuU3Vic2NyaWJlTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIHRyYWNrS2luZHMsXG4gICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLk1lZGlhU3RyZWFtLCB7XG4gICAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLmludGVybmFsSWQsXG4gICAgICAgICAgICB0cmFja0tpbmRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlKHBhcmFtcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaXNWYWxpZE1lZGlhU3Vic2NyaXB0aW9uUGFyYW1zKHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlJlbW90ZU1lZGlhU3RyZWFtSW52YWxpZFN1YnNjcmlwdGlvblBhcmFtcywgJ0ludmFsaWQgcGFyYW1zJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXBkYXRlRGVib3VuY2UpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZURlYm91bmNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZURlYm91bmNlID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy51cGRhdGVEZWJvdW5jZTtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5VcGRhdGVNZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIG93bmVySWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgQ09OVEVOVF9VUERBVEVfREVCT1VOQ0UpO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZSh0cmFja0tpbmRzKSB7XG4gICAgICAgIGlmICghdHJhY2tLaW5kcykge1xuICAgICAgICAgICAgdHJhY2tLaW5kcyA9IHRoaXMuZ2V0QXZhaWxhYmxlVHJhY2tLaW5kcygpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrS2luZHMgPSBBcnJheS5pc0FycmF5KHRyYWNrS2luZHMpID8gdHJhY2tLaW5kcyA6IFt0cmFja0tpbmRzXTtcbiAgICAgICAgdHJhY2tLaW5kcy5mb3JFYWNoKCh0cmFja0tpbmQpID0+IHRoaXMuc3Vic2NyaWJlZFRyYWNrcy5kZWxldGUodHJhY2tLaW5kKSk7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlVuc3Vic2NyaWJlTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIHRyYWNrS2luZHMsXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nVHJhY2tzOiB0aGlzLnN1YnNjcmliZWRUcmFja3Muc2l6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvblByb3ZpZGVyQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyTGlzdGVuZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZ2V0UHJvdmlkZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJJZDtcbiAgICB9XG4gICAgc2V0UHJvdmlkZXJJZChwcm92aWRlcklkKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVySWQgIT09IHByb3ZpZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVyTGlzdGVuZXIucHVibGlzaChwcm92aWRlcklkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZVRyYWNrRW5kZWRMaXN0ZW5lcih0cmFja0tpbmQpIHtcbiAgICAgICAgdGhpcy50cmFja0VuZGVkTGlzdGVuZXJzLmdldCh0cmFja0tpbmQpPy4oKTtcbiAgICAgICAgdGhpcy50cmFja0VuZGVkTGlzdGVuZXJzLmRlbGV0ZSh0cmFja0tpbmQpO1xuICAgIH1cbiAgICByZW1vdmVUcmFjayh0cmFja0tpbmQpIHtcbiAgICAgICAgY29uc3QgdHJhY2sgPSB0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZpbmQoKHRyYWNrKSA9PiB0cmFjay5raW5kID09PSB0cmFja0tpbmQpO1xuICAgICAgICBpZiAoIXRyYWNrKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5yZW1vdmVUcmFjayh0cmFjayk7XG4gICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmZvckVhY2gob3V0Z29pbmdTdHJlYW0gPT4gb3V0Z29pbmdTdHJlYW0ucmVtb3ZlVHJhY2sodHJhY2tLaW5kKSk7XG4gICAgICAgIHRoaXMudHJhY2tFbmRlZExpc3RlbmVycy5nZXQodHJhY2tLaW5kKT8uKCk7XG4gICAgfVxuICAgIHNldHVwUmVuZGVyRWxlbWVudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucmVuZGVyRWxlbWVudC5zcmNPYmplY3QgfHwgdGhpcy5yZW5kZXJFbGVtZW50LnNyY09iamVjdCAhPT0gdGhpcy5tZWRpYVN0cmVhbSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJFbGVtZW50LnNyY09iamVjdCA9IHRoaXMubWVkaWFTdHJlYW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0dXBSZXNpemVIYW5kbGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVuZGVyRWxlbWVudCB8fCB0aGlzLnJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIFJlc2l6ZU9ic2VydmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRXaWR0aCA9IHRoaXMucmVuZGVyRWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIGxldCBjdXJyZW50SGVpZ2h0ID0gdGhpcy5yZW5kZXJFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBlbnRyaWVzWzBdLmNvbnRlbnRSZWN0O1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50V2lkdGggIT09IHdpZHRoIHx8IGN1cnJlbnRIZWlnaHQgIT09IGhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGggPSBNYXRoLmZsb29yKHdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEhlaWdodCA9IE1hdGguZmxvb3IoaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhSZXNvbHV0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnJlbmRlckVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5yZXNpemVIYW5kbGVyID0gKCkgPT4gcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVJlbW90ZVRyYWNrRmFpbHVyZSh0cmFjaykge1xuICAgICAgICBjb25zdCByZW1vdmVkVHJhY2tzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3Vic2NyaWJlZFRyYWNrIG9mIHRoaXMuc3Vic2NyaWJlZFRyYWNrcykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVUcmFjayhzdWJzY3JpYmVkVHJhY2spO1xuICAgICAgICAgICAgcmVtb3ZlZFRyYWNrcy5wdXNoKHN1YnNjcmliZWRUcmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnByb3ZpZGVySWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5SZW1vdGVNZWRpYVN0cmVhbVRyYWNrRmFpbCxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBzdHJlYW1JZDogdGhpcy5pbnRlcm5hbElkLFxuICAgICAgICAgICAgICAgIG93bmVySWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kczogcmVtb3ZlZFRyYWNrcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXR1cFRyYWNrRW5kZWRMaXN0ZW5lcnModHJhY2spIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSAoKSA9PiB0aGlzLmhhbmRsZVJlbW90ZVRyYWNrRmFpbHVyZSh0cmFjayk7XG4gICAgICAgIGNvbnN0IHJlbW92ZUxpc3RlbmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgdHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCdtdXRlJywgY2FsbGJhY2spO1xuICAgICAgICAgICAgdGhpcy50cmFja0VuZGVkTGlzdGVuZXJzLmRlbGV0ZSh0cmFjay5raW5kKTtcbiAgICAgICAgfTtcbiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBjYWxsYmFjayk7XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ211dGUnLCBjYWxsYmFjayk7XG4gICAgICAgIHRoaXMudHJhY2tFbmRlZExpc3RlbmVycy5zZXQodHJhY2sua2luZCwgcmVtb3ZlTGlzdGVuZXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IERFVEVDVElPTl9JU1NVRV9USU1FT1VUIH0gZnJvbSAnY29uc3RhbnRzL0RldGVjdGlvbic7XG5pbXBvcnQgeyBERVRFQ1RJT05fQVVESU9fSVNTVUVfUlVMRVMsIERFVEVDVElPTl9DT1JFX0lTU1VFX1JVTEVTLCBERVRFQ1RJT05fUkVDRUlWRVJfSVNTVUVfUlVMRVMsIERFVEVDVElPTl9TRU5ERVJfSVNTVUVfUlVMRVMsIERFVEVDVElPTl9WSURFT19JU1NVRV9SVUxFUyB9IGZyb20gJ2NvbnN0YW50cy9EZXRlY3Rpb25Jc3N1ZVJ1bGVzJztcbmltcG9ydCB7IERFVEVDVElPTl9QUk9CTEVNX1JVTEVTIH0gZnJvbSAnY29uc3RhbnRzL0RldGVjdGlvblByb2JsZW1SdWxlcyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uT3JpZ2luIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IERldGVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9EZXRlY3Rpb24vRGV0ZWN0aW9uJztcbmltcG9ydCB7IFN0YXRzTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N0YXRzL1N0YXRzJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBEZXRlY3Rpb25NYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIGlzc3VlcyA9IFtdO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3MpIHtcbiAgICAgICAgdGhpcy5jb25maWdzID0gY29uZmlncztcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgIH1cbiAgICBoYW5kbGVTdGF0c1N5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTdGF0c01lc3NhZ2VUeXBlLkxvY2FsUmVwb3J0OlxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0TG9jYWxJc3N1ZXMoZXZlbnQuY29udGVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdHNNZXNzYWdlVHlwZS5TdHJlYW1SZXBvcnQ6XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RTdHJlYW1Jc3N1ZXMoZXZlbnQuY29udGVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRlY3RQcm9ibGVtcyhpc3N1ZVR5cGUsIG5vZGVJZCwgb3JpZ2luLCBjb3VudCkge1xuICAgICAgICBjb25zdCBydWxlID0gREVURUNUSU9OX1BST0JMRU1fUlVMRVMuZmluZCgocikgPT4gci5pc3N1ZXMuc29tZSgoaSkgPT4gaS50eXBlID09PSBpc3N1ZVR5cGUpKTtcbiAgICAgICAgaWYgKGNvdW50ID49IHJ1bGUuaXNzdWVzLmZpbmQoKGkpID0+IGkudHlwZSA9PT0gaXNzdWVUeXBlKS50aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUHJvYmxlbShydWxlLnR5cGUsIG5vZGVJZCwgb3JpZ2luKTtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gdGhpcy5pc3N1ZXMuZmlsdGVyKChpc3N1ZSkgPT4gIShpc3N1ZS50eXBlID09PSBpc3N1ZVR5cGUgJiYgaXNzdWUubm9kZUlkID09PSBub2RlSWQgJiYgaXNzdWUub3JpZ2luID09PSBvcmlnaW4pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRlY3RMb2NhbElzc3VlcyhyZXBvcnQpIHtcbiAgICAgICAgREVURUNUSU9OX0NPUkVfSVNTVUVfUlVMRVMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBydWxlLnJlcG9ydE1ldHJpYyhyZXBvcnQpO1xuICAgICAgICAgICAgaWYgKHJ1bGUubWF4VGhyZXNob2xkICYmIHZhbHVlID4gcnVsZS5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZElzc3VlKHJ1bGUudHlwZSwgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydWxlLm1pblRocmVzaG9sZCAmJiB2YWx1ZSA8IHJ1bGUubWluVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJc3N1ZShydWxlLnR5cGUsIHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSwgUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRlY3RTdHJlYW1Jc3N1ZXMocmVwb3J0KSB7XG4gICAgICAgIGxldCBydWxlcyA9IFtdO1xuICAgICAgICBzd2l0Y2ggKHJlcG9ydC5vcmlnaW4pIHtcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyOlxuICAgICAgICAgICAgICAgIHJ1bGVzID0gREVURUNUSU9OX1NFTkRFUl9JU1NVRV9SVUxFUztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25PcmlnaW4uUmVjZWl2ZXI6XG4gICAgICAgICAgICAgICAgcnVsZXMgPSBERVRFQ1RJT05fUkVDRUlWRVJfSVNTVUVfUlVMRVM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydC52aWRlbykge1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RWaWRlb0lzc3VlcyhyZXBvcnQubm9kZUlkLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHJlcG9ydC52aWRlbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydC5hdWRpbykge1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RBdWRpb0lzc3VlcyhyZXBvcnQubm9kZUlkLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHJlcG9ydC5hdWRpbyk7XG4gICAgICAgIH1cbiAgICAgICAgcnVsZXMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBydWxlLnJlcG9ydE1ldHJpYyhyZXBvcnQpO1xuICAgICAgICAgICAgaWYgKHJ1bGUubWF4VGhyZXNob2xkICYmIHZhbHVlID4gcnVsZS5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZElzc3VlKHJ1bGUudHlwZSwgcmVwb3J0Lm5vZGVJZCwgUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVsZS5taW5UaHJlc2hvbGQgJiYgdmFsdWUgPCBydWxlLm1pblRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkSXNzdWUocnVsZS50eXBlLCByZXBvcnQubm9kZUlkLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRldGVjdFZpZGVvSXNzdWVzKG5vZGVJZCwgb3JpZ2luLCByZXBvcnQpIHtcbiAgICAgICAgaWYgKHJlcG9ydC5iaXRyYXRlID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgREVURUNUSU9OX1ZJREVPX0lTU1VFX1JVTEVTLmZvckVhY2goKHJ1bGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcnVsZS5yZXBvcnRNZXRyaWMocmVwb3J0KTtcbiAgICAgICAgICAgIGlmIChydWxlLm1heFRocmVzaG9sZCAmJiB2YWx1ZSA+IHJ1bGUubWF4VGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJc3N1ZShydWxlLnR5cGUsIG5vZGVJZCwgb3JpZ2luLCB2YWx1ZSwgJ3ZpZGVvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVsZS5taW5UaHJlc2hvbGQgJiYgdmFsdWUgPCBydWxlLm1pblRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkSXNzdWUocnVsZS50eXBlLCBub2RlSWQsIG9yaWdpbiwgdmFsdWUsICd2aWRlbycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGV0ZWN0QXVkaW9Jc3N1ZXMobm9kZUlkLCBvcmlnaW4sIHJlcG9ydCkge1xuICAgICAgICBpZiAocmVwb3J0LmJpdHJhdGUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBERVRFQ1RJT05fQVVESU9fSVNTVUVfUlVMRVMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBydWxlLnJlcG9ydE1ldHJpYyhyZXBvcnQpO1xuICAgICAgICAgICAgaWYgKHJ1bGUubWF4VGhyZXNob2xkICYmIHZhbHVlID4gcnVsZS5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZElzc3VlKHJ1bGUudHlwZSwgbm9kZUlkLCBvcmlnaW4sIHZhbHVlLCAnYXVkaW8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydWxlLm1pblRocmVzaG9sZCAmJiB2YWx1ZSA8IHJ1bGUubWluVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJc3N1ZShydWxlLnR5cGUsIG5vZGVJZCwgb3JpZ2luLCB2YWx1ZSwgJ2F1ZGlvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRJc3N1ZSh0eXBlLCBub2RlSWQsIG9yaWdpbiwgdmFsdWUsIGtpbmQpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRGV0ZWN0aW9uLCBgSXNzdWUgZGV0ZWN0ZWQ6ICR7dHlwZX1gLCB0eXBlLCB2YWx1ZSk7XG4gICAgICAgIGxvZ2dlci5sb2dFdmVudCgnaXNzdWUnLCB7XG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY29uZmlncy5jbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICByZW1vdGVJZDogbm9kZUlkLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IHRoaXMuaXNzdWVzLmZpbHRlcigoaXNzdWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gaXNzdWUudGltZXN0YW1wIDwgREVURUNUSU9OX0lTU1VFX1RJTUVPVVQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlzc3Vlcy5wdXNoKHsgdGltZXN0YW1wOiBEYXRlLm5vdygpLCB0eXBlLCBub2RlSWQ6IG5vZGVJZCwgb3JpZ2luLCB2YWx1ZSwga2luZCB9KTtcbiAgICAgICAgY29uc3QgbmJJc3N1ZXMgPSB0aGlzLmlzc3Vlcy5maWx0ZXIoKGlzc3VlKSA9PiBpc3N1ZS50eXBlID09PSB0eXBlICYmIGlzc3VlLm5vZGVJZCA9PT0gbm9kZUlkICYmIGlzc3VlLm9yaWdpbiA9PT0gb3JpZ2luKS5sZW5ndGg7XG4gICAgICAgIHRoaXMuZGV0ZWN0UHJvYmxlbXModHlwZSwgbm9kZUlkLCBvcmlnaW4sIG5iSXNzdWVzKTtcbiAgICB9XG4gICAgYWRkUHJvYmxlbSh0eXBlLCB1c2VySWQsIG9yaWdpbikge1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5EZXRlY3Rpb24sIGBQcm9ibGVtIGRldGVjdGVkOiAke3R5cGV9YCk7XG4gICAgICAgIGxvZ2dlci5sb2dFdmVudCgncHJvYmxlbScsIHtcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jb25maWdzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIHJlbW90ZUlkOiB1c2VySWQsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljPy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IERldGVjdGlvbk1lc3NhZ2VUeXBlLlByb2JsZW0sXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIG5vZGVJZDogdXNlcklkLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFBlZXJDb25uZWN0aW9uT3JpZ2luLlNlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnbW9kZWxzL05vZGUvTm9kZSc7XG5leHBvcnQgY2xhc3MgQWdlbnQgZXh0ZW5kcyBOb2RlIHtcbiAgICB0eXBlID0gTm9kZVR5cGUuQWdlbnQ7XG59XG4iLCJpbXBvcnQgeyBhZGREb2MsIGNvbGxlY3Rpb24sIGRvYywgb25TbmFwc2hvdCwgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBOT0RFX0FHRU5UX0NBUEFDSVRZX1JFUE9SVF9JTlRFUlZBTCB9IGZyb20gJ2NvbnN0YW50cy9Ob2RlJztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdzZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgQXV0aEFnZW50IHtcbiAgICBpZDtcbiAgICBncm91cElkO1xuICAgIHZlbmRvcklkO1xuICAgIGFnZW50Q29uZmlnO1xuICAgIHR5cGUgPSBOb2RlVHlwZS5BZ2VudDtcbiAgICBjb25zdHJ1Y3RvcihpZCwgZ3JvdXBJZCwgdmVuZG9ySWQsIGFnZW50Q29uZmlnKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5ncm91cElkID0gZ3JvdXBJZDtcbiAgICAgICAgdGhpcy52ZW5kb3JJZCA9IHZlbmRvcklkO1xuICAgICAgICB0aGlzLmFnZW50Q29uZmlnID0gYWdlbnRDb25maWc7XG4gICAgfVxuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZDtcbiAgICB9XG4gICAgb25Db25maWd1cmF0aW9uQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25TbmFwc2hvdChkb2MoZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGBkZXZlbG9wZXJzLyR7dGhpcy52ZW5kb3JJZH0vcmVzb3VyY2VzL2FnZW50L2l0ZW1zLyR7dGhpcy5ncm91cElkfWApLCAoc25hcHNob3QpID0+IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdC5leGlzdHMoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFnZW50Q29uZmlnID0gc25hcHNob3QuZGF0YSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFnZW50Q29uZmlnLnRpbWVzdGFtcC5pc0VxdWFsKGFnZW50Q29uZmlnLnRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Ob2RlLCAnYWdlbnQtY29uZmlnLWNoYW5nZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgIGFnZW50SWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgb2xkQ29uZmlnOiB0aGlzLmFnZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgICAgICBuZXdDb25maWc6IGFnZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWdlbnRDb25maWcgPSBhZ2VudENvbmZpZztcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICgpID0+IHVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIHNldFJlcG9ydENhcGFjaXR5KHJlcG9ydENhcGFjaXR5KSB7XG4gICAgICAgIHRoaXMucmVwb3J0Q2FwYWNpdHkodGhpcy5ncm91cElkLCByZXBvcnRDYXBhY2l0eSk7XG4gICAgICAgIHJldHVybiBpbnRlcnZhbC5zZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnJlcG9ydENhcGFjaXR5KHRoaXMuZ3JvdXBJZCwgcmVwb3J0Q2FwYWNpdHkpLCBOT0RFX0FHRU5UX0NBUEFDSVRZX1JFUE9SVF9JTlRFUlZBTCk7XG4gICAgfVxuICAgIGFzeW5jIHJlcG9ydENhcGFjaXR5KGdyb3VwSWQsIHJlcG9ydENhcGFjaXR5KSB7XG4gICAgICAgIGNvbnN0IGNhcGFjaXR5ID0gYXdhaXQgcmVwb3J0Q2FwYWNpdHkoKTtcbiAgICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGBkZXZlbG9wZXJzLyR7dGhpcy52ZW5kb3JJZH0vY2FwYWNpdGllc2ApLCB7XG4gICAgICAgICAgICBhZ2VudElkOiB0aGlzLmlkLFxuICAgICAgICAgICAgZ3JvdXBJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgICAgICBjYXBhY2l0eSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IGNyZWF0ZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIEF1dGhVc2VyIHtcbiAgICBpZDtcbiAgICBkaXNwbGF5TmFtZTtcbiAgICBlbWFpbDtcbiAgICB0eXBlID0gTm9kZVR5cGUuVXNlcjtcbiAgICBqb2luZWRDbHVzdGVycyA9IG5ldyBNYXAoKTtcbiAgICBvYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgY29uc3RydWN0b3IoaWQsIGRpc3BsYXlOYW1lLCBlbWFpbCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsO1xuICAgIH1cbiAgICBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfVxuICAgIGdldERpc3BsYXlOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5TmFtZTtcbiAgICB9XG4gICAgZ2V0RW1haWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVtYWlsO1xuICAgIH1cbiAgICBzZXREaXNwbGF5TmFtZShkaXNwbGF5TmFtZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSA9PT0gZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIucHVibGlzaCh0aGlzKTtcbiAgICB9XG4gICAgc2V0RW1haWwoZW1haWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZW1haWwgPT09IGVtYWlsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsO1xuICAgICAgICB0aGlzLm9ic2VydmVyLnB1Ymxpc2godGhpcyk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQ2x1c3RlcihjbHVzdGVySWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLmpvaW5lZENsdXN0ZXJzLmhhcyhjbHVzdGVySWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLm9ic2VydmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgICAgIHRoaXMuam9pbmVkQ2x1c3RlcnMuc2V0KGNsdXN0ZXJJZCwgdW5zdWJzY3JpYmUpO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyQ2x1c3RlcihjbHVzdGVySWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmpvaW5lZENsdXN0ZXJzLmhhcyhjbHVzdGVySWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmpvaW5lZENsdXN0ZXJzLmdldChjbHVzdGVySWQpO1xuICAgICAgICBpZiAodW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5qb2luZWRDbHVzdGVycy5kZWxldGUoY2x1c3RlcklkKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FX0xJTUlULCBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FIH0gZnJvbSAnY29uc3RhbnRzL05vZGUnO1xuaW1wb3J0IHsgTm9kZU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGVNZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9BZ2VudCc7XG5leHBvcnQgY2xhc3MgTG9jYWxBZ2VudCBleHRlbmRzIEFnZW50IHtcbiAgICBzeXN0ZW1Ub3BpYztcbiAgICBjdXJyZW50VmVyc2lvbiA9IERhdGUubm93KCk7XG4gICAgdXBkYXRlRGVib3VuY2VUaW1lb3V0O1xuICAgIGxhc3RVcGRhdGVkO1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMubGFzdFVwZGF0ZWQ7XG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSBEYXRlLm5vdygpO1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxuICAgIGFuc3dlckpvaW4odXNlcklkKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCB8fCAhdGhpcy5yYW5rKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFt1c2VySWRdLFxuICAgICAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLk5vZGUsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogTm9kZU1lc3NhZ2VUeXBlLk5vZGVVcGRhdGUsXG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgbWV0YURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmFuazogdGhpcy5nZXRSYW5rKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlQ29ubmVjdGlvbnM6IEFycmF5LmZyb20odGhpcy5yZW1vdGVDb25uZWN0aW9ucyksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRSZW1vdGVDb25uZWN0aW9uKHJlbW90ZUlkKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmhhcyhyZW1vdGVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmFkZChyZW1vdGVJZCk7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50VmVyc2lvbigpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hVc2VyVXBkYXRlKHRydWUpO1xuICAgIH1cbiAgICByZW1vdmVSZW1vdGVDb25uZWN0aW9uKHJlbW90ZUlkKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5oYXMocmVtb3RlSWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5kZWxldGUocmVtb3RlSWQpO1xuICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoVXNlclVwZGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWZXJzaW9uO1xuICAgIH1cbiAgICBzZXRSYW5rKHJhbmssIGluY3JlbWVudFZlcnNpb24gPSB0cnVlKSB7XG4gICAgICAgIGlmICh0aGlzLnJhbmsgPT09IHJhbmspIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJhbmsgPSByYW5rO1xuICAgICAgICBpZiAoaW5jcmVtZW50VmVyc2lvbikge1xuICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnRWZXJzaW9uKCk7XG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hVc2VyVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5jcmVtZW50VmVyc2lvbigpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VmVyc2lvbiA9IERhdGUubm93KCk7XG4gICAgfVxuICAgIHB1Ymxpc2hVc2VyVXBkYXRlKGNvbm5lY3Rpb25zVXBkYXRlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJhbmspIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubGFzdFVwZGF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFVwZGF0ZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCkge1xuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RVcGRhdGVkID4gTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRV9MSU1JVCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RVcGRhdGVkO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0O1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5pZCxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLk5vZGUsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBjb25uZWN0aW9uc1VwZGF0ZSA/IE5vZGVNZXNzYWdlVHlwZS5Ob2RlQ29ubmVjdGlvbnNVcGRhdGUgOiBOb2RlTWVzc2FnZVR5cGUuTm9kZVVwZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJhbms6IHRoaXMuZ2V0UmFuaygpLFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVDb25uZWN0aW9uczogQXJyYXkuZnJvbSh0aGlzLnJlbW90ZUNvbm5lY3Rpb25zKSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUVfTElNSVQsIE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUUgfSBmcm9tICdjb25zdGFudHMvTm9kZSc7XG5pbXBvcnQgeyBOb2RlTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL05vZGUvTm9kZU1lc3NhZ2UnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnbW9kZWxzL05vZGUvVXNlcic7XG5leHBvcnQgY2xhc3MgTG9jYWxVc2VyIGV4dGVuZHMgVXNlciB7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgY3VycmVudFZlcnNpb24gPSBEYXRlLm5vdygpO1xuICAgIHVwZGF0ZURlYm91bmNlVGltZW91dDtcbiAgICBsYXN0VXBkYXRlZDtcbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0O1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RVcGRhdGVkO1xuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gRGF0ZS5ub3coKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICBhbnN3ZXJKb2luKHVzZXJJZCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQgfHwgIXRoaXMucmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5pZCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdXNlcklkXSxcbiAgICAgICAgICAgIHByb3BhZ2F0ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Ob2RlLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IE5vZGVNZXNzYWdlVHlwZS5Ob2RlVXBkYXRlLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIG1ldGFEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHRoaXMuZ2V0RGlzcGxheU5hbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuZ2V0RW1haWwoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJhbms6IHRoaXMuZ2V0UmFuaygpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUNvbm5lY3Rpb25zOiBBcnJheS5mcm9tKHRoaXMucmVtb3RlQ29ubmVjdGlvbnMpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkUmVtb3RlQ29ubmVjdGlvbihyZW1vdGVJZCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdGVDb25uZWN0aW9ucy5oYXMocmVtb3RlSWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5hZGQocmVtb3RlSWQpO1xuICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoVXNlclVwZGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVtb3RlQ29ubmVjdGlvbihyZW1vdGVJZCkge1xuICAgICAgICBpZiAoIXRoaXMucmVtb3RlQ29ubmVjdGlvbnMuaGFzKHJlbW90ZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuZGVsZXRlKHJlbW90ZUlkKTtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRWZXJzaW9uKCk7XG4gICAgICAgIHRoaXMucHVibGlzaFVzZXJVcGRhdGUodHJ1ZSk7XG4gICAgfVxuICAgIGdldEN1cnJlbnRWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmVyc2lvbjtcbiAgICB9XG4gICAgc2V0RGlzcGxheU5hbWUoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheU5hbWUgPT09IGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoVXNlclVwZGF0ZSgpO1xuICAgIH1cbiAgICBzZXRFbWFpbChlbWFpbCkge1xuICAgICAgICBpZiAodGhpcy5lbWFpbCA9PT0gZW1haWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtYWlsID0gZW1haWw7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50VmVyc2lvbigpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hVc2VyVXBkYXRlKCk7XG4gICAgfVxuICAgIHNldFJhbmsocmFuaywgaW5jcmVtZW50VmVyc2lvbiA9IHRydWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmFuayA9PT0gcmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgICAgIGlmIChpbmNyZW1lbnRWZXJzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgICAgIHRoaXMucHVibGlzaFVzZXJVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmNyZW1lbnRWZXJzaW9uKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgcHVibGlzaFVzZXJVcGRhdGUoY29ubmVjdGlvbnNVcGRhdGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAoIXRoaXMucmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5sYXN0VXBkYXRlZCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0VXBkYXRlZCA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0KSB7XG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFVwZGF0ZWQgPiBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FX0xJTUlUKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubGFzdFVwZGF0ZWQ7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQ7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuTm9kZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvbm5lY3Rpb25zVXBkYXRlID8gTm9kZU1lc3NhZ2VUeXBlLk5vZGVDb25uZWN0aW9uc1VwZGF0ZSA6IE5vZGVNZXNzYWdlVHlwZS5Ob2RlVXBkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgbWV0YURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB0aGlzLmdldERpc3BsYXlOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5nZXRFbWFpbCgpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByYW5rOiB0aGlzLmdldFJhbmsoKSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlQ29ubmVjdGlvbnM6IEFycmF5LmZyb20odGhpcy5yZW1vdGVDb25uZWN0aW9ucyksXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgTm9kZSB7XG4gICAgaWQ7XG4gICAgcmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgcmFuaztcbiAgICBjb25zdHJ1Y3RvcihpZCwgcmVtb3RlQ29ubmVjdGlvbnMgPSBuZXcgU2V0KCksIHJhbmspIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zID0gcmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnJhbmsgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuY2xlYXIoKTtcbiAgICB9XG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cbiAgICBnZXRSYW5rKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYW5rO1xuICAgIH1cbiAgICBnZXRSZW1vdGVDb25uZWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IE5PREVfQ0xFQU5fUkVNT1RFX05PREVTX0lOVEVSVkFMLCBOT0RFX0NMRUFOX1JFTU9URV9OT0RFU19USFJFU0hPTEQsIE5PREVfRElTVEFOQ0VfSE9QLCBOT0RFX1BST0NFU1NfUkFOS19ERUJPVUNFX1RJTUUsIE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRV9MSU1JVCB9IGZyb20gJ2NvbnN0YW50cy9Ob2RlJztcbmltcG9ydCB7IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgRWFybHlSZXR1cm5FcnJvciB9IGZyb20gJ2Vycm9ycy9FYXJseVJldHVybkVycm9yJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvblR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBOb2RlU3RhdHVzIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGUnO1xuaW1wb3J0IHsgTm9kZU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGVNZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgUmVtb3RlQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9SZW1vdGVBZ2VudCc7XG5pbXBvcnQgeyBSZW1vdGVVc2VyIH0gZnJvbSAnbW9kZWxzL05vZGUvUmVtb3RlVXNlcic7XG5pbXBvcnQgeyBGaXJlYmFzZVJEQkRpc2NvdmVyeVNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlcy9EaXNjb3ZlcnkvRmlyZWJhc2VSREJEaXNjb3ZlcnlTZXJ2aWNlJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIE5vZGVNYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIGdyYXBoU2VydmljZTtcbiAgICBsb2NhbE5vZGU7XG4gICAgcmVtb3RlVW5zdWJzY3JpYmVyO1xuICAgIGRpc2NvdmVyeVNlcnZpY2U7XG4gICAgZGlzY292ZXJ5VW5zdWJzY3JpYmVyO1xuICAgIGFuY2VzdG9ycyA9IFtdO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIG9wdGltaXphdGlvbkxheWVycyA9IG5ldyBNYXAoKTtcbiAgICBkZWJvdW5jZVByb2Nlc3NSYW5rO1xuICAgIGxhc3RQcm9jZXNzUmFuaztcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBncmFwaFNlcnZpY2UsIGxvY2FsTm9kZSkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLmdyYXBoU2VydmljZSA9IGdyYXBoU2VydmljZTtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUgPSBsb2NhbE5vZGU7XG4gICAgICAgIHRoaXMuZGlzY292ZXJ5U2VydmljZSA9IG5ldyBGaXJlYmFzZVJEQkRpc2NvdmVyeVNlcnZpY2UodGhpcy5jb25maWdzLnZlbmRvcklkLCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCB0aGlzLmxvY2FsTm9kZSwgdGhpcy5ncmFwaFNlcnZpY2UuZ2V0TWluQ29ubmVjdGlvbnMoKSk7XG4gICAgICAgIHRoaXMuZGlzY292ZXJ5VW5zdWJzY3JpYmVyID0gdGhpcy5kaXNjb3ZlcnlTZXJ2aWNlLm9uTm9kZURpc2Nvbm5lY3QodGhpcy5oYW5kbGVOb2RlRGlzY29ubmVjdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMubG9jYWxOb2RlKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgICAgICB0aGlzLnJlbW90ZVVuc3Vic2NyaWJlciA9IGludGVydmFsLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlcygpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5nZXRTdGF0dXMoKSA9PT0gTm9kZVN0YXR1cy5PZmZsaW5lICYmIG5vZGUuZ2V0TGFzdFVwZGF0ZWQoKSA8IG5vdyAtIE5PREVfQ0xFQU5fUkVNT1RFX05PREVTX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyYXBoU2VydmljZS5kZWxldGVSZW1vdGVOb2RlKG5vZGUuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIE5PREVfQ0xFQU5fUkVNT1RFX05PREVTX0lOVEVSVkFMKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVib3VuY2VQcm9jZXNzUmFuaykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VQcm9jZXNzUmFuayk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVByb2Nlc3NSYW5rO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RQcm9jZXNzUmFuaztcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5yZW1vdGVVbnN1YnNjcmliZXIoKTtcbiAgICAgICAgdGhpcy5kaXNjb3ZlcnlVbnN1YnNjcmliZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcy5sb2NhbE5vZGUpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzKTtcbiAgICAgICAgdGhpcy5kaXNjb3ZlcnlTZXJ2aWNlLmNsb3NlKCk7XG4gICAgfVxuICAgIGdldEFuY2VzdG9ySWRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmNlc3RvcnM7XG4gICAgfVxuICAgIGdldExvY2FsSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpO1xuICAgIH1cbiAgICBnZXRMb2NhbE5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsTm9kZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlTm9kZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgbm9kZXMgPSBBcnJheS5mcm9tKHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGVzKCkudmFsdWVzKCkpLmZpbHRlcigobm9kZSkgPT4gbm9kZS5nZXRTdGF0dXMoKSA9PT0gTm9kZVN0YXR1cy5PbmxpbmUpO1xuICAgICAgICBpZiAoc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHJldHVybiBub2Rlcy5maWx0ZXIoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlcztcbiAgICB9XG4gICAgYXN5bmMgZGlzY292ZXIoKSB7XG4gICAgICAgIHRoaXMuYW5jZXN0b3JzID0gYXdhaXQgdGhpcy5kaXNjb3ZlcnlTZXJ2aWNlLmpvaW4oKTtcbiAgICAgICAgaWYgKHRoaXMuYW5jZXN0b3JzLmxlbmd0aCA8IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldE1pbkNvbm5lY3Rpb25zKCkpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxOb2RlLnNldFJhbmsodGhpcy5hbmNlc3RvcnMubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSYW5rKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jZXN0b3JzO1xuICAgIH1cbiAgICBnZXREaXN0YW5jZShzb3VyY2VJZCwgcmVtb3RlSWQpIHtcbiAgICAgICAgY29uc3QgcmVtb3RlQ29ubmVjdGlvbnMgPSB0aGlzLmxvY2FsTm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucygpO1xuICAgICAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldChyZW1vdGVDb25uZWN0aW9ucyk7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gQXJyYXkuZnJvbShyZW1vdGVDb25uZWN0aW9ucylcbiAgICAgICAgICAgIC5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gc291cmNlSWQpXG4gICAgICAgICAgICAubWFwKChpZCkgPT4gKHsgaWQsIGRpc3RhbmNlOiAxIH0pKTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudC5pZCA9PT0gcmVtb3RlSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudC5kaXN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlKGN1cnJlbnQuaWQpO1xuICAgICAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUuZ2V0U3RhdHVzKCkgPT09IE5vZGVTdGF0dXMuT2ZmbGluZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVtb3RlQ29ubmVjdGlvbnMgPSBub2RlLmdldFJlbW90ZUNvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgICByZW1vdGVDb25uZWN0aW9ucy5mb3JFYWNoKChyZW1vdGVDb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkLmhhcyhyZW1vdGVDb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkLmFkZChyZW1vdGVDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaCh7IGlkOiByZW1vdGVDb25uZWN0aW9uLCBkaXN0YW5jZTogY3VycmVudC5kaXN0YW5jZSArIE5PREVfRElTVEFOQ0VfSE9QIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaGFuZGxlTm9kZVN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE5vZGVNZXNzYWdlVHlwZS5Ob2RlVXBkYXRlOlxuICAgICAgICAgICAgICAgIGNhc2UgTm9kZU1lc3NhZ2VUeXBlLk5vZGVDb25uZWN0aW9uc1VwZGF0ZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOb2RlVXBkYXRlKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Ob2RlLCAnTm9kZU1hbmFnZXIgLSBOb2RlVXBkYXRlJywgYCcke3RoaXMubG9jYWxOb2RlLmdldElkKCl9LCAke2V2ZW50LnNvdXJjZUlkfSdgLCBldmVudCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTm9kZU1lc3NhZ2VUeXBlLk5vZGVMZWF2ZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlKGV2ZW50LmNvbnRlbnQuaWQpO1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Ob2RlLCAnTm9kZU1hbmFnZXIgLSBOb2RlTGVhdmUnLCBgJyR7dGhpcy5sb2NhbE5vZGUuZ2V0SWQoKX0sICR7ZXZlbnQuc291cmNlSWR9J2AsIGV2ZW50LCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRWFybHlSZXR1cm5FcnJvcikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLk5vZGUsIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLlN1Y2Nlc3M6XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDb25uZWN0aW9uU3VjY2VzcyhldmVudC5zb3VyY2VJZCk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuTm9kZSwgJ05vZGVNYW5hZ2VyIC0gQ29ubmVjdGlvblN1Y2Nlc3MnLCBgJyR7dGhpcy5sb2NhbE5vZGUuZ2V0SWQoKX0sICR7ZXZlbnQuc291cmNlSWR9J2AsIGV2ZW50LCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5EaXNjb25uZWN0OlxuICAgICAgICAgICAgICAgIHRoaXMucHVibGlzaE5vZGVMZWF2ZShldmVudC5zb3VyY2VJZCk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuTm9kZSwgJ05vZGVNYW5hZ2VyIC0gUHVibGlzaE5vZGVMZWF2ZScsIHRoaXMubG9jYWxOb2RlLmdldElkKCksIGV2ZW50LCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOb2RlSm9pbihjb250ZW50KSB7XG4gICAgICAgIHRoaXMuY3JlYXRlUmVtb3RlTm9kZShjb250ZW50KTtcbiAgICAgICAgdGhpcy5ub3RpZnlKb2luKGNvbnRlbnQpO1xuICAgIH1cbiAgICBub3RpZnlKb2luKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUuYW5zd2VySm9pbihjb250ZW50LmlkKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoTm9kZUpvaW4oY29udGVudC5pZCk7XG4gICAgICAgIHRoaXMubm90aWZ5Q2x1c3Rlck5vZGVKb2luKGNvbnRlbnQpO1xuICAgIH1cbiAgICBoYW5kbGVOb2RlVXBkYXRlKGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgeyBpZCwgbWV0YURhdGEsIHJhbmssIHJlbW90ZUNvbm5lY3Rpb25zLCB2ZXJzaW9uIH0gPSBjb250ZW50O1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZShpZCk7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVOb2RlSm9pbihjb250ZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmVyc2lvbiA8PSBub2RlLmdldEN1cnJlbnRWZXJzaW9uKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBub2RlLnNldFJlbW90ZUNvbm5lY3Rpb25zKHJlbW90ZUNvbm5lY3Rpb25zKTtcbiAgICAgICAgbm9kZS5zZXRDdXJyZW50VmVyc2lvbih2ZXJzaW9uKTtcbiAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gTm9kZVR5cGUuVXNlciAmJiBtZXRhRGF0YS50eXBlID09PSBOb2RlVHlwZS5Vc2VyKSB7XG4gICAgICAgICAgICBub2RlLnNldERpc3BsYXlOYW1lKG1ldGFEYXRhLmRpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgIG5vZGUuc2V0RW1haWwobWV0YURhdGEuZW1haWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyYW5rKSB7XG4gICAgICAgICAgICBub2RlLnNldFJhbmsocmFuayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRMb2NhbFJhbmsoaWQsIHJhbmspO1xuICAgICAgICBpZiAobm9kZS5nZXRTdGF0dXMoKSA9PT0gTm9kZVN0YXR1cy5PZmZsaW5lKSB7XG4gICAgICAgICAgICBub2RlLnNldFN0YXR1cyhOb2RlU3RhdHVzLk9ubGluZSk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NSYW5rKCk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeUpvaW4oY29udGVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9jZXNzUmFuaygpO1xuICAgICAgICB0aGlzLm5vdGlmeUNsdXN0ZXJOb2RlVXBkYXRlKHsgaWQsIG1ldGFEYXRhLCByZW1vdGVDb25uZWN0aW9ucywgdmVyc2lvbiB9KTtcbiAgICB9XG4gICAgc2V0TG9jYWxSYW5rKG5vZGVJZCwgcmFuaykge1xuICAgICAgICBpZiAocmFuayAmJiB0aGlzLmFuY2VzdG9ycy5pbmNsdWRlcyhub2RlSWQpKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsTm9kZS5zZXRSYW5rKHJhbmsgKyB0aGlzLmFuY2VzdG9ycy5pbmRleE9mKG5vZGVJZCkgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb25uZWN0aW9uU3VjY2Vzcyhzb3VyY2VJZCkge1xuICAgICAgICB0aGlzLmxvY2FsTm9kZS5hZGRSZW1vdGVDb25uZWN0aW9uKHNvdXJjZUlkKTtcbiAgICB9XG4gICAgY3JlYXRlUmVtb3RlTm9kZSh7IGlkLCBtZXRhRGF0YSwgcmFuaywgcmVtb3RlQ29ubmVjdGlvbnMsIHZlcnNpb24gfSkge1xuICAgICAgICBpZiAodGhpcy5ncmFwaFNlcnZpY2UuaGFzUmVtb3RlTm9kZShpZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFYXJseVJldHVybkVycm9yKGBDYW5ub3QgY3JlYXRlIHJlbW90ZSBub2RlOiBOb2RlIGFscmVhZHkgZXhpc3RzOiAke2lkfWApO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAobWV0YURhdGEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5Vc2VyOlxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGlzcGxheU5hbWUsIGVtYWlsIH0gPSBtZXRhRGF0YTtcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoU2VydmljZS5zZXRSZW1vdGVOb2RlKGlkLCBuZXcgUmVtb3RlVXNlcihpZCwgZGlzcGxheU5hbWUsIGVtYWlsLCBuZXcgU2V0KHJlbW90ZUNvbm5lY3Rpb25zKSwgdmVyc2lvbiwgcmFuaykpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5BZ2VudDpcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoU2VydmljZS5zZXRSZW1vdGVOb2RlKGlkLCBuZXcgUmVtb3RlQWdlbnQoaWQsIG5ldyBTZXQocmVtb3RlQ29ubmVjdGlvbnMpLCB2ZXJzaW9uLCByYW5rKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRMb2NhbFJhbmsoaWQsIHJhbmspO1xuICAgICAgICB0aGlzLnByb2Nlc3NSYW5rKCk7XG4gICAgfVxuICAgIHB1Ymxpc2hOb2RlSm9pbihpZCkge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Ob2RlLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IE5vZGVNZXNzYWdlVHlwZS5Ob2RlSm9pbixcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaXNoTm9kZUxlYXZlKGlkKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWM/LnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Ob2RlLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IE5vZGVNZXNzYWdlVHlwZS5Ob2RlTGVhdmUsXG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVOb2RlRGlzY29ubmVjdChpZCkge1xuICAgICAgICBpZiAoaWQgPT09IHRoaXMubG9jYWxOb2RlLmdldElkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5ub3RpZnlDbHVzdGVyKCdjbHVzdGVyLWRpc2Nvbm5lY3QnLCB7IGlkIH0pO1xuICAgICAgICAgICAgLy8gVE9ETyAtIG5lZWQgdG8gaGFuZGxlIHRoaXMgbW9yZSBncmFjZWZ1bGx5XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuY2xvc2UodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iub3BlbigpO1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB1Ymxpc2hOb2RlTGVhdmUoaWQpO1xuICAgIH1cbiAgICByZW1vdmVOb2RlKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLmFuY2VzdG9ycy5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlQW5jZXN0b3IoaWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMubG9jYWxOb2RlLmdldFJlbW90ZUNvbm5lY3Rpb25zKCkuaGFzKGlkKSkge1xuICAgICAgICAgICAgdGhpcy5tYW5hZ2VPcHRpbWl6YXRpb24oaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9jYWxOb2RlLnJlbW92ZVJlbW90ZUNvbm5lY3Rpb24oaWQpO1xuICAgICAgICBjb25zdCBsYXllciA9IEFycmF5LmZyb20odGhpcy5vcHRpbWl6YXRpb25MYXllcnMuZW50cmllcygpKS5maW5kKChbLCBpZF0pID0+IGlkID09PSBpZCk7XG4gICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgdGhpcy5vcHRpbWl6YXRpb25MYXllcnMuZGVsZXRlKGxheWVyWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdGVOb2RlID0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZShpZCk7XG4gICAgICAgIGlmICghcmVtb3RlTm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZVJhbmsgPSByZW1vdGVOb2RlLmdldFJhbmsoKTtcbiAgICAgICAgY29uc3QgbG9jYWxSYW5rID0gdGhpcy5sb2NhbE5vZGUuZ2V0UmFuaygpO1xuICAgICAgICBpZiAobG9jYWxSYW5rICYmIHJlbW90ZVJhbmsgJiYgcmVtb3RlUmFuayA8IGxvY2FsUmFuaykge1xuICAgICAgICAgICAgdGhpcy5sb2NhbE5vZGUuc2V0UmFuayhsb2NhbFJhbmsgLSAxLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgQXJyYXkuZnJvbSh0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlcygpLnZhbHVlcygpKS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByYW5rID0gbm9kZS5nZXRSYW5rKCk7XG4gICAgICAgICAgICBpZiAocmFuayAmJiByZW1vdGVSYW5rICYmIHJlbW90ZVJhbmsgPCByYW5rKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zZXRSYW5rKHJhbmsgLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJlbW90ZU5vZGUuc2V0U3RhdHVzKE5vZGVTdGF0dXMuT2ZmbGluZSk7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5ub3RpZnlDbHVzdGVyKGAke3JlbW90ZU5vZGUudHlwZX0tbGVhdmVgLCB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vdGlmeUNsdXN0ZXJOb2RlSm9pbih7IGlkLCBtZXRhRGF0YSwgcmVtb3RlQ29ubmVjdGlvbnMgfSkge1xuICAgICAgICBzd2l0Y2ggKG1ldGFEYXRhLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iubm90aWZ5Q2x1c3RlcigndXNlci1qb2luJywge1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgbWV0YURhdGEsXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZUNvbm5lY3Rpb25zLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5BZ2VudDpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iubm90aWZ5Q2x1c3RlcignYWdlbnQtam9pbicsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFEYXRhLFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVDb25uZWN0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBub3RpZnlDbHVzdGVyTm9kZVVwZGF0ZSh7IGlkLCBtZXRhRGF0YSwgcmVtb3RlQ29ubmVjdGlvbnMgfSkge1xuICAgICAgICBzd2l0Y2ggKG1ldGFEYXRhLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iubm90aWZ5Q2x1c3RlcigndXNlci11cGRhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRhRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlQ29ubmVjdGlvbnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLkFnZW50OlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5ub3RpZnlDbHVzdGVyKCdhZ2VudC11cGRhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRhRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlQ29ubmVjdGlvbnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc1JhbmsoKSB7XG4gICAgICAgIGlmICghdGhpcy5sYXN0UHJvY2Vzc1JhbmspIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFByb2Nlc3NSYW5rID0gRGF0ZS5ub3coKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWJvdW5jZVByb2Nlc3NSYW5rKSB7XG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFByb2Nlc3NSYW5rID4gTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FX0xJTUlUKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VQcm9jZXNzUmFuayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJvdW5jZVByb2Nlc3NSYW5rID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sYXN0UHJvY2Vzc1Jhbms7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVByb2Nlc3NSYW5rO1xuICAgICAgICAgICAgY29uc3QgbG9jYWxSYW5rID0gdGhpcy5sb2NhbE5vZGUuZ2V0UmFuaygpO1xuICAgICAgICAgICAgaWYgKCFsb2NhbFJhbmspIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50TWF4TGF5ZXIgPSB0aGlzLmdyYXBoU2VydmljZS5nZXRDdXJyZW50TWF4TGF5ZXIodGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZXMoKS5zaXplKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGltaXphdGlvbkxheWVycy5zaXplID49IGN1cnJlbnRNYXhMYXllcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBsYXllciA9IDE7XG4gICAgICAgICAgICB3aGlsZSAodGhpcy5jb25maWdzLm1lZGlhdG9yLmdldENvbm5lY3Rpb25zKCkubGVuZ3RoIDwgdGhpcy5ncmFwaFNlcnZpY2UuZ2V0TWF4Q29ubmVjdGlvbnMoKSAmJiBsYXllciA8PSBjdXJyZW50TWF4TGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpbWl6YXRpb25MYXllcnMuaGFzKGxheWVyKSkge1xuICAgICAgICAgICAgICAgICAgICBsYXllciArPSAxO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UmFuayA9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldE5leHRUYXJnZXRSYW5rKGxvY2FsUmFuaywgbGF5ZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW90ZU5vZGUgPSBBcnJheS5mcm9tKHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGVzKCkudmFsdWVzKCkpLmZpbmQoKG5vZGUpID0+IG5vZGUuZ2V0UmFuaygpID09PSB0YXJnZXRSYW5rICYmIG5vZGUuZ2V0U3RhdHVzKCkgPT09IE5vZGVTdGF0dXMuT25saW5lKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlbW90ZU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29uZmlncy5tZWRpYXRvci5jcmVhdGVDb25uZWN0aW9uKHJlbW90ZU5vZGUuZ2V0SWQoKSwgUGVlckNvbm5lY3Rpb25UeXBlLk9wdGltaXphdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW1pemF0aW9uTGF5ZXJzLnNldChsYXllciwgcmVtb3RlTm9kZS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTREtJbnRlcm5hbEVycm9yICYmIGUuY29kZSA9PT0gU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5SZW1vdGVDb25uZWN0aW9uRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Ob2RlLCB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLCByZW1vdGVOb2RlLmdldElkKCksIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxheWVyICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRSk7XG4gICAgfVxuICAgIGFzeW5jIG1hbmFnZUFuY2VzdG9yKG5vZGVJZCkge1xuICAgICAgICB0aGlzLmFuY2VzdG9ycy5zcGxpY2UodGhpcy5hbmNlc3RvcnMuaW5kZXhPZihub2RlSWQpLCAxKTtcbiAgICAgICAgY29uc3QgbmV3QW5jZXN0b3JJZHMgPSBhd2FpdCB0aGlzLmRpc2NvdmVyeVNlcnZpY2UuZ2V0QW5jZXN0b3JzKCk7XG4gICAgICAgIGZvciAoY29uc3QgYW5jZXN0b3JJZCBvZiBuZXdBbmNlc3Rvcklkcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFuY2VzdG9ycy5pbmNsdWRlcyhhbmNlc3RvcklkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gQXJyYXkuZnJvbSh0aGlzLm9wdGltaXphdGlvbkxheWVycy5lbnRyaWVzKCkpLmZpbmQoKFssIGlkXSkgPT4gaWQgPT09IGFuY2VzdG9ySWQpO1xuICAgICAgICAgICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGltaXphdGlvbkxheWVycy5kZWxldGUobGF5ZXJbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEbyBub3QgYXdhaXQgdGhpcyBjcmVhdGUgY29ubmVjdGlvbiBzaW5jZSBpdCB3aWxsIG5vdCB1cGRhdGUgdGhlIGFuY2VzdG9ycyBzeW5jaHJvbm91c2x5XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLmNyZWF0ZUNvbm5lY3Rpb24oYW5jZXN0b3JJZCwgUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdBbmNlc3Rvcklkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMubG9jYWxOb2RlLnNldFJhbmsoMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmNlc3RvcnMgPSBuZXdBbmNlc3RvcklkcztcbiAgICB9XG4gICAgYXN5bmMgbWFuYWdlT3B0aW1pemF0aW9uKG5vZGVJZCkge1xuICAgICAgICBjb25zdCBsb2NhbFJhbmsgPSB0aGlzLmxvY2FsTm9kZS5nZXRSYW5rKCk7XG4gICAgICAgIGlmICghbG9jYWxSYW5rKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlTm9kZSA9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGUobm9kZUlkKTtcbiAgICAgICAgaWYgKCFyZW1vdGVOb2RlIHx8IHJlbW90ZU5vZGUuZ2V0U3RhdHVzKCkgPT09IE5vZGVTdGF0dXMuT2ZmbGluZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZVJhbmsgPSByZW1vdGVOb2RlLmdldFJhbmsoKTtcbiAgICAgICAgaWYgKCFyZW1vdGVSYW5rIHx8IHJlbW90ZVJhbmsgPCBsb2NhbFJhbmspIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhbE9wdGltaXphdGlvbkNvbm5lY3Rpb25zID0gdGhpcy5nZXRPdXRnb2luZ09wdGltaXphdGlvbkNvbm5lY3Rpb25zKHRoaXMubG9jYWxOb2RlLmdldFJlbW90ZUNvbm5lY3Rpb25zKCksIGxvY2FsUmFuayk7XG4gICAgICAgIGNvbnN0IHJlbW90ZU9wdGltaXphdGlvbkNvbm5lY3Rpb25zID0gdGhpcy5nZXRPdXRnb2luZ09wdGltaXphdGlvbkNvbm5lY3Rpb25zKHJlbW90ZU5vZGUuZ2V0UmVtb3RlQ29ubmVjdGlvbnMoKSwgcmVtb3RlUmFuayk7XG4gICAgICAgIGNvbnN0IGluZGV4T2ZSZW1vdmVkTm9kZSA9IGxvY2FsT3B0aW1pemF0aW9uQ29ubmVjdGlvbnMuZmluZEluZGV4KChbcmVtb3RlQ29ubmVjdGlvbklkXSkgPT4gcmVtb3RlQ29ubmVjdGlvbklkID09PSBub2RlSWQpO1xuICAgICAgICBjb25zdCBub2RlVG9Db25uZWN0ID0gcmVtb3RlT3B0aW1pemF0aW9uQ29ubmVjdGlvbnNbaW5kZXhPZlJlbW92ZWROb2RlXTtcbiAgICAgICAgaWYgKCFub2RlVG9Db25uZWN0IHx8IHRoaXMubG9jYWxOb2RlLmdldFJlbW90ZUNvbm5lY3Rpb25zKCkuaGFzKG5vZGVUb0Nvbm5lY3RbMF0pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3UmVtb3RlTm9kZSA9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGUobm9kZVRvQ29ubmVjdFswXSk7XG4gICAgICAgIGlmICghbmV3UmVtb3RlTm9kZSB8fCBuZXdSZW1vdGVOb2RlLmdldFN0YXR1cygpID09PSBOb2RlU3RhdHVzLk9mZmxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25maWdzLm1lZGlhdG9yLmNyZWF0ZUNvbm5lY3Rpb24obm9kZVRvQ29ubmVjdFswXSwgUGVlckNvbm5lY3Rpb25UeXBlLk9wdGltaXphdGlvbik7XG4gICAgICAgICAgICBjb25zdCBsYXllciA9IEFycmF5LmZyb20odGhpcy5vcHRpbWl6YXRpb25MYXllcnMuZW50cmllcygpKS5maW5kKChbLCBpZF0pID0+IGlkID09PSBub2RlSWQpO1xuICAgICAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpbWl6YXRpb25MYXllcnMuc2V0KGxheWVyWzBdLCBub2RlVG9Db25uZWN0WzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTREtJbnRlcm5hbEVycm9yICYmIGUuY29kZSA9PT0gU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5SZW1vdGVDb25uZWN0aW9uRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuTm9kZSwgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgbm9kZVRvQ29ubmVjdFswXSwgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0T3V0Z29pbmdPcHRpbWl6YXRpb25Db25uZWN0aW9ucyhjb25uZWN0aW9ucywgbm9kZVJhbmspIHtcbiAgICAgICAgcmV0dXJuIEFycmF5XG4gICAgICAgICAgICAuZnJvbShjb25uZWN0aW9ucylcbiAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgcmVtb3RlQ29ubmVjdGlvbklkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZShyZW1vdGVDb25uZWN0aW9uSWQpO1xuICAgICAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUuZ2V0U3RhdHVzKCkgPT09IE5vZGVTdGF0dXMuT2ZmbGluZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByYW5rID0gbm9kZS5nZXRSYW5rKCk7XG4gICAgICAgICAgICBpZiAoIXJhbmspIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmFua0RpZmZlcmVuY2UgPSByYW5rIC0gbm9kZVJhbms7XG4gICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IGFuY2VzdG9ycywgc3VjY2Vzc29ycyBhbmQgaW5jb21pbmcgb3B0aW1pemF0aW9uIGNvbm5lY3Rpb25zXG4gICAgICAgICAgICBpZiAocmFua0RpZmZlcmVuY2UgPD0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0TWluQ29ubmVjdGlvbnMoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY2MucHVzaChbcmVtb3RlQ29ubmVjdGlvbklkLCByYW5rRGlmZmVyZW5jZV0pO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwgW10pXG4gICAgICAgICAgICAuc29ydCgoWywgcmFua0RpZmZlcmVuY2VBXSwgWywgcmFua0RpZmZlcmVuY2VCXSkgPT4gcmFua0RpZmZlcmVuY2VBIC0gcmFua0RpZmZlcmVuY2VCKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb2RlU3RhdHVzIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGUnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9BZ2VudCc7XG5leHBvcnQgY2xhc3MgUmVtb3RlQWdlbnQgZXh0ZW5kcyBBZ2VudCB7XG4gICAgY3VycmVudFZlcnNpb247XG4gICAgc3RhdHVzID0gTm9kZVN0YXR1cy5PbmxpbmU7XG4gICAgbGFzdFVwZGF0ZWQgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0cnVjdG9yKGlkLCByZW1vdGVDb25uZWN0aW9ucyA9IG5ldyBTZXQoKSwgY3VycmVudFZlcnNpb24sIHJhbmspIHtcbiAgICAgICAgc3VwZXIoaWQsIHJlbW90ZUNvbm5lY3Rpb25zLCByYW5rKTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmVyc2lvbiA9IGN1cnJlbnRWZXJzaW9uO1xuICAgIH1cbiAgICBnZXRDdXJyZW50VmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZlcnNpb247XG4gICAgfVxuICAgIGdldFN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzO1xuICAgIH1cbiAgICBnZXRMYXN0VXBkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdFVwZGF0ZWQ7XG4gICAgfVxuICAgIHNldFJhbmsocmFuaykge1xuICAgICAgICBpZiAodGhpcy5yYW5rID09PSByYW5rKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yYW5rID0gcmFuaztcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0VXBkYXRlZCgpO1xuICAgIH1cbiAgICBzZXRSZW1vdGVDb25uZWN0aW9ucyhyZW1vdGVDb25uZWN0aW9ucykge1xuICAgICAgICBsZXQgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IHJlbW90ZUNvbm5lY3Rpb24gb2YgdGhpcy5yZW1vdGVDb25uZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFyZW1vdGVDb25uZWN0aW9ucy5pbmNsdWRlcyhyZW1vdGVDb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuZGVsZXRlKHJlbW90ZUNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcmVtb3RlQ29ubmVjdGlvbiBvZiByZW1vdGVDb25uZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmhhcyhyZW1vdGVDb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuYWRkKHJlbW90ZUNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzQ2hhbmdlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFVwZGF0ZWQoKTtcbiAgICB9XG4gICAgc2V0Q3VycmVudFZlcnNpb24odmVyc2lvbikge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50VmVyc2lvbiA9PT0gdmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RVcGRhdGVkKCk7XG4gICAgfVxuICAgIHNldFN0YXR1cyhzdGF0dXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBzdGF0dXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0VXBkYXRlZCgpO1xuICAgICAgICBpZiAoc3RhdHVzID09PSBOb2RlU3RhdHVzLk9mZmxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVMYXN0VXBkYXRlZCgpIHtcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlZCA9IERhdGUubm93KCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZVN0YXR1cyB9IGZyb20gJ2ludGVyZmFjZXMvTm9kZS9Ob2RlJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICdtb2RlbHMvTm9kZS9Vc2VyJztcbmV4cG9ydCBjbGFzcyBSZW1vdGVVc2VyIGV4dGVuZHMgVXNlciB7XG4gICAgY3VycmVudFZlcnNpb247XG4gICAgc3RhdHVzID0gTm9kZVN0YXR1cy5PbmxpbmU7XG4gICAgbGFzdFVwZGF0ZWQgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0cnVjdG9yKGlkLCBkaXNwbGF5TmFtZSwgZW1haWwsIHJlbW90ZUNvbm5lY3Rpb25zID0gbmV3IFNldCgpLCBjdXJyZW50VmVyc2lvbiwgcmFuaykge1xuICAgICAgICBzdXBlcihpZCwgZGlzcGxheU5hbWUsIGVtYWlsLCByZW1vdGVDb25uZWN0aW9ucywgcmFuayk7XG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSBjdXJyZW50VmVyc2lvbjtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWZXJzaW9uO1xuICAgIH1cbiAgICBnZXRTdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgICB9XG4gICAgZ2V0TGFzdFVwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RVcGRhdGVkO1xuICAgIH1cbiAgICBzZXREaXNwbGF5TmFtZShkaXNwbGF5TmFtZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSA9PT0gZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFVwZGF0ZWQoKTtcbiAgICB9XG4gICAgc2V0RW1haWwoZW1haWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZW1haWwgPT09IGVtYWlsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsO1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RVcGRhdGVkKCk7XG4gICAgfVxuICAgIHNldFJhbmsocmFuaykge1xuICAgICAgICBpZiAodGhpcy5yYW5rID09PSByYW5rKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yYW5rID0gcmFuaztcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0VXBkYXRlZCgpO1xuICAgIH1cbiAgICBzZXRSZW1vdGVDb25uZWN0aW9ucyhyZW1vdGVDb25uZWN0aW9ucykge1xuICAgICAgICBsZXQgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IHJlbW90ZUNvbm5lY3Rpb24gb2YgdGhpcy5yZW1vdGVDb25uZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFyZW1vdGVDb25uZWN0aW9ucy5pbmNsdWRlcyhyZW1vdGVDb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuZGVsZXRlKHJlbW90ZUNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcmVtb3RlQ29ubmVjdGlvbiBvZiByZW1vdGVDb25uZWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmhhcyhyZW1vdGVDb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuYWRkKHJlbW90ZUNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzQ2hhbmdlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFVwZGF0ZWQoKTtcbiAgICB9XG4gICAgc2V0Q3VycmVudFZlcnNpb24odmVyc2lvbikge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50VmVyc2lvbiA9PT0gdmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RVcGRhdGVkKCk7XG4gICAgfVxuICAgIHNldFN0YXR1cyhzdGF0dXMpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBzdGF0dXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0VXBkYXRlZCgpO1xuICAgICAgICBpZiAoc3RhdHVzID09PSBOb2RlU3RhdHVzLk9mZmxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVMYXN0VXBkYXRlZCgpIHtcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlZCA9IERhdGUubm93KCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IE5vZGUgfSBmcm9tICdtb2RlbHMvTm9kZS9Ob2RlJztcbmV4cG9ydCBjbGFzcyBVc2VyIGV4dGVuZHMgTm9kZSB7XG4gICAgaWQ7XG4gICAgZGlzcGxheU5hbWU7XG4gICAgZW1haWw7XG4gICAgcmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgcmFuaztcbiAgICB0eXBlID0gTm9kZVR5cGUuVXNlcjtcbiAgICBjb25zdHJ1Y3RvcihpZCwgZGlzcGxheU5hbWUsIGVtYWlsLCByZW1vdGVDb25uZWN0aW9ucyA9IG5ldyBTZXQoKSwgcmFuaykge1xuICAgICAgICBzdXBlcihpZCwgcmVtb3RlQ29ubmVjdGlvbnMsIHJhbmspO1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsO1xuICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zID0gcmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgfVxuICAgIGdldERpc3BsYXlOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5TmFtZTtcbiAgICB9XG4gICAgZ2V0RW1haWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVtYWlsO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTREtDbGllbnRFcnJvciwgU0RLQ2xpZW50RXJyb3JDb2RlcyB9IGZyb20gJ3B1YmxpYy9lcnJvcnMvU0RLQ2xpZW50RXJyb3InO1xuaW1wb3J0IHsgRWFybHlSZXR1cm5FcnJvciB9IGZyb20gJ2Vycm9ycy9FYXJseVJldHVybkVycm9yJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IElJbnRlcm5hbEZlYXR1cmVzIH0gZnJvbSAnaW50ZXJmYWNlcy9TREsvU0RLJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQ29ubmVjdGlvbk1hbmFnZXIgfSBmcm9tICdtb2RlbHMvQ29ubmVjdGlvbi9Db25uZWN0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBDb250ZW50TWFuYWdlciB9IGZyb20gJ21vZGVscy9Db250ZW50L0NvbnRlbnRNYW5hZ2VyJztcbmltcG9ydCB7IERldGVjdGlvbk1hbmFnZXIgfSBmcm9tICdtb2RlbHMvRGV0ZWN0aW9uL0RldGVjdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgTG9jYWxBZ2VudCB9IGZyb20gJ21vZGVscy9Ob2RlL0xvY2FsQWdlbnQnO1xuaW1wb3J0IHsgTG9jYWxVc2VyIH0gZnJvbSAnbW9kZWxzL05vZGUvTG9jYWxVc2VyJztcbmltcG9ydCB7IE5vZGVNYW5hZ2VyIH0gZnJvbSAnbW9kZWxzL05vZGUvTm9kZU1hbmFnZXInO1xuaW1wb3J0IHsgUmVtZWRpYXRpb25NYW5hZ2VyIH0gZnJvbSAnbW9kZWxzL1JlbWVkaWF0aW9uL1JlbWVkaWF0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBTdGF0c01hbmFnZXIgfSBmcm9tICdtb2RlbHMvU3RhdHMvU3RhdHNNYW5hZ2VyJztcbmltcG9ydCB7IGlzU2VuZGVyIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9IZWxwZXJzJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbk1hbmFnZXIgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbVRvcGljIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9TeXN0ZW1Ub3BpYyc7XG5pbXBvcnQgeyBHcmFwaFNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlcy9HcmFwaC9HcmFwaFNlcnZpY2UnO1xuaW1wb3J0IHsgZ2V0Rm9ybWF0dGVkU3l0ZW1Mb2cgfSBmcm9tICd1dGlscy9Mb2dnZXIvSGVscGVycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIE9yY2hlc3RyYXRvciB7XG4gICAgdmVuZG9ySWQ7XG4gICAgY2x1c3RlcklkO1xuICAgIGF1dGhTZXJ2aWNlO1xuICAgIG9wdGlvbnM7XG4gICAgY29uZmlncztcbiAgICBjbHVzdGVyRXZlbnRFbWl0dGVyO1xuICAgIGNvbnRlbnRNYW5hZ2VyO1xuICAgIGNvbm5lY3Rpb25NYW5hZ2VyO1xuICAgIHN1YnNjcmlwdGlvbk1hbmFnZXI7XG4gICAgc3RhdHNNYW5hZ2VyO1xuICAgIGRldGVjdGlvbk1hbmFnZXI7XG4gICAgcmVtZWRpYXRpb25NYW5hZ2VyO1xuICAgIG5vZGVNYW5hZ2VyO1xuICAgIGdyYXBoU2VydmljZTtcbiAgICBzeXN0ZW1Ub3BpYyA9IG5ldyBTeXN0ZW1Ub3BpYygpO1xuICAgIHN5c3RlbVRvcGljVW5zdWJzY3JpYmU7XG4gICAgbG9jYWxOb2RlO1xuICAgIGNvbnN0cnVjdG9yKHZlbmRvcklkLCBjbHVzdGVySWQsIGF1dGhOb2RlLCBhdXRoU2VydmljZSwgb3B0aW9ucywgY29uZmlncywgY2x1c3RlckV2ZW50RW1pdHRlcikge1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlID0gYXV0aFNlcnZpY2U7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMuY2x1c3RlckV2ZW50RW1pdHRlciA9IGNsdXN0ZXJFdmVudEVtaXR0ZXI7XG4gICAgICAgIHN3aXRjaCAoYXV0aE5vZGUudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5Vc2VyOlxuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxOb2RlID0gbmV3IExvY2FsVXNlcihhdXRoTm9kZS5nZXRJZCgpLCBhdXRoTm9kZS5nZXREaXNwbGF5TmFtZSgpLCBhdXRoTm9kZS5nZXRFbWFpbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuQWdlbnQ6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxOb2RlID0gbmV3IExvY2FsQWdlbnQoYXV0aE5vZGUuZ2V0SWQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWFuYWdlckNvbmZpZ3MgPSB0aGlzLmdldENvbmZpZ3MoKTtcbiAgICAgICAgdGhpcy5ncmFwaFNlcnZpY2UgPSBuZXcgR3JhcGhTZXJ2aWNlKHRoaXMub3B0aW9ucy5taW5Db25uZWN0aW9ucywgdGhpcy5vcHRpb25zLm1heENvbm5lY3Rpb25zLCB0aGlzLm9wdGlvbnMubWF4RGlzdGFuY2UpO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyID0gbmV3IENvbnRlbnRNYW5hZ2VyKG1hbmFnZXJDb25maWdzLCB0aGlzLm9wdGlvbnMubWF4RnBzLCB0aGlzLm9wdGlvbnMuYXVkaW9Db250ZXh0KTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlciA9IG5ldyBDb25uZWN0aW9uTWFuYWdlcihtYW5hZ2VyQ29uZmlncywgdGhpcy5hdXRoU2VydmljZSwgdGhpcy5jb25maWdzLmljZVNlcnZlcnMsIHRoaXMub3B0aW9ucy5tYXhGcHMsIHRoaXMub3B0aW9ucy5tYXhCcHAsIHRoaXMuZ3JhcGhTZXJ2aWNlLCB0aGlzLm9wdGlvbnMucGVlckNvbm5lY3Rpb25Db25uZWN0b3IpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcihtYW5hZ2VyQ29uZmlncywgdGhpcy5vcHRpb25zLm1heE91dGdvaW5nU3Vic2NyaXB0aW9ucywgdGhpcy5ncmFwaFNlcnZpY2UuZ2V0TWF4RGlzdGFuY2UoKSk7XG4gICAgICAgIHRoaXMuc3RhdHNNYW5hZ2VyID0gbmV3IFN0YXRzTWFuYWdlcihtYW5hZ2VyQ29uZmlncyk7XG4gICAgICAgIHRoaXMuZGV0ZWN0aW9uTWFuYWdlciA9IG5ldyBEZXRlY3Rpb25NYW5hZ2VyKG1hbmFnZXJDb25maWdzKTtcbiAgICAgICAgdGhpcy5yZW1lZGlhdGlvbk1hbmFnZXIgPSBuZXcgUmVtZWRpYXRpb25NYW5hZ2VyKG1hbmFnZXJDb25maWdzKTtcbiAgICAgICAgdGhpcy5ub2RlTWFuYWdlciA9IG5ldyBOb2RlTWFuYWdlcihtYW5hZ2VyQ29uZmlncywgdGhpcy5ncmFwaFNlcnZpY2UsIHRoaXMubG9jYWxOb2RlKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpY1Vuc3Vic2NyaWJlID0gdGhpcy5pbml0aWFsaXplU3lzdGVtVG9waWMoKTtcbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgY29uc3QgbWFuYWdlckNvbmZpZ3MgPSB0aGlzLmdldENvbmZpZ3MoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlciA9IG5ldyBDb25uZWN0aW9uTWFuYWdlcihtYW5hZ2VyQ29uZmlncywgdGhpcy5hdXRoU2VydmljZSwgdGhpcy5jb25maWdzLmljZVNlcnZlcnMsIHRoaXMub3B0aW9ucy5tYXhGcHMsIHRoaXMub3B0aW9ucy5tYXhCcHAsIHRoaXMuZ3JhcGhTZXJ2aWNlLCB0aGlzLm9wdGlvbnMucGVlckNvbm5lY3Rpb25Db25uZWN0b3IpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIgPSBuZXcgU3Vic2NyaXB0aW9uTWFuYWdlcihtYW5hZ2VyQ29uZmlncywgdGhpcy5vcHRpb25zLm1heE91dGdvaW5nU3Vic2NyaXB0aW9ucywgdGhpcy5ncmFwaFNlcnZpY2UuZ2V0TWF4RGlzdGFuY2UoKSk7XG4gICAgICAgIHRoaXMuc3RhdHNNYW5hZ2VyID0gbmV3IFN0YXRzTWFuYWdlcihtYW5hZ2VyQ29uZmlncyk7XG4gICAgICAgIHRoaXMuZGV0ZWN0aW9uTWFuYWdlciA9IG5ldyBEZXRlY3Rpb25NYW5hZ2VyKG1hbmFnZXJDb25maWdzKTtcbiAgICAgICAgdGhpcy5yZW1lZGlhdGlvbk1hbmFnZXIgPSBuZXcgUmVtZWRpYXRpb25NYW5hZ2VyKG1hbmFnZXJDb25maWdzKTtcbiAgICAgICAgdGhpcy5ub2RlTWFuYWdlciA9IG5ldyBOb2RlTWFuYWdlcihtYW5hZ2VyQ29uZmlncywgdGhpcy5ncmFwaFNlcnZpY2UsIHRoaXMubG9jYWxOb2RlKTtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25Hcm91cCgpO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldFB1YlN1YlRvcGljcygpLmZvckVhY2goKHRvcGljKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24odG9waWMsIGNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVJbmNvbWluZ1N1YnNjcmlwdGlvbihjb25uZWN0aW9ucywgdG9waWMpO1xuICAgICAgICAgICAgdG9waWMucmVzZXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0T2JqZWN0U3RvcmVCdWNrZXRzKCkuZm9yRWFjaCgoYnVja2V0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24oYnVja2V0LCBjb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24oY29ubmVjdGlvbnMsIGJ1Y2tldCk7XG4gICAgICAgICAgICBidWNrZXQucmVzZXQoKTtcbiAgICAgICAgICAgIGJ1Y2tldC5zeW5jKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldEtleVZhbHVlRGF0YWJhc2VzKCkuZm9yRWFjaCgoZGF0YWJhc2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbihkYXRhYmFzZSwgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCBkYXRhYmFzZSk7XG4gICAgICAgICAgICBkYXRhYmFzZS5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zeW5jS2V5VmFsdWVEYXRhYmFzZShkYXRhYmFzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljVW5zdWJzY3JpYmUgPSB0aGlzLmluaXRpYWxpemVTeXN0ZW1Ub3BpYygpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVNvdXJjZShzb3VyY2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMucmVnaXN0ZXJTb3VyY2Uoc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVNvdXJjZShzb3VyY2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMudW5yZWdpc3RlclNvdXJjZShzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVDb25uZWN0aW9uKHJlbW90ZUlkLCBjb25uZWN0aW9uVHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uTWFuYWdlci5jcmVhdGVDb25uZWN0aW9uKHJlbW90ZUlkLCBjb25uZWN0aW9uVHlwZSk7XG4gICAgfVxuICAgIGdldENvbm5lY3Rpb24ocmVtb3RlSWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb24ocmVtb3RlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRDb25uZWN0aW9ucyhzdHJhdGVneSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbnMoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSZW1vdGVNZWRpYVN0cmVhbShyZW1vdGVJZCwgbGFiZWwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldFJlbW90ZU1lZGlhU3RyZWFtcygoc3RyZWFtKSA9PiBzdHJlYW0uZ2V0T3duZXJJZCgpID09PSByZW1vdGVJZCAmJiBzdHJlYW0uZ2V0TGFiZWwoKSA9PT0gbGFiZWwpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRMb2NhbE1lZGlhU3RyZWFtKGxhYmVsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TWFuYWdlci5nZXRMb2NhbE1lZGlhU3RyZWFtcygoc3RyZWFtKSA9PiBzdHJlYW0uZ2V0TGFiZWwoKSA9PT0gbGFiZWwpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBub3RpZnlDbHVzdGVyID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsdXN0ZXJFdmVudEVtaXR0ZXIuZW1pdCguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJlZ2lzdGVyUmVtb3RlTm9kZShub2RlSWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHNNYW5hZ2VyLmFkZFJlbW90ZU5vZGUobm9kZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5yZWdpc3RlclJlbW90ZU5vZGUobm9kZUlkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzTWFuYWdlci5yZW1vdmVSZW1vdGVOb2RlKG5vZGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbGxlY3RTdGF0cyhub2RlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuY29sbGVjdFN0YXRzKG5vZGVJZCk7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVJZHMgPSBhd2FpdCB0aGlzLm5vZGVNYW5hZ2VyLmRpc2NvdmVyKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGVJZCBvZiBub2RlSWRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5jcmVhdGVDb25uZWN0aW9uKG5vZGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVVzZXIodXNlcikge1xuICAgICAgICBpZiAodGhpcy5sb2NhbE5vZGUudHlwZSAhPT0gTm9kZVR5cGUuVXNlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubG9jYWxOb2RlLnNldEVtYWlsKHVzZXIuZ2V0RW1haWwoKSk7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlLnNldERpc3BsYXlOYW1lKHVzZXIuZ2V0RGlzcGxheU5hbWUoKSk7XG4gICAgfVxuICAgIGNsb3NlKHJlc2V0ID0gZmFsc2UpIHtcbiAgICAgICAgbG9nZ2VyLndhcm5pbmcoJ29yY2hlc3RyYXRvci1jbG9zZScsIHtcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWNVbnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLnJlbWVkaWF0aW9uTWFuYWdlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLmRldGVjdGlvbk1hbmFnZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5zdGF0c01hbmFnZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5jb250ZW50TWFuYWdlci5jbG9zZShyZXNldCk7XG4gICAgICAgIHRoaXMubm9kZU1hbmFnZXIuY2xvc2UoKTtcbiAgICB9XG4gICAgb3BlblB1YlN1YlRvcGljKGxhYmVsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwdWJTdWJEYXRhVG9waWMgPSB0aGlzLmNvbnRlbnRNYW5hZ2VyLmNyZWF0ZVB1YlN1YlRvcGljKGxhYmVsKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gdGhpcy5jb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uR3JvdXAoKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbihwdWJTdWJEYXRhVG9waWMsIGNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVJbmNvbWluZ1N1YnNjcmlwdGlvbihjb25uZWN0aW9ucywgcHViU3ViRGF0YVRvcGljKTtcbiAgICAgICAgICAgIHJldHVybiBwdWJTdWJEYXRhVG9waWM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9wZW5PYmplY3RTdG9yZUJ1Y2tldChsYWJlbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0aGlzLmNvbnRlbnRNYW5hZ2VyLmNyZWF0ZU9iamVjdFN0b3JlQnVja2V0KGxhYmVsLCB0aGlzLm9wdGlvbnMub2JqZWN0U3RvcmVDb25uZWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25Hcm91cCgpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uKG9iamVjdFN0b3JlLCBjb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24oY29ubmVjdGlvbnMsIG9iamVjdFN0b3JlKTtcbiAgICAgICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnN5bmMoKTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3RTdG9yZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb3BlbktleVZhbHVlRGF0YWJhc2UobGFiZWwsIGxheW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qga2V5VmFsdWVEYXRhYmFzZSA9IGF3YWl0IHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlS2V5VmFsdWVEYXRhYmFzZShsYWJlbCwgbGF5b3V0LCB0aGlzLm9wdGlvbnMua2V5VmFsdWVEYXRhYmFzZUNvbm5lY3Rvcik7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbkdyb3VwKCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24oa2V5VmFsdWVEYXRhYmFzZSwgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCBrZXlWYWx1ZURhdGFiYXNlKTtcbiAgICAgICAgICAgIGF3YWl0IGtleVZhbHVlRGF0YWJhc2Uub3BlbigpO1xuICAgICAgICAgICAgdGhpcy5zeW5jS2V5VmFsdWVEYXRhYmFzZShrZXlWYWx1ZURhdGFiYXNlKTtcbiAgICAgICAgICAgIHJldHVybiBrZXlWYWx1ZURhdGFiYXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRQdWJTdWJUb3BpY3Moc3RyYXRlZ3kpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldFB1YlN1YlRvcGljcyhzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE9iamVjdFN0b3JlQnVja2V0cyhzdHJhdGVneSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0T2JqZWN0U3RvcmVCdWNrZXRzKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0S2V5VmFsdWVEYXRhYmFzZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldEtleVZhbHVlRGF0YWJhc2VzKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlTG9jYWxNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlTG9jYWxNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVMb2NhbER5bmFtaWNNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0obGFiZWwsIG1lZGlhU291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TG9jYWxNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0TG9jYWxNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSZW1vdGVNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0UmVtb3RlTWVkaWFTdHJlYW1zKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0RGlzdGFuY2Uoc291cmNlSWQsIHJlbW90ZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVNYW5hZ2VyLmdldERpc3RhbmNlKHNvdXJjZUlkLCByZW1vdGVJZCk7XG4gICAgfVxuICAgIGdldExvY2FsTm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZU1hbmFnZXIuZ2V0TG9jYWxOb2RlKCk7XG4gICAgfVxuICAgIGdldFJlbW90ZU5vZGVzKHN0cmF0ZWd5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlTWFuYWdlci5nZXRSZW1vdGVOb2RlcyhzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRXZlbnRzLCAnT3JjaGVzdHJhdG9yIGhhbmRsZVN5c3RlbUV2ZW50cycsIHRoaXMubm9kZU1hbmFnZXIuZ2V0TG9jYWxJZCgpLCBldmVudCk7XG4gICAgICAgICAgICBpZiAoaXNTZW5kZXIoZXZlbnQsIHRoaXMubm9kZU1hbmFnZXIuZ2V0TG9jYWxJZCgpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuaGFuZGxlT3V0Z29pbmdTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQubWVzc2FnZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHNNYW5hZ2VyLmhhbmRsZUNvbnRlbnRTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuaGFuZGxlQ29udGVudFN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudE1hbmFnZXIuaGFuZGxlQ29udGVudFN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgU3lzdGVtTWVzc2FnZVR5cGUuTm9kZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmhhbmRsZU5vZGVTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmhhbmRsZU5vZGVTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmhhbmRsZU5vZGVTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVNYW5hZ2VyLmhhbmRsZU5vZGVTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFN5c3RlbU1lc3NhZ2VUeXBlLkRldGVjdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1lZGlhdGlvbk1hbmFnZXIuaGFuZGxlRGV0ZWN0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTeXN0ZW1NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1lZGlhdGlvbk1hbmFnZXIuaGFuZGxlUmVtZWRpYXRpb25TeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFN5c3RlbU1lc3NhZ2VUeXBlLlN0YXRzOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGVjdGlvbk1hbmFnZXIuaGFuZGxlU3RhdHNTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFN5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRlbnQudHlwZSAhPT0gU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuVW5zdWJzY3JpYmVNZWRpYVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuaGFuZGxlU3Vic2NyaXB0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmhhbmRsZVBlZXJDb25uZWN0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0c01hbmFnZXIuaGFuZGxlUGVlckNvbm5lY3Rpb25TeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVNYW5hZ2VyLmhhbmRsZVBlZXJDb25uZWN0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmhhbmRsZVBlZXJDb25uZWN0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUVycm9yKGVycm9yLCBjb250ZXh0KSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVhcmx5UmV0dXJuRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBTREtDbGllbnRFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkludGVybmFsU0RLRXJyb3IsIGBJbnRlcm5hbCB1bmtub3duIGVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGVycm9yIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkludGVybmFsU0RLRXJyb3IsIGBJbnRlcm5hbCBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgY2FzZSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLk1pc3NpbmdTeXN0ZW1Ub3BpYzpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5NaXNzaW5nUmVtb3RlQ29ubmVjdGlvbjpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5QZWVyQ29ubmVjdGlvbkludmFsaWREZXN0aW5hdGlvbjpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Db25uZWN0aW9uTm90aW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuQ29ubmVjdGlvbk5vdENvbm5lY3RlZDpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkRGF0YUNoYW5uZWw6XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFB1Ymxpc2hlcjpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkU3Vic2NyaWJlcjpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0RG9lc05vdEV4aXN0OlxuICAgICAgICAgICAgY2FzZSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLlN1YnNjcmlwdGlvblJlcXVlc3RGYWlsZWQ6XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdE5vQW5zd2VyOlxuICAgICAgICAgICAgY2FzZSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLkludmFsaWRTdWJzY3JpcHRpb246XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgc2RrLWludGVybmFsLWVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwge1xuICAgICAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIH0sIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5JbnRlcm5hbFNES0Vycm9yLCBgSW50ZXJuYWwgU0RLIGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q29uZmlncygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lZGlhdG9yOiB0aGlzLFxuICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgbG9jYWxOb2RlOiB0aGlzLmxvY2FsTm9kZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaW5pdGlhbGl6ZVN5c3RlbVRvcGljKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeXN0ZW1Ub3BpYy5zdWJzY3JpYmUoKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRTeXN0ZW1Mb2cgPSBnZXRGb3JtYXR0ZWRTeXRlbUxvZyhldmVudCwgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSk7XG4gICAgICAgICAgICBjb25zdCBsb2dnaW5nQ2x1c3RlciA9IGV2ZW50Lm1lc3NhZ2VUeXBlID09PSBTeXN0ZW1NZXNzYWdlVHlwZS5TdGF0c1xuICAgICAgICAgICAgICAgIHx8IGV2ZW50Lm1lc3NhZ2VUeXBlID09PSBTeXN0ZW1NZXNzYWdlVHlwZS5QZWVyQ29ubmVjdGlvbiAmJiBldmVudC5jb250ZW50LnR5cGUgPT09IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuU3RhdHNcbiAgICAgICAgICAgICAgICA/IExvZ2dpbmdDaGFubmVscy5TeXN0ZW1TdGF0c1xuICAgICAgICAgICAgICAgIDogTG9nZ2luZ0NoYW5uZWxzLlN5c3RlbTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dSYXcobG9nZ2luZ0NsdXN0ZXIsIGAke2V2ZW50LnV1aWR9IC0gJHtmb3JtYXR0ZWRTeXN0ZW1Mb2d9YCwgZXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTeXN0ZW1FdmVudHMoZXZlbnQpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyAtIG5lZWQgdG8gdHJhY2sgd2hlcmUgdGhpcyBlcnJvciBjb21lcyBmcm9tXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc3luY0tleVZhbHVlRGF0YWJhc2Uoa2V5VmFsdWVEYXRhYmFzZSwgYW5jZXN0b3IpIHtcbiAgICAgICAgY29uc3QgdGltZW91dENhbGxiYWNrID0gKCkgPT4gdGhpcy5zeW5jS2V5VmFsdWVEYXRhYmFzZShrZXlWYWx1ZURhdGFiYXNlLCBhbmNlc3Rvcik7XG4gICAgICAgIGFuY2VzdG9yID0gdGhpcy5maW5kTmV4dEFuY2VzdG9yKGFuY2VzdG9yKTtcbiAgICAgICAgYXdhaXQga2V5VmFsdWVEYXRhYmFzZS5zeW5jKGFuY2VzdG9yLCB0aW1lb3V0Q2FsbGJhY2spO1xuICAgIH1cbiAgICBmaW5kTmV4dEFuY2VzdG9yKGFuY2VzdG9yKSB7XG4gICAgICAgIGNvbnN0IGFuY2VzdG9ycyA9IHRoaXMubm9kZU1hbmFnZXIuZ2V0QW5jZXN0b3JJZHMoKTtcbiAgICAgICAgaWYgKCFhbmNlc3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGFuY2VzdG9yc1swXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IGFuY2VzdG9ycy5maW5kSW5kZXgoKGlkKSA9PiBhbmNlc3RvciA9PT0gaWQpO1xuICAgICAgICBjb25zdCBuZXdBbmNlc3RvciA9IGFuY2VzdG9yc1tpbmRleCArIDFdO1xuICAgICAgICBpZiAoYW5jZXN0b3JzLmxlbmd0aCA+IDAgJiYgIW5ld0FuY2VzdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gYW5jZXN0b3JbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0FuY2VzdG9yO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENPTlRFTlRfTUFYX0hFSUdIVCwgQ09OVEVOVF9NQVhfV0lEVEggfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBSRU1FRElBVElPTl9NQVhfUkVTT0xVVElPTl9TQ0FMRSwgUkVNRURJQVRJT05fTUlOX0ZQUywgUkVNRURJQVRJT05fTUlOX0JJVFJBVEUsIFJFTUVESUFUSU9OX1JFU09MVVRJT05fU0NBTEUsIFJFTUVESUFUSU9OX0ZQUywgUkVNRURJQVRJT05fQklUUkFURSB9IGZyb20gJ2NvbnN0YW50cy9SZW1lZGlhdGlvbic7XG5pbXBvcnQgeyBSZW1lZGlhdGlvbkFjdGlvbiwgUmVtZWRpYXRpb25Db21wb25lbnQgfSBmcm9tICdpbnRlcmZhY2VzL1JlbWVkaWF0aW9uL1JlbWVkaWF0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBmaW5kU2VuZGVyKHNlbmRlcnMsIHJlbWVkaWF0aW9uKSB7XG4gICAgY29uc3Qgc29ydGVkU2VuZGVycyA9IHNlbmRlcnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAocmVtZWRpYXRpb24uYWN0aW9uID09PSBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHNvcnRlZFNlbmRlcnMuZmluZCgoc2VuZGVyKSA9PiB7XG4gICAgICAgIHJldHVybiBjYW5SZW1lZGlhdGUoc2VuZGVyLCByZW1lZGlhdGlvbik7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlSZW1lZGlhdGlvbihzZW5kZXJNYXAsIHJlbWVkaWF0aW9uKSB7XG4gICAgaWYgKHNlbmRlck1hcC50cmFja3MudmlkZW8gJiYgc2VuZGVyTWFwLnRyYWNrcy52aWRlby5zZW5kZXIpIHtcbiAgICAgICAgc2VuZGVyTWFwLnJlc29sdXRpb25TY2FsZSA9IGdldFJlc29sdXRpb25TY2FsZShzZW5kZXJNYXAucmVzb2x1dGlvblNjYWxlLCBzZW5kZXJNYXAubWluUmVzb2x1dGlvblNjYWxlLCByZW1lZGlhdGlvbik7XG4gICAgICAgIHNlbmRlck1hcC5mcmFtZXJhdGUgPSBnZXRGcmFtZXJhdGUoc2VuZGVyTWFwLmZyYW1lcmF0ZSwgc2VuZGVyTWFwLm1heEZyYW1lcmF0ZSwgcmVtZWRpYXRpb24pO1xuICAgICAgICBzZW5kZXJNYXAuYml0cmF0ZSA9IGdldEJpdHJhdGUoc2VuZGVyTWFwLmJpdHJhdGUsIHNlbmRlck1hcC5tYXhCaXRyYXRlLCByZW1lZGlhdGlvbik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1heEJpdHJhdGUoZnBzLCBicHApIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihDT05URU5UX01BWF9XSURUSCAqIENPTlRFTlRfTUFYX0hFSUdIVCAqIGZwcyAqIGJwcCk7XG59XG5mdW5jdGlvbiBnZXRSZXNvbHV0aW9uU2NhbGUocmVzb2x1dGlvblNjYWxlLCBtaW5SZXNvbHV0aW9uU2NhbGUsIHJlbWVkaWF0aW9uKSB7XG4gICAgc3dpdGNoIChyZW1lZGlhdGlvbi5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGU6XG4gICAgICAgICAgICBpZiAocmVtZWRpYXRpb24uY29tcG9uZW50ID09PSBSZW1lZGlhdGlvbkNvbXBvbmVudC5SZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvblNjYWxlICs9IFJFTUVESUFUSU9OX1JFU09MVVRJT05fU0NBTEU7XG4gICAgICAgICAgICAgICAgaWYgKHJlc29sdXRpb25TY2FsZSA+IFJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25TY2FsZSA9IFJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJlbWVkaWF0aW9uQWN0aW9uLlVwZ3JhZGU6XG4gICAgICAgICAgICByZXNvbHV0aW9uU2NhbGUgLT0gUkVNRURJQVRJT05fUkVTT0xVVElPTl9TQ0FMRTtcbiAgICAgICAgICAgIGlmIChyZXNvbHV0aW9uU2NhbGUgPCBtaW5SZXNvbHV0aW9uU2NhbGUpIHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uU2NhbGUgPSBtaW5SZXNvbHV0aW9uU2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHJlc29sdXRpb25TY2FsZTtcbn1cbmZ1bmN0aW9uIGdldEZyYW1lcmF0ZShmcmFtZXJhdGUsIG1heEZyYW1lcmF0ZSwgcmVtZWRpYXRpb24pIHtcbiAgICBzd2l0Y2ggKHJlbWVkaWF0aW9uLmFjdGlvbikge1xuICAgICAgICBjYXNlIFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZTpcbiAgICAgICAgICAgIGlmIChyZW1lZGlhdGlvbi5jb21wb25lbnQgPT09IFJlbWVkaWF0aW9uQ29tcG9uZW50LlJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICBmcmFtZXJhdGUgLT0gUkVNRURJQVRJT05fRlBTO1xuICAgICAgICAgICAgICAgIGlmIChmcmFtZXJhdGUgPCBSRU1FRElBVElPTl9NSU5fRlBTKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYW1lcmF0ZSA9IFJFTUVESUFUSU9OX01JTl9GUFM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVtZWRpYXRpb25BY3Rpb24uVXBncmFkZTpcbiAgICAgICAgICAgIGZyYW1lcmF0ZSArPSBSRU1FRElBVElPTl9GUFM7XG4gICAgICAgICAgICBpZiAoZnJhbWVyYXRlID4gbWF4RnJhbWVyYXRlKSB7XG4gICAgICAgICAgICAgICAgZnJhbWVyYXRlID0gbWF4RnJhbWVyYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBmcmFtZXJhdGU7XG59XG5mdW5jdGlvbiBnZXRCaXRyYXRlKGJpdHJhdGUsIG1heEJpdHJhdGUsIHJlbWVkaWF0aW9uKSB7XG4gICAgc3dpdGNoIChyZW1lZGlhdGlvbi5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGU6XG4gICAgICAgICAgICBpZiAocmVtZWRpYXRpb24uY29tcG9uZW50ID09PSBSZW1lZGlhdGlvbkNvbXBvbmVudC5CaXRyYXRlKSB7XG4gICAgICAgICAgICAgICAgYml0cmF0ZSAqPSAoMSAtIFJFTUVESUFUSU9OX0JJVFJBVEUpO1xuICAgICAgICAgICAgICAgIGlmIChiaXRyYXRlIDwgUkVNRURJQVRJT05fTUlOX0JJVFJBVEUpIHtcbiAgICAgICAgICAgICAgICAgICAgYml0cmF0ZSA9IFJFTUVESUFUSU9OX01JTl9CSVRSQVRFO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJlbWVkaWF0aW9uQWN0aW9uLlVwZ3JhZGU6XG4gICAgICAgICAgICBiaXRyYXRlICo9ICgxICsgUkVNRURJQVRJT05fQklUUkFURSk7XG4gICAgICAgICAgICBpZiAoYml0cmF0ZSA+IG1heEJpdHJhdGUpIHtcbiAgICAgICAgICAgICAgICBiaXRyYXRlID0gbWF4Qml0cmF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gYml0cmF0ZTtcbn1cbmZ1bmN0aW9uIGNhblJlbWVkaWF0ZShzZW5kZXJNYXAsIHJlbWVkaWF0aW9uKSB7XG4gICAgaWYgKHJlbWVkaWF0aW9uLmFjdGlvbiA9PT0gUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlKSB7XG4gICAgICAgIGlmIChyZW1lZGlhdGlvbi5jb21wb25lbnQgPT09IFJlbWVkaWF0aW9uQ29tcG9uZW50LlJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBzZW5kZXJNYXAucmVzb2x1dGlvblNjYWxlIDwgUkVNRURJQVRJT05fTUFYX1JFU09MVVRJT05fU0NBTEUgfHwgc2VuZGVyTWFwLm1heEZyYW1lcmF0ZSA+IFJFTUVESUFUSU9OX01JTl9GUFM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbWVkaWF0aW9uLmNvbXBvbmVudCA9PT0gUmVtZWRpYXRpb25Db21wb25lbnQuQml0cmF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbmRlck1hcC5tYXhCaXRyYXRlID4gUkVNRURJQVRJT05fTUlOX0JJVFJBVEU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNlbmRlck1hcC5yZXNvbHV0aW9uU2NhbGUgPiBzZW5kZXJNYXAubWluUmVzb2x1dGlvblNjYWxlIHx8IHNlbmRlck1hcC5mcmFtZXJhdGUgPCBzZW5kZXJNYXAubWF4RnJhbWVyYXRlIHx8IHNlbmRlck1hcC5iaXRyYXRlIDwgc2VuZGVyTWFwLm1heEJpdHJhdGU7XG59XG4iLCJpbXBvcnQgeyBSRU1FRElBVElPTl9ET1dOR1JBREVfV0FJVF9USU1FIH0gZnJvbSAnY29uc3RhbnRzL1JlbWVkaWF0aW9uJztcbmltcG9ydCB7IFJFTUVESUFUSU9OX1JVTEVTIH0gZnJvbSAnY29uc3RhbnRzL1JlbWVkaWF0aW9uUnVsZXMnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk9yaWdpbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBEZXRlY3Rpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvRGV0ZWN0aW9uL0RldGVjdGlvbic7XG5pbXBvcnQgeyBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9SZW1lZGlhdGlvbi9SZW1lZGlhdGlvbic7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgUmVtZWRpYXRpb25NYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGxhc3RSZW1lZGlhdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3RydWN0b3IoY29uZmlncykge1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcyk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICBoYW5kbGVEZXRlY3Rpb25TeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgRGV0ZWN0aW9uTWVzc2FnZVR5cGUuUHJvYmxlbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVByb2JsZW0oZXZlbnQuY29udGVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVSZW1lZGlhdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbW90ZVJlbWVkaWF0aW9uOlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlSZW1lZGlhdGlvbihldmVudC5zb3VyY2VJZCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IGV2ZW50LmNvbnRlbnQuZGF0YS5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZXZlbnQuY29udGVudC5kYXRhLmFjdGlvbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVQcm9ibGVtKHByb2JsZW0pIHtcbiAgICAgICAgY29uc3QgcnVsZSA9IFJFTUVESUFUSU9OX1JVTEVTLmZpbmQoKHIpID0+IHIucHJvYmxlbVR5cGUgPT09IHByb2JsZW0udHlwZSk7XG4gICAgICAgIHJ1bGUucmVtZWRpYXRpb25zPy5mb3JFYWNoKChyZW1lZGlhdGlvbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHBseVJlbWVkaWF0aW9uKHByb2JsZW0ubm9kZUlkLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogKHByb2JsZW0ub3JpZ2luID09PSBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIpID8gUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbiA6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtb3RlUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiByZW1lZGlhdGlvbi5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiByZW1lZGlhdGlvbi5hY3Rpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFwcGx5UmVtZWRpYXRpb24obm9kZUlkLCByZW1lZGlhdGlvbikge1xuICAgICAgICBpZiAocmVtZWRpYXRpb24udHlwZSA9PT0gUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbikge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RSZW1lZGlhdGlvbiA9IHRoaXMubGFzdFJlbWVkaWF0aW9ucy5nZXQobm9kZUlkKTtcbiAgICAgICAgICAgIGlmIChsYXN0UmVtZWRpYXRpb24gJiYgKG5vdyAtIGxhc3RSZW1lZGlhdGlvbikgPCBSRU1FRElBVElPTl9ET1dOR1JBREVfV0FJVF9USU1FKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0UmVtZWRpYXRpb25zLnNldChub2RlSWQsIG5vdyk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuUmVtZWRpYXRpb24sICdBcHBseSByZW1lZGlhdGlvbicsIHJlbWVkaWF0aW9uKTtcbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdyZW1lZGlhdGlvbicsIHtcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jb25maWdzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIHJlbW90ZUlkOiBub2RlSWQsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogcmVtZWRpYXRpb24udHlwZSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IHJlbWVkaWF0aW9uLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhY3Rpb246IHJlbWVkaWF0aW9uLmFjdGlvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc291cmNlSWQgPSBTWVNURU1fVE9QSUNfSU5URVJOQUw7XG4gICAgICAgIGxldCBkZXN0aW5hdGlvbklkcztcbiAgICAgICAgaWYgKHJlbWVkaWF0aW9uLnR5cGUgPT09IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtb3RlUmVtZWRpYXRpb24pIHtcbiAgICAgICAgICAgIHNvdXJjZUlkID0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpO1xuICAgICAgICAgICAgZGVzdGluYXRpb25JZHMgPSBbbm9kZUlkXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQsXG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkcyxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZW1lZGlhdGlvbi50eXBlLFxuICAgICAgICAgICAgICAgIHRhcmdldElkOiBub2RlSWQsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVtZWRpYXRpb24sXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGRvYywgZ2V0RG9jIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGh0dHBzQ2FsbGFibGUgfSBmcm9tICdmaXJlYmFzZS9mdW5jdGlvbnMnO1xuaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IE9QRlNPYmplY3RTdG9yZUNvbm5lY3RvciB9IGZyb20gJ0BjcmV3ZGxlL21pc3QtY29ubmVjdG9yLW9wZnMnO1xuaW1wb3J0IHsgSURCRGF0YWJhc2VDb25uZWN0b3IgfSBmcm9tICdAY3Jld2RsZS9taXN0LWNvbm5lY3Rvci1pbmRleGVkLWRiJztcbmltcG9ydCB7IFdlYlJUQ0Jyb3dzZXJQZWVyQ29ubmVjdGlvbkNvbm5lY3RvciB9IGZyb20gJ0BjcmV3ZGxlL21pc3QtY29ubmVjdG9yLXdlYnJ0Yy1icm93c2VyJztcbmltcG9ydCB7IFNES0NsaWVudEVycm9yLCBTREtDbGllbnRFcnJvckNvZGVzIH0gZnJvbSAncHVibGljL2Vycm9ycy9TREtDbGllbnRFcnJvcic7XG5pbXBvcnQgeyBDT05ORUNUSU9OX01BWCwgQ09OTkVDVElPTl9NSU4gfSBmcm9tICdjb25zdGFudHMvQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBDT05URU5UX0JQUCwgQ09OVEVOVF9GUFMgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBOT0RFX0RJU1RBTkNFX01BWCB9IGZyb20gJ2NvbnN0YW50cy9Ob2RlJztcbmltcG9ydCB7IFNVQlNDUklQVElPTl9NQVhfT1VUR09JTkcgfSBmcm9tICdjb25zdGFudHMvU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IFN1cHBvcnRGZWF0dXJlTmFtZSB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvU3VwcG9ydCc7XG5pbXBvcnQgeyBDbHVzdGVyIH0gZnJvbSAnbW9kZWxzL0NsdXN0ZXIvQ2x1c3Rlcic7XG5pbXBvcnQgeyBBdXRoQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9BdXRoQWdlbnQnO1xuaW1wb3J0IHsgQXV0aFVzZXIgfSBmcm9tICdtb2RlbHMvTm9kZS9BdXRoVXNlcic7XG5pbXBvcnQgeyBGaXJlYmFzZUF1dGhTZXJ2aWNlIH0gZnJvbSAnc2VydmljZXMvQXV0aC9GaXJlYmFzZUF1dGhTZXJ2aWNlJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdzZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgc3VwcG9ydCBmcm9tICd1dGlscy9TdXBwb3J0L1N1cHBvcnQnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tICdlbnZpcm9ubWVudHMvRW52aXJvbm1lbnQnO1xuZXhwb3J0IGNsYXNzIFNESyB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIGF1dGhTZXJ2aWNlO1xuICAgIHZlbmRvcklkO1xuICAgIG9wdGlvbnM7XG4gICAgY29uZmlncztcbiAgICBjbHVzdGVycyA9IG5ldyBNYXAoKTtcbiAgICBhdXRoQ29udGV4dDtcbiAgICB1bnN1YnNjcmliZTtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY29uZmlncywgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UgPSBuZXcgRmlyZWJhc2VBdXRoU2VydmljZSh0aGlzLnZlbmRvcklkKTtcbiAgICAgICAgc3VwcG9ydC5pbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGF1ZGlvQ29udGV4dDogb3B0aW9ucz8uYXVkaW9Db250ZXh0ID8/IChzdXBwb3J0LmlzRmVhdHVyZVN1cHBvcnRlZChTdXBwb3J0RmVhdHVyZU5hbWUuQXVkaW9Db250ZXh0KSAmJiBuZXcgQXVkaW9Db250ZXh0KCkgfHwgdW5kZWZpbmVkKSxcbiAgICAgICAgICAgIG1heE91dGdvaW5nU3Vic2NyaXB0aW9uczogb3B0aW9ucz8ubWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zID8/IFNVQlNDUklQVElPTl9NQVhfT1VUR09JTkcsXG4gICAgICAgICAgICBtaW5Db25uZWN0aW9uczogb3B0aW9ucz8ubWluQ29ubmVjdGlvbnMgPz8gQ09OTkVDVElPTl9NSU4sXG4gICAgICAgICAgICBtYXhDb25uZWN0aW9uczogb3B0aW9ucz8ubWF4Q29ubmVjdGlvbnMgPz8gKG9wdGlvbnM/Lm1pbkNvbm5lY3Rpb25zICYmIDQgKiBvcHRpb25zLm1pbkNvbm5lY3Rpb25zKSA/PyBDT05ORUNUSU9OX01BWCxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiBvcHRpb25zPy5tYXhEaXN0YW5jZSA/PyBOT0RFX0RJU1RBTkNFX01BWCxcbiAgICAgICAgICAgIG1heEZwczogb3B0aW9ucz8ubWF4RnBzID8/IENPTlRFTlRfRlBTLFxuICAgICAgICAgICAgbWF4QnBwOiBvcHRpb25zPy5tYXhCcHAgPz8gQ09OVEVOVF9CUFAsXG4gICAgICAgICAgICBvYmplY3RTdG9yZUNvbm5lY3Rvcjogb3B0aW9ucz8ub2JqZWN0U3RvcmVDb25uZWN0b3IgPz8gT1BGU09iamVjdFN0b3JlQ29ubmVjdG9yLFxuICAgICAgICAgICAga2V5VmFsdWVEYXRhYmFzZUNvbm5lY3Rvcjogb3B0aW9ucz8ua2V5VmFsdWVEYXRhYmFzZUNvbm5lY3RvciA/PyBJREJEYXRhYmFzZUNvbm5lY3RvcixcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uQ29ubmVjdG9yOiBvcHRpb25zPy5wZWVyQ29ubmVjdGlvbkNvbm5lY3RvciA/PyBXZWJSVENCcm93c2VyUGVlckNvbm5lY3Rpb25Db25uZWN0b3IsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zPy5kaXNhYmxlSW50ZXJ2YWxIYWNrICYmIHRoaXMub3B0aW9ucy5hdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIGludGVydmFsLnN0YXJ0Tm9UaHJvdHRsaW5nSGFjayh0aGlzLm9wdGlvbnMuYXVkaW9Db250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuc2V0VmVuZG9ySWQodGhpcy52ZW5kb3JJZCk7XG4gICAgICAgIGlmIChvcHRpb25zPy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgbG9nZ2VyLnNldExvZ2dpbmdDb25uZWN0b3JzKG9wdGlvbnMubG9nZ2luZ0Nvbm5lY3RvcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBnZXRJbnN0YW5jZSh2ZW5kb3JJZCwgYWNjZXNzVG9rZW4sIG9wdGlvbnMsIHNlY3JldEtleSkge1xuICAgICAgICBjb25zdCBjb25maWdzID0gYXdhaXQgdGhpcy52YWxpZGF0ZUFjY2Vzcyh2ZW5kb3JJZCwgYWNjZXNzVG9rZW4sIHNlY3JldEtleSk7XG4gICAgICAgIGlmICghU0RLLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBTREsuaW5zdGFuY2UgPSBuZXcgU0RLKHZlbmRvcklkLCBjb25maWdzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvc2U6IFNESy5pbnN0YW5jZS5jbG9zZS5iaW5kKFNESy5pbnN0YW5jZSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyOiBTREsuaW5zdGFuY2UuYXV0aGVudGljYXRlVXNlci5iaW5kKFNESy5pbnN0YW5jZSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGVBZ2VudDogU0RLLmluc3RhbmNlLmF1dGhlbnRpY2F0ZUFnZW50LmJpbmQoU0RLLmluc3RhbmNlKSxcbiAgICAgICAgICAgIGpvaW5DbHVzdGVyOiBTREsuaW5zdGFuY2Uuam9pbkNsdXN0ZXIuYmluZChTREsuaW5zdGFuY2UpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgdGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gZmlyZWJhc2UuZ2V0RXN0aW1hdGVkVGltZXN0YW1wKCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc1Byb2R1Y3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBFbnZpcm9ubWVudC5pc1Byb2R1Y3Rpb247XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNsdXN0ZXJzLmZvckVhY2goKGNsdXN0ZXIpID0+IHtcbiAgICAgICAgICAgIGNsdXN0ZXIub2ZmKCk7XG4gICAgICAgICAgICBjbHVzdGVyLmxlYXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNsdXN0ZXJzLmNsZWFyKCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICBpbnRlcnZhbC5zdG9wTm9UaHJvdHRsaW5nSGFjaygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmU/LigpO1xuICAgICAgICB0aGlzLmF1dGhDb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICBhd2FpdCB0aGlzLmF1dGhTZXJ2aWNlLnNpZ25PdXQoKTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIHZhbGlkYXRlQWNjZXNzKHZlbmRvcklkLCBhY2Nlc3NUb2tlbiwgc2VjcmV0S2V5KSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZ3MgPSBhd2FpdCBodHRwc0NhbGxhYmxlKGZpcmViYXNlLmdldEZ1bmN0aW9ucygpLCAnc2RrVmFsaWRhdGVBY2Nlc3MnKSh7XG4gICAgICAgICAgICB2ZW5kb3JJZCxcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGNvbmZpZ3MuZGF0YTtcbiAgICAgICAgaWYgKCFkYXRhLmZlYXR1cmVzKSB7XG4gICAgICAgICAgICBkYXRhLmZlYXR1cmVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGFzeW5jIGF1dGhlbnRpY2F0ZVVzZXIoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoU2VydmljZS5zaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFscyk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgQXV0aFVzZXIoY3JlZGVudGlhbHMuaWQsIGNyZWRlbnRpYWxzLmRpc3BsYXlOYW1lLCBjcmVkZW50aWFscy5lbWFpbCk7XG4gICAgICAgIHRoaXMuYXV0aENvbnRleHQgPSB7XG4gICAgICAgICAgICBub2RlOiB1c2VyLFxuICAgICAgICB9O1xuICAgICAgICBzdXBwb3J0LmxvZ1N1cHBvcnQodXNlcik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5Vc2VyLFxuICAgICAgICAgICAgZ2V0SWQ6IHVzZXIuZ2V0SWQuYmluZCh1c2VyKSxcbiAgICAgICAgICAgIGdldERpc3BsYXlOYW1lOiB1c2VyLmdldERpc3BsYXlOYW1lLmJpbmQodXNlciksXG4gICAgICAgICAgICBnZXRFbWFpbDogdXNlci5nZXRFbWFpbC5iaW5kKHVzZXIpLFxuICAgICAgICAgICAgc2V0RGlzcGxheU5hbWU6IHVzZXIuc2V0RGlzcGxheU5hbWUuYmluZCh1c2VyKSxcbiAgICAgICAgICAgIHNldEVtYWlsOiB1c2VyLnNldEVtYWlsLmJpbmQodXNlciksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGF1dGhlbnRpY2F0ZUFnZW50KGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGdyb3VwSWQgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICBjb25zdCBhZ2VudERvYyA9IGF3YWl0IGdldERvYyhkb2MoZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGBkZXZlbG9wZXJzLyR7dGhpcy52ZW5kb3JJZH0vcmVzb3VyY2VzL2FnZW50L2l0ZW1zLyR7Z3JvdXBJZH1gKSk7XG4gICAgICAgIGlmICghYWdlbnREb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk5vZGVOb3RBdXRoZW50aWNhdGVkLCAnQWdlbnQgZ3JvdXAgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWdlbnRDb25maWcgPSBhZ2VudERvYy5kYXRhKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aFNlcnZpY2Uuc2lnbkluV2l0aENyZWRlbnRpYWwoe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhZ2VudCA9IG5ldyBBdXRoQWdlbnQoaWQsIGdyb3VwSWQsIHRoaXMudmVuZG9ySWQsIGFnZW50Q29uZmlnKTtcbiAgICAgICAgdGhpcy5hdXRoQ29udGV4dCA9IHtcbiAgICAgICAgICAgIG5vZGU6IGFnZW50LFxuICAgICAgICB9O1xuICAgICAgICBzdXBwb3J0LmxvZ1N1cHBvcnQoYWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3RBZ2VudChhZ2VudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5BZ2VudCxcbiAgICAgICAgICAgIGdldElkOiBhZ2VudC5nZXRJZC5iaW5kKGFnZW50KSxcbiAgICAgICAgICAgIG9uQ29uZmlndXJhdGlvbkNoYW5nZTogYWdlbnQub25Db25maWd1cmF0aW9uQ2hhbmdlLmJpbmQoYWdlbnQpLFxuICAgICAgICAgICAgc2V0UmVwb3J0Q2FwYWNpdHk6IGFnZW50LnNldFJlcG9ydENhcGFjaXR5LmJpbmQoYWdlbnQpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBqb2luQ2x1c3RlcihjbHVzdGVySWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmF1dGhDb250ZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Ob2RlTm90QXV0aGVudGljYXRlZCwgJ05vZGUgbm90IGF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hdXRoQ29udGV4dC5ub2RlLnR5cGUgIT09IE5vZGVUeXBlLlVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk5vZGVUeXBlTm90U3VwcG9ydGVkLCAnQ2Fubm90IGpvaW4gYSBjbHVzdGVyIGlmIHRoZSBub2RlIGlzIG5vdCBhIHVzZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jbHVzdGVycy5oYXMoY2x1c3RlcklkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuQ2x1c3RlckFscmVhZHlKb2luZWQsICdDbHVzdGVyIGFscmVhZHkgam9pbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2x1c3RlciA9IG5ldyBDbHVzdGVyKHRoaXMudmVuZG9ySWQsIGNsdXN0ZXJJZCwgdGhpcy5hdXRoQ29udGV4dC5ub2RlLCB0aGlzLmF1dGhTZXJ2aWNlLCB0aGlzLm9wdGlvbnMsIHRoaXMuY29uZmlncyk7XG4gICAgICAgIGF3YWl0IGNsdXN0ZXIuam9pbigpO1xuICAgICAgICB0aGlzLmFkZENsdXN0ZXIoY2x1c3RlcklkLCBjbHVzdGVyKTtcbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdqb2luLWNsdXN0ZXInLCB7XG4gICAgICAgICAgICBjbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMuYXV0aENvbnRleHQubm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMuYXV0aENvbnRleHQubm9kZS50eXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlYXZlOiBjbHVzdGVyLmxlYXZlLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRMb2NhbE5vZGU6IGNsdXN0ZXIuZ2V0TG9jYWxOb2RlLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBvcGVuUHViU3ViVG9waWM6IGNsdXN0ZXIub3BlblB1YlN1YlRvcGljLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBvcGVuT2JqZWN0U3RvcmVCdWNrZXQ6IGNsdXN0ZXIub3Blbk9iamVjdFN0b3JlQnVja2V0LmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBvcGVuS2V5VmFsdWVEYXRhYmFzZTogY2x1c3Rlci5vcGVuS2V5VmFsdWVEYXRhYmFzZS5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgcHVibGlzaExvY2FsTWVkaWFTdHJlYW06IGNsdXN0ZXIucHVibGlzaExvY2FsTWVkaWFTdHJlYW0uYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIHB1Ymxpc2hMb2NhbER5bmFtaWNNZWRpYVN0cmVhbTogY2x1c3Rlci5wdWJsaXNoTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0uYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIGdldFB1YlN1YlRvcGljczogY2x1c3Rlci5nZXRQdWJTdWJUb3BpY3MuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIGdldE9iamVjdFN0b3JlQnVja2V0czogY2x1c3Rlci5nZXRPYmplY3RTdG9yZUJ1Y2tldHMuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIGdldEtleVZhbHVlRGF0YWJhc2VzOiBjbHVzdGVyLmdldEtleVZhbHVlRGF0YWJhc2VzLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRMb2NhbE1lZGlhU3RyZWFtczogY2x1c3Rlci5nZXRMb2NhbE1lZGlhU3RyZWFtcy5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgZ2V0UmVtb3RlTWVkaWFTdHJlYW1zOiBjbHVzdGVyLmdldFJlbW90ZU1lZGlhU3RyZWFtcy5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgZ2V0UmVtb3RlTm9kZXM6IGNsdXN0ZXIuZ2V0UmVtb3RlTm9kZXMuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIG9uOiBjbHVzdGVyLm9uLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBvZmY6IGNsdXN0ZXIub2ZmLmJpbmQoY2x1c3RlciksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3RBZ2VudChhZ2VudCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNsdXN0ZXJDb25maWcgb2YgYWdlbnQuYWdlbnRDb25maWcuY2x1c3RlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXIgPSBuZXcgQ2x1c3Rlcih0aGlzLnZlbmRvcklkLCBjbHVzdGVyQ29uZmlnLmlkLCBhZ2VudCwgdGhpcy5hdXRoU2VydmljZSwgdGhpcy5vcHRpb25zLCB0aGlzLmNvbmZpZ3MpO1xuICAgICAgICAgICAgYXdhaXQgY2x1c3Rlci5qb2luKCk7XG4gICAgICAgICAgICB0aGlzLmFkZENsdXN0ZXIoY2x1c3RlckNvbmZpZy5pZCwgY2x1c3Rlcik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRvcGljSWQgb2YgY2x1c3RlckNvbmZpZy5wdWJzdWIpIHtcbiAgICAgICAgICAgICAgICBjbHVzdGVyLm9wZW5QdWJTdWJUb3BpYyh0b3BpY0lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgYnVja2V0SWQgb2YgY2x1c3RlckNvbmZpZy5vYmplY3RTdG9yYWdlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2x1c3Rlci5vcGVuT2JqZWN0U3RvcmVCdWNrZXQoYnVja2V0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhYmFzZUlkIG9mIGNsdXN0ZXJDb25maWcua2V5VmFsdWVEYXRhYmFzZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsdXN0ZXIub3BlbktleVZhbHVlRGF0YWJhc2UoZGF0YWJhc2VJZCwge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAxLFxuICAgICAgICAgICAgICAgICAgICB0YWJsZXM6IHt9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZENsdXN0ZXIoY2x1c3RlcklkLCBjbHVzdGVyKSB7XG4gICAgICAgIHRoaXMuY2x1c3RlcnMuc2V0KGNsdXN0ZXJJZCwgY2x1c3Rlcik7XG4gICAgICAgIGNsdXN0ZXIub24oJ2NsdXN0ZXItbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICBjbHVzdGVyLm9mZigpO1xuICAgICAgICAgICAgdGhpcy5jbHVzdGVycy5kZWxldGUoY2x1c3RlcklkKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmV4cG9ydCBmdW5jdGlvbiBzZW5kU3RhdHMoY29udGVudCwgc3lzdGVtVG9waWMpIHtcbiAgICBzeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uLFxuICAgICAgICBjb250ZW50LFxuICAgIH0pO1xufVxuIiwiaW1wb3J0IHsgU1RBVFNfQ09MTEVDVF9ERUxBWSB9IGZyb20gJ2NvbnN0YW50cy9TdGF0cyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uT3JpZ2luIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IFN0YXRzTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N0YXRzL1N0YXRzJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgU3RhdHNOb2RlIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzTm9kZSc7XG5leHBvcnQgY2xhc3MgU3RhdHMge1xuICAgIG5vZGVzID0gbmV3IE1hcCgpO1xuICAgIHNjaGVkdWxlVGltZSA9IDA7XG4gICAgZHVyYXRpb25UaW1lID0gMDtcbiAgICBwdWJzdWJUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgb2JqZWN0U3RvcmVzID0gbmV3IE1hcCgpO1xuICAgIGtleVZhbHVlRGF0YWJhc2VzID0gbmV3IE1hcCgpO1xuICAgIHNlbmRlclRvdGFsTWVzc2FnZXMgPSBuZXcgTWFwKCk7XG4gICAgcmVjZWl2ZXJUb3RhbE1lc3NhZ2VzID0gbmV3IE1hcCgpO1xuICAgIHNlbmRlclRpbWVQcm9jZXNzaW5nID0gbmV3IE1hcCgpO1xuICAgIHJlY2VpdmVyVGltZVByb2Nlc3NpbmcgPSBuZXcgTWFwKCk7XG4gICAgc3lzdGVtTWVzc2FnZXMgPSBuZXcgTWFwKCk7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgZ2V0UmVwb3J0KCkge1xuICAgICAgICBjb25zdCBub2RlcyA9IHt9O1xuICAgICAgICB0aGlzLm5vZGVzLmZvckVhY2goKG5vZGUsIG5vZGVJZCkgPT4ge1xuICAgICAgICAgICAgbm9kZXNbbm9kZUlkXSA9IG5vZGUuZ2V0UmVwb3J0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc2VuZGVyVGltZVByb2Nlc3NpbmcgPSAwO1xuICAgICAgICB0aGlzLnNlbmRlclRpbWVQcm9jZXNzaW5nLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBzZW5kZXJUaW1lUHJvY2Vzc2luZyArPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCByZWNlaXZlclRpbWVQcm9jZXNzaW5nID0gMDtcbiAgICAgICAgdGhpcy5yZWNlaXZlclRpbWVQcm9jZXNzaW5nLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICByZWNlaXZlclRpbWVQcm9jZXNzaW5nICs9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdGltZVByb2Nlc3NpbmcgPSBzZW5kZXJUaW1lUHJvY2Vzc2luZyArIHJlY2VpdmVyVGltZVByb2Nlc3Npbmc7XG4gICAgICAgIGxldCBzeXN0ZW1NZXNzYWdlcyA9IHsgbWVzc2FnZXM6IHsgdG90YWw6IDAgfSB9O1xuICAgICAgICB0aGlzLnN5c3RlbU1lc3NhZ2VzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc3lzdGVtTWVzc2FnZXNbdHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVzc2FnZXNbdHlwZV0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWVbdHlwZV0pLmZvckVhY2goKHN1YnR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzeXN0ZW1NZXNzYWdlc1t0eXBlXVtzdWJ0eXBlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVzc2FnZXNbdHlwZV1bc3VidHlwZV0gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbU1lc3NhZ2VzW3R5cGVdW3N1YnR5cGVdICs9IHZhbHVlW3R5cGVdW3N1YnR5cGVdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgdG90YWxTdG9yYWdlU2l6ZSA9IDA7XG4gICAgICAgIGxldCB0b3RhbE1lc3NhZ2VzU2VudCA9IDA7XG4gICAgICAgIGxldCB0b3RhbE1lc3NhZ2VzUmVjZWl2ZWQgPSAwO1xuICAgICAgICBsZXQgdG90YWxCeXRlc1NlbnQgPSAwO1xuICAgICAgICBsZXQgdG90YWxCeXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5wdWJzdWJUb3BpY3MuZm9yRWFjaCgodG9waWMpID0+IHtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNTZW50ICs9IHRvcGljLm1lc3NhZ2VzU2VudDtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNSZWNlaXZlZCArPSB0b3BpYy5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQgKz0gdG9waWMuYnl0ZXNTZW50O1xuICAgICAgICAgICAgdG90YWxCeXRlc1JlY2VpdmVkICs9IHRvcGljLmJ5dGVzUmVjZWl2ZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9iamVjdFN0b3Jlcy5mb3JFYWNoKChzdG9yZSkgPT4ge1xuICAgICAgICAgICAgdG90YWxTdG9yYWdlU2l6ZSArPSBzdG9yZS5zdG9yYWdlO1xuICAgICAgICAgICAgdG90YWxNZXNzYWdlc1NlbnQgKz0gc3RvcmUubWVzc2FnZXNTZW50O1xuICAgICAgICAgICAgdG90YWxNZXNzYWdlc1JlY2VpdmVkICs9IHN0b3JlLm1lc3NhZ2VzUmVjZWl2ZWQ7XG4gICAgICAgICAgICB0b3RhbEJ5dGVzU2VudCArPSBzdG9yZS5ieXRlc1NlbnQ7XG4gICAgICAgICAgICB0b3RhbEJ5dGVzUmVjZWl2ZWQgKz0gc3RvcmUuYnl0ZXNSZWNlaXZlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuZm9yRWFjaCgoZGIpID0+IHtcbiAgICAgICAgICAgIHRvdGFsU3RvcmFnZVNpemUgKz0gZGIuc3RvcmFnZTtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNTZW50ICs9IGRiLm1lc3NhZ2VzU2VudDtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNSZWNlaXZlZCArPSBkYi5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQgKz0gZGIuYnl0ZXNTZW50O1xuICAgICAgICAgICAgdG90YWxCeXRlc1JlY2VpdmVkICs9IGRiLmJ5dGVzUmVjZWl2ZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgU1RWb2xhdGlsaXR5OiB0aGlzLmdldFNUVm9sYXRpbGl0eSgpLFxuICAgICAgICAgICAgRFRWb2xhdGlsaXR5OiB0aGlzLmdldERUVm9sYXRpbGl0eSgpLFxuICAgICAgICAgICAgYml0cmF0ZTogdGhpcy5nZXRCaXRyYXRlKCksXG4gICAgICAgICAgICBzZW5kZXJCaXRyYXRlOiB0aGlzLmdldFNlbmRlckJpdHJhdGUoKSxcbiAgICAgICAgICAgIHJlY2VpdmVyQml0cmF0ZTogdGhpcy5nZXRSZWNlaXZlckJpdHJhdGUoKSxcbiAgICAgICAgICAgIHRvdGFsU3RvcmFnZVNpemUsXG4gICAgICAgICAgICB0b3RhbE1lc3NhZ2VzOiB0b3RhbE1lc3NhZ2VzU2VudCArIHRvdGFsTWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNTZW50LFxuICAgICAgICAgICAgdG90YWxNZXNzYWdlc1JlY2VpdmVkLFxuICAgICAgICAgICAgdG90YWxCeXRlczogdG90YWxCeXRlc1NlbnQgKyB0b3RhbEJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzU2VudCxcbiAgICAgICAgICAgIHRvdGFsQnl0ZXNSZWNlaXZlZCxcbiAgICAgICAgICAgIHN5c3RlbU1lc3NhZ2VzLFxuICAgICAgICAgICAgdGltZVByb2Nlc3NpbmcsXG4gICAgICAgICAgICBub2Rlczogbm9kZXMsXG4gICAgICAgICAgICBwdWJzdWJUb3BpY3M6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLnB1YnN1YlRvcGljcyksXG4gICAgICAgICAgICBvYmplY3RTdG9yZXM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLm9iamVjdFN0b3JlcyksXG4gICAgICAgICAgICBrZXlWYWx1ZURhdGFiYXNlczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMua2V5VmFsdWVEYXRhYmFzZXMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGRSZW1vdGVOb2RlKGlkKSB7XG4gICAgICAgIHRoaXMubm9kZXMuc2V0KGlkLCBuZXcgU3RhdHNOb2RlKCkpO1xuICAgIH1cbiAgICByZW1vdmVSZW1vdGVOb2RlKGlkKSB7XG4gICAgICAgIHRoaXMubm9kZXMuZGVsZXRlKGlkKTtcbiAgICB9XG4gICAgcHJvY2Vzc1JlcG9ydHMobm9kZUlkLCByZXBvcnRzLCBzdHJlYW1JZCkge1xuICAgICAgICBpZiAoIShyZXBvcnRzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NEYXRhQ2hhbm5lbFJlcG9ydChub2RlSWQsIHJlcG9ydHMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcG9ydCA9IHRoaXMubm9kZXMuZ2V0KG5vZGVJZCk/LnByb2Nlc3NSZXBvcnRzKHJlcG9ydHMsIHN0cmVhbUlkKTtcbiAgICAgICAgaWYgKHJlcG9ydCkge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5TdGF0cyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFN0YXRzTWVzc2FnZVR5cGUuU3RyZWFtUmVwb3J0LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZXBvcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IG5vZGVJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc0xvY2FsUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICB0aGlzLnNldFNjaGVkdWxlVGltZShyZXBvcnQuc2VjaGVkdWxlVGltZSk7XG4gICAgICAgIHRoaXMuc2V0RHVyYXRpb25UaW1lKHJlcG9ydC5kdXJhdGlvblRpbWUpO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5TdGF0cyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdGF0c01lc3NhZ2VUeXBlLkxvY2FsUmVwb3J0LFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgU1RWb2xhdGlsaXR5OiB0aGlzLmdldFNUVm9sYXRpbGl0eSgpLFxuICAgICAgICAgICAgICAgICAgICBEVFZvbGF0aWxpdHk6IHRoaXMuZ2V0RFRWb2xhdGlsaXR5KCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwcm9jZXNzU2VydmljZVJlcG9ydChsYWJlbCwgdHlwZSwgcmVwb3J0KSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuUHViU3ViVG9waWNTdGF0czpcbiAgICAgICAgICAgICAgICB0aGlzLnB1YnN1YlRvcGljcy5zZXQobGFiZWwsIHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5PYmplY3RTdG9yZVN0YXRzOlxuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0U3RvcmVzLnNldChsYWJlbCwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLktleVZhbHVlRGF0YWJhc2VTdGF0czpcbiAgICAgICAgICAgICAgICB0aGlzLmtleVZhbHVlRGF0YWJhc2VzLnNldChsYWJlbCwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxuICAgIGdldFNUVm9sYXRpbGl0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2NoZWR1bGVUaW1lID4gMCAmJiAodGhpcy5zY2hlZHVsZVRpbWUgLSBTVEFUU19DT0xMRUNUX0RFTEFZKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5zY2hlZHVsZVRpbWUgLSBTVEFUU19DT0xMRUNUX0RFTEFZKSAvIFNUQVRTX0NPTExFQ1RfREVMQVk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGdldERUVm9sYXRpbGl0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25UaW1lID4gMCAmJiAodGhpcy5kdXJhdGlvblRpbWUgLSAoU1RBVFNfQ09MTEVDVF9ERUxBWSAvIDEwKSkgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuZHVyYXRpb25UaW1lIC0gKFNUQVRTX0NPTExFQ1RfREVMQVkgLyAxMCkpIC8gKFNUQVRTX0NPTExFQ1RfREVMQVkgLyAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGdldFNlbmRlckJpdHJhdGUoKSB7XG4gICAgICAgIGxldCBzZW5kZXJCaXRyYXRlID0gMDtcbiAgICAgICAgdGhpcy5ub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBzZW5kZXJCaXRyYXRlICs9IG5vZGUuc2VuZGVyQml0cmF0ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZW5kZXJCaXRyYXRlO1xuICAgIH1cbiAgICBnZXRSZWNlaXZlckJpdHJhdGUoKSB7XG4gICAgICAgIGxldCByZWNlaXZlckJpdHJhdGUgPSAwO1xuICAgICAgICB0aGlzLm5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIHJlY2VpdmVyQml0cmF0ZSArPSBub2RlLnJlY2VpdmVyQml0cmF0ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZWNlaXZlckJpdHJhdGU7XG4gICAgfVxuICAgIGdldEJpdHJhdGUoKSB7XG4gICAgICAgIGxldCBiaXRyYXRlID0gMDtcbiAgICAgICAgdGhpcy5ub2Rlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBiaXRyYXRlICs9IG5vZGUuYml0cmF0ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBiaXRyYXRlO1xuICAgIH1cbiAgICBzZXRTY2hlZHVsZVRpbWUodGltZSkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlVGltZSA9IHRpbWU7XG4gICAgfVxuICAgIHNldER1cmF0aW9uVGltZSh0aW1lKSB7XG4gICAgICAgIHRoaXMuZHVyYXRpb25UaW1lID0gdGltZTtcbiAgICB9XG4gICAgcHJvY2Vzc0RhdGFDaGFubmVsUmVwb3J0KG5vZGVJZCwgcmVwb3J0KSB7XG4gICAgICAgIHN3aXRjaCAocmVwb3J0Lm9yaWdpbikge1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXI6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzU2VuZGVyUmVwb3J0KG5vZGVJZCwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25PcmlnaW4uUmVjZWl2ZXI6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVjZWl2ZXJSZXBvcnQobm9kZUlkLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NTZW5kZXJSZXBvcnQobm9kZUlkLCByZXBvcnQpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJUb3RhbE1lc3NhZ2VzLnNldChub2RlSWQsIHJlcG9ydC5tZXNzYWdlc1NlbnQpO1xuICAgICAgICB0aGlzLnNlbmRlclRpbWVQcm9jZXNzaW5nLnNldChub2RlSWQsIHJlcG9ydC50aW1lU2VuZGluZyk7XG4gICAgfVxuICAgIHByb2Nlc3NSZWNlaXZlclJlcG9ydChub2RlSWQsIHJlcG9ydCkge1xuICAgICAgICB0aGlzLnJlY2VpdmVyVG90YWxNZXNzYWdlcy5zZXQobm9kZUlkLCByZXBvcnQubWVzc2FnZXNSZWNlaXZlZCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJUaW1lUHJvY2Vzc2luZy5zZXQobm9kZUlkLCByZXBvcnQudGltZVJlY2VpdmluZyk7XG4gICAgICAgIHRoaXMuc3lzdGVtTWVzc2FnZXMuc2V0KG5vZGVJZCwgcmVwb3J0LnN5c3RlbU1lc3NhZ2VzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTVEFUU19SRVBPUlRfREVMQVkgfSBmcm9tICdjb25zdGFudHMvU3RhdHMnO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25PcmlnaW4gfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuZXhwb3J0IGNsYXNzIFN0YXRzRGF0YUNoYW5uZWwge1xuICAgIHNlbmRlckN1cnJlbnRUaW1lc3RhbXAgPSAwO1xuICAgIHNlbmRlclByZXZpb3VzVGltZXN0YW1wID0gMDtcbiAgICByZWNlaXZlckN1cnJlbnRUaW1lc3RhbXAgPSAwO1xuICAgIHJlY2VpdmVyUHJldmlvdXNUaW1lc3RhbXAgPSAwO1xuICAgIHNlbmRlckN1cnJlbnRCeXRlcyA9IDA7XG4gICAgc2VuZGVyUHJldmlvdXNCeXRlcyA9IDA7XG4gICAgcmVjZWl2ZXJDdXJyZW50Qnl0ZXMgPSAwO1xuICAgIHJlY2VpdmVyUHJldmlvdXNCeXRlcyA9IDA7XG4gICAgc2VuZGVyVG90YWxNZXNzYWdlcyA9IDA7XG4gICAgcmVjZWl2ZXJUb3RhbE1lc3NhZ2VzID0gMDtcbiAgICBzZW5kZXJUaW1lUHJvY2Vzc2luZyA9IDA7XG4gICAgcmVjZWl2ZXJUaW1lUHJvY2Vzc2luZyA9IDA7XG4gICAgcm91bmRUcmlwVGltZSA9IDA7XG4gICAgZ2V0IGJpdHJhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRlckJpdHJhdGUgKyB0aGlzLnJlY2VpdmVyQml0cmF0ZTtcbiAgICB9XG4gICAgZ2V0IHNlbmRlckJpdHJhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbmRlckN1cnJlbnRUaW1lc3RhbXAgPiAwICYmIHRoaXMuc2VuZGVyUHJldmlvdXNUaW1lc3RhbXAgPiAwICYmIChEYXRlLm5vdygpIC0gdGhpcy5zZW5kZXJDdXJyZW50VGltZXN0YW1wKSA8IFNUQVRTX1JFUE9SVF9ERUxBWSkge1xuICAgICAgICAgICAgcmV0dXJuICgodGhpcy5zZW5kZXJDdXJyZW50Qnl0ZXMgLSB0aGlzLnNlbmRlclByZXZpb3VzQnl0ZXMpIC8gKHRoaXMuc2VuZGVyQ3VycmVudFRpbWVzdGFtcCAtIHRoaXMuc2VuZGVyUHJldmlvdXNUaW1lc3RhbXApICogOCAqIDEwMDApOyAvLyBjb252ZXJ0IHRvIGJwc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBnZXQgcmVjZWl2ZXJCaXRyYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5yZWNlaXZlckN1cnJlbnRUaW1lc3RhbXAgPiAwICYmIHRoaXMucmVjZWl2ZXJQcmV2aW91c1RpbWVzdGFtcCA+IDAgJiYgKERhdGUubm93KCkgLSB0aGlzLnJlY2VpdmVyQ3VycmVudFRpbWVzdGFtcCkgPCBTVEFUU19SRVBPUlRfREVMQVkpIHtcbiAgICAgICAgICAgIHJldHVybiAoKHRoaXMucmVjZWl2ZXJDdXJyZW50Qnl0ZXMgLSB0aGlzLnJlY2VpdmVyUHJldmlvdXNCeXRlcykgLyAodGhpcy5yZWNlaXZlckN1cnJlbnRUaW1lc3RhbXAgLSB0aGlzLnJlY2VpdmVyUHJldmlvdXNUaW1lc3RhbXApICogOCAqIDEwMDApOyAvLyBjb252ZXJ0IHRvIGJwc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBwcm9jZXNzUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICBzd2l0Y2ggKHJlcG9ydC5vcmlnaW4pIHtcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyOlxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1NlbmRlclJlcG9ydChyZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk9yaWdpbi5SZWNlaXZlcjpcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNlaXZlclJlcG9ydChyZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJpdHJhdGU6IHRoaXMuYml0cmF0ZSxcbiAgICAgICAgICAgIHNlbmRlckJpdHJhdGU6IHRoaXMuc2VuZGVyQml0cmF0ZSxcbiAgICAgICAgICAgIHJlY2VpdmVyQml0cmF0ZTogdGhpcy5yZWNlaXZlckJpdHJhdGUsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiB0aGlzLmdldFRvdGFsQnl0ZXMoKSxcbiAgICAgICAgICAgIHNlbmRlclRvdGFsQnl0ZXM6IHRoaXMuZ2V0U2VuZGVyVG90YWxCeXRlcygpLFxuICAgICAgICAgICAgcmVjZWl2ZXJUb3RhbEJ5dGVzOiB0aGlzLmdldFJlY2VpdmVyVG90YWxCeXRlcygpLFxuICAgICAgICAgICAgdG90YWxNZXNzYWdlczogdGhpcy5zZW5kZXJUb3RhbE1lc3NhZ2VzICsgdGhpcy5yZWNlaXZlclRvdGFsTWVzc2FnZXMsXG4gICAgICAgICAgICBzZW5kZXJUb3RhbE1lc3NhZ2VzOiB0aGlzLnNlbmRlclRvdGFsTWVzc2FnZXMsXG4gICAgICAgICAgICByZWNlaXZlclRvdGFsTWVzc2FnZXM6IHRoaXMucmVjZWl2ZXJUb3RhbE1lc3NhZ2VzLFxuICAgICAgICAgICAgdGltZVByb2Nlc3Npbmc6IHRoaXMuc2VuZGVyVGltZVByb2Nlc3NpbmcgKyB0aGlzLnJlY2VpdmVyVGltZVByb2Nlc3NpbmcsXG4gICAgICAgICAgICBzZW5kZXJUaW1lUHJvY2Vzc2luZzogdGhpcy5zZW5kZXJUaW1lUHJvY2Vzc2luZyxcbiAgICAgICAgICAgIHJlY2VpdmVyVGltZVByb2Nlc3Npbmc6IHRoaXMucmVjZWl2ZXJUaW1lUHJvY2Vzc2luZyxcbiAgICAgICAgICAgIHJvdW5kVHJpcFRpbWU6IHRoaXMucm91bmRUcmlwVGltZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0VG90YWxCeXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyQ3VycmVudEJ5dGVzICsgdGhpcy5yZWNlaXZlckN1cnJlbnRCeXRlcztcbiAgICB9XG4gICAgZ2V0U2VuZGVyVG90YWxCeXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyQ3VycmVudEJ5dGVzO1xuICAgIH1cbiAgICBnZXRSZWNlaXZlclRvdGFsQnl0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlY2VpdmVyQ3VycmVudEJ5dGVzO1xuICAgIH1cbiAgICBwcm9jZXNzU2VuZGVyUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICB0aGlzLnNldFNlbmRlclRpbWVzdGFtcChyZXBvcnQudGltZXN0YW1wKTtcbiAgICAgICAgdGhpcy5zZXRCeXRlcyhyZXBvcnQuYnl0ZXNTZW50KTtcbiAgICAgICAgdGhpcy5zZW5kZXJUb3RhbE1lc3NhZ2VzID0gcmVwb3J0Lm1lc3NhZ2VzU2VudDtcbiAgICAgICAgdGhpcy5zZW5kZXJUaW1lUHJvY2Vzc2luZyA9IHJlcG9ydC50aW1lU2VuZGluZztcbiAgICAgICAgdGhpcy5yb3VuZFRyaXBUaW1lID0gcmVwb3J0LnJvdW5kVHJpcFRpbWU7XG4gICAgfVxuICAgIHByb2Nlc3NSZWNlaXZlclJlcG9ydChyZXBvcnQpIHtcbiAgICAgICAgdGhpcy5zZXRSZWNlaXZlclRpbWVzdGFtcChyZXBvcnQudGltZXN0YW1wKTtcbiAgICAgICAgdGhpcy5zZXRSZWNlaXZlckJ5dGVzKHJlcG9ydC5ieXRlc1JlY2VpdmVkKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlclRvdGFsTWVzc2FnZXMgPSByZXBvcnQubWVzc2FnZXNSZWNlaXZlZDtcbiAgICAgICAgdGhpcy5yZWNlaXZlclRpbWVQcm9jZXNzaW5nID0gcmVwb3J0LnRpbWVSZWNlaXZpbmc7XG4gICAgfVxuICAgIHNldFNlbmRlclRpbWVzdGFtcCh0aW1lc3RhbXApIHtcbiAgICAgICAgaWYgKHRpbWVzdGFtcCA+IHRoaXMuc2VuZGVyQ3VycmVudFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgdGhpcy5zZW5kZXJQcmV2aW91c1RpbWVzdGFtcCA9IHRoaXMuc2VuZGVyQ3VycmVudFRpbWVzdGFtcDtcbiAgICAgICAgICAgIHRoaXMuc2VuZGVyQ3VycmVudFRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSZWNlaXZlclRpbWVzdGFtcCh0aW1lc3RhbXApIHtcbiAgICAgICAgaWYgKHRpbWVzdGFtcCA+IHRoaXMucmVjZWl2ZXJDdXJyZW50VGltZXN0YW1wKSB7XG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVyUHJldmlvdXNUaW1lc3RhbXAgPSB0aGlzLnJlY2VpdmVyQ3VycmVudFRpbWVzdGFtcDtcbiAgICAgICAgICAgIHRoaXMucmVjZWl2ZXJDdXJyZW50VGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEJ5dGVzKGJ5dGVzKSB7XG4gICAgICAgIHRoaXMuc2VuZGVyUHJldmlvdXNCeXRlcyA9IHRoaXMuc2VuZGVyQ3VycmVudEJ5dGVzO1xuICAgICAgICB0aGlzLnNlbmRlckN1cnJlbnRCeXRlcyA9IGJ5dGVzO1xuICAgIH1cbiAgICBzZXRSZWNlaXZlckJ5dGVzKGJ5dGVzKSB7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJQcmV2aW91c0J5dGVzID0gdGhpcy5yZWNlaXZlckN1cnJlbnRCeXRlcztcbiAgICAgICAgdGhpcy5yZWNlaXZlckN1cnJlbnRCeXRlcyA9IGJ5dGVzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGFkZERvYywgY29sbGVjdGlvbiwgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IFNUQVRTX0NPTExFQ1RfREVMQVksIFNUQVRTX1JFUE9SVF9ERUxBWSB9IGZyb20gJ2NvbnN0YW50cy9TdGF0cyc7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IFN0YXRzIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdzZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgU3RhdHNNYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIHJlbW90ZU5vZGVzID0gbmV3IFNldCgpO1xuICAgIG5leHROb2RlSWQ7XG4gICAgc3RhdHNDb2xsZWN0aW9uO1xuICAgIHN0YXRzUmVwb3J0aW5nO1xuICAgIHN0YXRzUmVwb3J0ID0gbmV3IFN0YXRzKCk7XG4gICAgY29uc3RydWN0b3IoY29uZmlncykge1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcy5zdGF0c1JlcG9ydCk7XG4gICAgICAgIHRoaXMuc3RhdHNDb2xsZWN0aW9uID0gdGhpcy5zZXR1cFN0YXRzQ29sbGVjdGlvbigpO1xuICAgICAgICB0aGlzLnN0YXRzUmVwb3J0aW5nID0gdGhpcy5zZXR1cFN0YXRzUmVwb3J0aW5nKCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLnN0YXRzUmVwb3J0KTtcbiAgICAgICAgdGhpcy5zdGF0c1JlcG9ydGluZygpO1xuICAgICAgICB0aGlzLnN0YXRzQ29sbGVjdGlvbigpO1xuICAgIH1cbiAgICBhZGRSZW1vdGVOb2RlKGlkKSB7XG4gICAgICAgIHRoaXMucmVtb3RlTm9kZXMuYWRkKGlkKTtcbiAgICAgICAgdGhpcy5zdGF0c1JlcG9ydC5hZGRSZW1vdGVOb2RlKGlkKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVtb3RlTm9kZShpZCkge1xuICAgICAgICB0aGlzLnJlbW90ZU5vZGVzLmRlbGV0ZShpZCk7XG4gICAgICAgIHRoaXMuc3RhdHNSZXBvcnQucmVtb3ZlUmVtb3RlTm9kZShpZCk7XG4gICAgfVxuICAgIGhhbmRsZVBlZXJDb25uZWN0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuU3RhdHM6XG4gICAgICAgICAgICAgICAgY29uc3QgeyBub2RlSWQsIHN0cmVhbUlkLCBzdGF0cyB9ID0gZXZlbnQuY29udGVudDtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRzUmVwb3J0LnByb2Nlc3NSZXBvcnRzKG5vZGVJZCwgc3RhdHMsIHN0cmVhbUlkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb250ZW50U3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5PYmplY3RTdG9yZVN0YXRzOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuS2V5VmFsdWVEYXRhYmFzZVN0YXRzOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuUHViU3ViVG9waWNTdGF0czpcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRzUmVwb3J0LnByb2Nlc3NTZXJ2aWNlUmVwb3J0KGV2ZW50LmNvbnRlbnQubGFiZWwsIGV2ZW50LmNvbnRlbnQudHlwZSwgZXZlbnQuY29udGVudC5zdGF0cyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0dXBTdGF0c1JlcG9ydGluZygpIHtcbiAgICAgICAgcmV0dXJuIGludGVydmFsLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydCA9IHRoaXMuc3RhdHNSZXBvcnQuZ2V0UmVwb3J0KCk7XG4gICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdGF0cywgJ1N0YXRzOiByZXBvcnQnLCByZXBvcnQpO1xuICAgICAgICAgICAgYWRkRG9jKGNvbGxlY3Rpb24oZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGBkZXZlbG9wZXJzLyR7dGhpcy5jb25maWdzLnZlbmRvcklkfS9zdGF0c2ApLCB7XG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICByZXBvcnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dFdmVudCgnc3RhdHMnLCB7XG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBTVEFUU19SRVBPUlRfREVMQVkpO1xuICAgIH1cbiAgICBzZXR1cFN0YXRzQ29sbGVjdGlvbigpIHtcbiAgICAgICAgbGV0IHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgbGV0IGxhc3RSdW4gPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gaW50ZXJ2YWwuc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZU5vZGVzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5uZXh0Tm9kZUlkO1xuICAgICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5maW5kTmV4dE5vZGVJZCgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuY29sbGVjdFN0YXRzKHRoaXMubmV4dE5vZGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICB0aGlzLnN0YXRzUmVwb3J0LnByb2Nlc3NMb2NhbFJlcG9ydCh7XG4gICAgICAgICAgICAgICAgc2VjaGVkdWxlVGltZTogbm93IC0gbGFzdFJ1bixcbiAgICAgICAgICAgICAgICBkdXJhdGlvblRpbWU6IERhdGUubm93KCkgLSBub3csXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxhc3RSdW4gPSBub3c7XG4gICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIH0sIFNUQVRTX0NPTExFQ1RfREVMQVkpO1xuICAgIH1cbiAgICBmaW5kTmV4dE5vZGVJZCgpIHtcbiAgICAgICAgbGV0IGZpcnN0Tm9kZUlkID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMubmV4dE5vZGVJZCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbW90ZU5vZGVzLmhhcyh0aGlzLm5leHROb2RlSWQpKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubmV4dE5vZGVJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIHRoaXMucmVtb3RlTm9kZXMpIHtcbiAgICAgICAgICAgIGlmICghZmlyc3ROb2RlSWQpIHtcbiAgICAgICAgICAgICAgICBmaXJzdE5vZGVJZCA9IGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubmV4dE5vZGVJZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubmV4dE5vZGVJZDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dE5vZGVJZCA9IGlkO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubmV4dE5vZGVJZCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0Tm9kZUlkID0gZmlyc3ROb2RlSWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTVEFUU19SRUNFSVZFUl9GSUxURVJTLCBTVEFUU19TRU5ERVJfRklMVEVSUyB9IGZyb20gJ2NvbnN0YW50cy9TdGF0cyc7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk9yaWdpbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBTdGF0c1N0cmVhbSB9IGZyb20gJ21vZGVscy9TdGF0cy9TdGF0c1N0cmVhbSc7XG5pbXBvcnQgeyBTdGF0c0RhdGFDaGFubmVsIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzRGF0YUNoYW5uZWwnO1xuZXhwb3J0IGNsYXNzIFN0YXRzTm9kZSB7XG4gICAgc2VuZGVyU3RyZWFtcyA9IG5ldyBNYXAoKTtcbiAgICByZWNlaXZlclN0cmVhbXMgPSBuZXcgTWFwKCk7XG4gICAgZGF0YUNoYW5uZWwgPSBuZXcgU3RhdHNEYXRhQ2hhbm5lbCgpO1xuICAgIGdldCBzZW5kZXJCaXRyYXRlKCkge1xuICAgICAgICBsZXQgc2VuZGVyQml0cmF0ZSA9IDA7XG4gICAgICAgIHRoaXMuc2VuZGVyU3RyZWFtcy5mb3JFYWNoKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIHNlbmRlckJpdHJhdGUgKz0gc3RyZWFtLmJpdHJhdGU7XG4gICAgICAgIH0pO1xuICAgICAgICBzZW5kZXJCaXRyYXRlICs9IHRoaXMuZGF0YUNoYW5uZWwuc2VuZGVyQml0cmF0ZTtcbiAgICAgICAgcmV0dXJuIHNlbmRlckJpdHJhdGU7XG4gICAgfVxuICAgIGdldCByZWNlaXZlckJpdHJhdGUoKSB7XG4gICAgICAgIGxldCByZWNlaXZlckJpdHJhdGUgPSAwO1xuICAgICAgICB0aGlzLnJlY2VpdmVyU3RyZWFtcy5mb3JFYWNoKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIHJlY2VpdmVyQml0cmF0ZSArPSBzdHJlYW0uYml0cmF0ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlY2VpdmVyQml0cmF0ZSArPSB0aGlzLmRhdGFDaGFubmVsLnJlY2VpdmVyQml0cmF0ZTtcbiAgICAgICAgcmV0dXJuIHJlY2VpdmVyQml0cmF0ZTtcbiAgICB9XG4gICAgZ2V0IGJpdHJhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRlckJpdHJhdGUgKyB0aGlzLnJlY2VpdmVyQml0cmF0ZTtcbiAgICB9XG4gICAgcHJvY2Vzc1JlcG9ydHMocmVwb3J0cywgc3RyZWFtSWQpIHtcbiAgICAgICAgY29uc3QgaW5ib3VuZFJlcG9ydHMgPSBbXTtcbiAgICAgICAgY29uc3Qgb3V0Ym91bmRSZXBvcnRzID0gW107XG4gICAgICAgIGlmIChyZXBvcnRzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlcG9ydHMuZm9yRWFjaCgocmVwb3J0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVwb3J0LmZvckVhY2goKHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFNUQVRTX1JFQ0VJVkVSX0ZJTFRFUlMuaW5jbHVkZXMoci50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5ib3VuZFJlcG9ydHMucHVzaChyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoU1RBVFNfU0VOREVSX0ZJTFRFUlMuaW5jbHVkZXMoci50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0Ym91bmRSZXBvcnRzLnB1c2gocik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5wcm9jZXNzUmVwb3J0KHJlcG9ydHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmJvdW5kUmVwb3J0cy5sZW5ndGggPiAwICYmIHN0cmVhbUlkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvY2Vzc0luYm91bmRSZXBvcnRzKHN0cmVhbUlkLCBpbmJvdW5kUmVwb3J0cyksXG4gICAgICAgICAgICAgICAgb3JpZ2luOiBQZWVyQ29ubmVjdGlvbk9yaWdpbi5SZWNlaXZlcixcbiAgICAgICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dGJvdW5kUmVwb3J0cy5sZW5ndGggPiAwICYmIHN0cmVhbUlkKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvY2Vzc091dGJvdW5kUmVwb3J0cyhzdHJlYW1JZCwgb3V0Ym91bmRSZXBvcnRzKSxcbiAgICAgICAgICAgICAgICBvcmlnaW46IFBlZXJDb25uZWN0aW9uT3JpZ2luLlNlbmRlcixcbiAgICAgICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmVwb3J0KCkge1xuICAgICAgICBjb25zdCBzZW5kZXJTdHJlYW1zID0ge307XG4gICAgICAgIHRoaXMuc2VuZGVyU3RyZWFtcy5mb3JFYWNoKChzdHJlYW0sIHN0cmVhbUlkKSA9PiB7XG4gICAgICAgICAgICBzZW5kZXJTdHJlYW1zW3N0cmVhbUlkXSA9IHN0cmVhbS5nZXRSZXBvcnQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlY2VpdmVyU3RyZWFtcyA9IHt9O1xuICAgICAgICB0aGlzLnJlY2VpdmVyU3RyZWFtcy5mb3JFYWNoKChzdHJlYW0sIHN0cmVhbUlkKSA9PiB7XG4gICAgICAgICAgICByZWNlaXZlclN0cmVhbXNbc3RyZWFtSWRdID0gc3RyZWFtLmdldFJlcG9ydCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJpdHJhdGU6IHRoaXMuYml0cmF0ZSxcbiAgICAgICAgICAgIHNlbmRlckJpdHJhdGU6IHRoaXMuc2VuZGVyQml0cmF0ZSxcbiAgICAgICAgICAgIHJlY2VpdmVyQml0cmF0ZTogdGhpcy5yZWNlaXZlckJpdHJhdGUsXG4gICAgICAgICAgICBzZW5kZXJTdHJlYW1zOiBzZW5kZXJTdHJlYW1zLFxuICAgICAgICAgICAgcmVjZWl2ZXJTdHJlYW1zOiByZWNlaXZlclN0cmVhbXMsXG4gICAgICAgICAgICBkYXRhQ2hhbm5lbDogdGhpcy5kYXRhQ2hhbm5lbC5nZXRSZXBvcnQoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJvY2Vzc0luYm91bmRSZXBvcnRzKHN0cmVhbUlkLCByZXBvcnRzKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWNlaXZlclN0cmVhbXMuaGFzKHN0cmVhbUlkKSkge1xuICAgICAgICAgICAgdGhpcy5yZWNlaXZlclN0cmVhbXMuc2V0KHN0cmVhbUlkLCBuZXcgU3RhdHNTdHJlYW0oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZXJTdHJlYW1zLmdldChzdHJlYW1JZCkucHJvY2Vzc1JlcG9ydHMocmVwb3J0cyk7XG4gICAgfVxuICAgIHByb2Nlc3NPdXRib3VuZFJlcG9ydHMoc3RyZWFtSWQsIHJlcG9ydHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlbmRlclN0cmVhbXMuaGFzKHN0cmVhbUlkKSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kZXJTdHJlYW1zLnNldChzdHJlYW1JZCwgbmV3IFN0YXRzU3RyZWFtKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRlclN0cmVhbXMuZ2V0KHN0cmVhbUlkKS5wcm9jZXNzUmVwb3J0cyhyZXBvcnRzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdGF0c1RyYWNrQXVkaW8gfSBmcm9tICdtb2RlbHMvU3RhdHMvU3RhdHNUcmFja0F1ZGlvJztcbmltcG9ydCB7IFN0YXRzVHJhY2tWaWRlbyB9IGZyb20gJ21vZGVscy9TdGF0cy9TdGF0c1RyYWNrVmlkZW8nO1xuZXhwb3J0IGNsYXNzIFN0YXRzU3RyZWFtIHtcbiAgICBhdWRpbyA9IG5ldyBTdGF0c1RyYWNrQXVkaW8oKTtcbiAgICB2aWRlbyA9IG5ldyBTdGF0c1RyYWNrVmlkZW8oKTtcbiAgICBnZXQgYml0cmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVkaW8uYml0cmF0ZSArIHRoaXMudmlkZW8uYml0cmF0ZTtcbiAgICB9XG4gICAgcHJvY2Vzc1JlcG9ydHMocmVwb3J0cykge1xuICAgICAgICByZXBvcnRzLmZvckVhY2goKHJlcG9ydCkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChyZXBvcnQua2luZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1ZGlvJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpby5wcm9jZXNzUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ZpZGVvJzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlby5wcm9jZXNzUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVwb3J0KCk7XG4gICAgfVxuICAgIGdldFJlcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1ZGlvOiB0aGlzLmF1ZGlvLmdldFJlcG9ydCgpLFxuICAgICAgICAgICAgdmlkZW86IHRoaXMudmlkZW8uZ2V0UmVwb3J0KCksXG4gICAgICAgICAgICByb3VuZFRyaXBUaW1lOiB0aGlzLmdldFJvdW5kVHJpcFRpbWUoKSxcbiAgICAgICAgICAgIEF1ZGlvVmlkZW9EZWxheTogdGhpcy5nZXRBdWRpb1ZpZGVvRGVsYXkoKSxcbiAgICAgICAgICAgIGJpdHJhdGU6IHRoaXMuYml0cmF0ZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0Um91bmRUcmlwVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuYXVkaW8ucm91bmRUcmlwVGltZSArIHRoaXMudmlkZW8ucm91bmRUcmlwVGltZSkgLyAyKTtcbiAgICB9XG4gICAgZ2V0QXVkaW9WaWRlb0RlbGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdWRpby5lc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wIC0gdGhpcy52aWRlby5lc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNUQVRTX0lOQk9VTkQsIFNUQVRTX09VVEJPVU5ELCBTVEFUU19SRU1PVEVfSU5CT1VORCwgU1RBVFNfUkVQT1JUX0RFTEFZIH0gZnJvbSAnY29uc3RhbnRzL1N0YXRzJztcbmV4cG9ydCBjbGFzcyBTdGF0c1RyYWNrIHtcbiAgICByb3VuZFRyaXBUaW1lID0gMDtcbiAgICBlc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wID0gMDtcbiAgICBqaXR0ZXIgPSAwO1xuICAgIHBhY2tldHNMb3N0ID0gMDtcbiAgICBwYWNrZXRzID0gMDtcbiAgICBjdXJyZW50VGltZXN0YW1wID0gMDtcbiAgICBwcmV2aW91c1RpbWVzdGFtcCA9IDA7XG4gICAgY3VycmVudEJ5dGVzID0gMDtcbiAgICBwcmV2aW91c0J5dGVzID0gMDtcbiAgICBnZXQgYml0cmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRpbWVzdGFtcCA+IDAgJiYgdGhpcy5wcmV2aW91c1RpbWVzdGFtcCA+IDAgJiYgKERhdGUubm93KCkgLSB0aGlzLmN1cnJlbnRUaW1lc3RhbXApIDwgU1RBVFNfUkVQT1JUX0RFTEFZKSB7XG4gICAgICAgICAgICByZXR1cm4gKCh0aGlzLmN1cnJlbnRCeXRlcyAtIHRoaXMucHJldmlvdXNCeXRlcykgLyAodGhpcy5jdXJyZW50VGltZXN0YW1wIC0gdGhpcy5wcmV2aW91c1RpbWVzdGFtcCkgKiA4ICogMTAwMCk7IC8vIGNvbnZlcnQgdG8gYnBzXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHByb2Nlc3NSZXBvcnQocmVwb3J0KSB7XG4gICAgICAgIHN3aXRjaCAocmVwb3J0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU1RBVFNfSU5CT1VORDpcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NJbmJvdW5kUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNUQVRTX09VVEJPVU5EOlxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc091dGJvdW5kUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNUQVRTX1JFTU9URV9JTkJPVU5EOlxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlbW90ZUluYm91bmRSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSZXBvcnQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiaXRyYXRlOiB0aGlzLmJpdHJhdGUsXG4gICAgICAgICAgICBwYWNrZXRzTG9zdFBlcmM6IHRoaXMuZ2V0UGFja2V0c0xvc3RQZXJjKCksXG4gICAgICAgICAgICByb3VuZFRyaXBUaW1lOiB0aGlzLnJvdW5kVHJpcFRpbWUsXG4gICAgICAgICAgICBqaXR0ZXI6IHRoaXMuaml0dGVyLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm9jZXNzSW5ib3VuZFJlcG9ydChyZXBvcnQpIHtcbiAgICAgICAgdGhpcy5zZXRCeXRlcyhyZXBvcnQuYnl0ZXNSZWNlaXZlZCk7XG4gICAgICAgIHRoaXMuc2V0VGltZXN0YW1wKHJlcG9ydC50aW1lc3RhbXApO1xuICAgICAgICB0aGlzLnBhY2tldHMgPSByZXBvcnQucGFja2V0c1JlY2VpdmVkO1xuICAgICAgICB0aGlzLnBhY2tldHNMb3N0ID0gcmVwb3J0LnBhY2tldHNMb3N0O1xuICAgICAgICBpZiAodHlwZW9mIHJlcG9ydC5qaXR0ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmppdHRlciA9IHJlcG9ydC5qaXR0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmppdHRlciA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiByZXBvcnQuZXN0aW1hdGVkUGxheW91dFRpbWVzdGFtcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZXN0aW1hdGVkUGxheW91dFRpbWVzdGFtcCA9IHJlcG9ydC5lc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzT3V0Ym91bmRSZXBvcnQocmVwb3J0KSB7XG4gICAgICAgIHRoaXMuc2V0Qnl0ZXMocmVwb3J0LmJ5dGVzU2VudCk7XG4gICAgICAgIHRoaXMuc2V0VGltZXN0YW1wKHJlcG9ydC50aW1lc3RhbXApO1xuICAgICAgICB0aGlzLnBhY2tldHMgPSByZXBvcnQucGFja2V0c1NlbnQ7XG4gICAgfVxuICAgIHByb2Nlc3NSZW1vdGVJbmJvdW5kUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICB0aGlzLnJvdW5kVHJpcFRpbWUgPSByZXBvcnQucm91bmRUcmlwVGltZSAqIDEwMDA7IC8vIGNvbnZlcnQgdG8gbXNcbiAgICAgICAgaWYgKHR5cGVvZiByZXBvcnQuaml0dGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5qaXR0ZXIgPSByZXBvcnQuaml0dGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5qaXR0ZXIgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFBhY2tldHNMb3N0UGVyYygpIHtcbiAgICAgICAgaWYgKHRoaXMucGFja2V0cyA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhY2tldHNMb3N0IC8gdGhpcy5wYWNrZXRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBzZXRUaW1lc3RhbXAodGltZXN0YW1wKSB7XG4gICAgICAgIGlmICh0aW1lc3RhbXAgPiB0aGlzLmN1cnJlbnRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNUaW1lc3RhbXAgPSB0aGlzLmN1cnJlbnRUaW1lc3RhbXA7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lc3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0Qnl0ZXMoYnl0ZXMpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c0J5dGVzID0gdGhpcy5jdXJyZW50Qnl0ZXM7XG4gICAgICAgIHRoaXMuY3VycmVudEJ5dGVzID0gYnl0ZXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU3RhdHNUcmFjayB9IGZyb20gJ21vZGVscy9TdGF0cy9TdGF0c1RyYWNrJztcbmV4cG9ydCBjbGFzcyBTdGF0c1RyYWNrQXVkaW8gZXh0ZW5kcyBTdGF0c1RyYWNrIHtcbn1cbiIsImltcG9ydCB7IFNUQVRTX1JFUE9SVF9ERUxBWSB9IGZyb20gJ2NvbnN0YW50cy9TdGF0cyc7XG5pbXBvcnQgeyBTdGF0c1RyYWNrIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzVHJhY2snO1xuZXhwb3J0IGNsYXNzIFN0YXRzVHJhY2tWaWRlbyBleHRlbmRzIFN0YXRzVHJhY2sge1xuICAgIGZyYW1lVGltZSA9IDA7XG4gICAgZnJhbWVXaWR0aCA9IDA7XG4gICAgZnJhbWVIZWlnaHQgPSAwO1xuICAgIGN1cnJlbnRGcmFtZXMgPSAwO1xuICAgIHByZXZpb3VzRnJhbWVzID0gMDtcbiAgICBnZXQgZnBzKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50VGltZXN0YW1wID4gMCAmJiB0aGlzLnByZXZpb3VzVGltZXN0YW1wID4gMCAmJiAoRGF0ZS5ub3coKSAtIHRoaXMuY3VycmVudFRpbWVzdGFtcCkgPCBTVEFUU19SRVBPUlRfREVMQVkpIHtcbiAgICAgICAgICAgIHJldHVybiAoKHRoaXMuY3VycmVudEZyYW1lcyAtIHRoaXMucHJldmlvdXNGcmFtZXMpIC8gKHRoaXMuY3VycmVudFRpbWVzdGFtcCAtIHRoaXMucHJldmlvdXNUaW1lc3RhbXApICogMTAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGdldCB0aW1lUGVyRnJhbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmZyYW1lVGltZSAmJiB0aGlzLmN1cnJlbnRGcmFtZXMgJiYgdGhpcy5jdXJyZW50RnJhbWVzID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJhbWVUaW1lIC8gdGhpcy5jdXJyZW50RnJhbWVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBzZXQgZnJhbWVzKGZyYW1lcykge1xuICAgICAgICB0aGlzLnByZXZpb3VzRnJhbWVzID0gdGhpcy5jdXJyZW50RnJhbWVzO1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZXMgPSBmcmFtZXM7XG4gICAgfVxuICAgIGdldFJlcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLmdldFJlcG9ydCgpLFxuICAgICAgICAgICAgRlBTOiB0aGlzLmZwcyxcbiAgICAgICAgICAgIHRpbWVQZXJGcmFtZTogdGhpcy50aW1lUGVyRnJhbWUsXG4gICAgICAgICAgICBmcmFtZVdpZHRoOiB0aGlzLmZyYW1lV2lkdGgsXG4gICAgICAgICAgICBmcmFtZUhlaWdodDogdGhpcy5mcmFtZUhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJvY2Vzc0luYm91bmRSZXBvcnQocmVwb3J0KSB7XG4gICAgICAgIHN1cGVyLnByb2Nlc3NJbmJvdW5kUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgIHRoaXMuZnJhbWVUaW1lID0gcmVwb3J0LnRvdGFsRGVjb2RlVGltZTtcbiAgICAgICAgdGhpcy5mcmFtZXMgPSByZXBvcnQuZnJhbWVzRGVjb2RlZDtcbiAgICAgICAgdGhpcy5mcmFtZVdpZHRoID0gcmVwb3J0LmZyYW1lV2lkdGg7XG4gICAgICAgIHRoaXMuZnJhbWVIZWlnaHQgPSByZXBvcnQuZnJhbWVIZWlnaHQ7XG4gICAgfVxuICAgIHByb2Nlc3NPdXRib3VuZFJlcG9ydChyZXBvcnQpIHtcbiAgICAgICAgc3VwZXIucHJvY2Vzc091dGJvdW5kUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgIHRoaXMuZnJhbWVUaW1lID0gcmVwb3J0LnRvdGFsRW5jb2RlVGltZTtcbiAgICAgICAgdGhpcy5mcmFtZXMgPSByZXBvcnQuZnJhbWVzRW5jb2RlZDtcbiAgICAgICAgdGhpcy5mcmFtZVdpZHRoID0gcmVwb3J0LmZyYW1lV2lkdGg7XG4gICAgICAgIHRoaXMuZnJhbWVIZWlnaHQgPSByZXBvcnQuZnJhbWVIZWlnaHQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU3Vic2NyaXB0aW9uVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gaXNTZW5kZXIoY29udGVudCwgbm9kZUlkKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQuc291cmNlSWQgPT09IG5vZGVJZDtcbn1cbjtcbmV4cG9ydCBmdW5jdGlvbiBpc1JlY2VpdmVyKGNvbnRlbnQsIG5vZGVJZCkge1xuICAgIHJldHVybiBjb250ZW50LmRlc3RpbmF0aW9uSWRzPy5pbmNsdWRlcyhub2RlSWQpID8/IGlzQnJvYWRjYXN0KGNvbnRlbnQpO1xufVxuO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvYWRjYXN0KGNvbnRlbnQpIHtcbiAgICByZXR1cm4gY29udGVudC5kZXN0aW5hdGlvbklkcyA9PT0gdW5kZWZpbmVkO1xufVxuO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbkxhYmVsKHN1YnNjcmlwdGlvblR5cGUsIHsgY29udGVudFR5cGUsIGxhYmVsLCByZW1vdGVJZCB9KSB7XG4gICAgcmV0dXJuIGAke3N1YnNjcmlwdGlvblR5cGV9LSR7Y29udGVudFR5cGV9LSR7bGFiZWx9LSR7cmVtb3RlSWR9YDtcbn1cbjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BpY0xhYmVsKGNvbnRlbnRUeXBlLCBsYWJlbCwgcmVtb3RlSWQpIHtcbiAgICByZXR1cm4gYCR7Y29udGVudFR5cGV9JHtsYWJlbH0ke3JlbW90ZUlkfWA7XG59XG47XG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJlZml4KHN1YlR5cGUpIHtcbiAgICByZXR1cm4gc3ViVHlwZSA9PT0gU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZyA/ICdJbmNvbWluZ1N1YnNjcmlwdGlvbicgOiAnT3V0Z29pbmdTdWJzY3JpcHRpb24nO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcnRzKHN0cmVhbSwgY29ubmVjdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBzdHJlYW0uZ2V0SW50ZXJuYWxTdHJlYW1JZCgpLFxuICAgICAgICBjb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlKCksXG4gICAgICAgIHJlbW90ZUlkOiBjb25uZWN0aW9uLmdldFJlbW90ZUlkKCksXG4gICAgICAgIHN1cHBvcnRzQ29udGVudFR5cGU6IGNvbm5lY3Rpb24uZ2V0U3VwcG9ydGVkQ29udGVudFR5cGVzKCkuaW5jbHVkZXMoc3RyZWFtLmdldENvbnRlbnRUeXBlKCkpLFxuICAgIH07XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuZXhwb3J0IGNsYXNzIEluY29taW5nU3Vic2NyaXB0aW9uIHtcbiAgICBzb3VyY2U7XG4gICAgZGVzdGluYXRpb247XG4gICAgc3lzdGVtVG9waWM7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEluY29taW5nTWVkaWFTdWJzY3JpcHRpb24gZXh0ZW5kcyBJbmNvbWluZ1N1YnNjcmlwdGlvbiB7XG4gICAgc291cmNlO1xuICAgIGRlc3RpbmF0aW9uO1xuICAgIHBhcmFtcztcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIGRlc3RpbmF0aW9uLCBwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIoc291cmNlLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIH1cbiAgICBzdWJzY3JpYmUob3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLmRlc3RpbmF0aW9uLmdldENvbnRlbnRUeXBlKCkgPT09IENvbnRlbnRUeXBlLk1lZGlhKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlN1YnNjcmliZU1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmRlc3RpbmF0aW9uLmdldExhYmVsKCksXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgICAgICB0cmFja0tpbmRzOiB0cmFja0tpbmRzID8/IHRoaXMuZGVzdGluYXRpb24uZ2V0QXZhaWxhYmxlVHJhY2tLaW5kcygpLFxuICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMuc291cmNlLmdldExvY2FsSWQoKSxcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbklkczogW3RoaXMuc291cmNlLmdldFJlbW90ZUlkKCldLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5TdWJzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKG93bmVySWQsIHBhcmFtcykge1xuICAgICAgICBpZiAodGhpcy5kZXN0aW5hdGlvbi5nZXRDb250ZW50VHlwZSgpID09PSBDb250ZW50VHlwZS5NZWRpYSkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5VcGRhdGVNZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5kZXN0aW5hdGlvbi5nZXRMYWJlbCgpLFxuICAgICAgICAgICAgICAgIG93bmVySWQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5zb3VyY2UuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdGhpcy5zb3VyY2UuZ2V0UmVtb3RlSWQoKV0sXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZShvd25lcklkLCByZW1haW5pbmdUcmFja3MsIHRyYWNrS2luZHMpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdGluYXRpb24uZ2V0Q29udGVudFR5cGUoKSA9PT0gQ29udGVudFR5cGUuTWVkaWEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuVW5zdWJzY3JpYmVNZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5kZXN0aW5hdGlvbi5nZXRMYWJlbCgpLFxuICAgICAgICAgICAgICAgIG93bmVySWQsXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kczogdHJhY2tLaW5kcyA/PyB0aGlzLmRlc3RpbmF0aW9uLmdldEF2YWlsYWJsZVRyYWNrS2luZHMoKSxcbiAgICAgICAgICAgICAgICByZW1haW5pbmdUcmFja3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5zb3VyY2UuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdGhpcy5zb3VyY2UuZ2V0UmVtb3RlSWQoKV0sXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU1VCU0NSSVBUSU9OX1JFUVVFU1RfUkVUUllfREVMQVksIFNVQlNDUklQVElPTl9SRVFVRVNUX1RJTUVPVVQsIFNVQlNDUklQVElPTl9SRVRSWV9ERUxBWSB9IGZyb20gJ2NvbnN0YW50cy9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvblR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlJztcbmltcG9ydCAqIGFzIEhlbHBlcnMgZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9IZWxwZXJzJztcbmltcG9ydCB7IEluY29taW5nTWVkaWFTdWJzY3JpcHRpb24sIEluY29taW5nU3Vic2NyaXB0aW9uIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9JbmNvbWluZ1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25SZXF1ZXN0IH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25SZXF1ZXN0JztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbk1hcHMgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1hcHMnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBTeW5jUXVldWVDYWxsYmFjayB9IGZyb20gJ3V0aWxzL1F1ZXVlL1F1ZXVlJztcbmltcG9ydCB7IGNyZWF0ZVJldHJ5UXVldWUgfSBmcm9tICd1dGlscy9RdWV1ZS9SZXRyeVF1ZXVlJztcbmV4cG9ydCBjbGFzcyBJbmNvbWluZ1N1YnNjcmlwdGlvbk1hbmFnZXIge1xuICAgIGNvbmZpZ3M7XG4gICAgbWF4RGlzdGFuY2U7XG4gICAgc3Vic2NyaXB0aW9uUmVxdWVzdHMgPSBuZXcgTWFwKCk7XG4gICAgc3Vic2NyaXB0aW9uUmVxdWVzdHNRdWV1ZSA9IGNyZWF0ZVJldHJ5UXVldWUobmV3IFN5bmNRdWV1ZUNhbGxiYWNrKHRoaXMucmVxdWVzdFN1YnNjcmlwdGlvbkFjdGlvbi5iaW5kKHRoaXMpLCAoKSA9PiBpbnRlcnZhbC53YWl0KFNVQlNDUklQVElPTl9SRVFVRVNUX1JFVFJZX0RFTEFZKSksIHRydWUpO1xuICAgIHN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0cyA9IG5ldyBNYXAoKTtcbiAgICBtYXBzO1xuICAgIGNob3NlbkFuc3dlcnMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3RydWN0b3IoY29uZmlncywgbWF4RGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5jb25maWdzID0gY29uZmlncztcbiAgICAgICAgdGhpcy5tYXhEaXN0YW5jZSA9IG1heERpc3RhbmNlO1xuICAgICAgICB0aGlzLm1hcHMgPSBuZXcgU3Vic2NyaXB0aW9uTWFwcygoeyBzb3VyY2UsIGRlc3RpbmF0aW9uIH0pID0+IEhlbHBlcnMuZ2V0UGFydHMoZGVzdGluYXRpb24sIHNvdXJjZSkpO1xuICAgIH1cbiAgICBjcmVhdGVTdWJzY3JpcHRpb24oc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLmlzTWVkaWFTb3VyY2Uoc291cmNlKSAmJiB0aGlzLmlzTWVkaWFEZXN0aW5hdGlvbihkZXN0aW5hdGlvbilcbiAgICAgICAgICAgID8gbmV3IEluY29taW5nTWVkaWFTdWJzY3JpcHRpb24oc291cmNlLCBkZXN0aW5hdGlvbilcbiAgICAgICAgICAgIDogbmV3IEluY29taW5nU3Vic2NyaXB0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLm1hcHMuY3JlYXRlU3Vic2NyaXB0aW9uKFN1YnNjcmlwdGlvblR5cGUuSW5jb21pbmcsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZShzdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICByZW1vdmVTdWJzY3JpcHRpb24obGFiZWwsIGNvbnRlbnRUeXBlLCByZW1vdGVJZCA9ICcnKSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0geyBjb250ZW50VHlwZSwgbGFiZWwsIHJlbW90ZUlkIH07XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkxhYmVsID0gSGVscGVycy5nZXRTdWJzY3JpcHRpb25MYWJlbChTdWJzY3JpcHRpb25UeXBlLkluY29taW5nLCBwYXJ0cyk7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmdldChzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFVucHVibGlzaE1lZGlhU3RyZWFtKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVSZW1vdGVTdHJlYW1TdWJzY3JpcHRpb24oY29udGVudCk7XG4gICAgfVxuICAgIGhhbmRsZUNvbnRlbnRTdWJzY3JpYmVNZWRpYVN0cmVhbSh7IGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMgfSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RTdWJzY3JpcHRpb24obGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyk7XG4gICAgfVxuICAgIGhhbmRsZUNvbnRlbnRVcGRhdGVNZWRpYVN0cmVhbSh7IG93bmVySWQsIGxhYmVsLCBwYXJhbXMgfSkge1xuICAgICAgICBjb25zdCB7IHN1YnNjcmlwdGlvbkxhYmVsIH0gPSB0aGlzLmdldFN1YnNjcmlwdGlvbkxhYmVsKGxhYmVsLCBvd25lcklkKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5nZXRNZWRpYVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaXB0aW9uLnVwZGF0ZShvd25lcklkLCBwYXJhbXMpO1xuICAgIH1cbiAgICBoYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbSh7IG93bmVySWQsIGxhYmVsLCB0cmFja0tpbmRzLCByZW1haW5pbmdUcmFja3MgfSkge1xuICAgICAgICBjb25zdCByZXF1ZXN0TGFiZWwgPSBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuSW5jb21pbmcsIHsgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLCBsYWJlbCwgcmVtb3RlSWQ6IG93bmVySWQgfSk7XG4gICAgICAgIHRoaXMuY2xlYXJTdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dChyZXF1ZXN0TGFiZWwpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5nZXQocmVxdWVzdExhYmVsKTtcbiAgICAgICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyU3lzdGVtU291cmNlKHJlcXVlc3QpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5kZWxldGUocmVxdWVzdExhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHBhcnRzLCBzdWJzY3JpcHRpb25MYWJlbCB9ID0gdGhpcy5nZXRTdWJzY3JpcHRpb25MYWJlbChsYWJlbCwgb3duZXJJZCk7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuZ2V0TWVkaWFTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZShvd25lcklkLCByZW1haW5pbmdUcmFja3MsIHRyYWNrS2luZHMpO1xuICAgICAgICBpZiAocmVtYWluaW5nVHJhY2tzID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihwYXJ0cy5sYWJlbCwgcGFydHMuY29udGVudFR5cGUsIHBhcnRzLnJlbW90ZUlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25SZXN0YXJ0TmVlZE1lZGlhU3RyZWFtKHNvdXJjZUlkLCB7IGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBzdHJlYW1JZCwgcGFyYW1zIH0pIHtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uTGFiZWwgPSBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuSW5jb21pbmcsIHsgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLCBsYWJlbDogc3RyZWFtSWQsIHJlbW90ZUlkOiBzb3VyY2VJZCB9KTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZ2V0KHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIShzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBJbmNvbWluZ01lZGlhU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0RG9lc05vdEV4aXN0LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHN1YnNjcmlwdGlvbkxhYmVsLFxuICAgICAgICAgICAgICAgIG93bmVySWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICB0aGlzLnJlcXVlc3RTdWJzY3JpcHRpb24obGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyk7XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvblByb3ZpZGVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICBjb25zdCB7IGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMgfSA9IGNvbnRlbnQ7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RMYWJlbCA9IEhlbHBlcnMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwoU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZywgeyBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsIGxhYmVsLCByZW1vdGVJZDogb3duZXJJZCB9KTtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmhhcyhyZXF1ZXN0TGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLlN1YnNjcmlwdGlvblJlcXVlc3REb2VzTm90RXhpc3QsIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogcmVxdWVzdExhYmVsLFxuICAgICAgICAgICAgICAgIG93bmVySWQsXG4gICAgICAgICAgICAgICAgc3RyZWFtSWQ6IGNvbnRlbnQuc3RyZWFtSWQsXG4gICAgICAgICAgICAgICAgcmVxdWVzdHM6IHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25SZXF1ZXN0ID0gdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5nZXQocmVxdWVzdExhYmVsKTtcbiAgICAgICAgaWYgKHRyYWNrS2luZHMubGVuZ3RoICE9PSBzdWJzY3JpcHRpb25SZXF1ZXN0LmdldFRyYWNrcygpLmxlbmd0aCB8fCAhdHJhY2tLaW5kcy5ldmVyeSgodHJhY2tLaW5kKSA9PiBzdWJzY3JpcHRpb25SZXF1ZXN0LmdldFRyYWNrcygpLmluY2x1ZGVzKHRyYWNrS2luZCkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNob3NlbkFuc3dlciA9IHN1YnNjcmlwdGlvblJlcXVlc3QuaGFuZGxlU3Vic2NyaXB0aW9uU3lzdGVtRXZlbnRzKHNvdXJjZUlkLCBjb250ZW50KTtcbiAgICAgICAgICAgIGlmICghY2hvc2VuQW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmUoY2hvc2VuQW5zd2VyLCBvd25lcklkLCBsYWJlbCwgcmVxdWVzdExhYmVsLCB0cmFja0tpbmRzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU5vQW5zd2VyKGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvbk1lZGlhU3RyZWFtVW5hdmFpbGFibGUoc291cmNlSWQsIHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMgfSkge1xuICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRSZW1vdGVNZWRpYVN0cmVhbShvd25lcklkLCBsYWJlbCk7XG4gICAgICAgIGlmICghZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJlYW1JZCA9IGRlc3RpbmF0aW9uLmdldEludGVybmFsU3RyZWFtSWQoKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaWJlZFRyYWNrcyA9IGRlc3RpbmF0aW9uLmdldFN1YnNjcmliZWRUcmFja3MoKTtcbiAgICAgICAgY29uc3QgaXNTdWJzY3JpYmVkVHJhY2tVbmF2YWlsYWJsZSA9IHN1YnNjcmliZWRUcmFja3Muc29tZSgodHJhY2tLaW5kKSA9PiB0cmFja0tpbmRzLmluY2x1ZGVzKHRyYWNrS2luZCkpO1xuICAgICAgICBpZiAoIWlzU3Vic2NyaWJlZFRyYWNrVW5hdmFpbGFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBuZWVkIHRvIGlnbm9yZSB0aGUgdHJhY2tLaW5kcyBwYXNzZWQgaW4gaGVyZSBhbmQgaW5zdGVhZCByZWx5IG9uIHRoZSB0cmFja0tpbmRzIGZyb20gdGhlIHN1YnNjcmlwdGlvblxuICAgICAgICAvLyBCZWNhdXNlIGV2ZW4gaWYgb25seSBvbmUgdHJhY2sgaXMgdW5hdmFpbGFibGUsIHdlIG5lZWQgdG8gZmluZCBhbiBlbnRpcmUgbmV3IHN1YnNjcmlwdGlvblxuICAgICAgICB0aGlzLmZpbmROZXdNZWRpYVN1YnNjcmlwdGlvbihzb3VyY2VJZCwgbGFiZWwsIHN0cmVhbUlkLCBvd25lcklkLCBzdWJzY3JpYmVkVHJhY2tzKTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsKHsgbGFiZWwsIHByb3ZpZGVySWQsIG93bmVySWQsIHN0cmVhbUlkLCB0cmFja0tpbmRzIH0pIHtcbiAgICAgICAgdGhpcy5maW5kTmV3TWVkaWFTdWJzY3JpcHRpb24ocHJvdmlkZXJJZCwgbGFiZWwsIHN0cmVhbUlkLCBvd25lcklkLCB0cmFja0tpbmRzKTtcbiAgICB9XG4gICAgaGFuZGxlT3B0aW1pemF0aW9uQ29ubmVjdGlvblN1Y2Nlc3Moc291cmNlSWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBhbnN3ZXIgb2YgdGhpcy5jaG9zZW5BbnN3ZXJzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBjb25zdCB7IHN0cmVhbUxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMgfSA9IGFuc3dlcjtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBXZSBzaG91bGQgaGF2ZSBhIHNwZWNpZmljIHR5cGUgZm9yIGFuIGFjY2VwdGVkIGFuc3dlciB2cyBhIHdhaXRpbmcgYW5zd2VyXG4gICAgICAgICAgICBpZiAoIW93bmVySWQgfHwgIXRyYWNrS2luZHMgfHwgIXN0cmVhbUxhYmVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0c1F1ZXVlLnB1c2goeyBsYWJlbDogc3RyZWFtTGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcywgcmVtb3RlSWQ6IHNvdXJjZUlkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZVN1YnNjcmlwdGlvbnNGb3JOb2RlKG5vZGVJZCkge1xuICAgICAgICB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKChzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvbkxhYmVsKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uTGFiZWwuZW5kc1dpdGgobm9kZUlkKSkge1xuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uZGVzdGluYXRpb24uZ2V0Q29udGVudFR5cGUoKSA9PT0gQ29udGVudFR5cGUuTWVkaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3RlTWVkaWFTdHJlYW0gPSBzdWJzY3JpcHRpb24uZGVzdGluYXRpb247XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdGVNZWRpYVN0cmVhbS5nZXRTdWJzY3JpYmVkVHJhY2tzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5NZWRpYVN0cmVhbVVuYXZhaWxhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiByZW1vdGVNZWRpYVN0cmVhbS5nZXRMYWJlbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG93bmVySWQ6IHJlbW90ZU1lZGlhU3RyZWFtLmdldE93bmVySWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0tpbmRzOiByZW1vdGVNZWRpYVN0cmVhbS5nZXRTdWJzY3JpYmVkVHJhY2tzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJzY3JpcHRpb25NZWRpYVN0cmVhbVVuYXZhaWxhYmxlKG5vZGVJZCwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHRoaXMuY2xvc2VTdWJzY3JpcHRpb24uYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHN1YnNjcmliZShjaG9zZW5BbnN3ZXIsIG93bmVySWQsIGxhYmVsLCByZXF1ZXN0TGFiZWwsIHRyYWNrS2luZHMpIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldENvbm5lY3Rpb24oY2hvc2VuQW5zd2VyLm5vZGVJZCk7XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5jbGVhclN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0KHJlcXVlc3RMYWJlbCk7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmhhcyhyZXF1ZXN0TGFiZWwpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmdldChyZXF1ZXN0TGFiZWwpKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMuZGVsZXRlKHJlcXVlc3RMYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhbk9sZFN1YnNjcmlwdGlvbihjaG9zZW5BbnN3ZXIsIG93bmVySWQsIGxhYmVsLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIGRlc3RpbmF0aW9uLnNldEludGVybmFsSWQoY2hvc2VuQW5zd2VyLnN0cmVhbUlkKTtcbiAgICAgICAgZGVzdGluYXRpb24uc2V0UHJvdmlkZXJJZChjaG9zZW5BbnN3ZXIubm9kZUlkKTtcbiAgICAgICAgY29uc3QgcGFydHMgPSBIZWxwZXJzLmdldFBhcnRzKGRlc3RpbmF0aW9uLCBzb3VyY2UpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25MYWJlbCA9IEhlbHBlcnMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwoU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZywgcGFydHMpO1xuICAgICAgICBpZiAoIXRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmhhcyhzdWJzY3JpcHRpb25MYWJlbCkpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmdldChzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uIHx8ICEoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgSW5jb21pbmdNZWRpYVN1YnNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdERvZXNOb3RFeGlzdCwge1xuICAgICAgICAgICAgICAgIGxhYmVsOiByZXF1ZXN0TGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5sb2dFdmVudCgnc3Vic2NyaXB0aW9uJywge1xuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5jb25maWdzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkxhYmVsLFxuICAgICAgICAgICAgICAgIGNob3NlbkFuc3dlcixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNob3NlbkFuc3dlcnMuc2V0KHN1YnNjcmlwdGlvbkxhYmVsLCBjaG9zZW5BbnN3ZXIpO1xuICAgICAgICBzdWJzY3JpcHRpb24uc3Vic2NyaWJlKG93bmVySWQsIHRyYWNrS2luZHMsIGNob3NlbkFuc3dlci5wYXJhbXMpO1xuICAgIH1cbiAgICByZW1vdmVSZW1vdGVTdHJlYW1TdWJzY3JpcHRpb24oeyBvd25lcklkLCBsYWJlbCB9KSB7XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsKTtcbiAgICAgICAgY29uc3QgW3N1YnNjcmlwdGlvbkxhYmVsLCBzdWJzY3JpcHRpb25dID0gQXJyYXlcbiAgICAgICAgICAgIC5mcm9tKHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmVudHJpZXMoKSlcbiAgICAgICAgICAgIC5maW5kKChbbGFiZWwsIF9dKSA9PiBsYWJlbC5pbmRleE9mKGRlc3RpbmF0aW9uLmdldEludGVybmFsU3RyZWFtSWQoKSkgIT09IC0xKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgfVxuICAgIGNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpIHtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2Uoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5tYXBzLmNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgIH1cbiAgICBpc01lZGlhU291cmNlKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gc291cmNlLmdldFN1cHBvcnRlZENvbnRlbnRUeXBlcygpLmluY2x1ZGVzKENvbnRlbnRUeXBlLk1lZGlhKTtcbiAgICB9XG4gICAgaXNNZWRpYURlc3RpbmF0aW9uKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHJldHVybiBkZXN0aW5hdGlvbi5nZXRDb250ZW50VHlwZSgpID09PSBDb250ZW50VHlwZS5NZWRpYTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTm9BbnN3ZXIobGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcykge1xuICAgICAgICBhd2FpdCBpbnRlcnZhbC53YWl0KFNVQlNDUklQVElPTl9SRVRSWV9ERUxBWSk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RMYWJlbCA9IEhlbHBlcnMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwoU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZywgeyBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsIGxhYmVsLCByZW1vdGVJZDogb3duZXJJZCB9KTtcbiAgICAgICAgdGhpcy5jbGVhclN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0KHJlcXVlc3RMYWJlbCk7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblJlcXVlc3QgPSB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmdldChyZXF1ZXN0TGFiZWwpO1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvblJlcXVlc3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdERvZXNOb3RFeGlzdCwge1xuICAgICAgICAgICAgICAgIGxhYmVsOiByZXF1ZXN0TGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldENvbm5lY3Rpb25zKChjb25uZWN0aW9uKSA9PiBjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpO1xuICAgICAgICBjb25zdCBjdXJyZW50RGlzdGFuY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0RGlzdGFuY2UodGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCBvd25lcklkKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uUmVxdWVzdC5yZXNldChjb25uZWN0aW9ucy5tYXAoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSksIGN1cnJlbnREaXN0YW5jZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb25SZXF1ZXN0LnNlbmRSZXF1ZXN0KHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSwgb3duZXJJZCwgbGFiZWwsIHRyYWNrS2luZHMsIHBhcmFtcyk7XG4gICAgICAgICAgICB0aGlzLnNldFN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0KGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMsIHJlcXVlc3RMYWJlbCwgc3Vic2NyaXB0aW9uUmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHNRdWV1ZS5wdXNoKHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXF1ZXN0U3Vic2NyaXB0aW9uKGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0c1F1ZXVlLnB1c2goeyBsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zIH0pO1xuICAgIH1cbiAgICByZXF1ZXN0U3Vic2NyaXB0aW9uQWN0aW9uKHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcywgcmVtb3RlSWQgfSkge1xuICAgICAgICBjb25zdCByZW1vdGVTdHJlYW0gPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICBpZiAoIXJlbW90ZVN0cmVhbSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2FsTm9kZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRMb2NhbE5vZGUoKTtcbiAgICAgICAgY29uc3QgbG9jYWxSYW5rID0gbG9jYWxOb2RlLmdldFJhbmsoKTtcbiAgICAgICAgaWYgKCFsb2NhbFJhbmspIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTG9jYWwgbm9kZSByYW5rIGlzIG5vdCBzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtb3RlSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZU5vZGUgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTm9kZXMoKS5maW5kKChub2RlKSA9PiBub2RlLmdldElkKCkgPT09IHJlbW90ZUlkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZVJhbmsgPSByZW1vdGVOb2RlPy5nZXRSYW5rKCk7XG4gICAgICAgICAgICBpZiAoIXJlbW90ZU5vZGUgfHwgIXJlbW90ZVJhbmspIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVtb3RlIG5vZGUgb3IgcmFuaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3duZXJOb2RlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU5vZGVzKCkuZmluZCgobm9kZSkgPT4gbm9kZS5nZXRJZCgpID09PSBvd25lcklkKTtcbiAgICAgICAgICAgIGNvbnN0IG93bmVyUmFuayA9IG93bmVyTm9kZT8uZ2V0UmFuaygpO1xuICAgICAgICAgICAgaWYgKCFvd25lck5vZGUgfHwgIW93bmVyUmFuaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBvd25lciBub2RlIG9yIHJhbmsnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNob3NlbkFuc3dlciA9IHRoaXMuY2hvc2VuQW5zd2Vycy5nZXQobGFiZWwpO1xuICAgICAgICAgICAgaWYgKGNob3NlbkFuc3dlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNob3NlbkFuc3dlck5vZGUgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTm9kZXMoKS5maW5kKChub2RlKSA9PiBub2RlLmdldElkKCkgPT09IGNob3NlbkFuc3dlci5ub2RlSWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNob3NlbkFuc3dlclJhbmsgPSBjaG9zZW5BbnN3ZXJOb2RlPy5nZXRSYW5rKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjaG9zZW5BbnN3ZXJOb2RlIHx8ICFjaG9zZW5BbnN3ZXJSYW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmV0cnkgcmVxdWVzdCB3aXRoIGNob3NlbiBhbnN3ZXIgbm9kZSBvciByYW5rJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRSYW5rRGlmZmVyZW5jZSA9IE1hdGguYWJzKGNob3NlbkFuc3dlclJhbmsgLSBvd25lclJhbmspO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmtEaWZmZXJlbmNlID0gTWF0aC5hYnMocmVtb3RlUmFuayAtIG93bmVyUmFuayk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRSYW5rRGlmZmVyZW5jZSA8IHJhbmtEaWZmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0Q29ubmVjdGlvbnMoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSAmJiAocmVtb3RlSWQgPyBjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkgPT09IHJlbW90ZUlkIDogdHJ1ZSkpO1xuICAgICAgICBpZiAoIWNvbm5lY3Rpb25zLmxlbmd0aCB8fCBjb25uZWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29ubmVjdGlvbnMgYXZhaWxhYmxlIHRvIHNlbmQgc3Vic2NyaXB0aW9uIHJlcXVlc3QnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjdXJyZW50RGlzdGFuY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0RGlzdGFuY2UodGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCBvd25lcklkKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdExhYmVsID0gSGVscGVycy5nZXRTdWJzY3JpcHRpb25MYWJlbChTdWJzY3JpcHRpb25UeXBlLkluY29taW5nLCB7IGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZS5NZWRpYSwgbGFiZWwsIHJlbW90ZUlkOiBvd25lcklkIH0pO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5oYXMocmVxdWVzdExhYmVsKSkge1xuICAgICAgICAgICAgaWYgKHJlbW90ZUlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZSBuZWVkIHRvIHRyZWF0IHJlcXVlc3RzIHNlcXVlbnRpYWxseSB3aGVuIHRoZSByZW1vdGUgaWQgaXMgc2V0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c1RyYWNrcyA9IHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMuZ2V0KHJlcXVlc3RMYWJlbCkuZ2V0VHJhY2tzKCk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyB0aGUgc2FtZSwgd2UgZG9uJ3QgbmVlZCB0byBzZW5kIGl0IGFnYWluXG4gICAgICAgICAgICBpZiAocHJldmlvdXNUcmFja3MubGVuZ3RoID09PSB0cmFja0tpbmRzLmxlbmd0aCAmJiBwcmV2aW91c1RyYWNrcy5ldmVyeSgodHJhY2tLaW5kKSA9PiB0cmFja0tpbmRzLmluY2x1ZGVzKHRyYWNrS2luZCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5nZXQocmVxdWVzdExhYmVsKSk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmRlbGV0ZShyZXF1ZXN0TGFiZWwpO1xuICAgICAgICAgICAgdHJhY2tLaW5kcyA9IEFycmF5LmZyb20obmV3IFNldCh0cmFja0tpbmRzLmNvbmNhdChwcmV2aW91c1RyYWNrcykpKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dChyZXF1ZXN0TGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblJlcXVlc3QgPSBuZXcgU3Vic2NyaXB0aW9uUmVxdWVzdChjb25uZWN0aW9ucy5tYXAoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSksIGN1cnJlbnREaXN0YW5jZSwgdGhpcy5tYXhEaXN0YW5jZSwgdHJhY2tLaW5kcyk7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZShzdWJzY3JpcHRpb25SZXF1ZXN0KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5zZXQocmVxdWVzdExhYmVsLCBzdWJzY3JpcHRpb25SZXF1ZXN0KTtcbiAgICAgICAgc3Vic2NyaXB0aW9uUmVxdWVzdC5zZW5kUmVxdWVzdCh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksIG93bmVySWQsIGxhYmVsLCB0cmFja0tpbmRzLCBwYXJhbXMpO1xuICAgICAgICB0aGlzLnNldFN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0KGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMsIHJlcXVlc3RMYWJlbCwgc3Vic2NyaXB0aW9uUmVxdWVzdCk7XG4gICAgfVxuICAgIGNsZWFyU3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQoc3Vic2NyaXB0aW9uTGFiZWwpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXRzLmhhcyhzdWJzY3JpcHRpb25MYWJlbCkpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0cy5nZXQoc3Vic2NyaXB0aW9uTGFiZWwpKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXRzLmRlbGV0ZShzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0U3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQobGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcywgc3Vic2NyaXB0aW9uTGFiZWwsIHN1YnNjcmlwdGlvblJlcXVlc3QpIHtcbiAgICAgICAgdGhpcy5jbGVhclN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0KHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dHMuc2V0KHN1YnNjcmlwdGlvbkxhYmVsLCBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXRzLmRlbGV0ZShzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNob3NlbkFuc3dlciA9IHN1YnNjcmlwdGlvblJlcXVlc3QuY2hvb3NlQW5zd2VyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmUoY2hvc2VuQW5zd2VyLCBvd25lcklkLCBsYWJlbCwgc3Vic2NyaXB0aW9uTGFiZWwsIHRyYWNrS2luZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTm9BbnN3ZXIobGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFNVQlNDUklQVElPTl9SRVFVRVNUX1RJTUVPVVQpKTtcbiAgICB9XG4gICAgZmluZE5ld01lZGlhU3Vic2NyaXB0aW9uKHNvdXJjZUlkLCBzdHJlYW1MYWJlbCwgc3RyZWFtSWQsIG93bmVySWQsIHRyYWNrS2luZHMpIHtcbiAgICAgICAgY29uc3QgeyBzdWJzY3JpcHRpb25MYWJlbCB9ID0gdGhpcy5nZXRTdWJzY3JpcHRpb25MYWJlbChzdHJlYW1MYWJlbCwgb3duZXJJZCk7XG4gICAgICAgIGNvbnN0IG9sZFN1YnNjcmlwdGlvbiA9IHRoaXMuZ2V0TWVkaWFTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICBjb25zdCBvcmlnaW5hbFBhcmFtcyA9IG9sZFN1YnNjcmlwdGlvbj8ucGFyYW1zO1xuICAgICAgICBpZiAob2xkU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBvbGRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUob3duZXJJZCwgMCk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihzdHJlYW1JZCwgQ29udGVudFR5cGUuTWVkaWEsIHNvdXJjZUlkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcXVlc3RTdWJzY3JpcHRpb24oc3RyZWFtTGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIG9yaWdpbmFsUGFyYW1zKTtcbiAgICB9XG4gICAgZ2V0TWVkaWFTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uTGFiZWwpIHtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZ2V0KHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBJbmNvbWluZ01lZGlhU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkU3Vic2NyaXB0aW9uLCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHN1YnNjcmlwdGlvbkxhYmVsLFxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfVxuICAgIGdldFN1YnNjcmlwdGlvbkxhYmVsKGxhYmVsLCBvd25lcklkKSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy5nZXRQYXJ0c0ZvclN1YnNjcmlwdGlvbkxhYmVsKGxhYmVsLCBvd25lcklkKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uTGFiZWwgPSBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuSW5jb21pbmcsIHBhcnRzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBhcnRzLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTGFiZWwsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFBhcnRzRm9yU3Vic2NyaXB0aW9uTGFiZWwobGFiZWwsIG93bmVySWQpIHtcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICBjb25zdCBwcm92aWRlcklkID0gZGVzdGluYXRpb24uZ2V0UHJvdmlkZXJJZCgpO1xuICAgICAgICBpZiAoIXByb3ZpZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuUmVtb3RlTWVkaWFTdHJlYW1NaXNzaW5nUHJvdmlkZXJJZCwge1xuICAgICAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkOiBkZXN0aW5hdGlvbi5nZXRJbnRlcm5hbFN0cmVhbUlkKCksXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgICAgICBsb2NhbElkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLFxuICAgICAgICAgICAgbGFiZWw6IGRlc3RpbmF0aW9uLmdldEludGVybmFsU3RyZWFtSWQoKSxcbiAgICAgICAgICAgIHJlbW90ZUlkOiBwcm92aWRlcklkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjbGVhbk9sZFN1YnNjcmlwdGlvbihjaG9zZW5BbnN3ZXIsIG93bmVySWQsIGxhYmVsLCBkZXN0aW5hdGlvbikge1xuICAgICAgICBjb25zdCBvbGRQcm92aWRlcklkID0gZGVzdGluYXRpb24uZ2V0UHJvdmlkZXJJZCgpO1xuICAgICAgICBpZiAob2xkUHJvdmlkZXJJZCAmJiBvbGRQcm92aWRlcklkICE9PSBjaG9zZW5BbnN3ZXIubm9kZUlkKSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhcnRzLCBzdWJzY3JpcHRpb25MYWJlbCB9ID0gdGhpcy5nZXRTdWJzY3JpcHRpb25MYWJlbChsYWJlbCwgb3duZXJJZCk7XG4gICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLmdldE1lZGlhU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUob3duZXJJZCwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24ocGFydHMubGFiZWwsIHBhcnRzLmNvbnRlbnRUeXBlLCBwYXJ0cy5yZW1vdGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgTk9ERV9ESVNUQU5DRV9NQVgsIE5PREVfRElTVEFOQ0VfUkVTT0xVVElPTiwgTk9ERV9ESVNUQU5DRV9UUkFDS1MgfSBmcm9tICdjb25zdGFudHMvTm9kZSc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvblR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0ICogYXMgSGVscGVycyBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL0hlbHBlcnMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWFwcyB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uTWFwcyc7XG5pbXBvcnQgeyBSZW1vdGVNZWRpYVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L1JlbW90ZU1lZGlhU3RyZWFtJztcbmV4cG9ydCBjbGFzcyBPdXRnb2luZ1N1YnNjcmlwdGlvbk1hbmFnZXIge1xuICAgIGNvbmZpZ3M7XG4gICAgbWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zO1xuICAgIG1hcHM7XG4gICAgY29uc3RydWN0b3IoY29uZmlncywgbWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMubWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zID0gbWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zO1xuICAgICAgICB0aGlzLm1hcHMgPSBuZXcgU3Vic2NyaXB0aW9uTWFwcygoeyBzb3VyY2UsIGRlc3RpbmF0aW9uIH0pID0+IEhlbHBlcnMuZ2V0UGFydHMoc291cmNlLCBkZXN0aW5hdGlvbikpO1xuICAgIH1cbiAgICBjcmVhdGVTdWJzY3JpcHRpb24oc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB7IHNvdXJjZSwgZGVzdGluYXRpb24gfTtcbiAgICAgICAgdGhpcy5tYXBzLmNyZWF0ZVN1YnNjcmlwdGlvbihTdWJzY3JpcHRpb25UeXBlLk91dGdvaW5nLCBzdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICByZW1vdmVTdWJzY3JpcHRpb24obGFiZWwsIGNvbnRlbnRUeXBlLCByZW1vdGVJZCA9ICcnKSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0geyBjb250ZW50VHlwZSwgbGFiZWwsIHJlbW90ZUlkIH07XG4gICAgICAgIHRoaXMubWFwcy5yZW1vdmVTdWJzY3JpcHRpb24ocGFydHMsIFN1YnNjcmlwdGlvblR5cGUuT3V0Z29pbmcpO1xuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25TdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICBpZiAoY29udGVudC5vd25lcklkICE9PSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCkpIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRSZW1vdGVNZWRpYVN0cmVhbShjb250ZW50Lm93bmVySWQsIGNvbnRlbnQubGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldExvY2FsTWVkaWFTdHJlYW0oY29udGVudC5sYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uTGFiZWwgPSBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuT3V0Z29pbmcsIHsgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLCBsYWJlbDogc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCksIHJlbW90ZUlkOiBzb3VyY2VJZCB9KTtcbiAgICAgICAgY29uc3QgbnVtYmVyT3V0Z29pbmdTdWJzY3JpcHRpb25zID0gdGhpcy5nZXROdW1iZXJPdXRnb2luZ1N1YnNjcmlwdGlvbnMoKTtcbiAgICAgICAgaWYgKCF0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5oYXMoc3Vic2NyaXB0aW9uTGFiZWwpICYmIG51bWJlck91dGdvaW5nU3Vic2NyaXB0aW9ucyA+PSB0aGlzLm1heE91dGdvaW5nU3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5SZXN0YXJ0TmVlZE1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgIG93bmVySWQ6IGNvbnRlbnQub3duZXJJZCxcbiAgICAgICAgICAgICAgICBsYWJlbDogY29udGVudC5sYWJlbCxcbiAgICAgICAgICAgICAgICBzdHJlYW1JZDogc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCksXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kczogY29udGVudC50cmFja0tpbmRzLFxuICAgICAgICAgICAgICAgIHBhcmFtczogY29udGVudC5wYXJhbXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBSZW1vdGVNZWRpYVN0cmVhbSAmJiAhc291cmNlLmlzU3Vic2NyaWJlZChjb250ZW50LnRyYWNrS2luZHMpKSB7XG4gICAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKGNvbnRlbnQucGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmhhcyhzdWJzY3JpcHRpb25MYWJlbCkpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU3Vic2NyaXB0aW9uKHNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW0oc291cmNlSWQpLCB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0Q29ubmVjdGlvbihzb3VyY2VJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvblVuc3Vic2NyaWJlTWVkaWFTdHJlYW0oc291cmNlSWQsIHsgbGFiZWwsIG93bmVySWQsIHJlbWFpbmluZ1RyYWNrcyB9KSB7XG4gICAgICAgIGlmIChyZW1haW5pbmdUcmFja3MgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNvdXJjZTtcbiAgICAgICAgaWYgKG93bmVySWQgIT09IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSkge1xuICAgICAgICAgICAgc291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRMb2NhbE1lZGlhU3RyZWFtKGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJlYW1JZCA9IHNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW1JZCgpO1xuICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IENvbnRlbnRUeXBlLk1lZGlhO1xuICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihzdHJlYW1JZCwgY29udGVudFR5cGUsIHNvdXJjZUlkKTtcbiAgICB9XG4gICAgLypcbiAgICAgKiBJdGVyYXRlIG92ZXIgb3V0Z29pbmcgc3Vic2NyaXB0aW9uXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gZWFjaCBzdWJzY3JpYmVyIGZyb20gdGhpcyBzdHJlYW0gdG8gdGVsbCB0aGVtIHdlIGNhbiBubyBsb25nZXIgcHJvdmlkZSB0aGUgc3RyZWFtXG4gICAgICogQW5kIHJlbW92ZSB0aGUgc3Vic2NyaXB0aW9uIChUT0RPIC0gSWYgd2UgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gbm93LCBpdCBicmVha3MgdGhlIHJlbGF5J3MgbmV3IHN1YnNjcmlwdGlvbilcbiAgICAgICovXG4gICAgaGFuZGxlQ29udGVudFVuc3Vic2NyaWJlTWVkaWFTdHJlYW0oc291cmNlSWQsIHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMgfSkge1xuICAgICAgICBpZiAoc291cmNlSWQgIT09IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGxldCBtZXNzYWdlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YnNjcmlwdGlvbiBvZiB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgeyBzb3VyY2UsIGRlc3RpbmF0aW9uIH0gPSBzdWJzY3JpcHRpb25bMV07XG4gICAgICAgICAgICBpZiAoc291cmNlLmdldExhYmVsKCkgIT09IGxhYmVsIHx8IHNvdXJjZS5nZXRPd25lcklkKCkgIT09IG93bmVySWQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFtkZXN0aW5hdGlvbi5nZXRSZW1vdGVJZCgpXSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuU3Vic2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuTWVkaWFTdHJlYW1VbmF2YWlsYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIG93bmVySWQsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrS2luZHMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9XG4gICAgaGFuZGxlU3Vic2NyaXB0aW9uTmVlZE1lZGlhU3RyZWFtKHNvdXJjZUlkLCBjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyB9ID0gY29udGVudDtcbiAgICAgICAgY29uc3QgeyBoYXNUcmFja3MsIHN0cmVhbUlkLCBoYXNSZXNvbHV0aW9uLCBkaXN0YW5jZSwgc3Vic2NyaXB0aW9uTGFiZWwgfSA9IHRoaXMuZ2V0U3Vic2NyaXB0aW9uSW5mbyhzb3VyY2VJZCwgY29udGVudCk7XG4gICAgICAgIGNvbnN0IG51bWJlck91dGdvaW5nU3Vic2NyaXB0aW9ucyA9IHRoaXMuZ2V0TnVtYmVyT3V0Z29pbmdTdWJzY3JpcHRpb25zKCk7XG4gICAgICAgIGxldCB0eXBlID0gbnVtYmVyT3V0Z29pbmdTdWJzY3JpcHRpb25zIDwgdGhpcy5tYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMgJiYgKGhhc1RyYWNrcyB8fCBkaXN0YW5jZSA+IC0xKVxuICAgICAgICAgICAgPyBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5DYW5Qcm92aWRlTWVkaWFTdHJlYW1cbiAgICAgICAgICAgIDogU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuQ2Fubm90UHJvdmlkZU1lZGlhU3RyZWFtO1xuICAgICAgICBjb25zdCBjb21wdXRlZERpc3RhbmNlID0gZGlzdGFuY2UgPCAwID8gTk9ERV9ESVNUQU5DRV9NQVggOiBkaXN0YW5jZTtcbiAgICAgICAgbGV0IGNvc3QgPSBoYXNUcmFja3NcbiAgICAgICAgICAgID8gKGhhc1Jlc29sdXRpb24gPyBjb21wdXRlZERpc3RhbmNlIDogY29tcHV0ZWREaXN0YW5jZSArIE5PREVfRElTVEFOQ0VfUkVTT0xVVElPTilcbiAgICAgICAgICAgIDogY29tcHV0ZWREaXN0YW5jZSArIE5PREVfRElTVEFOQ0VfVFJBQ0tTO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uTGFiZWwgJiYgdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuaGFzKHN1YnNjcmlwdGlvbkxhYmVsKSkge1xuICAgICAgICAgICAgaWYgKGhhc1RyYWNrcykge1xuICAgICAgICAgICAgICAgIGNvc3QgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHlwZSA9IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLkNhblByb3ZpZGVNZWRpYVN0cmVhbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGNvc3QsXG4gICAgICAgICAgICBkaXN0YW5jZSxcbiAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgdHJhY2tLaW5kcyxcbiAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFVucHVibGlzaE1lZGlhU3RyZWFtKGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgeyBsYWJlbCwgb3duZXJJZCB9ID0gY29udGVudDtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoc3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uLnNvdXJjZS5nZXRJbnRlcm5hbFN0cmVhbUlkKCkgPT09IHNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW1JZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSBzdWJzY3JpcHRpb24uZGVzdGluYXRpb247XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCksIENvbnRlbnRUeXBlLk1lZGlhLCBkZXN0aW5hdGlvbi5nZXRSZW1vdGVJZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZUNvbnRlbnRDbG9zZU1lZGlhU3RyZWFtKHsgbGFiZWwgfSkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0TG9jYWxNZWRpYVN0cmVhbShsYWJlbCk7XG4gICAgICAgIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKHN1YnNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5zb3VyY2UuZ2V0SW50ZXJuYWxTdHJlYW1JZCgpID09PSBzb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtSWQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gc3Vic2NyaXB0aW9uLmRlc3RpbmF0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKHNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW1JZCgpLCBDb250ZW50VHlwZS5NZWRpYSwgZGVzdGluYXRpb24uZ2V0UmVtb3RlSWQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVTdWJzY3JpcHRpb25zRm9yTm9kZShub2RlSWQpIHtcbiAgICAgICAgdGhpcy5tYXBzLnJlbW92ZVN1YnNjcmlwdGlvbnNGb3JOb2RlKG5vZGVJZCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHRoaXMuY2xvc2VTdWJzY3JpcHRpb24uYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIGNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpIHtcbiAgICAgICAgdGhpcy5tYXBzLmNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgIH1cbiAgICBnZXRTdWJzY3JpcHRpb25JbmZvKHNvdXJjZUlkLCB7IGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMgfSkge1xuICAgICAgICBjb25zdCBpc1JlbGF5ID0gb3duZXJJZCAhPT0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpO1xuICAgICAgICBpZiAoaXNSZWxheSkge1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlU291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsKTtcbiAgICAgICAgICAgIGlmICghcmVtb3RlU291cmNlIHx8IHJlbW90ZVNvdXJjZS5nZXRQcm92aWRlcklkKCkgPT09IHNvdXJjZUlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzVHJhY2tzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVzb2x1dGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUlkOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U6IC0xLFxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25MYWJlbDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBoYXNUcmFja3M6IHJlbW90ZVNvdXJjZS5oYXNUcmFja3ModHJhY2tLaW5kcyksXG4gICAgICAgICAgICAgICAgaGFzUmVzb2x1dGlvbjogdGhpcy5jYW5Qcm92aWRlUmVzb2x1dGlvbihyZW1vdGVTb3VyY2UuZ2V0UmVzb2x1dGlvbigpLCBwYXJhbXMpLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkOiByZW1vdGVTb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtSWQoKSxcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldERpc3RhbmNlKHNvdXJjZUlkLCBvd25lcklkKSxcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25MYWJlbDogSGVscGVycy5nZXRTdWJzY3JpcHRpb25MYWJlbChTdWJzY3JpcHRpb25UeXBlLk91dGdvaW5nLCB7IGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZS5NZWRpYSwgbGFiZWw6IHJlbW90ZVNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW1JZCgpLCByZW1vdGVJZDogc291cmNlSWQgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2FsU291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldExvY2FsTWVkaWFTdHJlYW0obGFiZWwpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGFzVHJhY2tzOiB0cnVlLFxuICAgICAgICAgICAgaGFzUmVzb2x1dGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIHN0cmVhbUlkOiBsb2NhbFNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW1JZCgpLFxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25MYWJlbDogSGVscGVycy5nZXRTdWJzY3JpcHRpb25MYWJlbChTdWJzY3JpcHRpb25UeXBlLk91dGdvaW5nLCB7IGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZS5NZWRpYSwgbGFiZWw6IGxvY2FsU291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCksIHJlbW90ZUlkOiBzb3VyY2VJZCB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0TnVtYmVyT3V0Z29pbmdTdWJzY3JpcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gQXJyYXlcbiAgICAgICAgICAgIC5mcm9tKHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmVudHJpZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKFtzdWJzY3JpcHRpb25MYWJlbCwgeyBzb3VyY2UgfV0pID0+IHN1YnNjcmlwdGlvbkxhYmVsLnN0YXJ0c1dpdGgoU3Vic2NyaXB0aW9uVHlwZS5PdXRnb2luZylcbiAgICAgICAgICAgICYmIHNvdXJjZS5nZXRDb250ZW50VHlwZSgpID09PSBDb250ZW50VHlwZS5NZWRpYSlcbiAgICAgICAgICAgIC5sZW5ndGg7XG4gICAgfVxuICAgIGNhblByb3ZpZGVSZXNvbHV0aW9uKHJlc29sdXRpb24sIHBhcmFtcykge1xuICAgICAgICBpZiAoIXBhcmFtcyB8fCAhcGFyYW1zLnZpZGVvIHx8IHR5cGVvZiBwYXJhbXMudmlkZW8gPT09ICdib29sZWFuJyB8fCAhcGFyYW1zLnZpZGVvLm1heFJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gcGFyYW1zLnZpZGVvLm1heFJlc29sdXRpb247XG4gICAgICAgIHJldHVybiByZXNvbHV0aW9uLndpZHRoID49IHdpZHRoICYmIHJlc29sdXRpb24uaGVpZ2h0ID49IGhlaWdodDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgRWFybHlSZXR1cm5FcnJvciB9IGZyb20gJ2Vycm9ycy9FYXJseVJldHVybkVycm9yJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IE5vZGVNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvTm9kZS9Ob2RlTWVzc2FnZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1lc3NhZ2UnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5pbXBvcnQgeyBJbmNvbWluZ1N1YnNjcmlwdGlvbk1hbmFnZXIgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL0luY29taW5nU3Vic2NyaXB0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBPdXRnb2luZ1N1YnNjcmlwdGlvbk1hbmFnZXIgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL091dGdvaW5nU3Vic2NyaXB0aW9uTWFuYWdlcic7XG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uTWFuYWdlciB7XG4gICAgY29uZmlncztcbiAgICBtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnM7XG4gICAgbWF4RGlzdGFuY2U7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgaW5jb21pbmdNYW5hZ2VyO1xuICAgIG91dGdvaW5nTWFuYWdlcjtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMsIG1heERpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMubWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zID0gbWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zO1xuICAgICAgICB0aGlzLm1heERpc3RhbmNlID0gbWF4RGlzdGFuY2U7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzKTtcbiAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIgPSBuZXcgSW5jb21pbmdTdWJzY3JpcHRpb25NYW5hZ2VyKHRoaXMuY29uZmlncywgdGhpcy5tYXhEaXN0YW5jZSk7XG4gICAgICAgIHRoaXMub3V0Z29pbmdNYW5hZ2VyID0gbmV3IE91dGdvaW5nU3Vic2NyaXB0aW9uTWFuYWdlcih0aGlzLmNvbmZpZ3MsIHRoaXMubWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5vdXRnb2luZ01hbmFnZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcyk7XG4gICAgfVxuICAgIGNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuY3JlYXRlU3Vic2NyaXB0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIH1cbiAgICBjcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHRoaXMub3V0Z29pbmdNYW5hZ2VyLmNyZWF0ZVN1YnNjcmlwdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgICB9XG4gICAgcmVtb3ZlSW5jb21pbmdTdWJzY3JpcHRpb24obGFiZWwsIGNvbnRlbnRUeXBlLCByZW1vdGVJZCA9ICcnKSB7XG4gICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLnJlbW92ZVN1YnNjcmlwdGlvbihsYWJlbCwgY29udGVudFR5cGUsIHJlbW90ZUlkKTtcbiAgICB9XG4gICAgcmVtb3ZlT3V0Z29pbmdTdWJzY3JpcHRpb24obGFiZWwsIGNvbnRlbnRUeXBlLCByZW1vdGVJZCA9ICcnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLm91dGdvaW5nTWFuYWdlci5yZW1vdmVTdWJzY3JpcHRpb24obGFiZWwsIGNvbnRlbnRUeXBlLCByZW1vdGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvciAmJiBlLmNvZGUgPT09IFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25TeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuU3Vic2NyaWJlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJzY3JpcHRpb25TdWJzY3JpYmVNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlVuc3Vic2NyaWJlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRnb2luZ01hbmFnZXIuaGFuZGxlU3Vic2NyaXB0aW9uVW5zdWJzY3JpYmVNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLk5lZWRNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN1YnNjcmlwdGlvbk5lZWRNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlJlc3RhcnROZWVkTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuaGFuZGxlU3Vic2NyaXB0aW9uUmVzdGFydE5lZWRNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLkNhblByb3ZpZGVNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuQ2Fubm90UHJvdmlkZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLmhhbmRsZVN1YnNjcmlwdGlvblByb3ZpZGVNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLk1lZGlhU3RyZWFtVW5hdmFpbGFibGU6XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuaGFuZGxlU3Vic2NyaXB0aW9uTWVkaWFTdHJlYW1VbmF2YWlsYWJsZShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuVW5wdWJsaXNoTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuaGFuZGxlQ29udGVudFVucHVibGlzaE1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMub3V0Z29pbmdNYW5hZ2VyLmhhbmRsZUNvbnRlbnRVbnB1Ymxpc2hNZWRpYVN0cmVhbShldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlN1YnNjcmliZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLmhhbmRsZUNvbnRlbnRTdWJzY3JpYmVNZWRpYVN0cmVhbShldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlVwZGF0ZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLmhhbmRsZUNvbnRlbnRVcGRhdGVNZWRpYVN0cmVhbShldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlVuc3Vic2NyaWJlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMub3V0Z29pbmdNYW5hZ2VyLmhhbmRsZUNvbnRlbnRDbG9zZU1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VQdWJTdWJUb3BpYzpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNvbnRlbnRDbG9zZVB1YlN1YlRvcGljKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VPYmplY3RTdG9yZUJ1Y2tldDpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNvbnRlbnRDbG9zZU9iamVjdFN0b3JlKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VLZXlWYWx1ZURhdGFiYXNlOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ29udGVudENsb3NlS2V5VmFsdWVEYXRhYmFzZShldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLmhhbmRsZUNvbnRlbnRSZW1vdGVNZWRpYVN0cmVhbVRyYWNrRmFpbChldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOb2RlU3lzdGVtRXZlbnRzKHsgY29udGVudCB9KSB7XG4gICAgICAgIHN3aXRjaCAoY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIE5vZGVNZXNzYWdlVHlwZS5Ob2RlTGVhdmU6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpcHRpb25zRm9yTm9kZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLmhhbmRsZU9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzKGV2ZW50LnNvdXJjZUlkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5oYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShjb250ZW50KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLm91dGdvaW5nTWFuYWdlci5oYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCk7XG4gICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZSA9PiB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2gobWVzc2FnZSkpO1xuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25TdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgZXZlbnRDb250ZW50KSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLm91dGdvaW5nTWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25TdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgZXZlbnRDb250ZW50KTtcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbklkczogW3NvdXJjZUlkXSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuU3Vic2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlJlc3RhcnROZWVkTWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWFybHlSZXR1cm5FcnJvcignUmVzdGFydCBOZWVkTWVkaWFTdHJlYW0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25OZWVkTWVkaWFTdHJlYW0oc291cmNlSWQsIGV2ZW50Q29udGVudCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5vdXRnb2luZ01hbmFnZXIuaGFuZGxlU3Vic2NyaXB0aW9uTmVlZE1lZGlhU3RyZWFtKHNvdXJjZUlkLCBldmVudENvbnRlbnQpO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbc291cmNlSWRdLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVDb250ZW50Q2xvc2VPYmplY3RTdG9yZSh7IGxhYmVsIH0pIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJbmNvbWluZ1N1YnNjcmlwdGlvbihsYWJlbCwgQ29udGVudFR5cGUuT2JqZWN0U3RvcmUpO1xuICAgICAgICB0aGlzLnJlbW92ZU91dGdvaW5nU3Vic2NyaXB0aW9uKGxhYmVsLCBDb250ZW50VHlwZS5PYmplY3RTdG9yZSk7XG4gICAgfVxuICAgIGhhbmRsZUNvbnRlbnRDbG9zZUtleVZhbHVlRGF0YWJhc2UoeyBsYWJlbCB9KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSW5jb21pbmdTdWJzY3JpcHRpb24obGFiZWwsIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2UpO1xuICAgICAgICB0aGlzLnJlbW92ZU91dGdvaW5nU3Vic2NyaXB0aW9uKGxhYmVsLCBDb250ZW50VHlwZS5LZXlWYWx1ZURhdGFiYXNlKTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudENsb3NlUHViU3ViVG9waWMoeyBsYWJlbCB9KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSW5jb21pbmdTdWJzY3JpcHRpb24obGFiZWwsIENvbnRlbnRUeXBlLlB1YlN1Yik7XG4gICAgICAgIHRoaXMucmVtb3ZlT3V0Z29pbmdTdWJzY3JpcHRpb24obGFiZWwsIENvbnRlbnRUeXBlLlB1YlN1Yik7XG4gICAgfVxuICAgIHJlbW92ZVN1YnNjcmlwdGlvbnNGb3JOb2RlKHsgaWQgfSkge1xuICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5yZW1vdmVTdWJzY3JpcHRpb25zRm9yTm9kZShpZCk7XG4gICAgICAgIHRoaXMub3V0Z29pbmdNYW5hZ2VyLnJlbW92ZVN1YnNjcmlwdGlvbnNGb3JOb2RlKGlkKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgZ2V0UHJlZml4LCBnZXRTdWJzY3JpcHRpb25MYWJlbCwgZ2V0VG9waWNMYWJlbCB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vSGVscGVycyc7XG5pbXBvcnQgeyBUb3BpYyB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vVG9waWMnO1xuZXhwb3J0IGNsYXNzIFN1YnNjcmlwdGlvbk1hcHMge1xuICAgIG1hcHMgPSB7XG4gICAgICAgIHRvcGljczogbmV3IE1hcCgpLFxuICAgICAgICBzdWJzY3JpcHRpb25zOiBuZXcgTWFwKCksXG4gICAgfTtcbiAgICBnZXRQYXJ0c0Zyb21TdWJzY3JpcHRpb247XG4gICAgY29uc3RydWN0b3IoZ2V0UGFydHNGcm9tU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuZ2V0UGFydHNGcm9tU3Vic2NyaXB0aW9uID0gZ2V0UGFydHNGcm9tU3Vic2NyaXB0aW9uO1xuICAgIH1cbiAgICBnZXQgc3Vic2NyaXB0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zO1xuICAgIH1cbiAgICBnZXQgdG9waWNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBzLnRvcGljcztcbiAgICB9XG4gICAgY3JlYXRlU3Vic2NyaXB0aW9uKHN1YlR5cGUsIHN1YnNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHRoaXMuZ2V0UGFydHNGcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIGNvbnN0IHN1YlByZWZpeCA9IGdldFByZWZpeChzdWJUeXBlKTtcbiAgICAgICAgaWYgKCFwYXJ0cy5zdXBwb3J0c0NvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkludmFsaWRTdWJzY3JpcHRpb24sIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgJHtzdWJQcmVmaXh9OiAke3BhcnRzLnJlbW90ZUlkfSBkb2VzIG5vdCBzdXBwb3J0IGNvbnRlbnQgdHlwZSAke3BhcnRzLmNvbnRlbnRUeXBlfWAsXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogc3ViVHlwZSxcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0b25QYXJ0czogcGFydHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25MYWJlbCA9IGdldFN1YnNjcmlwdGlvbkxhYmVsKHN1YlR5cGUsIHBhcnRzKTtcbiAgICAgICAgaWYgKHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmhhcyhzdWJzY3JpcHRpb25MYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFN1YnNjcmlwdGlvbiwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGAke3N1YlByZWZpeH06ICR7c3Vic2NyaXB0aW9uTGFiZWx9IGFscmVhZHkgZXhpc3RzYCxcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25UeXBlOiBzdWJUeXBlLFxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRvblBhcnRzOiBwYXJ0cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLnNldChzdWJzY3JpcHRpb25MYWJlbCwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5jcmVhdGVUb3BpYyhwYXJ0cywgc3Vic2NyaXB0aW9uKTtcbiAgICB9XG4gICAgcmVtb3ZlU3Vic2NyaXB0aW9uKHBhcnRzLCBzdWJUeXBlKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkxhYmVsID0gZ2V0U3Vic2NyaXB0aW9uTGFiZWwoc3ViVHlwZSwgcGFydHMpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5nZXQoc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkU3Vic2NyaXB0aW9uLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYCR7Z2V0UHJlZml4KHN1YlR5cGUpfTogJHtzdWJzY3JpcHRpb25MYWJlbH0gZG9lcyBub3QgZXhpc3RzYCxcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25UeXBlOiBzdWJUeXBlLFxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRvblBhcnRzOiBwYXJ0cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCwgcGFydHMpO1xuICAgIH1cbiAgICBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvbkxhYmVsLCBwYXJ0cykge1xuICAgICAgICBwYXJ0cyA9IHBhcnRzIHx8IHRoaXMuZ2V0UGFydHNGcm9tU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIHRoaXMucmVtb3ZlVG9waWMocGFydHMsIHN1YnNjcmlwdGlvbik7XG4gICAgfVxuICAgIGNyZWF0ZVRvcGljKHBhcnRzLCB7IHNvdXJjZSwgZGVzdGluYXRpb24gfSkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRUeXBlLCBsYWJlbCwgcmVtb3RlSWQgfSA9IHBhcnRzO1xuICAgICAgICBjb25zdCB0b3BpY0xhYmVsID0gZ2V0VG9waWNMYWJlbChjb250ZW50VHlwZSwgbGFiZWwsIHJlbW90ZUlkKTtcbiAgICAgICAgY29uc3QgdG9waWMgPSBuZXcgVG9waWModG9waWNMYWJlbCwgY29udGVudFR5cGUpO1xuICAgICAgICB0b3BpYy5yZWdpc3RlclNvdXJjZShzb3VyY2UpO1xuICAgICAgICB0b3BpYy5yZWdpc3RlckRlc3RpbmF0aW9uKGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5tYXBzLnRvcGljcy5zZXQodG9waWMuZ2V0TGFiZWwoKSwgdG9waWMpO1xuICAgIH1cbiAgICByZW1vdmVUb3BpYyhwYXJ0cywgc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudFR5cGUsIGxhYmVsLCByZW1vdGVJZCB9ID0gcGFydHM7XG4gICAgICAgIGNvbnN0IHRvcGljTGFiZWwgPSBnZXRUb3BpY0xhYmVsKGNvbnRlbnRUeXBlLCBsYWJlbCwgcmVtb3RlSWQpO1xuICAgICAgICBjb25zdCB0b3BpYyA9IHRoaXMubWFwcy50b3BpY3MuZ2V0KHRvcGljTGFiZWwpO1xuICAgICAgICBpZiAoIXRvcGljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZVRvcGljKHRvcGljLCBzdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLm1hcHMudG9waWNzLmRlbGV0ZSh0b3BpY0xhYmVsKTtcbiAgICB9XG4gICAgY2xvc2VUb3BpYyh0b3BpYywgeyBzb3VyY2UsIGRlc3RpbmF0aW9uIH0pIHtcbiAgICAgICAgdG9waWMudW5yZWdpc3RlclNvdXJjZShzb3VyY2UpO1xuICAgICAgICB0b3BpYy51bnJlZ2lzdGVyRGVzdGluYXRpb24oZGVzdGluYXRpb24pO1xuICAgIH1cbiAgICByZW1vdmVTdWJzY3JpcHRpb25zRm9yTm9kZShub2RlSWQpIHtcbiAgICAgICAgdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkxhYmVsLmVuZHNXaXRoKG5vZGVJZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTVUJTQ1JJUFRJT05fTUFYX1JFVFJZX0NPVU5UIH0gZnJvbSAnY29uc3RhbnRzL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25SZXF1ZXN0IHtcbiAgICBjdXJyZW50RGlzdGFuY2U7XG4gICAgbWF4RGlzdGFuY2U7XG4gICAgdHJhY2tzO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGFuc3dlcnMgPSBuZXcgU2V0KCk7XG4gICAgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBwYXJhbXM7XG4gICAgcmV0cnlDb3VudCA9IDA7XG4gICAgY29uc3RydWN0b3Iobm9kZUlkcywgY3VycmVudERpc3RhbmNlLCBtYXhEaXN0YW5jZSwgdHJhY2tzKSB7XG4gICAgICAgIHRoaXMuY3VycmVudERpc3RhbmNlID0gY3VycmVudERpc3RhbmNlO1xuICAgICAgICB0aGlzLm1heERpc3RhbmNlID0gbWF4RGlzdGFuY2U7XG4gICAgICAgIHRoaXMudHJhY2tzID0gdHJhY2tzO1xuICAgICAgICBub2RlSWRzLmZvckVhY2goKG5vZGVJZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hbnN3ZXJzLmFkZCh7XG4gICAgICAgICAgICAgICAgbm9kZUlkOiBub2RlSWQsXG4gICAgICAgICAgICAgICAgdHlwZTogU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUuV2FpdGluZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRUcmFja3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrcztcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICByZXNldChub2RlSWRzLCBjdXJyZW50RGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLmFuc3dlcnMuY2xlYXIoKTtcbiAgICAgICAgbm9kZUlkcy5mb3JFYWNoKChub2RlSWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5zd2Vycy5hZGQoe1xuICAgICAgICAgICAgICAgIG5vZGVJZDogbm9kZUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlLldhaXRpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZXRyeUNvdW50ICs9IDE7XG4gICAgICAgIHRoaXMuY3VycmVudERpc3RhbmNlID0gY3VycmVudERpc3RhbmNlO1xuICAgIH1cbiAgICBzZW5kUmVxdWVzdChsb2NhbElkLCBvd25lcklkLCBsYWJlbCwgdHJhY2tLaW5kcywgcGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnJldHJ5Q291bnQgPiBTVUJTQ1JJUFRJT05fTUFYX1JFVFJZX0NPVU5UKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLlN1YnNjcmlwdGlvblJlcXVlc3ROb0Fuc3dlciwge1xuICAgICAgICAgICAgICAgIGFuc3dlcnM6IEFycmF5LmZyb20odGhpcy5hbnN3ZXJzKS5tYXAoKGFuc3dlcikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiBhbnN3ZXIubm9kZUlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBhbnN3ZXIudHlwZSxcbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2RlSWRzID0gQXJyYXkuZnJvbSh0aGlzLmFuc3dlcnMpLm1hcCgoYW5zd2VyKSA9PiBhbnN3ZXIubm9kZUlkKTtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogbG9jYWxJZCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBub2RlSWRzLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5OZWVkTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgICAgICB0cmFja0tpbmRzLFxuICAgICAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdWJzY3JpcHRpb24sICdTZW5kIHJlcXVlc3QnLCBsb2NhbElkLCBub2RlSWRzKTtcbiAgICB9XG4gICAgaGFuZGxlU3Vic2NyaXB0aW9uU3lzdGVtRXZlbnRzKHNvdXJjZUlkLCBjb250ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLkNhblByb3ZpZGVNZWRpYVN0cmVhbToge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbkFjY2VwdCA9IHRoaXMuY3VycmVudERpc3RhbmNlID49IGNvbnRlbnQuZGlzdGFuY2UgJiYgY29udGVudC5kaXN0YW5jZSA8PSB0aGlzLm1heERpc3RhbmNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IEFycmF5LmZyb20odGhpcy5hbnN3ZXJzKS5maW5kKChhbnN3ZXIpID0+IGFuc3dlci5ub2RlSWQgPT09IHNvdXJjZUlkKTtcbiAgICAgICAgICAgICAgICBhbnN3ZXIudHlwZSA9IGNhbkFjY2VwdCA/IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlLkFjY2VwdGVkIDogU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUuUmVqZWN0ZWQ7XG4gICAgICAgICAgICAgICAgYW5zd2VyLmNvc3QgPSBjb250ZW50LmNvc3Q7XG4gICAgICAgICAgICAgICAgYW5zd2VyLmRpc3RhbmNlID0gY29udGVudC5kaXN0YW5jZTtcbiAgICAgICAgICAgICAgICBhbnN3ZXIuc3RyZWFtSWQgPSBjb250ZW50LnN0cmVhbUlkO1xuICAgICAgICAgICAgICAgIGFuc3dlci5yb3VuZFRyaXBUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgICAgICAgICAgICAgIGFuc3dlci5wYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgICAgICAgICAgICAgICBhbnN3ZXIub3duZXJJZCA9IGNvbnRlbnQub3duZXJJZDtcbiAgICAgICAgICAgICAgICBhbnN3ZXIudHJhY2tLaW5kcyA9IGNvbnRlbnQudHJhY2tLaW5kcztcbiAgICAgICAgICAgICAgICBhbnN3ZXIuc3RyZWFtTGFiZWwgPSBjb250ZW50LmxhYmVsO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1YnNjcmlwdGlvbiwgYCR7Y2FuQWNjZXB0ID8gJ0FjY2VwdGVkJyA6ICdSZWplY3RlZCd9IGFuc3dlcmAsIGFuc3dlcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLkNhbm5vdFByb3ZpZGVNZWRpYVN0cmVhbToge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFuc3dlciA9IEFycmF5LmZyb20odGhpcy5hbnN3ZXJzKS5maW5kKChhbnN3ZXIpID0+IGFuc3dlci5ub2RlSWQgPT09IHNvdXJjZUlkKTtcbiAgICAgICAgICAgICAgICBhbnN3ZXIudHlwZSA9IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlLlJlamVjdGVkO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1YnNjcmlwdGlvbiwgJ1JlamVjdGVkIGFuc3dlcicsIGFuc3dlcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2FuQ2hvb3NlQW5zd2VyKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNob29zZUFuc3dlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNob29zZUFuc3dlcigpIHtcbiAgICAgICAgY29uc3QgYW5zd2VycyA9IEFycmF5LmZyb20odGhpcy5hbnN3ZXJzKVxuICAgICAgICAgICAgLmZpbHRlcigoYW5zd2VyKSA9PiBhbnN3ZXIudHlwZSA9PT0gU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUuQWNjZXB0ZWQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEuY29zdCA9PT0gYi5jb3N0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGEucm91bmRUcmlwVGltZSAtIGIucm91bmRUcmlwVGltZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhLmNvc3QgLSBiLmNvc3Q7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYW5zd2Vycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdE5vQW5zd2VyLCB7XG4gICAgICAgICAgICAgICAgYW5zd2VyczogQXJyYXkuZnJvbSh0aGlzLmFuc3dlcnMpLm1hcCgoYW5zd2VyKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IGFuc3dlci5ub2RlSWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGFuc3dlci50eXBlLFxuICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1YnNjcmlwdGlvbiwgJ0Nob3NlbiBhbnN3ZXInLCBhbnN3ZXJzWzBdLCB0aGlzLmFuc3dlcnMpO1xuICAgICAgICByZXR1cm4gYW5zd2Vyc1swXTtcbiAgICB9XG4gICAgY2FuQ2hvb3NlQW5zd2VyKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFuc3dlciBvZiB0aGlzLmFuc3dlcnMpIHtcbiAgICAgICAgICAgIGlmIChhbnN3ZXIudHlwZSA9PT0gU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUuV2FpdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUMgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJ3V0aWxzL09ic2VydmVyL09ic2VydmVyJztcbmV4cG9ydCBjbGFzcyBTeXN0ZW1Ub3BpYyB7XG4gICAgbGFiZWw7XG4gICAgbGlzdGVuZXIgPSBjcmVhdGVPYnNlcnZlcigpO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxhYmVsID0gU1lTVEVNX1RPUElDO1xuICAgIH1cbiAgICBnZXRMYWJlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWw7XG4gICAgfVxuICAgIGdldENvbnRlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gQ29udGVudFR5cGUuRGF0YTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTb3VyY2Uoc291cmNlKSB7XG4gICAgICAgIHNvdXJjZS5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcih0aGlzKTtcbiAgICB9XG4gICAgdW5yZWdpc3RlclNvdXJjZShzb3VyY2UpIHtcbiAgICAgICAgc291cmNlLnVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKTtcbiAgICB9XG4gICAgcHVibGlzaChjb250ZW50KSB7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkV2ZW50cywgJ1N5c3RlbVRvcGljIHB1Ymxpc2gnLCBjb250ZW50LnNvdXJjZUlkLCBjb250ZW50KTtcbiAgICAgICAgdGhpcy5saXN0ZW5lci5wdWJsaXNoKHtcbiAgICAgICAgICAgIHRvcGljTGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogQ29udGVudFR5cGUuRGF0YSxcbiAgICAgICAgICAgIHV1aWQ6IGNvbnRlbnQudXVpZCA/PyB1dWlkdjQoKSxcbiAgICAgICAgICAgIHJlY2lwaWVudHM6IGNvbnRlbnQucmVjaXBpZW50cyA/PyBbXSxcbiAgICAgICAgICAgIC4uLmNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IGNyZWF0ZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIFRvcGljIHtcbiAgICBsYWJlbDtcbiAgICBjb250ZW50VHlwZTtcbiAgICBsaXN0ZW5lciA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgY29uc3RydWN0b3IobGFiZWwsIGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICAgICAgdGhpcy5jb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlO1xuICAgIH1cbiAgICBnZXRMYWJlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWw7XG4gICAgfVxuICAgIGdldENvbnRlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50VHlwZTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTb3VyY2Uoc291cmNlKSB7XG4gICAgICAgIHNvdXJjZS5yZWdpc3RlclB1Ymxpc2hlcih0aGlzKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJEZXN0aW5hdGlvbihkZXN0aW5hdGlvbikge1xuICAgICAgICBkZXN0aW5hdGlvbi5yZWdpc3RlclN1YnNjcmliZXIodGhpcyk7XG4gICAgfVxuICAgIHB1Ymxpc2goY29udGVudCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyLnB1Ymxpc2goe1xuICAgICAgICAgICAgdG9waWNMYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiB0aGlzLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgdXVpZDogdXVpZHY0KCksXG4gICAgICAgICAgICByZWNpcGllbnRzOiBbXSxcbiAgICAgICAgICAgIC4uLmNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgdW5yZWdpc3RlclNvdXJjZShzb3VyY2UpIHtcbiAgICAgICAgc291cmNlLnVucmVnaXN0ZXJQdWJsaXNoZXIodGhpcyk7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJEZXN0aW5hdGlvbihkZXN0aW5hdGlvbikge1xuICAgICAgICBkZXN0aW5hdGlvbi51bnJlZ2lzdGVyU3Vic2NyaWJlcih0aGlzKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIFNESyBDbGllbnQgRXJyb3IgQ29kZXMgLSBBbnkgZXJyb3IgdGhhdCBpcyB0aHJvd24gYnkgdGhlIFNESyB3aWxsIGhhdmUgYSBjb2RlIHRoYXQgY2FuIGJlIHVzZWQgdG8gaWRlbnRpZnkgdGhlIGVycm9yLlxuICogQGNhdGVnb3J5IENvcmVcbiAqL1xuZXhwb3J0IHZhciBTREtDbGllbnRFcnJvckNvZGVzO1xuKGZ1bmN0aW9uIChTREtDbGllbnRFcnJvckNvZGVzKSB7XG4gICAgLyoqXG4gICAgICogVGhlIGNsdXN0ZXIgaGFzIGFscmVhZHkgYmVlbiBqb2luZWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkNsdXN0ZXJBbHJlYWR5Sm9pbmVkXCJdID0gXCJjbHVzdGVyLWFscmVhZHktam9pbmVkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGZlYXR1cmUgaXMgbm90IGVuYWJsZWQuIENvbnRhY3Qgb3VyIHN1cHBvcnQgdGVhbSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiRmVhdHVyZU5vdEVuYWJsZWRcIl0gPSBcImZlYXR1cmUtbm90LWVuYWJsZWRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgb2JqZWN0IHN0b3JlIGFscmVhZHkgZXhpc3RzLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJPYmplY3RTdG9yZUFscmVhZHlFeGlzdHNcIl0gPSBcIm9iamVjdC1zdG9yZS1hbHJlYWR5LWV4aXN0c1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBvYmplY3Qgc3RvcmUgaXMgYWxyZWFkeSBzdWJzY3JpYmVkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJPYmplY3RTdG9yZUFscmVhZHlTdWJzY3JpYmVkXCJdID0gXCJvYmplY3Qtc3RvcmUtYWxyZWFkeS1zdWJzY3JpYmVkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG9iamVjdCBzdG9yZSBkb2VzIG5vdCBleGlzdC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVEb2VzTm90RXhpc3RcIl0gPSBcIm9iamVjdC1zdG9yZS1zdHJlYW0tZG9lcy1ub3QtZXhpc3RcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgb2JqZWN0IHN0b3JlIG5hbWUgaXMgbm90IGEgc3RyaW5nLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJPYmplY3RTdG9yZU5hbWVOb3RTdHJpbmdcIl0gPSBcIm9iamVjdC1zdG9yZS1uYW1lLW5vdC1zdHJpbmdcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgb2JqZWN0IHN0b3JlIHBheWxvYWQgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVJbnZhbGlkUGF5bG9hZFwiXSA9IFwib2JqZWN0LXN0b3JlLWludmFsaWQtcGF5bG9hZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwYXRoIGlzIGludmFsaWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIk9iamVjdFN0b3JlSW52YWxpZFBhdGhcIl0gPSBcIm9iamVjdC1zdG9yZS1pbnZhbGlkLXBhdGhcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgb2JqZWN0IHN0b3JlIGlzIG5vdCBzeW5jaHJvbml6ZWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIk9iamVjdFN0b3JlTm90SW5TeW5jXCJdID0gXCJvYmplY3Qtc3RvcmUtbm90LWluLXN5bmNcIjtcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBTREsgZXJyb3IuIENvbnRhY3Qgb3VyIHN1cHBvcnQgdGVhbSBpZiB0aGUgZXJyb3IgcGVyc2lzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkludGVybmFsU0RLRXJyb3JcIl0gPSBcImludGVybmFsLXNkay1lcnJvclwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBrZXktdmFsdWUgZGF0YWJhc2UgYWxyZWFkeSBleGlzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VBbHJlYWR5RXhpc3RzXCJdID0gXCJrZXktdmFsdWUtZGF0YWJhc2UtYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUga2V5LXZhbHVlIGRhdGFiYXNlIGRvZXMgbm90IGV4aXN0cy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiS2V5VmFsdWVEYXRhYmFzZURvZXNOb3RFeGlzdFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIGtleS12YWx1ZSBkYXRhYmFzZSBpbmRleCB3YXMgbm90IGZvdW5kLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlSW5kZXhOb3RGb3VuZFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLWluZGV4LW5vdC1mb3VuZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBrZXktdmFsdWUgZGF0YWJhc2UgcXVlcnkgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiS2V5VmFsdWVEYXRhYmFzZUludmFsaWRRdWVyeVwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLWludmFsaWQtcXVlcnlcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiS2V5VmFsdWVEYXRhYmFzZUludmFsaWRWYWx1ZVwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLWludmFsaWQtdmFsdWVcIjtcbiAgICAvKipcbiAgICAgKiBUaGUga2V5LXZhbHVlIGRhdGFiYXNlIG5hbWUgaXMgbm90IGEgc3RyaW5nLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlTmFtZU5vdFN0cmluZ1wiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLW5hbWUtbm90LXN0cmluZ1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBrZXktdmFsdWUgZGF0YWJhc2UgaXMgbm90IG9wZW4uXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VOb3RPcGVuXCJdID0gXCJrZXktdmFsdWUtZGF0YWJhc2Utbm90LW9wZW5cIjtcbiAgICAvKipcbiAgICAgKiBUaGUga2V5LXZhbHVlIGRhdGFiYXNlIG5hbWUgaXMgcmVzZXJ2ZWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VUYWJsZU5hbWVSZXNlcnZlZFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLXRhYmxlLW5hbWUtcmVzZXJ2ZWRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUga2V5LXZhbHVlIGRhdGFiYXNlIHRhYmxlIHdhcyBub3QgZm91bmQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VUYWJsZU5vdEZvdW5kXCJdID0gXCJrZXktdmFsdWUtZGF0YWJhc2UtdGFibGUtbm90LWZvdW5kXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGtleS12YWx1ZSBkYXRhYmFzZSBsYXlvdXQgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiS2V5VmFsdWVEYXRhYmFzZUludmFsaWRMYXlvdXRcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS1pbnZhbGlkLWxheW91dFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBtZWRpYSBzdHJlYW0gYWxyZWFkeSBleGlzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkxvY2FsTWVkaWFTdHJlYW1BbHJlYWR5RXhpc3RzXCJdID0gXCJsb2NhbC1tZWRpYS1zdHJlYW0tYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgbWVkaWEgc3RyZWFtIG5lZWRzIGFuIGF1ZGlvIGNvbnRleHQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkxvY2FsTWVkaWFTdHJlYW1Ob0F1ZGlvQ29udGV4dFwiXSA9IFwibG9jYWwtbWVkaWEtc3RyZWFtLW5vLWF1ZGlvLWNvbnRleHRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcHViL3N1YiB0b3BpYyBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiUHViU3ViVG9waWNBbHJlYWR5RXhpc3RzXCJdID0gXCJwdWItc3ViLXRvcGljLWFscmVhZHktZXhpc3RzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHB1Yi9zdWIgdG9waWMgZG9lcyBub3QgZXhpc3QuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIlB1YlN1YlRvcGljRG9lc05vdEV4aXN0XCJdID0gXCJwdWItc3ViLXRvcGljLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHB1Yi9zdWIgdG9waWMgbmFtZSBpcyBub3QgYSBzdHJpbmcuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIlB1YlN1YlRvcGljTmFtZU5vdFN0cmluZ1wiXSA9IFwicHViLXN1Yi10b3BpYy1uYW1lLW5vdC1zdHJpbmdcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcHViL3N1YiB0b3BpYyBpcyBhbHJlYWR5IHN1YnNjcmliZWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIlB1YlN1YlRvcGljQWxyZWFkeVN1YnNjcmliZWRcIl0gPSBcInB1Yi1zdWItdG9waWMtYWxyZWFkeS1zdWJzY3JpYmVkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGJ1aWxkZXIgYXJndW1lbnQgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50XCJdID0gXCJxdWVyeS1oZWxwZXItaW52YWxpZC1hcmd1bWVudFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSByZW1vdGUgbWVkaWEgc3RyZWFtIGFscmVhZHkgZXhpc3RzLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJSZW1vdGVNZWRpYVN0cmVhbUFscmVhZHlFeGlzdHNcIl0gPSBcInJlbW90ZS1tZWRpYS1zdHJlYW0tYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVtb3RlIG1lZGlhIHN0cmVhbSBzdWJzY3JpcHRpb24gcGFyYW1ldGVycyBhcmUgaW52YWxpZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiUmVtb3RlTWVkaWFTdHJlYW1JbnZhbGlkU3Vic2NyaXB0aW9uUGFyYW1zXCJdID0gXCJyZW1vdGUtbWVkaWEtc3RyZWFtLWludmFsaWQtc3Vic2NyaXB0aW9uLXBhcmFtc1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBzdWJzY3JpcHRpb24gcmVxdWVzdCBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiU3Vic2NyaXB0aW9uUmVxdWVzdEluUHJvZ3Jlc3NcIl0gPSBcInN1YnNjcmlwdGlvbi1yZXF1ZXN0LWluLXByb2dyZXNzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5vZGUgaXMgbm90IGF1dGhlbnRpY2F0ZWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIk5vZGVOb3RBdXRoZW50aWNhdGVkXCJdID0gXCJub2RlLW5vdC1hdXRoZW50aWNhdGVkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5vZGUgdHlwZSBpcyBpbnZhbGlkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJOb2RlSW52YWxpZFR5cGVcIl0gPSBcIm5vZGUtaW52YWxpZC10eXBlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG5vZGUgdHlwZSBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJOb2RlVHlwZU5vdFN1cHBvcnRlZFwiXSA9IFwibm9kZS10eXBlLW5vdC1zdXBwb3J0ZWRcIjtcbn0pKFNES0NsaWVudEVycm9yQ29kZXMgfHwgKFNES0NsaWVudEVycm9yQ29kZXMgPSB7fSkpO1xuLyoqXG4gKiBTREsgQ2xpZW50IEVycm9yIC0gQW55IGVycm9yIHRoYXQgaXMgdGhyb3duIGJ5IHRoZSBTREsgd2lsbCBiZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICogQGNhdGVnb3J5IENvcmVcbiAqL1xuZXhwb3J0IGNsYXNzIFNES0NsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvZGU7XG4gICAgLyoqXG4gICAgICogVGhyb3dzIGFuIGVycm9yIHdpdGggdGhlIGdpdmVuIGNvZGUgYW5kIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIGNvZGUgVGhlIGVycm9yIGNvZGVcbiAgICAgKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIG1lc3NhZ2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2RlLCBlcnJvcikge1xuICAgICAgICBzdXBlcihlcnJvcik7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBBIGxheW91dCBidWlsZGVyIGZvciB0aGUge0BsaW5rIElLZXlWYWx1ZURhdGFiYXNlfS5cbiAqIEBjYXRlZ29yeSBLZXktVmFsdWUgRGF0YWJhc2VcbiAqL1xuZXhwb3J0IGNsYXNzIExheW91dEJ1aWxkZXIge1xuICAgIGxheW91dDtcbiAgICBjb25zdHJ1Y3Rvcih2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMubGF5b3V0ID0ge1xuICAgICAgICAgICAgdGFibGVzOiB7fSxcbiAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhIGxheW91dC5cbiAgICAgKiBAcGFyYW0gbGF5b3V0IFRoZSBsYXlvdXQgdG8gdmFsaWRhdGUuXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGUgbGF5b3V0IGlzIHZhbGlkLCBhbmQgYSBkZXNjcmlwdGl2ZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZUxheW91dChsYXlvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbGF5b3V0KSB7XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSAndmVyc2lvbicgJiYga2V5ICE9PSAndGFibGVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbZmFsc2UsIGBJbnZhbGlkIGtleSAnJHtrZXl9JyBpbiBsYXlvdXRgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChrZXkgIT09ICd0YWJsZXMnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3ZlcnNpb24nICYmIHR5cGVvZiBsYXlvdXRba2V5XSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgYEludmFsaWQgdmVyc2lvbiAnJHtsYXlvdXRba2V5XX0nIGluIGxheW91dDogVmVyc2lvbiBtdXN0IGJlIGEgbnVtYmVyYF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0YWJsZSBpbiBsYXlvdXQudGFibGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YWJsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgYEludmFsaWQgdGFibGUgbmFtZSAnJHt0YWJsZX0nYF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFibGVLZXkgaW4gbGF5b3V0LnRhYmxlc1t0YWJsZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlS2V5ICE9PSAnaW5kZXhlcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZmFsc2UsIGBJbnZhbGlkIGtleSAnJHt0YWJsZUtleX0nIGluIHRhYmxlICcke3RhYmxlfSdgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleGVzID0gbGF5b3V0LnRhYmxlc1t0YWJsZV1bdGFibGVLZXldID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleC5rZXlQYXRoID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIGluZGV4LmtleVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgYEludmFsaWQgaW5kZXggaW4gdGFibGUgJyR7dGFibGV9JzogbWlzc2luZyBvciBpbnZhbGlkIGtleVBhdGhgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3RydWUsICdWYWxpZCBsYXlvdXQnXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGxheW91dCBidWlsZGVyLlxuICAgICAqIEBwYXJhbSB2ZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBsYXlvdXQuXG4gICAgICogQHJldHVybnMgQSBsYXlvdXQgYnVpbGRlci5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGF5b3V0KHZlcnNpb24pIHtcbiAgICAgICAgY29uc3QgYnVpbGRlciA9IG5ldyBMYXlvdXRCdWlsZGVyKHZlcnNpb24pO1xuICAgICAgICBidWlsZGVyLmxheW91dC52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgcmV0dXJuIGJ1aWxkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSB0YWJsZSB0byB0aGUgbGF5b3V0LlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSB0YWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIHRhYmxlIGJ1aWxkZXIuXG4gICAgICovXG4gICAgdGFibGUobmFtZSkge1xuICAgICAgICB0aGlzLmxheW91dC50YWJsZXNbbmFtZV0gPSB7fTtcbiAgICAgICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGVCdWlsZGVyKHRoaXMubGF5b3V0LnRhYmxlc1tuYW1lXSk7XG4gICAgICAgIHJldHVybiB0YWJsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbGF5b3V0LlxuICAgICAqIEByZXR1cm5zIFRoZSBsYXlvdXQ6IHtAbGluayBJRGF0YWJhc2VMYXlvdXR9LlxuICAgICAqL1xuICAgIGdldExheW91dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0O1xuICAgIH1cbn1cbi8qKlxuICogQSB0YWJsZSBidWlsZGVyIGZvciB0aGUge0BsaW5rIElLZXlWYWx1ZURhdGFiYXNlfS5cbiAqIEBjYXRlZ29yeSBLZXktVmFsdWUgRGF0YWJhc2VcbiAqL1xuZXhwb3J0IGNsYXNzIFRhYmxlQnVpbGRlciB7XG4gICAgdGFibGVMYXlvdXQ7XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRhYmxlTGF5b3V0KSB7XG4gICAgICAgIHRoaXMudGFibGVMYXlvdXQgPSB0YWJsZUxheW91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBpbmRleCB0byB0aGUgdGFibGUuXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluZGV4LlxuICAgICAqIEByZXR1cm5zIFRoZSB0YWJsZSBidWlsZGVyLlxuICAgICAqL1xuICAgIGluZGV4KG5hbWUpIHtcbiAgICAgICAgdGhpcy50YWJsZUxheW91dC5pbmRleGVzID0gdGhpcy50YWJsZUxheW91dC5pbmRleGVzID8/IFtdO1xuICAgICAgICB0aGlzLnRhYmxlTGF5b3V0LmluZGV4ZXMucHVzaCh7IGtleVBhdGg6IG5hbWUgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNES0NsaWVudEVycm9yLCBTREtDbGllbnRFcnJvckNvZGVzIH0gZnJvbSAnLi4vLi4vZXJyb3JzL1NES0NsaWVudEVycm9yJztcbi8qKlxuICogQSBRdWVyeUJ1aWxkZXIgaGVscGVyIGZvciBidWlsZGluZyBxdWVyaWVzIGZvciB0aGUge0BsaW5rIElEYXRhYmFzZVRhYmxlfS5cbiAqIEBjYXRlZ29yeSBLZXktVmFsdWUgRGF0YWJhc2VcbiAqL1xuZXhwb3J0IGNsYXNzIFF1ZXJ5QnVpbGRlciB7XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHF1ZXJ5O1xuICAgIC8qKlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihrZXkpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHtcbiAgICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAnYXNjJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBrZXkgdG8gcXVlcnkgb24uIFRoaXMgaXMgdGhlIG1ldGhvZCB0byBjYWxsIHRvIGluaXRpYXRlIGFueSBxdWVyeS5cbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBpbmRleCBrZXkgdG8gcXVlcnkgb24uXG4gICAgICogQHJldHVybnMgQSBRdWVyeUJ1aWxkZXIgaW5zdGFuY2UuXG4gICAgICogQHRocm93cyBhbiBTREtDbGllbnRFcnJvciB3aXRoIHRoZSBjb2RlIGBTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudGAgYW5kIGEgZGVzY3JpcHRpdmUgbWVzc2FnZSBpZiB0aGUgcXVlcnkgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgaW5kZXgoa2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJyB8fCBrZXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5RdWVyeUJ1aWxkZXJJbnZhbGlkQXJndW1lbnQsICdJbnZhbGlkIGluZGV4IGtleTogbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlCdWlsZGVyKGtleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gdmFsaWRhdGUuXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGUgcXVlcnkgaXMgdmFsaWQuXG4gICAgICogQHRocm93cyBhbiBTREtDbGllbnRFcnJvciB3aXRoIHRoZSBjb2RlIGBTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudGAgYW5kIGEgZGVzY3JpcHRpdmUgbWVzc2FnZSBpZiB0aGUgcXVlcnkgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVRdWVyeShxdWVyeSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgUXVlcnlCdWlsZGVyLmJ1aWxkUXVlcnkocXVlcnkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIGJ1aWxkLlxuICAgICAqIEByZXR1cm5zIEEgUXVlcnlCdWlsZGVyIGluc3RhbmNlLlxuICAgICAqIEB0aHJvd3MgYW4gU0RLQ2xpZW50RXJyb3Igd2l0aCB0aGUgY29kZSBgU0RLQ2xpZW50RXJyb3JDb2Rlcy5RdWVyeUJ1aWxkZXJJbnZhbGlkQXJndW1lbnRgIGFuZCBhIGRlc2NyaXB0aXZlIG1lc3NhZ2UgaWYgdGhlIHF1ZXJ5IGlzIGludmFsaWQuXG4gICAgICovXG4gICAgc3RhdGljIGJ1aWxkUXVlcnkocXVlcnkpIHtcbiAgICAgICAgY29uc3QgcXVlcnlCdWlsZGVyID0gUXVlcnlCdWlsZGVyXG4gICAgICAgICAgICAuaW5kZXgocXVlcnkub3JkZXJCeT8ua2V5ID8/IHF1ZXJ5LndoZXJlPy5rZXkgPz8gJycpO1xuICAgICAgICBpZiAocXVlcnkud2hlcmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHdoZXJlID0gcXVlcnkud2hlcmU7XG4gICAgICAgICAgICBpZiAoUXVlcnlCdWlsZGVyLmlzV2hlcmVWYWx1ZSh3aGVyZSkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIud2hlcmUod2hlcmUub3BlcmF0b3IsIHdoZXJlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKFF1ZXJ5QnVpbGRlci5pc1doZXJlVmFsdWVzKHdoZXJlKSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci53aGVyZSh3aGVyZS5vcGVyYXRvciwgd2hlcmUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoUXVlcnlCdWlsZGVyLmlzV2hlcmVCZXR3ZWVuKHdoZXJlKSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci53aGVyZSh3aGVyZS5vcGVyYXRvciwgd2hlcmUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHF1ZXJ5Lm9yZGVyQnk/LmtleSAmJiBxdWVyeS5vcmRlckJ5Py5rZXkgIT09IHF1ZXJ5LndoZXJlLmtleSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudCwgJ0ludmFsaWQgcXVlcnk6IHdoZXJlIGFuZCBvcmRlckJ5IGNsYXVzZXMgbXVzdCB1c2UgdGhlIHNhbWUga2V5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Lm9yZGVyQnkpIHtcbiAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5vcmRlckJ5KHF1ZXJ5Lm9yZGVyQnkuZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVlcnkubGltaXQpIHtcbiAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5saW1pdChxdWVyeS5saW1pdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Lm9mZnNldCkge1xuICAgICAgICAgICAgcXVlcnlCdWlsZGVyLm9mZnNldChxdWVyeS5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBxdWVyeUJ1aWxkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHF1ZXJ5LlxuICAgICAqL1xuICAgIGdldFF1ZXJ5KCkge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLnF1ZXJ5IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSB3aGVyZSBjbGF1c2UgdG8gdGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBvcGVyYXRvciBUaGUgb3BlcmF0b3IgZm9yIHRoZSB3aGVyZSBjbGF1c2UuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSBmb3IgdGhlIHdoZXJlIGNsYXVzZS5cbiAgICAgKiBAcmV0dXJucyBBIFF1ZXJ5QnVpbGRlciBpbnN0YW5jZSB3aXRoIGEgd2hlcmUgY2xhdXNlIGFkZGVkLlxuICAgICAqIEB0aHJvd3MgYW4gU0RLQ2xpZW50RXJyb3Igd2l0aCB0aGUgY29kZSBgU0RLQ2xpZW50RXJyb3JDb2Rlcy5RdWVyeUJ1aWxkZXJJbnZhbGlkQXJndW1lbnRgIGFuZCBhIGRlc2NyaXB0aXZlIG1lc3NhZ2UgaWYgdGhlIHdoZXJlIGNsYXVzZSBpcyBpbnZhbGlkLlxuICAgICAqL1xuICAgIHdoZXJlKG9wZXJhdG9yLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCB3aGVyZSA9IHtcbiAgICAgICAgICAgIGtleTogdGhpcy5xdWVyeS5vcmRlckJ5LmtleSxcbiAgICAgICAgICAgIG9wZXJhdG9yLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghUXVlcnlCdWlsZGVyLmlzV2hlcmVWYWx1ZSh3aGVyZSkgJiYgIVF1ZXJ5QnVpbGRlci5pc1doZXJlVmFsdWVzKHdoZXJlKSAmJiAhUXVlcnlCdWlsZGVyLmlzV2hlcmVCZXR3ZWVuKHdoZXJlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50LCAnSW52YWxpZCB3aGVyZSBjbGF1c2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJ5LndoZXJlID0gd2hlcmU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIG9yZGVyIGJ5IGNsYXVzZSB0byB0aGUgcXVlcnkuXG4gICAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciBmb3IgdGhlIG9yZGVyIGJ5IGNsYXVzZSwgZWl0aGVyICdhc2MnIG9yICdkZXNjJy5cbiAgICAgKiBAcmV0dXJucyBBIFF1ZXJ5QnVpbGRlciBpbnN0YW5jZSB3aXRoIGFuIG9yZGVyIGJ5IGNsYXVzZSBhZGRlZC5cbiAgICAgKiBAdGhyb3dzIGFuIFNES0NsaWVudEVycm9yIHdpdGggdGhlIGNvZGUgYFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50YCBpZiB0aGUgb3JkZXIgaXMgbm90ICdhc2MnIG9yICdkZXNjJy5cbiAgICAgKi9cbiAgICBvcmRlckJ5KG9yZGVyKSB7XG4gICAgICAgIGlmIChvcmRlciAhPT0gJ2FzYycgJiYgb3JkZXIgIT09ICdkZXNjJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50LCAnSW52YWxpZCBvcmRlcjogbXVzdCBiZSBhc2Mgb3IgZGVzYycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVlcnkub3JkZXJCeS5kaXJlY3Rpb24gPSBvcmRlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsaW1pdCB0byB0aGUgcXVlcnkuXG4gICAgICogQHBhcmFtIGxpbWl0IFRoZSBsaW1pdCBmb3IgdGhlIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIEEgUXVlcnlCdWlsZGVyIGluc3RhbmNlIHdpdGggYSBsaW1pdCBhZGRlZC5cbiAgICAgKiBAdGhyb3dzIGFuIFNES0NsaWVudEVycm9yIHdpdGggdGhlIGNvZGUgYFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50YCBpZiB0aGUgbGltaXQgaXMgbm90IGEgcG9zaXRpdmUgbnVtYmVyLlxuICAgICAqL1xuICAgIGxpbWl0KGxpbWl0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgbGltaXQgIT09ICdudW1iZXInIHx8IGxpbWl0IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50LCAnSW52YWxpZCBsaW1pdDogbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVlcnkubGltaXQgPSBsaW1pdDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gb2Zmc2V0IHRvIHRoZSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBvZmZzZXQgZm9yIHRoZSBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyBBIFF1ZXJ5QnVpbGRlciBpbnN0YW5jZSB3aXRoIGFuIG9mZnNldCBhZGRlZC5cbiAgICAgKiBAdGhyb3dzIGFuIFNES0NsaWVudEVycm9yIHdpdGggdGhlIGNvZGUgYFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50YCBhbmQgYSBkZXNjcmlwdGl2ZSBtZXNzYWdlIGlmIHRoZSBvZmZzZXQgaXMgbm90IGEgcG9zaXRpdmUgbnVtYmVyLlxuICAgICAqL1xuICAgIG9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvZmZzZXQgIT09ICdudW1iZXInIHx8IG9mZnNldCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudCwgJ0ludmFsaWQgb2Zmc2V0OiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xdWVyeS5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgc3RhdGljIGlzV2hlcmVWYWx1ZSh3aGVyZSkge1xuICAgICAgICBjb25zdCBpc1doZXJlTGlrZSA9ICh3aGVyZSAmJiB0eXBlb2Ygd2hlcmUgPT09ICdvYmplY3QnICYmICdvcGVyYXRvcicgaW4gd2hlcmUgJiYgJ3ZhbHVlJyBpbiB3aGVyZSkgPz8gZmFsc2U7XG4gICAgICAgIGlmICghaXNXaGVyZUxpa2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG9wZXJhdG9yLCB2YWx1ZSB9ID0gd2hlcmU7XG4gICAgICAgIGlmIChbJz09JywgJyE9JywgJz4nLCAnPCcsICc8PScsICc+PSddLmluY2x1ZGVzKG9wZXJhdG9yKSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHN0YXRpYyBpc1doZXJlVmFsdWVzKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGlzV2hlcmVMaWtlID0gKHdoZXJlICYmIHR5cGVvZiB3aGVyZSA9PT0gJ29iamVjdCcgJiYgJ29wZXJhdG9yJyBpbiB3aGVyZSAmJiAndmFsdWUnIGluIHdoZXJlKSA/PyBmYWxzZTtcbiAgICAgICAgaWYgKCFpc1doZXJlTGlrZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgb3BlcmF0b3IsIHZhbHVlIH0gPSB3aGVyZTtcbiAgICAgICAgaWYgKFsnaW4nLCAnbm90LWluJ10uaW5jbHVkZXMob3BlcmF0b3IpICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNXaGVyZUJldHdlZW4od2hlcmUpIHtcbiAgICAgICAgY29uc3QgaXNXaGVyZUxpa2UgPSAod2hlcmUgJiYgdHlwZW9mIHdoZXJlID09PSAnb2JqZWN0JyAmJiAnb3BlcmF0b3InIGluIHdoZXJlICYmICd2YWx1ZScgaW4gd2hlcmUpID8/IGZhbHNlO1xuICAgICAgICBpZiAoIWlzV2hlcmVMaWtlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBvcGVyYXRvciwgdmFsdWUgfSA9IHdoZXJlO1xuICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdiZXR3ZWVuJyAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBzaWduSW5XaXRoQ3VzdG9tVG9rZW4sIHNpZ25PdXQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbmltcG9ydCB7IGh0dHBzQ2FsbGFibGUgfSBmcm9tICdmaXJlYmFzZS9mdW5jdGlvbnMnO1xuaW1wb3J0IGZpcmViYXNlIGZyb20gJ3NlcnZpY2VzL0ZpcmViYXNlL0ZpcmViYXNlU2VydmljZSc7XG5leHBvcnQgY2xhc3MgRmlyZWJhc2VBdXRoU2VydmljZSB7XG4gICAgdmVuZG9ySWQ7XG4gICAgdXNlcjtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCkge1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgaHR0cHNDYWxsYWJsZShmaXJlYmFzZS5nZXRGdW5jdGlvbnMoKSwgJ3Nka0NyZWF0ZVRva2VuJykoe1xuICAgICAgICAgICAgdWlkOiBgY2NjJHt0aGlzLnZlbmRvcklkfWNjYyR7Y3JlZGVudGlhbHMuaWR9YCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEN1c3RvbVRva2VuKGZpcmViYXNlLmdldEF1dGgoKSwgdG9rZW4uZGF0YS50b2tlbik7XG4gICAgICAgIHRoaXMudXNlciA9IHVzZXJDcmVkZW50aWFsLnVzZXI7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XG4gICAgICAgIGF3YWl0IHNpZ25PdXQoZmlyZWJhc2UuZ2V0QXV0aCgpKTtcbiAgICB9XG4gICAgZ2V0SWRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcj8uZ2V0SWRUb2tlbigpID8/IFByb21pc2UucmVqZWN0KCdVc2VyIG5vdCBzaWduZWQgaW4nKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXQsIG9uQ2hpbGRSZW1vdmVkLCBvbkRpc2Nvbm5lY3QsIG9uVmFsdWUsIHJlZiwgcmVtb3ZlLCBzZXJ2ZXJUaW1lc3RhbXAsIHNldCB9IGZyb20gJ2ZpcmViYXNlL2RhdGFiYXNlJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdzZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7IGNyZWF0ZVNpbmdsZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIEZpcmViYXNlUkRCRGlzY292ZXJ5U2VydmljZSB7XG4gICAgdmVuZG9ySWQ7XG4gICAgY2x1c3RlcklkO1xuICAgIGxvY2FsTm9kZTtcbiAgICBtaW5Db25uZWN0aW9ucztcbiAgICBkaXNjb25uZWN0Q2FsbGJhY2sgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgIGZpcmViYXNlVW5zdWJzY3JpYmVyO1xuICAgIGNoaWxkUmVtb3ZlZFVuc3Vic2NyaWJlcjtcbiAgICBvbkRpc2Nvbm5lY3RIYW5kbGVyO1xuICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGNsdXN0ZXJLZXk7XG4gICAgbm9kZUtleTtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY2x1c3RlcklkLCBsb2NhbE5vZGUsIG1pbkNvbm5lY3Rpb25zKSB7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLm1pbkNvbm5lY3Rpb25zID0gbWluQ29ubmVjdGlvbnM7XG4gICAgICAgIHRoaXMuY2x1c3RlcktleSA9IGBjY2Mke3RoaXMudmVuZG9ySWR9Y2NjJHt0aGlzLmNsdXN0ZXJJZH1gO1xuICAgICAgICB0aGlzLm5vZGVLZXkgPSBgY2NjJHt0aGlzLnZlbmRvcklkfWNjYyR7dGhpcy5sb2NhbE5vZGUuZ2V0SWQoKX1gO1xuICAgICAgICB0aGlzLmZpcmViYXNlVW5zdWJzY3JpYmVyID0gb25WYWx1ZShyZWYoZmlyZWJhc2UuZ2V0RGF0YWJhc2UoKSwgJy5pbmZvL2Nvbm5lY3RlZCcpLCAoc25hcHNob3QpID0+IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdC52YWwoKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ2ZpcmViYXNlLWRpc2Nvbm5lY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9uRGlzY29ubmVjdEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZygnZmlyZWJhc2UtY29ubmVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGpvaW4oKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuam9pbkNsdXN0ZXIoKTtcbiAgICAgICAgY29uc3Qgbm9kZUlkcyA9IGF3YWl0IHRoaXMuZ2V0QW5jZXN0b3JzKCk7XG4gICAgICAgIHRoaXMuY2hpbGRSZW1vdmVkVW5zdWJzY3JpYmVyID0gb25DaGlsZFJlbW92ZWQocmVmKGZpcmViYXNlLmdldERhdGFiYXNlKCksIGBjbHVzdGVycy8ke3RoaXMuY2x1c3RlcktleX0vbm9kZXNgKSwgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlS2V5ID0gc25hcHNob3Qua2V5O1xuICAgICAgICAgICAgaWYgKCFub2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9kZUlkID0gbm9kZUtleS5yZXBsYWNlKGBjY2Mke3RoaXMudmVuZG9ySWR9Y2NjYCwgJycpO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0Q2FsbGJhY2sucHVibGlzaChub2RlSWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5vZGVJZHM7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNoaWxkUmVtb3ZlZFVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNoaWxkUmVtb3ZlZFVuc3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyPy5jYW5jZWwoKTtcbiAgICAgICAgZGVsZXRlIHRoaXMub25EaXNjb25uZWN0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5maXJlYmFzZVVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmZpcmViYXNlVW5zdWJzY3JpYmVyO1xuICAgICAgICBhd2FpdCByZW1vdmUocmVmKGZpcmViYXNlLmdldERhdGFiYXNlKCksIGBjbHVzdGVycy8ke3RoaXMuY2x1c3RlcktleX0vbm9kZXMvJHt0aGlzLm5vZGVLZXl9YCkpO1xuICAgIH1cbiAgICBvbk5vZGVEaXNjb25uZWN0KGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2Nvbm5lY3RDYWxsYmFjay5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICBhc3luYyBnZXRBbmNlc3RvcnMoKSB7XG4gICAgICAgIGNvbnN0IG5vZGVJZHMgPSBbXTtcbiAgICAgICAgY29uc3QgZmJFbnRpdGllcyA9IGF3YWl0IGdldChyZWYoZmlyZWJhc2UuZ2V0RGF0YWJhc2UoKSwgYGNsdXN0ZXJzLyR7dGhpcy5jbHVzdGVyS2V5fS9ub2Rlc2ApKTtcbiAgICAgICAgY29uc3QgYWxsTm9kZXMgPSBbXTtcbiAgICAgICAgZmJFbnRpdGllcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlSWQgPSBub2RlLmtleT8ucmVwbGFjZShgY2NjJHt0aGlzLnZlbmRvcklkfWNjY2AsICcnKTtcbiAgICAgICAgICAgIGFsbE5vZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiBub2RlSWQsXG4gICAgICAgICAgICAgICAgam9pbmVkQXQ6IG5vZGUudmFsKCkuam9pbmVkQXQsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IG5vZGUudmFsKCkucHJpb3JpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFsbE5vZGVzXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5qb2luZWRBdCA9PT0gYi5qb2luZWRBdCA/IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5IDogYS5qb2luZWRBdCAtIGIuam9pbmVkQXQpXG4gICAgICAgICAgICAuc3BsaWNlKGFsbE5vZGVzLmZpbmRJbmRleCgobm9kZSkgPT4gbm9kZS5pZCA9PT0gdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSkpO1xuICAgICAgICBhbGxOb2Rlc1xuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIuam9pbmVkQXQgPT09IGEuam9pbmVkQXQgPyBiLnByaW9yaXR5IC0gYS5wcmlvcml0eSA6IGIuam9pbmVkQXQgLSBhLmpvaW5lZEF0KVxuICAgICAgICAgICAgLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlSWRzLmxlbmd0aCA+PSB0aGlzLm1pbkNvbm5lY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZUlkcy5wdXNoKG5vZGUuaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdkaXNjb3ZlcicsIHtcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBhbmNlc3Rvcklkczogbm9kZUlkcyxcbiAgICAgICAgICAgICAgICBhbGxOb2RlczogYWxsTm9kZXMsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm9kZUlkcztcbiAgICB9XG4gICAgYXN5bmMgam9pbkNsdXN0ZXIoKSB7XG4gICAgICAgIGF3YWl0IHNldChyZWYoZmlyZWJhc2UuZ2V0RGF0YWJhc2UoKSwgYGNsdXN0ZXJzLyR7dGhpcy5jbHVzdGVyS2V5fS9ub2Rlcy8ke3RoaXMubm9kZUtleX1gKSwge1xuICAgICAgICAgICAgam9pbmVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgcHJpb3JpdHk6IE1hdGgucmFuZG9tKCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRPbkRpc2Nvbm5lY3RIYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdEhhbmRsZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyID0gb25EaXNjb25uZWN0KHJlZihmaXJlYmFzZS5nZXREYXRhYmFzZSgpLCBgY2x1c3RlcnMvJHt0aGlzLmNsdXN0ZXJLZXl9L25vZGVzLyR7dGhpcy5ub2RlS2V5fWApKTtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyLnJlbW92ZSgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgZ2V0QXV0aCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xuaW1wb3J0IHsgZ2V0RGF0YWJhc2UsIG9mZiwgb25WYWx1ZSwgcmVmIH0gZnJvbSAnZmlyZWJhc2UvZGF0YWJhc2UnO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGdldEZ1bmN0aW9ucyB9IGZyb20gJ2ZpcmViYXNlL2Z1bmN0aW9ucyc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gJ2Vudmlyb25tZW50cy9FbnZpcm9ubWVudCc7XG5jbGFzcyBGaXJlYmFzZVNlcnZpY2Uge1xuICAgIHN0YXRpYyBpbnN0YW5jZTtcbiAgICBhcHA7XG4gICAgYXV0aDtcbiAgICBmdW5jdGlvbnM7XG4gICAgZGF0YWJhc2U7XG4gICAgZmlyZXN0b3JlO1xuICAgIGNsb2NrU2tldztcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKCFGaXJlYmFzZVNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIEZpcmViYXNlU2VydmljZS5pbnN0YW5jZSA9IG5ldyBGaXJlYmFzZVNlcnZpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRmlyZWJhc2VTZXJ2aWNlLmluc3RhbmNlO1xuICAgIH1cbiAgICBnZXRBcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5hcHApIHtcbiAgICAgICAgICAgIHRoaXMuYXBwID0gaW5pdGlhbGl6ZUFwcChFbnZpcm9ubWVudC5maXJlYmFzZUNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwO1xuICAgIH1cbiAgICBnZXRBdXRoKCkge1xuICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xuICAgICAgICAgICAgdGhpcy5hdXRoID0gZ2V0QXV0aCh0aGlzLmdldEFwcCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoO1xuICAgIH1cbiAgICBnZXRGdW5jdGlvbnMoKSB7XG4gICAgICAgIGlmICghdGhpcy5mdW5jdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZnVuY3Rpb25zID0gZ2V0RnVuY3Rpb25zKHRoaXMuZ2V0QXBwKCksIEVudmlyb25tZW50LmZpcmViYXNlQ29uZmlnLmZ1bmN0aW9uc1JlZ2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZnVuY3Rpb25zO1xuICAgIH1cbiAgICBnZXREYXRhYmFzZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGFiYXNlKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFiYXNlID0gZ2V0RGF0YWJhc2UodGhpcy5nZXRBcHAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2U7XG4gICAgfVxuICAgIGdldEZpcmVzdG9yZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZpcmVzdG9yZSkge1xuICAgICAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBnZXRGaXJlc3RvcmUodGhpcy5nZXRBcHAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyZXN0b3JlO1xuICAgIH1cbiAgICBhc3luYyBnZXRFc3RpbWF0ZWRUaW1lc3RhbXAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb2NrU2tldykge1xuICAgICAgICAgICAgcmV0dXJuIERhdGUubm93KCkgKyB0aGlzLmNsb2NrU2tldztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYiA9IHRoaXMuZ2V0RGF0YWJhc2UoKTtcbiAgICAgICAgY29uc3QgY29ubmVjdGVkUmVmID0gcmVmKGRiLCAnLmluZm8vY29ubmVjdGVkJyk7XG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25WYWx1ZShjb25uZWN0ZWRSZWYsIChzbmFwKSA9PiB7XG4gICAgICAgICAgICBpZiAoc25hcC52YWwoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNsb2NrU2tldztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG9mZnNldFJlZiA9IHJlZihkYiwgJy5pbmZvL3NlcnZlclRpbWVPZmZzZXQnKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBvblZhbHVlKG9mZnNldFJlZiwgKHNuYXApID0+IHtcbiAgICAgICAgICAgICAgICBvZmYob2Zmc2V0UmVmKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb2NrU2tldyA9IHNuYXAudmFsKCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShEYXRlLm5vdygpICsgKHRoaXMuY2xvY2tTa2V3ID8/IDApKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCBmaXJlYmFzZSA9IEZpcmViYXNlU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuZXhwb3J0IGRlZmF1bHQgZmlyZWJhc2U7XG4iLCJleHBvcnQgY2xhc3MgR3JhcGhTZXJ2aWNlIHtcbiAgICBtaW5Db25uZWN0aW9ucztcbiAgICBtYXhDb25uZWN0aW9ucztcbiAgICBtYXhEaXN0YW5jZTtcbiAgICByYW5nZXMgPSBbXTtcbiAgICBtYXhMYXllcjtcbiAgICByZW1vdGVOb2RlcyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdHJ1Y3RvcihtaW5Db25uZWN0aW9ucywgbWF4Q29ubmVjdGlvbnMsIG1heERpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMubWluQ29ubmVjdGlvbnMgPSBtaW5Db25uZWN0aW9ucztcbiAgICAgICAgdGhpcy5tYXhDb25uZWN0aW9ucyA9IG1heENvbm5lY3Rpb25zO1xuICAgICAgICB0aGlzLm1heERpc3RhbmNlID0gbWF4RGlzdGFuY2U7XG4gICAgICAgIHRoaXMubWF4TGF5ZXIgPSAodGhpcy5tYXhDb25uZWN0aW9ucyAtIDIgKiB0aGlzLm1pbkNvbm5lY3Rpb25zKSAvIDI7XG4gICAgICAgIHRoaXMucmFuZ2VzLnB1c2goeyBzdGFydDogMSwgZW5kOiB0aGlzLmdldE5leHRUYXJnZXRSYW5rKDEsIDEpIC0gMSB9KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1heExheWVyOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMucmFuZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLmdldE5leHRUYXJnZXRSYW5rKDEsIGkgKyAxKSxcbiAgICAgICAgICAgICAgICBlbmQ6IHRoaXMuZ2V0TmV4dFRhcmdldFJhbmsoMSwgaSArIDIpIC0gMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHRUYXJnZXRSYW5rKHJhbmssIGxheWVyID0gMSkge1xuICAgICAgICBsZXQgZmFjdG9yID0gdGhpcy5tYXhEaXN0YW5jZSAtIHRoaXMubWluQ29ubmVjdGlvbnM7XG4gICAgICAgIGxldCBsYXllckFkanVzdG1lbnQgPSAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxheWVyOyArK2kpIHtcbiAgICAgICAgICAgIGZhY3RvciAqPSB0aGlzLm1heERpc3RhbmNlIC0gdGhpcy5taW5Db25uZWN0aW9ucyAtIGk7XG4gICAgICAgICAgICBsYXllckFkanVzdG1lbnQgKj0gdGhpcy5tYXhEaXN0YW5jZSAtIHRoaXMubWluQ29ubmVjdGlvbnMgLSBpICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFjdG9yICogdGhpcy5taW5Db25uZWN0aW9ucyArIHJhbmsgLSBsYXllckFkanVzdG1lbnQ7XG4gICAgfVxuICAgIGdldEN1cnJlbnRNYXhMYXllcihuYk5vZGVzKSB7XG4gICAgICAgIGxldCBsYXllciA9IDA7XG4gICAgICAgIHdoaWxlICh0aGlzLnJhbmdlc1tsYXllcl0uZW5kIDwgbmJOb2Rlcykge1xuICAgICAgICAgICAgbGF5ZXIgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGF5ZXI7XG4gICAgfVxuICAgIGdldE1pbkNvbm5lY3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5Db25uZWN0aW9ucztcbiAgICB9XG4gICAgZ2V0TWF4Q29ubmVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heENvbm5lY3Rpb25zO1xuICAgIH1cbiAgICBnZXRNYXhEaXN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4RGlzdGFuY2U7XG4gICAgfVxuICAgIGdldFJlbW90ZU5vZGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVOb2RlcztcbiAgICB9XG4gICAgc2V0UmVtb3RlTm9kZShpZCwgcmVtb3RlTm9kZSkge1xuICAgICAgICB0aGlzLnJlbW90ZU5vZGVzLnNldChpZCwgcmVtb3RlTm9kZSk7XG4gICAgfVxuICAgIGhhc1JlbW90ZU5vZGUoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlTm9kZXMuaGFzKGlkKTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlTm9kZShpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVOb2Rlcy5nZXQoaWQpO1xuICAgIH1cbiAgICBkZWxldGVSZW1vdGVOb2RlKGlkKSB7XG4gICAgICAgIHRoaXMucmVtb3RlTm9kZXMuZGVsZXRlKGlkKTtcbiAgICB9XG4gICAgZ2V0Q2xvc2VzdE5vZGVzKHJlbW90ZUNvbm5lY3Rpb25zLCBkZXN0aW5hdGlvbklkKSB7XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uUmFuayA9IHRoaXMuZ2V0UmVtb3RlTm9kZShkZXN0aW5hdGlvbklkKT8uZ2V0UmFuaygpID8/IDA7XG4gICAgICAgIGNvbnN0IGNsb3Nlc3ROb2RlcyA9IHJlbW90ZUNvbm5lY3Rpb25zXG4gICAgICAgICAgICAubWFwKChyZW1vdGVJZCkgPT4gdGhpcy5nZXRSZW1vdGVOb2RlKHJlbW90ZUlkKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHJlbW90ZU5vZGUpID0+IHJlbW90ZU5vZGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBNYXRoLmFicyhkZXN0aW5hdGlvblJhbmsgLSAoYSAmJiBhLmdldFJhbmsoKSB8fCBJbmZpbml0eSkpIC0gTWF0aC5hYnMoZGVzdGluYXRpb25SYW5rIC0gKGIgJiYgYi5nZXRSYW5rKCkgfHwgSW5maW5pdHkpKSlcbiAgICAgICAgICAgIC5tYXAoKHJlbW90ZU5vZGUpID0+IHJlbW90ZU5vZGUuZ2V0SWQoKSk7XG4gICAgICAgIHJldHVybiBjbG9zZXN0Tm9kZXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTUVTU0FHRV9CVUZGRVJfQ0xFQU5VUF9JTlRFUlZBTCwgTUVTU0FHRV9CVUZGRVJfUkVURU5USU9OX1RJTUUgfSBmcm9tICdjb25zdGFudHMvU2VydmljZXMnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmV4cG9ydCBjbGFzcyBNZXNzYWdlQnVmZmVyU2VydmljZSB7XG4gICAgYnVmZmVyID0gbmV3IE1hcCgpO1xuICAgIHVuc3Vic2NyaWJlSGFuZGxlcjtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXIgPSBpbnRlcnZhbC5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFt1dWlkLCB0aW1lc3RhbXBdIG9mIHRoaXMuYnVmZmVyLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGltZXN0YW1wID4gTUVTU0FHRV9CVUZGRVJfUkVURU5USU9OX1RJTUUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXIuZGVsZXRlKHV1aWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgTUVTU0FHRV9CVUZGRVJfQ0xFQU5VUF9JTlRFUlZBTCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcigpO1xuICAgIH1cbiAgICBhZGRNZXNzYWdlKHV1aWQpIHtcbiAgICAgICAgdGhpcy5idWZmZXIuc2V0KHV1aWQsIERhdGUubm93KCkpO1xuICAgIH1cbiAgICBoYXNNZXNzYWdlKHV1aWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmhhcyh1dWlkKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgZ2V0LCByZWYsIHJ1blRyYW5zYWN0aW9uLCBzZXQgfSBmcm9tICdmaXJlYmFzZS9kYXRhYmFzZSc7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnc2VydmljZXMvRmlyZWJhc2UvRmlyZWJhc2VTZXJ2aWNlJztcbmV4cG9ydCBjbGFzcyBGaXJlYmFzZVJEQlRyYW5zYWN0aW9uU2VydmljZSB7XG4gICAgdmVuZG9ySWQ7XG4gICAgY2x1c3RlcklkO1xuICAgIGNsdXN0ZXJLZXk7XG4gICAgY29uc3RydWN0b3IodmVuZG9ySWQsIGNsdXN0ZXJJZCkge1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLmNsdXN0ZXJLZXkgPSBgY2NjJHt0aGlzLnZlbmRvcklkfWNjYyR7dGhpcy5jbHVzdGVySWR9YDtcbiAgICB9XG4gICAgYXN5bmMgd3JpdGVUcmFuc2FjdGlvbih0cmFuc2FjdGlvbiwgbGFiZWwsIGxhc3RLbm93blRyYW5zYWN0aW9uSWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVuVHJhbnNhY3Rpb24ocmVmKGZpcmViYXNlLmdldERhdGFiYXNlKCksIGBjbHVzdGVycy8ke3RoaXMuY2x1c3RlcktleX0vb2JqZWN0c3RvcmVzLyR7bGFiZWx9L3RyYW5zYWN0aW9ucy9sYXN0VHJhbnNhY3Rpb25gKSwgKGxhc3RUcmFuc2FjdGlvbklkKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWxhc3RUcmFuc2FjdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uLmlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxhc3RUcmFuc2FjdGlvbklkICE9PSBsYXN0S25vd25UcmFuc2FjdGlvbklkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZU5vdFN5bmNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb24uaWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVzdWx0LmNvbW1pdHRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT2JqZWN0U3RvcmVDYW5ub3RXcml0ZVRyYW5zYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYW5zYWN0aW9uLnBhcmVudElkKSB7XG4gICAgICAgICAgICBkZWxldGUgdHJhbnNhY3Rpb24ucGFyZW50SWQ7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc2V0KHJlZihmaXJlYmFzZS5nZXREYXRhYmFzZSgpLCBgY2x1c3RlcnMvJHt0aGlzLmNsdXN0ZXJLZXl9L29iamVjdHN0b3Jlcy8ke2xhYmVsfS90cmFuc2FjdGlvbnMvJHt0cmFuc2FjdGlvbi5pZH1gKSwgdHJhbnNhY3Rpb24pO1xuICAgIH1cbiAgICAvLyBUT0RPIC0gbmVlZCB0byBpbXBsZW1lbnQgcGFnaW5hdGlvblxuICAgIGFzeW5jIGdldFRyYW5zYWN0aW9ucyhsYWJlbCwgbGFzdEtub3duVHJhbnNhY3Rpb25JZCkge1xuICAgICAgICBsZXQgdHJhbnNhY3Rpb25zID0gW107XG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0KHJlZihmaXJlYmFzZS5nZXREYXRhYmFzZSgpLCBgY2x1c3RlcnMvJHt0aGlzLmNsdXN0ZXJLZXl9L29iamVjdHN0b3Jlcy8ke2xhYmVsfS90cmFuc2FjdGlvbnNgKSk7XG4gICAgICAgIGlmICghc25hcHNob3QuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zTWFwID0gc25hcHNob3QudmFsKCk7XG4gICAgICAgIHRyYW5zYWN0aW9ucyA9IE9iamVjdC52YWx1ZXModHJhbnNhY3Rpb25zTWFwKVxuICAgICAgICAgICAgLmZpbHRlcigodHJhbnNhY3Rpb24pID0+IHR5cGVvZiB0cmFuc2FjdGlvbiAhPT0gJ3N0cmluZycpO1xuICAgICAgICBjb25zdCBzb3J0ZWRUcmFuc2FjdGlvbnMgPSBbXTtcbiAgICAgICAgbGV0IG5leHRUcmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9ucy5maW5kKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uLnBhcmVudElkID09PSBsYXN0S25vd25UcmFuc2FjdGlvbklkKTtcbiAgICAgICAgd2hpbGUgKG5leHRUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgc29ydGVkVHJhbnNhY3Rpb25zLnB1c2gobmV4dFRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIG5leHRUcmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9ucy5maW5kKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uLnBhcmVudElkID09PSBuZXh0VHJhbnNhY3Rpb24uaWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3J0ZWRUcmFuc2FjdGlvbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSU5URVJWQUxfVElNRSB9IGZyb20gJ2NvbnN0YW50cy9JbnRlcnZhbCc7XG5jbGFzcyBJbnRlcnZhbCB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIHBhcmFtZXRlcnMgPSBbXTtcbiAgICBzb3VyY2U7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5mb3JFYWNoKChwKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBwLmxhc3RFeGVjdXRlZCA+IHAuaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgICAgIHAubGFzdEV4ZWN1dGVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgSU5URVJWQUxfVElNRSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKCFJbnRlcnZhbC5pbnN0YW5jZSkge1xuICAgICAgICAgICAgSW50ZXJ2YWwuaW5zdGFuY2UgPSBuZXcgSW50ZXJ2YWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSW50ZXJ2YWwuaW5zdGFuY2U7XG4gICAgfVxuICAgIHN0YXJ0Tm9UaHJvdHRsaW5nSGFjayhhdWRpb0NvbnRleHQpIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5jcmVhdGVDb25zdGFudFNvdXJjZShhdWRpb0NvbnRleHQpO1xuICAgICAgICBjb25zdCBnYWluTm9kZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgICAgIGlmIChnYWluTm9kZSAmJiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGdhaW5Ob2RlLmdhaW4udmFsdWUgPSAwLjAwMTtcbiAgICAgICAgICAgIHNvdXJjZS5jb25uZWN0KGdhaW5Ob2RlKTtcbiAgICAgICAgICAgIGdhaW5Ob2RlLmNvbm5lY3QoYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIHNvdXJjZS5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3BOb1Rocm90dGxpbmdIYWNrKCkge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdhaXQodGltZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRJbnRlcnZhbChjYWxsYmFjaywgaW50ZXJ2YWwpIHtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnB1c2goe1xuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICBpbnRlcnZhbCxcbiAgICAgICAgICAgIGxhc3RFeGVjdXRlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnMuZmlsdGVyKChwKSA9PiBwLmNhbGxiYWNrICE9PSBjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNyZWF0ZUNvbnN0YW50U291cmNlKGF1ZGlvQ29udGV4dCkge1xuICAgICAgICBpZiAoYXVkaW9Db250ZXh0LmNyZWF0ZUNvbnN0YW50U291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXVkaW9Db250ZXh0LmNyZWF0ZUNvbnN0YW50U291cmNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29uc3RhbnRTb3VyY2VOb2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBjb25zdCBjb25zdGFudEJ1ZmZlciA9IGF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXIoMSwgMSwgYXVkaW9Db250ZXh0LnNhbXBsZVJhdGUpO1xuICAgICAgICBjb25zdCBidWZmZXJEYXRhID0gY29uc3RhbnRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCk7XG4gICAgICAgIGJ1ZmZlckRhdGFbMF0gPSAoMCAqIDEyMDApICsgMTA7XG4gICAgICAgIGNvbnN0YW50U291cmNlTm9kZS5idWZmZXIgPSBjb25zdGFudEJ1ZmZlcjtcbiAgICAgICAgY29uc3RhbnRTb3VyY2VOb2RlLmxvb3AgPSB0cnVlO1xuICAgICAgICByZXR1cm4gY29uc3RhbnRTb3VyY2VOb2RlO1xuICAgIH1cbn1cbmNvbnN0IGludGVydmFsID0gSW50ZXJ2YWwuZ2V0SW5zdGFuY2UoKTtcbmV4cG9ydCBkZWZhdWx0IGludGVydmFsO1xuIiwiaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5jb25zdCBzeXN0ZW1NZXNzYWdlVHlwZUxvb2t1cCA9IFtcbiAgICAnUGVlckNvbm5lY3Rpb24nLFxuICAgICdOb2RlJyxcbiAgICAnQ29udGVudCcsXG4gICAgJ1N1YnNjcmlwdGlvbicsXG4gICAgJ1N0YXRzJyxcbiAgICAnRGV0ZWN0aW9uJyxcbiAgICAnUmVtZWRpYXRpb24nLFxuXTtcbmNvbnN0IHN5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZUxvb2t1cCA9IFtcbiAgICBbXG4gICAgICAgICdPZmZlcicsXG4gICAgICAgICdBbnN3ZXInLFxuICAgICAgICAnSGFuZHNoYWtlJyxcbiAgICAgICAgJ1N1Y2Nlc3MnLFxuICAgICAgICAnTmVlZFJlc3RhcnQnLFxuICAgICAgICAnUmVzdGFydCcsXG4gICAgICAgICdEaXNjb25uZWN0JyxcbiAgICAgICAgJ1N0YXRzJyxcbiAgICAgICAgJ09wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzJyxcbiAgICBdLCBbXG4gICAgICAgICdOb2RlSm9pbicsXG4gICAgICAgICdOb2RlVXBkYXRlJyxcbiAgICAgICAgJ05vZGVDb25uZWN0aW9uc1VwZGF0ZScsXG4gICAgICAgICdOb2RlTGVhdmUnLFxuICAgIF0sIFtcbiAgICAgICAgJ1B1Ymxpc2hNZWRpYVN0cmVhbScsXG4gICAgICAgICdVbnB1Ymxpc2hNZWRpYVN0cmVhbScsXG4gICAgICAgICdTdWJzY3JpYmVNZWRpYVN0cmVhbScsXG4gICAgICAgICdVcGRhdGVNZWRpYVN0cmVhbScsXG4gICAgICAgICdVbnN1YnNjcmliZU1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ0Nsb3NlT2JqZWN0U3RvcmVCdWNrZXQnLFxuICAgICAgICAnQ2xvc2VLZXlWYWx1ZURhdGFiYXNlJyxcbiAgICAgICAgJ0Nsb3NlUHViU3ViVG9waWMnLFxuICAgICAgICAnQ2xvc2VNZWRpYVN0cmVhbScsXG4gICAgICAgICdMb2NhbE1lZGlhU3RyZWFtVHJhY2tGYWlsJyxcbiAgICAgICAgJ1JlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsJyxcbiAgICAgICAgJ1JlcXVlc3RTeW5jS2V5VmFsdWVEYXRhYmFzZScsXG4gICAgICAgICdTZW5kVHJhbnNhY3Rpb25zRHVtcCcsXG4gICAgICAgICdSZXF1ZXN0VHJhbnNhY3Rpb25zVmFsdWUnLFxuICAgICAgICAnT2JqZWN0U3RvcmVTdGF0cycsXG4gICAgICAgICdLZXlWYWx1ZURhdGFiYXNlU3RhdHMnLFxuICAgIF0sIFtcbiAgICAgICAgJ1N1YnNjcmliZU1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ1VwZGF0ZU1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ1Vuc3Vic2NyaWJlTWVkaWFTdHJlYW0nLFxuICAgICAgICAnTmVlZE1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ1Jlc3RhcnROZWVkTWVkaWFTdHJlYW0nLFxuICAgICAgICAnQ2FuUHJvdmlkZU1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ0Nhbm5vdFByb3ZpZGVNZWRpYVN0cmVhbScsXG4gICAgICAgICdNZWRpYVN0cmVhbVVuYXZhaWxhYmxlJyxcbiAgICBdLCBbXG4gICAgICAgICdTdHJlYW1SZXBvcnQnLFxuICAgICAgICAnTG9jYWxSZXBvcnQnLFxuICAgIF0sIFtcbiAgICAgICAgJ1Byb2JsZW0nLFxuICAgIF0sIFtcbiAgICAgICAgJ1JlbWVkaWF0aW9uJyxcbiAgICAgICAgJ1JlbW90ZVJlbWVkaWF0aW9uJyxcbiAgICBdLFxuXTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dnYWJsZVN5c3RlbU1lc3NhZ2UoY29udGVudCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNvbnRlbnQsXG4gICAgICAgIHN5c3RlbU1lc3NhZ2VUeXBlOiBzeXN0ZW1NZXNzYWdlVHlwZUxvb2t1cFtjb250ZW50Lm1lc3NhZ2VUeXBlXSxcbiAgICAgICAgc3lzdGVtQ29udGVudE1lc3NhZ2VUeXBlOiBzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGVMb29rdXBbY29udGVudC5tZXNzYWdlVHlwZV1bY29udGVudC5jb250ZW50LnR5cGVdLFxuICAgIH07XG59XG5jb25zdCBvcHRpb25zID0geyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnLCBzZWNvbmQ6ICcyLWRpZ2l0JyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEN1cnJlbnREYXRlKCkge1xuICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG1zID0gZC5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gZC50b0xvY2FsZURhdGVTdHJpbmcoXCJlbi1VU1wiLCBvcHRpb25zKS5tYXRjaCgvXFxkXFxkOlxcZFxcZDpcXGRcXGQvKT8uWzBdO1xuICAgIGNvbnN0IGZvcm1hdHRlZE1zID0gbXMgPiAxMDAgPyBgJHttc31gIDogKG1zID4gMTAgPyBgMCR7bXN9YCA6IGAwMCR7bXN9YCk7XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZFRpbWV9LiR7Zm9ybWF0dGVkTXN9YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JtYXR0ZWRTeXRlbUxvZyhldmVudCwgbG9jYWxJZCkge1xuICAgIGNvbnN0IGRhdGVMb2dnZXIgPSBmb3JtYXRDdXJyZW50RGF0ZSgpO1xuICAgIGNvbnN0IHsgc291cmNlSWQsIGRlc3RpbmF0aW9uSWRzLCBzeXN0ZW1NZXNzYWdlVHlwZSwgc3lzdGVtQ29udGVudE1lc3NhZ2VUeXBlIH0gPSBnZXRMb2dnYWJsZVN5c3RlbU1lc3NhZ2UoZXZlbnQpO1xuICAgIGNvbnN0IGRlc3RpbmF0aW9ucyA9IGRlc3RpbmF0aW9uSWRzID8gYCR7ZGVzdGluYXRpb25JZHN9YCA6ICdldmVyeW9uZSc7XG4gICAgY29uc3QgbWVzc2FnZVN0cmluZyA9IHNvdXJjZUlkID09PSBsb2NhbElkXG4gICAgICAgID8gYFNlbmRpbmcgJyR7c3lzdGVtTWVzc2FnZVR5cGV9JyB0byAke2Rlc3RpbmF0aW9uc31gXG4gICAgICAgIDogZXZlbnQuc291cmNlSWQgPT09IFNZU1RFTV9UT1BJQ19JTlRFUk5BTFxuICAgICAgICAgICAgPyBgSW50ZXJuYWwgZXZlbnQgJyR7c3lzdGVtTWVzc2FnZVR5cGV9J2BcbiAgICAgICAgICAgIDogYCR7ZGVzdGluYXRpb25JZHMgPyAnJyA6ICdFdmVyeW9uZSAnfVJlY2VpdmluZyAnJHtzeXN0ZW1NZXNzYWdlVHlwZX0nIGZyb20gJHtzb3VyY2VJZH1gO1xuICAgIHJldHVybiBgJHtkYXRlTG9nZ2VyfSAtICR7bG9jYWxJZH0gLSAke21lc3NhZ2VTdHJpbmd9IHdpdGggJyR7c3lzdGVtQ29udGVudE1lc3NhZ2VUeXBlfScgcGF5bG9hZDpgO1xufVxuIiwiaW1wb3J0IHsgY29sbGVjdGlvbiwgZG9jLCBzZXJ2ZXJUaW1lc3RhbXAsIHNldERvYywgd3JpdGVCYXRjaCB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gJ2Vudmlyb25tZW50cy9FbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnc2VydmljZXMvRmlyZWJhc2UvRmlyZWJhc2VTZXJ2aWNlJztcbmNsYXNzIExvZ2dlciB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIGVuYWJsZWRDaGFubmVscyA9IFtMb2dnaW5nQ2hhbm5lbHMuRGVmYXVsdF07XG4gICAgZGVidWdFbmFibGVkID0gdHJ1ZTtcbiAgICBsb2dnaW5nQ29ubmVjdG9ycztcbiAgICB2ZW5kb3JJZCA9ICcnO1xuICAgIGdsb2JhbE9iamVjdDtcbiAgICBiYXRjaFF1ZXVlID0gW107XG4gICAgY3VycmVudEJhdGNoID0gdGhpcy5jcmVhdGVOZXdCYXRjaCgpO1xuICAgIGJhdGNoVGltZW91dDtcbiAgICByZXRyeUxpbWl0ID0gMTA7XG4gICAgcmV0cnlEZWxheSA9IDUwMDtcbiAgICBiYXRjaFNpemUgPSA0NTA7XG4gICAgdGltZW91dFZhbHVlID0gMTAwMDtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmdsb2JhbE9iamVjdCA9IHdpbmRvdztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5nbG9iYWxPYmplY3QgPSBnbG9iYWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGdsb2JhbCBvYmplY3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvYWRFbmFibGVkQ2hhbm5lbHMoKTtcbiAgICAgICAgdGhpcy5nbG9iYWxPYmplY3QuY3Jld2RsZVNES0VuYWJsZUxvZ2dpbmcgPSAoY2hhbm5lbCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoYW5uZWwgPT09IExvZ2dpbmdDaGFubmVscy5BbGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZWRDaGFubmVscyA9IE9iamVjdC5rZXlzKExvZ2dpbmdDaGFubmVscykubWFwKCh1bnR5cGVkS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHVudHlwZWRLZXk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMb2dnaW5nQ2hhbm5lbHNba2V5XTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhMb2dnaW5nQ2hhbm5lbHMpLmZvckVhY2goKHVudHlwZWRLZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdW50eXBlZEtleTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYGNyZXdkbGUtc2RrLWxvZ2dpbmctJHtMb2dnaW5nQ2hhbm5lbHNba2V5XX1gLCAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkQ2hhbm5lbHMuaW5jbHVkZXMoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZWRDaGFubmVscy5wdXNoKGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBjcmV3ZGxlLXNkay1sb2dnaW5nLSR7Y2hhbm5lbH1gLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdsb2JhbE9iamVjdC5jcmV3ZGxlU0RLRGlzYWJsZUxvZ2dpbmcgPSAoY2hhbm5lbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFjaGFubmVsIHx8IGNoYW5uZWwgPT09IExvZ2dpbmdDaGFubmVscy5BbGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZWRDaGFubmVscyA9IFtdO1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKExvZ2dpbmdDaGFubmVscykuZm9yRWFjaCgodW50eXBlZEtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB1bnR5cGVkS2V5O1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgY3Jld2RsZS1zZGstbG9nZ2luZy0ke0xvZ2dpbmdDaGFubmVsc1trZXldfWApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZWRDaGFubmVscy5pbmNsdWRlcyhjaGFubmVsKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZENoYW5uZWxzID0gdGhpcy5lbmFibGVkQ2hhbm5lbHMuZmlsdGVyKChjKSA9PiBjICE9PSBjaGFubmVsKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShgY3Jld2RsZS1zZGstbG9nZ2luZy0ke2NoYW5uZWx9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2xvYmFsT2JqZWN0LmNyZXdkbGVTREtMb2dnaW5nQ2hhbm5lbHMgPSBMb2dnaW5nQ2hhbm5lbHM7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghTG9nZ2VyLmluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgTG9nZ2VyLmluc3RhbmNlID0gbmV3IExvZ2dlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIExvZ2dlci5pbnN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTG9nZ2VyLmdldEluc3RhbmNlJywgZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxvZzogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgIGxvZ1JhdzogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgIGRlYnVnOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgc2V0VmVuZG9ySWQ6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICBzZXRMb2dnaW5nQ29ubmVjdG9yczogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgbG9nRXZlbnQ6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICBsb2dTZXJ2aWNlRXZlbnQ6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICBsb2dTdG9yYWdlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgd2FybmluZzogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgIGlzQ2hhbm5lbEVuYWJsZWQ6ICgpID0+IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRWZW5kb3JJZCh2ZW5kb3JJZCkge1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgfVxuICAgIHNldExvZ2dpbmdDb25uZWN0b3JzKGxvZ2dpbmdDb25uZWN0b3JzKSB7XG4gICAgICAgIHRoaXMubG9nZ2luZ0Nvbm5lY3RvcnMgPSBsb2dnaW5nQ29ubmVjdG9ycztcbiAgICB9XG4gICAgZGVidWcobWVzc2FnZSwgLi4uYXJncykge1xuICAgICAgICBpZiAodGhpcy5kZWJ1Z0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nKExvZ2dpbmdDaGFubmVscy5EZWZhdWx0LCBgREVCVUcgLSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9nKGNoYW5uZWwsIG1lc3NhZ2UsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKEVudmlyb25tZW50LmlzUHJvZHVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWRDaGFubmVscy5pbmNsdWRlcyhjaGFubmVsKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYENoYW5uZWwgJyR7Y2hhbm5lbH0nXFxuYCwgbmV3IERhdGUoKSArICdcXG4nLCBtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgdGhpcy5sb2dnaW5nQ29ubmVjdG9ycy5mb3JFYWNoKChsb2dnaW5nQ29ubmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW50ZXJuYWxMb2dnaW5nQ29ubmVjdG9yKGxvZ2dpbmdDb25uZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvZ2dpbmdDb25uZWN0b3IuZ2V0RW5hYmxlZENoYW5uZWxzKCkuaW5jbHVkZXMoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci5sb2cobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXJnc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2dSYXcoY2hhbm5lbCwgbWVzc2FnZSwgLi4uYXJncykge1xuICAgICAgICBpZiAoRW52aXJvbm1lbnQuaXNQcm9kdWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZENoYW5uZWxzLmluY2x1ZGVzKGNoYW5uZWwpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgdGhpcy5sb2dnaW5nQ29ubmVjdG9ycy5mb3JFYWNoKChsb2dnaW5nQ29ubmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW50ZXJuYWxMb2dnaW5nQ29ubmVjdG9yKGxvZ2dpbmdDb25uZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvZ2dpbmdDb25uZWN0b3IuZ2V0RW5hYmxlZENoYW5uZWxzKCkuaW5jbHVkZXMoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci5sb2cobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXJnc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2dFdmVudChtZXNzYWdlLCBldmVudCkge1xuICAgICAgICBpZiAodGhpcy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdG9yRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5sb2dnaW5nQ29ubmVjdG9ycy5mb3JFYWNoKChsb2dnaW5nQ29ubmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci5sb2cobWVzc2FnZSwgY29ubmVjdG9yRXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVE9ETyAtIHJldmlldyBpZiB3ZSBjYW4gbWVyZ2Ugd2l0aCBsb2dFdmVudFxuICAgIGxvZ1NlcnZpY2VFdmVudChzZXJ2aWNlLCBldmVudCkge1xuICAgICAgICBjb25zdCBsb2dSZWYgPSBkb2MoY29sbGVjdGlvbihmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSwgYGRldmVsb3BlcnMvJHt0aGlzLnZlbmRvcklkfS9sb2dzYCkpO1xuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaC5iYXRjaC5zZXQobG9nUmVmLCB7IC4uLmV2ZW50LCBzZXJ2aWNlLCB0aW1lc3RhbXA6IHNlcnZlclRpbWVzdGFtcCgpIH0pO1xuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaC5vcGVyYXRpb25zLnB1c2goeyB0eXBlOiAnc2V0JywgcmVmOiBsb2dSZWYucGF0aCwgZGF0YTogZXZlbnQgfSk7XG4gICAgICAgIHRoaXMubG9nQmF0Y2goKTtcbiAgICB9XG4gICAgbG9nU3RvcmFnZShzZXJ2aWNlLCBuYW1lLCBzdG9yYWdlKSB7XG4gICAgICAgIHNldERvYyhkb2MoZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGBkZXZlbG9wZXJzLyR7dGhpcy52ZW5kb3JJZH0vJHtzZXJ2aWNlfS8ke25hbWV9YCksIHtcbiAgICAgICAgICAgIHN0b3JhZ2UsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbG9nQmF0Y2goKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoLmNvdW50ZXIrKztcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoLmNvdW50ZXIgPT09IHRoaXMuYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NCYXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmJhdGNoVGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5iYXRjaFRpbWVvdXQgPSB0aGlzLmdsb2JhbE9iamVjdC5zZXRUaW1lb3V0KCgpID0+IHRoaXMucHJvY2Vzc0JhdGNoKCksIHRoaXMudGltZW91dFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzQmF0Y2goKSB7XG4gICAgICAgIHRoaXMuYmF0Y2hRdWV1ZS5wdXNoKHRoaXMuY3VycmVudEJhdGNoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSB0aGlzLmNyZWF0ZU5ld0JhdGNoKCk7XG4gICAgICAgIHdoaWxlICh0aGlzLmJhdGNoUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2hUb0NvbW1pdCA9IHRoaXMuYmF0Y2hRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgY29uc3Qgc3VjY2VzcyA9IGF3YWl0IHRoaXMuY29tbWl0QmF0Y2goYmF0Y2hUb0NvbW1pdCwgMCk7XG4gICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5iYXRjaFRpbWVvdXQpO1xuICAgICAgICB0aGlzLmJhdGNoVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0QmF0Y2goYmF0Y2gsIHJldHJ5Q291bnQpIHtcbiAgICAgICAgaWYgKGJhdGNoLmNvdW50ZXIgPiAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGJhdGNoLmJhdGNoLmNvbW1pdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY29tbWl0dGluZyBiYXRjaDonLCBlcnJvciwgJ09wZXJhdGlvbnM6JywgYmF0Y2gub3BlcmF0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPCB0aGlzLnJldHJ5TGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNvbW1pdEJhdGNoKGJhdGNoLCByZXRyeUNvdW50ICsgMSksIHRoaXMucmV0cnlEZWxheSAqIE1hdGgucG93KDIsIHJldHJ5Q291bnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZUlkID0gJycsIG5vZGVUeXBlID0gJycsIGNsdXN0ZXJJZCA9ICcnIH0gPSBiYXRjaC5vcGVyYXRpb25zWzBdLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uczogYmF0Y2gub3BlcmF0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcignRmFpbGVkIHRvIGNvbW1pdCBiYXRjaCBhZnRlciByZXRyaWVzOicsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlcnJvcihtZXNzYWdlLCBldmVudCwgLi4uYXJncykge1xuICAgICAgICBjb25zb2xlLmVycm9yKG5ldyBEYXRlKCksIG1lc3NhZ2UsIGV2ZW50LCAuLi5hcmdzKTtcbiAgICAgICAgaWYgKHRoaXMubG9nZ2luZ0Nvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RvckV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIHZlbmRvcklkOiB0aGlzLnZlbmRvcklkLFxuICAgICAgICAgICAgICAgIC4uLmV2ZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMubG9nZ2luZ0Nvbm5lY3RvcnMuZm9yRWFjaCgobG9nZ2luZ0Nvbm5lY3RvcikgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dpbmdDb25uZWN0b3IuZXJyb3IobWVzc2FnZSwgY29ubmVjdG9yRXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2FybmluZyhtZXNzYWdlLCBldmVudCwgLi4uYXJncykge1xuICAgICAgICBjb25zb2xlLndhcm4obmV3IERhdGUoKSwgbWVzc2FnZSwgZXZlbnQsIGFyZ3MpO1xuICAgICAgICBpZiAodGhpcy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdG9yRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5sb2dnaW5nQ29ubmVjdG9ycy5mb3JFYWNoKChsb2dnaW5nQ29ubmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci53YXJuKG1lc3NhZ2UsIGNvbm5lY3RvckV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzQ2hhbm5lbEVuYWJsZWQoY2hhbm5lbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVkQ2hhbm5lbHMuaW5jbHVkZXMoY2hhbm5lbCk7XG4gICAgfVxuICAgIGxvYWRFbmFibGVkQ2hhbm5lbHMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhMb2dnaW5nQ2hhbm5lbHMpLmZvckVhY2goKHVudHlwZWRLZXkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB1bnR5cGVkS2V5O1xuICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgY3Jld2RsZS1zZGstbG9nZ2luZy0ke0xvZ2dpbmdDaGFubmVsc1trZXldfWApKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2dnaW5nU2VydmljZTogbG9nZ2luZyBlbmFibGVkIGZvcicsIExvZ2dpbmdDaGFubmVsc1trZXldKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkQ2hhbm5lbHMucHVzaChMb2dnaW5nQ2hhbm5lbHNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0ludGVybmFsTG9nZ2luZ0Nvbm5lY3Rvcihjb25uZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rvci5nZXRFbmFibGVkQ2hhbm5lbHMgIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY3JlYXRlTmV3QmF0Y2goKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiYXRjaDogd3JpdGVCYXRjaChmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSksXG4gICAgICAgICAgICBvcGVyYXRpb25zOiBbXSxcbiAgICAgICAgICAgIGNvdW50ZXI6IDBcbiAgICAgICAgfTtcbiAgICB9XG59XG5jb25zdCBsb2dnZXIgPSBMb2dnZXIuZ2V0SW5zdGFuY2UoKTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbiIsImltcG9ydCB7IENPTlRFTlRfRklMRV9DSFVOS19TSVpFIH0gZnJvbSAnY29uc3RhbnRzL0NvbnRlbnQnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhQYXJ0cyhwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoKHBhcnQpID0+IHBhcnQubGVuZ3RoID4gMCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UGF0aE5hbWUocGF0aCwgbmFtZSkge1xuICAgIHJldHVybiBwYXRoID09PSAnLycgPyBwYXRoICsgbmFtZSA6IHBhdGggKyAnLycgKyBuYW1lO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0UGF0aE5hbWUocGF0aE5hbWUpIHtcbiAgICBjb25zdCBwYXJ0cyA9IGdldFBhdGhQYXJ0cyhwYXRoTmFtZSk7XG4gICAgY29uc3QgbmFtZSA9IHBhcnRzLnBvcCgpIHx8ICcnO1xuICAgIGNvbnN0IHBhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG4gICAgcmV0dXJuIFtwYXRoLmxlbmd0aCA9PT0gMCA/ICcvJyA6IHBhdGgsIG5hbWVdO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpbGVDaGVja3N1bShmaWxlKSB7XG4gICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICBsZXQgY2hlY2tzdW0gPSAwO1xuICAgIGZvciAoY29uc3QgYnl0ZSBvZiBieXRlcykge1xuICAgICAgICBjaGVja3N1bSArPSBieXRlO1xuICAgIH1cbiAgICByZXR1cm4gY2hlY2tzdW0udG9TdHJpbmcoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkRmlsZUNvbnRlbnQoZmlsZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlYWRGaWxlSW5DaHVua3MoZmlsZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlQ29udGVudChjb250ZW50LCBuYW1lLCB0eXBlKSB7XG4gICAgcmV0dXJuIG5ldyBGaWxlKGNvbnRlbnQsIG5hbWUsIHtcbiAgICAgICAgdHlwZSxcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHJlYWRGaWxlSW5DaHVua3MoZmlsZSwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgbGV0IHN0YXJ0ID0gMDtcbiAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICBjb25zdCByZWFkTmV4dENodW5rID0gKCkgPT4ge1xuICAgICAgICBsZXQgZW5kID0gc3RhcnQgKyBDT05URU5UX0ZJTEVfQ0hVTktfU0laRTtcbiAgICAgICAgaWYgKGVuZCA+IGZpbGUuc2l6ZSkge1xuICAgICAgICAgICAgZW5kID0gZmlsZS5zaXplO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjaHVuayA9IGZpbGUuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNodW5rcy5wdXNoKHJlYWRlci5yZXN1bHQpO1xuICAgICAgICAgICAgc3RhcnQgPSBlbmQ7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPCBmaWxlLnNpemUpIHtcbiAgICAgICAgICAgICAgICByZWFkTmV4dENodW5rKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGNodW5rcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoY2h1bmspO1xuICAgIH07XG4gICAgcmVhZE5leHRDaHVuaygpO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9ic2VydmVyKCkge1xuICAgIGxldCBsaXN0ZW5lcnMgPSBbXTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWJzY3JpYmU6IChsaXN0ZW5lcikgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKGwgPT4gbCAhPT0gbGlzdGVuZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgcHVibGlzaDogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsID0+IGwoZXZlbnQpKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNpbmdsZU9ic2VydmVyKCkge1xuICAgIGxldCBsaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWJzY3JpYmU6IChuZXdMaXN0ZW5lcikgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSBuZXdMaXN0ZW5lcjtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBwdWJsaXNoOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgUXVldWVFbGVtZW50UHJpb3JpdHkgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL1F1ZXVlJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5pbXBvcnQgeyBjcmVhdGVRdWV1ZSwgU3luY1F1ZXVlQ2FsbGJhY2ssIEFzeW5jUXVldWVDYWxsYmFjayB9IGZyb20gJ3V0aWxzL1F1ZXVlL1F1ZXVlJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcmlvcml0eVJldHJ5UXVldWUoY2FsbGJhY2ssIHByaW9yaXR5RW51bSA9IFF1ZXVlRWxlbWVudFByaW9yaXR5LCAvLyBOZWVkcyB0byBiZSBhbiBlbnVtIHdpdGggbm8gdmFsdWVzIG9yZGVyZWQgaW4gcHJpb3JpdHkgZnJvbSBoaWdoZXN0IHRvIGxvd2VzdFxucm91bmRSb2JpbiA9IGZhbHNlKSB7XG4gICAgbGV0IGlzUnVubmluZyA9IGZhbHNlO1xuICAgIGNvbnN0IHF1ZXVlcyA9IFtdO1xuICAgIE9iamVjdFxuICAgICAgICAudmFsdWVzKHByaW9yaXR5RW51bSlcbiAgICAgICAgLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVzW3ZhbHVlXSA9IGNyZWF0ZVF1ZXVlKHByb2Nlc3NRdWV1ZSk7XG4gICAgfSk7XG4gICAgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICAgICAgICBpZiAoaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlcy5zb21lKChxdWV1ZSkgPT4gcXVldWUuaGVhZCkpIHtcbiAgICAgICAgICAgIGxldCBpdGVtID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgbGV0IHByaW9yaXR5ID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBxdWV1ZV0gb2YgcXVldWVzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHByaW9yaXR5ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIFN5bmNRdWV1ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIEFzeW5jUXVldWVDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjay5jYWxsKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocXVldWVzLnNsaWNlKC0xKS5zb21lKChxdWV1ZSkgPT4gcXVldWUuaGVhZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VzdFByaW9yaXR5ID0gcXVldWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5ID09PSBsb3dlc3RQcmlvcml0eSAmJiBxdWV1ZXNbbG93ZXN0UHJpb3JpdHldLmhlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW50ZXJ2YWwud2FpdCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChyb3VuZFJvYmluKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlc1twcmlvcml0eV0ucHVzaChpdGVtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZXNbcHJpb3JpdHldLnVuc2hpZnQoaXRlbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjay53YWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHF1ZXVlcyxcbiAgICB9O1xufVxuIiwiZXhwb3J0IGNsYXNzIFN5bmNRdWV1ZUNhbGxiYWNrIHtcbiAgICBjYWxsYmFjaztcbiAgICByZXRyeUNhbGxiYWNrO1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrLCByZXRyeUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5yZXRyeUNhbGxiYWNrID0gcmV0cnlDYWxsYmFjaztcbiAgICB9XG4gICAgY2FsbChpdGVtKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soaXRlbSk7XG4gICAgfVxuICAgIGFzeW5jIHdhaXQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmV0cnlDYWxsYmFjaygpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBc3luY1F1ZXVlQ2FsbGJhY2sge1xuICAgIGNhbGxiYWNrO1xuICAgIHJldHJ5Q2FsbGJhY2s7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHJldHJ5Q2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLnJldHJ5Q2FsbGJhY2sgPSByZXRyeUNhbGxiYWNrO1xuICAgIH1cbiAgICBhc3luYyBjYWxsKGl0ZW0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsYmFjayhpdGVtKTtcbiAgICB9XG4gICAgYXN5bmMgd2FpdCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXRyeUNhbGxiYWNrKCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVF1ZXVlKHBvc3RJbnNlcnRIb29rID0gKCkgPT4geyB9LCBwcmVJbnNlcnRIb29rID0gKCkgPT4gZmFsc2UsIGNsZWFySG9vayA9ICgpID0+IHsgfSkge1xuICAgIGxldCBoZWFkID0gdW5kZWZpbmVkO1xuICAgIGxldCB0YWlsID0gdW5kZWZpbmVkO1xuICAgIGxldCBzaXplID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgaGVhZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBoZWFkO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgdGFpbCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0YWlsO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgaGVhZCh2YWx1ZSkge1xuICAgICAgICAgICAgaGVhZCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgdGFpbCh2YWx1ZSkge1xuICAgICAgICAgICAgdGFpbCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBwdXNoKGl0ZW0sIHJ1bkhvb2sgPSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdFbGVtZW50ID0geyB2YWx1ZTogaXRlbSB9O1xuICAgICAgICAgICAgaWYgKHJ1bkhvb2sgJiYgcHJlSW5zZXJ0SG9vayhuZXdFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHBvc3RJbnNlcnRIb29rKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhaWwpIHtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnByZXZpb3VzID0gdGFpbDtcbiAgICAgICAgICAgICAgICB0YWlsLm5leHQgPSBuZXdFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFpbCA9IG5ld0VsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoIWhlYWQpIHtcbiAgICAgICAgICAgICAgICBoZWFkID0gbmV3RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNpemUgKz0gMTtcbiAgICAgICAgICAgIGlmIChydW5Ib29rKSB7XG4gICAgICAgICAgICAgICAgcG9zdEluc2VydEhvb2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcG9wKCkge1xuICAgICAgICAgICAgaWYgKCF0YWlsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0YWlsLnZhbHVlO1xuICAgICAgICAgICAgdGFpbCA9IHRhaWwucHJldmlvdXM7XG4gICAgICAgICAgICBpZiAodGFpbCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0YWlsLm5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRhaWwpIHtcbiAgICAgICAgICAgICAgICBoZWFkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZSAtPSAxO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2hpZnQoaXRlbSwgcnVuSG9vayA9IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSB7IHZhbHVlOiBpdGVtIH07XG4gICAgICAgICAgICBpZiAocnVuSG9vayAmJiBwcmVJbnNlcnRIb29rKG5ld0VsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcG9zdEluc2VydEhvb2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVhZCkge1xuICAgICAgICAgICAgICAgIGhlYWQucHJldmlvdXMgPSBuZXdFbGVtZW50O1xuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQubmV4dCA9IGhlYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFkID0gbmV3RWxlbWVudDtcbiAgICAgICAgICAgIGlmICghdGFpbCkge1xuICAgICAgICAgICAgICAgIHRhaWwgPSBuZXdFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZSArPSAxO1xuICAgICAgICAgICAgaWYgKHJ1bkhvb2spIHtcbiAgICAgICAgICAgICAgICBwb3N0SW5zZXJ0SG9vaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzaGlmdCgpIHtcbiAgICAgICAgICAgIGlmICghaGVhZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaGVhZC52YWx1ZTtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG4gICAgICAgICAgICBpZiAoaGVhZCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBoZWFkLnByZXZpb3VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoZWFkKSB7XG4gICAgICAgICAgICAgICAgdGFpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNpemUgLT0gMTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9LFxuICAgICAgICBjbGVhcigpIHtcbiAgICAgICAgICAgIGNsZWFySG9vaygpO1xuICAgICAgICAgICAgaGVhZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRhaWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBzaXplID0gMDtcbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVRdWV1ZSwgU3luY1F1ZXVlQ2FsbGJhY2ssIEFzeW5jUXVldWVDYWxsYmFjayB9IGZyb20gJ3V0aWxzL1F1ZXVlL1F1ZXVlJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXRyeVF1ZXVlKGNhbGxiYWNrLCByb3VuZFJvYmluID0gZmFsc2UsIHBvc3RQcm9jZXNzSG9vayA9ICgpID0+IHsgfSwgcHJlSW5zZXJ0SG9vayA9ICgpID0+IGZhbHNlLCBjbGVhckhvb2sgPSAoKSA9PiB7IH0pIHtcbiAgICBsZXQgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgY29uc3QgcXVldWUgPSBjcmVhdGVRdWV1ZShwcm9jZXNzUXVldWUsIHByZUluc2VydEhvb2ssIGNsZWFySG9vayk7XG4gICAgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICAgICAgICBpZiAoaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmhlYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIFN5bmNRdWV1ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIEFzeW5jUXVldWVDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjay5jYWxsKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3N0UHJvY2Vzc0hvb2soaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChyb3VuZFJvYmluKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaXRlbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUudW5zaGlmdChpdGVtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IGNhbGxiYWNrLndhaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc1J1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXVlO1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlUmV0cnlRdWV1ZSB9IGZyb20gJ3V0aWxzL1F1ZXVlL1JldHJ5UXVldWUnO1xuLy8gQXN5bmMgcmV0cnkgdmVyc2lvbmVkIHF1ZXVlIGRvZXMgbm90IHdvcmssIGNyZWF0ZXMgaW5jb25zaXN0ZW50IGJlaGF2aW91ciB3aXRoIHRoZSBob29rc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVZlcnNpb25lZFJldHJ5UXVldWUoY2FsbGJhY2ssIHJvdW5kUm9iaW4gPSBmYWxzZSkge1xuICAgIGxldCB2ZXJzaW9ucyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBxdWV1ZSA9IGNyZWF0ZVJldHJ5UXVldWUoY2FsbGJhY2ssIHJvdW5kUm9iaW4sIHBvc3RQcm9jZXNzSG9vaywgcHJlSW5zZXJ0SG9vaywgY2xlYXJIb29rKTtcbiAgICBmdW5jdGlvbiBwcm9jZXNzVmVyc2lvbmVkRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBlbGVtZW50LnZhbHVlO1xuICAgICAgICBpZiAoIWlzVmVyc2lvbmVkSXRlbShpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleSA9IGAke2l0ZW0uc291cmNlSWR9LSR7aXRlbS5kZXN0aW5hdGlvbklkcyA/PyBbXX0tJHtpdGVtLm1lc3NhZ2VUeXBlfS0ke2l0ZW0uY29udGVudC50eXBlfWA7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ID0geyB2ZXJzaW9uOiBpdGVtLmNvbnRlbnQudmVyc2lvbiwgZWxlbWVudCB9O1xuICAgICAgICBjb25zdCBpbmRleCA9IHZlcnNpb25zLmdldChrZXkpO1xuICAgICAgICBpZiAoIWluZGV4KSB7XG4gICAgICAgICAgICB2ZXJzaW9ucy5zZXQoa2V5LCBuZXdJbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4LnZlcnNpb24gPj0gaXRlbS5jb250ZW50LnZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleC5lbGVtZW50LnByZXZpb3VzKSB7XG4gICAgICAgICAgICBpbmRleC5lbGVtZW50LnByZXZpb3VzLm5leHQgPSBlbGVtZW50O1xuICAgICAgICAgICAgZWxlbWVudC5wcmV2aW91cyA9IGluZGV4LmVsZW1lbnQucHJldmlvdXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4LmVsZW1lbnQubmV4dCkge1xuICAgICAgICAgICAgaW5kZXguZWxlbWVudC5uZXh0LnByZXZpb3VzID0gZWxlbWVudDtcbiAgICAgICAgICAgIGVsZW1lbnQubmV4dCA9IGluZGV4LmVsZW1lbnQubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXguZWxlbWVudCA9PT0gcXVldWUuaGVhZCkge1xuICAgICAgICAgICAgcXVldWUuaGVhZCA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4LmVsZW1lbnQgPT09IHF1ZXVlLnRhaWwpIHtcbiAgICAgICAgICAgIHF1ZXVlLnRhaWwgPSBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHZlcnNpb25zLnNldChrZXksIG5ld0luZGV4KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzVmVyc2lvbmVkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtLmhhc093blByb3BlcnR5KCdjb250ZW50JykgJiYgaXRlbS5oYXNPd25Qcm9wZXJ0eSgnbWVzc2FnZVR5cGUnKSAmJiBpdGVtLmhhc093blByb3BlcnR5KCdzb3VyY2VJZCcpKSB7XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uZWRJdGVtID0gaXRlbTtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uZWRJdGVtLmNvbnRlbnQgJiYgdHlwZW9mIHZlcnNpb25lZEl0ZW0uY29udGVudCA9PT0gJ29iamVjdCcgJiYgdmVyc2lvbmVkSXRlbS5jb250ZW50Lmhhc093blByb3BlcnR5KCd2ZXJzaW9uJykgJiYgdmVyc2lvbmVkSXRlbS5jb250ZW50Lmhhc093blByb3BlcnR5KCd0eXBlJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZUluc2VydEhvb2soZWxlbWVudCkge1xuICAgICAgICBpZiAocHJvY2Vzc1ZlcnNpb25lZEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXJIb29rKCkge1xuICAgICAgICB2ZXJzaW9ucy5jbGVhcigpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb3N0UHJvY2Vzc0hvb2soaXRlbSkge1xuICAgICAgICBpZiAoaXNWZXJzaW9uZWRJdGVtKGl0ZW0pKSB7XG4gICAgICAgICAgICB2ZXJzaW9ucy5kZWxldGUoYCR7aXRlbS5zb3VyY2VJZH0tJHtpdGVtLmRlc3RpbmF0aW9uSWRzID8/IFtdfS0ke2l0ZW0ubWVzc2FnZVR5cGV9LSR7aXRlbS5jb250ZW50LnR5cGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXVlO1xufVxuIiwiaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgU3VwcG9ydEZlYXR1cmVOYW1lIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9TdXBwb3J0JztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG4vLyBFeHBvc2UgdmlhIFNES1xuY2xhc3MgU3VwcG9ydCB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIGZlYXR1cmVTdXBwb3J0ID0gW107XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIGlmICghU3VwcG9ydC5pbnN0YW5jZSkge1xuICAgICAgICAgICAgU3VwcG9ydC5pbnN0YW5jZSA9IG5ldyBTdXBwb3J0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN1cHBvcnQuaW5zdGFuY2U7XG4gICAgfVxuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tXZWJSVEMoKTtcbiAgICAgICAgdGhpcy5jaGVja01lZGlhU3RyZWFtKCk7XG4gICAgICAgIHRoaXMuY2hlY2tTY3JlZW5TaGFyaW5nKCk7XG4gICAgICAgIHRoaXMuY2hlY2tBdWRpb1ZvbHVtZSgpO1xuICAgICAgICB0aGlzLmNoZWNrRGV2aWNlQ29uZmlnKCk7XG4gICAgICAgIHRoaXMuY2hlY2tBdWRpb091dHB1dCgpO1xuICAgICAgICB0aGlzLmNoZWNrTWVkaWFSZWNvcmRpbmcoKTtcbiAgICAgICAgdGhpcy5jaGVja0JhY2tncm91bmRzKCk7XG4gICAgICAgIHRoaXMuY2hlY2tXZWJHTCgpO1xuICAgICAgICB0aGlzLmNoZWNrQXVkaW9Db250ZXh0KCk7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsICdTdXBwb3J0OiBjdXJyZW50IGNvbmZpZycsIHtcbiAgICAgICAgICAgIGZlYXR1cmVTdXBwb3J0OiB0aGlzLmZlYXR1cmVTdXBwb3J0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNGZWF0dXJlU3VwcG9ydGVkKGZlYXR1cmVOYW1lKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmUgPSB0aGlzLmZlYXR1cmVTdXBwb3J0LmZpbmQoZiA9PiBmLm5hbWUgPT09IGZlYXR1cmVOYW1lKTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmUgPyBmZWF0dXJlLnN1cHBvcnRlZCA6IGZhbHNlO1xuICAgIH1cbiAgICBsb2dTdXBwb3J0KG5vZGUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdzdXBwb3J0Jywge1xuICAgICAgICAgICAgbm9kZUlkOiBub2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogbm9kZS50eXBlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGZlYXR1cmVTdXBwb3J0OiB0aGlzLmZlYXR1cmVTdXBwb3J0LFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2hlY2tXZWJSVEMoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLldlYlJUQztcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9uID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgUlRDSWNlQ2FuZGlkYXRlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja01lZGlhU3RyZWFtKCkge1xuICAgICAgICBjb25zdCBmZWF0dXJlTmFtZSA9IFN1cHBvcnRGZWF0dXJlTmFtZS5NZWRpYVN0cmVhbTtcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIE1lZGlhU3RyZWFtID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgTWVkaWFTdHJlYW1UcmFjayA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgdHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja1NjcmVlblNoYXJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLlNjcmVlblNoYXJpbmc7XG4gICAgICAgIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzWydnZXREaXNwbGF5TWVkaWEnXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICB9XG4gICAgY2hlY2tBdWRpb1ZvbHVtZSgpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuQXVkaW9Wb2x1bWU7XG4gICAgICAgIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgICh0eXBlb2YgU2NyaXB0UHJvY2Vzc29yTm9kZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBBdWRpb1dvcmtsZXROb2RlID09PSAnZnVuY3Rpb24nKSAmJlxuICAgICAgICAgICAgdHlwZW9mIE1lZGlhU3RyZWFtQXVkaW9Tb3VyY2VOb2RlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja0RldmljZUNvbmZpZygpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuRGV2aWNlQ29uZmlnO1xuICAgICAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgTWVkaWFEZXZpY2VJbmZvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja0F1ZGlvT3V0cHV0KCkge1xuICAgICAgICBjb25zdCBmZWF0dXJlTmFtZSA9IFN1cHBvcnRGZWF0dXJlTmFtZS5BdWRpb091dHB1dDtcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2aWRlby5zZXRTaW5rSWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICB9XG4gICAgYXN5bmMgY2hlY2tNZWRpYVJlY29yZGluZygpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuUmVjb3JkaW5nO1xuICAgICAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIGlmICghIU1lZGlhUmVjb3JkZXIgJiYgISFNZWRpYVNvdXJjZSAmJiBjYW52YXMuY2FwdHVyZVN0cmVhbSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGNhbnZhcy5jYXB0dXJlU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihzdHJlYW0pO1xuICAgICAgICAgICAgICAgIHJlY29yZGVyLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcbiAgICAgICAgICAgICAgICByZWNvcmRlci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkID0gcmVjb3JkZXIuc3RhdGUgPT09ICdpbmFjdGl2ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IGNoZWNrIGZhaWxlZGAsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICAgICAgaWYgKCFzdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tCYWNrZ3JvdW5kcygpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuQmFja2dyb3VuZHM7XG4gICAgICAgIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgaWYgKCEhY2FudmFzLmNhcHR1cmVTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBjaGVjayBmYWlsZWRgLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmVhdHVyZVN1cHBvcnQucHVzaCh7IG5hbWU6IGZlYXR1cmVOYW1lLCBzdXBwb3J0ZWQgfSk7XG4gICAgICAgIGlmICghc3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdXBwb3J0LCBgU3VwcG9ydDogJHtmZWF0dXJlTmFtZX0gbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoZWNrV2ViR0woKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLldlYkdMO1xuICAgICAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIGlmICghIVdlYkdMUmVuZGVyaW5nQ29udGV4dCAmJiBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKSkge1xuICAgICAgICAgICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IGNoZWNrIGZhaWxlZGAsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICAgICAgaWYgKCFzdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tBdWRpb0NvbnRleHQoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLkF1ZGlvQ29udGV4dDtcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICB9XG59XG5jb25zdCBzdXBwb3J0ID0gU3VwcG9ydC5nZXRJbnN0YW5jZSgpO1xuZXhwb3J0IGRlZmF1bHQgc3VwcG9ydDtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBhd3MtYW1wbGlmeS9hcGlcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGF3cy1hbXBsaWZ5L2NvcmVcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGNyZXdkbGUvbWlzdC1jb25uZWN0b3ItaW5kZXhlZC1kYlwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAY3Jld2RsZS9taXN0LWNvbm5lY3Rvci1vcGZzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBjcmV3ZGxlL21pc3QtY29ubmVjdG9yLXdlYnJ0Yy1icm93c2VyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBjcmV3ZGxlL3dlYi1zZGstdHlwZXNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXdzLWFtcGxpZnlcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXdzLWFtcGxpZnkvdXRpbHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UvYXBwXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZpcmViYXNlL2F1dGhcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UvZGF0YWJhc2VcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UvZmlyZXN0b3JlXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZpcmViYXNlL2Z1bmN0aW9uc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ1dWlkXCIpOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJhIiwiaSIsInRoaXMiLCJDT05ORUNUSU9OX01JTiIsIkNPTk5FQ1RJT05fTUFYIiwiQ09OTkVDVElPTl9HUk9VUF9SRVRSWV9ERUxBWSIsIkNPTlRFTlRfRlBTIiwiQ09OVEVOVF9NQVhfV0lEVEgiLCJDT05URU5UX01BWF9IRUlHSFQiLCJDT05URU5UX0JQUCIsIkNPTlRFTlRfVVBEQVRFX0RFQk9VTkNFIiwiQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUiLCJDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUiLCJDT05URU5UX1BVQlNVQl9UT1BJQ19TVEFUU19ERUJPVU5DRSIsIkNPTlRFTlRfT0JKRUNUX1NUT1JFX0xBU1RfVFJBTlNBQ1RJT05fT0JKRUNUX05BTUUiLCJDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiIsIkNPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfUkVUUllfREVMQVkiLCJDT05URU5UX09CSkVDVF9TVE9SRV9TVEFUU19ERUJPVU5DRSIsIkNPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1RSQU5TQUNUSU9OX1RBQkxFX05BTUUiLCJDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9MQVlPVVRfVEFCTEVfTkFNRSIsIkNPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NZTkNfVElNRU9VVCIsIkNPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NUQVRTX0RFQk9VTkNFIiwiREVURUNUSU9OX0lTU1VFX1RJTUVPVVQiLCJERVRFQ1RJT05fSVNTVUVfU1RfVEhSRVNIT0xEIiwiREVURUNUSU9OX0lTU1VFX0RUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9JU1NVRV9CSVRSQVRFX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9JU1NVRV9KSVRURVJfVEhSRVNIT0xEIiwiREVURUNUSU9OX0lTU1VFX1JUVF9USFJFU0hPTEQiLCJJbmZpbml0eSIsIkRFVEVDVElPTl9JU1NVRV9BVl9ERUxBWV9USFJFU0hPTEQiLCJERVRFQ1RJT05fSVNTVUVfVFBGX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9JU1NVRV9GUFNfVEhSRVNIT0xEIiwiREVURUNUSU9OX0NPUkVfSVNTVUVfUlVMRVMiLCJ0eXBlIiwiSXNzdWVUeXBlIiwiU1RWb2xhdGlsaXR5IiwicmVwb3J0TWV0cmljIiwicmVwb3J0IiwibWF4VGhyZXNob2xkIiwiRFRWb2xhdGlsaXR5IiwiREVURUNUSU9OX1ZJREVPX0lTU1VFX1JVTEVTIiwiVGltZVBlckZyYW1lIiwidGltZVBlckZyYW1lTGltaXQiLCJGUFMiLCJ0aW1lUGVyRnJhbWUiLCJCaXRyYXRlIiwidGFyZ2V0Qml0cmF0ZSIsImZyYW1lV2lkdGgiLCJmcmFtZUhlaWdodCIsImJpdHJhdGUiLCJtaW5UaHJlc2hvbGQiLCJKaXR0ZXIiLCJqaXR0ZXIiLCJGcmFtZVBlclNlY29uZCIsIkRFVEVDVElPTl9BVURJT19JU1NVRV9SVUxFUyIsIkRFVEVDVElPTl9TRU5ERVJfSVNTVUVfUlVMRVMiLCJSb3VuZFRyaXBUaW1lIiwicm91bmRUcmlwVGltZSIsIkRFVEVDVElPTl9SRUNFSVZFUl9JU1NVRV9SVUxFUyIsIkF1ZGlvVmlkZW9EZWxheSIsIkRFVEVDVElPTl9QUk9CTEVNX1NUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9QUk9CTEVNX0RUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9QUk9CTEVNX1RQRl9USFJFU0hPTEQiLCJERVRFQ1RJT05fUFJPQkxFTV9BVl9ERUxBWV9USFJFU0hPTEQiLCJERVRFQ1RJT05fUFJPQkxFTV9GUFNfVEhSRVNIT0xEIiwiREVURUNUSU9OX1BST0JMRU1fQklUUkFURV9USFJFU0hPTEQiLCJERVRFQ1RJT05fUFJPQkxFTV9KSVRURVJfVEhSRVNIT0xEIiwiREVURUNUSU9OX1BST0JMRU1fUlRUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9QUk9CTEVNX1JVTEVTIiwiUHJvYmxlbVR5cGUiLCJDUFVDeWNsZSIsImlzc3VlcyIsInRocmVzaG9sZCIsIklOVEVSVkFMX1RJTUUiLCJOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FIiwiTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRV9NQVgiLCJOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FX0xJTUlUIiwiTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FIiwiTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FX01BWCIsIk5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRV9MSU1JVCIsIk5PREVfRElTVEFOQ0VfSE9QIiwiTk9ERV9ESVNUQU5DRV9SRVNPTFVUSU9OIiwiTk9ERV9ESVNUQU5DRV9UUkFDS1MiLCJOT0RFX0RJU1RBTkNFX01BWCIsIk5PREVfQ0xFQU5fUkVNT1RFX05PREVTX0lOVEVSVkFMIiwiTk9ERV9DTEVBTl9SRU1PVEVfTk9ERVNfVEhSRVNIT0xEIiwiTk9ERV9BR0VOVF9DQVBBQ0lUWV9SRVBPUlRfSU5URVJWQUwiLCJQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkciLCJQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BPTkciLCJQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX0lOVEVSVkFMIiwiUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9USFJFU0hPTEQiLCJQRUVSX0NPTk5FQ1RJT05fUkVDT05ORUNUX1RJTUVPVVQiLCJQRUVSX0NPTk5FQ1RJT05fVElNRU9VVCIsIlBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfVElNRU9VVCIsIlBFRVJfQ09OTkVDVElPTl9NRVNTQUdFX1JFVFJZIiwiUEVFUl9DT05ORUNUSU9OX0hBTkRTSEFLRV9ERUJPVU5DRSIsIlBFRVJfQ09OTkVDVElPTl9DSFVOS19JREVOVElGSUVSIiwiUEVFUl9DT05ORUNUSU9OX0NIVU5LX1NJWkUiLCJQRUVSX0NPTk5FQ1RJT05fQlVGRkVSX1RIUkVTSE9MRCIsIlBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9SRVRSWV9ERUxBWSIsIlBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9ESVNDT05ORUNUX0hBTkRMRVJfREVMQVkiLCJSRU1FRElBVElPTl9ET1dOR1JBREVfV0FJVF9USU1FIiwiUkVNRURJQVRJT05fVVBHUkFERV9XQUlUX1RJTUUiLCJSRU1FRElBVElPTl9NSU5fRlBTIiwiUkVNRURJQVRJT05fTUFYX1JFU09MVVRJT05fU0NBTEUiLCJSRU1FRElBVElPTl9NSU5fQklUUkFURSIsIlJFTUVESUFUSU9OX1JFU09MVVRJT05fU0NBTEUiLCJSRU1FRElBVElPTl9GUFMiLCJSRU1FRElBVElPTl9CSVRSQVRFIiwiUkVNRURJQVRJT05fUlVMRVMiLCJwcm9ibGVtVHlwZSIsInJlbWVkaWF0aW9ucyIsIlJlbWVkaWF0aW9uTWVzc2FnZVR5cGUiLCJSZW1lZGlhdGlvbiIsImNvbXBvbmVudCIsIlJlbWVkaWF0aW9uQ29tcG9uZW50IiwiUmVzb2x1dGlvbiIsImFjdGlvbiIsIlJlbWVkaWF0aW9uQWN0aW9uIiwiRG93bmdyYWRlIiwiUmVtb3RlUmVtZWRpYXRpb24iLCJNRVNTQUdFX0JVRkZFUl9SRVRFTlRJT05fVElNRSIsIk1FU1NBR0VfQlVGRkVSX0NMRUFOVVBfSU5URVJWQUwiLCJTVEFUU19DT0xMRUNUX0RFTEFZIiwiU1RBVFNfUkVQT1JUX0RFTEFZIiwiU1RBVFNfT1VUQk9VTkQiLCJTVEFUU19SRU1PVEVfSU5CT1VORCIsIlNUQVRTX0lOQk9VTkQiLCJTVEFUU19TRU5ERVJfRklMVEVSUyIsIlNUQVRTX1JFQ0VJVkVSX0ZJTFRFUlMiLCJTVUJTQ1JJUFRJT05fUkVRVUVTVF9USU1FT1VUIiwiU1VCU0NSSVBUSU9OX01BWF9SRVRSWV9DT1VOVCIsIlNVQlNDUklQVElPTl9NQVhfT1VUR09JTkciLCJTVUJTQ1JJUFRJT05fUkVUUllfREVMQVkiLCJTVUJTQ1JJUFRJT05fUkVRVUVTVF9SRVRSWV9ERUxBWSIsIlNZU1RFTV9UT1BJQyIsIlNZU1RFTV9UT1BJQ19JTlRFUk5BTCIsImVudmlyb25tZW50IiwiaXNPYmplY3QiLCJpdGVtIiwiQXJyYXkiLCJpc0FycmF5IiwibWVyZ2VEZWVwIiwidGFyZ2V0Iiwic291cmNlcyIsImxlbmd0aCIsInNvdXJjZSIsInNoaWZ0Iiwia2V5IiwiT2JqZWN0IiwiYXNzaWduIiwiRW52aXJvbm1lbnQiLCJ2ZXJzaW9uIiwiaXNQcm9kdWN0aW9uIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwiYXBwSWQiLCJmdW5jdGlvbnNSZWdpb24iLCJhd3MiLCJlbmRwb2ludCIsInJlZ2lvbiIsIm1lc3NhZ2luZ1NlbmRlcklkIiwibWVhc3VyZW1lbnRJZCIsIkVhcmx5UmV0dXJuRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwiZXJyb3IiLCJzdXBlciIsIlNES0ludGVybmFsRXJyb3JDb2RlcyIsIm1lc3NhZ2VzIiwiTWFwIiwiQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkIiwiQ29ubmVjdGlvbk5vdENvbm5lY3RlZCIsIkNvbm5lY3Rpb25Ob1JldHJ5UXVldWUiLCJDb25uZWN0aW9uSW52YWxpZERhdGFFdmVudCIsIk9iamVjdFN0b3JlQ2Fubm90V3JpdGVUcmFuc2FjdGlvbiIsIk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlIiwiT2JqZWN0U3RvcmVOb3RTeW5jZWQiLCJJbnZhbGlkRGF0YUNoYW5uZWwiLCJJbnZhbGlkUHVibGlzaGVyIiwiSW52YWxpZFN1YnNjcmliZXIiLCJJbnZhbGlkU3Vic2NyaXB0aW9uIiwiS2V5VmFsdWVEYXRhYmFzZUNyZWF0aW9uRmFpbGVkIiwiS2V5VmFsdWVEYXRhYmFzZVRhYmxlRG9lc05vdEV4aXN0IiwiS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCIsIktleVZhbHVlRGF0YWJhc2VUcmFuc2FjdGlvblZhbHVlTm90U2V0IiwiTG9jYWxNZWRpYVN0cmVhbURvZXNOb3RFeGlzdCIsIk1pc3NpbmdSZW1vdGVDb25uZWN0aW9uIiwiTWlzc2luZ1N5c3RlbVRvcGljIiwiT3V0Z29pbmdNZWRpYVN0cmVhbU5vVG9waWMiLCJSZW1vdGVNZWRpYVN0cmVhbURvZXNOb3RFeGlzdCIsIlJlbW90ZU1lZGlhU3RyZWFtTWlzc2luZ1Byb3ZpZGVySWQiLCJSZW1vdGVDb25uZWN0aW9uRXhpc3RzIiwiU3Vic2NyaXB0aW9uUmVxdWVzdERvZXNOb3RFeGlzdCIsIlN1YnNjcmlwdGlvblJlcXVlc3RGYWlsZWQiLCJTdWJzY3JpcHRpb25SZXF1ZXN0Tm9BbnN3ZXIiLCJOb2RlRG9lc05vdEV4aXN0IiwiTm9kZUFscmVhZHlFeGlzdCIsIlBlZXJDb25uZWN0aW9uSW52YWxpZERlc3RpbmF0aW9uIiwiU0RLSW50ZXJuYWxFcnJvciIsImNvZGUiLCJzdGF0aWMiLCJkYXRhIiwiZ2V0IiwiSlNPTiIsInN0cmluZ2lmeSIsIlBlZXJDb25uZWN0aW9uVHlwZSIsIlBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUiLCJQZWVyQ29ubmVjdGlvbk9yaWdpbiIsIkNvbnRlbnRNZXNzYWdlVHlwZSIsIkludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uIiwiSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlIiwiSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24iLCJJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uIiwiRGV0ZWN0aW9uTWVzc2FnZVR5cGUiLCJOb2RlU3RhdHVzIiwiTm9kZU1lc3NhZ2VUeXBlIiwiSUludGVybmFsRmVhdHVyZXMiLCJTdGF0c01lc3NhZ2VUeXBlIiwiTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24iLCJTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZSIsIlN1YnNjcmlwdGlvblR5cGUiLCJTdWJzY3JpcHRpb25NZXNzYWdlVHlwZSIsIlN5c3RlbU1lc3NhZ2VUeXBlIiwiTG9nZ2luZ1NlcnZpY2VzIiwiTG9nZ2luZ0NoYW5uZWxzIiwiUXVldWVFbGVtZW50UHJpb3JpdHkiLCJTdXBwb3J0RmVhdHVyZU5hbWUiLCJDbHVzdGVyIiwidmVuZG9ySWQiLCJjbHVzdGVySWQiLCJhdXRoTm9kZSIsImV2ZW50RW1pdHRlciIsIm9yY2hlc3RyYXRvciIsImF1dGhTZXJ2aWNlIiwib3B0aW9ucyIsImNvbmZpZ3MiLCJDbHVzdGVyRXZlbnRFbWl0dGVyIiwiT3JjaGVzdHJhdG9yIiwiam9pbiIsImluaXRpYWxpemUiLCJOb2RlVHlwZSIsIlVzZXIiLCJyZWdpc3RlckNsdXN0ZXIiLCJ1c2VyIiwidXBkYXRlVXNlciIsImxlYXZlIiwiY2xvc2UiLCJ1bnJlZ2lzdGVyQ2x1c3RlciIsImVtaXQiLCJ1bmRlZmluZWQiLCJvcGVuUHViU3ViVG9waWMiLCJuYW1lIiwic3RyZWFtIiwiZ2V0TmFtZSIsImJpbmQiLCJnZXRPd25lcklkIiwiZ2V0Q29udGVudFR5cGUiLCJwdWJsaXNoIiwic3Vic2NyaWJlIiwidW5zdWJzY3JpYmUiLCJvcGVuT2JqZWN0U3RvcmVCdWNrZXQiLCJsYWJlbCIsInVucHVibGlzaCIsImxpc3QiLCJvcGVuS2V5VmFsdWVEYXRhYmFzZSIsImxheW91dCIsImRiIiwiZ2V0VGFibGUiLCJnZXRQdWJTdWJUb3BpY3MiLCJzdHJhdGVneSIsIm1hcCIsImdldE9iamVjdFN0b3JlQnVja2V0cyIsImdldEtleVZhbHVlRGF0YWJhc2VzIiwicHVibGlzaExvY2FsTWVkaWFTdHJlYW0iLCJtZWRpYVNvdXJjZSIsImNyZWF0ZUxvY2FsTWVkaWFTdHJlYW0iLCJnZXRMYWJlbCIsImdldE1lZGlhU3RyZWFtIiwic2V0UHJpb3JpdHkiLCJwdWJsaXNoTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0iLCJjcmVhdGVMb2NhbER5bmFtaWNNZWRpYVN0cmVhbSIsImFkZFRyYWNrIiwicmVtb3ZlVHJhY2siLCJyZXBsYWNlVHJhY2siLCJzZXRUcmFuc2Zvcm1hdGlvbnMiLCJnZXRMb2NhbE1lZGlhU3RyZWFtcyIsImdldFJlbW90ZU1lZGlhU3RyZWFtcyIsImdldEF2YWlsYWJsZVRyYWNrS2luZHMiLCJ1cGRhdGUiLCJvblByb3ZpZGVyQ2hhbmdlIiwiZ2V0TG9jYWxOb2RlIiwibm9kZSIsImdldElkIiwiZ2V0RGlzcGxheU5hbWUiLCJnZXRFbWFpbCIsImdldFJlbW90ZUNvbm5lY3Rpb25zIiwic2V0RGlzcGxheU5hbWUiLCJzZXRFbWFpbCIsIkFnZW50IiwiZ2V0UmVtb3RlTm9kZXMiLCJTREtDbGllbnRFcnJvciIsIlNES0NsaWVudEVycm9yQ29kZXMiLCJOb2RlSW52YWxpZFR5cGUiLCJvbiIsImFyZ3MiLCJvZmYiLCJyZWdpc3RlcmVkTGlzdGVuZXJzIiwiYnVmZmVyZWRFdmVudHMiLCJldmVudFRhcmdldCIsIkV2ZW50VGFyZ2V0IiwiZXZlbnQiLCJoYXMiLCJsb2ciLCJFdmVudHMiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJidWZmZXJFdmVudCIsImxpc3RlbmVyIiwiZXZlbnRUYXJnZXRMaXN0ZW5lciIsInNldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb25zdW1lQnVmZmVyZWRFdmVudHMiLCJldmVudHMiLCJmb3JFYWNoIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsZWFyIiwicmVtb3ZlTGlzdGVuZXIiLCJkZWxldGUiLCJidWZmZXJlZERhdGEiLCJBcHBTeW5jUHViU3ViQ29ubmVjdGlvbiIsIkJhc2VDb25uZWN0aW9uIiwiY29ubmVjdGlvblN0YXRlIiwiQ29ubmVjdGlvblN0YXRlIiwiRGlzY29ubmVjdGVkIiwiY29ubmVjdGlvblN0YXRlTGlzdGVuZXIiLCJjcmVhdGVTaW5nbGVPYnNlcnZlciIsIm1lc3NhZ2VMaXN0ZW5lcnMiLCJjcmVhdGVPYnNlcnZlciIsInN1YnNjcmlwdGlvbiIsImxpc3RlblVuc3Vic2NyaWJlciIsInJldHJ5UXVldWUiLCJjcmVhdGVSZXRyeVF1ZXVlIiwiQXN5bmNRdWV1ZUNhbGxiYWNrIiwic2VuZEFjdGlvbiIsIndhaXRDb25uZWN0ZWQiLCJjbGllbnQiLCJsb2NhbE5vZGUiLCJyZW1vdGVJZCIsImNvbm5lY3QiLCJteVRva2VuUHJvdmlkZXIiLCJnZXRUb2tlbnMiLCJhc3luYyIsImFjY2Vzc1Rva2VuIiwiZ2V0SWRUb2tlbiIsImRlY29kZUpXVCIsImlkVG9rZW4iLCJBbXBsaWZ5IiwiY29uZmlndXJlIiwiQVBJIiwiR3JhcGhRTCIsImRlZmF1bHRBdXRoTW9kZSIsIkF1dGgiLCJ0b2tlblByb3ZpZGVyIiwiZ2VuZXJhdGVDbGllbnQiLCJIdWIiLCJsaXN0ZW4iLCJwYXlsb2FkIiwiQ09OTkVDVElPTl9TVEFURV9DSEFOR0UiLCJub2RlSWQiLCJnZXRMb2NhbElkIiwibm9kZVR5cGUiLCJDb25uZWN0ZWQiLCJ3YXJuaW5nIiwiZSIsImlzQ29ubmVjdGVkIiwic2VuZCIsInB1c2giLCJvbk1lc3NhZ2UiLCJjYWxsYmFjayIsImdldFN1cHBvcnRlZENvbnRlbnRUeXBlcyIsIkNvbnRlbnRUeXBlIiwiRGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwic3RhdGUiLCJkZXN0aW5hdGlvbklkcyIsImRlc3RpbmF0aW9uSWQiLCJTaWduYWxpbmciLCJncmFwaHFsIiwicXVlcnkiLCJ2YXJpYWJsZXMiLCJnZXRIYXNoIiwiYXV0aFRva2VuIiwiQXV0aG9yaXphdGlvbiIsIm5leHQiLCJtZXNzYWdlIiwicGFyc2UiLCJpc1NlbmRlciIsImlzUmVjZWl2ZXIiLCJjb25zb2xlIiwiaGFzaEJ1ZmZlciIsImNyeXB0byIsInN1YnRsZSIsImRpZ2VzdCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwiZnJvbSIsIlVpbnQ4QXJyYXkiLCJiIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImdldFJlbW90ZUlkIiwiQmFzZVBlZXJDb25uZWN0aW9uIiwiaWNlU2VydmVycyIsImNvbm5lY3Rpb25UeXBlIiwiY29ubmVjdGlvbkNvbnN0cnVjdG9yIiwiY29ubmVjdGlvbiIsImRhdGFDaGFubmVsIiwiY3VycmVudFZlcnNpb24iLCJzeXN0ZW1Ub3BpYyIsImhhbmRzaGFrZUNhbmRpZGF0ZXMiLCJwZW5kaW5nSGFuZHNoYWtlQ2FuZGlkYXRlcyIsImhhbmRzaGFrZURlYm91bmNlIiwiaGFuZHNoYWtlU2VydmVycyIsInNldHVwQ29ubmVjdGlvbkV2ZW50cyIsInN0b3BDb25uZWN0aW9uIiwic2V0Q29ubmVjdGlvblR5cGUiLCJoYW5kbGVIYW5kc2hha2UiLCJjYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwiY2FuQWRkQ2FuZGlkYXRlcyIsImFkZFBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGUiLCJhZGRDYW5kaWRhdGUiLCJsb2dDb25uZWN0aW9uU3RhdGUiLCJpbmNsdWRlcyIsImhhbmRzaGFrZVN0YXRlIiwic2lnbmFsaW5nU3RhdGUiLCJyZWdpc3RlclN5c3RlbVB1Ymxpc2hlciIsInB1Ymxpc2hlciIsInVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIiLCJyZXNldENvbm5lY3Rpb24iLCJwcm9jZXNzUGVuZGluZ0hhbmRzaGFrZUNhbmRpZGF0ZXMiLCJwdWJsaXNoU3lzdGVtTWVzc2FnZSIsImNvbnRlbnQiLCJ1dWlkIiwiY29kZXMiLCJzb3VyY2VJZCIsInByb3BhZ2F0ZSIsIkNvcmUiLCJyZXRyeSIsIm1lc3NhZ2VUeXBlIiwiUGVlckNvbm5lY3Rpb24iLCJvbkdhdGhlcmluZ1N0YXRlQ2hhbmdlIiwiZ2F0aGVyaW5nU3RhdGUiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwic2VuZEljZUNhbmRpZGF0ZXMiLCJvbkNhbmRpZGF0ZSIsIm9uQ2xvc2UiLCJvbkhhbmRzaGFrZVN0YXRlQ2hhbmdlIiwib25Db25uZWN0aW9uU3RhdGVDaGFuZ2UiLCJvblRyYWNrIiwib25EYXRhQ2hhbm5lbCIsImxvY2FsSWQiLCJkYXRhQ2hhbm5lbFN0YXRlIiwiQ29ubmVjdGlvbk1hbmFnZXIiLCJtYXhGcHMiLCJtYXhCcHAiLCJjb25uZWN0aW9ucyIsImNvbm5lY3Rpb25Qb29sIiwiY29ubmVjdGlvbkdyb3VwIiwic2lnbmFsaW5nU2VydmVyIiwibWVzc2FnZUJ1ZmZlciIsImdyYXBoU2VydmljZSIsIk1lc3NhZ2VCdWZmZXJTZXJ2aWNlIiwiUGVlckNvbm5lY3Rpb25Hcm91cCIsIlBlZXJDb25uZWN0aW9uUG9vbCIsImFkZENvbm5lY3Rpb24iLCJtZWRpYXRvciIsInJlZ2lzdGVyU3lzdGVtU291cmNlIiwiXyIsImNsb3NlQ29ubmVjdGlvbiIsInVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UiLCJyZW1vdmVDb25uZWN0aW9uIiwiY3JlYXRlQ29ubmVjdGlvbiIsImdldENvbm5lY3Rpb25UeXBlIiwiT3B0aW1pemF0aW9uIiwicmVnaXN0ZXJSZW1vdGVOb2RlIiwiZ2V0Q29ubmVjdGlvbkdyb3VwIiwiZ2V0Q29ubmVjdGlvbiIsImdldENvbm5lY3Rpb25zIiwidmFsdWVzIiwiZmlsdGVyIiwiY29sbGVjdFN0YXRzIiwiaGFuZGxlT3V0Z29pbmdTeXN0ZW1FdmVudHMiLCJoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyIsIkRpc2Nvbm5lY3QiLCJTdGF0cyIsIk9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzIiwiaXNPZmZlciIsImlzSWNlQ2FuZGlkYXRlIiwiaXNOZWVkUmVzdGFydCIsImhhbmRsZVJlbWVkaWF0aW9uU3lzdGVtRXZlbnRzIiwidGFyZ2V0SWQiLCJoYW5kbGVOb2RlU3lzdGVtRXZlbnRzIiwiTm9kZUxlYXZlIiwiaWQiLCJ1bnJlZ2lzdGVyUmVtb3RlTm9kZSIsIk9mZmVyIiwiTmVlZFJlc3RhcnQiLCJIYW5kc2hha2UiLCJzZW5kZXJDb25uZWN0aW9uIiwicmVjZWl2ZXJDb25uZWN0aW9uIiwicmVjZWl2ZXJVbnN1YnNjcmliZXJzIiwidHJhY2tMaXN0ZW5lcnMiLCJyZW1vdmVUcmFja0xpc3RlbmVycyIsImxpc3RlbmVyVW5zdWJzY3JpYmVycyIsImRhdGFUb3BpY3MiLCJkYXRhVW5zdWJzY3JpYmVycyIsIm1lZGlhVG9waWNzIiwibWVkaWFVbnN1YnNjcmliZXJzIiwic3VjY2Vzc05vdGlmaWVkIiwicmVnaXN0ZXJQdWJsaXNoZXIiLCJQdWJTdWIiLCJPYmplY3RTdG9yZSIsIktleVZhbHVlRGF0YWJhc2UiLCJNZWRpYSIsInVucmVnaXN0ZXJQdWJsaXNoZXIiLCJyZWdpc3RlclN1YnNjcmliZXIiLCJzdWJzY3JpYmVyIiwiQWRkIiwidHJhY2siLCJwcmlvcml0eSIsInBhcmFtcyIsIlJlbW92ZSIsIlVwZGF0ZSIsInNldFBhcmFtcyIsInVucmVnaXN0ZXJTdWJzY3JpYmVyIiwic2V0dXBMaXN0ZW5lcnMiLCJjcmVhdGVPZmZlciIsInNlbmRlckNvbm5lY3RlZCIsInJlY2VpdmVyQ29ubmVjdGVkIiwib25SZW1vdmVUcmFjayIsIkNvbm5lY3Rpb24iLCJoYW5kbGVPZmZlciIsIkFuc3dlciIsImhhbmRsZUFuc3dlciIsIlN1Y2Nlc3MiLCJoYW5kbGVTdWNjZXNzIiwiaGFuZGxlSWNlQ2FuZGlkYXRlcyIsImhhbmRsZU5lZWRSZXN0YXJ0IiwiUmVzdGFydCIsImFwcGx5UmVtZWRpYXRpb24iLCJ0b3BpY0xhYmVsIiwiZ2V0VG9waWNMYWJlbCIsImNvbnRlbnRUeXBlIiwiUmVtb3RlQWRkIiwicHJvdmlkZXJJZCIsIlJlbW90ZVJlbW92ZSIsIm9yaWdpbiIsIlNlbmRlciIsImNyZWF0ZVJlY2VpdmVyQ29ubmVjdGlvbiIsImNyZWF0ZVNlbmRlckNvbm5lY3Rpb24iLCJvZmZlciIsImFuc3dlciIsIlNlbmRlclBlZXJDb25uZWN0aW9uIiwiUmVjZWl2ZXJQZWVyQ29ubmVjdGlvbiIsIm1lc3NhZ2VVbnN1YnNjcmliZXIiLCJyZXRyeVF1ZXVlcyIsImhhc01lc3NhZ2UiLCJhZGRNZXNzYWdlIiwiY3JlYXRlVmVyc2lvbmVkUmV0cnlRdWV1ZSIsIlN5bmNRdWV1ZUNhbGxiYWNrIiwid2FpdCIsImtleXMiLCJzaXplIiwiZmluZCIsImV4aXN0aW5nUmVjaXBpZW50cyIsInJlY2lwaWVudHMiLCJmaWx0ZXJlZERlc3RpbmF0aW9uSWRzIiwiZXh0ZW5kZWRSZWNpcGllbnRzIiwidXBkYXRlUHJvcGFnYXRpb25Qcm9wZXJ0aWVzIiwic2hvdWxkQ29udGludWVQcm9wYWdhdGlvbiIsImxvZ1Byb3BhZ2F0ZVN5c3RlbUV2ZW50IiwiZ2V0Q29ubmVjdGlvbkRlc3RpbmF0aW9ucyIsIm5ld1Byb3BlcnRpZXMiLCJyZWR1Y2UiLCJhY2MiLCJyZWNpcGllbnQiLCJTZXQiLCJmb3JtYXR0ZWRTeXN0ZW1Mb2ciLCJnZXRGb3JtYXR0ZWRTeXRlbUxvZyIsImxvZ1JhdyIsIlN5c3RlbSIsImNvbm5lY3Rpb25JZHMiLCJudW1iZXJPZkNvbm5lY3Rpb25zVG9DaG9vc2UiLCJub2RlSWRzIiwiZ2V0Q2xvc2VzdE5vZGVzIiwibm9kZUlkc0NvdW50Iiwib3B0aW1pemF0aW9uQ291bnQiLCJhZGQiLCJmaWx0ZXJDb25uZWN0aW9uIiwiY29ubmVjdGlvbklkIiwiUG9vbCIsIm1lc3NhZ2VDYWxsYmFjayIsInRyYWNrQ2FsbGJhY2siLCJyZW1vdmVUcmFja0NhbGxiYWNrIiwicmVjZWl2ZXJzIiwiY2h1bmtzIiwid2FpdFN1Y2Nlc3MiLCJtZXNzYWdlc1JlY2VpdmVkIiwic3lzdGVtTWVzc2FnZXNSZWNlaXZlZCIsInRvdGFsIiwiYnl0ZXNSZWNlaXZlZCIsInRpbWVSZWNlaXZpbmciLCJjbGVhcldhaXRTdWNjZXNzIiwiY3JlYXRlQW5zd2VyIiwic2V0SW50ZXJ2YWwiLCJjb2xsZWN0UmVjZWl2ZXJzU3RhdHMiLCJzdGF0cyIsInN0cmVhbUlkIiwic2VuZFN0YXRzIiwiUmVjZWl2ZXIiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93Iiwic3lzdGVtTWVzc2FnZXMiLCJ0cmFja3MiLCJzdHJlYW1zIiwib25yZW1vdmV0cmFjayIsInJlbW92ZUV2ZW50IiwiY2hhbm5lbCIsImhhbmRsZU9uTWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJoYW5kbGVDaHVua01lc3NhZ2UiLCJzdGFydFRpbWUiLCJBcnJheUJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJoZWFkZXIiLCJzcGxpdFBhcnRzIiwic3lzdGVtTWVzc2FnZVR5cGUiLCJzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGUiLCJnZXRMb2dnYWJsZVN5c3RlbU1lc3NhZ2UiLCJpbmZvIiwic3BsaXQiLCJjaHVuayIsInBhcnNlSW50IiwiY2h1bmtEYXRhIiwicmVwbGFjZSIsImFycmF5QnVmZmVyVG9PYmplY3QiLCJidWZmZXIiLCJqc29uU3RyaW5nIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJoZWFkZXJTaXplVmlldyIsInNsaWNlIiwiaGVhZGVyU2l6ZSIsIlVpbnQzMkFycmF5IiwiaGVhZGVyVmlldyIsImNvbnRlbnRWaWV3Iiwic2VuZGVycyIsImhlYXJ0YmVhdFVuc3Vic2NyaWJlciIsIndhaXRBbnN3ZXIiLCJsYXN0SGVhcnRiZWF0IiwiaXNSZWNvbm5lY3RpbmciLCJjb25uZWN0aW9uVGltZW91dCIsInJlc3RhcnRUaW1lb3V0IiwidXBncmFkZVRpbWVvdXQiLCJjcmVhdGVQcmlvcml0eVJldHJ5UXVldWUiLCJ3YWl0U2VuZEJ1ZmZlciIsIm1lc3NhZ2VzU2VudCIsImJ5dGVzU2VudCIsInRpbWVTZW5kaW5nIiwib25jbG9zZVRpbWVvdXQiLCJjbGVhclVwZ3JhZGVUaW1lb3V0IiwiY2xlYXJIZWFydGJlYXQiLCJjbGVhclJlc3RhcnRUaW1lb3V0IiwiY2xlYXJDb25uZWN0aW9uVGltZW91dCIsImNsZWFyV2FpdEFuc3dlciIsInF1ZXVlcyIsInF1ZXVlIiwiY2xlYXJPbmNsb3NlVGltZW91dCIsImNvbGxlY3RTZW5kZXJzU3RhdHMiLCJoYW5kbGVEaXNjb25uZWN0IiwiY3JlYXRlRGF0YUNoYW5uZWwiLCJidWZmZXJlZEFtb3VudExvd1RocmVzaG9sZCIsInN0YXJ0SGVhcnRiZWF0IiwiZXZlbnRNZXNzYWdlIiwiZW5jb2RlZE1lc3NhZ2UiLCJtZXJnZVBhcnRzIiwic2VuZENodW5rZWQiLCJTdWJzY3JpcHRpb24iLCJIaWdoIiwiTG93IiwiTWVkaXVtIiwic2VuZFdpdGhSZXRyeSIsIm1heEJpdHJhdGUiLCJnZXRNYXhCaXRyYXRlIiwicmVzb2x1dGlvblNjYWxlIiwibWluUmVzb2x1dGlvblNjYWxlIiwiZnJhbWVyYXRlIiwibWF4RnJhbWVyYXRlIiwia2luZCIsInNlbmRlciIsInJlc29sdXRpb24iLCJtYXhSZXNvbHV0aW9uIiwiZ2V0UmVzb2x1dGlvblNjYWxlIiwidmlkZW8iLCJzZXRFbmNvZGluZ1BhcmFtZXRlcnMiLCJNYXRoIiwiZmxvb3IiLCJzZXRVcGdyYWRlVGltZW91dCIsInJlbWVkaWF0aW9uIiwiZmluZFNlbmRlciIsInZpZGVvU2VuZGVyIiwiYXVkaW8iLCJidWZmZXJlZEFtb3VudCIsIm9uQnVmZmVyZWRBbW91bnRMb3ciLCJtZXNzYWdlU3RyaW5nIiwiaW5kZXhPZiIsImhlYWQiLCJ2YWx1ZSIsInVuc2hpZnQiLCJpbml0aWFsUG9uZyIsImhhbmRsZU1pc3NpbmdTZW5kZXJzIiwiY2FuUmVzdGFydEhhbmRzaGFrZSIsInJlc3RhcnRIYW5kc2hha2UiLCJoYW5kc2hha2VSZXN0YXJ0IiwiaWNlQ29ubmVjdGlvblN0YXRlIiwicmVhZHlTdGF0ZSIsIlVwZ3JhZGUiLCJzY2FsZSIsIm1heCIsIndpZHRoIiwiaGVpZ2h0IiwibWluIiwib2JqZWN0VG9BcnJheUJ1ZmZlciIsIm9iaiIsImhlYWRlckJ1ZmZlciIsIm1lcmdlZCIsIkJhc2VEYXRhU3RyZWFtIiwiQmFzZVN0cmVhbSIsIm91dGdvaW5nVG9waWMiLCJpbmNvbWluZ1RvcGljIiwiZmlsZUNodW5rcyIsIm93bmVyIiwiZ2V0SW50ZXJuYWxTdHJlYW1JZCIsInRvcGljIiwiRmlsZSIsInJlYWRGaWxlQ29udGVudCIsImluZGV4IiwiZ2V0RmlsZUNvbnRlbnQiLCJCYXNlTG9jYWxNZWRpYVN0cmVhbSIsIkJhc2VNZWRpYVN0cmVhbSIsIk1lZGlhU3RyZWFtUHJpb3JpdHkiLCJEZWZhdWx0IiwidHJhY2tFbmRlZExpc3RlbmVycyIsIm91dGdvaW5nU3RyZWFtcyIsIk1lZGlhU3RyZWFtIiwic3JjT2JqZWN0IiwiY2FwdHVyZVN0cmVhbSIsIm1lZGlhU3RyZWFtIiwiZ2V0VHJhY2tzIiwic2V0dXBUcmFja0VuZGVkTGlzdGVuZXJzIiwibG9nU2VydmljZUV2ZW50IiwidHJhY2tLaW5kcyIsImRlc3Ryb3kiLCJvdXRnb2luZ1N0cmVhbSIsIkNvbnRlbnQiLCJQdWJsaXNoTWVkaWFTdHJlYW0iLCJvd25lcklkIiwiYXZhaWxhYmxlVHJhY2tLaW5kcyIsIlVucHVibGlzaE1lZGlhU3RyZWFtIiwiQ2xvc2VNZWRpYVN0cmVhbSIsImdldFByaW9yaXR5IiwiZ2V0U2hhcmVhYmxlU3RyZWFtIiwiT3V0Z29pbmdNZWRpYVN0cmVhbSIsIm9uVW5yZWdpc3RlclB1Ymxpc2hlciIsImdldFNoYXJlYWJsZVN0cmVhbUlkIiwiaGFuZGxlTG9jYWxUcmFja0ZhaWx1cmUiLCJMb2NhbE1lZGlhU3RyZWFtVHJhY2tGYWlsIiwiQ29udGVudE1hbmFnZXIiLCJhdWRpb0NvbnRleHQiLCJsb2NhbE1lZGlhU3RyZWFtcyIsInJlbW90ZU1lZGlhU3RyZWFtcyIsInB1YlN1YlRvcGljcyIsIm9iamVjdFN0b3JlcyIsImtleVZhbHVlRGF0YWJhc2VzIiwidHJhbnNhY3Rpb25TZXJ2aWNlIiwiRmlyZWJhc2VSREJUcmFuc2FjdGlvblNlcnZpY2UiLCJyZXNldCIsInJlbW92ZVJlbW90ZU1lZGlhU3RyZWFtIiwicmVtb3ZlTG9jYWxNZWRpYVN0cmVhbSIsInJlbW92ZVB1YlN1YlRvcGljIiwicmVtb3ZlT2JqZWN0U3RvcmUiLCJyZW1vdmVLZXlWYWx1ZURhdGFiYXNlIiwiY3JlYXRlT2JqZWN0U3RvcmVCdWNrZXQiLCJjb25uZWN0b3JDb25zdHJ1Y3RvciIsIk9iamVjdFN0b3JlQWxyZWFkeUV4aXN0cyIsImRhdGFTdHJlYW0iLCJjcmVhdGVLZXlWYWx1ZURhdGFiYXNlIiwiS2V5VmFsdWVEYXRhYmFzZUFscmVhZHlFeGlzdHMiLCJrZXlWYWx1ZURhdGFiYXNlIiwid2FybiIsIkxvY2FsTWVkaWFTdHJlYW1BbHJlYWR5RXhpc3RzIiwiTG9jYWxNZWRpYVN0cmVhbU5vQXVkaW9Db250ZXh0IiwibG9jYWxNZWRpYVN0cmVhbSIsIkxvY2FsRHluYW1pY01lZGlhU3RyZWFtIiwiTG9jYWxNZWRpYVN0cmVhbSIsImNyZWF0ZVB1YlN1YlRvcGljIiwiUHViU3ViVG9waWNBbHJlYWR5RXhpc3RzIiwiUHViU3ViVG9waWMiLCJjcmVhdGVSZW1vdGVNZWRpYVN0cmVhbSIsImludGVybmFsSWQiLCJSZW1vdGVNZWRpYVN0cmVhbUFscmVhZHlFeGlzdHMiLCJyZW1vdGVOb2RlIiwicmVtb3RlTWVkaWFTdHJlYW0iLCJSZW1vdGVNZWRpYVN0cmVhbSIsInJlbW90ZVN0cmVhbXMiLCJoYW5kbGVDb250ZW50U3lzdGVtRXZlbnRzIiwiaGFuZGxlUHVibGlzaE1lZGlhU3RyZWFtIiwiaGFuZGxlVW5wdWJsaXNoTWVkaWFTdHJlYW0iLCJoYW5kbGVDbG9zZU1lZGlhU3RyZWFtIiwiQ2xvc2VQdWJTdWJUb3BpYyIsImhhbmRsZUNsb3NlUHViU3ViVG9waWMiLCJDbG9zZU9iamVjdFN0b3JlQnVja2V0IiwiaGFuZGxlQ2xvc2VPYmplY3RTdG9yZSIsIkNsb3NlS2V5VmFsdWVEYXRhYmFzZSIsImhhbmRsZUNsb3NlS2V5VmFsdWVEYXRhYmFzZSIsIlVuc3Vic2NyaWJlTWVkaWFTdHJlYW0iLCJoYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbSIsIlJlcXVlc3RTeW5jS2V5VmFsdWVEYXRhYmFzZSIsInNlbmRUcmFuc2FjdGlvbnNEdW1wIiwiU2VuZFRyYW5zYWN0aW9uc0R1bXAiLCJwcm9jZXNzVHJhbnNhY3Rpb25zRHVtcCIsInRyYW5zYWN0aW9ucyIsIlJlcXVlc3RUcmFuc2FjdGlvbnNWYWx1ZSIsInNlbmRUcmFuc2FjdGlvbnNWYWx1ZSIsInRyYW5zYWN0aW9uSWRzIiwibm90aWZ5Q2x1c3RlciIsIk5vZGVKb2luIiwiaGFuZGxlTm9kZUpvaW5OZWVkUHVibGlzaGVkU3RyZWFtIiwibm90aWZ5T2JqZWN0U3RvcmVPZk5vZGVKb2luIiwiaGFuZGxlTm9kZUxlYXZlIiwibm90aWZ5T2JqZWN0U3RvcmVPZk5vZGVMZWF2ZSIsImhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyIsIlN1YnNjcmliZU1lZGlhU3RyZWFtIiwiaGFuZGxlU3Vic2NyaWJlTWVkaWFTdHJlYW0iLCJVcGRhdGVNZWRpYVN0cmVhbSIsImhhbmRsZVVwZGF0ZU1lZGlhU3RyZWFtIiwiaGFuZGxlVW5zdWJzY3JpYmVNZWRpYVN0cmVhbSIsInJlbWFpbmluZ1RyYWNrcyIsInRyYWNrS2luZCIsInVuc3Vic2NyaWJlVHJhY2tFbmRlZExpc3RlbmVyIiwiaGFuZGxlTm9kZUpvaW4iLCJPYmplY3RTdG9yZURvZXNOb3RFeGlzdCIsIlB1YlN1YlRvcGljRG9lc05vdEV4aXN0IiwiS2V5VmFsdWVEYXRhYmFzZURvZXNOb3RFeGlzdCIsImRhdGFiYXNlIiwicmVtb3RlU3RyZWFtIiwiZGJLZXkiLCJ0YWJsZXMiLCJ0YWJsZU9ic2VydmVyIiwidHJhbnNhY3Rpb25UYWJsZSIsInRhYmxlVW5zdWJzY3JpYmVyIiwiaXNTeW5jIiwic3luY1Jlc29sdmUiLCJ0cmFuc2FjdGlvbnNUb1N5bmMiLCJ0aW1lb3V0Q2FsbGJhY2siLCJzeW5jVGltZW91dCIsImV2ZW50TGlzdGVuZXIiLCJsaXN0ZW5lclVuc3Vic2NyaWJlciIsInN5bmNUcmFuc2FjdGlvbnNXcml0dGVuIiwiZGVib3VuY2VTdGF0cyIsIndyaXRlcyIsInJlYWRzIiwiS2V5VmFsdWVEYXRhYmFzZU5hbWVOb3RTdHJpbmciLCJMYXlvdXRCdWlsZGVyIiwiZ2V0TGF5b3V0IiwiaXNWYWxpZCIsInJlYXNvbiIsInZhbGlkYXRlTGF5b3V0IiwiS2V5VmFsdWVEYXRhYmFzZUludmFsaWRMYXlvdXQiLCJhZGRSZXNlcnZlZFRhYmxlcyIsInRhYmxlTmFtZSIsInRhYmxlIiwiaGFzVGFibGUiLCJLZXlWYWx1ZURhdGFiYXNlVGFibGVOb3RGb3VuZCIsIm5ld1RhYmxlIiwiRGF0YWJhc2VUYWJsZSIsImdldFRhYmxlQ29ubmVjdG9yIiwiY291bnQiLCJLZXlWYWx1ZURhdGFiYXNlTm90T3BlbiIsIm9wZW4iLCJyZXNlcnZlZFRhYmxlcyIsInRyYW5zYWN0aW9uVGFibGVzVG9EZWxldGUiLCJsYXlvdXRUYWJsZSIsImxheW91dExpc3QiLCJpbnN0YW50aWF0ZVRyYW5zYWN0aW9uVGFibGUiLCJzZXRPbk1lc3NhZ2VIYW5kbGVyIiwic2V0T25UYWJsZVdyaXRlSGFuZGxlciIsImRlbGV0ZVRyYW5zYWN0aW9uc0ZvclRhYmxlIiwic3luYyIsImFuY2VzdG9ySWQiLCJjbGVhclN5bmNUaW1lb3V0IiwicHVibGlzaFN5bmNDb21wbGV0ZWQiLCJ0cmFuc2FjdGlvbnNEdW1wIiwibG9jYWxUcmFuc2FjdGlvbnMiLCJsb2NhbFRyYW5zYWN0aW9uIiwidHJhbnNhY3Rpb24iLCJ0IiwiY29tcGFyZVRyYW5zYWN0aW9ucyIsIkRlbGV0ZSIsInRyYW5zYWN0aW9uSWQiLCJ3cml0ZVRyYW5zYWN0aW9uIiwiZ2V0VHJhbnNhY3Rpb25Gcm9tVGFibGVXcml0ZUV2ZW50IiwidHJhbnNhY3Rpb25LZXkiLCJnZXRFc3RpbWF0ZWRUaW1lc3RhbXAiLCJyYW5kb20iLCJRdWVyeUJ1aWxkZXIiLCJ3aGVyZSIsImdldFF1ZXJ5IiwiY2hlY2tTeW5jQ29tcGxldGUiLCJ3cml0ZVZhbHVlIiwiR2V0IiwiTGlzdCIsIkNvdW50IiwiRGF0YWJhc2VFdmVudCIsIlN5bmNDb21wbGV0ZSIsInB1Ymxpc2hTeW5jQ29tcGxldGVkQWZ0ZXJXcml0ZXMiLCJhbGwiLCJjYWxjdWxhdGVTaXplIiwiS2V5VmFsdWVEYXRhYmFzZVN0YXRzIiwic3RvcmFnZSIsImxvZ1N0b3JhZ2UiLCJLZXlWYWx1ZURhdGFiYXNlVGFibGVOYW1lUmVzZXJ2ZWQiLCJpbmRleGVzIiwiY29ubmVjdG9yIiwicmVhZEV2ZW50IiwicHVibGlzaFdyaXRlRXZlbnQiLCJ2YWxpZGF0ZVZhbHVlIiwiaXNVcGRhdGUiLCJ3cml0ZUV2ZW50IiwiYnVpbGRRdWVyeSIsIktleVZhbHVlRGF0YWJhc2VJbnZhbGlkUXVlcnkiLCJ0YWJsZUFjdGlvbiIsImJ1aWxkVGFibGVFdmVudCIsIktleVZhbHVlRGF0YWJhc2VJbnZhbGlkVmFsdWUiLCJwcm9wZXJ0eVZhbHVlIiwidHJhbnNmb3JtYXRpb25zIiwiY2xpZW50U3RyZWFtIiwiYXVkaW9Tb3VyY2UiLCJhdWRpb0Rlc3RpbmF0aW9uIiwic291cmNlVmlkZW8iLCJjYW52YXMiLCJjb250ZXh0IiwiaW50ZXJ2YWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhdXRvcGxheSIsIm11dGVkIiwibG9hZCIsIm9ubG9hZGVkZGF0YSIsInBsYXkiLCJnZXRDb250ZXh0IiwiY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbiIsImdldEF1ZGlvVHJhY2tzIiwiY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UiLCJhdWRpb1RyYWNrIiwidmlkZW9XaWR0aCIsInZpZGVvSGVpZ2h0IiwiZ2V0VmlkZW9UcmFja3MiLCJlbmFibGVkIiwiZHJhd0ltYWdlIiwiY2xlYXJSZWN0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZSIsImRpc2Nvbm5lY3QiLCJzdG9wIiwiZXhpc3RpbmdUcmFjayIsImdldFRyYWNrIiwiYWRkVmlkZW9UcmFjayIsImFkZEF1ZGlvVHJhY2siLCJwYXJhbSIsImdldFRyYWNrRnJvbVBhcmFtIiwicmVzdW1lIiwidW5zdWJzY3JpYmVIYW5kbGVyIiwibGFzdFRyYW5zYWN0aW9uSWQiLCJwZW5kaW5nU3luY1RyYW5zYWN0aW9ucyIsIm9iamVjdFJlcXVlc3RzIiwicGVuZGluZ0ZpbGVzU3luY2luZyIsInBlbmRpbmdGaWxlc1RyYW5zYWN0aW9ucyIsInBlbmRpbmdGaWxlc1JlbmFtZSIsIm9iamVjdFN0b3JlQ29ubmVjdG9yIiwiT2JqZWN0U3RvcmVOYW1lTm90U3RyaW5nIiwic3RvcmVLZXkiLCJmaWxlIiwidGV4dCIsInBheWxvYWRUeXBlIiwiUmVxdWVzdCIsImhhbmRsZVJlcXVlc3RQYXlsb2FkIiwiaGFuZGxlVHJhbnNhY3Rpb25QYXlsb2FkIiwic3luY1RyYW5zYWN0aW9ucyIsInN5bmNQZW5kaW5nRmlsZXMiLCJPYmplY3RTdG9yZUFscmVhZHlTdWJzY3JpYmVkIiwiUGF5bG9hZEFjdGlvbiIsInB1Ymxpc2hGaWxlIiwicGF0aCIsIkZvbGRlciIsInB1Ymxpc2hGb2xkZXIiLCJNb3ZlIiwicHVibGlzaE1vdmUiLCJuZXdQYXRoIiwiT2JqZWN0U3RvcmVJbnZhbGlkUGF5bG9hZCIsInBhcmVudElkIiwiVHJhbnNhY3Rpb24iLCJwdWJsaXNoVHJhbnNhY3Rpb24iLCJkZWxldGVPYmplY3QiLCJPYmplY3RTdG9yYWdlIiwiT2JqZWN0U3RvcmVOb3RJblN5bmMiLCJPYmplY3RTdG9yZUludmFsaWRQYXRoIiwicmVjdXJzaXZlIiwiaW5jbHVkZVBlbmRpbmciLCJjbGVhbkxpc3QiLCJwZW5kaW5nRmlsZXMiLCJ0aW1lb3V0Iiwic2VuZEZpbGVSZXF1ZXN0UGF5bG9hZCIsImVudHJ5IiwiT2JqZWN0S2luZCIsImVudHJpZXMiLCJlbmRzV2l0aCIsInNwbGljZSIsImNoZWNrc3VtIiwiZ2V0RmlsZUNoZWNrc3VtIiwiRmlsZVdyaXRlIiwiYW5zd2VyZXJJZCIsIndyaXRlRmlsZSIsInNlbmRGaWxlIiwiZmlsZU5hbWUiLCJmaWxlVHlwZSIsIkZvbGRlckNyZWF0ZSIsImNyZWF0ZUZvbGRlciIsIm1vdmVPYmplY3QiLCJwcm9jZXNzVHJhbnNhY3Rpb25QYXlsb2FkIiwidXBkYXRlTGFzdFRyYW5zYWN0aW9uSWQiLCJwcm9jZXNzUGVuZGluZ1N5bmNUcmFuc2FjdGlvbnMiLCJoYW5kbGVGaWxlV3JpdGUiLCJoYW5kbGVGb2xkZXJDcmVhdGUiLCJoYW5kbGVPYmplY3RNb3ZlIiwiaGFuZGxlT2JqZWN0RGVsZXRlIiwicGVuZGluZ1BheWxvYWQiLCJSZXF1ZXN0RmlsZSIsImhhbmRsZUZpbGVSZXF1ZXN0IiwiUmVxdWVzdEFjY2VwdGVkIiwiaGFuZGxlRmlsZVJlcXVlc3RBbnN3ZXIiLCJSZXF1ZXN0RmlsZVN5bmMiLCJoYW5kbGVGaWxlU3luYyIsIlJlcXVlc3RGaWxlV3JpdGUiLCJjcmVhdGVQZW5kaW5nRmlsZVdyaXRlIiwicGF0aE5hbWUiLCJnZXRQYXRoTmFtZSIsInNldFBlbmRpbmdGaWxlU3luY2luZ1BheWxvYWQiLCJjIiwiZGVsZXRlUGVuZGluZ0ZpbGUiLCJTdG9yYWdlRXZlbnRUeXBlIiwic3BsaXRQYXRoTmFtZSIsImZvbGRlciIsInNob3VsZFByb2Nlc3NUcmFuc2FjdGlvbiIsIkZvbGRlckRlbGV0ZSIsIkZpbGVEZWxldGUiLCJvbGRQYXRoIiwib2xkTmFtZSIsIkZvbGRlck1vdmUiLCJGaWxlTW92ZSIsIm9sZFBhdGhOYW1lIiwib3JpZ2luYWxQYXRoIiwiZm91bmQiLCJCbG9iIiwib2JqZWN0UmVxdWVzdCIsImdldE9yUmVzZXRQZW5kaW5nRmlsZVRpbWVvdXQiLCJyZXF1ZXN0UGF5bG9hZCIsImZpbGVQYXlsb2FkIiwicGVuZGluZ05hbWUiLCJnZXRUcmFuc2FjdGlvbnMiLCJyZXBvc2l0b3J5IiwiY3JlYXRlRmlsZVJlcXVlc3RzIiwib2JqZWN0UmVxdWVzdFBheWxvYWQiLCJPYmplY3RTdG9yZVN0YXRzIiwidW5yZWdpc3RlclB1Ymxpc2hlckxpc3RlbmVyIiwiZ2V0SW50ZXJuYWxUcmFja1BhcmFtcyIsInRyYWNrUGFyYW1zIiwiZ2V0UmVzb2x1dGlvbiIsInZpZGVvVHJhY2tzIiwic2V0dGluZ3MiLCJnZXRTZXR0aW5ncyIsIlB1YlN1YlRvcGljTmFtZU5vdFN0cmluZyIsInJlbW90ZUlkcyIsIlB1YlN1YlRvcGljQWxyZWFkeVN1YnNjcmliZWQiLCJQdWJTdWJUb3BpY1N0YXRzIiwicmVzaXplSGFuZGxlciIsInVwZGF0ZURlYm91bmNlIiwicmVuZGVyRWxlbWVudCIsInN1YnNjcmliZWRUcmFja3MiLCJwcm92aWRlckxpc3RlbmVyIiwic2V0dXBSZW5kZXJFbGVtZW50IiwiYWN0aXZlIiwic2V0dXBSZXNpemVIYW5kbGVyIiwic2V0SW50ZXJuYWxJZCIsImhhc1RyYWNrcyIsImlzU3Vic2NyaWJlZCIsImdldFN1YnNjcmliZWRUcmFja3MiLCJIVE1MVmlkZW9FbGVtZW50IiwiaXNWYWxpZE1lZGlhU3Vic2NyaXB0aW9uUGFyYW1zIiwiUmVtb3RlTWVkaWFTdHJlYW1JbnZhbGlkU3Vic2NyaXB0aW9uUGFyYW1zIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJnZXRQcm92aWRlcklkIiwic2V0UHJvdmlkZXJJZCIsIlJlc2l6ZU9ic2VydmVyIiwiY3VycmVudFdpZHRoIiwiY3VycmVudEhlaWdodCIsInJlc2l6ZU9ic2VydmVyIiwiY29udGVudFJlY3QiLCJvYnNlcnZlIiwiaGFuZGxlUmVtb3RlVHJhY2tGYWlsdXJlIiwicmVtb3ZlZFRyYWNrcyIsInN1YnNjcmliZWRUcmFjayIsIlJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsIiwiRGV0ZWN0aW9uTWFuYWdlciIsImhhbmRsZVN0YXRzU3lzdGVtRXZlbnRzIiwiTG9jYWxSZXBvcnQiLCJkZXRlY3RMb2NhbElzc3VlcyIsIlN0cmVhbVJlcG9ydCIsImRldGVjdFN0cmVhbUlzc3VlcyIsImRldGVjdFByb2JsZW1zIiwiaXNzdWVUeXBlIiwicnVsZSIsInIiLCJzb21lIiwiYWRkUHJvYmxlbSIsImlzc3VlIiwiYWRkSXNzdWUiLCJydWxlcyIsImRldGVjdFZpZGVvSXNzdWVzIiwiZGV0ZWN0QXVkaW9Jc3N1ZXMiLCJEZXRlY3Rpb24iLCJsb2dFdmVudCIsIm5iSXNzdWVzIiwidXNlcklkIiwiUHJvYmxlbSIsIk5vZGUiLCJBdXRoQWdlbnQiLCJncm91cElkIiwiYWdlbnRDb25maWciLCJvbkNvbmZpZ3VyYXRpb25DaGFuZ2UiLCJvblNuYXBzaG90IiwiZG9jIiwiZ2V0RmlyZXN0b3JlIiwic25hcHNob3QiLCJleGlzdHMiLCJpc0VxdWFsIiwiYWdlbnRJZCIsIm9sZENvbmZpZyIsIm5ld0NvbmZpZyIsInNldFJlcG9ydENhcGFjaXR5IiwicmVwb3J0Q2FwYWNpdHkiLCJjYXBhY2l0eSIsImFkZERvYyIsImNvbGxlY3Rpb24iLCJzZXJ2ZXJUaW1lc3RhbXAiLCJBdXRoVXNlciIsImRpc3BsYXlOYW1lIiwiZW1haWwiLCJqb2luZWRDbHVzdGVycyIsIm9ic2VydmVyIiwiTG9jYWxBZ2VudCIsInVwZGF0ZURlYm91bmNlVGltZW91dCIsImxhc3RVcGRhdGVkIiwiYW5zd2VySm9pbiIsInJhbmsiLCJOb2RlVXBkYXRlIiwibWV0YURhdGEiLCJnZXRSYW5rIiwicmVtb3RlQ29ubmVjdGlvbnMiLCJhZGRSZW1vdGVDb25uZWN0aW9uIiwiaW5jcmVtZW50VmVyc2lvbiIsInB1Ymxpc2hVc2VyVXBkYXRlIiwicmVtb3ZlUmVtb3RlQ29ubmVjdGlvbiIsImdldEN1cnJlbnRWZXJzaW9uIiwic2V0UmFuayIsImNvbm5lY3Rpb25zVXBkYXRlIiwiTm9kZUNvbm5lY3Rpb25zVXBkYXRlIiwiTG9jYWxVc2VyIiwiTm9kZU1hbmFnZXIiLCJyZW1vdGVVbnN1YnNjcmliZXIiLCJkaXNjb3ZlcnlTZXJ2aWNlIiwiZGlzY292ZXJ5VW5zdWJzY3JpYmVyIiwiYW5jZXN0b3JzIiwib3B0aW1pemF0aW9uTGF5ZXJzIiwiZGVib3VuY2VQcm9jZXNzUmFuayIsImxhc3RQcm9jZXNzUmFuayIsIkZpcmViYXNlUkRCRGlzY292ZXJ5U2VydmljZSIsImdldE1pbkNvbm5lY3Rpb25zIiwib25Ob2RlRGlzY29ubmVjdCIsImhhbmRsZU5vZGVEaXNjb25uZWN0IiwiZ2V0U3RhdHVzIiwiT2ZmbGluZSIsImdldExhc3RVcGRhdGVkIiwiZGVsZXRlUmVtb3RlTm9kZSIsImdldEFuY2VzdG9ySWRzIiwibm9kZXMiLCJPbmxpbmUiLCJkaXNjb3ZlciIsInByb2Nlc3NSYW5rIiwiZ2V0RGlzdGFuY2UiLCJ2aXNpdGVkIiwiZGlzdGFuY2UiLCJjdXJyZW50IiwiZ2V0UmVtb3RlTm9kZSIsInJlbW90ZUNvbm5lY3Rpb24iLCJoYW5kbGVOb2RlVXBkYXRlIiwicmVtb3ZlTm9kZSIsImhhbmRsZUNvbm5lY3Rpb25TdWNjZXNzIiwicHVibGlzaE5vZGVMZWF2ZSIsImNyZWF0ZVJlbW90ZU5vZGUiLCJub3RpZnlKb2luIiwicHVibGlzaE5vZGVKb2luIiwibm90aWZ5Q2x1c3Rlck5vZGVKb2luIiwic2V0UmVtb3RlQ29ubmVjdGlvbnMiLCJzZXRDdXJyZW50VmVyc2lvbiIsInNldExvY2FsUmFuayIsInNldFN0YXR1cyIsIm5vdGlmeUNsdXN0ZXJOb2RlVXBkYXRlIiwiaGFzUmVtb3RlTm9kZSIsInNldFJlbW90ZU5vZGUiLCJSZW1vdGVVc2VyIiwiUmVtb3RlQWdlbnQiLCJtYW5hZ2VBbmNlc3RvciIsIm1hbmFnZU9wdGltaXphdGlvbiIsImxheWVyIiwicmVtb3RlUmFuayIsImxvY2FsUmFuayIsImN1cnJlbnRNYXhMYXllciIsImdldEN1cnJlbnRNYXhMYXllciIsImdldE1heENvbm5lY3Rpb25zIiwidGFyZ2V0UmFuayIsImdldE5leHRUYXJnZXRSYW5rIiwibmV3QW5jZXN0b3JJZHMiLCJnZXRBbmNlc3RvcnMiLCJsb2NhbE9wdGltaXphdGlvbkNvbm5lY3Rpb25zIiwiZ2V0T3V0Z29pbmdPcHRpbWl6YXRpb25Db25uZWN0aW9ucyIsIm5vZGVUb0Nvbm5lY3QiLCJmaW5kSW5kZXgiLCJyZW1vdGVDb25uZWN0aW9uSWQiLCJuZXdSZW1vdGVOb2RlIiwibm9kZVJhbmsiLCJyYW5rRGlmZmVyZW5jZSIsInNvcnQiLCJyYW5rRGlmZmVyZW5jZUEiLCJyYW5rRGlmZmVyZW5jZUIiLCJzdGF0dXMiLCJ1cGRhdGVMYXN0VXBkYXRlZCIsImhhc0NoYW5nZWQiLCJjbHVzdGVyRXZlbnRFbWl0dGVyIiwiY29udGVudE1hbmFnZXIiLCJjb25uZWN0aW9uTWFuYWdlciIsInN1YnNjcmlwdGlvbk1hbmFnZXIiLCJzdGF0c01hbmFnZXIiLCJkZXRlY3Rpb25NYW5hZ2VyIiwicmVtZWRpYXRpb25NYW5hZ2VyIiwibm9kZU1hbmFnZXIiLCJTeXN0ZW1Ub3BpYyIsInN5c3RlbVRvcGljVW5zdWJzY3JpYmUiLCJtYW5hZ2VyQ29uZmlncyIsImdldENvbmZpZ3MiLCJHcmFwaFNlcnZpY2UiLCJtaW5Db25uZWN0aW9ucyIsIm1heENvbm5lY3Rpb25zIiwibWF4RGlzdGFuY2UiLCJwZWVyQ29ubmVjdGlvbkNvbm5lY3RvciIsIlN1YnNjcmlwdGlvbk1hbmFnZXIiLCJtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMiLCJnZXRNYXhEaXN0YW5jZSIsIlN0YXRzTWFuYWdlciIsIlJlbWVkaWF0aW9uTWFuYWdlciIsImluaXRpYWxpemVTeXN0ZW1Ub3BpYyIsImNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uIiwiY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24iLCJidWNrZXQiLCJzeW5jS2V5VmFsdWVEYXRhYmFzZSIsInJlZ2lzdGVyU291cmNlIiwiaGFuZGxlRXJyb3IiLCJ1bnJlZ2lzdGVyU291cmNlIiwiZ2V0UmVtb3RlTWVkaWFTdHJlYW0iLCJnZXRMb2NhbE1lZGlhU3RyZWFtIiwiYWRkUmVtb3RlTm9kZSIsInJlbW92ZVJlbW90ZU5vZGUiLCJwdWJTdWJEYXRhVG9waWMiLCJvYmplY3RTdG9yZSIsImtleVZhbHVlRGF0YWJhc2VDb25uZWN0b3IiLCJmZWF0dXJlcyIsIkZlYXR1cmVOb3RFbmFibGVkIiwiaGFuZGxlU3lzdGVtRXZlbnRzIiwiaGFuZGxlRGV0ZWN0aW9uU3lzdGVtRXZlbnRzIiwiSW50ZXJuYWxTREtFcnJvciIsImxvZ2dpbmdDbHVzdGVyIiwiU3lzdGVtU3RhdHMiLCJjYXRjaCIsImFuY2VzdG9yIiwiZmluZE5leHRBbmNlc3RvciIsIm5ld0FuY2VzdG9yIiwic2VuZGVyTWFwIiwiY2FuUmVtZWRpYXRlIiwiZ2V0RnJhbWVyYXRlIiwiZ2V0Qml0cmF0ZSIsImZwcyIsImJwcCIsImxhc3RSZW1lZGlhdGlvbnMiLCJoYW5kbGVQcm9ibGVtIiwicHJvYmxlbSIsImxhc3RSZW1lZGlhdGlvbiIsIlNESyIsImNsdXN0ZXJzIiwiYXV0aENvbnRleHQiLCJGaXJlYmFzZUF1dGhTZXJ2aWNlIiwiaXNGZWF0dXJlU3VwcG9ydGVkIiwiQXVkaW9Db250ZXh0IiwiT1BGU09iamVjdFN0b3JlQ29ubmVjdG9yIiwiSURCRGF0YWJhc2VDb25uZWN0b3IiLCJXZWJSVENCcm93c2VyUGVlckNvbm5lY3Rpb25Db25uZWN0b3IiLCJkaXNhYmxlSW50ZXJ2YWxIYWNrIiwic3RhcnROb1Rocm90dGxpbmdIYWNrIiwic2V0VmVuZG9ySWQiLCJsb2dnaW5nQ29ubmVjdG9ycyIsInNldExvZ2dpbmdDb25uZWN0b3JzIiwiZ2V0SW5zdGFuY2UiLCJzZWNyZXRLZXkiLCJ2YWxpZGF0ZUFjY2VzcyIsImluc3RhbmNlIiwiYXV0aGVudGljYXRlVXNlciIsImF1dGhlbnRpY2F0ZUFnZW50Iiwiam9pbkNsdXN0ZXIiLCJjbHVzdGVyIiwic3RvcE5vVGhyb3R0bGluZ0hhY2siLCJzaWduT3V0IiwiaHR0cHNDYWxsYWJsZSIsImdldEZ1bmN0aW9ucyIsImNyZWRlbnRpYWxzIiwic2lnbkluV2l0aENyZWRlbnRpYWwiLCJsb2dTdXBwb3J0IiwiYWdlbnREb2MiLCJnZXREb2MiLCJOb2RlTm90QXV0aGVudGljYXRlZCIsImFnZW50IiwiY29ubmVjdEFnZW50IiwiTm9kZVR5cGVOb3RTdXBwb3J0ZWQiLCJDbHVzdGVyQWxyZWFkeUpvaW5lZCIsImFkZENsdXN0ZXIiLCJjbHVzdGVyQ29uZmlnIiwidG9waWNJZCIsInB1YnN1YiIsImJ1Y2tldElkIiwib2JqZWN0U3RvcmFnZSIsImRhdGFiYXNlSWQiLCJzY2hlZHVsZVRpbWUiLCJkdXJhdGlvblRpbWUiLCJwdWJzdWJUb3BpY3MiLCJzZW5kZXJUb3RhbE1lc3NhZ2VzIiwicmVjZWl2ZXJUb3RhbE1lc3NhZ2VzIiwic2VuZGVyVGltZVByb2Nlc3NpbmciLCJyZWNlaXZlclRpbWVQcm9jZXNzaW5nIiwiZ2V0UmVwb3J0IiwidGltZVByb2Nlc3NpbmciLCJzdWJ0eXBlIiwidG90YWxTdG9yYWdlU2l6ZSIsInRvdGFsTWVzc2FnZXNTZW50IiwidG90YWxNZXNzYWdlc1JlY2VpdmVkIiwidG90YWxCeXRlc1NlbnQiLCJ0b3RhbEJ5dGVzUmVjZWl2ZWQiLCJzdG9yZSIsImdldFNUVm9sYXRpbGl0eSIsImdldERUVm9sYXRpbGl0eSIsInNlbmRlckJpdHJhdGUiLCJnZXRTZW5kZXJCaXRyYXRlIiwicmVjZWl2ZXJCaXRyYXRlIiwiZ2V0UmVjZWl2ZXJCaXRyYXRlIiwidG90YWxNZXNzYWdlcyIsInRvdGFsQnl0ZXMiLCJmcm9tRW50cmllcyIsIlN0YXRzTm9kZSIsInByb2Nlc3NSZXBvcnRzIiwicmVwb3J0cyIsInByb2Nlc3NEYXRhQ2hhbm5lbFJlcG9ydCIsInByb2Nlc3NMb2NhbFJlcG9ydCIsInNldFNjaGVkdWxlVGltZSIsInNlY2hlZHVsZVRpbWUiLCJzZXREdXJhdGlvblRpbWUiLCJwcm9jZXNzU2VydmljZVJlcG9ydCIsInRpbWUiLCJwcm9jZXNzU2VuZGVyUmVwb3J0IiwicHJvY2Vzc1JlY2VpdmVyUmVwb3J0IiwiU3RhdHNEYXRhQ2hhbm5lbCIsInNlbmRlckN1cnJlbnRUaW1lc3RhbXAiLCJzZW5kZXJQcmV2aW91c1RpbWVzdGFtcCIsInJlY2VpdmVyQ3VycmVudFRpbWVzdGFtcCIsInJlY2VpdmVyUHJldmlvdXNUaW1lc3RhbXAiLCJzZW5kZXJDdXJyZW50Qnl0ZXMiLCJzZW5kZXJQcmV2aW91c0J5dGVzIiwicmVjZWl2ZXJDdXJyZW50Qnl0ZXMiLCJyZWNlaXZlclByZXZpb3VzQnl0ZXMiLCJwcm9jZXNzUmVwb3J0IiwiZ2V0VG90YWxCeXRlcyIsInNlbmRlclRvdGFsQnl0ZXMiLCJnZXRTZW5kZXJUb3RhbEJ5dGVzIiwicmVjZWl2ZXJUb3RhbEJ5dGVzIiwiZ2V0UmVjZWl2ZXJUb3RhbEJ5dGVzIiwic2V0U2VuZGVyVGltZXN0YW1wIiwic2V0Qnl0ZXMiLCJzZXRSZWNlaXZlclRpbWVzdGFtcCIsInNldFJlY2VpdmVyQnl0ZXMiLCJieXRlcyIsInJlbW90ZU5vZGVzIiwibmV4dE5vZGVJZCIsInN0YXRzQ29sbGVjdGlvbiIsInN0YXRzUmVwb3J0aW5nIiwic3RhdHNSZXBvcnQiLCJzZXR1cFN0YXRzQ29sbGVjdGlvbiIsInNldHVwU3RhdHNSZXBvcnRpbmciLCJydW5uaW5nIiwibGFzdFJ1biIsImZpbmROZXh0Tm9kZUlkIiwiZmlyc3ROb2RlSWQiLCJzZW5kZXJTdHJlYW1zIiwicmVjZWl2ZXJTdHJlYW1zIiwiaW5ib3VuZFJlcG9ydHMiLCJvdXRib3VuZFJlcG9ydHMiLCJwcm9jZXNzSW5ib3VuZFJlcG9ydHMiLCJwcm9jZXNzT3V0Ym91bmRSZXBvcnRzIiwiU3RhdHNTdHJlYW0iLCJTdGF0c1RyYWNrQXVkaW8iLCJTdGF0c1RyYWNrVmlkZW8iLCJnZXRSb3VuZFRyaXBUaW1lIiwiZ2V0QXVkaW9WaWRlb0RlbGF5IiwiZXN0aW1hdGVkUGxheW91dFRpbWVzdGFtcCIsIlN0YXRzVHJhY2siLCJwYWNrZXRzTG9zdCIsInBhY2tldHMiLCJjdXJyZW50VGltZXN0YW1wIiwicHJldmlvdXNUaW1lc3RhbXAiLCJjdXJyZW50Qnl0ZXMiLCJwcmV2aW91c0J5dGVzIiwicHJvY2Vzc0luYm91bmRSZXBvcnQiLCJwcm9jZXNzT3V0Ym91bmRSZXBvcnQiLCJwcm9jZXNzUmVtb3RlSW5ib3VuZFJlcG9ydCIsInBhY2tldHNMb3N0UGVyYyIsImdldFBhY2tldHNMb3N0UGVyYyIsInNldFRpbWVzdGFtcCIsInBhY2tldHNSZWNlaXZlZCIsInBhY2tldHNTZW50IiwiZnJhbWVUaW1lIiwiY3VycmVudEZyYW1lcyIsInByZXZpb3VzRnJhbWVzIiwiZnJhbWVzIiwidG90YWxEZWNvZGVUaW1lIiwiZnJhbWVzRGVjb2RlZCIsInRvdGFsRW5jb2RlVGltZSIsImZyYW1lc0VuY29kZWQiLCJpc0Jyb2FkY2FzdCIsImdldFN1YnNjcmlwdGlvbkxhYmVsIiwic3Vic2NyaXB0aW9uVHlwZSIsImdldFByZWZpeCIsInN1YlR5cGUiLCJJbmNvbWluZyIsImdldFBhcnRzIiwic3VwcG9ydHNDb250ZW50VHlwZSIsIkluY29taW5nU3Vic2NyaXB0aW9uIiwiZGVzdGluYXRpb24iLCJJbmNvbWluZ01lZGlhU3Vic2NyaXB0aW9uIiwiSW5jb21pbmdTdWJzY3JpcHRpb25NYW5hZ2VyIiwic3Vic2NyaXB0aW9uUmVxdWVzdHMiLCJzdWJzY3JpcHRpb25SZXF1ZXN0c1F1ZXVlIiwicmVxdWVzdFN1YnNjcmlwdGlvbkFjdGlvbiIsInN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0cyIsIm1hcHMiLCJjaG9zZW5BbnN3ZXJzIiwiU3Vic2NyaXB0aW9uTWFwcyIsImNyZWF0ZVN1YnNjcmlwdGlvbiIsImlzTWVkaWFTb3VyY2UiLCJpc01lZGlhRGVzdGluYXRpb24iLCJyZW1vdmVTdWJzY3JpcHRpb24iLCJwYXJ0cyIsInN1YnNjcmlwdGlvbkxhYmVsIiwic3Vic2NyaXB0aW9ucyIsImNsb3NlU3Vic2NyaXB0aW9uIiwiaGFuZGxlQ29udGVudFVucHVibGlzaE1lZGlhU3RyZWFtIiwicmVtb3ZlUmVtb3RlU3RyZWFtU3Vic2NyaXB0aW9uIiwiaGFuZGxlQ29udGVudFN1YnNjcmliZU1lZGlhU3RyZWFtIiwicmVxdWVzdFN1YnNjcmlwdGlvbiIsImhhbmRsZUNvbnRlbnRVcGRhdGVNZWRpYVN0cmVhbSIsImdldE1lZGlhU3Vic2NyaXB0aW9uIiwicmVxdWVzdExhYmVsIiwiY2xlYXJTdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dCIsInJlcXVlc3QiLCJoYW5kbGVTdWJzY3JpcHRpb25SZXN0YXJ0TmVlZE1lZGlhU3RyZWFtIiwiaGFuZGxlU3Vic2NyaXB0aW9uUHJvdmlkZU1lZGlhU3RyZWFtIiwicmVxdWVzdHMiLCJzdWJzY3JpcHRpb25SZXF1ZXN0IiwiZXZlcnkiLCJjaG9zZW5BbnN3ZXIiLCJlcnIiLCJoYW5kbGVOb0Fuc3dlciIsImhhbmRsZVN1YnNjcmlwdGlvbk1lZGlhU3RyZWFtVW5hdmFpbGFibGUiLCJmaW5kTmV3TWVkaWFTdWJzY3JpcHRpb24iLCJoYW5kbGVDb250ZW50UmVtb3RlTWVkaWFTdHJlYW1UcmFja0ZhaWwiLCJoYW5kbGVPcHRpbWl6YXRpb25Db25uZWN0aW9uU3VjY2VzcyIsInN0cmVhbUxhYmVsIiwicmVtb3ZlU3Vic2NyaXB0aW9uc0Zvck5vZGUiLCJNZWRpYVN0cmVhbVVuYXZhaWxhYmxlIiwiY2xlYW5PbGRTdWJzY3JpcHRpb24iLCJjdXJyZW50RGlzdGFuY2UiLCJzZW5kUmVxdWVzdCIsInNldFN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0Iiwib3duZXJOb2RlIiwib3duZXJSYW5rIiwiY2hvc2VuQW5zd2VyTm9kZSIsImNob3NlbkFuc3dlclJhbmsiLCJhYnMiLCJwcmV2aW91c1RyYWNrcyIsImNvbmNhdCIsIlN1YnNjcmlwdGlvblJlcXVlc3QiLCJjaG9vc2VBbnN3ZXIiLCJvbGRTdWJzY3JpcHRpb24iLCJvcmlnaW5hbFBhcmFtcyIsImdldFBhcnRzRm9yU3Vic2NyaXB0aW9uTGFiZWwiLCJvbGRQcm92aWRlcklkIiwiT3V0Z29pbmdTdWJzY3JpcHRpb25NYW5hZ2VyIiwiT3V0Z29pbmciLCJoYW5kbGVTdWJzY3JpcHRpb25TdWJzY3JpYmVNZWRpYVN0cmVhbSIsIm51bWJlck91dGdvaW5nU3Vic2NyaXB0aW9ucyIsImdldE51bWJlck91dGdvaW5nU3Vic2NyaXB0aW9ucyIsIlJlc3RhcnROZWVkTWVkaWFTdHJlYW0iLCJoYW5kbGVTdWJzY3JpcHRpb25VbnN1YnNjcmliZU1lZGlhU3RyZWFtIiwiaGFuZGxlU3Vic2NyaXB0aW9uTmVlZE1lZGlhU3RyZWFtIiwiaGFzUmVzb2x1dGlvbiIsImdldFN1YnNjcmlwdGlvbkluZm8iLCJDYW5Qcm92aWRlTWVkaWFTdHJlYW0iLCJDYW5ub3RQcm92aWRlTWVkaWFTdHJlYW0iLCJjb21wdXRlZERpc3RhbmNlIiwiY29zdCIsImhhbmRsZUNvbnRlbnRDbG9zZU1lZGlhU3RyZWFtIiwicmVtb3RlU291cmNlIiwiY2FuUHJvdmlkZVJlc29sdXRpb24iLCJsb2NhbFNvdXJjZSIsImluY29taW5nTWFuYWdlciIsIm91dGdvaW5nTWFuYWdlciIsInJlbW92ZUluY29taW5nU3Vic2NyaXB0aW9uIiwicmVtb3ZlT3V0Z29pbmdTdWJzY3JpcHRpb24iLCJOZWVkTWVkaWFTdHJlYW0iLCJoYW5kbGVDb250ZW50Q2xvc2VQdWJTdWJUb3BpYyIsImhhbmRsZUNvbnRlbnRDbG9zZU9iamVjdFN0b3JlIiwiaGFuZGxlQ29udGVudENsb3NlS2V5VmFsdWVEYXRhYmFzZSIsImV2ZW50Q29udGVudCIsInRvcGljcyIsImdldFBhcnRzRnJvbVN1YnNjcmlwdGlvbiIsInN1YlByZWZpeCIsInN1YnNjcmlwdG9uUGFydHMiLCJjcmVhdGVUb3BpYyIsInJlbW92ZVRvcGljIiwiVG9waWMiLCJyZWdpc3RlckRlc3RpbmF0aW9uIiwiY2xvc2VUb3BpYyIsInVucmVnaXN0ZXJEZXN0aW5hdGlvbiIsImFuc3dlcnMiLCJyZXRyeUNvdW50IiwiV2FpdGluZyIsImNhbkFjY2VwdCIsIkFjY2VwdGVkIiwiUmVqZWN0ZWQiLCJjYW5DaG9vc2VBbnN3ZXIiLCJ0YWJsZUtleSIsImtleVBhdGgiLCJidWlsZGVyIiwiVGFibGVCdWlsZGVyIiwidGFibGVMYXlvdXQiLCJvcmRlckJ5IiwiZGlyZWN0aW9uIiwiUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50IiwidmFsaWRhdGVRdWVyeSIsInF1ZXJ5QnVpbGRlciIsImlzV2hlcmVWYWx1ZSIsImlzV2hlcmVWYWx1ZXMiLCJpc1doZXJlQmV0d2VlbiIsIm9wZXJhdG9yIiwibGltaXQiLCJvZmZzZXQiLCJvcmRlciIsInRva2VuIiwidWlkIiwidXNlckNyZWRlbnRpYWwiLCJzaWduSW5XaXRoQ3VzdG9tVG9rZW4iLCJnZXRBdXRoIiwicmVqZWN0IiwiZGlzY29ubmVjdENhbGxiYWNrIiwiZmlyZWJhc2VVbnN1YnNjcmliZXIiLCJjaGlsZFJlbW92ZWRVbnN1YnNjcmliZXIiLCJvbkRpc2Nvbm5lY3RIYW5kbGVyIiwiY29ubmVjdGVkIiwiY2x1c3RlcktleSIsIm5vZGVLZXkiLCJvblZhbHVlIiwicmVmIiwiZ2V0RGF0YWJhc2UiLCJ2YWwiLCJzZXRPbkRpc2Nvbm5lY3RIYW5kbGVyIiwib25DaGlsZFJlbW92ZWQiLCJjYW5jZWwiLCJmYkVudGl0aWVzIiwiYWxsTm9kZXMiLCJqb2luZWRBdCIsImFuY2VzdG9ySWRzIiwib25EaXNjb25uZWN0IiwiRmlyZWJhc2VTZXJ2aWNlIiwiYXBwIiwiYXV0aCIsImZ1bmN0aW9ucyIsImZpcmVzdG9yZSIsImNsb2NrU2tldyIsImdldEFwcCIsImluaXRpYWxpemVBcHAiLCJjb25uZWN0ZWRSZWYiLCJzbmFwIiwib2Zmc2V0UmVmIiwicmFuZ2VzIiwibWF4TGF5ZXIiLCJzdGFydCIsImVuZCIsImZhY3RvciIsImxheWVyQWRqdXN0bWVudCIsIm5iTm9kZXMiLCJkZXN0aW5hdGlvblJhbmsiLCJsYXN0S25vd25UcmFuc2FjdGlvbklkIiwicnVuVHJhbnNhY3Rpb24iLCJjb21taXR0ZWQiLCJ0cmFuc2FjdGlvbnNNYXAiLCJzb3J0ZWRUcmFuc2FjdGlvbnMiLCJuZXh0VHJhbnNhY3Rpb24iLCJJbnRlcnZhbCIsInBhcmFtZXRlcnMiLCJwIiwibGFzdEV4ZWN1dGVkIiwiY3JlYXRlQ29uc3RhbnRTb3VyY2UiLCJnYWluTm9kZSIsImNyZWF0ZUdhaW4iLCJnYWluIiwiY29uc3RhbnRTb3VyY2VOb2RlIiwiY3JlYXRlQnVmZmVyU291cmNlIiwiY29uc3RhbnRCdWZmZXIiLCJjcmVhdGVCdWZmZXIiLCJzYW1wbGVSYXRlIiwiZ2V0Q2hhbm5lbERhdGEiLCJsb29wIiwic3lzdGVtTWVzc2FnZVR5cGVMb29rdXAiLCJzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGVMb29rdXAiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwiZm9ybWF0Q3VycmVudERhdGUiLCJkIiwibXMiLCJnZXRNaWxsaXNlY29uZHMiLCJmb3JtYXR0ZWRUaW1lIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwibWF0Y2giLCJkYXRlTG9nZ2VyIiwiTG9nZ2VyIiwiZW5hYmxlZENoYW5uZWxzIiwiZGVidWdFbmFibGVkIiwiZ2xvYmFsT2JqZWN0IiwiYmF0Y2hRdWV1ZSIsImN1cnJlbnRCYXRjaCIsImNyZWF0ZU5ld0JhdGNoIiwiYmF0Y2hUaW1lb3V0IiwicmV0cnlMaW1pdCIsInJldHJ5RGVsYXkiLCJiYXRjaFNpemUiLCJ0aW1lb3V0VmFsdWUiLCJ3aW5kb3ciLCJnIiwibG9hZEVuYWJsZWRDaGFubmVscyIsImNyZXdkbGVTREtFbmFibGVMb2dnaW5nIiwiQWxsIiwidW50eXBlZEtleSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJjcmV3ZGxlU0RLRGlzYWJsZUxvZ2dpbmciLCJyZW1vdmVJdGVtIiwiY3Jld2RsZVNES0xvZ2dpbmdDaGFubmVscyIsImRlYnVnIiwiaXNDaGFubmVsRW5hYmxlZCIsImxvZ2dpbmdDb25uZWN0b3IiLCJpc0ludGVybmFsTG9nZ2luZ0Nvbm5lY3RvciIsImdldEVuYWJsZWRDaGFubmVscyIsImNvbm5lY3RvckV2ZW50Iiwic2VydmljZSIsImxvZ1JlZiIsImJhdGNoIiwib3BlcmF0aW9ucyIsImxvZ0JhdGNoIiwic2V0RG9jIiwiY291bnRlciIsInByb2Nlc3NCYXRjaCIsImJhdGNoVG9Db21taXQiLCJjb21taXRCYXRjaCIsImNvbW1pdCIsInBvdyIsImdldEl0ZW0iLCJ3cml0ZUJhdGNoIiwiZ2V0UGF0aFBhcnRzIiwicGFydCIsInBvcCIsImFycmF5QnVmZmVyIiwiYnl0ZSIsInJlYWROZXh0Q2h1bmsiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwicmVzdWx0Iiwib25lcnJvciIsInJlYWRBc0FycmF5QnVmZmVyIiwicmVhZEZpbGVJbkNodW5rcyIsImxpc3RlbmVycyIsImwiLCJuZXdMaXN0ZW5lciIsInByaW9yaXR5RW51bSIsInJvdW5kUm9iaW4iLCJpc1J1bm5pbmciLCJwcm9jZXNzUXVldWUiLCJjYWxsIiwibG93ZXN0UHJpb3JpdHkiLCJjcmVhdGVRdWV1ZSIsInJldHJ5Q2FsbGJhY2siLCJwb3N0SW5zZXJ0SG9vayIsInByZUluc2VydEhvb2siLCJjbGVhckhvb2siLCJ0YWlsIiwicnVuSG9vayIsIm5ld0VsZW1lbnQiLCJwcmV2aW91cyIsInBvc3RQcm9jZXNzSG9vayIsInZlcnNpb25zIiwiaXNWZXJzaW9uZWRJdGVtIiwiZWxlbWVudCIsIm5ld0luZGV4IiwicHJvY2Vzc1ZlcnNpb25lZEVsZW1lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsInZlcnNpb25lZEl0ZW0iLCJTdXBwb3J0IiwiZmVhdHVyZVN1cHBvcnQiLCJjaGVja1dlYlJUQyIsImNoZWNrTWVkaWFTdHJlYW0iLCJjaGVja1NjcmVlblNoYXJpbmciLCJjaGVja0F1ZGlvVm9sdW1lIiwiY2hlY2tEZXZpY2VDb25maWciLCJjaGVja0F1ZGlvT3V0cHV0IiwiY2hlY2tNZWRpYVJlY29yZGluZyIsImNoZWNrQmFja2dyb3VuZHMiLCJjaGVja1dlYkdMIiwiY2hlY2tBdWRpb0NvbnRleHQiLCJmZWF0dXJlTmFtZSIsImZlYXR1cmUiLCJmIiwic3VwcG9ydGVkIiwiV2ViUlRDIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJSVENJY2VDYW5kaWRhdGUiLCJSVENTZXNzaW9uRGVzY3JpcHRpb24iLCJNZWRpYVN0cmVhbVRyYWNrIiwibmF2aWdhdG9yIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwiU2NyZWVuU2hhcmluZyIsIkF1ZGlvVm9sdW1lIiwiU2NyaXB0UHJvY2Vzc29yTm9kZSIsIkF1ZGlvV29ya2xldE5vZGUiLCJNZWRpYVN0cmVhbUF1ZGlvU291cmNlTm9kZSIsIkRldmljZUNvbmZpZyIsImVudW1lcmF0ZURldmljZXMiLCJNZWRpYURldmljZUluZm8iLCJBdWRpb091dHB1dCIsInNldFNpbmtJZCIsIlJlY29yZGluZyIsIk1lZGlhUmVjb3JkZXIiLCJNZWRpYVNvdXJjZSIsInJlY29yZGVyIiwiQmFja2dyb3VuZHMiLCJXZWJHTCIsIldlYkdMUmVuZGVyaW5nQ29udGV4dCIsInJlcXVpcmUiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsInByb3AiLCJwcm90b3R5cGUiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=