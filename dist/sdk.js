/*! For license information please see sdk.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var s=t();for(var n in s)("object"==typeof exports?exports:e)[n]=s[n]}}(this,(()=>(()=>{"use strict";var e={"./src/constants/Connection.ts":(e,t,s)=>{s.r(t),s.d(t,{CONNECTION_GROUP_RETRY_DELAY:()=>o,CONNECTION_MAX:()=>i,CONNECTION_MAX_BUFFER_SIZE:()=>a,CONNECTION_MIN:()=>r});var n=s("./src/constants/Content.ts");const r=3,i=4*r,o=100,a=2*n.CONTENT_FILE_CHUNK_SIZE*1024},"./src/constants/Content.ts":(e,t,s)=>{s.r(t),s.d(t,{CONTENT_BPP:()=>o,CONTENT_CHECKSUM_CHUNK_SIZE:()=>c,CONTENT_FILE_CHUNKS_MAX_BUFFER_SIZE:()=>l,CONTENT_FILE_CHUNK_SIZE:()=>d,CONTENT_FILE_HEADER_SIZE:()=>u,CONTENT_FPS:()=>n,CONTENT_GENERATIVE_AI_CONTEXT_ANSWER_TIMEOUT:()=>N,CONTENT_GENERATIVE_AI_CONTEXT_STATS_DEBOUNCE:()=>D,CONTENT_GENERATIVE_AI_MAX_CONTEXT_LENGTH:()=>M,CONTENT_GENERATIVE_AI_MODEL_EXTENSION:()=>R,CONTENT_GENERATIVE_AI_WORKER_STATS_DEBOUNCE:()=>k,CONTENT_GRAPH_DATABASE_STATS_DEBOUNCE:()=>I,CONTENT_JOB_SERVICE_FAILED_RETRY_DELAY:()=>E,CONTENT_JOB_SERVICE_MAX_ANSWER_TIMEOUT:()=>w,CONTENT_JOB_SERVICE_MAX_RETRIES:()=>v,CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME:()=>y,CONTENT_KEY_VALUE_DATABASE_STATS_DEBOUNCE:()=>f,CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT:()=>T,CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME:()=>S,CONTENT_MAX_HEIGHT:()=>i,CONTENT_MAX_WIDTH:()=>r,CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME:()=>p,CONTENT_OBJECT_STORE_PENDING_EXTENSION:()=>g,CONTENT_OBJECT_STORE_PENDING_RETRY_DELAY:()=>b,CONTENT_OBJECT_STORE_STATS_DEBOUNCE:()=>m,CONTENT_PUBSUB_TOPIC_STATS_DEBOUNCE:()=>h,CONTENT_UPDATE_DEBOUNCE:()=>a,CONTENT_VECTOR_DATABASE_STATS_DEBOUNCE:()=>C});const n=24,r=1280,i=720,o=.12,a=500,c=262144,d=260096,l=2147483648,u=4,h=5e3,p=".crewdle-last-transaction",g=".crewdle-pending",b=6e5,m=5e3,S=".crewdle-transactions",y=".crewdle-layout",T=3e4,f=5e3,C=5e3,I=5e3,E=1e3,v=3,w=3e3,N=3e5,D=5e3,k=5e3,R=".gguf",M=25e3},"./src/constants/Detection.ts":(e,t,s)=>{s.r(t),s.d(t,{DETECTION_ISSUE_TIMEOUT:()=>n});const n=3e4},"./src/constants/DetectionIssueRules.ts":(e,t,s)=>{s.r(t),s.d(t,{DETECTION_AUDIO_ISSUE_RULES:()=>b,DETECTION_CORE_ISSUE_RULES:()=>p,DETECTION_ISSUE_AV_DELAY_THRESHOLD:()=>l,DETECTION_ISSUE_BITRATE_THRESHOLD:()=>a,DETECTION_ISSUE_DT_THRESHOLD:()=>o,DETECTION_ISSUE_FPS_THRESHOLD:()=>h,DETECTION_ISSUE_JITTER_THRESHOLD:()=>c,DETECTION_ISSUE_RTT_THRESHOLD:()=>d,DETECTION_ISSUE_ST_THRESHOLD:()=>i,DETECTION_ISSUE_TPF_THRESHOLD:()=>u,DETECTION_RECEIVER_ISSUE_RULES:()=>S,DETECTION_SENDER_ISSUE_RULES:()=>m,DETECTION_VIDEO_ISSUE_RULES:()=>g});var n=s("./src/constants/Content.ts"),r=s("./src/interfaces/Detection/Detection.ts");const i=2.5,o=.5,a=.25,c=.6,d=1/0,l=300,u=.75,h=10,p=[{type:r.IssueType.STVolatility,reportMetric:e=>e.STVolatility,maxThreshold:i},{type:r.IssueType.DTVolatility,reportMetric:e=>e.DTVolatility,maxThreshold:o}],g=[{type:r.IssueType.TimePerFrame,reportMetric:e=>{const t=1e3/e.FPS;return e.timePerFrame/t},maxThreshold:u},{type:r.IssueType.Bitrate,reportMetric:e=>{const t=e.FPS*e.frameWidth*e.frameHeight*n.CONTENT_BPP;return e.bitrate/t},minThreshold:a},{type:r.IssueType.Jitter,reportMetric:e=>e.jitter,maxThreshold:c},{type:r.IssueType.FramePerSecond,reportMetric:e=>e.FPS,minThreshold:h}],b=[{type:r.IssueType.Jitter,reportMetric:e=>e.jitter,maxThreshold:c}],m=[{type:r.IssueType.RoundTripTime,reportMetric:e=>e.roundTripTime,maxThreshold:d}],S=[{type:r.IssueType.AudioVideoDelay,reportMetric:e=>e.AudioVideoDelay,maxThreshold:l}]},"./src/constants/DetectionProblemRules.ts":(e,t,s)=>{s.r(t),s.d(t,{DETECTION_PROBLEM_AV_DELAY_THRESHOLD:()=>a,DETECTION_PROBLEM_BITRATE_THRESHOLD:()=>d,DETECTION_PROBLEM_DT_THRESHOLD:()=>i,DETECTION_PROBLEM_FPS_THRESHOLD:()=>c,DETECTION_PROBLEM_JITTER_THRESHOLD:()=>l,DETECTION_PROBLEM_RTT_THRESHOLD:()=>u,DETECTION_PROBLEM_RULES:()=>h,DETECTION_PROBLEM_ST_THRESHOLD:()=>r,DETECTION_PROBLEM_TPF_THRESHOLD:()=>o});var n=s("./src/interfaces/Detection/Detection.ts");const r=5,i=5,o=3,a=2,c=3,d=3,l=3,u=3,h=[{type:n.ProblemType.CPUCycle,issues:[{type:n.IssueType.STVolatility,threshold:r},{type:n.IssueType.DTVolatility,threshold:i}]},{type:n.ProblemType.TimePerFrame,issues:[{type:n.IssueType.TimePerFrame,threshold:o}]},{type:n.ProblemType.AudioVideoDelay,issues:[{type:n.IssueType.AudioVideoDelay,threshold:a}]},{type:n.ProblemType.FramePerSecond,issues:[{type:n.IssueType.FramePerSecond,threshold:c}]},{type:n.ProblemType.Bitrate,issues:[{type:n.IssueType.Bitrate,threshold:d}]},{type:n.ProblemType.Jitter,issues:[{type:n.IssueType.Jitter,threshold:l}]},{type:n.ProblemType.RoundTripTime,issues:[{type:n.IssueType.RoundTripTime,threshold:u}]}]},"./src/constants/Interval.ts":(e,t,s)=>{s.r(t),s.d(t,{INTERVAL_TIME:()=>n});const n=100},"./src/constants/Node.ts":(e,t,s)=>{s.r(t),s.d(t,{NODE_AGENT_CAPACITY_REPORT_INTERVAL:()=>b,NODE_CLEAN_REMOTE_NODES_INTERVAL:()=>p,NODE_CLEAN_REMOTE_NODES_THRESHOLD:()=>g,NODE_DISTANCE_HOP:()=>d,NODE_DISTANCE_MAX:()=>h,NODE_DISTANCE_RESOLUTION:()=>l,NODE_DISTANCE_TRACKS:()=>u,NODE_PROCESS_RANK_DEBOUCE_TIME:()=>o,NODE_PROCESS_RANK_DEBOUCE_TIME_LIMIT:()=>c,NODE_PROCESS_RANK_DEBOUCE_TIME_MAX:()=>a,NODE_UPDATE_DEBOUNCE_TIME:()=>n,NODE_UPDATE_DEBOUNCE_TIME_LIMIT:()=>i,NODE_UPDATE_DEBOUNCE_TIME_MAX:()=>r});const n=1e3,r=1e4,i=r-n,o=1e3,a=1e4,c=a-o,d=1,l=0,u=10,h=10,p=6e4,g=3e5,b=3e4},"./src/constants/PeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{PEER_CONNECTION_BUFFER_LOW_THRESHOLD:()=>b,PEER_CONNECTION_BUFFER_MAX_THRESHOLD:()=>m,PEER_CONNECTION_CHUNK_IDENTIFIER:()=>p,PEER_CONNECTION_CHUNK_SIZE:()=>g,PEER_CONNECTION_DATACHANNEL_DISCONNECT_HANDLER_DELAY:()=>y,PEER_CONNECTION_DATACHANNEL_RETRY_DELAY:()=>S,PEER_CONNECTION_HANDSHAKE_DEBOUNCE:()=>h,PEER_CONNECTION_HEARTBEAT_INTERVAL:()=>o,PEER_CONNECTION_HEARTBEAT_PING:()=>r,PEER_CONNECTION_HEARTBEAT_PONG:()=>i,PEER_CONNECTION_HEARTBEAT_THRESHOLD:()=>a,PEER_CONNECTION_HEARTBEAT_TIMEOUT:()=>l,PEER_CONNECTION_MESSAGE_RETRY:()=>u,PEER_CONNECTION_RECONNECT_TIMEOUT:()=>c,PEER_CONNECTION_TIMEOUT:()=>d});var n=s("./src/constants/Content.ts");const r="0",i="1",o=3e3,a=5*o,c=3e4,d=3e4,l=6e4,u=5e3,h=500,p="chunk",g=n.CONTENT_FILE_CHUNK_SIZE,b=3*g,m=16*b,S=100,y=250},"./src/constants/Remediation.ts":(e,t,s)=>{s.r(t),s.d(t,{REMEDIATION_BITRATE:()=>l,REMEDIATION_DOWNGRADE_WAIT_TIME:()=>n,REMEDIATION_FPS:()=>d,REMEDIATION_MAX_RESOLUTION_SCALE:()=>o,REMEDIATION_MIN_BITRATE:()=>a,REMEDIATION_MIN_FPS:()=>i,REMEDIATION_RESOLUTION_SCALE:()=>c,REMEDIATION_UPGRADE_WAIT_TIME:()=>r});const n=5e3,r=15e3,i=15,o=4,a=5e4,c=.5,d=3,l=.25},"./src/constants/RemediationRules.ts":(e,t,s)=>{s.r(t),s.d(t,{REMEDIATION_RULES:()=>i});var n=s("./src/interfaces/Detection/Detection.ts"),r=s("./src/interfaces/Remediation/Remediation.ts");const i=[{problemType:n.ProblemType.CPUCycle,remediations:[{type:r.RemediationMessageType.Remediation,component:r.RemediationComponent.Resolution,action:r.RemediationAction.Downgrade},{type:r.RemediationMessageType.RemoteRemediation,component:r.RemediationComponent.Resolution,action:r.RemediationAction.Downgrade}]},{problemType:n.ProblemType.TimePerFrame,remediations:[{type:r.RemediationMessageType.Remediation,component:r.RemediationComponent.Resolution,action:r.RemediationAction.Downgrade}]},{problemType:n.ProblemType.AudioVideoDelay,remediations:[{type:r.RemediationMessageType.Remediation,component:r.RemediationComponent.Resolution,action:r.RemediationAction.Downgrade}]},{problemType:n.ProblemType.FramePerSecond,remediations:[{type:r.RemediationMessageType.Remediation,component:r.RemediationComponent.Resolution,action:r.RemediationAction.Downgrade}]},{problemType:n.ProblemType.Bitrate,remediations:[{type:r.RemediationMessageType.Remediation,component:r.RemediationComponent.Bitrate,action:r.RemediationAction.Downgrade}]},{problemType:n.ProblemType.Jitter,remediations:[{type:r.RemediationMessageType.Remediation,component:r.RemediationComponent.Bitrate,action:r.RemediationAction.Downgrade}]},{problemType:n.ProblemType.RoundTripTime,remediations:[{type:r.RemediationMessageType.Remediation,component:r.RemediationComponent.Bitrate,action:r.RemediationAction.Downgrade}]}]},"./src/constants/SDK.ts":(e,t,s)=>{s.r(t),s.d(t,{SDK_FIRESTORE_APP_NAME:()=>r,SDK_REFRESH_INTERVAL:()=>n});const n=18e5,r="CREWDLE_WEB_SDK"},"./src/constants/Services.ts":(e,t,s)=>{s.r(t),s.d(t,{MESSAGE_BUFFER_CLEANUP_INTERVAL:()=>r,MESSAGE_BUFFER_RETENTION_TIME:()=>n,TRANSACTION_PER_PAGE:()=>i});const n=12e5,r=12e4,i=100},"./src/constants/Stats.ts":(e,t,s)=>{s.r(t),s.d(t,{STATS_COLLECT_DELAY:()=>n,STATS_INBOUND:()=>a,STATS_OUTBOUND:()=>i,STATS_RECEIVER_FILTERS:()=>d,STATS_REMOTE_INBOUND:()=>o,STATS_REPORT_DELAY:()=>r,STATS_SENDER_FILTERS:()=>c});const n=1e3,r=3e4,i="outbound-rtp",o="remote-inbound-rtp",a="inbound-rtp",c=[i,o],d=[a]},"./src/constants/Subscription.ts":(e,t,s)=>{s.r(t),s.d(t,{SUBSCRIPTION_MAX_OUTGOING:()=>i,SUBSCRIPTION_MAX_RETRY_COUNT:()=>r,SUBSCRIPTION_REQUEST_RETRY_DELAY:()=>a,SUBSCRIPTION_REQUEST_TIMEOUT:()=>n,SUBSCRIPTION_RETRY_DELAY:()=>o});const n=2e3,r=10,i=1,o=1e3,a=100},"./src/constants/System.ts":(e,t,s)=>{s.r(t),s.d(t,{SYSTEM_TOPIC:()=>n,SYSTEM_TOPIC_INTERNAL:()=>r});const n=0,r="internal"},"./src/environments/Environment.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>o,isObject:()=>r,mergeDeep:()=>i});let n=s("./src/environments/environment.default.ts").Environment;function r(e){return!(!e||"object"!=typeof e||Array.isArray(e))}function i(e,...t){if(!Array.isArray(t)||0===t.length)return e;const s=t.shift();if(r(e)&&r(s))for(const t in s)r(s[t])?(e[t]||Object.assign(e,{[t]:{}}),i(e[t],s[t])):Object.assign(e,{[t]:s[t]});return i(e,...t)}n=i(n,s("./src/environments/environment.dev.ts").Environment);const o=n},"./src/environments/environment.default.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={version:"0.5.0.0",isProduction:!1,firebaseConfig:{apiKey:"AIzaSyDHDgmA574NVeMWV9SpW-q4QQMjkANuueg",authDomain:"crewdle-sdk-stg.firebaseapp.com",databaseURL:"https://crewdle-sdk-stg-default-rtdb.firebaseio.com",projectId:"crewdle-sdk-stg",storageBucket:"crewdle-sdk-stg.appspot.com",appId:"1:519415702791:web:5dd39042f881cfde3251a2",functionsRegion:"northamerica-northeast1"},google:{searchEngineId:"21a9d78dee97f487b"},aws:{endpoint:"https://3nabhjyaabdadnpczsgrye6upu.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1"}}},"./src/environments/environment.dev.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={}},"./src/environments/environment.prd.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={version:"0.5.0",isProduction:!0,firebaseConfig:{apiKey:"AIzaSyCY6T49D81QpoZ_ApZ6atpT4c3Yy0_lWvg",authDomain:"crewdle-sdk.firebaseapp.com",databaseURL:"https://crewdle-sdk-default-rtdb.firebaseio.com",projectId:"crewdle-sdk",storageBucket:"crewdle-sdk.appspot.com",messagingSenderId:"420235181083",appId:"1:420235181083:web:4eff6062bd845cb0748cbe",measurementId:"G-F7W8KXRKQB"},aws:{endpoint:"https://e7if27umpzf2ff4k63wgzo4pri.appsync-api.us-east-1.amazonaws.com/graphql",region:"us-east-1"}}},"./src/environments/environment.stg.ts":(e,t,s)=>{s.r(t),s.d(t,{Environment:()=>n});const n={}},"./src/errors/EarlyReturnError.ts":(e,t,s)=>{s.r(t),s.d(t,{EarlyReturnError:()=>n});class n extends Error{constructor(e){super(`Early return: ${e}`)}}},"./src/errors/SDKInternalError.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SDKInternalError:()=>i,SDKInternalErrorCodes:()=>n}),function(e){e.ConnectionNotinitialized="connection-not-initialized",e.ConnectionNotConnected="connection-not-connected",e.ConnectionNoRetryQueue="connection-no-retry-queue",e.ConnectionInvalidDataEvent="connection-invalid-data-event",e.GenerativeAIContextCreationFailed="generative-ai-context-creation-failed",e.GenerativeAIContextJobFailed="generative-ai-context-job-failed",e.GenerativeAIContextJobTimeout="generative-ai-context-job-timeout",e.GenerativeAIContextInvalidPartialResult="generative-ai-context-invalid-partial-result",e.GenerativeAIWorkerCreationFailed="generative-ai-worker-creation-failed",e.GraphDatabaseCreationFailed="graph-database-creation-failed",e.InvalidDataChannel="invalid-data-chanel",e.InvalidPublisher="invalid-publisher",e.InvalidSubscriber="invalid-subscriber",e.InvalidSubscription="invalid-subscription",e.JobDispatcherCreationFailed="job-dispatcher-creation-failed",e.JobDispatcherInvalidPayload="job-dispatcher-invalid-payload",e.JobDispatcherJobNotFound="job-dispatcher-job-not-found",e.JobDispatcherObserverNotFound="job-dispatcher-observer-not-found",e.JobWorkerCreationFailed="job-worker-creation-failed",e.JobWorkerInvalidType="job-worker-invalid-type",e.KeyValueDatabaseCreationFailed="key-value-database-creation-failed",e.KeyValueDatabaseTableDoesNotExist="key-value-database-table-does-not-exist",e.KeyValueDatabaseTransactionTableNotInitialized="key-value-database-transaction-table-not-initialized",e.KeyValueDatabaseTransactionValueNotSet="key-value-database-transaction-value-not-set",e.LocalMediaStreamDoesNotExist="local-stream-does-not-exist",e.MissingRemoteConnection="missing-incoming-connection",e.MissingSystemTopic="missing-system-topic",e.MistletCapacityReportNotSet="mistlet-capacity-report-not-set",e.ObjectStoreCannotWriteTransaction="object-store-cannot-write-transaction",e.ObjectStoreInvalidState="object-store-invalid-state",e.ObjectStoreInvalidSyncMessage="object-store-invalid-sync-message",e.ObjectStoreNotSynced="object-store-not-synced",e.OutgoingMediaStreamNoTopic="outgoing-stream-no-topic",e.RemoteMediaStreamDoesNotExist="remote-stream-does-not-exist",e.RemoteMediaStreamMissingProviderId="remote-stream-missing-provider-id",e.RemoteConnectionExists="remote-connection-exists",e.SubscriptionRequestDoesNotExist="subscription-request-does-not-exist",e.SubscriptionRequestFailed="subscription-request-failed",e.SubscriptionRequestNoAnswer="subscription-request-no-answer",e.NodeDoesNotExist="node-does-not-exist",e.NodeAlreadyExist="node-already-exist",e.PeerConnectionInvalidDestination="peer-connection-invalid-destination",e.VectorDatabaseCreationFailed="vector-database-creation-failed",e.WorkflowDoesNotExist="workflow-does-not-exist",e.WorkflowInvalidBlockType="workflow-invalid-block-type"}(n||(n={}));const r=new Map([[n.ConnectionNotinitialized,"Connection not initialized."],[n.ConnectionNotConnected,"Connection not connected."],[n.ConnectionNoRetryQueue,"Connection does not have a retry queue."],[n.ConnectionInvalidDataEvent,"Invalid data event."],[n.GenerativeAIContextCreationFailed,"Generative AI context creation failed."],[n.GenerativeAIContextJobFailed,"Generative AI context job failed."],[n.GenerativeAIContextJobTimeout,"Generative AI context job timeout."],[n.GenerativeAIContextInvalidPartialResult,"Generative AI context invalid partial result."],[n.GenerativeAIWorkerCreationFailed,"AI worker creation failed."],[n.GraphDatabaseCreationFailed,"Graph database creation failed."],[n.InvalidDataChannel,"Invalid data channel."],[n.InvalidPublisher,"Invalid publisher."],[n.InvalidSubscriber,"Invalid subscriber."],[n.InvalidSubscription,"Invalid subscription."],[n.JobDispatcherCreationFailed,"Job service creation failed."],[n.JobDispatcherInvalidPayload,"Invalid job service payload."],[n.JobDispatcherJobNotFound,"Job service job not found."],[n.JobDispatcherObserverNotFound,"Job service observer not found."],[n.JobWorkerCreationFailed,"Job worker creation failed."],[n.JobWorkerInvalidType,"Invalid job worker type."],[n.KeyValueDatabaseCreationFailed,"Key-value database creation failed."],[n.KeyValueDatabaseTableDoesNotExist,"Key-value database table does not exist."],[n.KeyValueDatabaseTransactionTableNotInitialized,"Key-value database transaction table not initialized."],[n.KeyValueDatabaseTransactionValueNotSet,"Key-value database transaction value not set."],[n.LocalMediaStreamDoesNotExist,"Local stream does not exist."],[n.MissingRemoteConnection,"Connection does not exist."],[n.MissingSystemTopic,"The system topic has not been registered."],[n.MistletCapacityReportNotSet,"Mistlet capacity report not set."],[n.ObjectStoreCannotWriteTransaction,"Cannot write transaction."],[n.ObjectStoreInvalidSyncMessage,"Invalid object store sync message."],[n.ObjectStoreInvalidState,"Invalid object store state."],[n.ObjectStoreNotSynced,"Object store not synced."],[n.OutgoingMediaStreamNoTopic,"Outgoing stream does not have a topic."],[n.RemoteMediaStreamDoesNotExist,"Remote stream does not exist."],[n.RemoteMediaStreamMissingProviderId,"Remote media stream is missing a provider id."],[n.RemoteConnectionExists,"Remote connection already exists."],[n.SubscriptionRequestDoesNotExist,"Subscription request does not exist."],[n.SubscriptionRequestFailed,"Subscription request failed."],[n.SubscriptionRequestNoAnswer,"Subscription request has not been answered."],[n.NodeDoesNotExist,"Node does not exist."],[n.NodeAlreadyExist,"Node already exists."],[n.PeerConnectionInvalidDestination,"Invalid peer connection event destination."],[n.VectorDatabaseCreationFailed,"Vector database creation failed."],[n.WorkflowDoesNotExist,"Workflow does not exist."],[n.WorkflowInvalidBlockType,"Invalid workflow block type."]]);class i extends Error{code;static codes=n;data;constructor(e,t){super(`Internal SDK Error: ${e}: ${r.get(e)}\nAdditional data: ${JSON.stringify(t)}`),this.code=e,this.data=t||{}}}},"./src/interfaces/AITrace/Trace.ts":(e,t,s)=>{var n,r,i,o,a;s.r(t),s.d(t,{AIIngestTraceBlock:()=>a,AIRetrieveTraceBlock:()=>r,AITraceLevel:()=>i,AITraceType:()=>o,TraceType:()=>n}),function(e){e.AITrace="AITrace",e.IngestTrace="IngestTrace",e.RetrieveTrace="RetrieveTrace",e.WorkflowTrace="WorkflowTrace"}(n||(n={})),function(e){e.InitialPrompt="InitialPrompt",e.EmbeddingVectorization="EmbeddingVectorization",e.TextModel="TextModel",e.VectorSearch="VectorSearch",e.EntityExtractor="EntityExtractor",e.GraphSearch="GraphSearch",e.Reranker="Reranker",e.FinalContext="FinalContext"}(r||(r={})),function(e){e[e.Debug=0]="Debug",e[e.Info=5]="Info",e[e.Warning=10]="Warning",e[e.Error=15]="Error"}(i||(i={})),function(e){e.Retrieve="Retrieve",e.Ingest="Ingest",e.Workflow="Workflow"}(o||(o={})),function(e){e.ChunkSplitter="ChunkSplitter",e.DocumentParser="DocumentParser",e.EntityExtractor="EntityExtractor",e.GraphDatabase="GraphDatabase",e.Model="Model",e.RelationExtractor="RelationExtractor",e.SentenceSplitter="SentenceSplitter",e.VectorDatabase="VectorDatabase",e.WordSplitter="WordSplitter"}(a||(a={}))},"./src/interfaces/Connection/PeerConnection.ts":(e,t,s)=>{var n,r,i;s.r(t),s.d(t,{PeerConnectionMessageType:()=>r,PeerConnectionOrigin:()=>i,PeerConnectionType:()=>n}),function(e){e[e.Core=0]="Core",e[e.Optimization=1]="Optimization"}(n||(n={})),function(e){e[e.Offer=0]="Offer",e[e.Answer=1]="Answer",e[e.Handshake=2]="Handshake",e[e.Success=3]="Success",e[e.NeedRestart=4]="NeedRestart",e[e.Restart=5]="Restart",e[e.Disconnect=6]="Disconnect",e[e.Stats=7]="Stats",e[e.OptimizationConnectionSuccess=8]="OptimizationConnectionSuccess"}(r||(r={})),function(e){e[e.Sender=0]="Sender",e[e.Receiver=1]="Receiver"}(i||(i={}))},"./src/interfaces/Content/Content.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{ContentMessageType:()=>n}),function(e){e[e.PublishMediaStream=0]="PublishMediaStream",e[e.UnpublishMediaStream=1]="UnpublishMediaStream",e[e.SubscribeMediaStream=2]="SubscribeMediaStream",e[e.UpdateMediaStream=3]="UpdateMediaStream",e[e.UnsubscribeMediaStream=4]="UnsubscribeMediaStream",e[e.CloseJobDispatcher=5]="CloseJobDispatcher",e[e.CloseJobWorker=6]="CloseJobWorker",e[e.CloseObjectStoreBucket=7]="CloseObjectStoreBucket",e[e.CloseKeyValueDatabase=8]="CloseKeyValueDatabase",e[e.ClosePubSubTopic=9]="ClosePubSubTopic",e[e.CloseMediaStream=10]="CloseMediaStream",e[e.CloseVectorDatabase=11]="CloseVectorDatabase",e[e.CloseGraphDatabase=12]="CloseGraphDatabase",e[e.LocalMediaStreamTrackFail=13]="LocalMediaStreamTrackFail",e[e.RemoteMediaStreamTrackFail=14]="RemoteMediaStreamTrackFail",e[e.RequestSyncKeyValueDatabase=15]="RequestSyncKeyValueDatabase",e[e.SendTransactionsDump=16]="SendTransactionsDump",e[e.RequestTransactionsValue=17]="RequestTransactionsValue",e[e.PubSubTopicStats=18]="PubSubTopicStats",e[e.ObjectStoreStats=19]="ObjectStoreStats",e[e.KeyValueDatabaseStats=20]="KeyValueDatabaseStats",e[e.GenerativeAIContextStats=21]="GenerativeAIContextStats",e[e.GenerativeAIWorkerStats=22]="GenerativeAIWorkerStats",e[e.VectorDatabaseStats=23]="VectorDatabaseStats",e[e.GraphDatabaseStats=24]="GraphDatabaseStats"}(n||(n={}))},"./src/interfaces/Content/DataContent.ts":(e,t,s)=>{var n,r,i,o,a;s.r(t),s.d(t,{InternalDatabaseTableReadAction:()=>o,InternalDatabaseTableWriteAction:()=>i,InternalJobPhase:()=>a,InternalObjectStorePayloadAction:()=>n,InternalObjectStorePayloadType:()=>r}),function(e){e.FileWrite="file-write",e.FolderCreate="folder-create",e.Delete="delete",e.Move="move",e.RequestFile="request-file",e.RequestAccepted="request-accepted",e.RequestFileSync="request-file-sync",e.RequestFileWrite="request-file-write"}(n||(n={})),function(e){e.Request="request",e.Transaction="transaction"}(r||(r={})),function(e){e.Add="add",e.Update="update",e.Delete="delete"}(i||(i={})),function(e){e.Get="get",e.List="list",e.Count="count"}(o||(o={})),function(e){e[e.Request=0]="Request",e[e.Bid=1]="Bid",e[e.Attribution=2]="Attribution",e[e.PartialResult=3]="PartialResult",e[e.Result=4]="Result",e[e.Failed=5]="Failed"}(a||(a={}))},"./src/interfaces/Detection/Detection.ts":(e,t,s)=>{var n,r,i;s.r(t),s.d(t,{DetectionMessageType:()=>i,IssueType:()=>n,ProblemType:()=>r}),function(e){e.STVolatility="st_volatility",e.DTVolatility="dt_volatility",e.TimePerFrame="time_per_frame",e.Bitrate="bitrate",e.Jitter="jitter",e.FramePerSecond="fps",e.RoundTripTime="rtt",e.AudioVideoDelay="av_delay"}(n||(n={})),function(e){e.CPUCycle="cpu.cycle",e.TimePerFrame="cpu.time_per_frame",e.AudioVideoDelay="cpu.av_delay",e.FramePerSecond="cpu.fps",e.Bitrate="bandwidth.bitrate",e.Jitter="bandwidth.jitter",e.RoundTripTime="bandwidth.rtt"}(r||(r={})),function(e){e[e.Problem=0]="Problem"}(i||(i={}))},"./src/interfaces/Node/Node.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{NodeStatus:()=>n}),function(e){e[e.Online=0]="Online",e[e.Offline=1]="Offline"}(n||(n={}))},"./src/interfaces/Node/NodeMessage.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{NodeMessageType:()=>n}),function(e){e[e.NodeJoin=0]="NodeJoin",e[e.NodeUpdate=1]="NodeUpdate",e[e.NodeConnectionsUpdate=2]="NodeConnectionsUpdate",e[e.NodeLeave=3]="NodeLeave"}(n||(n={}))},"./src/interfaces/Remediation/Remediation.ts":(e,t,s)=>{var n,r,i;s.r(t),s.d(t,{RemediationAction:()=>r,RemediationComponent:()=>i,RemediationMessageType:()=>n}),function(e){e[e.Remediation=0]="Remediation",e[e.RemoteRemediation=1]="RemoteRemediation"}(n||(n={})),function(e){e.Upgrade="upgrade",e.Downgrade="downgrade"}(r||(r={})),function(e){e.Resolution="resolution",e.Bitrate="bitrate"}(i||(i={}))},"./src/interfaces/SDK/SDK.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{IInternalFeatures:()=>n}),function(e){e.MediaStream="media-stream"}(n||(n={}))},"./src/interfaces/Services/Workflow.ts":(e,t,s)=>{var n,r,i;s.r(t),s.d(t,{BlockLinkType:()=>i,DataCollectionBlockType:()=>r,WorkflowBlockType:()=>n}),function(e){e.Agent="agent",e.DataCollection="data-collection",e.Prompt="prompt",e.Answer="answer",e.Time="time",e.Code="code",e.Search="search",e.WebScraper="web-scraper"}(n||(n={})),function(e){e.ObjectStorageUpload="object-storage-upload",e.DocumentParser="document-parser",e.ChunkSplitter="chunk-splitter",e.WordSplitter="word-splitter",e.SentenceSplitter="sentence-splitter",e.RelationExtractor="relation-extractor",e.EntityExtractor="entity-extractor",e.Reranker="reranker",e.Model="model",e.ObjectStorageBucket="object-storage",e.KeyValueDatabase="key-value-database",e.VectorDatabase="vector-database",e.GraphDatabase="graph-database",e.Prompt="prompt",e.Context="context"}(r||(r={})),function(e){e.File="file",e.Text="text",e.Image="image",e.Audio="audio",e.Data="data",e.Vector="vector",e.Entity="entity",e.Relation="relation",e.Search="search",e.Index="index",e.Knowledge="knowledge",e.Skill="skill"}(i||(i={}))},"./src/interfaces/Stats/Stats.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{StatsMessageType:()=>n}),function(e){e[e.StreamReport=0]="StreamReport",e[e.LocalReport=1]="LocalReport"}(n||(n={}))},"./src/interfaces/Subscription/MediaSubscriptionEvent.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{MediaSubscriptionAction:()=>n}),function(e){e[e.Add=0]="Add",e[e.Remove=1]="Remove",e[e.Update=2]="Update",e[e.RemoteAdd=3]="RemoteAdd",e[e.RemoteRemove=4]="RemoteRemove"}(n||(n={}))},"./src/interfaces/Subscription/Subscription.ts":(e,t,s)=>{var n,r;s.r(t),s.d(t,{SubscriptionRequestType:()=>n,SubscriptionType:()=>r}),function(e){e[e.Waiting=0]="Waiting",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"}(n||(n={})),function(e){e.Incoming="in",e.Outgoing="out"}(r||(r={}))},"./src/interfaces/Subscription/SubscriptionMessage.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SubscriptionMessageType:()=>n}),function(e){e[e.SubscribeMediaStream=0]="SubscribeMediaStream",e[e.UpdateMediaStream=1]="UpdateMediaStream",e[e.UnsubscribeMediaStream=2]="UnsubscribeMediaStream",e[e.NeedMediaStream=3]="NeedMediaStream",e[e.RestartNeedMediaStream=4]="RestartNeedMediaStream",e[e.CanProvideMediaStream=5]="CanProvideMediaStream",e[e.CannotProvideMediaStream=6]="CannotProvideMediaStream",e[e.MediaStreamUnavailable=7]="MediaStreamUnavailable"}(n||(n={}))},"./src/interfaces/Subscription/SystemEvent.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SystemMessageType:()=>n}),function(e){e[e.PeerConnection=0]="PeerConnection",e[e.Node=1]="Node",e[e.Content=2]="Content",e[e.Subscription=3]="Subscription",e[e.Stats=4]="Stats",e[e.Detection=5]="Detection",e[e.Remediation=6]="Remediation"}(n||(n={}))},"./src/interfaces/Utils/Logger.ts":(e,t,s)=>{var n,r;s.r(t),s.d(t,{LoggingChannels:()=>r,LoggingServices:()=>n}),function(e){e.PubSub="pubsub",e.ObjectStorage="object-storage",e.KeyValueDatabase="key-value-database",e.VectorDatabase="vector-database",e.GraphDatabase="graph-database",e.MediaStream="media-stream",e.GenerativeAIContext="generative-ai"}(n||(n={})),function(e){e.All="all",e.Default="default",e.Connection="connection",e.ConnectionState="connection-state",e.Cluster="cluster",e.Content="content",e.DataStream="data-stream",e.Detection="detection",e.Events="events",e.Error="error",e.Jobs="jobs",e.Node="node",e.Pool="pool",e.PubSub="pubsub",e.Remediation="remediation",e.Signaling="signaling",e.Stats="stats",e.Subscription="subscription",e.Support="support",e.System="system",e.SystemStats="system-stats",e.TestPage="test-page",e.PeerConnection="peer-connection"}(r||(r={}))},"./src/interfaces/Utils/Queue.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{QueueElementPriority:()=>n}),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(n||(n={}))},"./src/interfaces/Utils/Support.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SupportFeatureName:()=>n}),function(e){e.AudioContext="AudioContext",e.AudioOutput="AudioOutput",e.AudioVolume="AudioVolume",e.Backgrounds="Backgrounds",e.DeviceConfig="DeviceConfig",e.MediaStream="MediaStream",e.Recording="Recording",e.ScreenSharing="ScreenSharing",e.WebGL="WebGL",e.WebRTC="WebRTC"}(n||(n={}))},"./src/models/Cluster/Cluster.ts":(e,t,s)=>{s.r(t),s.d(t,{Cluster:()=>a});var n=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/models/Cluster/ClusterEventEmitter.ts"),o=s("./src/models/Orchestrator/Orchestrator.ts");class a{vendorId;clusterId;authNode;eventEmitter;orchestrator;constructor(e,t,s,n,r,a,c=new i.ClusterEventEmitter){this.vendorId=e,this.clusterId=t,this.authNode=s,this.eventEmitter=c,this.orchestrator=new o.Orchestrator(this.vendorId,this.clusterId,s,n,r,a,this)}async join(){await this.orchestrator.initialize(),this.authNode.type===n.NodeType.User&&this.authNode.registerCluster(this.clusterId,(e=>{this.orchestrator.updateUser(e)}))}leave(e={}){this.orchestrator.close(e),this.authNode.type===n.NodeType.User&&this.authNode.unregisterCluster(this.clusterId),this.emit("cluster-leave",void 0)}openPubSubTopic(e){const t=this.orchestrator.openPubSubTopic(e);return{getName:t.getName.bind(t),getOwnerId:t.getOwnerId.bind(t),getContentType:t.getContentType.bind(t),publish:t.publish.bind(t),subscribe:t.subscribe.bind(t),unsubscribe:t.unsubscribe.bind(t),close:t.close.bind(t)}}async openObjectStoreBucket(e,t){const s=await this.orchestrator.openObjectStoreBucket(e,t);return{getName:s.getName.bind(s),getOwnerId:s.getOwnerId.bind(s),getContentType:s.getContentType.bind(s),publish:s.publish.bind(s),unpublish:s.unpublish.bind(s),get:s.get.bind(s),list:s.list.bind(s),getSize:s.getSize.bind(s),subscribe:s.subscribe.bind(s),unsubscribe:s.unsubscribe.bind(s),close:s.close.bind(s)}}async openKeyValueDatabase(e,t){const s=await this.orchestrator.openKeyValueDatabase(e,t);return{getName:s.getName.bind(s),getOwnerId:s.getOwnerId.bind(s),getContentType:s.getContentType.bind(s),getTable:s.getTable.bind(s),subscribe:s.subscribe.bind(s),unsubscribe:s.unsubscribe.bind(s),close:s.close.bind(s)}}async openJobDispatcher(e){const t=await this.orchestrator.openJobDispatcher(e);return{getName:t.getName.bind(t),getOwnerId:t.getOwnerId.bind(t),getContentType:t.getContentType.bind(t),createJob:t.createJob.bind(t),getJob:t.getJob.bind(t),getJobs:t.getJobs.bind(t),close:t.close.bind(t)}}async openJobWorker(e){const t=await this.orchestrator.openJobWorker(e);return{close:t.close.bind(t)}}async openGenerativeAIContext(e){const t=await this.orchestrator.openGenerativeAIContext(e);return{prompt:t.prompt.bind(t),stream:t.stream.bind(t),getDataBucketIds:t.getDataBucketIds.bind(t),close:t.close.bind(t)}}async openGenerativeAIWorker(e){const t=await this.orchestrator.openGenerativeAIWorker(e);return{close:t.close.bind(t)}}openGraphDatabase(e){const t=this.orchestrator.openGraphDatabase(e);return{getName:t.getName.bind(t),getOwnerId:t.getOwnerId.bind(t),getContentType:t.getContentType.bind(t),addNode:t.addNode.bind(t),addEdge:t.addEdge.bind(t),getContent:t.getContent.bind(t),close:t.close.bind(t)}}openVectorDatabase(e){const t=this.orchestrator.openVectorDatabase(e);return{getName:t.getName.bind(t),getOwnerId:t.getOwnerId.bind(t),getContentType:t.getContentType.bind(t),search:t.search.bind(t),insert:t.insert.bind(t),remove:t.remove.bind(t),close:t.close.bind(t)}}getPubSubTopics(e){return this.orchestrator.getPubSubTopics(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),publish:e.publish.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),close:e.close.bind(e)})))}getObjectStoreBuckets(e){return this.orchestrator.getObjectStoreBuckets(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),publish:e.publish.bind(e),unpublish:e.unpublish.bind(e),get:e.get.bind(e),list:e.list.bind(e),getSize:e.getSize.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),close:e.close.bind(e)})))}getKeyValueDatabases(e){return this.orchestrator.getKeyValueDatabases(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),getTable:e.getTable.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),close:e.close.bind(e)})))}getGenerativeAIContexts(e){return this.orchestrator.getGenerativeAIContexts(e).map((e=>({prompt:e.prompt.bind(e),stream:e.stream.bind(e),getDataBucketIds:e.getDataBucketIds.bind(e),close:e.close.bind(e)})))}getGenerativeAIWorkers(e){return this.orchestrator.getGenerativeAIWorkers(e).map((e=>({close:e.close.bind(e)})))}publishLocalMediaStream(e,t){const s=this.orchestrator.createLocalMediaStream(e,t);return{getLabel:s.getLabel.bind(s),getOwnerId:s.getOwnerId.bind(s),getContentType:s.getContentType.bind(s),getMediaStream:s.getMediaStream.bind(s),setPriority:s.setPriority.bind(s),unpublish:s.unpublish.bind(s)}}publishLocalDynamicMediaStream(e,t){const s=this.orchestrator.createLocalDynamicMediaStream(e,t);return{getLabel:s.getLabel.bind(s),getOwnerId:s.getOwnerId.bind(s),getContentType:s.getContentType.bind(s),setPriority:s.setPriority.bind(s),unpublish:s.unpublish.bind(s),getMediaStream:s.getMediaStream.bind(s),addTrack:s.addTrack.bind(s),removeTrack:s.removeTrack.bind(s),replaceTrack:s.replaceTrack.bind(s),setTransformations:s.setTransformations.bind(s)}}getLocalMediaStreams(e){return this.orchestrator.getLocalMediaStreams(e).map((e=>({getLabel:e.getLabel.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),getMediaStream:e.getMediaStream.bind(e),setPriority:e.setPriority.bind(e),unpublish:e.unpublish.bind(e)})))}getRemoteMediaStreams(e){return this.orchestrator.getRemoteMediaStreams(e).map((e=>({getLabel:e.getLabel.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),getMediaStream:e.getMediaStream.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),getAvailableTrackKinds:e.getAvailableTrackKinds.bind(e),update:e.update.bind(e),onProviderChange:e.onProviderChange.bind(e)})))}getGraphDatabases(e){return this.orchestrator.getGraphDatabases(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),addNode:e.addNode.bind(e),addEdge:e.addEdge.bind(e),getContent:e.getContent.bind(e),close:e.close.bind(e)})))}getVectorDatabases(e){return this.orchestrator.getVectorDatabases(e).map((e=>({getName:e.getName.bind(e),getOwnerId:e.getOwnerId.bind(e),getContentType:e.getContentType.bind(e),search:e.search.bind(e),insert:e.insert.bind(e),remove:e.remove.bind(e),close:e.close.bind(e)})))}getLocalNode(){const e=this.orchestrator.getLocalNode();switch(e.type){case n.NodeType.User:return{type:n.NodeType.User,getId:e.getId.bind(e),getDisplayName:e.getDisplayName.bind(e),getEmail:e.getEmail.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e),setDisplayName:e.setDisplayName.bind(e),setEmail:e.setEmail.bind(e)};case n.NodeType.Agent:default:return{type:n.NodeType.Agent,getId:e.getId.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e)}}}getRemoteNodes(e){return this.orchestrator.getRemoteNodes(e).map((e=>{switch(e.type){case n.NodeType.User:return{type:n.NodeType.User,getId:e.getId.bind(e),getDisplayName:e.getDisplayName.bind(e),getEmail:e.getEmail.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e)};case n.NodeType.Agent:return{type:n.NodeType.Agent,getId:e.getId.bind(e),getRemoteConnections:e.getRemoteConnections.bind(e)};default:throw new r.SDKClientError(r.SDKClientErrorCodes.NodeInvalidType,"Invalid node type")}}))}on=(...e)=>{this.eventEmitter.on(...e)};emit=(...e)=>this.eventEmitter.emit(...e);off(...e){this.eventEmitter.off(...e)}}},"./src/models/Cluster/ClusterEventEmitter.ts":(e,t,s)=>{s.r(t),s.d(t,{ClusterEventEmitter:()=>i});var n=s("./src/interfaces/Utils/Logger.ts"),r=s("./src/utils/Logger/Logger.ts");class i{registeredListeners;bufferedEvents;eventTarget;constructor(e=new Map,t=new Map,s=new EventTarget){this.registeredListeners=e,this.bufferedEvents=t,this.eventTarget=s}emit=(e,t)=>this.registeredListeners.has(e)?(r.default.log(n.LoggingChannels.Events,"Emitting event on local cluster",{event:e,data:t}),this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:t})),!0):(this.bufferEvent(e,t),!1);on=(e,t)=>{const s=e=>{r.default.log(n.LoggingChannels.Events,"Received event on cluster",e.type,e.detail),t(e.detail)};return this.registeredListeners.set(e,s),this.eventTarget.addEventListener(e,s),r.default.log(n.LoggingChannels.Cluster,"Subscribing to an event: on",e,t),this.consumeBufferedEvents(e),this};off(e){if(!e)return this.registeredListeners.forEach(((e,t)=>{this.eventTarget.removeEventListener(t,e)})),void this.registeredListeners.clear();"string"==typeof e&&this.removeListener(e),Array.isArray(e)&&e.forEach((e=>{this.removeListener(e)}))}removeListener(e){const t=this.registeredListeners.get(e);t&&(this.eventTarget.removeEventListener(e,t),this.registeredListeners.delete(e))}bufferEvent(e,t){r.default.log(n.LoggingChannels.Events,"Buffering event",{event:e,data:t});const s=this.bufferedEvents.get(e)||[];this.bufferedEvents.set(e,[...s,t])}consumeBufferedEvents(e){const t=this.bufferedEvents.get(e);t&&(t.forEach((t=>{r.default.log(n.LoggingChannels.Events,"Consuming buffered event",{event:e,data:t}),this.eventTarget.dispatchEvent(new CustomEvent(e,{detail:t}))})),this.bufferedEvents.delete(e))}}},"./src/models/Connection/AppSyncPubSubConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{AppSyncPubSubConnection:()=>m});var n=s("aws-amplify"),r=s("aws-amplify/utils"),i=s("@aws-amplify/api"),o=s("@aws-amplify/core"),a=s("@crewdle/web-sdk-types"),c=s("./src/environments/Environment.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Connection/BaseConnection.ts"),u=s("./src/models/Subscription/Helpers.ts"),h=s("./src/utils/Logger/Logger.ts"),p=s("./src/utils/Observer/Observer.ts"),g=s("./src/utils/Queue/Queue.ts"),b=s("./src/utils/Queue/RetryQueue.ts");class m extends l.BaseConnection{vendorId;authService;connectionState=i.ConnectionState.Disconnected;connectionStateListener=(0,p.createSingleObserver)();messageListeners=(0,p.createObserver)();subscription;listenUnsubscriber;retryQueue=(0,b.createRetryQueue)(new g.AsyncQueueCallback(this.sendAction.bind(this),this.waitConnected.bind(this)));client;constructor(e,t,s,n,r){super(t,s,n),this.vendorId=e,this.authService=r}async connect(){try{const e={getTokens:async()=>{const e=await this.authService.getIdToken();return{accessToken:(0,o.decodeJWT)(e),idToken:(0,o.decodeJWT)(e)}}};n.Amplify.configure({API:{GraphQL:{endpoint:c.Environment.aws.endpoint,region:c.Environment.aws.region,defaultAuthMode:"oidc"}}},{Auth:{tokenProvider:e}}),this.client=(0,i.generateClient)(),await this.subscribe(),this.listenUnsubscriber=r.Hub.listen("api",(async({payload:e})=>{if(e.event===i.CONNECTION_STATE_CHANGE){const t=e.data;this.connectionState=t.connectionState,this.connectionStateListener.publish(t.connectionState),this.connectionState===i.ConnectionState.Disconnected?(h.default.error("appsync-disconnect",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type}),this.close(),this.connect()):this.connectionState===i.ConnectionState.Connected?h.default.warning("appsync-connect",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type}):h.default.warning("appsync-statechange",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type,data:{state:t.connectionState}})}}))}catch(e){h.default.error("appsync-connect-fail",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type})}}close(){h.default.warning("appsync-close",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type}),this.retryQueue.clear(),this.listenUnsubscriber?.(),this.subscription?.unsubscribe(),delete this.subscription}isConnected(){return this.connectionState===i.ConnectionState.Connected}send(e){this.retryQueue.push(e)}onMessage(e){return this.messageListeners.subscribe(e)}getSupportedContentTypes(){return[a.ContentType.Data]}async waitConnected(){if(!this.isConnected())return new Promise((e=>{const t=this.connectionStateListener.subscribe((s=>{s===i.ConnectionState.Connected&&(t(),e())}))}))}async sendAction(e){if(this.connectionState!==i.ConnectionState.Connected)throw new Error("AppSync connection not ready");e.destinationIds&&1===e.destinationIds.length?await this.publish(e.destinationIds[0],JSON.stringify(e)):h.default.error("appsync-no-destination",{clusterId:this.clusterId,nodeId:this.getLocalId(),nodeType:this.localNode.type})}async publish(e,t){if(!this.client)throw new Error("AppSync client not ready");h.default.log(d.LoggingChannels.Signaling,"AppSync publish",this.getLocalId(),t),await this.client.graphql({query:"\n  mutation Publish($data: AWSJSON!, $name: String!) {\n    publish(data: $data, name: $name) {\n      data\n      name\n    }\n  }\n",variables:{name:await this.getHash(e),data:t}})}async subscribe(){if(this.subscription)return;if(!this.client)throw new Error("AppSync client not ready");h.default.log(d.LoggingChannels.Signaling,"AppSync subscribe",this.getLocalId());const e=await this.client.graphql({query:"\n  subscription Subscribe($name: String!) {\n    subscribe(name: $name) {\n      data\n      name\n    }\n  }\n",variables:{name:await this.getHash()},authToken:await this.authService.getIdToken()},{Authorization:await this.authService.getIdToken()});this.subscription=e.subscribe({next:({data:e})=>{const t=JSON.parse(e.subscribe.data);!(0,u.isSender)(t,this.getLocalId())&&(0,u.isReceiver)(t,this.getLocalId())&&this.messageListeners.publish(t)},error:console.log})}async getHash(e){const t=await crypto.subtle.digest("SHA-1",(new TextEncoder).encode(`${this.vendorId}-${this.clusterId}-${e??this.getLocalId()}`));return Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("")}}},"./src/models/Connection/BaseConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseConnection:()=>n});class n{clusterId;localNode;remoteId;constructor(e,t,s){this.clusterId=e,this.localNode=t,this.remoteId=s}getLocalId(){return this.localNode.getId()}getRemoteId(){return this.remoteId}}},"./src/models/Connection/BasePeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{BasePeerConnection:()=>d});var n=s("./src/constants/PeerConnection.ts"),r=s("./src/errors/SDKInternalError.ts"),i=s("./src/interfaces/Connection/PeerConnection.ts"),o=s("./src/interfaces/Subscription/SystemEvent.ts"),a=s("./src/interfaces/Utils/Logger.ts"),c=s("./src/utils/Logger/Logger.ts");class d{clusterId;localNode;remoteId;iceServers;connectionType;connectionConstructor;connection;dataChannel;currentVersion=1;systemTopic;handshakeCandidates=[];pendingHandshakeCandidates=[];handshakeDebounce;constructor(e,t,s,n,r,i){this.clusterId=e,this.localNode=t,this.remoteId=s,this.iceServers=n,this.connectionType=r,this.connectionConstructor=i,this.connection=new this.connectionConstructor({handshakeServers:this.iceServers}),this.setupConnectionEvents()}close(){this.stopConnection()}setConnectionType(e){this.connectionType=e}async handleHandshake(e,t){if(t===this.currentVersion)for(const t of e){if(!this.connection.canAddCandidates)return this.addPendingHandshakeCandidate(t);try{await this.connection.addCandidate(t)}catch(e){this.addPendingHandshakeCandidate(t)}}}isConnected(){return this.logConnectionState(),"connected"===this.connection.connectionState&&["connected","completed"].includes(this.connection.handshakeState)&&"closed"!==this.connection.signalingState&&"open"===this.dataChannel?.state}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}resetConnection(e){this.stopConnection(),this.connection=new this.connectionConstructor({handshakeServers:this.iceServers}),e?this.currentVersion=e:this.currentVersion+=1,this.setupConnectionEvents()}processPendingHandshakeCandidates(){this.pendingHandshakeCandidates.forEach((e=>{try{this.connection.addCandidate(e)}catch(e){}})),this.pendingHandshakeCandidates=[]}publishSystemMessage(e,t){if(!this.systemTopic)throw new r.SDKInternalError(r.SDKInternalError.codes.MissingSystemTopic,{content:e});const s={sourceId:this.localNode.getId(),destinationIds:[this.remoteId],propagate:this.connectionType!==i.PeerConnectionType.Core,retry:this.connectionType!==i.PeerConnectionType.Core,messageType:o.SystemMessageType.PeerConnection,content:e};t&&(s.uuid=t),this.systemTopic.publish(s)}setupConnectionEvents(){this.connection.onGatheringStateChange=()=>{"complete"===this.connection.gatheringState&&this.handshakeCandidates.length>0&&(this.handshakeDebounce&&clearTimeout(this.handshakeDebounce),this.handshakeDebounce=setTimeout((()=>{delete this.handshakeDebounce,this.sendIceCandidates(),this.handshakeCandidates=[]}),n.PEER_CONNECTION_HANDSHAKE_DEBOUNCE))},this.connection.onCandidate=e=>{e.candidate&&this.handshakeCandidates.push(e.candidate)}}stopConnection(){clearTimeout(this.handshakeDebounce),delete this.handshakeDebounce,this.handshakeCandidates=[],this.pendingHandshakeCandidates=[],this.dataChannel&&(this.dataChannel.onMessage=null,this.dataChannel.onClose=null,this.dataChannel.close(),delete this.dataChannel),this.connection.onGatheringStateChange=null,this.connection.onCandidate=null,this.connection.onHandshakeStateChange=null,this.connection.onConnectionStateChange=null,this.connection.onTrack=null,this.connection.onDataChannel=null,this.connection.close()}addPendingHandshakeCandidate(e){this.pendingHandshakeCandidates.push(e)}logConnectionState(){c.default.log(a.LoggingChannels.ConnectionState,"Base Peer Connection",{localId:this.localNode.getId(),remoteId:this.remoteId,connectionState:this.connection.connectionState,handshakeState:this.connection.handshakeState,signalingState:this.connection.signalingState,dataChannelState:this.dataChannel?.state})}}},"./src/models/Connection/ConnectionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{ConnectionManager:()=>b});var n=s("./src/constants/Connection.ts"),r=s("./src/errors/EarlyReturnError.ts"),i=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Connection/PeerConnection.ts"),a=s("./src/interfaces/Node/NodeMessage.ts"),c=s("./src/interfaces/Remediation/Remediation.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/models/Connection/AppSyncPubSubConnection.ts"),u=s("./src/models/Connection/PeerConnection.ts"),h=s("./src/models/Connection/PeerConnectionGroup.ts"),p=s("./src/models/Connection/PeerConnectionPool.ts"),g=s("./src/services/MessageBuffer/MessageBufferService.ts");class b{configs;authService;iceServers;options;connections=new Map;connectionPool;connectionGroup;signalingServer;messageBuffer;constructor(e,t,s,n,r){this.configs=e,this.authService=t,this.iceServers=n,this.options=r,this.messageBuffer=new g.MessageBufferService,this.connectionGroup=new h.PeerConnectionGroup(this.configs.localNode.getId(),this.messageBuffer,s),this.signalingServer=new l.AppSyncPubSubConnection(this.configs.vendorId,this.configs.clusterId,this.configs.localNode,"server",this.authService),this.connectionPool=new p.PeerConnectionPool(this.configs.localNode.getId(),this.messageBuffer),this.connectionPool.addConnection(this.connectionGroup),this.connectionPool.addConnection(this.signalingServer),this.configs.mediator.registerSystemSource(this.connectionPool)}close(){this.messageBuffer.close(),this.connections.forEach(((e,t)=>this.closeConnection(t))),this.configs.mediator.unregisterSystemSource(this.connectionPool),this.connectionPool.removeConnection(this.signalingServer),this.connectionPool.removeConnection(this.connectionGroup),this.connectionPool.close(),this.signalingServer.close(),this.connectionGroup.close()}async initialize(){await this.signalingServer.connect()}async createConnection(e,t=o.PeerConnectionType.Core){if(this.connections.has(e)){if(this.connections.get(e)?.getConnectionType()===o.PeerConnectionType.Optimization&&t===o.PeerConnectionType.Core)return void this.connections.get(e)?.setConnectionType(o.PeerConnectionType.Core);throw new i.SDKInternalError(i.SDKInternalError.codes.RemoteConnectionExists,{localId:this.configs.localNode.getId(),remoteId:e})}const s=new u.PeerConnection(this.configs.clusterId,this.configs.localNode,e,this.iceServers,t,this.options.maxFps,this.options.maxBpp,this.options.peerConnectionConnector);this.connections.set(e,s),this.connectionGroup.addConnection(s),this.configs.mediator.registerSystemSource(s),this.configs.mediator.registerRemoteNode(e),await s.connect()}getConnectionGroup(){return this.connectionGroup}getConnection(e){if(!this.connections.has(e))throw new i.SDKInternalError(i.SDKInternalError.codes.MissingRemoteConnection,{localId:this.configs.localNode.getId(),remoteId:e});return this.connections.get(e)}getConnections(e){const t=Array.from(this.connections.values());return e?t.filter(e):t}async collectStats(e){const t=this.connections.get(e);t&&t.isConnected()&&await t.collectStats()}handleOutgoingSystemEvents(e){if(e.messageType!==d.SystemMessageType.PeerConnection||e.propagate)try{this.connectionGroup.send(e)}catch(e){if(e instanceof r.EarlyReturnError)return;throw e}else this.connectionPool.send(e)}async handlePeerConnectionSystemEvents(e){switch(e.content.type){case o.PeerConnectionMessageType.Disconnect:case o.PeerConnectionMessageType.Stats:case o.PeerConnectionMessageType.OptimizationConnectionSuccess:return}if(!e.destinationIds||1!==e.destinationIds.length)throw new i.SDKInternalError(i.SDKInternalError.codes.PeerConnectionInvalidDestination,{message:"Peer Connection system events must have exactly one destination",event:e});if(e.destinationIds[0]!==this.configs.localNode.getId())throw new i.SDKInternalError(i.SDKInternalError.codes.PeerConnectionInvalidDestination,{message:"Incoming Peer Connection events must have the local id as a destination",event:e});if(!this.connections.has(e.sourceId)){let t=o.PeerConnectionType.Core;if(!(this.isOffer(e.content)||this.isIceCandidate(e.content)||this.isNeedRestart(e.content)))return;t=e.content.connectionType,await this.createConnection(e.sourceId,t)}const t=this.connections.get(e.sourceId);await t.handlePeerConnectionSystemEvents(e)}handleRemediationSystemEvents(e){if(e.content.type===c.RemediationMessageType.Remediation){if(e.content.targetId===this.configs.localNode.getId())return void this.connections.forEach((t=>t.handleRemediationSystemEvents(e)));this.connections.get(e.content.targetId)?.handleRemediationSystemEvents(e)}}handleNodeSystemEvents({content:e}){e.type===a.NodeMessageType.NodeLeave&&this.closeConnection(e.id)}waitForArrayBufferSize(){const e=Array.from(this.connections.values()).reduce(((e,t)=>e+t.calculateArrayBufferSize()),0);return e<n.CONNECTION_MAX_BUFFER_SIZE?Promise.resolve(e):new Promise((e=>{const t=setInterval((()=>{const s=Array.from(this.connections.values()).reduce(((e,t)=>e+t.calculateArrayBufferSize()),0);s<n.CONNECTION_MAX_BUFFER_SIZE&&(clearInterval(t),e(s))}),1e3)}))}hasBufferedData(){for(const e of this.connections.values())if(e.getBufferedAmount()>0||e.calculateArrayBufferSize()>0)return!0;return!1}closeConnection(e){const t=this.connections.get(e);t&&(this.configs.mediator.unregisterRemoteNode(e),this.configs.mediator.unregisterSystemSource(t),t instanceof u.PeerConnection&&this.connectionGroup.removeConnection(t),t.close(),this.connections.delete(e))}isOffer(e){return e.type===o.PeerConnectionMessageType.Offer}isNeedRestart(e){return e.type===o.PeerConnectionMessageType.NeedRestart}isIceCandidate(e){return e.type===o.PeerConnectionMessageType.Handshake}}},"./src/models/Connection/PeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{PeerConnection:()=>m});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/System.ts"),i=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Connection/PeerConnection.ts"),a=s("./src/interfaces/Subscription/MediaSubscriptionEvent.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Connection/BaseConnection.ts"),u=s("./src/models/Connection/ReceiverPeerConnection.ts"),h=s("./src/models/Connection/SenderPeerConnection.ts"),p=s("./src/models/Subscription/Helpers.ts"),g=s("./src/utils/Logger/Logger.ts"),b=s("./src/utils/Observer/Observer.ts");class m extends l.BaseConnection{iceServers;connectionType;maxFps;maxBpp;connectionConstructor;senderConnection;receiverConnection;receiverUnsubscribers=[];messageListeners=(0,b.createObserver)();trackListeners=(0,b.createObserver)();removeTrackListeners=(0,b.createObserver)();listenerUnsubscribers=[];systemTopic;dataTopics=new Map;dataUnsubscribers=new Map;mediaTopics=new Map;mediaUnsubscribers=new Map;successNotified=!1;constructor(e,t,s,n,r,i,o,a){super(e,t,s),this.iceServers=n,this.connectionType=r,this.maxFps=i,this.maxBpp=o,this.connectionConstructor=a}registerPublisher(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:case n.ContentType.Job:case n.ContentType.VectorDatabase:case n.ContentType.GraphDatabase:this.dataTopics.set(e.getLabel(),e);break;case n.ContentType.Media:this.mediaTopics.set(e.getLabel(),e)}}unregisterPublisher(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:case n.ContentType.Job:case n.ContentType.VectorDatabase:case n.ContentType.GraphDatabase:this.dataTopics.delete(e.getLabel());break;case n.ContentType.Media:this.mediaTopics.delete(e.getLabel())}}registerSubscriber(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:case n.ContentType.Job:case n.ContentType.VectorDatabase:case n.ContentType.GraphDatabase:{const t=e.subscribe((e=>{(0,p.isSender)(e,this.getLocalId())&&(0,p.isReceiver)(e,this.remoteId)&&this.send(e)}));this.dataUnsubscribers.set(e.getLabel(),t);break}case n.ContentType.Media:{const t=e.subscribe((({content:e})=>{switch(e.action){case a.MediaSubscriptionAction.Add:this.addTrack(e.track,e.stream,e.priority,e.params);break;case a.MediaSubscriptionAction.Remove:this.removeTrack(e.track,e.stream);break;case a.MediaSubscriptionAction.Update:e.priority&&this.setPriority(e.stream,e.priority),e.params&&this.setParams(e.stream,e.params)}}));this.mediaUnsubscribers.set(e.getLabel(),t);break}}}unregisterSubscriber(e){switch(e.getContentType()){case n.ContentType.Data:case n.ContentType.PubSub:case n.ContentType.ObjectStore:case n.ContentType.KeyValueDatabase:case n.ContentType.Job:case n.ContentType.VectorDatabase:case n.ContentType.GraphDatabase:this.dataUnsubscribers.get(e.getLabel())?.(),this.dataUnsubscribers.delete(e.getLabel());break;case n.ContentType.Media:this.mediaUnsubscribers.get(e.getLabel())?.(),this.mediaUnsubscribers.delete(e.getLabel())}}getSupportedContentTypes(){return[n.ContentType.Data,n.ContentType.Media,n.ContentType.PubSub,n.ContentType.ObjectStore,n.ContentType.KeyValueDatabase,n.ContentType.Job,n.ContentType.VectorDatabase,n.ContentType.GraphDatabase]}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}async connect(){this.setupListeners(),await this.createOffer()}close(){this.listenerUnsubscribers.forEach((e=>e())),this.listenerUnsubscribers=[],this.senderConnection?.unregisterSystemPublisher(),this.senderConnection?.close(),delete this.senderConnection,this.receiverUnsubscribers.forEach((e=>e())),this.receiverUnsubscribers=[],this.receiverConnection?.unregisterSystemPublisher(),this.receiverConnection?.close(),delete this.receiverConnection}isConnected(){return this.senderConnection?.isConnected()&&this.receiverConnection?.isConnected()||!1}send(e){if(!this.senderConnection||!this.isConnected())throw new i.SDKInternalError(i.SDKInternalError.codes.ConnectionNotinitialized,{message:"Sender connection is not initialized while trying to send a message.",senderConnected:this.senderConnection?.isConnected(),receiverConnected:this.receiverConnection?.isConnected(),localId:this.getLocalId(),remoteId:this.remoteId,data:e});this.senderConnection.send(e)}onMessage(e){return this.messageListeners.subscribe(e)}onTrack(e){return this.trackListeners.subscribe((({track:t,stream:s})=>e(t,s)))}onRemoveTrack(e){return this.removeTrackListeners.subscribe((({track:t,stream:s})=>e(t,s)))}addTrack(e,t,s,n){this.senderConnection?.addTrack(e,t,s,n)}setPriority(e,t){this.senderConnection?.setPriority(e,t)}setParams(e,t){this.senderConnection?.setParams(e,t)}removeTrack(e,t){this.senderConnection?.removeTrack(e,t)}async handlePeerConnectionSystemEvents(e){g.default.log(d.LoggingChannels.Connection,"CrewdleConnection handlePeerConnectionSystemEvents",this.getLocalId(),e);const{content:t}=e;switch(t.type){case o.PeerConnectionMessageType.Offer:await this.handleOffer(t);break;case o.PeerConnectionMessageType.Answer:await this.handleAnswer(t);break;case o.PeerConnectionMessageType.Success:this.handleSuccess();break;case o.PeerConnectionMessageType.Handshake:await this.handleIceCandidates(t);break;case o.PeerConnectionMessageType.NeedRestart:this.handleNeedRestart(t);break;case o.PeerConnectionMessageType.Restart:await this.createOffer()}}handleRemediationSystemEvents(e){this.senderConnection?.applyRemediation(e.content.data)}getConnectionType(){return this.connectionType}setConnectionType(e){this.connectionType=e,this.senderConnection?.setConnectionType(e),this.receiverConnection?.setConnectionType(e)}async collectStats(){await(this.senderConnection?.collectStats()),await(this.receiverConnection?.collectStats())}calculateArrayBufferSize(){return this.senderConnection?.calculateArrayBufferSize()??0}getBufferedAmount(){return this.senderConnection?.getBufferedAmount()??0}setupListeners(){this.listenerUnsubscribers.push(this.onMessage((e=>{(0,p.isReceiver)(e,this.getLocalId())&&e.topicLabel!==r.SYSTEM_TOPIC&&this.dataTopics.get(e.topicLabel)?.publish(e)}))),this.listenerUnsubscribers.push(this.onTrack(((e,t)=>{const s=(0,p.getTopicLabel)(n.ContentType.Media,t.id,this.remoteId);this.mediaTopics.get(s)?.publish({topicLabel:s,sourceId:this.remoteId,contentType:n.ContentType.Media,content:{action:a.MediaSubscriptionAction.RemoteAdd,track:e,stream:t,providerId:this.remoteId}})}))),this.listenerUnsubscribers.push(this.onRemoveTrack(((e,t)=>{const s=(0,p.getTopicLabel)(n.ContentType.Media,t.id,this.remoteId);this.mediaTopics.get(s)?.publish({topicLabel:s,sourceId:this.remoteId,contentType:n.ContentType.Media,content:{action:a.MediaSubscriptionAction.RemoteRemove,track:e,stream:t,providerId:this.remoteId}})})))}handleIceCandidates({candidates:e,origin:t,version:s}){return t===o.PeerConnectionOrigin.Sender?(this.receiverConnection||this.createReceiverConnection(),this.receiverConnection.handleHandshake(e,s)):this.senderConnection.handleHandshake(e,s)}async createOffer(){this.senderConnection||this.createSenderConnection(),await this.senderConnection.createOffer()}async handleOffer({offer:e,version:t}){this.receiverConnection||this.createReceiverConnection(),await this.receiverConnection.handleOffer(e,t)}async handleAnswer({answer:e,version:t}){if(!this.senderConnection)throw new i.SDKInternalError(i.SDKInternalError.codes.ConnectionNotinitialized,{message:"Sender connection is not initialized.",localId:this.getLocalId(),remoteId:this.remoteId,answer:e});await this.senderConnection.handleAnswer(e,t)}handleSuccess(){if(!this.receiverConnection)throw new i.SDKInternalError(i.SDKInternalError.codes.ConnectionNotinitialized,{message:"Receiver connection is not initialized.",localId:this.getLocalId(),remoteId:this.remoteId});this.receiverConnection.handleSuccess(),this.successNotified||this.connectionType!==o.PeerConnectionType.Optimization||(this.successNotified=!0,this.systemTopic?.publish({sourceId:this.remoteId,destinationIds:[this.getLocalId()],messageType:c.SystemMessageType.PeerConnection,content:{type:o.PeerConnectionMessageType.OptimizationConnectionSuccess}}))}handleNeedRestart(e){this.receiverConnection||this.createReceiverConnection(),this.receiverConnection.handleNeedRestart(e.version)}createSenderConnection(){this.senderConnection=new h.SenderPeerConnection(this.clusterId,this.localNode,this.remoteId,this.iceServers,this.connectionType,this.maxFps,this.maxBpp,this.connectionConstructor),this.senderConnection.registerSystemPublisher(this.systemTopic)}createReceiverConnection(){this.receiverConnection=new u.ReceiverPeerConnection(this.clusterId,this.localNode,this.remoteId,this.iceServers,this.connectionType,this.connectionConstructor),this.receiverConnection.registerSystemPublisher(this.systemTopic),this.receiverUnsubscribers.push(this.receiverConnection.onMessage((e=>this.messageListeners.publish(e)))),this.receiverUnsubscribers.push(this.receiverConnection.onTrack(((e,t)=>this.trackListeners.publish({track:e,stream:t})))),this.receiverUnsubscribers.push(this.receiverConnection.onRemoveTrack(((e,t)=>this.removeTrackListeners.publish({track:e,stream:t}))))}}},"./src/models/Connection/PeerConnectionGroup.ts":(e,t,s)=>{s.r(t),s.d(t,{PeerConnectionGroup:()=>S});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/Connection.ts"),i=s("./src/constants/System.ts"),o=s("./src/errors/EarlyReturnError.ts"),a=s("./src/errors/SDKInternalError.ts"),c=s("./src/interfaces/Connection/PeerConnection.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Subscription/Helpers.ts"),u=s("./src/utils/Interval/Interval.ts"),h=s("./src/utils/Logger/Logger.ts"),p=s("./src/utils/Logger/Helpers.ts"),g=s("./src/utils/Observer/Observer.ts"),b=s("./src/utils/Queue/Queue.ts"),m=s("./src/utils/Queue/VersionedRetryQueue.ts");class S{localId;messageBuffer;graphService;connections=new Map;messageListeners=(0,g.createObserver)();messageUnsubscriber;dataTopics=new Map;dataUnsubscribers=new Map;retryQueues=new Map;constructor(e,t,s){this.localId=e,this.messageBuffer=t,this.graphService=s,this.messageUnsubscriber=this.onMessage((e=>{this.messageBuffer.hasMessage(e.uuid)||((0,l.isReceiver)(e,this.localId)&&e.topicLabel!==i.SYSTEM_TOPIC&&(this.messageBuffer.addMessage(e.uuid),this.dataTopics.get(e.topicLabel)?.publish(e)),e.propagate&&this.send(e))}))}close(){this.messageUnsubscriber?.()}addConnection(e){const t=e.onMessage((e=>{this.messageListeners.publish(e)}));this.connections.set(e,t),this.retryQueues.set(e.getRemoteId(),(0,m.createVersionedRetryQueue)(new b.SyncQueueCallback((t=>e.send(t)),(()=>u.default.wait(r.CONNECTION_GROUP_RETRY_DELAY)))))}removeConnection(e){this.connections.get(e)?.(),this.connections.delete(e),this.retryQueues.get(e.getRemoteId())?.clear(),this.retryQueues.delete(e.getRemoteId())}isConnected(e){return h.default.log(d.LoggingChannels.ConnectionState,"ConnectionGroup",this.localId,this.connections.keys()),0!==this.connections.size&&(Array.from(this.connections.keys()).find((t=>t.getRemoteId()===e))?.isConnected()??!1)}registerPublisher(e){this.dataTopics.set(e.getLabel(),e)}unregisterPublisher(e){this.dataTopics.delete(e.getLabel())}registerSubscriber(e){const t=e.subscribe(this.send.bind(this));this.dataUnsubscribers.set(e.getLabel(),t)}unregisterSubscriber(e){this.dataUnsubscribers.get(e.getLabel())?.(),this.dataUnsubscribers.delete(e.getLabel())}getSupportedContentTypes(){return[n.ContentType.Data,n.ContentType.PubSub,n.ContentType.ObjectStore,n.ContentType.KeyValueDatabase,n.ContentType.Job,n.ContentType.VectorDatabase,n.ContentType.GraphDatabase]}send(e){if(!1===e.retry){if(e.propagate||!e.destinationIds||1!==e.destinationIds.length)throw new a.SDKInternalError(a.SDKInternalError.codes.ConnectionInvalidDataEvent,{message:"CrewdleConnectionGroup: Cannot broadcast with AppSync.",localId:this.localId});if(!this.isConnected(e.destinationIds[0]))throw new o.EarlyReturnError("Ignoring message - retry flag is false")}const t=e.recipients??[];try{const{filteredDestinationIds:s,extendedRecipients:n}=this.updatePropagationProperties(e,t);e.destinationIds=s,e.recipients=n}catch(t){if(t instanceof o.EarlyReturnError)return void h.default.log(d.LoggingChannels.Connection,"CrewdleConnectionGroup","Early return",e,t.message)}const s=this.shouldContinuePropagation(e);this.logPropagateSystemEvent(e,s),e.propagate=s;const n=this.getConnectionDestinations(e,t);for(const t of n){const s=this.retryQueues.get(t.getRemoteId());if(!s)throw new a.SDKInternalError(a.SDKInternalError.codes.ConnectionNoRetryQueue,{message:"CrewdleConnectionGroup: No retry queue available.",localId:this.localId,remoteId:t.getRemoteId(),data:e});s.push(e)}}getRemoteId(){return""}getLocalId(){return this.localId}onMessage(e){return this.messageListeners.subscribe(e)}updatePropagationProperties(e,t){const s={filteredDestinationIds:e.destinationIds,extendedRecipients:e.recipients};if(!e.propagate)return s;const n=Array.from(this.connections.keys()).filter((e=>e.getConnectionType()===c.PeerConnectionType.Core||e.isConnected())).map((e=>e.getRemoteId()));if(n.reduce(((t,s)=>t&&e.recipients.includes(s)),!0))throw new o.EarlyReturnError("All recipients already received");if(e.destinationIds){const t=e.destinationIds.filter((t=>t!==this.localId&&!e.recipients.includes(t)));if(0===t.length)throw new o.EarlyReturnError("No destinationIds left");s.filteredDestinationIds=t}return s.extendedRecipients=[...new Set([...t,...n,this.localId])],s}logPropagateSystemEvent(e,t=!1){if(e.topicLabel===i.SYSTEM_TOPIC&&!(0,l.isSender)(e,this.localId)&&e.propagate){const s=(0,p.getFormattedSytemLog)(e,this.localId);h.default.logRaw(d.LoggingChannels.System,`${e.uuid} - Sending propagation (${t}) ${s}`,e,t)}}shouldContinuePropagation(e){if(e.destinationIds&&e.propagate){const t=Array.from(this.connections.keys()).filter((e=>e.getConnectionType()===c.PeerConnectionType.Core||e.isConnected())).map((e=>e.getRemoteId()));return!e.destinationIds.reduce(((e,s)=>e&&t.includes(s)),!0)}return e.propagate??!1}getConnectionDestinations(e,t){if(e.propagate&&e.destinationIds){const t=Array.from(this.connections.keys()).filter((e=>e.getConnectionType()===c.PeerConnectionType.Core||e.isConnected())).map((e=>e.getRemoteId())),s=new Set,n=e.sourceId===this.localId?3:1;return e.destinationIds.forEach((e=>{const r=this.graphService.getClosestNodes(t,e);let i=0,o=0;r.forEach((e=>{if(i>=n)return;const t=Array.from(this.connections.keys()).find((t=>t.getRemoteId()===e));if(t){if(t.getConnectionType()===c.PeerConnectionType.Core&&o>0)return void(o-=1);s.add(t),t.getConnectionType()===c.PeerConnectionType.Optimization&&(o+=1),i+=1}}))})),Array.from(s)}return Array.from(this.connections.keys()).filter((s=>{return n=s.getRemoteId(),!t.includes(n)&&((0,l.isReceiver)(e,n)||e.propagate)&&(!e.propagate||s.isConnected()||s.getConnectionType()===c.PeerConnectionType.Core);var n}))}}},"./src/models/Connection/PeerConnectionPool.ts":(e,t,s)=>{s.r(t),s.d(t,{PeerConnectionPool:()=>d});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/System.ts"),i=s("./src/errors/EarlyReturnError.ts"),o=s("./src/interfaces/Utils/Logger.ts"),a=s("./src/models/Subscription/Helpers.ts"),c=s("./src/utils/Logger/Logger.ts");class d{localId;messageBuffer;connections=new Map;systemTopic;constructor(e,t){this.localId=e,this.messageBuffer=t}close(){}send(e){for(const t of this.connections.keys())try{return void t.send({retry:!1,...e})}catch(s){s instanceof i.EarlyReturnError||c.default.log(o.LoggingChannels.Pool,`send error on ${t}`,s,e)}c.default.log(o.LoggingChannels.Pool,"No connections available to send message")}addConnection(e){const t=e.onMessage((e=>{this.messageBuffer.hasMessage(e.uuid)||e.topicLabel===r.SYSTEM_TOPIC&&(this.messageBuffer.addMessage(e.uuid),(0,a.isReceiver)(e,this.localId)&&this.systemTopic?.publish(e))}));this.connections.set(e,t)}removeConnection(e){this.connections.get(e)?.(),this.connections.delete(e)}getLocalId(){return this.localId}getRemoteId(){return""}getSupportedContentTypes(){return[n.ContentType.Data]}isConnected(){throw new Error("Method not implemented.")}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}}},"./src/models/Connection/ReceiverPeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{ReceiverPeerConnection:()=>m});var n=s("uuid"),r=s("./src/constants/Content.ts"),i=s("./src/constants/System.ts"),o=s("./src/constants/PeerConnection.ts"),a=s("./src/interfaces/Connection/PeerConnection.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Connection/BasePeerConnection.ts"),u=s("./src/models/Stats/Helpers.ts"),h=s("./src/utils/Interval/Interval.ts"),p=s("./src/utils/Logger/Helpers.ts"),g=s("./src/utils/Logger/Logger.ts"),b=s("./src/utils/Observer/Observer.ts");class m extends l.BasePeerConnection{messageCallback=(0,b.createSingleObserver)();trackCallback=(0,b.createSingleObserver)();removeTrackCallback=(0,b.createSingleObserver)();receivers=new Map;chunks=new Map;waitSuccess;messagesReceived=0;systemMessagesReceived={messages:{total:0}};bytesReceived=0;timeReceiving=0;close(){this.clearWaitSuccess(),this.receivers.clear(),super.close()}async handleOffer(e,t){this.currentVersion=t,this.clearWaitSuccess();const s=await this.connection.createAnswer(e);this.processPendingHandshakeCandidates();const r=(0,n.v4)();this.publishSystemMessage({type:a.PeerConnectionMessageType.Answer,answer:s,version:t,connectionType:this.connectionType},r),this.connectionType===a.PeerConnectionType.Core&&(this.waitSuccess=h.default.setInterval((()=>{this.publishSystemMessage({type:a.PeerConnectionMessageType.Answer,answer:s,version:t,connectionType:this.connectionType},r)}),o.PEER_CONNECTION_MESSAGE_RETRY))}handleSuccess(){this.clearWaitSuccess()}handleNeedRestart(e){this.resetConnection(e),this.publishSystemMessage({type:a.PeerConnectionMessageType.Restart})}async collectStats(){this.systemTopic&&(await this.connection.collectReceiversStats(this.receivers,((e,t)=>{(0,u.sendStats)({type:a.PeerConnectionMessageType.Stats,streamId:t,nodeId:this.remoteId,stats:e},this.systemTopic)})),this.systemTopic.publish({sourceId:i.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.PeerConnection,content:{type:a.PeerConnectionMessageType.Stats,nodeId:this.remoteId,stats:{origin:a.PeerConnectionOrigin.Receiver,timestamp:Date.now(),messagesReceived:this.messagesReceived,bytesReceived:this.bytesReceived,timeReceiving:this.timeReceiving,systemMessages:this.systemMessagesReceived}}}))}onMessage(e){return this.messageCallback.subscribe(e)}onTrack(e){return this.trackCallback.subscribe((({track:t,stream:s})=>e(t,s)))}onRemoveTrack(e){return this.removeTrackCallback.subscribe((({track:t,stream:s})=>e(t,s)))}resetConnection(e){this.clearWaitSuccess(),this.receivers.forEach((e=>{e.clear()})),super.resetConnection(e)}sendIceCandidates(){this.publishSystemMessage({type:a.PeerConnectionMessageType.Handshake,candidates:this.handshakeCandidates,origin:a.PeerConnectionOrigin.Receiver,version:this.currentVersion,connectionType:this.connectionType})}setupConnectionEvents(){super.setupConnectionEvents(),this.connection.onTrack=e=>{g.default.log(d.LoggingChannels.Connection,"CrewdleReceiverConnection ontrack",this.localNode.getId(),e),e.streams[0].onremovetrack=t=>{this.receivers.get(e.streams[0].id)?.delete(t.track),0===this.receivers.get(e.streams[0].id)?.size&&this.receivers.delete(e.streams[0].id),this.removeTrackCallback.publish({track:t.track,stream:e.streams[0]})},this.receivers.has(e.streams[0].id)||this.receivers.set(e.streams[0].id,new Set),this.receivers.get(e.streams[0].id).add(e.track),this.trackCallback.publish({track:e.track,stream:e.streams[0]})},this.connection.onDataChannel=e=>{this.dataChannel=e.channel,this.dataChannel.onMessage=e=>{if(e.data!==o.PEER_CONNECTION_HEARTBEAT_PING)this.handleOnMessage(e.data);else{if(!this.dataChannel)return void g.default.error("missing-datachannel",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type,remoteId:this.remoteId,data:{connection:"receiver"}});if("open"!==this.dataChannel.state)return;this.dataChannel.send(o.PEER_CONNECTION_HEARTBEAT_PONG)}}}}handleOnMessage(e){if("string"==typeof e&&e.startsWith(o.PEER_CONNECTION_CHUNK_IDENTIFIER))return this.messagesReceived+=1,this.bytesReceived+=e.length,this.handleChunkMessage(e);setTimeout((()=>{const t=Date.now();let s;if((e instanceof ArrayBuffer||e.length<=o.PEER_CONNECTION_CHUNK_SIZE)&&(this.messagesReceived+=1,this.bytesReceived+=e instanceof ArrayBuffer?e.byteLength:e.length),e instanceof ArrayBuffer){const[t,n]=this.splitParts(e);s=t,s.content.data=n}else s=JSON.parse(e);if(s.topicLabel===i.SYSTEM_TOPIC){this.systemMessagesReceived.messages.total+=1;const{systemMessageType:e,systemContentMessageType:t}=(0,p.getLoggableSystemMessage)(s);this.systemMessagesReceived[e]||(this.systemMessagesReceived[e]={[t]:0}),this.systemMessagesReceived[e][t]||(this.systemMessagesReceived[e][t]=0),this.systemMessagesReceived[e].total||(this.systemMessagesReceived[e].total=0),this.systemMessagesReceived[e][t]+=1,this.systemMessagesReceived[e].total+=1}this.messageCallback.publish(s),this.timeReceiving+=Date.now()-t}),0)}handleChunkMessage(e){const t=e.split(";"),s=t[1],n=parseInt(t[2],10),r=parseInt(t[3],10),i=e.replace(`${o.PEER_CONNECTION_CHUNK_IDENTIFIER};${s};${n};${r};`,"");this.chunks.has(s)||this.chunks.set(s,[]);const a=this.chunks.get(s);a[n]=i,a.length===r&&(this.handleOnMessage(a.join("")),this.chunks.delete(s))}clearWaitSuccess(){this.waitSuccess?.(),delete this.waitSuccess}arrayBufferToObject(e){const t=(new TextDecoder).decode(e);return JSON.parse(t)}splitParts(e){const t=new Uint8Array(e.slice(0,r.CONTENT_FILE_HEADER_SIZE)),s=new Uint32Array(t.buffer)[0],n=new Uint8Array(e.slice(r.CONTENT_FILE_HEADER_SIZE,r.CONTENT_FILE_HEADER_SIZE+s)),i=new Uint8Array(e.slice(r.CONTENT_FILE_HEADER_SIZE+s));return[this.arrayBufferToObject(n.buffer),i.buffer]}}},"./src/models/Connection/SenderPeerConnection.ts":(e,t,s)=>{s.r(t),s.d(t,{SenderPeerConnection:()=>C});var n=s("uuid"),r=s("./src/constants/Content.ts"),i=s("./src/constants/Remediation.ts"),o=s("./src/constants/System.ts"),a=s("./src/constants/PeerConnection.ts"),c=s("./src/errors/SDKInternalError.ts"),d=s("./src/interfaces/Connection/PeerConnection.ts"),l=s("./src/interfaces/Remediation/Remediation.ts"),u=s("./src/interfaces/Subscription/SystemEvent.ts"),h=s("./src/interfaces/Utils/Logger.ts"),p=s("./src/interfaces/Utils/Queue.ts"),g=s("./src/models/Connection/BasePeerConnection.ts"),b=s("./src/models/Remediation/Helpers.ts"),m=s("./src/models/Stats/Helpers.ts"),S=s("./src/utils/Interval/Interval.ts"),y=s("./src/utils/Logger/Logger.ts"),T=s("./src/utils/Queue/PriorityRetryQueue.ts"),f=s("./src/utils/Queue/Queue.ts");class C extends g.BasePeerConnection{maxFps;maxBpp;senders=new Map;heartbeatUnsubscriber;waitAnswer;lastHeartbeat;isReconnecting=!1;connectionTimeout;restartTimeout;upgradeTimeout;retryQueue=(0,T.createPriorityRetryQueue)(new f.SyncQueueCallback(this.sendAction.bind(this),this.waitSendBuffer.bind(this)));messagesSent=0;bytesSent=0;timeSending=0;roundTripTime=0;oncloseTimeout;constructor(e,t,s,n,r,i,o,a){super(e,t,s,n,r,a),this.maxFps=i,this.maxBpp=o}close(){this.clearUpgradeTimeout(),this.clearHeartbeat(),delete this.lastHeartbeat,this.clearRestartTimeout(),this.clearConnectionTimeout(),this.clearWaitAnswer(),this.senders.clear(),this.isReconnecting=!1,this.retryQueue.queues.forEach((e=>e.clear())),this.clearOncloseTimeout(),super.close()}isConnected(){return!!this.lastHeartbeat&&super.isConnected()&&Date.now()-this.lastHeartbeat<a.PEER_CONNECTION_HEARTBEAT_THRESHOLD}async collectStats(){this.systemTopic&&(await this.connection.collectSendersStats(this.senders,((e,t)=>{(0,m.sendStats)({type:d.PeerConnectionMessageType.Stats,streamId:t,nodeId:this.remoteId,stats:e},this.systemTopic)})),this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.PeerConnection,content:{type:d.PeerConnectionMessageType.Stats,nodeId:this.remoteId,stats:{origin:d.PeerConnectionOrigin.Sender,timestamp:Date.now(),messagesSent:this.messagesSent,bytesSent:this.bytesSent,timeSending:this.timeSending,roundTripTime:this.roundTripTime}}}))}async createOffer(e){y.default.log(h.LoggingChannels.Connection,"CrewdleSenderConnection createOffer",this.localNode.getId(),this.remoteId),this.clearRestartTimeout(),this.clearConnectionTimeout(),this.clearWaitAnswer(),this.connectionTimeout=setTimeout((()=>{this.handleDisconnect()}),a.PEER_CONNECTION_TIMEOUT),this.dataChannel||(this.dataChannel=this.connection.createDataChannel("data"),this.dataChannel.bufferedAmountLowThreshold=a.PEER_CONNECTION_BUFFER_LOW_THRESHOLD,this.dataChannel.onClose=()=>{this.oncloseTimeout=setTimeout((()=>{delete this.oncloseTimeout,["connecting","open"].includes(this.dataChannel?.state??"")||this.handleDisconnect()}),a.PEER_CONNECTION_DATACHANNEL_DISCONNECT_HANDLER_DELAY)});const t=await this.connection.createOffer(e);this.lastHeartbeat||(this.lastHeartbeat=Date.now());const s=(0,n.v4)();this.publishSystemMessage({type:d.PeerConnectionMessageType.Offer,offer:t,version:this.currentVersion,connectionType:this.connectionType},s),this.connectionType===d.PeerConnectionType.Core&&(this.waitAnswer=S.default.setInterval((()=>{this.publishSystemMessage({type:d.PeerConnectionMessageType.Offer,offer:t,version:this.currentVersion,connectionType:this.connectionType},s)}),a.PEER_CONNECTION_MESSAGE_RETRY))}async handleAnswer(e,t){if(t===this.currentVersion){this.clearWaitAnswer();try{await this.connection.handleAnswer(e,this.createOffer.bind(this)),this.processPendingHandshakeCandidates(),this.clearConnectionTimeout(),this.startHeartbeat()}catch(e){this.handleDisconnect()}}}send(e){if(!this.dataChannel)throw new c.SDKInternalError(c.SDKInternalError.codes.InvalidDataChannel,{message:"DataChannel is not initialized.",localId:this.localNode.getId(),remoteId:this.remoteId,eventMessage:e});if("open"!==this.dataChannel.state)throw new c.SDKInternalError(c.SDKInternalError.codes.InvalidDataChannel,{message:"Data cluster is not open.",localId:this.localNode.getId(),remoteId:this.remoteId,eventMessage:e});let t;if(e.content.data instanceof ArrayBuffer){const s=e.content.data;e={...e,content:{...e.content,data:void 0}},t=this.mergeParts(e,s)}else t=JSON.stringify(e);if("string"==typeof t&&t.length>a.PEER_CONNECTION_CHUNK_SIZE)return this.sendChunked(e,t);const s=e.topicLabel===o.SYSTEM_TOPIC&&[u.SystemMessageType.Subscription,u.SystemMessageType.PeerConnection].includes(e.messageType)?p.QueueElementPriority.High:e instanceof ArrayBuffer?p.QueueElementPriority.Low:p.QueueElementPriority.Medium;this.sendWithRetry(t,s)}addTrack(e,t,s,n){const r=(0,b.getMaxBitrate)(this.maxFps,this.maxBpp),i=this.senders.get(t.id)||{stream:t,priority:s,resolutionScale:1,minResolutionScale:1,bitrate:r,maxBitrate:r,framerate:this.maxFps,maxFramerate:this.maxFps,tracks:{},params:n},o=i.tracks[e.kind]||{track:e};if(o.sender?(o.track=e,this.connection.replaceTrack(e,o.sender)):o.sender=this.connection.addTrack(e,t),i.tracks[e.kind]=o,n&&(i.params=n),n&&"video"===n.kind&&n.resolution&&n.maxResolution&&(i.resolutionScale=this.getResolutionScale(n.resolution,n.maxResolution),i.minResolutionScale=i.resolutionScale,i.tracks.video&&i.tracks.video.sender)){const e=i.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*i.resolutionScale)/10,i.framerate,i.bitrate,i.priority)}this.senders.set(t.id,i)}setPriority(e,t){const s=this.senders.get(e.id);if(s&&s.priority!==t&&(s.priority=t,s.tracks.video&&s.tracks.video.sender)){const e=s.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*s.resolutionScale)/10,s.framerate,s.bitrate,s.priority)}}setParams(e,t){const s=this.senders.get(e.id);if(s){if(s.params=t,t&&"video"===t.kind&&t.resolution&&t.maxResolution){if(s.minResolutionScale=this.getResolutionScale(t.resolution,t.maxResolution),s.resolutionScale<s.minResolutionScale&&(s.resolutionScale=s.minResolutionScale),s.tracks.video&&s.tracks.video.sender){const e=s.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*s.resolutionScale)/10,s.framerate,s.bitrate,s.priority)}this.clearUpgradeTimeout(),this.setUpgradeTimeout()}this.senders.set(e.id,s)}}removeTrack(e,t){const s=this.senders.get(t.id);if(s){const t=s.tracks[e.kind];t&&(t.sender&&this.connection.removeTrack(t.sender),t.track=void 0)}}applyRemediation(e){this.clearUpgradeTimeout();const t=(0,b.findSender)(Array.from(this.senders.values()),e);if(t&&((0,b.applyRemediation)(t,e),t.tracks.video&&t.tracks.video.sender)){const e=t.tracks.video.sender;this.connection.setEncodingParameters(e,Math.floor(10*t.resolutionScale)/10,t.framerate,t.bitrate,t.priority)}(t||e.action===l.RemediationAction.Downgrade)&&this.setUpgradeTimeout()}calculateArrayBufferSize(){return this.retryQueue.queues.reduce(((e,t)=>e+t.size),0)*r.CONTENT_FILE_CHUNK_SIZE}getBufferedAmount(){return this.dataChannel?.bufferedAmount??0}resetConnection(){super.resetConnection(),this.clearOncloseTimeout(),this.clearWaitAnswer(),this.senders.forEach((e=>{e.tracks.video&&(e.tracks.video.sender=void 0),e.tracks.audio&&(e.tracks.audio.sender=void 0)})),this.isReconnecting=!0}async waitSendBuffer(){return new Promise((async e=>{if(!this.dataChannel||"open"!==this.dataChannel.state)return await S.default.wait(a.PEER_CONNECTION_DATACHANNEL_RETRY_DELAY),void e();this.dataChannel.bufferedAmount<a.PEER_CONNECTION_BUFFER_LOW_THRESHOLD?e():this.dataChannel.onBufferedAmountLow=()=>{this.dataChannel&&(this.dataChannel.onBufferedAmountLow=null),e()}}))}sendChunked(e,t){const s=[];for(let e=0;e<t.length;e+=a.PEER_CONNECTION_CHUNK_SIZE)s.push(t.slice(e,e+a.PEER_CONNECTION_CHUNK_SIZE));for(const t of s)this.sendWithRetry(`${a.PEER_CONNECTION_CHUNK_IDENTIFIER};${e.uuid};${s.indexOf(t)};${s.length};${t}`,p.QueueElementPriority.Low)}async sendWithRetry(e,t){e===a.PEER_CONNECTION_HEARTBEAT_PING?this.retryQueue.queues[t].head?.value!==a.PEER_CONNECTION_HEARTBEAT_PING&&this.retryQueue.queues[t].unshift(e):this.retryQueue.queues[t].push(e)}sendAction(e){if(!this.dataChannel||"open"!==this.dataChannel.state)throw new Error("DataChannel is not open.");if(this.dataChannel.bufferedAmount>=a.PEER_CONNECTION_BUFFER_MAX_THRESHOLD)throw new Error("DataChannel buffer is full.");const t=Date.now();e!==a.PEER_CONNECTION_HEARTBEAT_PING&&(this.messagesSent+=1,this.bytesSent+=e instanceof ArrayBuffer?e.byteLength:e.length),ArrayBuffer,this.dataChannel.send(e),this.timeSending+=Date.now()-t}startHeartbeat(){this.heartbeatUnsubscriber&&this.clearHeartbeat();let e=!0,t=Date.now();this.lastHeartbeat=Date.now(),this.dataChannel.onMessage=s=>{s.data===a.PEER_CONNECTION_HEARTBEAT_PONG&&(this.roundTripTime=Date.now()-t,e&&this.publishSystemMessage({type:d.PeerConnectionMessageType.Success}),e=!1,this.lastHeartbeat=Date.now(),this.isReconnecting&&(this.isReconnecting=!1,this.handleMissingSenders()))},this.heartbeatUnsubscriber=S.default.setInterval((()=>{t=Date.now(),this.sendWithRetry(a.PEER_CONNECTION_HEARTBEAT_PING,p.QueueElementPriority.High),Date.now()-this.lastHeartbeat>(e&&6*a.PEER_CONNECTION_HEARTBEAT_THRESHOLD||a.PEER_CONNECTION_HEARTBEAT_THRESHOLD)&&this.handleDisconnect()}),a.PEER_CONNECTION_HEARTBEAT_INTERVAL)}handleMissingSenders(){this.senders.forEach((e=>{e.tracks.video&&e.tracks.video.track&&!e.tracks.video.sender&&(e.tracks.video.sender=this.connection.addTrack(e.tracks.video.track,e.stream)),e.tracks.audio&&e.tracks.audio.track&&!e.tracks.audio.sender&&(e.tracks.audio.sender=this.connection.addTrack(e.tracks.audio.track,e.stream))}))}sendIceCandidates(){this.publishSystemMessage({type:d.PeerConnectionMessageType.Handshake,candidates:this.handshakeCandidates,origin:d.PeerConnectionOrigin.Sender,version:this.currentVersion,connectionType:this.connectionType})}setupConnectionEvents(){super.setupConnectionEvents(),this.connection.onHandshakeStateChange=()=>{if("failed"===this.connection.handshakeState){y.default.log(h.LoggingChannels.ConnectionState,"iceConnectionState failed",this.localNode.getId(),this.remoteId);try{if(this.connection.canRestartHandshake)return void this.connection.restartHandshake()}catch(e){}this.createOffer({handshakeRestart:!0})}},this.connection.onConnectionStateChange=()=>{"disconnected"!==this.connection.connectionState&&"failed"!==this.connection.connectionState||this.handleDisconnect()}}handleDisconnect(){this.clearHeartbeat(),this.clearRestartTimeout(),this.clearConnectionTimeout(),y.default.warning("disconnect",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type,remoteId:this.remoteId,data:{connectionType:this.connectionType,connectionState:this.connection.connectionState,iceConnectionState:this.connection.handshakeState,signalingState:this.connection.signalingState,readyState:this.dataChannel?.state||"",lastHeartbeat:this.lastHeartbeat?Date.now()-this.lastHeartbeat:"",retryQueue:this.retryQueue}}),(this.lastHeartbeat&&Date.now()-this.lastHeartbeat>a.PEER_CONNECTION_HEARTBEAT_TIMEOUT)??1?this.systemTopic.publish({sourceId:this.remoteId,destinationIds:[this.localNode.getId()],messageType:u.SystemMessageType.PeerConnection,content:{type:d.PeerConnectionMessageType.Disconnect}}):(this.resetConnection(),this.publishSystemMessage({type:d.PeerConnectionMessageType.NeedRestart,version:this.currentVersion,connectionType:this.connectionType}),this.restartTimeout=setTimeout((()=>{this.handleDisconnect()}),a.PEER_CONNECTION_RECONNECT_TIMEOUT))}clearHeartbeat(){this.heartbeatUnsubscriber?.(),delete this.heartbeatUnsubscriber}clearConnectionTimeout(){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),delete this.connectionTimeout)}clearRestartTimeout(){this.restartTimeout&&(clearTimeout(this.restartTimeout),delete this.restartTimeout)}clearUpgradeTimeout(){this.upgradeTimeout&&(clearTimeout(this.upgradeTimeout),delete this.upgradeTimeout)}setUpgradeTimeout(){this.upgradeTimeout=setTimeout((()=>{this.applyRemediation({type:l.RemediationMessageType.Remediation,action:l.RemediationAction.Upgrade})}),i.REMEDIATION_UPGRADE_WAIT_TIME)}getResolutionScale(e,t){const s=Math.max(e.width/t.width,e.height/t.height);return Math.min(Math.max(s,1),i.REMEDIATION_MAX_RESOLUTION_SCALE)}clearWaitAnswer(){this.waitAnswer?.(),delete this.waitAnswer}clearOncloseTimeout(){this.oncloseTimeout&&(clearTimeout(this.oncloseTimeout),delete this.oncloseTimeout)}objectToArrayBuffer(e){const t=JSON.stringify(e);return(new TextEncoder).encode(t).buffer}mergeParts(e,t){const s=this.objectToArrayBuffer(e),n=new Uint8Array(r.CONTENT_FILE_HEADER_SIZE),i=new Uint8Array(s),o=new Uint8Array(t);n.set(new Uint8Array(new Uint32Array([i.length]).buffer));const a=new Uint8Array(r.CONTENT_FILE_HEADER_SIZE+i.length+o.length);return a.set(n),a.set(i,r.CONTENT_FILE_HEADER_SIZE),a.set(o,r.CONTENT_FILE_HEADER_SIZE+i.length),a.buffer}}},"./src/models/Content/BaseDataStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseDataStream:()=>d});var n=s("@crewdle/web-sdk-types"),r=s("./src/errors/SDKInternalError.ts"),i=s("./src/interfaces/Utils/Logger.ts"),o=s("./src/models/Content/BaseStream.ts"),a=s("./src/utils/Logger/Logger.ts"),c=s("./src/utils/ObjectStore/Helpers.ts");class d extends o.BaseStream{outgoingTopic;incomingTopic;fileChunks=new Map;messagesSent=0;messagesReceived=0;bytesSent=0;bytesReceived=0;constructor(e,t){super(e,t)}getLabel(){return this.label}getName(){return this.label}getContentType(){return n.ContentType.Data}getInternalStreamId(){return this.label}registerPublisher(e){if(this.outgoingTopic)throw new r.SDKInternalError(r.SDKInternalError.codes.InvalidPublisher,{message:`Publisher already registered on PubSubTopic ${this.owner.getId()} - ${this.label}`,topic:this.outgoingTopic});this.outgoingTopic=e}registerSubscriber(e){if(this.incomingTopic)throw new r.SDKInternalError(r.SDKInternalError.codes.InvalidSubscriber,{message:`Subscriber already registered on PubSubTopic ${this.owner.getId()} - ${this.label}`,topic:this.incomingTopic});this.incomingTopic=e}unregisterPublisher(){delete this.outgoingTopic}unregisterSubscriber(){delete this.incomingTopic}async send(e,t){if(a.default.log(i.LoggingChannels.DataStream,"DataStream send",this.owner.getId(),e,t),this.messagesSent+=1,e instanceof File){const s=await(0,c.readFileContent)(e);return this.bytesSent+=s.reduce(((e,t)=>e+t.byteLength),0),void s.forEach(((r,i)=>{this.outgoingTopic.publish({sourceId:this.owner.getId(),destinationIds:t,propagate:!0,contentType:n.ContentType.File,content:{name:e.name,type:e.type,data:r,index:i,total:s.length}})}))}this.bytesSent+=JSON.stringify(e).length,this.outgoingTopic.publish({sourceId:this.owner.getId(),destinationIds:t,propagate:!0,contentType:n.ContentType.Data,content:e})}onMessage(e){return this.incomingTopic.subscribe((t=>{switch(a.default.log(i.LoggingChannels.DataStream,"DataStream onMessage",this.owner.getId(),t),t.contentType){case n.ContentType.Data:this.messagesReceived+=1,this.bytesReceived+=JSON.stringify(t.content).length,e(t.sourceId,t.content);break;case n.ContentType.File:this.fileChunks.has(t.content.name)||this.fileChunks.set(t.content.name,{chunksReceived:0,bytesReceived:0,checksum:"",content:[]});const s=this.fileChunks.get(t.content.name);if(s.chunksReceived+=1,s.bytesReceived+=t.content.data.byteLength,s.content&&(s.content[t.content.index]=t.content.data),this.fileChunks.set(t.content.name,s),s.chunksReceived+1<t.content.total)return;this.messagesReceived+=1,this.bytesReceived+=s.bytesReceived,s.content&&e(t.sourceId,(0,c.getFileContent)(s.content,t.content.name,t.content.type)),this.fileChunks.delete(t.content.name)}}))}}},"./src/models/Content/BaseLocalMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseLocalMediaStream:()=>u});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/System.ts"),i=s("./src/interfaces/Content/Content.ts"),o=s("./src/interfaces/Subscription/SystemEvent.ts"),a=s("./src/interfaces/Utils/Logger.ts"),c=s("./src/models/Content/BaseMediaStream.ts"),d=s("./src/models/Content/OutgoingMediaStream.ts"),l=s("./src/utils/Logger/Logger.ts");class u extends c.BaseMediaStream{clusterId;priority=n.MediaStreamPriority.Default;trackEndedListeners=new Map;outgoingStreams=new Map;constructor(e,t,s,n){super(e,t,s instanceof MediaStream?s:s.srcObject?s.srcObject:s.captureStream()),this.clusterId=n,this.mediaStream.getTracks().forEach((e=>this.setupTrackEndedListeners(e))),l.default.logServiceEvent(a.LoggingServices.MediaStream,{type:"publish",label:this.label,nodeId:this.owner.getId(),nodeType:this.owner.type,clusterId:this.clusterId,streamId:this.getInternalStreamId(),trackKinds:this.mediaStream.getTracks().map((e=>e.kind))})}destroy(){this.outgoingStreams.size>0&&(this.outgoingStreams.forEach((e=>{e.unregisterSystemPublisher(),e.destroy()})),this.outgoingStreams.clear()),this.trackEndedListeners.forEach((e=>e())),super.destroy()}publish(e){this.systemTopic.publish({sourceId:this.owner.getId(),destinationIds:e?[e]:void 0,propagate:!0,messageType:o.SystemMessageType.Content,content:{type:i.ContentMessageType.PublishMediaStream,ownerId:this.owner.getId(),label:this.label,stream:{streamId:this.getInternalStreamId(),availableTrackKinds:this.mediaStream.getTracks().map((e=>e.kind))}}})}unpublish(){this.systemTopic.publish({sourceId:this.owner.getId(),propagate:!0,messageType:o.SystemMessageType.Content,content:{type:i.ContentMessageType.UnpublishMediaStream,ownerId:this.owner.getId(),label:this.label}}),this.systemTopic.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:o.SystemMessageType.Content,content:{type:i.ContentMessageType.CloseMediaStream,label:this.label}}),l.default.logServiceEvent(a.LoggingServices.MediaStream,{type:"unpublish",label:this.label,nodeId:this.owner.getId(),nodeType:this.owner.type,clusterId:this.clusterId,streamId:this.getInternalStreamId()})}getPriority(){return this.priority}setPriority(e){this.priority=e,this.outgoingStreams.forEach((t=>t.setPriority(e)))}getShareableStream(e,t){if(!this.outgoingStreams.has(e)){const s=new d.OutgoingMediaStream(this.owner,this.label,this.mediaStream,e,t),n=s.onUnregisterPublisher((()=>{n(),this.outgoingStreams.get(e)?.destroy(),this.outgoingStreams.delete(e)}));this.outgoingStreams.set(e,s),s.registerSystemPublisher(this.systemTopic)}return this.outgoingStreams.get(e)}getShareableStreamId(){return this.mediaStream.id}handleLocalTrackFailure(e){this.systemTopic.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:o.SystemMessageType.Content,content:{type:i.ContentMessageType.LocalMediaStreamTrackFail,label:this.label,trackKinds:[e.kind]}})}setupTrackEndedListeners(e){const t=()=>this.handleLocalTrackFailure(e);e.addEventListener("ended",t),e.addEventListener("mute",t),this.trackEndedListeners.set(e.kind,(()=>{e.removeEventListener("ended",t),e.removeEventListener("mute",t),this.trackEndedListeners.delete(e.kind)}))}}},"./src/models/Content/BaseMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseMediaStream:()=>i});var n=s("@crewdle/web-sdk-types"),r=s("./src/models/Content/BaseStream.ts");class i extends r.BaseStream{mediaStream;constructor(e,t,s){super(e,t),this.mediaStream=s}getContentType(){return n.ContentType.Media}getMediaStream(){return this.mediaStream}getInternalStreamId(){return this.mediaStream.id}}},"./src/models/Content/BaseStream.ts":(e,t,s)=>{s.r(t),s.d(t,{BaseStream:()=>n});class n{owner;label;systemTopic;constructor(e,t){this.owner=e,this.label=t}getLabel(){return this.label}getOwnerId(){return this.owner.getId()}destroy(){}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}}},"./src/models/Content/ContentManager.ts":(e,t,s)=>{s.r(t),s.d(t,{ContentManager:()=>w});var n=s("./src/public/errors/SDKClientError.ts"),r=s("./src/errors/SDKInternalError.ts"),i=s("./src/interfaces/Content/Content.ts"),o=s("./src/interfaces/Node/NodeMessage.ts"),a=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),c=s("./src/interfaces/Utils/Logger.ts"),d=s("./src/models/Content/GenerativeAIContext.ts"),l=s("./src/models/Content/GenerativeAIWorker.ts"),u=s("./src/models/Content/GraphDatabase.ts"),h=s("./src/models/Content/JobDispatcher.ts"),p=s("./src/models/Content/JobWorker.ts"),g=s("./src/models/Content/KeyValueDatabase.ts"),b=s("./src/models/Content/LocalDynamicMediaStream.ts"),m=s("./src/models/Content/LocalMediaStream.ts"),S=s("./src/models/Content/ObjectStore.ts"),y=s("./src/models/Content/PubSubTopic.ts"),T=s("./src/models/Content/RemoteMediaStream.ts"),f=s("./src/models/Content/VectorDatabase.ts"),C=s("./src/models/Node/User.ts"),I=s("./src/services/Transaction/FirebaseRDBTransactionService.ts"),E=s("./src/services/JobQueue/JobQueueService.ts"),v=s("./src/utils/Logger/Logger.ts");class w{configs;options;searchApiKey;localMediaStreams=new Map;remoteMediaStreams=new Map;pubSubTopics=new Map;objectStores=new Map;keyValueDatabases=new Map;vectorDatabases=new Map;graphDatabases=new Map;jobDispatchers=new Map;jobWorkers=new Map;transactionService;constructor(e,t,s){this.configs=e,this.options=t,this.searchApiKey=s,this.transactionService=new I.FirebaseRDBTransactionService(this.configs.vendorId,this.configs.clusterId)}close(e=!1){this.remoteMediaStreams.forEach(((e,t)=>{e.forEach(((e,s)=>{this.removeRemoteMediaStream(t,s)}))})),e||(E.default.clear(),this.localMediaStreams.forEach(((e,t)=>{this.removeLocalMediaStream(t)})),this.pubSubTopics.forEach(((e,t)=>{this.removePubSubTopic(t)})),this.objectStores.forEach(((e,t)=>{this.removeObjectStore(t)})),this.keyValueDatabases.forEach(((e,t)=>{this.removeKeyValueDatabase(t)})),this.jobDispatchers.forEach(((e,t)=>{this.removeJobDispatcher(t)})),this.jobWorkers.forEach(((e,t)=>{this.removeJobWorker(t)})),this.vectorDatabases.forEach(((e,t)=>{this.removeVectorDatabase(t)})),this.graphDatabases.forEach(((e,t)=>{this.removeGraphDatabase(t)})))}createObjectStoreBucket(e,t){if(this.objectStores.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.ObjectStoreAlreadyExists,"Store already exists");const s=new S.ObjectStore(this.configs.localNode,e,this.configs.clusterId,this.configs.vendorId,this.transactionService,t,(()=>this.configs.mediator.waitForArrayBufferSize()));return this.objectStores.set(e,s),this.configs.mediator.registerSystemSource(s),s}async createKeyValueDatabase(e,t,s){if(this.keyValueDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseAlreadyExists,"Database already exists");try{const n=new g.KeyValueDatabase(this.configs.localNode,e,this.configs.clusterId,this.configs.vendorId,t,s);return this.keyValueDatabases.set(e,n),this.configs.mediator.registerSystemSource(n),n}catch(t){if(t instanceof n.SDKClientError)throw t;throw new r.SDKInternalError(r.SDKInternalError.codes.KeyValueDatabaseCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}async createJobDispatcher(e,t){if(this.jobDispatchers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.JobDispatcherAlreadyExists,"Job Dispatcher already exists");try{const s=new h.JobDispatcher(this.configs.localNode,e,t);return this.jobDispatchers.set(e,s),this.configs.mediator.registerSystemSource(s),s}catch(t){if(t instanceof n.SDKClientError)throw t;throw new r.SDKInternalError(r.SDKInternalError.codes.JobDispatcherCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}async createJobWorker(e,t,s){if(this.jobWorkers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.JobWorkerAlreadyExists,"Job Worker already exists");try{const n=new p.JobWorker(this.configs.localNode,e,t,[s]);return this.jobWorkers.set(e,n),this.configs.mediator.registerSystemSource(n),n}catch(t){if(t instanceof n.SDKClientError)throw t;throw new r.SDKInternalError(r.SDKInternalError.codes.JobWorkerCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}async createGenerativeAIContext(e,t){if(this.jobDispatchers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.GenerativeAIContextAlreadyExists,"AI Service already exists");if(this.jobWorkers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.GenerativeAILabelConflict,"Label already in use by AI Service");try{const s=new d.GenerativeAIContext(this.configs.localNode,e,this.configs.vendorId,t);return this.jobDispatchers.set(e,s),this.configs.mediator.registerSystemSource(s),s}catch(t){if(t instanceof n.SDKClientError)throw t;throw new r.SDKInternalError(r.SDKInternalError.codes.GenerativeAIContextCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}async createGenerativeAIWorker(e,t,s,i,o,a){if(this.jobWorkers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.GenerativeAIWorkerAlreadyExists,"AI Worker already exists");if(this.jobDispatchers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.GenerativeAILabelConflict,"Label already in use by AI Service");try{const n=new l.GenerativeAIWorker(this.configs.localNode,e,this.configs.vendorId,t,this,s,i,o,this.searchApiKey,a);return this.jobWorkers.set(e,n),this.configs.mediator.registerSystemSource(n),n}catch(t){if(t instanceof n.SDKClientError)throw t;throw new r.SDKInternalError(r.SDKInternalError.codes.GenerativeAIWorkerCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}createGraphDatabase(e,t){if(this.graphDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.GraphDatabaseAlreadyExists,"Database already exists");try{const s=new u.GraphDatabase(this.configs.localNode,e,this.configs.clusterId,t);return this.graphDatabases.set(e,s),this.configs.mediator.registerSystemSource(s),s}catch(t){if(t instanceof n.SDKClientError)throw t;throw new r.SDKInternalError(r.SDKInternalError.codes.GraphDatabaseCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}createLocalDynamicMediaStream(e,t){if(this.localMediaStreams.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.LocalMediaStreamAlreadyExists,"Local MediaStream already exists");if(!this.options.audioContext)throw new n.SDKClientError(n.SDKClientErrorCodes.LocalMediaStreamNoAudioContext,"AudioContext is not available");const s=new b.LocalDynamicMediaStream(this.configs.localNode,e,t,this.options.maxFps,this.options.audioContext,this.configs.clusterId);return this.localMediaStreams.set(e,s),this.configs.mediator.registerSystemSource(s),s.publish(),s}createLocalMediaStream(e,t){if(this.localMediaStreams.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.LocalMediaStreamAlreadyExists,"Stream already exists");const s=new m.LocalMediaStream(this.configs.localNode,e,t,this.configs.clusterId);return this.localMediaStreams.set(e,s),this.configs.mediator.registerSystemSource(s),s.publish(),s}createPubSubTopic(e){if(this.pubSubTopics.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.PubSubTopicAlreadyExists,"PubSub already exists");const t=new y.PubSubTopic(this.configs.localNode,e,this.configs.clusterId);return this.pubSubTopics.set(e,t),this.configs.mediator.registerSystemSource(t),t}createRemoteMediaStream(e,t,s,r){this.remoteMediaStreams.has(e)||this.remoteMediaStreams.set(e,new Map);const i=this.remoteMediaStreams.get(e);if(i.has(t))throw new n.SDKClientError(n.SDKClientErrorCodes.RemoteMediaStreamAlreadyExists,"Remote MediaStream already exists");const o=new C.User(e,"",""),a=new T.RemoteMediaStream(this.configs.localNode,o,t,s,r,this.configs.clusterId);return i.set(t,a),this.configs.mediator.registerSystemSource(a),a}createVectorDatabase(e,t){if(this.vectorDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.VectorDatabaseAlreadyExists,"Database already exists");try{const s=new f.VectorDatabase(this.configs.localNode,e,this.configs.clusterId,t);return this.vectorDatabases.set(e,s),this.configs.mediator.registerSystemSource(s),s}catch(t){if(t instanceof n.SDKClientError)throw t;throw new r.SDKInternalError(r.SDKInternalError.codes.VectorDatabaseCreationFailed,{label:e,clusterId:this.configs.clusterId,vendorId:this.configs.vendorId})}}getObjectStoreBuckets(e){const t=Array.from(this.objectStores.values());return e?t.filter(e):t}getKeyValueDatabases(e){const t=Array.from(this.keyValueDatabases.values());return e?t.filter(e):t}getJobDispatchers(e){const t=Array.from(this.jobDispatchers.values());return e?t.filter(e):t}getJobWorkers(e){const t=Array.from(this.jobWorkers.values());return e?t.filter(e):t}getGenerativeAIContexts(e){const t=Array.from(this.jobDispatchers.values()).filter((e=>e instanceof d.GenerativeAIContext));return e?t.filter(e):t}getGenerativeAIWorkers(e){const t=Array.from(this.jobWorkers.values()).filter((e=>e instanceof l.GenerativeAIWorker));return e?t.filter(e):t}getGraphDatabases(e){const t=Array.from(this.graphDatabases.values());return e?t.filter(e):t}getLocalMediaStreams(e){const t=Array.from(this.localMediaStreams.values());return e?t.filter(e):t}getPubSubTopics(e){const t=Array.from(this.pubSubTopics.values());return e?t.filter(e):t}getRemoteMediaStreams(e){const t=Array.from(this.remoteMediaStreams.values()).reduce(((e,t)=>[...e,...Array.from(t.values())]),[]);return e?t.filter(e):t}getVectorDatabases(e){const t=Array.from(this.vectorDatabases.values());return e?t.filter(e):t}getObjectStoreBucket(e){const t=this.objectStores.get(e);if(!t)throw new n.SDKClientError(n.SDKClientErrorCodes.ObjectStoreDoesNotExist,"ObjectStore not found");return t}getGraphDatabase(e){const t=this.graphDatabases.get(e);if(!t)throw new n.SDKClientError(n.SDKClientErrorCodes.GraphDatabaseDoesNotExist,"GraphDatabase not found");return t}getKeyValueDatabase(e){const t=this.keyValueDatabases.get(e);if(!t)throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseDoesNotExist,"KeyValueDatabase not found");return t}getPubSubTopic(e){const t=this.pubSubTopics.get(e);if(!t)throw new n.SDKClientError(n.SDKClientErrorCodes.PubSubTopicDoesNotExist,"PubSubTopic not found");return t}getVectorDatabase(e){const t=this.vectorDatabases.get(e);if(!t)throw new n.SDKClientError(n.SDKClientErrorCodes.VectorDatabaseDoesNotExist,"VectorDatabase not found");return t}handleContentSystemEvents(e){switch(e.content.type){case i.ContentMessageType.PublishMediaStream:this.handlePublishMediaStream(e.content);break;case i.ContentMessageType.UnpublishMediaStream:this.handleUnpublishMediaStream(e.content);break;case i.ContentMessageType.CloseJobDispatcher:this.removeJobDispatcher(e.content.label);break;case i.ContentMessageType.CloseJobWorker:this.removeJobWorker(e.content.label);break;case i.ContentMessageType.CloseMediaStream:this.removeLocalMediaStream(e.content.label);break;case i.ContentMessageType.ClosePubSubTopic:this.removePubSubTopic(e.content.label);break;case i.ContentMessageType.CloseObjectStoreBucket:this.removeObjectStore(e.content.label);break;case i.ContentMessageType.CloseKeyValueDatabase:this.removeKeyValueDatabase(e.content.label);break;case i.ContentMessageType.CloseVectorDatabase:this.removeVectorDatabase(e.content.label);break;case i.ContentMessageType.CloseGraphDatabase:this.removeGraphDatabase(e.content.label);break;case i.ContentMessageType.UnsubscribeMediaStream:this.handleContentUnsubscribeMediaStream(e.content);break;case i.ContentMessageType.RequestSyncKeyValueDatabase:this.keyValueDatabases.get(e.content.label)?.sendTransactionsDump(e.sourceId);break;case i.ContentMessageType.SendTransactionsDump:this.keyValueDatabases.get(e.content.label)?.processTransactionsDump(e.sourceId,e.content.transactions);break;case i.ContentMessageType.RequestTransactionsValue:this.keyValueDatabases.get(e.content.label)?.sendTransactionsValue(e.sourceId,e.content.transactionIds);break;case i.ContentMessageType.LocalMediaStreamTrackFail:this.configs.mediator.notifyCluster("local-media-stream-track-fail",{label:e.content.label,trackKinds:e.content.trackKinds})}}handleNodeSystemEvents({content:e}){switch(e.type){case o.NodeMessageType.NodeJoin:this.handleNodeJoinNeedPublishedStream(e),this.notifyObjectStoreOfNodeJoin(e);break;case o.NodeMessageType.NodeLeave:this.handleNodeLeave(e),this.notifyObjectStoreOfNodeLeave(e)}}handleSubscriptionSystemEvents(e){switch(e.content.type){case a.SubscriptionMessageType.SubscribeMediaStream:this.handleSubscribeMediaStream(e.sourceId,e.content);break;case a.SubscriptionMessageType.UpdateMediaStream:this.handleUpdateMediaStream(e.sourceId,e.content);break;case a.SubscriptionMessageType.UnsubscribeMediaStream:this.handleUnsubscribeMediaStream(e.sourceId,e.content)}}handleContentUnsubscribeMediaStream(e){if(0===e.remainingTracks)this.remoteMediaStreams.get(e.ownerId)?.get(e.label)?.destroy();else{const t=this.remoteMediaStreams.get(e.ownerId)?.get(e.label);if(!t)return;e.trackKinds.forEach((e=>t.unsubscribeTrackEndedListener(e)))}}handlePublishMediaStream(e){const{label:t,ownerId:s,stream:{streamId:n,availableTrackKinds:r}}=e;if(this.remoteMediaStreams.get(s)?.has(t))return void v.default.log(c.LoggingChannels.Content,"Stream already exists",n);const i=this.createRemoteMediaStream(s,t,n,r);this.configs.mediator.notifyCluster("content-publish-media",{ownerId:s,stream:i})}handleUnpublishMediaStream({ownerId:e,label:t}){this.removeRemoteMediaStream(e,t),this.configs.mediator.notifyCluster("content-unpublish-media",{ownerId:e,label:t})}handleSubscribeMediaStream(e,t){const{ownerId:s,label:n}=t;let r;r=s!==this.configs.localNode.getId()?this.remoteMediaStreams.get(s).get(n):this.localMediaStreams.get(n),r.getShareableStream(e,t.params).subscribe(t,r.getPriority())}handleUpdateMediaStream(e,t){const{ownerId:s,label:n}=t;let r;r=s!==this.configs.localNode.getId()?this.remoteMediaStreams.get(s).get(n):this.localMediaStreams.get(n),r.getShareableStream(e,t.params).update(t)}handleUnsubscribeMediaStream(e,t){const{ownerId:s,label:n}=t;let r;r=s!==this.configs.localNode.getId()?this.remoteMediaStreams.get(s).get(n):this.localMediaStreams.get(n),r.getShareableStream(e).unsubscribe(t)}handleNodeJoinNeedPublishedStream({id:e}){this.getLocalMediaStreams().forEach((t=>{t.publish(e)}))}handleNodeLeave({id:e}){this.getRemoteMediaStreams((t=>t.getOwnerId()===e)).forEach((e=>{this.removeRemoteMediaStream(e.getOwnerId(),e.getLabel())}))}notifyObjectStoreOfNodeJoin({id:e}){this.objectStores.forEach((t=>t.handleNodeJoin(e)))}notifyObjectStoreOfNodeLeave({id:e}){this.objectStores.forEach((t=>t.handleNodeLeave(e)))}removeJobDispatcher(e){if(!this.jobDispatchers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.JobDispatcherDoesNotExist,"Job Dispatcher does not exist");const t=this.jobDispatchers.get(e);this.jobDispatchers.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeJobWorker(e){if(!this.jobWorkers.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.JobWorkerDoesNotExist,"Job Worker does not exist");const t=this.jobWorkers.get(e);this.jobWorkers.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeObjectStore(e){if(!this.objectStores.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.ObjectStoreDoesNotExist,"Stream does not exist");const t=this.objectStores.get(e);this.objectStores.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removePubSubTopic(e){if(!this.pubSubTopics.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.PubSubTopicDoesNotExist,"Stream does not exist");const t=this.pubSubTopics.get(e);this.pubSubTopics.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeKeyValueDatabase(e){if(!this.keyValueDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseDoesNotExist,"Database does not exist");const t=this.keyValueDatabases.get(e);this.keyValueDatabases.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeVectorDatabase(e){if(!this.vectorDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.VectorDatabaseDoesNotExist,"Database does not exist");const t=this.vectorDatabases.get(e);this.vectorDatabases.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeGraphDatabase(e){if(!this.graphDatabases.has(e))throw new n.SDKClientError(n.SDKClientErrorCodes.GraphDatabaseDoesNotExist,"Database does not exist");const t=this.graphDatabases.get(e);this.graphDatabases.delete(e),t.destroy(),this.configs.mediator.unregisterSystemSource(t)}removeLocalMediaStream(e){if(!this.localMediaStreams.has(e))throw new r.SDKInternalError(r.SDKInternalError.codes.LocalMediaStreamDoesNotExist,{label:e,localId:this.configs.localNode.getId()});const t=this.localMediaStreams.get(e);this.configs.mediator.unregisterSystemSource(t),t.destroy(),this.localMediaStreams.delete(e)}removeRemoteMediaStream(e,t){if(!this.remoteMediaStreams.has(e))throw new r.SDKInternalError(r.SDKInternalError.codes.NodeDoesNotExist,{nodeId:e,localId:this.configs.localNode.getId()});const s=this.remoteMediaStreams.get(e);if(!s.has(t))throw new r.SDKInternalError(r.SDKInternalError.codes.RemoteMediaStreamDoesNotExist,{nodeId:e,label:t,localId:this.configs.localNode.getId()});const n=s.get(t);this.configs.mediator.unregisterSystemSource(n),n.destroy(),s.delete(t)}}},"./src/models/Content/GenerativeAIContext.ts":(e,t,s)=>{s.r(t),s.d(t,{GenerativeAIContext:()=>g});var n=s("uuid"),r=s("@crewdle/web-sdk-types"),i=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/errors/SDKInternalError.ts"),c=s("./src/interfaces/Content/Content.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/models/Content/JobDispatcher.ts"),h=s("./src/utils/Logger/Logger.ts"),p=s("./src/services/Workflow/WorkflowService.ts");class g extends u.JobDispatcher{localNode;vendorId;prompts=0;tokens=0;debounceStats;constructor(e,t,s,n){super(e,t,n),this.localNode=e,this.vendorId=s,this.sendStats()}destroy(){this.debounceStats&&(clearTimeout(this.debounceStats),delete this.debounceStats),super.destroy()}reset(){this.prompts=0,this.tokens=0,this.sendStats(),super.reset()}async prompt(e,t){const s=await this.getJobObservable(e,r.JobType.Job,t);return new Promise(((t,n)=>{let o;const c=s.subscribe({next:s=>{switch(s.status){case r.JobStatus.Completed:const i=s.result.inputTokens??0;this.logServiceEvent(e,i),clearTimeout(o),t(s.result),c.unsubscribe(),this.prompts+=1,this.tokens+=i,this.sendStats();break;case r.JobStatus.Failed:clearTimeout(o),n(new a.SDKInternalError(a.SDKInternalError.codes.GenerativeAIContextJobFailed,{updatedJob:s})),c.unsubscribe(),this.sendStats()}},error:e=>{clearTimeout(o),n(new a.SDKInternalError(a.SDKInternalError.codes.GenerativeAIContextJobFailed,{err:e})),c.unsubscribe()}});o=setTimeout((()=>{n(new a.SDKInternalError(a.SDKInternalError.codes.GenerativeAIContextJobTimeout)),c.unsubscribe()}),i.CONTENT_GENERATIVE_AI_CONTEXT_ANSWER_TIMEOUT)}))}async*stream(e,t){const s=await this.getJobObservable(e,r.JobType.JobStream,t);let n,o,c=!1,d=0;const l=[],u=new Map;let p=null;const g=()=>{p&&(p(),p=null)},b=e=>{c=!0,g(),m.unsubscribe(),o=e},m=s.subscribe({next:t=>{switch(t.status){case r.JobStatus.Partial:if(t.result&&void 0!==t.result.output){if(void 0===t.result.index)return void b(a.SDKInternalError.codes.GenerativeAIContextInvalidPartialResult);d===t.result.index?(l.push(t.result),d++,(()=>{for(;u.has(d);)l.push(u.get(l.length)),u.delete(l.length),d++})(),g(),y()):u.set(t.result.index,t.result)}break;case r.JobStatus.Completed:const s=t.result.inputTokens??0;this.logServiceEvent(e,s),clearTimeout(n),b(),this.prompts+=1,this.tokens+=s,this.sendStats();break;case r.JobStatus.Failed:clearTimeout(n),b(a.SDKInternalError.codes.GenerativeAIContextJobFailed),this.sendStats()}},error:e=>{clearTimeout(n),b(a.SDKInternalError.codes.GenerativeAIContextJobFailed)}}),S=()=>{b(a.SDKInternalError.codes.GenerativeAIContextJobTimeout)},y=()=>{clearTimeout(n),n=setTimeout(S,i.CONTENT_GENERATIVE_AI_CONTEXT_ANSWER_TIMEOUT)};for(n=setTimeout(S,i.CONTENT_GENERATIVE_AI_CONTEXT_ANSWER_TIMEOUT);!c||l.length>0;)l.length>0?yield l.shift():await new Promise((e=>p=e));if(o)throw h.default.error("GenerativeAIContext stream error",{nodeId:this.localNode.getId(),nodeType:this.localNode.type}),new a.SDKInternalError(o)}async getDataBucketIds(){return(await p.default.getWorkflow(this.vendorId,this.label)).dataBucketIds}logServiceEvent(e,t){const s=this.label,n=this.getOwnerId();h.default.logServiceEvent(l.LoggingServices.GenerativeAIContext,{topic:s,prompt:e,type:"prompt",nodeId:n,tokenCount:t})}async getJobObservable(e,t,s={}){const i={id:`job-${(0,n.v4)()}`,jobType:t,parameters:{prompt:e,...s},status:r.JobStatus.Pending};return await this.createJob(i)}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{delete this.debounceStats,this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:c.ContentMessageType.GenerativeAIContextStats,label:this.label,stats:{timestamp:Date.now(),storage:0,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:0,reads:0,prompts:this.prompts,tokens:this.tokens}}})}),i.CONTENT_GENERATIVE_AI_CONTEXT_STATS_DEBOUNCE)}}},"./src/models/Content/GenerativeAIWorker.ts":(e,t,s)=>{s.r(t),s.d(t,{GenerativeAIWorker:()=>m});var n=s("uuid"),r=s("@crewdle/web-sdk-types"),i=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Services/Workflow.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/models/Content/JobWorker.ts"),h=s("./src/services/Workflow/WorkflowService.ts"),p=s("./src/utils/GenerativeAI/Ingest.ts"),g=s("./src/utils/GenerativeAI/Workflow.ts"),b=s("./src/utils/Logger/Logger.ts");class m extends u.JobWorker{localNode;vendorId;contentMediator;generativeAIWorkerConnectors;documentParserConnector;nlpLibraryConnector;searchApiKey;searchConnector;workflow;modelStore;dataStores=new Map;models=new Map;debounceStats;prompts=0;tokens=0;isOpened=!1;constructor(e,t,s,n,r,i,o,a,c,d){super(e,t,n,i),this.localNode=e,this.vendorId=s,this.contentMediator=r,this.generativeAIWorkerConnectors=i,this.documentParserConnector=o,this.nlpLibraryConnector=a,this.searchApiKey=c,this.searchConnector=d}async destroy(){for(const e of this.generativeAIWorkerConnectors)await e.close();this.modelStore?.unsubscribe(this.label),this.dataStores.forEach((e=>e.unsubscribe(this.label))),this.debounceStats&&(clearTimeout(this.debounceStats),delete this.debounceStats),super.destroy()}async open(e=!1){if(this.isOpened)super.open();else{if(this.workflow=await h.default.getWorkflow(this.vendorId,this.label),this.modelStore=this.contentMediator.getObjectStoreBucket(this.workflow.modelsBucketId),!this.modelStore)throw new Error("Model store not initialized");e||await this.waitForSyncComplete(this.modelStore);for(const e of this.workflow.models)try{let t;e.engineType===r.GenerativeAIEngineType.Llamacpp&&(t=await this.getModel(`/${e.id}${i.CONTENT_GENERATIVE_AI_MODEL_EXTENSION}`)),this.models.set(e.id,{id:e.id,engineType:e.engineType,taskType:e.taskType,inputType:e.inputType,outputType:e.outputType,sourceUrl:e.sourceUrl,pathName:t})}catch(t){await this.modelStore.publish({action:r.PayloadAction.File,file:new File([""],`${e.id}${i.CONTENT_GENERATIVE_AI_MODEL_EXTENSION}`),path:"/",options:{skipEncryption:!0,fetchUrl:e.sourceUrl}}),this.models.set(e.id,{id:e.id,engineType:e.engineType,taskType:e.taskType,inputType:e.inputType,outputType:e.outputType,sourceUrl:e.sourceUrl,pathName:await this.getModel(`/${e.id}${i.CONTENT_GENERATIVE_AI_MODEL_EXTENSION}`)})}for(const e of this.generativeAIWorkerConnectors)await e.initialize(this.label,this.models);for(const e of this.workflow.dataBucketIds)this.dataStores.set(e,this.contentMediator.getObjectStoreBucket(e));await this.loadExistingContent(e),this.subscribeToContent(),this.sendStats(),this.isOpened=!0,super.open()}}reset(){this.prompts=0,this.tokens=0,this.sendStats(),super.reset()}getBid(){return this.sendStats(),this.getCoresFromCapacityReport()}compileStats(e,t,s){const{outputTokens:n=0,output:r=""}=e,i=n/((s-t)/1e3);this.prompts+=1,this.tokens+=n,this.logServiceEvent(r,i,n),this.sendStats()}accumulateResult(e,t){return e.output=e.output??"",{output:"string"==typeof e.output&&"string"==typeof t.output?e.output+t.output:t.output,outputTokens:t.outputTokens??e.outputTokens,inputTokens:t.inputTokens??e.inputTokens}}async internalProcessJob(e){if(!this.workflow)throw new Error("Workflow not initialized");const t=this.workflow.blocks.find((e=>e.type===c.WorkflowBlockType.Prompt));return await(0,g.processWorkflow)(e,t,this.workflow.blocks,{documentParserConnector:this.documentParserConnector,nlpLibraryConnector:this.nlpLibraryConnector,generativeAIWorkerConnectors:this.generativeAIWorkerConnectors,models:this.workflow.models,contentMediator:this.contentMediator,searchApiKey:this.searchApiKey,searchConnector:this.searchConnector})}async*internalProcessJobStream(e){if(!this.workflow)throw new Error("Workflow not initialized");const t=this.workflow.blocks.find((e=>e.type===c.WorkflowBlockType.Prompt));for await(const s of(0,g.streamWorkflow)(e,t,this.workflow.blocks,{documentParserConnector:this.documentParserConnector,nlpLibraryConnector:this.nlpLibraryConnector,generativeAIWorkerConnectors:this.generativeAIWorkerConnectors,models:this.workflow.models,contentMediator:this.contentMediator,searchApiKey:this.searchApiKey,searchConnector:this.searchConnector}))yield s}async waitForSyncComplete(e){await new Promise((t=>{e.subscribe(this.label,(async s=>{s.event===r.StorageEventType.SyncComplete&&(e.unsubscribe(this.label),t())}))}))}async getModel(e){if(!this.modelStore)throw new Error("Model store not initialized");const t=await this.modelStore.list("/",{recursive:!1,includeSyncingFiles:!1});for(const s of t)if(s.kind===r.ObjectKind.File&&s.pathName===e)return s.absolutePathName??s.pathName;throw new Error("Model not found: "+e)}async loadExistingContent(e){for(const t of this.dataStores.values())try{e||await this.waitForSyncComplete(t);const s=await t.list("/",{recursive:!0,includeSyncingFiles:!1});await this.syncFolder(t.getName(),s)}catch(e){b.default.error("Error loading existing content",{nodeId:this.localNode.getId(),nodeType:this.localNode.type})}}async syncFolder(e,t){for(const s of t){if(s.kind===r.ObjectKind.Folder){if(!s.entries||0===s.entries.length)continue;await this.syncFolder(e,s.entries)}s.kind===r.ObjectKind.File&&await this.addContent(e,s.pathName)}}subscribeToContent(){for(const e of this.dataStores.values())e.subscribe(this.label,(async t=>{switch(t.event){case r.StorageEventType.FileWrite:await this.addContent(e.getName(),t.payload.file.pathName);break;case r.StorageEventType.FileDelete:this.removeContent(e.getName(),t.payload.name)}}))}async addContent(e,t){if(!this.workflow)throw new Error("Workflow not initialized");const s=this.workflow.blocks.filter((e=>e.type===c.WorkflowBlockType.DataCollection)).filter((t=>t.ingestBlocks.some((t=>t.type===c.DataCollectionBlockType.ObjectStorageUpload&&t.id===e))));for(const r of s){const s=r.ingestBlocks.find((t=>t.type===c.DataCollectionBlockType.ObjectStorageUpload&&t.id===e));if(!s)continue;const i=(0,n.v4)();await(0,p.processIngest)(i,t,s,r.ingestBlocks,{documentParserConnector:this.documentParserConnector,nlpLibraryConnector:this.nlpLibraryConnector,generativeAIWorkerConnectors:this.generativeAIWorkerConnectors,models:this.workflow.models,contentMediator:this.contentMediator,searchApiKey:this.searchApiKey})}this.sendStats()}removeContent(e,t){if(!this.workflow)throw new Error("Workflow not initialized");const s=this.workflow.blocks.filter((e=>e.type===c.WorkflowBlockType.DataCollection)).find((t=>t.ingestBlocks.some((t=>t.id===e))));for(const e of s?.ingestBlocks??[])e.type===c.DataCollectionBlockType.VectorDatabase&&this.contentMediator.getVectorDatabase(e.id).remove(t);this.sendStats()}getCoresFromCapacityReport(){try{return this.capacityReporter.getCapacityReport().gpu.cores*(1-this.capacityReporter.getCapacityReport().gpu.load)}catch(e){return b.default.log(l.LoggingChannels.Jobs,"JobWorker: Error getting cores from capacity report",e),0}}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{if(delete this.debounceStats,!this.modelStore)return;let e=await this.modelStore.getSize();for(const t of this.dataStores.values())e+=await t.getSize();this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.GenerativeAIWorkerStats,label:this.label,stats:{timestamp:Date.now(),storage:e,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:0,reads:0,prompts:this.prompts,tokens:this.tokens}}})}),i.CONTENT_GENERATIVE_AI_WORKER_STATS_DEBOUNCE)}logServiceEvent(e,t,s){const n=this.label,r=this.getOwnerId();b.default.logServiceEvent(l.LoggingServices.GenerativeAIContext,{topic:n,type:"answer",nodeId:r,output:e,tokenCount:s,tokensPerSecond:t})}}},"./src/models/Content/GraphDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{GraphDatabase:()=>h});var n=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Content/BaseDataStream.ts"),u=s("./src/utils/Logger/Logger.ts");class h extends l.BaseDataStream{localNode;clusterId;db;debounceStats;writes=0;reads=0;constructor(e,t,s,n){if("string"!=typeof t)throw new r.SDKClientError(r.SDKClientErrorCodes.GraphDatabaseNameNotString,"Cannot create Graph Database: Name must be a string");super(e,t),this.localNode=e,this.clusterId=s,this.db=new n,this.sendStats()}destroy(){clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.CloseGraphDatabase,label:this.label}})}getContentType(){return n.ContentType.GraphDatabase}reset(){this.sendStats()}addNode(e,t,s,n){this.db.addNode(e,t,s,n),this.writes+=1,this.sendStats()}addEdge(e,t){this.db.addEdge(e,t),this.writes+=1,this.sendStats()}getContent(e,t,s){const n=this.db.getContent(e,t,s);return this.reads+=1,u.default.logServiceEvent(d.LoggingServices.GraphDatabase,{type:"get-content",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,size:0}),this.sendStats(),n}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{delete this.debounceStats;const e=this.db.getSize();this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.GraphDatabaseStats,label:this.label,stats:{timestamp:Date.now(),storage:e,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:this.writes,reads:this.reads,prompts:0,tokens:0}}}),u.default.logStorage(d.LoggingServices.GraphDatabase,`ccc${this.clusterId}ccc${this.label}`,e)}),i.CONTENT_GRAPH_DATABASE_STATS_DEBOUNCE)}}},"./src/models/Content/JobDispatcher.ts":(e,t,s)=>{s.r(t),s.d(t,{JobDispatcher:()=>b});var n=s("rxjs"),r=s("@crewdle/web-sdk-types"),i=s("./src/public/errors/SDKClientError.ts"),o=s("./src/constants/Content.ts"),a=s("./src/constants/System.ts"),c=s("./src/errors/SDKInternalError.ts"),d=s("./src/interfaces/Content/Content.ts"),l=s("./src/interfaces/Content/DataContent.ts"),u=s("./src/interfaces/Subscription/SystemEvent.ts"),h=s("./src/interfaces/Utils/Logger.ts"),p=s("./src/models/Content/BaseDataStream.ts"),g=s("./src/utils/Logger/Logger.ts");class b extends p.BaseDataStream{graphService;jobs=new Map;jobObservers=new Map;jobBids=new Map;unsubscribeHandler;constructor(e,t,s){super(e,t),this.graphService=s}getContentType(){return r.ContentType.Job}open(){this.unsubscribeHandler=this.onMessage(((e,t)=>{if(g.default.log(h.LoggingChannels.Jobs,"JobDispatcher: Received job",e,t,this.graphService.getRemoteNodes()),!(t instanceof File)){if(!t)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherInvalidPayload);return this.isBidResponse(t)?this.addBidResponse(e,t.id,t):this.isPartialResultResponse(t)?(g.default.log(h.LoggingChannels.Jobs,`Job ${t.id} received partial result:`,t.result),void this.evaluatePartialJob(t.id,t)):this.isResultResponse(t)?(g.default.log(h.LoggingChannels.Jobs,`Job ${t.id} received result:`,t.result),void this.evaluateProccessedJob(t.id,t)):void(this.isFailedResponse(t)&&this.failJob(t.id,t.message))}}))}reset(){this.clear(),this.open()}destroy(){this.clear(),super.destroy()}clear(){this.jobs.clear(),this.unsubscribeHandler&&this.unsubscribeHandler()}close(){this.systemTopic?.publish({sourceId:a.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Content,content:{type:d.ContentMessageType.CloseJobDispatcher,label:this.label}})}async createJob(e){const{id:t,parameters:s,jobType:a}=e,c={id:t,jobType:a,parameters:s,status:r.JobStatus.Pending,created:new Date,updated:new Date};if(this.jobs.has(c.id))throw new i.SDKClientError(i.SDKClientErrorCodes.JobDispatcherJobExists,`Job with id ${c.id} already exists.`);c.created=new Date,c.updated=new Date;const d=new n.Subject;this.jobs.set(c.id,c),this.jobObservers.set(c.id,d);try{const e={id:c.id,jobPhase:l.InternalJobPhase.Request,jobType:c.jobType},t=o.CONTENT_JOB_SERVICE_MAX_RETRIES;let s=0;const n=async()=>{s+=1;try{g.default.log(h.LoggingChannels.Jobs,`Job ${c.id} sending attempt ${s}.`,this.graphService.getRemoteNodes()),await this.send(e),c.updated=new Date,this.jobs.set(c.id,c),this.startBidResponseHandling(c.id)}catch(e){s<t?(g.default.warning(`Attempt ${s} to send dispatcherJob ${c.id} failed. Retrying...`,{nodeId:this.owner.getId(),nodeType:this.owner.type,data:{job:c,attempts:s,maxRetries:t}}),setTimeout(n,o.CONTENT_JOB_SERVICE_FAILED_RETRY_DELAY)):(c.status=r.JobStatus.Failed,c.updated=new Date,this.jobs.set(c.id,c),g.default.error(`Failed to send job ${c.id} after ${t} attempts:`,{nodeId:this.owner.getId(),nodeType:this.owner.type,data:{job:c,attempts:s,maxRetries:t,error:e}}))}};n();const{id:i}=c;this.logEvent(`Job ${c.id} created and dispatched.`,{jobId:i}),c.updated=new Date}catch(e){c.status=r.JobStatus.Failed,g.default.error(`Failed to send job ${c.id}:`,{nodeId:this.owner.getId(),nodeType:this.owner.type,data:{job:c,error:e}})}return d.asObservable()}getJob(e){const t=this.jobs.get(e);if(!t)throw new i.SDKClientError(i.SDKClientErrorCodes.JobDispatcherJobNotFound,`Job with id ${e} not found.`);return{id:t.id,jobType:t.jobType,status:t.status,parameters:t.parameters}}getJobs(){return Array.from(this.jobs.values()).map((e=>this.getJob(e.id)))}async updateJob(e,t){const s=this.jobs.get(e);if(!s)throw new i.SDKClientError(i.SDKClientErrorCodes.JobDispatcherJobNotFound,`Job with id ${e} not found.`);s.parameters=t,s.updated=new Date,this.jobs.set(e,s)}async deleteJob(e){if(!this.jobs.delete(e))throw new i.SDKClientError(i.SDKClientErrorCodes.JobDispatcherJobNotFound,`Job with id ${e} not found.`);const t=this.jobObservers.get(e);if(!t)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherObserverNotFound);t.complete(),this.jobObservers.delete(e),g.default.log(h.LoggingChannels.Jobs,`Job ${e} deleted.`)}addBidResponse(e,t,s){const n=this.jobBids.get(t)??new Map;n.set(e,[s,Date.now()]),this.jobBids.set(t,n),this.evaluateBidsAndAttributeJob(t)}startBidResponseHandling(e){const t=this.jobs.get(e);if(!t)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherJobNotFound);const s=setTimeout((()=>this.evaluateBidsAndAttributeJob(e,!0)),o.CONTENT_JOB_SERVICE_MAX_ANSWER_TIMEOUT);t.responseTimeout=s,this.jobs.set(t.id,t)}evaluateBidsAndAttributeJob(e,t=!1){const s=this.graphService.getRemoteNodes(),n=Array.from(s.values()).filter((e=>e.type===r.NodeType.Agent)),i=this.jobBids.get(e)??new Map;if(!t&&(!i||i.size<n.length))return;const o=this.jobs.get(e);if(!o)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherJobNotFound);if(clearTimeout(o.responseTimeout),g.default.log(h.LoggingChannels.Jobs,`Job ${o.id} received responses:`,i,this.jobBids),!i||0===i.size){o.status=r.JobStatus.Failed,o.updated=new Date,g.default.error(`Job ${o.id} failed to receive a valid bid responses in time.`,{nodeId:this.owner.getId(),nodeType:this.owner.type,data:{job:o,responses:i}});const t=this.jobObservers.get(e);if(!t)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherObserverNotFound);const s="No valid bid responses received in time.",n={id:o.id,status:o.status,message:s};return t.next(n),t.complete(),this.jobs.set(o.id,o),void this.jobBids.delete(e)}const{nodeId:a,response:d}=this.evaluateBids(o.id,i);o.status=r.JobStatus.Processing,o.updated=new Date,g.default.log(h.LoggingChannels.Jobs,`Job ${o.id} attributed to ${a} with response:`,d);const u={id:o.id,jobType:o.jobType,jobPhase:l.InternalJobPhase.Attribution,parameters:o.parameters};this.send(u,[a]),this.jobs.set(o.id,o),this.jobBids.delete(e)}evaluateBids(e,t){let s;const n=Array.from(t.entries()).filter((([,[e]])=>e.available));if(s=n.length>0?Array.from(t.entries()).sort(((e,t)=>t[1][0].bid-e[1][0].bid)):Array.from(t.entries()).sort(((e,t)=>e[1][0].queueLength-t[1][0].queueLength)),1===s.length)return{nodeId:s[0][0],response:s[0][1][0]};let r;if(r=n.length>0?(e=>{const t=e[0][1][0].bid;return e.filter((([,[e]])=>e.bid===t))})(s):(e=>{const t=e[0][1][0].queueLength;return e.filter((([,[e]])=>e.queueLength===t))})(s),1===r.length)return{nodeId:r[0][0],response:r[0][1][0]};const i=this.jobs.get(e);if(!i)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherJobNotFound);const o=i.created.getTime(),a=r.map((([e,[,t]])=>({nodeId:e,rtt:t-o}))),d=Math.min(...a.map((({rtt:e})=>e))),l=a.find((({rtt:e})=>e===d)),[,[u]]=r.find((([e])=>e===l.nodeId));return{nodeId:l.nodeId,response:u}}evaluatePartialJob(e,t){const s=this.jobs.get(e);if(!s)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherJobNotFound);const n=this.jobObservers.get(e);if(!n)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherObserverNotFound);const i={id:s.id,status:r.JobStatus.Partial,result:t.result};n.next(i)}evaluateProccessedJob(e,t){const s=this.jobs.get(e);if(!s)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherJobNotFound);const n=this.jobObservers.get(e);if(!n)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherObserverNotFound);s.status=r.JobStatus.Completed;const i={id:s.id,status:s.status,result:t.result};n.next(i),n.complete(),this.jobObservers.delete(e),this.logEvent(`Job ${e} finalized.`,{jobId:e})}failJob(e,t){const s=this.jobs.get(e);if(!s)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherJobNotFound);const n=this.jobObservers.get(e);if(!n)throw new c.SDKInternalError(c.SDKInternalError.codes.JobDispatcherObserverNotFound);s.status=r.JobStatus.Failed;const i={id:s.id,status:s.status,message:t};n.next(i),n.complete(),this.jobObservers.delete(e),this.logEvent(`Job ${e} failed.`,{jobId:e})}logEvent(e,{jobId:t}){const s={jobId:t,mistletIds:Array.from(this.graphService.getRemoteNodes().values()).filter((e=>e.type===r.NodeType.Agent)).map((e=>e.getId()))};g.default.logEvent(e,{nodeId:this.getOwnerId(),nodeType:this.owner.type,data:s}),g.default.log(h.LoggingChannels.Jobs,e,s)}isBidResponse(e){const{jobPhase:t,available:s,bid:n}=e;return t===l.InternalJobPhase.Bid&&void 0!==s&&void 0!==n}isPartialResultResponse(e){const{jobPhase:t,result:s}=e;return t===l.InternalJobPhase.PartialResult&&void 0!==s}isResultResponse(e){const{jobPhase:t,result:s}=e;return t===l.InternalJobPhase.Result&&void 0!==s}isFailedResponse(e){const{jobPhase:t,message:s}=e;return t===l.InternalJobPhase.Failed&&void 0!==s&&"string"==typeof s}}},"./src/models/Content/JobWorker.ts":(e,t,s)=>{s.r(t),s.d(t,{JobWorker:()=>h});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/System.ts"),i=s("./src/interfaces/Content/Content.ts"),o=s("./src/interfaces/Content/DataContent.ts"),a=s("./src/interfaces/Subscription/SystemEvent.ts"),c=s("./src/interfaces/Utils/Logger.ts"),d=s("./src/models/Content/BaseDataStream.ts"),l=s("./src/services/JobQueue/JobQueueService.ts"),u=s("./src/utils/Logger/Logger.ts");class h extends d.BaseDataStream{capacityReporter;jobWorkerConnectors;unsubscribeListener;constructor(e,t,s,n){super(e,t),this.capacityReporter=s,this.jobWorkerConnectors=n}getContentType(){return n.ContentType.Job}open(){this.subscribeToJobs()}close(){this.systemTopic?.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:a.SystemMessageType.Content,content:{type:i.ContentMessageType.CloseJobWorker,label:this.label}})}reset(){this.unsubscribeListener?.(),delete this.unsubscribeListener,this.open()}destroy(){l.default.clear(this.label),this.unsubscribeListener?.(),delete this.unsubscribeListener,super.destroy()}isAvailable(){return l.default.isAvailable()}getBid(){return 1}compileStats(e,t,s){}accumulateResult(e,t){return e}internalProcessJob(e){return this.jobWorkerConnectors[0].processJob(e,{})}internalProcessJobStream(e){return this.jobWorkerConnectors[0].processJobStream(e,{})}subscribeToJobs(){this.unsubscribeListener||(this.unsubscribeListener=this.onMessage(((e,t)=>{u.default.log(c.LoggingChannels.Jobs,"JobWorker: Received job",t),t instanceof File||(this.isJobRequest(t)?(u.default.log(c.LoggingChannels.Jobs,"JobWorker: Received job request",t),this.isAvailable()?this.sendBid(t.id,t.jobType,e):this.sendReject(t.id,t.jobType,e)):this.isJobAttribution(t)&&(u.default.log(c.LoggingChannels.Jobs,"JobWorker: Received job attribution",t),l.default.add(this.label,(()=>this.handleJobAttribution(t.id,t,e)))))})))}sendBid(e,t,s){const n={id:e,jobType:t,jobPhase:o.InternalJobPhase.Bid,available:!0,queueLength:l.default.length,bid:this.getBid()};u.default.log(c.LoggingChannels.Jobs,"JobWorker: Sending job bid",n),this.send(n,[s])}sendReject(e,t,s){const n={id:e,jobType:t,jobPhase:o.InternalJobPhase.Bid,available:!1,queueLength:l.default.length,bid:0};u.default.log(c.LoggingChannels.Jobs,"JobWorker: Sending job reject",n),this.send(n,[s])}async handleJobAttribution(e,t,s){u.default.log(c.LoggingChannels.Jobs,"JobWorker: Handling job attribution",t);const r={id:e,jobType:t.jobType,parameters:t.parameters};try{switch(t.jobType){case n.JobType.Job:await this.processJob(e,t,r,s);break;case n.JobType.JobStream:await this.processJobStream(e,t,r,s);break;default:throw new Error("Unsupported job type")}}catch(n){u.default.error("JobWorker: Error processing job",{nodeId:this.owner.getId(),nodeType:this.owner.type,data:{job:r}},n);const i=n instanceof Error?n.message:"An error occurred",a={id:e,jobType:t.jobType,jobPhase:o.InternalJobPhase.Failed,message:i};await this.send(a,[s])}}async processJob(e,t,s,n){const r=Date.now(),i=await this.internalProcessJob(s.parameters);this.compileStats(i,r,Date.now());const a={id:e,jobType:t.jobType,jobPhase:o.InternalJobPhase.Result,result:i};u.default.log(c.LoggingChannels.Jobs,"JobWorker: Sending job result",a),await this.send(a,[n])}async processJobStream(e,t,s,n){const r=Date.now();let i=0,a={};for await(const r of this.internalProcessJobStream(s.parameters)){const s={id:e,jobType:t.jobType,jobPhase:o.InternalJobPhase.PartialResult,result:{...r,index:i}};u.default.log(c.LoggingChannels.Jobs,"JobWorker: Sending job partial result",s),this.send(s,[n]),a=this.accumulateResult(a,r),i++}this.compileStats(a,r,Date.now());const d={id:e,jobType:t.jobType,jobPhase:o.InternalJobPhase.Result,result:a};u.default.log(c.LoggingChannels.Jobs,"JobWorker: Sending job result",d),await this.send(d,[n])}isJobRequest(e){return e.jobPhase===o.InternalJobPhase.Request}isJobAttribution(e){return e.jobPhase===o.InternalJobPhase.Attribution}}},"./src/models/Content/KeyValueDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{KeyValueDatabase:()=>T});var n=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts"),o=s("./src/public/models/Content/KeyValueDatabaseLayoutBuilder.ts"),a=s("./src/constants/Content.ts"),c=s("./src/constants/System.ts"),d=s("./src/errors/SDKInternalError.ts"),l=s("./src/interfaces/Content/Content.ts"),u=s("./src/interfaces/Content/DataContent.ts"),h=s("./src/interfaces/Subscription/SystemEvent.ts"),p=s("./src/interfaces/Utils/Logger.ts"),g=s("./src/models/Content/BaseDataStream.ts"),b=s("./src/models/Content/KeyValueDatabaseTable.ts"),m=s("./src/services/Firebase/FirebaseService.ts"),S=s("./src/utils/Observer/Observer.ts"),y=s("./src/utils/Logger/Logger.ts");class T extends g.BaseDataStream{localNode;clusterId;vendorId;db;dbKey;tables=new Map;tableObserver;transactionTable;tableUnsubscriber;isSync;syncResolve;transactionsToSync=[];timeoutCallback=()=>{};syncTimeout;eventListener=(0,S.createSingleObserver)();listenerUnsubscriber;syncTransactionsWritten=[];layout;debounceStats;writes=0;reads=0;constructor(e,t,s,n,i,a){if("string"!=typeof t)throw new r.SDKClientError(r.SDKClientErrorCodes.KeyValueDatabaseNameNotString,"Cannot create Key-Value Database: Name must be a string");if(super(e,t),this.localNode=e,this.clusterId=s,this.vendorId=n,this.dbKey=`ccc${this.vendorId}ccc${this.clusterId}ccc${this.label}`,this.tableObserver=(0,S.createSingleObserver)(),this.isSync=new Promise((e=>{this.syncResolve=e})),i instanceof o.LayoutBuilder)this.layout=i.getLayout();else{const[e,t]=o.LayoutBuilder.validateLayout(i);if(!e)throw new r.SDKClientError(r.SDKClientErrorCodes.KeyValueDatabaseInvalidLayout,`Invalid layout: ${t}`);this.layout=i}this.addReservedTables(this.layout),this.db=new a(this.dbKey,this.layout),this.sendStats()}reset(){this.sendStats()}getContentType(){return n.ContentType.KeyValueDatabase}destroy(){this.db.close(),this.tableUnsubscriber?.(),clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic.publish({sourceId:c.SYSTEM_TOPIC_INTERNAL,messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.CloseKeyValueDatabase,label:this.label}})}getTable(e){const t=this.tables.get(e);if(t)return t;try{if(!this.db.hasTable(e))throw new r.SDKClientError(r.SDKClientErrorCodes.KeyValueDatabaseTableNotFound,"Table not found");const t=new b.DatabaseTable(this.db.getTableConnector(e),e,this.tableObserver);return this.tables.set(e,t),{get:t.get.bind(t),set:t.set.bind(t),add:t.add.bind(t),delete:t.delete.bind(t),clear:t.clear.bind(t),list:t.list.bind(t),count:t.count.bind(t),subscribe:t.subscribe.bind(t),unsubscribe:t.unsubscribe.bind(t)}}catch(e){throw new r.SDKClientError(r.SDKClientErrorCodes.KeyValueDatabaseNotOpen,"Database not open")}}subscribe(e){this.listenerUnsubscriber=this.eventListener.subscribe(e)}unsubscribe(){this.listenerUnsubscriber?.(),this.listenerUnsubscriber=void 0}async open(){const e=[a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME,a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME],t=[];try{await this.db.open();const s=this.db.getTableConnector(a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME),n=await s.list(),{id:r,layout:i}=n[0]??{};if(i){for(const s in i)e.includes(s)||this.db.hasTable(s)||t.push(s);s.set(r,{layout:this.layout})}else s.add({layout:this.layout})}catch(e){throw new r.SDKClientError(r.SDKClientErrorCodes.KeyValueDatabaseNotOpen,e.message||"Error encountered while opening database")}this.instantiateTransactionTable(),this.setOnMessageHandler(),this.setOnTableWriteHandler(),t.forEach((e=>this.deleteTransactionsForTable(e)))}async sync(e,t){e?(this.timeoutCallback=t,this.syncTimeout=setTimeout(t,a.CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT),this.systemTopic.publish({sourceId:this.localNode.getId(),destinationIds:[e],messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.RequestSyncKeyValueDatabase,label:this.label}}),await this.isSync):setTimeout((()=>{this.clearSyncTimeout(),this.publishSyncCompleted()}),0)}async sendTransactionsDump(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);await this.isSync;const t=await this.transactionTable.list();this.systemTopic.publish({sourceId:this.localNode.getId(),destinationIds:[e],messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.SendTransactionsDump,label:this.label,transactions:t}})}async processTransactionsDump(e,t){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);this.clearSyncTimeout();const s=await this.transactionTable.list();for(const e of s){const s=t.find((t=>t.id===e.id));if(s&&this.compareTransactions(e,s)<=0)continue;const[n,r]=e.id.split("::"),i=this.tables.get(n),o=await(i?.get(r));e.value=o,this.send(e)}for(const e of t){const t=await this.transactionTable.get(e.id);if(!(t&&this.compareTransactions(e,t)<=0))if(e.action===u.InternalDatabaseTableWriteAction.Delete){const[t,s]=e.id.split("::"),n=this.tables.get(t);await(n?.delete(s,!1))}else this.transactionsToSync.push(e.id)}if(0===this.transactionsToSync.length)return this.clearSyncTimeout(),void this.publishSyncCompleted();this.syncTimeout=setTimeout(this.timeoutCallback,a.CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT),this.systemTopic.publish({sourceId:this.localNode.getId(),destinationIds:[e],messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.RequestTransactionsValue,label:this.label,transactionIds:this.transactionsToSync}})}async sendTransactionsValue(e,t){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);for(const s of t){const t=await this.transactionTable.get(s);if(!t)continue;const[n,r]=s.split("::"),i=this.tables.get(n),o=await(i?.get(r));t.value=o,this.send(t,[e])}}async writeTransaction(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);const t=await this.transactionTable.get(e.id);if(t&&this.compareTransactions(e,t)<=0)return;const s={...e};return delete s.value,await this.transactionTable.set(e.id,s),e}compareTransactions(e,t){return e.timestamp<t.timestamp?-1:e.timestamp>t.timestamp?1:e.priority-t.priority}async getTransactionFromTableWriteEvent(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);const t=`${e.tableName}::${e.key}`,s=await m.default.getEstimatedTimestamp(),n={id:t,priority:Math.random(),timestamp:s,action:e.action};if(await this.writeTransaction(n))return n}async deleteTransactionsForTable(e){if(!this.transactionTable)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionTableNotInitialized);const t=i.QueryBuilder.index("id").where("between",[`${e}::`,`${e}::`]),s=await this.transactionTable.list(t.getQuery());for(const e of s)await this.transactionTable.delete(e.id)}setOnMessageHandler(){this.onMessage((async(e,t)=>{if(t instanceof File)return;if(!await this.writeTransaction(t))return void this.checkSyncComplete(t);if(!t.value)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTransactionValueNotSet);const[s,n]=t.id.split("::"),r=this.tables.get(s);if(!r)throw new d.SDKInternalError(d.SDKInternalError.codes.KeyValueDatabaseTableDoesNotExist,{table:r});let i=0;switch(t.action){case u.InternalDatabaseTableWriteAction.Add:case u.InternalDatabaseTableWriteAction.Update:{const e=r.set(n,t.value,!1);i=JSON.stringify(t.value).length,this.transactionsToSync.includes(t.id)&&this.syncTransactionsWritten.push(e);break}case u.InternalDatabaseTableWriteAction.Delete:{const e=r.delete(n,!1);this.transactionsToSync.includes(t.id)&&this.syncTransactionsWritten.push(e);break}}y.default.logServiceEvent(p.LoggingServices.KeyValueDatabase,{type:"sync",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,tableName:s,key:n,size:i}),this.checkSyncComplete(t)}))}setOnTableWriteHandler(){this.tableUnsubscriber=this.tableObserver.subscribe((async e=>{let t=0;switch(e.action){case u.InternalDatabaseTableWriteAction.Add:case u.InternalDatabaseTableWriteAction.Update:case u.InternalDatabaseTableWriteAction.Delete:{const s=await this.getTransactionFromTableWriteEvent(e);if(!s)return;s.value=e.value,this.send(s),t=JSON.stringify(e.value).length,this.writes+=1;break}case u.InternalDatabaseTableReadAction.Get:case u.InternalDatabaseTableReadAction.List:case u.InternalDatabaseTableReadAction.Count:this.reads+=1}y.default.logServiceEvent(p.LoggingServices.KeyValueDatabase,{type:e.action,label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,tableName:e.tableName,key:e.key,size:t}),this.sendStats()}))}instantiateTransactionTable(){this.db&&(this.transactionTable||(this.transactionTable=this.db.getTableConnector(a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME)))}clearSyncTimeout(){this.syncTimeout&&(clearTimeout(this.syncTimeout),delete this.syncTimeout)}publishSyncCompleted(){this.eventListener.publish({event:n.DatabaseEvent.SyncComplete}),this.syncResolve?.(!0),delete this.syncResolve,this.sendStats()}async publishSyncCompletedAfterWrites(){await Promise.all(this.syncTransactionsWritten),this.publishSyncCompleted()}checkSyncComplete(e){this.transactionsToSync.includes(e.id)&&(this.clearSyncTimeout(),this.transactionsToSync=this.transactionsToSync.filter((t=>t!==e.id)),0!==this.transactionsToSync.length?this.syncTimeout=setTimeout(this.timeoutCallback,a.CONTENT_KEY_VALUE_DATABASE_SYNC_TIMEOUT):this.publishSyncCompletedAfterWrites())}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{delete this.debounceStats;let e=0;for(const t of this.tables.values())e+=await t.calculateSize();this.systemTopic.publish({sourceId:c.SYSTEM_TOPIC_INTERNAL,messageType:h.SystemMessageType.Content,content:{type:l.ContentMessageType.KeyValueDatabaseStats,label:this.label,stats:{timestamp:Date.now(),storage:e,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:this.writes,reads:this.reads,prompts:0,tokens:0}}}),y.default.logStorage(p.LoggingServices.KeyValueDatabase,`ccc${this.clusterId}ccc${this.label}`,e)}),a.CONTENT_KEY_VALUE_DATABASE_STATS_DEBOUNCE)}addReservedTables(e){if(e.tables[a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME])throw new r.SDKClientError(r.SDKClientErrorCodes.KeyValueDatabaseTableNameReserved,`Cannot create Key-Value Database: Table '${a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME}' reserved`);if(e.tables[a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME])throw new r.SDKClientError(r.SDKClientErrorCodes.KeyValueDatabaseTableNameReserved,`Cannot create Key-Value Database: Table '${a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME}' reserved`);e.tables[a.CONTENT_KEY_VALUE_DATABASE_TRANSACTION_TABLE_NAME]={indexes:[]},e.tables[a.CONTENT_KEY_VALUE_DATABASE_LAYOUT_TABLE_NAME]={indexes:[]}}}},"./src/models/Content/KeyValueDatabaseTable.ts":(e,t,s)=>{s.r(t),s.d(t,{DatabaseTable:()=>a});var n=s("./src/public/errors/SDKClientError.ts"),r=s("./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts"),i=s("./src/interfaces/Content/DataContent.ts"),o=s("./src/utils/Observer/Observer.ts");class a{connector;tableName;tableObserver;eventListener=(0,o.createSingleObserver)();listenerUnsubscriber;constructor(e,t,s){this.connector=e,this.tableName=t,this.tableObserver=s}destroy(){this.listenerUnsubscriber?.()}async get(e){const t={key:e,tableName:this.tableName,action:i.InternalDatabaseTableReadAction.Get};return this.tableObserver.publish(t),this.connector.get(e)}async set(e,t,s=!0){this.validateValue(t);const n=await this.connector.get(e),r=await this.connector.set(e,t),o=n?i.InternalDatabaseTableWriteAction.Update:i.InternalDatabaseTableWriteAction.Add;if(this.publish(o,r),!s)return r;const a={key:e,tableName:this.tableName,action:o,value:r};return this.tableObserver.publish(a),r}async add(e){this.validateValue(e);const t=await this.connector.add(e),s={key:t.id,tableName:this.tableName,action:i.InternalDatabaseTableWriteAction.Add,value:t};return this.tableObserver.publish(s),this.publish(s.action,t),t}async delete(e,t=!0){const s=await this.connector.get(e);if(!s)return;await this.connector.delete(e);const n=i.InternalDatabaseTableWriteAction.Delete;if(this.publish(n,s),!t)return;const r={key:e,tableName:this.tableName,action:n,value:s};this.tableObserver.publish(r)}async clear(){const e=await this.list();for(const t of e){const e=i.InternalDatabaseTableWriteAction.Delete;this.publish(e,t);const s={key:t.id,tableName:this.tableName,action:e,value:t};this.tableObserver.publish(s)}return this.connector.clear()}async list(e){const t={key:"",tableName:this.tableName,action:i.InternalDatabaseTableReadAction.List};this.tableObserver.publish(t);try{e&&(e=e instanceof r.QueryBuilder?e.getQuery():r.QueryBuilder.buildQuery(e).getQuery())}catch(e){throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,"Invalid query")}try{return await this.connector.list(e)}catch(e){let t="Invalid query";throw e instanceof Error&&(t=e.message),new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,t)}}async count(e){const t={key:"",tableName:this.tableName,action:i.InternalDatabaseTableReadAction.Count};this.tableObserver.publish(t);try{e&&(e=e instanceof r.QueryBuilder?e.getQuery():r.QueryBuilder.buildQuery(e).getQuery())}catch(e){throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,"Invalid query")}try{return await this.connector.count(e)}catch(e){let t="Invalid query";throw e instanceof Error&&(t=e.message),new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidQuery,t)}}calculateSize(){return this.connector.calculateSize()}subscribe(e){this.listenerUnsubscriber=this.eventListener.subscribe(e)}unsubscribe(){this.listenerUnsubscriber?.()}publish(e,t){const s=this.buildTableEvent(e,t);this.eventListener.publish(s)}buildTableEvent(e,t){let s;switch(e){case i.InternalDatabaseTableWriteAction.Add:s="add";break;case i.InternalDatabaseTableWriteAction.Update:s="update";break;case i.InternalDatabaseTableWriteAction.Delete:s="delete"}return{action:s,value:t}}validateValue(e){if("object"!=typeof e||null===e)throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidValue,"Invalid value. Must be an object.");for(const t in e){const s=e[t];if("object"!=typeof s||s instanceof Date){if(!["string","number","boolean"].includes(typeof s))throw new n.SDKClientError(n.SDKClientErrorCodes.KeyValueDatabaseInvalidValue,`Invalid value. Property '${t}' must be a string, number, boolean, or Date.`)}else this.validateValue(s)}}}},"./src/models/Content/LocalDynamicMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalDynamicMediaStream:()=>r});var n=s("./src/models/Content/BaseLocalMediaStream.ts");class r extends n.BaseLocalMediaStream{audioContext;transformations=[];clientStream;audioSource;audioDestination;sourceVideo;canvas;context;interval;constructor(e,t,s,n,r,i){if(super(e,t,s,i),this.audioContext=r,this.clientStream=this.mediaStream,this.sourceVideo=document.createElement("video"),this.sourceVideo.autoplay=!0,this.sourceVideo.muted=!0,this.sourceVideo.srcObject=this.clientStream,this.sourceVideo.load(),this.sourceVideo.onloadeddata=()=>{this.sourceVideo.play()},this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.mediaStream=this.canvas.captureStream(n),this.audioDestination=this.audioContext.createMediaStreamDestination(),this.clientStream.getAudioTracks().length>0){const e=this.clientStream.getAudioTracks()[0];this.audioSource=this.audioContext.createMediaStreamSource(new MediaStream([e])),this.audioSource.connect(this.audioDestination)}const o=this.audioDestination.stream.getTracks()[0];this.mediaStream.addTrack(o),this.interval=setInterval((()=>{this.canvas.width=this.sourceVideo.videoWidth,this.canvas.height=this.sourceVideo.videoHeight,this.sourceVideo.videoWidth?(0!==this.clientStream.getVideoTracks().length&&this.clientStream.getVideoTracks()[0].enabled?this.mediaStream.getVideoTracks()[0].enabled=!0:this.mediaStream.getVideoTracks()[0].enabled=!1,0!==this.clientStream.getAudioTracks().length&&this.clientStream.getAudioTracks()[0].enabled?this.mediaStream.getAudioTracks()[0].enabled=!0:this.mediaStream.getAudioTracks()[0].enabled=!1,this.context.drawImage(this.sourceVideo,0,0)):this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}),1e3/n)}destroy(){clearInterval(this.interval),this.sourceVideo.remove(),this.canvas.remove(),this.audioSource?.disconnect(),this.audioDestination.disconnect(),this.mediaStream.getTracks().forEach((e=>{e.stop(),this.mediaStream.removeTrack(e)})),super.destroy()}addTrack(e){const t=this.getTrack(e.kind);t&&this.removeTrack(t),"audio"!==e.kind?("video"===e.kind&&this.addVideoTrack(e),this.setupTrackEndedListeners(e)):this.addAudioTrack(e)}removeTrack(e){const t=this.getTrackFromParam(e);return t&&("audio"===t.kind&&(this.audioSource?.disconnect(),this.audioSource=void 0),this.trackEndedListeners.get(t.kind)?.(),this.clientStream.removeTrack(t)),t}replaceTrack(e){this.removeTrack(e.kind),this.addTrack(e)}setTransformations(e){this.transformations=e}getTrack(e){return this.clientStream.getTracks().find((t=>t.kind===e))||null}getTrackFromParam(e){return"string"==typeof e?this.getTrack(e):e}addAudioTrack(e){"suspended"===this.audioContext.state&&this.audioContext.resume(),this.clientStream.addTrack(e),this.audioSource=this.audioContext.createMediaStreamSource(this.clientStream),this.audioSource.connect(this.audioDestination)}addVideoTrack(e){this.clientStream.addTrack(e),this.sourceVideo.load()}}},"./src/models/Content/LocalMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalMediaStream:()=>r});var n=s("./src/models/Content/BaseLocalMediaStream.ts");class r extends n.BaseLocalMediaStream{}},"./src/models/Content/ObjectStore.ts":(e,t,s)=>{s.r(t),s.d(t,{ObjectStore:()=>S});var n=s("uuid"),r=s("@crewdle/web-sdk-types"),i=s("./src/public/errors/SDKClientError.ts"),o=s("./src/constants/Content.ts"),a=s("./src/constants/System.ts"),c=s("./src/errors/SDKInternalError.ts"),d=s("./src/interfaces/Content/Content.ts"),l=s("./src/interfaces/Content/DataContent.ts"),u=s("./src/interfaces/Subscription/SystemEvent.ts"),h=s("./src/interfaces/Utils/Logger.ts"),p=s("./src/models/Content/BaseDataStream.ts"),g=s("./src/utils/Logger/Logger.ts"),b=s("./src/utils/ObjectStore/Helpers.ts"),m=s("./src/utils/Observer/Observer.ts");class S extends p.BaseDataStream{localNode;clusterId;vendorId;transactionService;waitForArrayBufferSize;unsubscribeHandler;lastTransactionId;pendingSyncTransactions=new Map;objectRequests=new Map;pendingFilesSyncing=new Map;pendingFilesTransactions=new Map;pendingFilesRename=new Map;fileSendingMap=new Map;objectStoreConnector;eventListener=(0,m.createObserver)();listenerUnsubscribers=new Map;debounceStats;writes=0;reads=0;syncContent=!0;isSyncing=!0;nodesConnected=0;constructor(e,t,s,n,r,o,a){if("string"!=typeof t)throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreNameNotString,"Cannot create ObjectStore: Label must be a string");super(e,t),this.localNode=e,this.clusterId=s,this.vendorId=n,this.transactionService=r,this.waitForArrayBufferSize=a;const c=`ccc${this.vendorId}ccc${this.clusterId}ccc${t}`;this.objectStoreConnector=new o(c),this.sendStats()}reset(){this.sendStats()}getContentType(){return r.ContentType.ObjectStore}async sync(e){void 0!==e&&(this.syncContent=e),this.isSyncing=!0;try{const e=await this.objectStoreConnector.get(o.CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME),t=await e.text();this.lastTransactionId=t}catch(e){}this.unsubscribeHandler=this.onMessage((async(e,t)=>{if(!(t instanceof File))try{if(t.payloadType===l.InternalObjectStorePayloadType.Request)return void this.handleRequestPayload(t);this.handleTransactionPayload(t)}catch(e){if(e instanceof c.SDKInternalError)throw e;throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{payload:t})}})),await this.syncTransactions(),this.syncContent?await this.syncPendingFiles():this.completeSync(),this.sendStats()}destroy(){this.unsubscribeHandler?.(),clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic?.publish({sourceId:a.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Content,content:{type:d.ContentMessageType.CloseObjectStoreBucket,label:this.label}})}subscribe(e,t){if(this.listenerUnsubscribers.has(e))throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreAlreadySubscribed,"Cannot subscribe to ObjectStore: Already subscribed");this.listenerUnsubscribers.set(e,this.eventListener.subscribe(t)),this.isSyncing||this.eventListener.publish({event:r.StorageEventType.SyncComplete,payload:null})}unsubscribe(e){this.listenerUnsubscribers.get(e)?.(),this.listenerUnsubscribers.delete(e)}publish(e){switch(e.action){case r.PayloadAction.File:return this.publishFile(e.file,e.path,e.options);case r.PayloadAction.Folder:return this.publishFolder(e.path);case r.PayloadAction.Move:return this.publishMove(e.path,e.newPath);default:throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPayload,`Cannot publish payload: ${e}`)}}async unpublish(e){try{const t=(0,n.v4)(),s=this.lastTransactionId,r={payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.Delete,id:t,parentId:s,path:e};await this.publishTransaction(r);const i=await this.deleteObject(e);await this.send(r),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"unpublish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:i,path:e}),this.writes+=1,this.sendStats()}catch(t){if(t instanceof c.SDKInternalError)throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreNotInSync,`Cannot unpublish object at ${e}: Object store is not in sync`);throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot unpublish object: ${e}`)}}async get(e,t){g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"get",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,path:e}),this.reads+=1,this.sendStats();try{return await this.objectStoreConnector.get(e,t)}catch(t){try{await this.objectStoreConnector.get(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}catch(t){throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot get file: ${e}`)}throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync")}}async list(e,t){const{recursive:s=!1,includeSyncingFiles:n=!1}=t??{};g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"list",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,path:e}),this.reads+=1,this.sendStats();try{const t=await this.objectStoreConnector.list(e,s);return this.processList(t,{recursive:s,includeSyncingFiles:n})}catch(t){throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot list directory: ${e}`)}}handleNodeJoin(e){this.nodesConnected+=1;for(const t of this.objectRequests.values())this.send(t,[e])}handleNodeLeave(e){this.nodesConnected-=1;const t=this.pendingFilesSyncing.get(e);if(t){for(const[e,s]of t.values())this.sendFileRequestPayload(e,s);this.pendingFilesSyncing.delete(e)}}async getSize(e="/"){try{return await this.objectStoreConnector.calculateSize(e)}catch(t){if(t instanceof Error&&t.message.includes("ENOENT"))return 0;throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot get size of path: ${e}`)}}completeSync(){this.isSyncing&&(this.isSyncing=!1,this.eventListener.publish({event:r.StorageEventType.SyncComplete,payload:null}))}async processList(e,{includeSyncingFiles:t=!1}){const s=[];for(const n of e)if(n.kind!==r.ObjectKind.Folder){if(n.name!==o.CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME){if(n.name.endsWith(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)){if(!t)continue;const s=n;if(s.name=s.name.replace(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,""),s.pathName=s.pathName.replace(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,""),await this.syncedFileExists(s.pathName)){e.find((e=>e.pathName===s.pathName)).status=r.FileStatus.Syncing;continue}s.status=r.FileStatus.Pending}s.push(n)}}else n.entries=await this.processList(n.entries??[],{includeSyncingFiles:t}),s.push(n);return s}async publishFile(e,t,s){try{const i=(0,n.v4)(),a=await(0,b.getFileChecksum)(e),c=(0,b.getPathName)(t??"/",e.name);let d=!0;const u={payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.FileWrite,id:i,parentId:this.lastTransactionId,answererId:this.localNode.getId(),name:e.name,type:e.type,path:t??"/",skipEncryption:s?.skipEncryption??!1,checksum:a};try{const e=c+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION;await this.objectStoreConnector.get(e),d=!1,await this.objectStoreConnector.deleteObject(e),this.objectRequests.delete(c)}catch(e){await this.publishTransaction(u)}if(this.syncContent?await this.writeFile(e,t,s):await this.createPendingFileWrite(e.name,t??"/",{checksum:a,skipEncryption:s?.skipEncryption??!1}),this.fileSendingMap.has(c)){const[e,t]=this.fileSendingMap.get(c);this.fileSendingMap.set(c,[!0,t]);try{await t}catch(e){}this.fileSendingMap.delete(c)}d&&this.nodesConnected>0&&await this.sendFile(e,u),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"publish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:r.ObjectKind.File,path:t,fileName:e.name,fileType:e.type,size:e.size}),this.writes+=1,this.sendStats()}catch(s){if(s instanceof c.SDKInternalError)throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync");throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot publish file: ${t}${t?.endsWith("/")?"":"/"}${e.name}`)}}async publishFolder(e){try{const t=(0,n.v4)(),s=this.lastTransactionId,i={payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.FolderCreate,id:t,parentId:s,path:e};await this.publishTransaction(i),await this.objectStoreConnector.createFolder(e),await this.send(i),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"publish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:r.ObjectKind.Folder,path:e}),this.writes+=1,this.sendStats()}catch(t){if(t instanceof c.SDKInternalError)throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync");throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot publish folder: ${e}`)}}async publishMove(e,t){try{const s=(0,n.v4)(),r=this.lastTransactionId,i={payloadType:l.InternalObjectStorePayloadType.Transaction,action:l.InternalObjectStorePayloadAction.Move,id:s,parentId:r,path:e,newPath:t};await this.publishTransaction(i);const o=await this.moveObject(e,t);await this.send(i),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"move",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:o,path:e,newPath:t}),this.writes+=1,this.sendStats()}catch(t){if(t instanceof c.SDKInternalError)throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreNotInSync,"Object store is not in sync");throw new i.SDKClientError(i.SDKClientErrorCodes.ObjectStoreInvalidPath,`Cannot publish move operation: ${e}`)}}async handleTransactionPayload(e,t=!1){if(this.lastTransactionId&&e.parentId!==this.lastTransactionId&&e.id!==this.lastTransactionId){if(!e.parentId)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage);this.pendingSyncTransactions.set(e.parentId,e)}else{try{await this.processTransactionPayload(e,t)}catch(e){}await this.updateLastTransactionId(e.id),await this.processPendingSyncTransactions(e.id,t)}}async processTransactionPayload(e,t=!1){switch(e.action){case l.InternalObjectStorePayloadAction.FileWrite:await this.handleFileWrite(e);break;case l.InternalObjectStorePayloadAction.FolderCreate:await this.handleFolderCreate(e);break;case l.InternalObjectStorePayloadAction.Move:await this.handleObjectMove(e,t);break;case l.InternalObjectStorePayloadAction.Delete:await this.handleObjectDelete(e,t);break;default:throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{payload:e})}}async processPendingSyncTransactions(e,t=!1){if(this.pendingSyncTransactions.has(e)){const s=this.pendingSyncTransactions.get(e);this.pendingSyncTransactions.delete(e),await this.handleTransactionPayload(s,t)}}async handleRequestPayload(e){switch(e.action){case l.InternalObjectStorePayloadAction.RequestFile:return this.handleFileRequest(e);case l.InternalObjectStorePayloadAction.RequestAccepted:return this.handleFileRequestAnswer(e);case l.InternalObjectStorePayloadAction.RequestFileSync:return this.handleFileSync(e);case l.InternalObjectStorePayloadAction.RequestFileWrite:return this.handleFileWrite(e);default:throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{payload:e})}}async handleFileWrite(e,t=0){const s=(0,b.getPathName)(e.path,e.name);if(!e.data||void 0===e.index||!e.total)return this.fileChunks.delete(s),void await this.createPendingFileWrite(e.name,e.path,{checksum:e.checksum,skipEncryption:e.skipEncryption});if(this.fileChunks.has(s)){const t=this.fileChunks.get(s);t.checksum!==e.checksum&&(t.stream?.close(),this.fileChunks.delete(s))}if(!this.fileChunks.has(s)){try{await this.objectStoreConnector.deleteObject(s)}catch(e){}try{const t=this.syncContent?await this.objectStoreConnector.createWritableStream(s,{skipEncryption:e.skipEncryption}):void 0,n={chunksReceived:e.startIndex??0,bytesReceived:0,stream:t,checksum:e.checksum};this.fileChunks.set(s,n),await this.createPendingFileWrite(e.name,e.path,{checksum:e.checksum,skipEncryption:e.skipEncryption})}catch(e){}}const n=this.fileChunks.get(s);if(e.checksum!==n.checksum)return;if(this.setPendingFileSyncingPayload(e,s),this.syncContent){if(!n.stream)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Writable stream is missing"});let r=n.chunksReceived;if(e.index!==r){if(r>e.index)return;const t=o.CONTENT_FILE_CHUNKS_MAX_BUFFER_SIZE/4/o.CONTENT_FILE_CHUNK_SIZE;if(e.index>r+t)return;if(n.bufferedChunks||(n.bufferedChunks=[]),n.bufferedChunks.length>o.CONTENT_FILE_CHUNKS_MAX_BUFFER_SIZE/o.CONTENT_FILE_CHUNK_SIZE)throw this.fileChunks.delete(s),new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Buffered chunks are too large"});return void n.bufferedChunks.push(e)}try{n.chunksReceived+=1,n.bytesReceived+=e.data.byteLength,await n.stream.write(e.data)}catch(n){if(console.error("Error writing chunk to stream",n),t>3)throw this.fileChunks.delete(s),console.error("Max retries reached for writing chunk to stream",n),new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Max retries reached for writing chunk to stream"});return this.handleFileWrite(e,t+1)}}try{await this.manageBufferedChunks(n,e.index+1)}catch(e){throw this.fileChunks.delete(s),e}if(this.fileChunks.set(s,n),n.chunksReceived<e.total)return;await this.deleteFileChunks(s),this.syncContent&&(await this.deletePendingFile(e),g.default.logServiceEvent(h.LoggingServices.ObjectStorage,{type:"sync",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,kind:r.ObjectKind.File,path:e.path,fileName:e.name,fileType:e.type,size:n.bytesReceived}));const i=this.pendingFilesTransactions.get(e.path)??[];for(const e of i)await this.processTransactionPayload(e);this.pendingFilesTransactions.delete(e.path),this.eventListener.publish({event:r.StorageEventType.FileWrite,payload:{file:{kind:r.ObjectKind.File,path:e.path,type:e.type,size:n.bytesReceived,name:e.name,pathName:s,status:this.syncContent?r.FileStatus.Synced:r.FileStatus.Pending}}}),this.sendStats()}async manageBufferedChunks(e,t){const s=e.stream;let n=0;for(;e.bufferedChunks&&e.bufferedChunks.length>0;){const r=e.bufferedChunks.find((e=>e.index===t+1));if(!r)break;e.bufferedChunks=e.bufferedChunks.filter((e=>e.index!==t+1));try{await s.write(r.data),t++}catch(e){if(console.error("Error writing buffered chunk to stream",e),n>3)throw console.error("Max retries reached for writing buffered chunk to stream",e),new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Max retries reached for writing buffered chunk to stream"});n++;continue}e.chunksReceived+=1,e.bytesReceived+=r.data.byteLength}}async handleFolderCreate(e){await this.objectStoreConnector.createFolder(e.path);const[t,s]=(0,b.splitPathName)(e.path);this.eventListener.publish({event:r.StorageEventType.FolderCreate,payload:{folder:{kind:r.ObjectKind.Folder,name:s,path:t,pathName:e.path}}})}async handleObjectDelete(e,t=!1){if(!t&&!this.shouldProcessTransaction(e))return;const s=await this.deleteObject(e.path),[n,i]=(0,b.splitPathName)(e.path);this.eventListener.publish({event:s===r.ObjectKind.Folder?r.StorageEventType.FolderDelete:r.StorageEventType.FileDelete,payload:{name:i,path:n,pathName:e.path}}),this.sendStats()}async handleObjectMove(e,t=!1){if(!t&&!this.shouldProcessTransaction(e))return this.pendingFilesRename.set(e.newPath,this.pendingFilesRename.get(e.path)??e.path),void this.pendingFilesRename.delete(e.path);this.pendingFilesRename.delete(e.path);const s=await this.objectStoreConnector.moveObject(e.path,e.newPath),[n,i]=(0,b.splitPathName)(e.path),[o,a]=(0,b.splitPathName)(e.newPath);this.eventListener.publish({event:s===r.ObjectKind.Folder?r.StorageEventType.FolderMove:r.StorageEventType.FileMove,payload:{name:a,path:o,pathName:e.newPath,oldName:i,oldPath:n,oldPathName:e.path}}),this.sendStats()}shouldProcessTransaction(e){const t=this.pendingFilesRename.get(e.path)??e.path;let s=!1;for(const n of this.fileChunks.keys())if(n.startsWith(t)){const t=this.pendingFilesTransactions.get(n)??[];t.push(e),this.pendingFilesTransactions.set(n,t),s=!0}return!s}async publishTransaction(e){if(!e.id)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Missing transaction id"});if(e.parentId!==this.lastTransactionId)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreNotSynced);await this.transactionService.writeTransaction(e,this.label),await this.updateLastTransactionId(e.id)}async updateLastTransactionId(e){this.lastTransactionId=e;const t=new File([new Blob([this.lastTransactionId])],o.CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME,{type:"text/plain"});await this.writeFile(t,"/")}async handleFileRequest(e){try{const t=await this.get(e.path+"/"+e.name,{skipEncryption:e.skipEncryption}),s=await(0,b.getFileChecksum)(t);if(""!==e.checksum&&s!==e.checksum)return;e.answererId=this.localNode.getId(),e.action=l.InternalObjectStorePayloadAction.RequestAccepted,await this.send(e,[e.sourceId])}catch(e){}}async handleFileRequestAnswer(e){const t=(0,b.getPathName)(e.path,e.name);if(!this.objectRequests.has(t))return;const s=this.objectRequests.get(t);s.action=l.InternalObjectStorePayloadAction.RequestFileSync;const n=e.answererId;if(!n)throw new c.SDKInternalError(c.SDKInternalError.codes.ObjectStoreInvalidSyncMessage,{message:"Missing answerer id on request answer"});if(this.objectRequests.delete(t),this.pendingFilesSyncing.has(n)||this.pendingFilesSyncing.set(n,new Map),this.pendingFilesSyncing.get(n).set(t,[s,this.getOrResetPendingFileTimeout(n,t)]),s.answererId=n,s.startIndex=this.fileChunks.get(t)?.chunksReceived??0,0===s.startIndex)try{const[t,n]=await this.checkExistingPendingFileContent(e.name,e.path,e.checksum);t&&(s.startIndex=n)}catch(e){}this.send(s,[n])}async handleFileSync(e){const t=(0,b.getPathName)(e.path,e.name),s=await this.get(t,{skipEncryption:e.skipEncryption}),n={...e,answererId:this.localNode.getId(),action:l.InternalObjectStorePayloadAction.RequestFileWrite,startIndex:e.startIndex??0};await this.sendFile(s,n,[e.sourceId])}async sendFile(e,t,s){let n,r;const i=new Promise((async(e,t)=>{n=e,r=t}));return(async()=>{const a=Math.ceil(e.size/o.CONTENT_FILE_CHUNK_SIZE);let c=t.startIndex??0;const d=(0,b.getPathName)(t.path,t.name);this.fileSendingMap.set(d,[!1,i]);for await(const n of(0,b.readFileStream)(e,c,this.waitForArrayBufferSize)){const[i]=this.fileSendingMap.get(d)??[];if(i)return this.fileSendingMap.delete(d),void r(new Error("File sending interrupted"));if(this.pendingFilesTransactions.has(d)){const e=this.pendingFilesTransactions.get(d);for(const t of e)if(t.action===l.InternalObjectStorePayloadAction.FileWrite||t.action===l.InternalObjectStorePayloadAction.Delete)return}const o={...t,type:e.type,data:n,index:c,total:a};this.send(o,s),c++}const u=setInterval((async()=>{await this.waitForArrayBufferSize()>0||(clearInterval(u),n())}));this.fileSendingMap.delete(d)})(),i}async deletePendingFile(e){try{const t=(0,b.getPathName)(e.path,e.name),s=t+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION;await this.deleteObject(s);const[,n]=this.pendingFilesSyncing.get(e.answererId)?.get(t)??[];n&&(clearTimeout(n),this.pendingFilesSyncing.get(e.answererId).delete(t))}catch(e){}0===this.pendingFilesSyncing.get(e.answererId)?.size&&this.pendingFilesSyncing.delete(e.answererId),0===this.pendingFilesSyncing.size&&0===this.objectRequests.size&&this.completeSync()}async syncTransactions(){try{const e=await this.transactionService.getTransactions(this.label,this.lastTransactionId);for(const t of e)await this.handleTransactionPayload(t,!0)}catch(e){if(e instanceof c.SDKInternalError&&e.code===c.SDKInternalError.codes.ObjectStoreInvalidState){await this.objectStoreConnector.deleteObject(o.CONTENT_OBJECT_STORE_LAST_TRANSACTION_OBJECT_NAME),delete this.lastTransactionId;try{const e=await this.objectStoreConnector.list("/",!1);for(const t of e)await this.objectStoreConnector.deleteObject(t.pathName)}catch(e){}return await this.syncTransactions()}throw e}}async syncPendingFiles(){const e=await this.list("/",{recursive:!0,includeSyncingFiles:!0}),t=async e=>{for(const s of e){if(s.kind===r.ObjectKind.Folder){s.entries&&s.entries.length>0&&await t(s.entries);continue}if(s.status!==r.FileStatus.Pending)continue;const e=await this.get(s.pathName+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION),n=JSON.parse(await e.text()),i=s.name.replace(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,""),a={payloadType:l.InternalObjectStorePayloadType.Request,action:l.InternalObjectStorePayloadAction.RequestFile,sourceId:this.localNode.getId(),type:"",path:s.path,name:i,checksum:n.checksum,skipEncryption:n.skipEncryption},c=(0,b.getPathName)(s.path,i);this.objectRequests.set(c,a)}};await t(e),0===this.objectRequests.size&&0===this.pendingFilesSyncing.size&&this.completeSync()}async createPendingFileWrite(e,t,s){const n=new File([new Blob([JSON.stringify(s)])],`${e}${o.CONTENT_OBJECT_STORE_PENDING_EXTENSION}`,{type:"text/plain"});await this.writeFile(n,t)}async checkExistingPendingFileContent(e,t,s){try{const n=(0,b.getPathName)(t,e),r=n+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,i=await this.objectStoreConnector.get(r),{checksum:a,skipEncryption:c}=JSON.parse(await i.text()),d=(await this.objectStoreConnector.get(n,{skipEncryption:c})).size,l=d%o.CONTENT_FILE_CHUNK_SIZE==0;return a===s&&l?[!0,Math.round(d/o.CONTENT_FILE_CHUNK_SIZE)]:(await this.objectStoreConnector.deleteObject(n),[!1,0])}catch(e){return[!1,0]}}getOrResetPendingFileTimeout(e,t){const[s,n]=this.pendingFilesSyncing.get(e)?.get(t)??[];return n&&clearTimeout(n),setTimeout((()=>{const[s,n]=this.pendingFilesSyncing.get(e).get(t);this.sendFileRequestPayload(s,n)}),o.CONTENT_OBJECT_STORE_PENDING_RETRY_DELAY)}async sendFileRequestPayload(e,t){clearTimeout(t),e.action=l.InternalObjectStorePayloadAction.RequestFile,this.objectRequests.set((0,b.getPathName)(e.path,e.name),e),this.send(e)}setPendingFileSyncingPayload(e,t){if(!this.syncContent)return;this.pendingFilesSyncing.has(e.answererId)||this.pendingFilesSyncing.set(e.answererId,new Map);const[s]=this.pendingFilesSyncing.get(e.answererId).get(t)??[{payloadType:l.InternalObjectStorePayloadType.Request,action:l.InternalObjectStorePayloadAction.RequestFile,sourceId:this.localNode.getId(),type:e.type,name:e.name,path:e.path,skipEncryption:e.skipEncryption,checksum:e.checksum,answererId:e.answererId}];this.pendingFilesSyncing.get(e.answererId).set(t,[s,this.getOrResetPendingFileTimeout(e.answererId,t)])}async writeFile(e,t,s){await this.objectStoreConnector.writeFile(e,t,s)}async deleteObject(e){try{const t=await this.objectStoreConnector.deleteObject(e);if(!e.endsWith(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION))try{await this.objectStoreConnector.deleteObject(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}catch(e){}return t}catch(t){return await this.objectStoreConnector.deleteObject(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}}async moveObject(e,t){try{const s=await this.objectStoreConnector.moveObject(e,t);if(!e.endsWith(o.CONTENT_OBJECT_STORE_PENDING_EXTENSION))try{await this.objectStoreConnector.moveObject(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,t+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}catch(e){}return s}catch(s){return await this.objectStoreConnector.moveObject(e+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION,t+o.CONTENT_OBJECT_STORE_PENDING_EXTENSION)}}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{delete this.debounceStats;const e=await this.objectStoreConnector.calculateSize("/");this.systemTopic?.publish({sourceId:a.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Content,content:{type:d.ContentMessageType.ObjectStoreStats,label:this.label,stats:{timestamp:Date.now(),storage:e,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:this.writes,reads:this.reads,prompts:0,tokens:0}}}),this.syncContent&&g.default.logStorage(h.LoggingServices.ObjectStorage,`ccc${this.clusterId}ccc${this.label}`,e)}),o.CONTENT_OBJECT_STORE_STATS_DEBOUNCE)}async syncedFileExists(e){try{return await this.get(e),!0}catch(e){return!1}}async deleteFileChunks(e){if(!this.fileChunks.has(e))return;const t=this.fileChunks.get(e);if(t.stream)try{await t.stream.close()}catch(e){console.error("Error closing writable stream",e)}this.fileChunks.delete(e)}}},"./src/models/Content/OutgoingMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{OutgoingMediaStream:()=>c});var n=s("@crewdle/web-sdk-types"),r=s("./src/errors/SDKInternalError.ts"),i=s("./src/interfaces/Subscription/MediaSubscriptionEvent.ts"),o=s("./src/models/Content/BaseMediaStream.ts"),a=s("./src/utils/Observer/Observer.ts");class c extends o.BaseMediaStream{remoteId;params;topic;unregisterPublisherListener=(0,a.createSingleObserver)();constructor(e,t,s,n,r){super(e,t,s),this.remoteId=n,this.params=r}destroy(){this.removeTrack("audio"),this.removeTrack("video"),super.destroy()}addTrack(e){if(!this.topic)throw new r.SDKInternalError(r.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});this.topic.publish({sourceId:this.owner.getId(),content:{action:i.MediaSubscriptionAction.Add,track:e,stream:this.mediaStream,priority:n.MediaStreamPriority.Default,params:this.getInternalTrackParams(e.kind,this.params)}})}removeTrack(e){const t=this.getTrack(e);if(t){if(!this.topic)return null;this.topic.publish({sourceId:this.owner.getId(),content:{action:i.MediaSubscriptionAction.Remove,track:t,stream:this.mediaStream}})}return t}setPriority(e){if(!this.topic)throw new r.SDKInternalError(r.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});this.topic.publish({sourceId:this.owner.getId(),content:{action:i.MediaSubscriptionAction.Update,priority:e,stream:this.mediaStream}})}subscribe({trackKinds:e,params:t},s){if(!this.topic)throw new r.SDKInternalError(r.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});for(const n of this.mediaStream.getTracks())e.includes(n.kind)&&this.topic.publish({sourceId:this.owner.getId(),content:{action:i.MediaSubscriptionAction.Add,track:n,stream:this.mediaStream,priority:s,params:this.getInternalTrackParams(n.kind,t)}})}update({params:e}){if(!this.topic)throw new r.SDKInternalError(r.SDKInternalError.codes.OutgoingMediaStreamNoTopic,{label:this.label,ownerId:this.owner.getId(),remoteId:this.remoteId});for(const t of this.mediaStream.getTracks())this.topic.publish({sourceId:this.owner.getId(),content:{action:i.MediaSubscriptionAction.Update,stream:this.mediaStream,params:this.getInternalTrackParams(t.kind,e)}})}unsubscribe({trackKinds:e}){if(this.topic)for(const t of this.mediaStream.getTracks())e.includes(t.kind)&&this.topic.publish({sourceId:this.owner.getId(),content:{action:i.MediaSubscriptionAction.Remove,stream:this.mediaStream,track:t}})}registerPublisher(e){this.topic=e}unregisterPublisher(e){e===this.topic&&(delete this.topic,this.unregisterPublisherListener.publish())}onUnregisterPublisher(e){return this.unregisterPublisherListener.subscribe(e)}getTrack(e){return this.mediaStream.getTracks().find((t=>t.kind===e))||null}getInternalTrackParams(e,t){let s;return"video"===e&&t?.video&&"boolean"!=typeof t.video&&(s={kind:"video",...t.video},s.resolution=this.getResolution()),"audio"===e&&t?.audio&&"boolean"!=typeof t.audio&&(s={kind:"audio",...t.audio}),s}getResolution(){let e={width:0,height:0};const t=this.mediaStream.getVideoTracks();if(t.length>0){const s=t[0].getSettings();s.width&&s.height&&(e={width:s.width,height:s.height})}return e}}},"./src/models/Content/PubSubTopic.ts":(e,t,s)=>{s.r(t),s.d(t,{PubSubTopic:()=>h});var n=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Content/BaseDataStream.ts"),u=s("./src/utils/Logger/Logger.ts");class h extends l.BaseDataStream{localNode;clusterId;unsubscribeHandler=new Map;debounceStats;constructor(e,t,s){if("string"!=typeof t)throw new r.SDKClientError(r.SDKClientErrorCodes.PubSubTopicNameNotString,"Cannot create PubSubStream: Label must be a string");super(e,t),this.localNode=e,this.clusterId=s,this.sendStats()}reset(){this.sendStats()}getContentType(){return n.ContentType.PubSub}publish(e,t){u.default.log(d.LoggingChannels.PubSub,"PubSubTopic publish",this.localNode.getId(),e,t),u.default.logServiceEvent(d.LoggingServices.PubSub,{type:"publish",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,remoteIds:t??[],contentType:e instanceof File?n.ContentType.File:n.ContentType.Data,size:e instanceof File?e.size:JSON.stringify(e).length}),this.sendStats(),this.send(e,t)}subscribe(e,t){if(this.unsubscribeHandler.has(e))throw new r.SDKClientError(r.SDKClientErrorCodes.PubSubTopicAlreadySubscribed,"Cannot subscribe to PubSubTopic: Already subscribed");this.unsubscribeHandler.set(e,this.onMessage(((s,n)=>{"data"===e&&n instanceof File||!("file"!==e||n instanceof File)||(u.default.log(d.LoggingChannels.PubSub,"PubSubTopic onMessage",this.localNode.getId(),s,n),u.default.logServiceEvent(d.LoggingServices.PubSub,{type:"subscribe",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,remoteId:s,contentType:e,size:n instanceof File?n.size:JSON.stringify(n).length}),this.sendStats(),t(s,n))})))}unsubscribe(e){this.unsubscribeHandler.get(e)?.(),this.unsubscribeHandler.delete(e)}destroy(){this.unsubscribeHandler.forEach((e=>e())),clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic?.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.ClosePubSubTopic,label:this.label}})}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((()=>{this.systemTopic?.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.PubSubTopicStats,label:this.label,stats:{timestamp:Date.now(),storage:0,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:0,reads:0,prompts:0,tokens:0}}})}),i.CONTENT_PUBSUB_TOPIC_STATS_DEBOUNCE)}}},"./src/models/Content/RemoteMediaStream.ts":(e,t,s)=>{s.r(t),s.d(t,{RemoteMediaStream:()=>b});var n=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Subscription/MediaSubscriptionEvent.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/models/Content/BaseMediaStream.ts"),h=s("./src/models/Content/OutgoingMediaStream.ts"),p=s("./src/utils/Logger/Logger.ts"),g=s("./src/utils/Observer/Observer.ts");class b extends u.BaseMediaStream{localNode;internalId;availableTrackKinds;clusterId;unsubscribeHandler;resizeHandler;updateDebounce;outgoingStreams=new Map;renderElement;subscribedTracks=new Set;providerId;providerListener=(0,g.createObserver)();trackEndedListeners=new Map;constructor(e,t,s,n,r,i){super(t,s,new MediaStream),this.localNode=e,this.internalId=n,this.availableTrackKinds=r,this.clusterId=i,this.mediaStream.getTracks().forEach((e=>this.setupTrackEndedListeners(e)))}destroy(){this.outgoingStreams.size>0&&(this.outgoingStreams.forEach((e=>{e.unregisterSystemPublisher(),e.destroy()})),this.outgoingStreams.clear()),this.trackEndedListeners.forEach((e=>e())),this.mediaStream.getTracks().forEach((e=>this.mediaStream.removeTrack(e))),this.updateDebounce&&(clearTimeout(this.updateDebounce),delete this.updateDebounce),this.resizeHandler?.(),super.destroy()}registerSubscriber(e){this.unsubscribeHandler=e.subscribe((({content:e})=>{switch(e.action){case c.MediaSubscriptionAction.RemoteAdd:if(p.default.log(l.LoggingChannels.Subscription,"Received track",this.localNode.getId(),this.providerId),e.stream.id!==this.internalId||e.providerId!==this.providerId)return;this.removeTrack(e.track.kind),this.mediaStream.addTrack(e.track);for(const[t,s]of this.outgoingStreams.entries())try{s.addTrack(e.track)}catch(e){s.destroy(),this.outgoingStreams.delete(t)}this.setupTrackEndedListeners(e.track),this.setupRenderElement(),"video"===e.track.kind&&this.renderElement&&(this.mediaStream.active?setTimeout((()=>this.renderElement?.play()),0):setTimeout((()=>this.renderElement?.load()),0),this.setupResizeHandler());break;case c.MediaSubscriptionAction.RemoteRemove:if(e.stream.id!==this.internalId||e.providerId!==this.providerId)return;this.removeTrack(e.track.kind),this.renderElement&&"video"===e.track.kind&&(this.resizeHandler?.(),this.mediaStream.getTracks().length>0?this.renderElement.load():this.renderElement.srcObject=null)}}))}unregisterSubscriber(){this.unsubscribeHandler?.(),this.trackEndedListeners.forEach((e=>e())),delete this.unsubscribeHandler}getInternalStreamId(){return this.internalId}setInternalId(e){this.internalId=e}getAvailableTrackKinds(){return this.availableTrackKinds}hasTracks(e){for(const t of e||this.availableTrackKinds)if(!this.mediaStream.getTracks().find((e=>e.kind===t)))return!1;return!0}getResolution(){let e={width:0,height:0};const t=this.mediaStream.getVideoTracks();if(t.length>0){const s=t[0].getSettings();s.width&&s.height&&(e={width:s.width,height:s.height})}return e}isSubscribed(e){for(const t of e)if(!this.subscribedTracks.has(t))return!1;return!0}getShareableStream(e,t){if(!this.outgoingStreams.has(e)){const s=new h.OutgoingMediaStream(this.owner,this.label,this.mediaStream,e,t),n=s.onUnregisterPublisher((()=>{n(),this.outgoingStreams.get(e)?.destroy(),this.outgoingStreams.delete(e)}));this.outgoingStreams.set(e,s),s.registerSystemPublisher(this.systemTopic)}return this.outgoingStreams.get(e)}getShareableStreamId(){return this.mediaStream.id}getPriority(){return n.MediaStreamPriority.Default}getSubscribedTracks(){return Array.from(this.subscribedTracks)}subscribe(e){let t=[];if(e){"object"!=typeof e.video||e.video.renderElement instanceof HTMLVideoElement||!this.renderElement||(e.video={renderElement:this.renderElement});try{(0,n.isValidMediaSubscriptionParams)(e)}catch(e){throw new r.SDKClientError(r.SDKClientErrorCodes.RemoteMediaStreamInvalidSubscriptionParams,"Invalid params")}e.video&&(t.push("video"),"boolean"!=typeof e.video&&e.video.renderElement&&(this.renderElement=e.video.renderElement,e.video.maxResolution||(e.video.maxResolution={width:this.renderElement.clientWidth,height:this.renderElement.clientHeight}),delete e.video.renderElement)),e.audio&&t.push("audio")}else t=this.getAvailableTrackKinds();this.isSubscribed(t)||(t.forEach((e=>this.subscribedTracks.add(e))),this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.SubscribeMediaStream,label:this.label,ownerId:this.owner.getId(),trackKinds:t,params:e}}),p.default.logServiceEvent(l.LoggingServices.MediaStream,{type:"subscribe",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,sourceId:this.owner.getId(),streamId:this.internalId,trackKinds:t}))}update(e){try{(0,n.isValidMediaSubscriptionParams)(e)}catch(e){throw new r.SDKClientError(r.SDKClientErrorCodes.RemoteMediaStreamInvalidSubscriptionParams,"Invalid params")}this.updateDebounce&&clearTimeout(this.updateDebounce),this.updateDebounce=setTimeout((()=>{delete this.updateDebounce,this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.UpdateMediaStream,label:this.label,ownerId:this.owner.getId(),params:e}})}),i.CONTENT_UPDATE_DEBOUNCE)}unsubscribe(e){e||(e=this.getAvailableTrackKinds()),(e=Array.isArray(e)?e:[e]).forEach((e=>this.subscribedTracks.delete(e))),this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.UnsubscribeMediaStream,label:this.label,ownerId:this.owner.getId(),trackKinds:e,remainingTracks:this.subscribedTracks.size}})}onProviderChange(e){return this.providerListener.subscribe(e)}getProviderId(){return this.providerId}setProviderId(e){this.providerId!==e&&(this.providerId=e,this.providerListener.publish(e))}unsubscribeTrackEndedListener(e){this.trackEndedListeners.get(e)?.(),this.trackEndedListeners.delete(e)}removeTrack(e){const t=this.mediaStream.getTracks().find((t=>t.kind===e));t&&(this.mediaStream.removeTrack(t),this.outgoingStreams.forEach((t=>t.removeTrack(e))),this.trackEndedListeners.get(e)?.())}setupRenderElement(){this.renderElement&&(this.renderElement.srcObject&&this.renderElement.srcObject===this.mediaStream||(this.renderElement.srcObject=this.mediaStream))}setupResizeHandler(){if(this.renderElement&&!this.resizeHandler&&"undefined"!=typeof ResizeObserver){let e=this.renderElement.clientWidth,t=this.renderElement.clientHeight;const s=new ResizeObserver((s=>{const{width:n,height:r}=s[0].contentRect;e===n&&t===r||(e=Math.floor(n),t=Math.floor(r),this.update({video:{maxResolution:{width:n,height:r}}}))}));s.observe(this.renderElement),this.resizeHandler=()=>s.disconnect()}}handleRemoteTrackFailure(e){const t=[];for(const e of this.subscribedTracks)this.removeTrack(e),t.push(e);this.providerId&&this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:d.SystemMessageType.Content,content:{type:a.ContentMessageType.RemoteMediaStreamTrackFail,label:this.label,streamId:this.internalId,ownerId:this.owner.getId(),providerId:this.providerId,trackKinds:t}})}setupTrackEndedListeners(e){const t=()=>this.handleRemoteTrackFailure(e);e.addEventListener("ended",t),e.addEventListener("mute",t),this.trackEndedListeners.set(e.kind,(()=>{e.removeEventListener("ended",t),e.removeEventListener("mute",t),this.trackEndedListeners.delete(e.kind)}))}}},"./src/models/Content/VectorDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{VectorDatabase:()=>h});var n=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/constants/Content.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/interfaces/Utils/Logger.ts"),l=s("./src/models/Content/BaseDataStream.ts"),u=s("./src/utils/Logger/Logger.ts");class h extends l.BaseDataStream{localNode;clusterId;db;debounceStats;writes=0;reads=0;constructor(e,t,s,n){if("string"!=typeof t)throw new r.SDKClientError(r.SDKClientErrorCodes.VectorDatabaseNameNotString,"Cannot create Vector Database: Name must be a string");super(e,t),this.localNode=e,this.clusterId=s,this.db=new n,this.sendStats()}destroy(){clearTimeout(this.debounceStats),delete this.debounceStats,super.destroy()}close(){this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.CloseVectorDatabase,label:this.label}})}reset(){this.sendStats()}getContentType(){return n.ContentType.VectorDatabase}search(e,t,s,n){const r=this.db.search(e,t,s,n);return this.reads+=1,u.default.logServiceEvent(d.LoggingServices.VectorDatabase,{type:"search",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,size:0}),this.sendStats(),r}insert(e,t,s,n){this.db.insert(e,t,s,n),this.writes+=1,u.default.logServiceEvent(d.LoggingServices.VectorDatabase,{type:"insert",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,size:n.reduce(((e,t)=>e+t.length),0)}),this.sendStats()}remove(e){this.db.remove(e),this.writes+=1,u.default.logServiceEvent(d.LoggingServices.VectorDatabase,{type:"remove",label:this.label,nodeId:this.localNode.getId(),nodeType:this.localNode.type,clusterId:this.clusterId,size:0}),this.sendStats()}sendStats(){this.debounceStats&&clearTimeout(this.debounceStats),this.debounceStats=setTimeout((async()=>{delete this.debounceStats;const e=this.db.getBuffer().byteLength;this.systemTopic.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Content,content:{type:a.ContentMessageType.VectorDatabaseStats,label:this.label,stats:{timestamp:Date.now(),storage:e,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,bytesSent:this.bytesSent,bytesReceived:this.bytesReceived,writes:this.writes,reads:this.reads,prompts:0,tokens:0}}}),u.default.logStorage(d.LoggingServices.VectorDatabase,`ccc${this.clusterId}ccc${this.label}`,e)}),i.CONTENT_VECTOR_DATABASE_STATS_DEBOUNCE)}}},"./src/models/Detection/DetectionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{DetectionManager:()=>p});var n=s("./src/constants/Detection.ts"),r=s("./src/constants/DetectionIssueRules.ts"),i=s("./src/constants/DetectionProblemRules.ts"),o=s("./src/constants/System.ts"),a=s("./src/interfaces/Connection/PeerConnection.ts"),c=s("./src/interfaces/Detection/Detection.ts"),d=s("./src/interfaces/Stats/Stats.ts"),l=s("./src/interfaces/Subscription/SystemEvent.ts"),u=s("./src/interfaces/Utils/Logger.ts"),h=s("./src/utils/Logger/Logger.ts");class p{configs;issues=[];systemTopic;constructor(e){this.configs=e,this.configs.mediator.registerSystemSource(this)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){this.systemTopic=void 0}close(){this.configs.mediator.unregisterSystemSource(this),this.issues=[]}handleStatsSystemEvents(e){switch(e.content.type){case d.StatsMessageType.LocalReport:this.detectLocalIssues(e.content.data);break;case d.StatsMessageType.StreamReport:this.detectStreamIssues(e.content.data)}}detectProblems(e,t,s,n){const r=i.DETECTION_PROBLEM_RULES.find((t=>t.issues.some((t=>t.type===e))));n>=r.issues.find((t=>t.type===e)).threshold&&(this.addProblem(r.type,t,s),this.issues=this.issues.filter((n=>!(n.type===e&&n.nodeId===t&&n.origin===s))))}detectLocalIssues(e){r.DETECTION_CORE_ISSUE_RULES.forEach((t=>{const s=t.reportMetric(e);t.maxThreshold&&s>t.maxThreshold&&this.addIssue(t.type,this.configs.localNode.getId(),a.PeerConnectionOrigin.Sender,s),t.minThreshold&&s<t.minThreshold&&this.addIssue(t.type,this.configs.localNode.getId(),a.PeerConnectionOrigin.Sender,s)}))}detectStreamIssues(e){let t=[];switch(e.origin){case a.PeerConnectionOrigin.Sender:t=r.DETECTION_SENDER_ISSUE_RULES;break;case a.PeerConnectionOrigin.Receiver:t=r.DETECTION_RECEIVER_ISSUE_RULES}e.video&&this.detectVideoIssues(e.nodeId,a.PeerConnectionOrigin.Sender,e.video),e.audio&&this.detectAudioIssues(e.nodeId,a.PeerConnectionOrigin.Sender,e.audio),t.forEach((t=>{const s=t.reportMetric(e);t.maxThreshold&&s>t.maxThreshold&&this.addIssue(t.type,e.nodeId,a.PeerConnectionOrigin.Sender,s),t.minThreshold&&s<t.minThreshold&&this.addIssue(t.type,e.nodeId,a.PeerConnectionOrigin.Sender,s)}))}detectVideoIssues(e,t,s){0!==s.bitrate&&r.DETECTION_VIDEO_ISSUE_RULES.forEach((n=>{const r=n.reportMetric(s);n.maxThreshold&&r>n.maxThreshold&&this.addIssue(n.type,e,t,r,"video"),n.minThreshold&&r<n.minThreshold&&this.addIssue(n.type,e,t,r,"video")}))}detectAudioIssues(e,t,s){0!==s.bitrate&&r.DETECTION_AUDIO_ISSUE_RULES.forEach((n=>{const r=n.reportMetric(s);n.maxThreshold&&r>n.maxThreshold&&this.addIssue(n.type,e,t,r,"audio"),n.minThreshold&&r<n.minThreshold&&this.addIssue(n.type,e,t,r,"audio")}))}addIssue(e,t,s,r,i){h.default.log(u.LoggingChannels.Detection,`Issue detected: ${e}`,e,r),h.default.logEvent("issue",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,remoteId:t,data:{type:e,value:r,kind:i}}),this.issues=this.issues.filter((e=>Date.now()-e.timestamp<n.DETECTION_ISSUE_TIMEOUT)),this.issues.push({timestamp:Date.now(),type:e,nodeId:t,origin:s,value:r,kind:i});const o=this.issues.filter((n=>n.type===e&&n.nodeId===t&&n.origin===s)).length;this.detectProblems(e,t,s,o)}addProblem(e,t,s){h.default.log(u.LoggingChannels.Detection,`Problem detected: ${e}`),h.default.logEvent("problem",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,remoteId:t,data:{type:e}}),this.systemTopic?.publish({sourceId:o.SYSTEM_TOPIC_INTERNAL,messageType:l.SystemMessageType.Detection,content:{type:c.DetectionMessageType.Problem,data:{timestamp:Date.now(),nodeId:t,origin:a.PeerConnectionOrigin.Sender,type:e}}})}}},"./src/models/Node/Agent.ts":(e,t,s)=>{s.r(t),s.d(t,{Agent:()=>i});var n=s("@crewdle/web-sdk-types"),r=s("./src/models/Node/Node.ts");class i extends r.Node{type=n.NodeType.Agent}},"./src/models/Node/AuthAgent.ts":(e,t,s)=>{s.r(t),s.d(t,{AuthAgent:()=>u});var n=s("firebase/firestore"),r=s("@crewdle/web-sdk-types"),i=s("./src/constants/Node.ts"),o=s("./src/errors/SDKInternalError.ts"),a=s("./src/interfaces/Utils/Logger.ts"),c=s("./src/services/Firebase/FirebaseService.ts"),d=s("./src/utils/Interval/Interval.ts"),l=s("./src/utils/Logger/Logger.ts");class u{id;groupId;vendorId;agentConfig;type=r.NodeType.Agent;lastCapacityReport;constructor(e,t,s,n){this.id=e,this.groupId=t,this.vendorId=s,this.agentConfig=n}getId(){return this.id}onConfigurationChange(e){const t=(0,n.onSnapshot)((0,n.doc)(c.default.getFirestore(),`developers/${this.vendorId}/resources/agent/items/${this.groupId}`),(t=>{if(t.exists()){const s=t.data();if(this.agentConfig.timestamp.isEqual(s.timestamp))return;l.default.log(a.LoggingChannels.Node,"agent-config-changed",{agentId:this.id,groupId:this.groupId,oldConfig:this.agentConfig,newConfig:s}),this.agentConfig=s,e()}}));return()=>t()}setReportCapacity(e){return this.reportCapacity(this.groupId,e),d.default.setInterval((()=>this.reportCapacity(this.groupId,e)),i.NODE_AGENT_CAPACITY_REPORT_INTERVAL)}getCapacityReport(){if(!this.lastCapacityReport)throw new o.SDKInternalError(o.SDKInternalError.codes.MistletCapacityReportNotSet);return this.lastCapacityReport}async reportCapacity(e,t){const s=await t();this.lastCapacityReport=s,await(0,n.addDoc)((0,n.collection)(c.default.getFirestore(),`developers/${this.vendorId}/capacities`),{agentId:this.id,groupId:e,timestamp:(0,n.serverTimestamp)(),capacity:s})}}},"./src/models/Node/AuthUser.ts":(e,t,s)=>{s.r(t),s.d(t,{AuthUser:()=>i});var n=s("@crewdle/web-sdk-types"),r=s("./src/utils/Observer/Observer.ts");class i{id;displayName;email;type=n.NodeType.User;joinedClusters=new Map;observer=(0,r.createObserver)();constructor(e,t,s){this.id=e,this.displayName=t,this.email=s}getId(){return this.id}getDisplayName(){return this.displayName}getEmail(){return this.email}setDisplayName(e){this.displayName!==e&&(this.displayName=e,this.observer.publish(this))}setEmail(e){this.email!==e&&(this.email=e,this.observer.publish(this))}registerCluster(e,t){if(this.joinedClusters.has(e))return;const s=this.observer.subscribe(t);this.joinedClusters.set(e,s)}unregisterCluster(e){if(!this.joinedClusters.has(e))return;const t=this.joinedClusters.get(e);t&&t(),this.joinedClusters.delete(e)}}},"./src/models/Node/LocalAgent.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalAgent:()=>a});var n=s("./src/constants/Node.ts"),r=s("./src/interfaces/Node/NodeMessage.ts"),i=s("./src/interfaces/Subscription/SystemEvent.ts"),o=s("./src/models/Node/Agent.ts");class a extends o.Agent{systemTopic;currentVersion=Date.now();updateDebounceTimeout;lastUpdated;close(){this.updateDebounceTimeout&&(clearTimeout(this.updateDebounceTimeout),delete this.updateDebounceTimeout),delete this.lastUpdated,this.currentVersion=Date.now(),super.close()}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}answerJoin(e){!this.updateDebounceTimeout&&this.rank&&this.systemTopic.publish({sourceId:this.id,destinationIds:[e],propagate:!0,messageType:i.SystemMessageType.Node,content:{type:r.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}addRemoteConnection(e){this.remoteConnections.has(e)||(this.remoteConnections.add(e),this.incrementVersion(),this.publishUserUpdate(!0))}removeRemoteConnection(e){this.remoteConnections.has(e)&&(this.remoteConnections.delete(e),this.incrementVersion(),this.publishUserUpdate(!0))}getCurrentVersion(){return this.currentVersion}setRank(e,t=!0){this.rank!==e&&(this.rank=e,t&&(this.incrementVersion(),this.publishUserUpdate()))}incrementVersion(){this.currentVersion=Date.now()}publishUserUpdate(e=!1){if(this.rank){if(this.lastUpdated||(this.lastUpdated=Date.now()),this.updateDebounceTimeout){if(Date.now()-this.lastUpdated>n.NODE_UPDATE_DEBOUNCE_TIME_LIMIT)return;clearTimeout(this.updateDebounceTimeout)}this.updateDebounceTimeout=setTimeout((()=>{delete this.lastUpdated,delete this.updateDebounceTimeout,this.systemTopic.publish({sourceId:this.id,propagate:!0,messageType:i.SystemMessageType.Node,content:{type:e?r.NodeMessageType.NodeConnectionsUpdate:r.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}),n.NODE_UPDATE_DEBOUNCE_TIME)}}}},"./src/models/Node/LocalUser.ts":(e,t,s)=>{s.r(t),s.d(t,{LocalUser:()=>a});var n=s("./src/constants/Node.ts"),r=s("./src/interfaces/Node/NodeMessage.ts"),i=s("./src/interfaces/Subscription/SystemEvent.ts"),o=s("./src/models/Node/User.ts");class a extends o.User{systemTopic;currentVersion=Date.now();updateDebounceTimeout;lastUpdated;close(){this.updateDebounceTimeout&&(clearTimeout(this.updateDebounceTimeout),delete this.updateDebounceTimeout),delete this.lastUpdated,this.currentVersion=Date.now(),super.close()}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}answerJoin(e){!this.updateDebounceTimeout&&this.rank&&this.systemTopic.publish({sourceId:this.id,destinationIds:[e],propagate:!0,messageType:i.SystemMessageType.Node,content:{type:r.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type,displayName:this.getDisplayName(),email:this.getEmail()},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}addRemoteConnection(e){this.remoteConnections.has(e)||(this.remoteConnections.add(e),this.incrementVersion(),this.publishUserUpdate(!0))}removeRemoteConnection(e){this.remoteConnections.has(e)&&(this.remoteConnections.delete(e),this.incrementVersion(),this.publishUserUpdate(!0))}getCurrentVersion(){return this.currentVersion}setDisplayName(e){this.displayName!==e&&(this.displayName=e,this.incrementVersion(),this.publishUserUpdate())}setEmail(e){this.email!==e&&(this.email=e,this.incrementVersion(),this.publishUserUpdate())}setRank(e,t=!0){this.rank!==e&&(this.rank=e,t&&(this.incrementVersion(),this.publishUserUpdate()))}incrementVersion(){this.currentVersion=Date.now()}publishUserUpdate(e=!1){if(this.rank){if(this.lastUpdated||(this.lastUpdated=Date.now()),this.updateDebounceTimeout){if(Date.now()-this.lastUpdated>n.NODE_UPDATE_DEBOUNCE_TIME_LIMIT)return;clearTimeout(this.updateDebounceTimeout)}this.updateDebounceTimeout=setTimeout((()=>{delete this.lastUpdated,delete this.updateDebounceTimeout,this.systemTopic.publish({sourceId:this.id,propagate:!0,messageType:i.SystemMessageType.Node,content:{type:e?r.NodeMessageType.NodeConnectionsUpdate:r.NodeMessageType.NodeUpdate,id:this.id,metaData:{type:this.type,displayName:this.getDisplayName(),email:this.getEmail()},rank:this.getRank(),remoteConnections:Array.from(this.remoteConnections),version:this.currentVersion}})}),n.NODE_UPDATE_DEBOUNCE_TIME)}}}},"./src/models/Node/Node.ts":(e,t,s)=>{s.r(t),s.d(t,{Node:()=>n});class n{id;remoteConnections;rank;constructor(e,t=new Set,s){this.id=e,this.remoteConnections=t,this.rank=s}close(){this.rank=void 0,this.remoteConnections.clear()}getId(){return this.id}getRank(){return this.rank}getRemoteConnections(){return this.remoteConnections}}},"./src/models/Node/NodeManager.ts":(e,t,s)=>{s.r(t),s.d(t,{NodeManager:()=>y});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/Node.ts"),i=s("./src/constants/System.ts"),o=s("./src/errors/EarlyReturnError.ts"),a=s("./src/errors/SDKInternalError.ts"),c=s("./src/interfaces/Connection/PeerConnection.ts"),d=s("./src/interfaces/Node/Node.ts"),l=s("./src/interfaces/Node/NodeMessage.ts"),u=s("./src/interfaces/Subscription/SystemEvent.ts"),h=s("./src/interfaces/Utils/Logger.ts"),p=s("./src/models/Node/RemoteAgent.ts"),g=s("./src/models/Node/RemoteUser.ts"),b=s("./src/services/Discovery/FirebaseRDBDiscoveryService.ts"),m=s("./src/utils/Interval/Interval.ts"),S=s("./src/utils/Logger/Logger.ts");class y{configs;graphService;remoteUnsubscriber;discoveryService;discoveryUnsubscriber;ancestors=[];systemTopic;optimizationLayers=new Map;debounceProcessRank;lastProcessRank;constructor(e,t){this.configs=e,this.graphService=t,this.discoveryService=new b.FirebaseRDBDiscoveryService(this.configs.vendorId,this.configs.clusterId,this.configs.localNode,this.graphService.getMinConnections()),this.discoveryUnsubscriber=this.discoveryService.onNodeDisconnect(this.handleNodeDisconnect.bind(this)),this.configs.mediator.registerSystemSource(this.configs.localNode),this.configs.mediator.registerSystemSource(this),this.remoteUnsubscriber=m.default.setInterval((()=>{const e=Date.now();this.graphService.getRemoteNodes().forEach((t=>{t.getStatus()===d.NodeStatus.Offline&&t.getLastUpdated()<e-r.NODE_CLEAN_REMOTE_NODES_THRESHOLD&&this.graphService.deleteRemoteNode(t.getId())}))}),r.NODE_CLEAN_REMOTE_NODES_INTERVAL)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}close(){this.debounceProcessRank&&(clearTimeout(this.debounceProcessRank),delete this.debounceProcessRank),delete this.lastProcessRank,this.configs.localNode.close(),this.remoteUnsubscriber(),this.discoveryUnsubscriber(),this.configs.mediator.unregisterSystemSource(this.configs.localNode),this.configs.mediator.unregisterSystemSource(this),this.discoveryService.close()}getAncestorIds(){return this.ancestors}getLocalId(){return this.configs.localNode.getId()}getLocalNode(){return this.configs.localNode}getRemoteNodes(e){const t=Array.from(this.graphService.getRemoteNodes().values()).filter((e=>e.getStatus()===d.NodeStatus.Online));return e?t.filter(e):t}async discover(){return this.ancestors=await this.discoveryService.join(),this.ancestors.length<this.graphService.getMinConnections()&&(this.configs.localNode.setRank(this.ancestors.length+1),this.processRank()),this.ancestors}getDistance(e,t){const s=this.configs.localNode.getRemoteConnections(),n=new Set(s),i=Array.from(s).filter((t=>t!==e)).map((e=>({id:e,distance:1})));for(;i.length>0;){const e=i.shift();if(!e)continue;if(e.id===t)return e.distance;const s=this.graphService.getRemoteNode(e.id);s&&s.getStatus()!==d.NodeStatus.Offline&&s.getRemoteConnections().forEach((t=>{n.has(t)||(n.add(t),i.push({id:t,distance:e.distance+r.NODE_DISTANCE_HOP}))}))}return-1}handleNodeSystemEvents(e){try{switch(e.content.type){case l.NodeMessageType.NodeUpdate:case l.NodeMessageType.NodeConnectionsUpdate:this.handleNodeUpdate(e.content),S.default.log(h.LoggingChannels.Node,"NodeManager - NodeUpdate",`'${this.configs.localNode.getId()}, ${e.sourceId}'`,e,e.content);break;case l.NodeMessageType.NodeLeave:this.removeNode(e.content.id),S.default.log(h.LoggingChannels.Node,"NodeManager - NodeLeave",`'${this.configs.localNode.getId()}, ${e.sourceId}'`,e,e.content)}}catch(e){if(e instanceof o.EarlyReturnError)return void S.default.log(h.LoggingChannels.Node,e.message);throw e}}handlePeerConnectionSystemEvents(e){switch(e.content.type){case c.PeerConnectionMessageType.Success:this.handleConnectionSuccess(e.sourceId),S.default.log(h.LoggingChannels.Node,"NodeManager - ConnectionSuccess",`'${this.configs.localNode.getId()}, ${e.sourceId}'`,e,e.content);break;case c.PeerConnectionMessageType.Disconnect:this.publishNodeLeave(e.sourceId),S.default.log(h.LoggingChannels.Node,"NodeManager - PublishNodeLeave",this.configs.localNode.getId(),e,e.content)}}handleNodeJoin(e){this.createRemoteNode(e),this.notifyJoin(e)}notifyJoin(e){this.configs.localNode.answerJoin(e.id),this.publishNodeJoin(e.id),this.notifyClusterNodeJoin(e)}handleNodeUpdate(e){const{id:t,metaData:s,rank:r,remoteConnections:i,version:o}=e,a=this.graphService.getRemoteNode(t);if(a){if(!(o<=a.getCurrentVersion())){if(a.setRemoteConnections(i),a.setCurrentVersion(o),a.type===n.NodeType.User&&s.type===n.NodeType.User&&(a.setDisplayName(s.displayName),a.setEmail(s.email)),r&&a.setRank(r),this.setLocalRank(t,r),a.getStatus()===d.NodeStatus.Offline)return a.setStatus(d.NodeStatus.Online),this.processRank(),void this.notifyJoin(e);this.processRank(),this.notifyClusterNodeUpdate({id:t,metaData:s,remoteConnections:i,version:o})}}else this.handleNodeJoin(e)}setLocalRank(e,t){t&&this.ancestors.includes(e)&&this.configs.localNode.setRank(t+this.ancestors.indexOf(e)+1)}handleConnectionSuccess(e){this.configs.localNode.addRemoteConnection(e)}createRemoteNode({id:e,metaData:t,rank:s,remoteConnections:r,version:i}){if(this.graphService.hasRemoteNode(e))throw new o.EarlyReturnError(`Cannot create remote node: Node already exists: ${e}`);switch(t.type){case n.NodeType.User:const{displayName:o,email:a}=t;this.graphService.setRemoteNode(e,new g.RemoteUser(e,o,a,new Set(r),i,s));break;case n.NodeType.Agent:this.graphService.setRemoteNode(e,new p.RemoteAgent(e,new Set(r),i,s))}this.setLocalRank(e,s),this.processRank()}publishNodeJoin(e){this.systemTopic.publish({sourceId:i.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Node,content:{type:l.NodeMessageType.NodeJoin,id:e}})}publishNodeLeave(e){this.systemTopic?.publish({sourceId:i.SYSTEM_TOPIC_INTERNAL,messageType:u.SystemMessageType.Node,content:{type:l.NodeMessageType.NodeLeave,id:e}})}handleNodeDisconnect(e){if(e===this.configs.localNode.getId())return this.configs.mediator.notifyCluster("cluster-disconnect",{id:e}),this.configs.mediator.close({force:!0},!0),this.configs.mediator.open(),void this.configs.mediator.initialize();this.publishNodeLeave(e)}removeNode(e){this.ancestors.includes(e)?this.manageAncestor(e):this.configs.localNode.getRemoteConnections().has(e)&&this.manageOptimization(e),this.configs.localNode.removeRemoteConnection(e);const t=Array.from(this.optimizationLayers.entries()).find((([,e])=>e==e));t&&this.optimizationLayers.delete(t[0]);const s=this.graphService.getRemoteNode(e);if(!s)return;const n=s.getRank(),r=this.configs.localNode.getRank();r&&n&&n<r&&this.configs.localNode.setRank(r-1,!1),Array.from(this.graphService.getRemoteNodes().values()).forEach((e=>{const t=e.getRank();t&&n&&n<t&&e.setRank(t-1)})),s.setStatus(d.NodeStatus.Offline),this.configs.mediator.notifyCluster(`${s.type}-leave`,{id:e})}notifyClusterNodeJoin({id:e,metaData:t,remoteConnections:s}){switch(t.type){case n.NodeType.User:this.configs.mediator.notifyCluster("user-join",{id:e,metaData:t,remoteConnections:s});break;case n.NodeType.Agent:this.configs.mediator.notifyCluster("agent-join",{id:e,metaData:t,remoteConnections:s})}}notifyClusterNodeUpdate({id:e,metaData:t,remoteConnections:s}){switch(t.type){case n.NodeType.User:this.configs.mediator.notifyCluster("user-update",{id:e,metaData:t,remoteConnections:s});break;case n.NodeType.Agent:this.configs.mediator.notifyCluster("agent-update",{id:e,metaData:t,remoteConnections:s})}}processRank(){if(this.lastProcessRank||(this.lastProcessRank=Date.now()),this.debounceProcessRank){if(Date.now()-this.lastProcessRank>r.NODE_PROCESS_RANK_DEBOUCE_TIME_LIMIT)return;clearTimeout(this.debounceProcessRank)}this.debounceProcessRank=setTimeout((async()=>{delete this.lastProcessRank,delete this.debounceProcessRank;const e=this.configs.localNode.getRank();if(!e)return;const t=this.graphService.getCurrentMaxLayer(this.graphService.getRemoteNodes().size);if(this.optimizationLayers.size>=t)return;let s=1;for(;this.configs.mediator.getConnections().length<this.graphService.getMaxConnections()&&s<=t;){if(this.optimizationLayers.has(s)){s+=1;continue}const t=this.graphService.getNextTargetRank(e,s),n=Array.from(this.graphService.getRemoteNodes().values()).find((e=>e.getRank()===t&&e.getStatus()===d.NodeStatus.Online));if(n){try{await this.configs.mediator.createConnection(n.getId(),c.PeerConnectionType.Optimization),this.optimizationLayers.set(s,n.getId())}catch(e){if(!(e instanceof a.SDKInternalError&&e.code===a.SDKInternalError.codes.RemoteConnectionExists))throw e;S.default.log(h.LoggingChannels.Node,this.configs.localNode.getId(),n.getId(),e.message)}s+=1}else s+=1}}),r.NODE_PROCESS_RANK_DEBOUCE_TIME)}async manageAncestor(e){this.ancestors.splice(this.ancestors.indexOf(e),1);const t=await this.discoveryService.getAncestors();for(const e of t)if(!this.ancestors.includes(e)){const t=Array.from(this.optimizationLayers.entries()).find((([,t])=>t===e));t&&this.optimizationLayers.delete(t[0]),this.configs.mediator.createConnection(e,c.PeerConnectionType.Core)}0===t.length&&this.configs.localNode.setRank(1),this.ancestors=t}async manageOptimization(e){const t=this.configs.localNode.getRank();if(!t)return;const s=this.graphService.getRemoteNode(e);if(!s||s.getStatus()===d.NodeStatus.Offline)return;const n=s.getRank();if(!n||n<t)return;const r=this.getOutgoingOptimizationConnections(this.configs.localNode.getRemoteConnections(),t),i=this.getOutgoingOptimizationConnections(s.getRemoteConnections(),n)[r.findIndex((([t])=>t===e))];if(!i||this.configs.localNode.getRemoteConnections().has(i[0]))return;const o=this.graphService.getRemoteNode(i[0]);if(o&&o.getStatus()!==d.NodeStatus.Offline)try{await this.configs.mediator.createConnection(i[0],c.PeerConnectionType.Optimization);const t=Array.from(this.optimizationLayers.entries()).find((([,t])=>t===e));t&&this.optimizationLayers.set(t[0],i[0])}catch(e){if(!(e instanceof a.SDKInternalError&&e.code===a.SDKInternalError.codes.RemoteConnectionExists))throw e;S.default.log(h.LoggingChannels.Node,this.configs.localNode.getId(),i[0],e.message)}}getOutgoingOptimizationConnections(e,t){return Array.from(e).reduce(((e,s)=>{const n=this.graphService.getRemoteNode(s);if(!n||n.getStatus()===d.NodeStatus.Offline)return e;const r=n.getRank();if(!r)return e;const i=r-t;return i<=this.graphService.getMinConnections()||e.push([s,i]),e}),[]).sort((([,e],[,t])=>e-t))}}},"./src/models/Node/RemoteAgent.ts":(e,t,s)=>{s.r(t),s.d(t,{RemoteAgent:()=>i});var n=s("./src/interfaces/Node/Node.ts"),r=s("./src/models/Node/Agent.ts");class i extends r.Agent{currentVersion;status=n.NodeStatus.Online;lastUpdated=Date.now();constructor(e,t=new Set,s,n){super(e,t,n),this.currentVersion=s}getCurrentVersion(){return this.currentVersion}getStatus(){return this.status}getLastUpdated(){return this.lastUpdated}setRank(e){this.rank!==e&&(this.rank=e,this.updateLastUpdated())}setRemoteConnections(e){let t=!1;for(const s of this.remoteConnections)e.includes(s)||(t=!0,this.remoteConnections.delete(s));for(const s of e)this.remoteConnections.has(s)||(t=!0,this.remoteConnections.add(s));t&&this.updateLastUpdated()}setCurrentVersion(e){this.currentVersion!==e&&(this.currentVersion=e,this.updateLastUpdated())}setStatus(e){this.status!==e&&(this.status=e,this.updateLastUpdated(),e===n.NodeStatus.Offline&&this.close())}updateLastUpdated(){this.lastUpdated=Date.now()}}},"./src/models/Node/RemoteUser.ts":(e,t,s)=>{s.r(t),s.d(t,{RemoteUser:()=>i});var n=s("./src/interfaces/Node/Node.ts"),r=s("./src/models/Node/User.ts");class i extends r.User{currentVersion;status=n.NodeStatus.Online;lastUpdated=Date.now();constructor(e,t,s,n=new Set,r,i){super(e,t,s,n,i),this.currentVersion=r}getCurrentVersion(){return this.currentVersion}getStatus(){return this.status}getLastUpdated(){return this.lastUpdated}setDisplayName(e){this.displayName!==e&&(this.displayName=e,this.updateLastUpdated())}setEmail(e){this.email!==e&&(this.email=e,this.updateLastUpdated())}setRank(e){this.rank!==e&&(this.rank=e,this.updateLastUpdated())}setRemoteConnections(e){let t=!1;for(const s of this.remoteConnections)e.includes(s)||(t=!0,this.remoteConnections.delete(s));for(const s of e)this.remoteConnections.has(s)||(t=!0,this.remoteConnections.add(s));t&&this.updateLastUpdated()}setCurrentVersion(e){this.currentVersion!==e&&(this.currentVersion=e,this.updateLastUpdated())}setStatus(e){this.status!==e&&(this.status=e,this.updateLastUpdated(),e===n.NodeStatus.Offline&&this.close())}updateLastUpdated(){this.lastUpdated=Date.now()}}},"./src/models/Node/User.ts":(e,t,s)=>{s.r(t),s.d(t,{User:()=>i});var n=s("@crewdle/web-sdk-types"),r=s("./src/models/Node/Node.ts");class i extends r.Node{id;displayName;email;remoteConnections;rank;type=n.NodeType.User;constructor(e,t,s,n=new Set,r){super(e,n,r),this.id=e,this.displayName=t,this.email=s,this.remoteConnections=n,this.rank=r}getDisplayName(){return this.displayName}getEmail(){return this.email}}},"./src/models/Orchestrator/Orchestrator.ts":(e,t,s)=>{s.r(t),s.d(t,{Orchestrator:()=>D});var n=s("@crewdle/web-sdk-types"),r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/errors/EarlyReturnError.ts"),o=s("./src/errors/SDKInternalError.ts"),a=s("./src/interfaces/Connection/PeerConnection.ts"),c=s("./src/interfaces/SDK/SDK.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/models/Connection/ConnectionManager.ts"),h=s("./src/models/Content/ContentManager.ts"),p=s("./src/models/Detection/DetectionManager.ts"),g=s("./src/models/Node/LocalAgent.ts"),b=s("./src/models/Node/LocalUser.ts"),m=s("./src/models/Node/AuthAgent.ts"),S=s("./src/models/Node/NodeManager.ts"),y=s("./src/models/Remediation/RemediationManager.ts"),T=s("./src/models/Stats/StatsManager.ts"),f=s("./src/models/Subscription/Helpers.ts"),C=s("./src/models/Subscription/SubscriptionManager.ts"),I=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),E=s("./src/models/Subscription/SystemTopic.ts"),v=s("./src/services/Graph/GraphService.ts"),w=s("./src/utils/Logger/Helpers.ts"),N=s("./src/utils/Logger/Logger.ts");class D{vendorId;clusterId;authNode;authService;options;configs;clusterEventEmitter;contentManager;connectionManager;subscriptionManager;statsManager;detectionManager;remediationManager;nodeManager;graphService;systemTopic=new E.SystemTopic;systemTopicUnsubscribe;localNode;constructor(e,t,s,r,i,o,a){switch(this.vendorId=e,this.clusterId=t,this.authNode=s,this.authService=r,this.options=i,this.configs=o,this.clusterEventEmitter=a,s.type){case n.NodeType.User:this.localNode=new b.LocalUser(s.getId(),s.getDisplayName(),s.getEmail());break;case n.NodeType.Agent:default:this.localNode=new g.LocalAgent(s.getId())}const c=this.getConfigs();this.graphService=new v.GraphService(this.options),this.contentManager=new h.ContentManager(c,this.options,this.configs.searchApiKey),this.connectionManager=new u.ConnectionManager(c,this.authService,this.graphService,this.configs.iceServers,this.options),this.subscriptionManager=new C.SubscriptionManager(c,this.options.maxOutgoingSubscriptions,this.graphService.getMaxDistance()),this.statsManager=new T.StatsManager(c),this.detectionManager=new p.DetectionManager(c),this.remediationManager=new y.RemediationManager(c),this.nodeManager=new S.NodeManager(c,this.graphService),this.systemTopicUnsubscribe=this.initializeSystemTopic()}open(){const e=this.getConfigs();this.connectionManager=new u.ConnectionManager(e,this.authService,this.graphService,this.configs.iceServers,this.options),this.subscriptionManager=new C.SubscriptionManager(e,this.options.maxOutgoingSubscriptions,this.graphService.getMaxDistance()),this.statsManager=new T.StatsManager(e),this.detectionManager=new p.DetectionManager(e),this.remediationManager=new y.RemediationManager(e),this.nodeManager=new S.NodeManager(e,this.graphService);const t=this.connectionManager.getConnectionGroup();this.contentManager.getPubSubTopics().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset()})),this.contentManager.getObjectStoreBuckets().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset(),e.sync()})),this.contentManager.getKeyValueDatabases().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset(),this.syncKeyValueDatabase(e)})),this.contentManager.getJobDispatchers().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset()})),this.contentManager.getJobWorkers().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset()})),this.contentManager.getVectorDatabases().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset()})),this.contentManager.getGraphDatabases().forEach((e=>{this.subscriptionManager.createOutgoingSubscription(e,t),this.subscriptionManager.createIncomingSubscription(t,e),e.reset()})),this.systemTopicUnsubscribe=this.initializeSystemTopic()}registerSystemSource(e){try{this.systemTopic.registerSource(e)}catch(e){this.handleError(e,{})}}unregisterSystemSource(e){try{this.systemTopic.unregisterSource(e)}catch(e){this.handleError(e,{})}}createConnection(e,t){return this.connectionManager.createConnection(e,t)}getConnection(e){try{return this.connectionManager.getConnection(e)}catch(e){throw this.handleError(e,{})}}getConnections(e){try{return this.connectionManager.getConnections(e)}catch(e){throw this.handleError(e,{})}}getRemoteMediaStream(e,t){try{return this.contentManager.getRemoteMediaStreams((s=>s.getOwnerId()===e&&s.getLabel()===t))[0]}catch(e){throw this.handleError(e,{})}}getLocalMediaStream(e){try{return this.contentManager.getLocalMediaStreams((t=>t.getLabel()===e))[0]}catch(e){throw this.handleError(e,{})}}notifyCluster=(...e)=>{try{return this.clusterEventEmitter.emit(...e)}catch(e){throw this.handleError(e,{})}};registerRemoteNode(e){try{this.statsManager.addRemoteNode(e)}catch(e){throw this.handleError(e,{})}}unregisterRemoteNode(e){try{this.statsManager.removeRemoteNode(e)}catch(e){throw this.handleError(e,{})}}collectStats(e){return this.connectionManager.collectStats(e)}async initialize(){try{await this.connectionManager.initialize();const e=await this.nodeManager.discover();for(const t of e)this.connectionManager.createConnection(t)}catch(e){throw this.handleError(e,{})}}updateUser(e){this.localNode.type===n.NodeType.User&&(this.localNode.setEmail(e.getEmail()),this.localNode.setDisplayName(e.getDisplayName()))}close({force:e=!1},t=!1){if(N.default.warning("orchestrator-close",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type}),!e&&this.connectionManager.hasBufferedData())throw new r.SDKClientError(r.SDKClientErrorCodes.ConnectionBufferNotEmpty,"Cannot close the SDK while data is being transferred. Use `force` parameter to interrupt the connection");N.default.processBatch(),this.systemTopicUnsubscribe(),this.remediationManager.close(),this.detectionManager.close(),this.statsManager.close(),this.subscriptionManager.close(),this.connectionManager.close(),this.contentManager.close(t),this.nodeManager.close()}openPubSubTopic(e){try{const t=this.contentManager.createPubSubTopic(e),s=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(t,s),this.subscriptionManager.createIncomingSubscription(s,t),t}catch(e){throw this.handleError(e,{})}}async openObjectStoreBucket(e,t){try{const s=this.contentManager.createObjectStoreBucket(e,this.options.objectStoreConnector),n=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(s,n),this.subscriptionManager.createIncomingSubscription(n,s),await s.sync(t?.syncContent??!0),s}catch(e){throw this.handleError(e,{})}}async openKeyValueDatabase(e,t){try{const s=await this.contentManager.createKeyValueDatabase(e,t,this.options.keyValueDatabaseConnector),n=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(s,n),this.subscriptionManager.createIncomingSubscription(n,s),await s.open(),this.syncKeyValueDatabase(s),s}catch(e){throw this.handleError(e,{})}}async openJobDispatcher(e){try{const t=await this.contentManager.createJobDispatcher(e,this.graphService),s=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(t,s),this.subscriptionManager.createIncomingSubscription(s,t),t.open(),t}catch(e){throw this.handleError(e,{})}}async openJobWorker(e){throw new Error("Method not supported")}async openGenerativeAIContext(e){try{const t=await this.contentManager.createGenerativeAIContext(e,this.graphService),s=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(t,s),this.subscriptionManager.createIncomingSubscription(s,t),t.open(),t}catch(e){throw console.error(e),this.handleError(e,{})}}async openGenerativeAIWorker(e){try{if(!this.options.generativeAIWorkerConnectors||!this.options.documentParserConnector||!this.options.nlpLibraryConnector)throw new r.SDKClientError(r.SDKClientErrorCodes.GenerativeAIWorkerMissingConnector,"Missing AI worker connector");if(!(this.authNode instanceof m.AuthAgent))throw new r.SDKClientError(r.SDKClientErrorCodes.NodeInvalidType,"Node is not an agent");const t=[];for(const e of this.options.generativeAIWorkerConnectors)t.push(new e);const s=new this.options.documentParserConnector,n=new this.options.nlpLibraryConnector;let i;this.options.searchConnector&&(i=new this.options.searchConnector);const o=await this.contentManager.createGenerativeAIWorker(e,this.authNode,t,s,n,i),a=this.connectionManager.getConnectionGroup();this.subscriptionManager.createOutgoingSubscription(o,a),this.subscriptionManager.createIncomingSubscription(a,o);const c=this.nodeManager.getAncestorIds();return o.open(0===c.length||void 0),o}catch(e){throw this.handleError(e,{})}}openGraphDatabase(e){try{if(!this.options.graphDatabaseConnector)throw new r.SDKClientError(r.SDKClientErrorCodes.GraphDatabaseMissingConnector,"Missing graph database connector");if(!(this.authNode instanceof m.AuthAgent))throw new r.SDKClientError(r.SDKClientErrorCodes.NodeInvalidType,"Node is not an agent");const t=this.contentManager.createGraphDatabase(e,this.options.graphDatabaseConnector),s=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(t,s),this.subscriptionManager.createIncomingSubscription(s,t),t}catch(e){throw this.handleError(e,{})}}openVectorDatabase(e){try{if(!this.options.vectorDatabaseConnector)throw new r.SDKClientError(r.SDKClientErrorCodes.VectorDatabaseMissingConnector,"Missing vector database connector");if(!(this.authNode instanceof m.AuthAgent))throw new r.SDKClientError(r.SDKClientErrorCodes.NodeInvalidType,"Node is not an agent");const t=this.contentManager.createVectorDatabase(e,this.options.vectorDatabaseConnector),s=this.connectionManager.getConnectionGroup();return this.subscriptionManager.createOutgoingSubscription(t,s),this.subscriptionManager.createIncomingSubscription(s,t),t}catch(e){throw this.handleError(e,{})}}getPubSubTopics(e){try{return this.contentManager.getPubSubTopics(e)}catch(e){throw this.handleError(e,{})}}getObjectStoreBuckets(e){try{return this.contentManager.getObjectStoreBuckets(e)}catch(e){throw this.handleError(e,{})}}getKeyValueDatabases(e){try{return this.contentManager.getKeyValueDatabases(e)}catch(e){throw this.handleError(e,{})}}getGenerativeAIContexts(e){try{return this.contentManager.getGenerativeAIContexts(e)}catch(e){throw this.handleError(e,{})}}getGenerativeAIWorkers(e){try{return this.contentManager.getGenerativeAIWorkers(e)}catch(e){throw this.handleError(e,{})}}getGraphDatabases(e){try{return this.contentManager.getGraphDatabases(e)}catch(e){throw this.handleError(e,{})}}createLocalMediaStream(e,t){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new r.SDKClientError(r.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.createLocalMediaStream(e,t)}catch(e){throw this.handleError(e,{})}}createLocalDynamicMediaStream(e,t){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new r.SDKClientError(r.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.createLocalDynamicMediaStream(e,t)}catch(e){throw this.handleError(e,{})}}getLocalMediaStreams(e){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new r.SDKClientError(r.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.getLocalMediaStreams(e)}catch(e){throw this.handleError(e,{})}}getRemoteMediaStreams(e){if(!this.configs.features.includes(c.IInternalFeatures.MediaStream))throw new r.SDKClientError(r.SDKClientErrorCodes.FeatureNotEnabled,"MediaStream feature not enabled");try{return this.contentManager.getRemoteMediaStreams(e)}catch(e){throw this.handleError(e,{})}}getVectorDatabases(e){try{return this.contentManager.getVectorDatabases(e)}catch(e){throw this.handleError(e,{})}}getDistance(e,t){return this.nodeManager.getDistance(e,t)}getLocalNode(){return this.nodeManager.getLocalNode()}getRemoteNodes(e){try{return this.nodeManager.getRemoteNodes(e)}catch(e){throw this.handleError(e,{})}}waitForArrayBufferSize(){return this.connectionManager.waitForArrayBufferSize()}async handleSystemEvents(e){try{if(N.default.log(l.LoggingChannels.Events,"Orchestrator handleSystemEvents",this.nodeManager.getLocalId(),e),(0,f.isSender)(e,this.nodeManager.getLocalId()))return void this.connectionManager.handleOutgoingSystemEvents(e);switch(e.messageType){case d.SystemMessageType.Content:this.statsManager.handleContentSystemEvents(e),this.subscriptionManager.handleContentSystemEvents(e),this.contentManager.handleContentSystemEvents(e);break;case d.SystemMessageType.Node:this.subscriptionManager.handleNodeSystemEvents(e),this.connectionManager.handleNodeSystemEvents(e),this.contentManager.handleNodeSystemEvents(e),this.nodeManager.handleNodeSystemEvents(e);break;case d.SystemMessageType.Detection:this.remediationManager.handleDetectionSystemEvents(e);break;case d.SystemMessageType.Remediation:this.remediationManager.handleRemediationSystemEvents(e);break;case d.SystemMessageType.Stats:this.detectionManager.handleStatsSystemEvents(e);break;case d.SystemMessageType.Subscription:e.content.type!==I.SubscriptionMessageType.UnsubscribeMediaStream?(this.subscriptionManager.handleSubscriptionSystemEvents(e),this.contentManager.handleSubscriptionSystemEvents(e)):(this.contentManager.handleSubscriptionSystemEvents(e),this.subscriptionManager.handleSubscriptionSystemEvents(e));break;case d.SystemMessageType.PeerConnection:await this.connectionManager.handlePeerConnectionSystemEvents(e),this.statsManager.handlePeerConnectionSystemEvents(e),this.nodeManager.handlePeerConnectionSystemEvents(e),this.subscriptionManager.handlePeerConnectionSystemEvents(e)}}catch(e){throw this.handleError(e,{})}}handleError(e,t){if(!(e instanceof i.EarlyReturnError)){if(e instanceof r.SDKClientError)throw e;if(!(e instanceof Error))throw new r.SDKClientError(r.SDKClientErrorCodes.InternalSDKError,`Internal unknown error: ${e}`);if(!(e instanceof o.SDKInternalError))throw new r.SDKClientError(r.SDKClientErrorCodes.InternalSDKError,`Internal error: ${e.message}`);switch(e.code){case o.SDKInternalError.codes.MissingSystemTopic:case o.SDKInternalError.codes.MissingRemoteConnection:case o.SDKInternalError.codes.PeerConnectionInvalidDestination:case o.SDKInternalError.codes.ConnectionNotinitialized:case o.SDKInternalError.codes.ConnectionNotConnected:case o.SDKInternalError.codes.InvalidDataChannel:case o.SDKInternalError.codes.InvalidPublisher:case o.SDKInternalError.codes.InvalidSubscriber:case o.SDKInternalError.codes.SubscriptionRequestDoesNotExist:case o.SDKInternalError.codes.SubscriptionRequestFailed:case o.SDKInternalError.codes.SubscriptionRequestNoAnswer:case o.SDKInternalError.codes.InvalidSubscription:}throw N.default.error(`sdk-internal-error: ${e.message}`,{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type},e),new r.SDKClientError(r.SDKClientErrorCodes.InternalSDKError,`Internal SDK error: ${e.message}`)}}getConfigs(){return{mediator:this,vendorId:this.vendorId,clusterId:this.clusterId,localNode:this.localNode}}initializeSystemTopic(){return this.systemTopic.subscribe((e=>{const t=(0,w.getFormattedSytemLog)(e,this.localNode.getId()),s=e.messageType===d.SystemMessageType.Stats||e.messageType===d.SystemMessageType.PeerConnection&&e.content.type===a.PeerConnectionMessageType.Stats?l.LoggingChannels.SystemStats:l.LoggingChannels.System;N.default.logRaw(s,`${e.uuid} - ${t}`,e),this.handleSystemEvents(e).catch((e=>{console.error(e)}))}))}async syncKeyValueDatabase(e,t){t=this.findNextAncestor(t),await e.sync(t,(()=>this.syncKeyValueDatabase(e,t)))}findNextAncestor(e){const t=this.nodeManager.getAncestorIds();if(!e)return t[0];const s=t.findIndex((t=>e===t)),n=t[s+1];return t.length>0&&!n?t[0]:n}}},"./src/models/Remediation/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{applyRemediation:()=>a,findSender:()=>o,getMaxBitrate:()=>c});var n=s("./src/constants/Content.ts"),r=s("./src/constants/Remediation.ts"),i=s("./src/interfaces/Remediation/Remediation.ts");function o(e,t){return e.sort(((e,s)=>t.action===i.RemediationAction.Downgrade?s.priority-e.priority:e.priority-s.priority)).find((e=>function(e,t){if(t.action===i.RemediationAction.Downgrade){if(t.component===i.RemediationComponent.Resolution)return e.resolutionScale<r.REMEDIATION_MAX_RESOLUTION_SCALE||e.maxFramerate>r.REMEDIATION_MIN_FPS;if(t.component===i.RemediationComponent.Bitrate)return e.maxBitrate>r.REMEDIATION_MIN_BITRATE}return e.resolutionScale>e.minResolutionScale||e.framerate<e.maxFramerate||e.bitrate<e.maxBitrate}(e,t)))}function a(e,t){e.tracks.video&&e.tracks.video.sender&&(e.resolutionScale=function(e,t,s){switch(s.action){case i.RemediationAction.Downgrade:s.component===i.RemediationComponent.Resolution&&(e+=r.REMEDIATION_RESOLUTION_SCALE)>r.REMEDIATION_MAX_RESOLUTION_SCALE&&(e=r.REMEDIATION_MAX_RESOLUTION_SCALE);break;case i.RemediationAction.Upgrade:(e-=r.REMEDIATION_RESOLUTION_SCALE)<t&&(e=t)}return e}(e.resolutionScale,e.minResolutionScale,t),e.framerate=function(e,t,s){switch(s.action){case i.RemediationAction.Downgrade:s.component===i.RemediationComponent.Resolution&&(e-=r.REMEDIATION_FPS)<r.REMEDIATION_MIN_FPS&&(e=r.REMEDIATION_MIN_FPS);break;case i.RemediationAction.Upgrade:(e+=r.REMEDIATION_FPS)>t&&(e=t)}return e}(e.framerate,e.maxFramerate,t),e.bitrate=function(e,t,s){switch(s.action){case i.RemediationAction.Downgrade:s.component===i.RemediationComponent.Bitrate&&(e*=1-r.REMEDIATION_BITRATE)<r.REMEDIATION_MIN_BITRATE&&(e=r.REMEDIATION_MIN_BITRATE);break;case i.RemediationAction.Upgrade:(e*=1+r.REMEDIATION_BITRATE)>t&&(e=t)}return e}(e.bitrate,e.maxBitrate,t))}function c(e,t){return Math.floor(n.CONTENT_MAX_WIDTH*n.CONTENT_MAX_HEIGHT*e*t)}},"./src/models/Remediation/RemediationManager.ts":(e,t,s)=>{s.r(t),s.d(t,{RemediationManager:()=>h});var n=s("./src/constants/Remediation.ts"),r=s("./src/constants/RemediationRules.ts"),i=s("./src/constants/System.ts"),o=s("./src/interfaces/Connection/PeerConnection.ts"),a=s("./src/interfaces/Detection/Detection.ts"),c=s("./src/interfaces/Remediation/Remediation.ts"),d=s("./src/interfaces/Subscription/SystemEvent.ts"),l=s("./src/interfaces/Utils/Logger.ts"),u=s("./src/utils/Logger/Logger.ts");class h{configs;systemTopic;lastRemediations=new Map;constructor(e){this.configs=e,this.configs.mediator.registerSystemSource(this)}close(){this.configs.mediator.unregisterSystemSource(this)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}handleDetectionSystemEvents(e){e.content.type===a.DetectionMessageType.Problem&&this.handleProblem(e.content.data)}handleRemediationSystemEvents(e){e.content.type===c.RemediationMessageType.RemoteRemediation&&this.applyRemediation(e.sourceId,{type:c.RemediationMessageType.Remediation,component:e.content.data.component,action:e.content.data.action})}handleProblem(e){const t=r.REMEDIATION_RULES.find((t=>t.problemType===e.type));t.remediations?.forEach((t=>{this.applyRemediation(e.nodeId,{type:e.origin===o.PeerConnectionOrigin.Sender?c.RemediationMessageType.Remediation:c.RemediationMessageType.RemoteRemediation,component:t.component,action:t.action})}))}applyRemediation(e,t){if(t.type===c.RemediationMessageType.Remediation){const t=Date.now(),s=this.lastRemediations.get(e);if(s&&t-s<n.REMEDIATION_DOWNGRADE_WAIT_TIME)return;this.lastRemediations.set(e,t)}u.default.log(l.LoggingChannels.Remediation,"Apply remediation",t),u.default.logEvent("remediation",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,remoteId:e,data:{type:t.type,component:t.component,action:t.action}});let s,r=i.SYSTEM_TOPIC_INTERNAL;t.type===c.RemediationMessageType.RemoteRemediation&&(r=this.configs.localNode.getId(),s=[e]),this.systemTopic.publish({sourceId:r,destinationIds:s,messageType:d.SystemMessageType.Remediation,content:{type:t.type,targetId:e,data:t}})}}},"./src/models/SDK/SDK.ts":(e,t,s)=>{s.r(t),s.d(t,{SDK:()=>w});var n=s("firebase/firestore"),r=s("firebase/functions"),i=s("@crewdle/mist-connector-opfs"),o=s("@crewdle/mist-connector-indexed-db"),a=s("@crewdle/mist-connector-webrtc-browser"),c=s("@crewdle/web-sdk-types"),d=s("./src/public/errors/SDKClientError.ts"),l=s("./src/constants/Connection.ts"),u=s("./src/constants/Content.ts"),h=s("./src/constants/Node.ts"),p=s("./src/constants/SDK.ts"),g=s("./src/constants/Subscription.ts"),b=s("./src/environments/Environment.ts"),m=s("./src/interfaces/Utils/Support.ts"),S=s("./src/models/Cluster/Cluster.ts"),y=s("./src/models/Node/AuthAgent.ts"),T=s("./src/models/Node/AuthUser.ts"),f=s("./src/services/Auth/FirebaseAuthService.ts"),C=s("./src/services/Firebase/FirebaseService.ts"),I=s("./src/utils/Interval/Interval.ts"),E=s("./src/utils/Logger/Logger.ts"),v=s("./src/utils/Support/Support.ts");class w{static instance;static unsubscribe;authService;vendorId;options;configs;clusters=new Map;authContext;constructor(e,t,s){this.vendorId=e,this.configs=t,this.authService=new f.FirebaseAuthService(this.vendorId),v.default.initialize(),this.options={audioContext:s?.audioContext??(v.default.isFeatureSupported(m.SupportFeatureName.AudioContext)&&new AudioContext||void 0),maxOutgoingSubscriptions:s?.maxOutgoingSubscriptions??g.SUBSCRIPTION_MAX_OUTGOING,minConnections:s?.minConnections??l.CONNECTION_MIN,maxConnections:s?.maxConnections??(s?.minConnections&&4*s.minConnections)??l.CONNECTION_MAX,maxDistance:s?.maxDistance??h.NODE_DISTANCE_MAX,maxFps:s?.maxFps??u.CONTENT_FPS,maxBpp:s?.maxBpp??u.CONTENT_BPP,objectStoreConnector:s?.objectStoreConnector??i.OPFSObjectStoreConnector,keyValueDatabaseConnector:s?.keyValueDatabaseConnector??o.IDBDatabaseConnector,peerConnectionConnector:s?.peerConnectionConnector??a.WebRTCBrowserPeerConnectionConnector,generativeAIWorkerConnectors:s?.generativeAIWorkerConnectors,vectorDatabaseConnector:s?.vectorDatabaseConnector,graphDatabaseConnector:s?.graphDatabaseConnector,documentParserConnector:s?.documentParserConnector,nlpLibraryConnector:s?.nlpLibraryConnector,searchConnector:s?.searchConnector},s?.disableIntervalHack&&this.options.audioContext&&I.default.startNoThrottlingHack(this.options.audioContext),E.default.setVendorId(this.vendorId),s?.loggingConnectors&&E.default.setLoggingConnectors(s.loggingConnectors)}static async getInstance(e,t,s,n){const r=await this.validateAccess(e,t,n);return w.instance||(w.instance=new w(e,r,s)),{close:w.instance.close.bind(w.instance),authenticateUser:w.instance.authenticateUser.bind(w.instance),authenticateAgent:w.instance.authenticateAgent.bind(w.instance),joinCluster:w.instance.joinCluster.bind(w.instance)}}static async timestamp(){return C.default.getEstimatedTimestamp()}static isProduction(){return b.Environment.isProduction}async close(e){this.clusters.forEach((t=>{t.off(),t.leave(e)})),this.clusters.clear(),this.options.audioContext&&I.default.stopNoThrottlingHack(),w.unsubscribe?.(),w.unsubscribe=void 0,this.authContext=void 0,await this.authService.signOut(),w.instance=void 0}static async validateAccess(e,t,s){let n;try{n=await(0,r.httpsCallable)(C.default.getFunctions(),"sdkValidateAccess")({vendorId:e,accessToken:t,secretKey:s})}catch(e){throw new d.SDKClientError(d.SDKClientErrorCodes.InvalidAccess,"Invalid credentials")}if(!this.isInternalSDKConfigs(n.data))throw new d.SDKClientError(d.SDKClientErrorCodes.InvalidAccess,"Invalid credentials");const i=n.data;return i.features||(i.features=[]),this.unsubscribe||(this.unsubscribe=I.default.setInterval((async()=>{try{const n=await this.validateAccess(e,t,s);i.iceServers=n.iceServers}catch(e){}}),p.SDK_REFRESH_INTERVAL)),i}async authenticateUser(e){await this.authService.signInWithCredential(e);const t=new T.AuthUser(e.id,e.displayName,e.email);return this.authContext={node:t},v.default.logSupport(t),{type:c.NodeType.User,getId:t.getId.bind(t),getDisplayName:t.getDisplayName.bind(t),getEmail:t.getEmail.bind(t),setDisplayName:t.setDisplayName.bind(t),setEmail:t.setEmail.bind(t)}}async authenticateAgent(e){const{id:t,groupId:s}=e,r=await(0,n.getDoc)((0,n.doc)(C.default.getFirestore(),`developers/${this.vendorId}/resources/agent/items/${s}`));if(!r.exists())throw new d.SDKClientError(d.SDKClientErrorCodes.NodeNotAuthenticated,"Agent group not found");const i=r.data();await this.authService.signInWithCredential({id:t});const o=new y.AuthAgent(t,s,this.vendorId,i);return this.authContext={node:o},v.default.logSupport(o),await this.connectAgent(o),{type:c.NodeType.Agent,getId:o.getId.bind(o),onConfigurationChange:o.onConfigurationChange.bind(o),setReportCapacity:o.setReportCapacity.bind(o)}}async joinCluster(e){if(!this.authContext)throw new d.SDKClientError(d.SDKClientErrorCodes.NodeNotAuthenticated,"Node not authenticated");if(this.authContext.node.type!==c.NodeType.User)throw new d.SDKClientError(d.SDKClientErrorCodes.NodeTypeNotSupported,"Cannot join a cluster if the node is not a user");if(this.clusters.has(e))throw new d.SDKClientError(d.SDKClientErrorCodes.ClusterAlreadyJoined,"Cluster already joined");const t=new S.Cluster(this.vendorId,e,this.authContext.node,this.authService,this.options,this.configs);return await t.join(),this.addCluster(e,t),E.default.logEvent("join-cluster",{clusterId:e,nodeId:this.authContext.node.getId(),nodeType:this.authContext.node.type}),{leave:t.leave.bind(t),getLocalNode:t.getLocalNode.bind(t),openPubSubTopic:t.openPubSubTopic.bind(t),openObjectStoreBucket:t.openObjectStoreBucket.bind(t),openKeyValueDatabase:t.openKeyValueDatabase.bind(t),openGenerativeAIContext:t.openGenerativeAIContext.bind(t),openGenerativeAIWorker:t.openGenerativeAIWorker.bind(t),openGraphDatabase:t.openGraphDatabase.bind(t),openVectorDatabase:t.openVectorDatabase.bind(t),publishLocalMediaStream:t.publishLocalMediaStream.bind(t),publishLocalDynamicMediaStream:t.publishLocalDynamicMediaStream.bind(t),getPubSubTopics:t.getPubSubTopics.bind(t),getObjectStoreBuckets:t.getObjectStoreBuckets.bind(t),getKeyValueDatabases:t.getKeyValueDatabases.bind(t),getGenerativeAIContexts:t.getGenerativeAIContexts.bind(t),getGenerativeAIWorkers:t.getGenerativeAIWorkers.bind(t),getGraphDatabases:t.getGraphDatabases.bind(t),getVectorDatabases:t.getVectorDatabases.bind(t),getLocalMediaStreams:t.getLocalMediaStreams.bind(t),getRemoteMediaStreams:t.getRemoteMediaStreams.bind(t),getRemoteNodes:t.getRemoteNodes.bind(t),on:t.on.bind(t),off:t.off.bind(t)}}async connectAgent(e){for(const t of e.agentConfig.clusters){const s=new S.Cluster(this.vendorId,t.id,e,this.authService,this.options,this.configs);await s.join(),this.addCluster(t.id,s);for(const e of t.pubSubTopics??[])s.openPubSubTopic(e);for(const e of t.objectStorageBuckets??[])await s.openObjectStoreBucket(e);for(const e of t.keyValueDatabases??[])await s.openKeyValueDatabase(e,{version:1,tables:{}});for(const e of t.graphDatabases??[])s.openGraphDatabase(e);for(const e of t.vectorDatabases??[])s.openVectorDatabase(e);for(const e of t.generativeAIContexts??[])await s.openGenerativeAIWorker(e);console.warn("Agent connected to cluster",t.id)}}addCluster(e,t){this.clusters.set(e,t),t.on("cluster-leave",(()=>{t.off(),this.clusters.delete(e)}))}static isInternalSDKConfigs(e){return void 0!==e.iceServers}}},"./src/models/Stats/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{sendStats:()=>i});var n=s("./src/constants/System.ts"),r=s("./src/interfaces/Subscription/SystemEvent.ts");function i(e,t){t.publish({sourceId:n.SYSTEM_TOPIC_INTERNAL,messageType:r.SystemMessageType.PeerConnection,content:e})}},"./src/models/Stats/Stats.ts":(e,t,s)=>{s.r(t),s.d(t,{Stats:()=>l});var n=s("./src/constants/Stats.ts"),r=s("./src/constants/System.ts"),i=s("./src/interfaces/Connection/PeerConnection.ts"),o=s("./src/interfaces/Content/Content.ts"),a=s("./src/interfaces/Stats/Stats.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/models/Stats/StatsNode.ts");class l{nodes=new Map;scheduleTime=0;durationTime=0;pubsubTopics=new Map;objectStores=new Map;keyValueDatabases=new Map;generativeAIContexts=new Map;generativeAIWorkers=new Map;vectorDatabases=new Map;graphDatabases=new Map;senderTotalMessages=new Map;receiverTotalMessages=new Map;senderTimeProcessing=new Map;receiverTimeProcessing=new Map;systemMessages=new Map;systemTopic;getReport(){const e={};this.nodes.forEach(((t,s)=>{e[s]=t.getReport()}));let t=0;this.senderTimeProcessing.forEach((e=>{t+=e}));let s=0;this.receiverTimeProcessing.forEach((e=>{s+=e}));const n=t+s;let r={messages:{total:0}};this.systemMessages.forEach((e=>{Object.keys(e).forEach((t=>{r[t]||(r[t]={}),Object.keys(e[t]).forEach((s=>{r[t][s]||(r[t][s]=0),r[t][s]+=e[t][s]}))}))}));let i=0,o=0,a=0,c=0,d=0;return this.pubsubTopics.forEach((e=>{o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.objectStores.forEach((e=>{i+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.keyValueDatabases.forEach((e=>{i+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.generativeAIContexts.forEach((e=>{i+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.generativeAIWorkers.forEach((e=>{i+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.vectorDatabases.forEach((e=>{i+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),this.graphDatabases.forEach((e=>{i+=e.storage,o+=e.messagesSent,a+=e.messagesReceived,c+=e.bytesSent,d+=e.bytesReceived})),{STVolatility:this.getSTVolatility(),DTVolatility:this.getDTVolatility(),bitrate:this.getBitrate(),senderBitrate:this.getSenderBitrate(),receiverBitrate:this.getReceiverBitrate(),totalStorageSize:i,totalMessages:o+a,totalMessagesSent:o,totalMessagesReceived:a,totalBytes:c+d,totalBytesSent:c,totalBytesReceived:d,systemMessages:r,timeProcessing:n,nodes:e,pubsubTopics:Object.fromEntries(this.pubsubTopics),objectStores:Object.fromEntries(this.objectStores),keyValueDatabases:Object.fromEntries(this.keyValueDatabases),generativeAIContexts:Object.fromEntries(this.generativeAIContexts),generativeAIWorkers:Object.fromEntries(this.generativeAIWorkers),vectorDatabases:Object.fromEntries(this.vectorDatabases),graphDatabases:Object.fromEntries(this.graphDatabases)}}addRemoteNode(e){this.nodes.set(e,new d.StatsNode)}removeRemoteNode(e){this.nodes.delete(e)}processReports(e,t,s){t instanceof Array||this.processDataChannelReport(e,t);const n=this.nodes.get(e)?.processReports(t,s);n&&this.systemTopic.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Stats,content:{type:a.StatsMessageType.StreamReport,data:{...n,nodeId:e}}})}processLocalReport(e){this.setScheduleTime(e.secheduleTime),this.setDurationTime(e.durationTime),this.systemTopic.publish({sourceId:r.SYSTEM_TOPIC_INTERNAL,messageType:c.SystemMessageType.Stats,content:{type:a.StatsMessageType.LocalReport,data:{STVolatility:this.getSTVolatility(),DTVolatility:this.getDTVolatility()}}})}processServiceReport(e,t,s){switch(t){case o.ContentMessageType.PubSubTopicStats:this.pubsubTopics.set(e,s);break;case o.ContentMessageType.ObjectStoreStats:this.objectStores.set(e,s);break;case o.ContentMessageType.KeyValueDatabaseStats:this.keyValueDatabases.set(e,s);break;case o.ContentMessageType.GenerativeAIContextStats:this.generativeAIContexts.set(e,s);break;case o.ContentMessageType.GenerativeAIWorkerStats:this.generativeAIWorkers.set(e,s);break;case o.ContentMessageType.VectorDatabaseStats:this.vectorDatabases.set(e,s);break;case o.ContentMessageType.GraphDatabaseStats:this.graphDatabases.set(e,s)}}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}getSTVolatility(){return this.scheduleTime>0&&this.scheduleTime-n.STATS_COLLECT_DELAY>0?(this.scheduleTime-n.STATS_COLLECT_DELAY)/n.STATS_COLLECT_DELAY:0}getDTVolatility(){return this.durationTime>0&&this.durationTime-n.STATS_COLLECT_DELAY/10>0?(this.durationTime-n.STATS_COLLECT_DELAY/10)/(n.STATS_COLLECT_DELAY/10):0}getSenderBitrate(){let e=0;return this.nodes.forEach((t=>{e+=t.senderBitrate})),e}getReceiverBitrate(){let e=0;return this.nodes.forEach((t=>{e+=t.receiverBitrate})),e}getBitrate(){let e=0;return this.nodes.forEach((t=>{e+=t.bitrate})),e}setScheduleTime(e){this.scheduleTime=e}setDurationTime(e){this.durationTime=e}processDataChannelReport(e,t){switch(t.origin){case i.PeerConnectionOrigin.Sender:this.processSenderReport(e,t);break;case i.PeerConnectionOrigin.Receiver:this.processReceiverReport(e,t)}}processSenderReport(e,t){this.senderTotalMessages.set(e,t.messagesSent),this.senderTimeProcessing.set(e,t.timeSending)}processReceiverReport(e,t){this.receiverTotalMessages.set(e,t.messagesReceived),this.receiverTimeProcessing.set(e,t.timeReceiving),this.systemMessages.set(e,t.systemMessages)}}},"./src/models/Stats/StatsDataChannel.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsDataChannel:()=>i});var n=s("./src/constants/Stats.ts"),r=s("./src/interfaces/Connection/PeerConnection.ts");class i{senderCurrentTimestamp=0;senderPreviousTimestamp=0;receiverCurrentTimestamp=0;receiverPreviousTimestamp=0;senderCurrentBytes=0;senderPreviousBytes=0;receiverCurrentBytes=0;receiverPreviousBytes=0;senderTotalMessages=0;receiverTotalMessages=0;senderTimeProcessing=0;receiverTimeProcessing=0;roundTripTime=0;get bitrate(){return this.senderBitrate+this.receiverBitrate}get senderBitrate(){return this.senderCurrentTimestamp>0&&this.senderPreviousTimestamp>0&&Date.now()-this.senderCurrentTimestamp<n.STATS_REPORT_DELAY?(this.senderCurrentBytes-this.senderPreviousBytes)/(this.senderCurrentTimestamp-this.senderPreviousTimestamp)*8*1e3:0}get receiverBitrate(){return this.receiverCurrentTimestamp>0&&this.receiverPreviousTimestamp>0&&Date.now()-this.receiverCurrentTimestamp<n.STATS_REPORT_DELAY?(this.receiverCurrentBytes-this.receiverPreviousBytes)/(this.receiverCurrentTimestamp-this.receiverPreviousTimestamp)*8*1e3:0}processReport(e){switch(e.origin){case r.PeerConnectionOrigin.Sender:this.processSenderReport(e);break;case r.PeerConnectionOrigin.Receiver:this.processReceiverReport(e)}}getReport(){return{bitrate:this.bitrate,senderBitrate:this.senderBitrate,receiverBitrate:this.receiverBitrate,totalBytes:this.getTotalBytes(),senderTotalBytes:this.getSenderTotalBytes(),receiverTotalBytes:this.getReceiverTotalBytes(),totalMessages:this.senderTotalMessages+this.receiverTotalMessages,senderTotalMessages:this.senderTotalMessages,receiverTotalMessages:this.receiverTotalMessages,timeProcessing:this.senderTimeProcessing+this.receiverTimeProcessing,senderTimeProcessing:this.senderTimeProcessing,receiverTimeProcessing:this.receiverTimeProcessing,roundTripTime:this.roundTripTime}}getTotalBytes(){return this.senderCurrentBytes+this.receiverCurrentBytes}getSenderTotalBytes(){return this.senderCurrentBytes}getReceiverTotalBytes(){return this.receiverCurrentBytes}processSenderReport(e){this.setSenderTimestamp(e.timestamp),this.setBytes(e.bytesSent),this.senderTotalMessages=e.messagesSent,this.senderTimeProcessing=e.timeSending,this.roundTripTime=e.roundTripTime}processReceiverReport(e){this.setReceiverTimestamp(e.timestamp),this.setReceiverBytes(e.bytesReceived),this.receiverTotalMessages=e.messagesReceived,this.receiverTimeProcessing=e.timeReceiving}setSenderTimestamp(e){e>this.senderCurrentTimestamp&&(this.senderPreviousTimestamp=this.senderCurrentTimestamp,this.senderCurrentTimestamp=e)}setReceiverTimestamp(e){e>this.receiverCurrentTimestamp&&(this.receiverPreviousTimestamp=this.receiverCurrentTimestamp,this.receiverCurrentTimestamp=e)}setBytes(e){this.senderPreviousBytes=this.senderCurrentBytes,this.senderCurrentBytes=e}setReceiverBytes(e){this.receiverPreviousBytes=this.receiverCurrentBytes,this.receiverCurrentBytes=e}}},"./src/models/Stats/StatsManager.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsManager:()=>h});var n=s("firebase/firestore"),r=s("./src/constants/Stats.ts"),i=s("./src/interfaces/Connection/PeerConnection.ts"),o=s("./src/interfaces/Content/Content.ts"),a=s("./src/interfaces/Utils/Logger.ts"),c=s("./src/models/Stats/Stats.ts"),d=s("./src/services/Firebase/FirebaseService.ts"),l=s("./src/utils/Interval/Interval.ts"),u=s("./src/utils/Logger/Logger.ts");class h{configs;remoteNodes=new Set;nextNodeId;statsCollection;statsReporting;statsReport=new c.Stats;constructor(e){this.configs=e,this.configs.mediator.registerSystemSource(this.statsReport),this.statsCollection=this.setupStatsCollection(),this.statsReporting=this.setupStatsReporting()}close(){this.configs.mediator.unregisterSystemSource(this.statsReport),this.statsReporting(),this.statsCollection()}addRemoteNode(e){this.remoteNodes.add(e),this.statsReport.addRemoteNode(e)}removeRemoteNode(e){this.remoteNodes.delete(e),this.statsReport.removeRemoteNode(e)}handlePeerConnectionSystemEvents(e){if(e.content.type===i.PeerConnectionMessageType.Stats){const{nodeId:t,streamId:s,stats:n}=e.content;this.statsReport.processReports(t,n,s)}}handleContentSystemEvents(e){switch(e.content.type){case o.ContentMessageType.ObjectStoreStats:case o.ContentMessageType.KeyValueDatabaseStats:case o.ContentMessageType.PubSubTopicStats:case o.ContentMessageType.GenerativeAIContextStats:case o.ContentMessageType.GenerativeAIWorkerStats:case o.ContentMessageType.VectorDatabaseStats:case o.ContentMessageType.GraphDatabaseStats:this.statsReport.processServiceReport(e.content.label,e.content.type,e.content.stats)}}setupStatsReporting(){return l.default.setInterval((()=>{const e=this.statsReport.getReport();u.default.log(a.LoggingChannels.Stats,"Stats: report",e),(0,n.addDoc)((0,n.collection)(d.default.getFirestore(),`developers/${this.configs.vendorId}/stats`),{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,timestamp:(0,n.serverTimestamp)(),report:e}),u.default.logEvent("stats",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,data:{report:e}})}),r.STATS_REPORT_DELAY)}setupStatsCollection(){let e=!1,t=Date.now();return l.default.setInterval((async()=>{if(e)return;if(e=!0,0===this.remoteNodes.size)return delete this.nextNodeId,void(e=!1);const s=Date.now();this.findNextNodeId();try{await this.configs.mediator.collectStats(this.nextNodeId)}catch(e){}this.statsReport.processLocalReport({secheduleTime:s-t,durationTime:Date.now()-s}),t=s,e=!1}),r.STATS_COLLECT_DELAY)}findNextNodeId(){let e,t=!1;this.nextNodeId&&(this.remoteNodes.has(this.nextNodeId)||delete this.nextNodeId);for(const s of this.remoteNodes)if(e||(e=s),this.nextNodeId!==s){if(t)return void(this.nextNodeId=s)}else t=!0,delete this.nextNodeId;this.nextNodeId||(this.nextNodeId=e)}}},"./src/models/Stats/StatsNode.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsNode:()=>a});var n=s("./src/constants/Stats.ts"),r=s("./src/interfaces/Connection/PeerConnection.ts"),i=s("./src/models/Stats/StatsStream.ts"),o=s("./src/models/Stats/StatsDataChannel.ts");class a{senderStreams=new Map;receiverStreams=new Map;dataChannel=new o.StatsDataChannel;get senderBitrate(){let e=0;return this.senderStreams.forEach((t=>{e+=t.bitrate})),e+=this.dataChannel.senderBitrate,e}get receiverBitrate(){let e=0;return this.receiverStreams.forEach((t=>{e+=t.bitrate})),e+=this.dataChannel.receiverBitrate,e}get bitrate(){return this.senderBitrate+this.receiverBitrate}processReports(e,t){const s=[],i=[];return e instanceof Array?e.forEach((e=>{e.forEach((e=>{n.STATS_RECEIVER_FILTERS.includes(e.type)&&s.push(e),n.STATS_SENDER_FILTERS.includes(e.type)&&i.push(e)}))})):this.dataChannel.processReport(e),s.length>0&&t?{...this.processInboundReports(t,s),origin:r.PeerConnectionOrigin.Receiver,streamId:t}:i.length>0&&t?{...this.processOutboundReports(t,i),origin:r.PeerConnectionOrigin.Sender,streamId:t}:void 0}getReport(){const e={};this.senderStreams.forEach(((t,s)=>{e[s]=t.getReport()}));const t={};return this.receiverStreams.forEach(((e,s)=>{t[s]=e.getReport()})),{bitrate:this.bitrate,senderBitrate:this.senderBitrate,receiverBitrate:this.receiverBitrate,senderStreams:e,receiverStreams:t,dataChannel:this.dataChannel.getReport()}}processInboundReports(e,t){return this.receiverStreams.has(e)||this.receiverStreams.set(e,new i.StatsStream),this.receiverStreams.get(e).processReports(t)}processOutboundReports(e,t){return this.senderStreams.has(e)||this.senderStreams.set(e,new i.StatsStream),this.senderStreams.get(e).processReports(t)}}},"./src/models/Stats/StatsStream.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsStream:()=>i});var n=s("./src/models/Stats/StatsTrackAudio.ts"),r=s("./src/models/Stats/StatsTrackVideo.ts");class i{audio=new n.StatsTrackAudio;video=new r.StatsTrackVideo;get bitrate(){return this.audio.bitrate+this.video.bitrate}processReports(e){return e.forEach((e=>{switch(e.kind){case"audio":this.audio.processReport(e);break;case"video":this.video.processReport(e)}})),this.getReport()}getReport(){return{audio:this.audio.getReport(),video:this.video.getReport(),roundTripTime:this.getRoundTripTime(),AudioVideoDelay:this.getAudioVideoDelay(),bitrate:this.bitrate}}getRoundTripTime(){return Math.floor((this.audio.roundTripTime+this.video.roundTripTime)/2)}getAudioVideoDelay(){return this.audio.estimatedPlayoutTimestamp-this.video.estimatedPlayoutTimestamp}}},"./src/models/Stats/StatsTrack.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsTrack:()=>r});var n=s("./src/constants/Stats.ts");class r{roundTripTime=0;estimatedPlayoutTimestamp=0;jitter=0;packetsLost=0;packets=0;currentTimestamp=0;previousTimestamp=0;currentBytes=0;previousBytes=0;get bitrate(){return this.currentTimestamp>0&&this.previousTimestamp>0&&Date.now()-this.currentTimestamp<n.STATS_REPORT_DELAY?(this.currentBytes-this.previousBytes)/(this.currentTimestamp-this.previousTimestamp)*8*1e3:0}processReport(e){switch(e.type){case n.STATS_INBOUND:this.processInboundReport(e);break;case n.STATS_OUTBOUND:this.processOutboundReport(e);break;case n.STATS_REMOTE_INBOUND:this.processRemoteInboundReport(e)}}getReport(){return{bitrate:this.bitrate,packetsLostPerc:this.getPacketsLostPerc(),roundTripTime:this.roundTripTime,jitter:this.jitter}}processInboundReport(e){this.setBytes(e.bytesReceived),this.setTimestamp(e.timestamp),this.packets=e.packetsReceived,this.packetsLost=e.packetsLost,void 0!==e.jitter?this.jitter=e.jitter:this.jitter=0,void 0!==e.estimatedPlayoutTimestamp?this.estimatedPlayoutTimestamp=e.estimatedPlayoutTimestamp:this.estimatedPlayoutTimestamp=0}processOutboundReport(e){this.setBytes(e.bytesSent),this.setTimestamp(e.timestamp),this.packets=e.packetsSent}processRemoteInboundReport(e){this.roundTripTime=1e3*e.roundTripTime,void 0!==e.jitter?this.jitter=e.jitter:this.jitter=0}getPacketsLostPerc(){return this.packets>0?this.packetsLost/this.packets:0}setTimestamp(e){e>this.currentTimestamp&&(this.previousTimestamp=this.currentTimestamp,this.currentTimestamp=e)}setBytes(e){this.previousBytes=this.currentBytes,this.currentBytes=e}}},"./src/models/Stats/StatsTrackAudio.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsTrackAudio:()=>r});var n=s("./src/models/Stats/StatsTrack.ts");class r extends n.StatsTrack{}},"./src/models/Stats/StatsTrackVideo.ts":(e,t,s)=>{s.r(t),s.d(t,{StatsTrackVideo:()=>i});var n=s("./src/constants/Stats.ts"),r=s("./src/models/Stats/StatsTrack.ts");class i extends r.StatsTrack{frameTime=0;frameWidth=0;frameHeight=0;currentFrames=0;previousFrames=0;get fps(){return this.currentTimestamp>0&&this.previousTimestamp>0&&Date.now()-this.currentTimestamp<n.STATS_REPORT_DELAY?(this.currentFrames-this.previousFrames)/(this.currentTimestamp-this.previousTimestamp)*1e3:0}get timePerFrame(){return this.frameTime&&this.currentFrames&&this.currentFrames>0?this.frameTime/this.currentFrames:0}set frames(e){this.previousFrames=this.currentFrames,this.currentFrames=e}getReport(){return{...super.getReport(),FPS:this.fps,timePerFrame:this.timePerFrame,frameWidth:this.frameWidth,frameHeight:this.frameHeight}}processInboundReport(e){super.processInboundReport(e),this.frameTime=e.totalDecodeTime,this.frames=e.framesDecoded,this.frameWidth=e.frameWidth,this.frameHeight=e.frameHeight}processOutboundReport(e){super.processOutboundReport(e),this.frameTime=e.totalEncodeTime,this.frames=e.framesEncoded,this.frameWidth=e.frameWidth,this.frameHeight=e.frameHeight}}},"./src/models/Subscription/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{getParts:()=>l,getPrefix:()=>d,getSubscriptionLabel:()=>a,getTopicLabel:()=>c,isBroadcast:()=>o,isReceiver:()=>i,isSender:()=>r});var n=s("./src/interfaces/Subscription/Subscription.ts");function r(e,t){return e.sourceId===t}function i(e,t){return e.destinationIds?.includes(t)??o(e)}function o(e){return void 0===e.destinationIds}function a(e,{contentType:t,label:s,remoteId:n}){return`${e}-${t}-${s}-${n}`}function c(e,t,s){return`${e}${t}${s}`}function d(e){return e===n.SubscriptionType.Incoming?"IncomingSubscription":"OutgoingSubscription"}function l(e,t){return{label:e.getInternalStreamId(),contentType:e.getContentType(),remoteId:t.getRemoteId(),supportsContentType:t.getSupportedContentTypes().includes(e.getContentType())}}},"./src/models/Subscription/IncomingSubscription.ts":(e,t,s)=>{s.r(t),s.d(t,{IncomingMediaSubscription:()=>a,IncomingSubscription:()=>o});var n=s("@crewdle/web-sdk-types"),r=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),i=s("./src/interfaces/Subscription/SystemEvent.ts");class o{source;destination;systemTopic;constructor(e,t){this.source=e,this.destination=t}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}}class a extends o{source;destination;params;constructor(e,t,s){super(e,t),this.source=e,this.destination=t,this.params=s}subscribe(e,t,s){if(this.destination.getContentType()===n.ContentType.Media){const n={type:r.SubscriptionMessageType.SubscribeMediaStream,label:this.destination.getLabel(),ownerId:e,trackKinds:t??this.destination.getAvailableTrackKinds(),params:s};this.systemTopic.publish({sourceId:this.source.getLocalId(),destinationIds:[this.source.getRemoteId()],messageType:i.SystemMessageType.Subscription,content:n}),this.params=s}}update(e,t){if(this.destination.getContentType()===n.ContentType.Media){const s={type:r.SubscriptionMessageType.UpdateMediaStream,label:this.destination.getLabel(),ownerId:e,params:t};this.systemTopic.publish({sourceId:this.source.getLocalId(),destinationIds:[this.source.getRemoteId()],messageType:i.SystemMessageType.Subscription,content:s}),this.params=t}}unsubscribe(e,t,s){if(this.destination.getContentType()===n.ContentType.Media){const n={type:r.SubscriptionMessageType.UnsubscribeMediaStream,label:this.destination.getLabel(),ownerId:e,trackKinds:s??this.destination.getAvailableTrackKinds(),remainingTracks:t};this.systemTopic.publish({sourceId:this.source.getLocalId(),destinationIds:[this.source.getRemoteId()],messageType:i.SystemMessageType.Subscription,content:n})}}}},"./src/models/Subscription/IncomingSubscriptionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{IncomingSubscriptionManager:()=>m});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/Subscription.ts"),i=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Subscription/Subscription.ts"),a=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),c=s("./src/models/Subscription/Helpers.ts"),d=s("./src/models/Subscription/IncomingSubscription.ts"),l=s("./src/models/Subscription/SubscriptionRequest.ts"),u=s("./src/models/Subscription/SubscriptionMaps.ts"),h=s("./src/utils/Interval/Interval.ts"),p=s("./src/utils/Logger/Logger.ts"),g=s("./src/utils/Queue/Queue.ts"),b=s("./src/utils/Queue/RetryQueue.ts");class m{configs;maxDistance;subscriptionRequests=new Map;subscriptionRequestsQueue=(0,b.createRetryQueue)(new g.SyncQueueCallback(this.requestSubscriptionAction.bind(this),(()=>h.default.wait(r.SUBSCRIPTION_REQUEST_RETRY_DELAY))),!0);subscriptionRequestTimeouts=new Map;maps;chosenAnswers=new Map;constructor(e,t){this.configs=e,this.maxDistance=t,this.maps=new u.SubscriptionMaps((({source:e,destination:t})=>c.getParts(t,e)))}createSubscription(e,t){const s=this.isMediaSource(e)&&this.isMediaDestination(t)?new d.IncomingMediaSubscription(e,t):new d.IncomingSubscription(e,t);this.maps.createSubscription(o.SubscriptionType.Incoming,s),this.configs.mediator.registerSystemSource(s)}removeSubscription(e,t,s=""){const n={contentType:t,label:e,remoteId:s},r=c.getSubscriptionLabel(o.SubscriptionType.Incoming,n),i=this.maps.subscriptions.get(r);i&&this.closeSubscription(i,r)}handleContentUnpublishMediaStream(e){this.removeRemoteStreamSubscription(e)}handleContentSubscribeMediaStream({label:e,ownerId:t,trackKinds:s,params:n}){this.requestSubscription(e,t,s,n)}handleContentUpdateMediaStream({ownerId:e,label:t,params:s}){const{subscriptionLabel:n}=this.getSubscriptionLabel(t,e),r=this.getMediaSubscription(n);r&&r.update(e,s)}handleContentUnsubscribeMediaStream({ownerId:e,label:t,trackKinds:s,remainingTracks:r}){const i=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:t,remoteId:e});this.clearSubscriptionRequestTimeout(i);const a=this.subscriptionRequests.get(i);a&&(this.configs.mediator.unregisterSystemSource(a),this.subscriptionRequests.delete(i));const{parts:d,subscriptionLabel:l}=this.getSubscriptionLabel(t,e),u=this.getMediaSubscription(l);u&&(u.unsubscribe(e,r,s),0===r&&this.removeSubscription(d.label,d.contentType,d.remoteId))}handleSubscriptionRestartNeedMediaStream(e,{label:t,ownerId:s,trackKinds:r,streamId:a,params:l}){const u=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:a,remoteId:e}),h=this.maps.subscriptions.get(u);if(!(h&&h instanceof d.IncomingMediaSubscription))throw new i.SDKInternalError(i.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:u,ownerId:s});this.closeSubscription(h,u),this.requestSubscription(t,s,r,l)}handleSubscriptionProvideMediaStream(e,t){const{label:s,ownerId:r,trackKinds:a,params:d}=t,l=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:s,remoteId:r});if(!this.subscriptionRequests.has(l))throw new i.SDKInternalError(i.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:l,ownerId:r,streamId:t.streamId,requests:this.subscriptionRequests});const u=this.subscriptionRequests.get(l);if(a.length===u.getTracks().length&&a.every((e=>u.getTracks().includes(e))))try{const n=u.handleSubscriptionSystemEvents(e,t);if(!n)return;this.subscribe(n,r,s,l,a)}catch(e){return void this.handleNoAnswer(s,r,a,d)}}handleSubscriptionMediaStreamUnavailable(e,{label:t,ownerId:s,trackKinds:n}){const r=this.configs.mediator.getRemoteMediaStream(s,t);if(!r)return;const i=r.getInternalStreamId(),o=r.getSubscribedTracks();o.some((e=>n.includes(e)))&&this.findNewMediaSubscription(e,t,i,s,o)}handleContentRemoteMediaStreamTrackFail({label:e,providerId:t,ownerId:s,streamId:n,trackKinds:r}){this.findNewMediaSubscription(t,e,n,s,r)}handleOptimizationConnectionSuccess(e){for(const t of this.chosenAnswers.values()){const{streamLabel:s,ownerId:n,trackKinds:r,params:i}=t;if(!n||!r||!s)return;this.subscriptionRequestsQueue.push({label:s,ownerId:n,trackKinds:r,params:i,remoteId:e})}}removeSubscriptionsForNode(e){this.maps.subscriptions.forEach(((t,s)=>{if(s.endsWith(e)){if(t.destination.getContentType()===n.ContentType.Media){const s=t.destination;if(s.getSubscribedTracks().length>0){const t={type:a.SubscriptionMessageType.MediaStreamUnavailable,label:s.getLabel(),ownerId:s.getOwnerId(),trackKinds:s.getSubscribedTracks()};return void this.handleSubscriptionMediaStreamUnavailable(e,t)}}this.closeSubscription(t,s)}}))}close(){this.maps.subscriptions.forEach(this.closeSubscription.bind(this))}subscribe(e,t,s,n,r){const a=this.configs.mediator.getConnection(e.nodeId),l=this.configs.mediator.getRemoteMediaStream(t,s);this.clearSubscriptionRequestTimeout(n),this.subscriptionRequests.has(n)&&(this.configs.mediator.unregisterSystemSource(this.subscriptionRequests.get(n)),this.subscriptionRequests.delete(n)),this.cleanOldSubscription(e,t,s,l),l.setInternalId(e.streamId),l.setProviderId(e.nodeId);const u=c.getParts(l,a),h=c.getSubscriptionLabel(o.SubscriptionType.Incoming,u);this.maps.subscriptions.has(h)||this.createSubscription(a,l);const g=this.maps.subscriptions.get(h);if(!(g&&g instanceof d.IncomingMediaSubscription))throw new i.SDKInternalError(i.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:n,ownerId:t});p.default.logEvent("subscription",{clusterId:this.configs.clusterId,nodeId:this.configs.localNode.getId(),nodeType:this.configs.localNode.type,data:{subscriptionLabel:h,chosenAnswer:e}}),this.chosenAnswers.set(h,e),g.subscribe(t,r,e.params)}removeRemoteStreamSubscription({ownerId:e,label:t}){const s=this.configs.mediator.getRemoteMediaStream(e,t),[n,r]=Array.from(this.maps.subscriptions.entries()).find((([e,t])=>-1!==e.indexOf(s.getInternalStreamId())));return this.closeSubscription(r,n)}closeSubscription(e,t){this.configs.mediator.unregisterSystemSource(e),this.maps.closeSubscription(e,t)}isMediaSource(e){return e.getSupportedContentTypes().includes(n.ContentType.Media)}isMediaDestination(e){return e.getContentType()===n.ContentType.Media}async handleNoAnswer(e,t,s,a){await h.default.wait(r.SUBSCRIPTION_RETRY_DELAY);const d=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:e,remoteId:t});this.clearSubscriptionRequestTimeout(d);const l=this.subscriptionRequests.get(d);if(!l)throw new i.SDKInternalError(i.SDKInternalError.codes.SubscriptionRequestDoesNotExist,{label:d,ownerId:t});const u=this.configs.mediator.getConnections((e=>e.isConnected())),p=this.configs.mediator.getDistance(this.configs.localNode.getId(),t);l.reset(u.map((e=>e.getRemoteId())),p);try{l.sendRequest(this.configs.localNode.getId(),t,e,s,a),this.setSubscriptionRequestTimeout(e,t,s,a,d,l)}catch(n){this.subscriptionRequestsQueue.push({label:e,ownerId:t,trackKinds:s,params:a})}}requestSubscription(e,t,s,n){this.subscriptionRequestsQueue.push({label:e,ownerId:t,trackKinds:s,params:n})}requestSubscriptionAction({label:e,ownerId:t,trackKinds:s,params:r,remoteId:i}){if(!this.configs.mediator.getRemoteMediaStream(t,e))return;if(!this.configs.mediator.getLocalNode().getRank())throw new Error("Local node rank is not set");if(i){const s=this.configs.mediator.getRemoteNodes().find((e=>e.getId()===i)),n=s?.getRank();if(!s||!n)throw new Error("Missing remote node or rank");const r=this.configs.mediator.getRemoteNodes().find((e=>e.getId()===t)),o=r?.getRank();if(!r||!o)throw new Error("Missing owner node or rank");const a=this.chosenAnswers.get(e);if(a){const e=this.configs.mediator.getRemoteNodes().find((e=>e.getId()===a.nodeId)),t=e?.getRank();if(!e||!t)throw new Error("Retry request with chosen answer node or rank");if(Math.abs(t-o)<Math.abs(n-o))return}}const a=this.configs.mediator.getConnections((e=>e.isConnected()&&(!i||e.getRemoteId()===i)));if(!a.length||0===a.length)throw new Error("No connections available to send subscription request");const d=this.configs.mediator.getDistance(this.configs.localNode.getId(),t),u=c.getSubscriptionLabel(o.SubscriptionType.Incoming,{contentType:n.ContentType.Media,label:e,remoteId:t});if(this.subscriptionRequests.has(u)){if(i)throw new Error("We need to treat requests sequentially when the remote id is set");const e=this.subscriptionRequests.get(u).getTracks();if(e.length===s.length&&e.every((e=>s.includes(e))))return;this.configs.mediator.unregisterSystemSource(this.subscriptionRequests.get(u)),this.subscriptionRequests.delete(u),s=Array.from(new Set(s.concat(e))),this.clearSubscriptionRequestTimeout(u)}const h=new l.SubscriptionRequest(a.map((e=>e.getRemoteId())),d,this.maxDistance,s);this.configs.mediator.registerSystemSource(h),this.subscriptionRequests.set(u,h),h.sendRequest(this.configs.localNode.getId(),t,e,s,r),this.setSubscriptionRequestTimeout(e,t,s,r,u,h)}clearSubscriptionRequestTimeout(e){this.subscriptionRequestTimeouts.has(e)&&(clearTimeout(this.subscriptionRequestTimeouts.get(e)),this.subscriptionRequestTimeouts.delete(e))}setSubscriptionRequestTimeout(e,t,s,n,i,o){this.clearSubscriptionRequestTimeout(i),this.subscriptionRequestTimeouts.set(i,setTimeout((()=>{this.subscriptionRequestTimeouts.delete(i);try{const n=o.chooseAnswer();this.subscribe(n,t,e,i,s)}catch(r){this.handleNoAnswer(e,t,s,n)}}),r.SUBSCRIPTION_REQUEST_TIMEOUT))}findNewMediaSubscription(e,t,s,r,i){const{subscriptionLabel:o}=this.getSubscriptionLabel(t,r),a=this.getMediaSubscription(o),c=a?.params;a&&(a.unsubscribe(r,0),this.removeSubscription(s,n.ContentType.Media,e)),this.requestSubscription(t,r,i,c)}getMediaSubscription(e){const t=this.maps.subscriptions.get(e);if(t){if(!(t instanceof d.IncomingMediaSubscription))throw new i.SDKInternalError(i.SDKInternalError.codes.InvalidSubscription,{label:e,subscription:t});return t}}getSubscriptionLabel(e,t){const s=this.getPartsForSubscriptionLabel(e,t);return{parts:s,subscriptionLabel:c.getSubscriptionLabel(o.SubscriptionType.Incoming,s)}}getPartsForSubscriptionLabel(e,t){const s=this.configs.mediator.getRemoteMediaStream(t,e),r=s.getProviderId();if(!r)throw new i.SDKInternalError(i.SDKInternalError.codes.RemoteMediaStreamMissingProviderId,{label:e,streamId:s.getInternalStreamId(),ownerId:t,localId:this.configs.localNode.getId()});return{contentType:n.ContentType.Media,label:s.getInternalStreamId(),remoteId:r}}cleanOldSubscription(e,t,s,n){const r=n.getProviderId();if(r&&r!==e.nodeId){const{parts:e,subscriptionLabel:n}=this.getSubscriptionLabel(s,t),r=this.getMediaSubscription(n);r&&(r.unsubscribe(t,0),this.removeSubscription(e.label,e.contentType,e.remoteId))}}}},"./src/models/Subscription/OutgoingSubscriptionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{OutgoingSubscriptionManager:()=>h});var n=s("@crewdle/web-sdk-types"),r=s("./src/constants/Node.ts"),i=s("./src/constants/System.ts"),o=s("./src/interfaces/Subscription/Subscription.ts"),a=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),c=s("./src/interfaces/Subscription/SystemEvent.ts"),d=s("./src/models/Subscription/Helpers.ts"),l=s("./src/models/Subscription/SubscriptionMaps.ts"),u=s("./src/models/Content/RemoteMediaStream.ts");class h{configs;maxOutgoingSubscriptions;maps;constructor(e,t){this.configs=e,this.maxOutgoingSubscriptions=t,this.maps=new l.SubscriptionMaps((({source:e,destination:t})=>d.getParts(e,t)))}createSubscription(e,t){const s={source:e,destination:t};this.maps.createSubscription(o.SubscriptionType.Outgoing,s)}removeSubscription(e,t,s=""){const n={contentType:t,label:e,remoteId:s};this.maps.removeSubscription(n,o.SubscriptionType.Outgoing)}handleSubscriptionSubscribeMediaStream(e,t){let s;s=t.ownerId!==this.configs.localNode.getId()?this.configs.mediator.getRemoteMediaStream(t.ownerId,t.label):this.configs.mediator.getLocalMediaStream(t.label);const r=d.getSubscriptionLabel(o.SubscriptionType.Outgoing,{contentType:n.ContentType.Media,label:s.getShareableStreamId(),remoteId:e}),i=this.getNumberOutgoingSubscriptions();if(!this.maps.subscriptions.has(r)&&i>=this.maxOutgoingSubscriptions)return{type:a.SubscriptionMessageType.RestartNeedMediaStream,ownerId:t.ownerId,label:t.label,streamId:s.getShareableStreamId(),trackKinds:t.trackKinds,params:t.params};s instanceof u.RemoteMediaStream&&!s.isSubscribed(t.trackKinds)&&s.subscribe(t.params),this.maps.subscriptions.has(r)||this.createSubscription(s.getShareableStream(e),this.configs.mediator.getConnection(e))}handleSubscriptionUnsubscribeMediaStream(e,{label:t,ownerId:s,remainingTracks:r}){if(r>0)return;let i;i=s!==this.configs.localNode.getId()?this.configs.mediator.getRemoteMediaStream(s,t):this.configs.mediator.getLocalMediaStream(t);const o=i.getShareableStreamId(),a=n.ContentType.Media;this.removeSubscription(o,a,e)}handleContentUnsubscribeMediaStream(e,{label:t,ownerId:s,trackKinds:n}){if(e!==i.SYSTEM_TOPIC_INTERNAL)return[];let r=[];for(const e of this.maps.subscriptions){const{source:i,destination:o}=e[1];i.getLabel()===t&&i.getOwnerId()===s&&r.push({sourceId:this.configs.localNode.getId(),destinationIds:[o.getRemoteId()],messageType:c.SystemMessageType.Subscription,content:{type:a.SubscriptionMessageType.MediaStreamUnavailable,label:t,ownerId:s,trackKinds:n}})}return r}handleSubscriptionNeedMediaStream(e,t){const{label:s,ownerId:n,trackKinds:i,params:o}=t,{hasTracks:c,streamId:d,hasResolution:l,distance:u,subscriptionLabel:h}=this.getSubscriptionInfo(e,t);let p=this.getNumberOutgoingSubscriptions()<this.maxOutgoingSubscriptions&&(c||u>-1)?a.SubscriptionMessageType.CanProvideMediaStream:a.SubscriptionMessageType.CannotProvideMediaStream;const g=u<0?r.NODE_DISTANCE_MAX:u;let b=c?l?g:g+r.NODE_DISTANCE_RESOLUTION:g+r.NODE_DISTANCE_TRACKS;return h&&this.maps.subscriptions.has(h)&&(c&&(b=0),p=a.SubscriptionMessageType.CanProvideMediaStream),{type:p,cost:b,distance:u,label:s,ownerId:n,streamId:d,trackKinds:i,params:o}}handleContentUnpublishMediaStream(e){const{label:t,ownerId:s}=e,r=this.configs.mediator.getRemoteMediaStream(s,t);this.maps.subscriptions.forEach((e=>{if(e.source.getInternalStreamId()===r.getShareableStreamId()){const t=e.destination;this.removeSubscription(r.getShareableStreamId(),n.ContentType.Media,t.getRemoteId())}}))}handleContentCloseMediaStream({label:e}){const t=this.configs.mediator.getLocalMediaStream(e);this.maps.subscriptions.forEach((e=>{if(e.source.getInternalStreamId()===t.getShareableStreamId()){const s=e.destination;this.removeSubscription(t.getShareableStreamId(),n.ContentType.Media,s.getRemoteId())}}))}removeSubscriptionsForNode(e){this.maps.removeSubscriptionsForNode(e)}close(){this.maps.subscriptions.forEach(this.closeSubscription.bind(this))}closeSubscription(e,t){this.maps.closeSubscription(e,t)}getSubscriptionInfo(e,{label:t,ownerId:s,trackKinds:r,params:i}){if(s!==this.configs.localNode.getId()){const a=this.configs.mediator.getRemoteMediaStream(s,t);return a&&a.getProviderId()!==e?{hasTracks:a.hasTracks(r),hasResolution:this.canProvideResolution(a.getResolution(),i),streamId:a.getShareableStreamId(),distance:this.configs.mediator.getDistance(e,s),subscriptionLabel:d.getSubscriptionLabel(o.SubscriptionType.Outgoing,{contentType:n.ContentType.Media,label:a.getShareableStreamId(),remoteId:e})}:{hasTracks:!1,hasResolution:!1,streamId:"",distance:-1,subscriptionLabel:null}}const a=this.configs.mediator.getLocalMediaStream(t);return{hasTracks:!0,hasResolution:!0,streamId:a.getShareableStreamId(),distance:0,subscriptionLabel:d.getSubscriptionLabel(o.SubscriptionType.Outgoing,{contentType:n.ContentType.Media,label:a.getShareableStreamId(),remoteId:e})}}getNumberOutgoingSubscriptions(){return Array.from(this.maps.subscriptions.entries()).filter((([e,{source:t}])=>e.startsWith(o.SubscriptionType.Outgoing)&&t.getContentType()===n.ContentType.Media)).length}canProvideResolution(e,t){if(!t||!t.video||"boolean"==typeof t.video||!t.video.maxResolution)return!0;const{width:s,height:n}=t.video.maxResolution;return e.width>=s&&e.height>=n}}},"./src/models/Subscription/SubscriptionManager.ts":(e,t,s)=>{s.r(t),s.d(t,{SubscriptionManager:()=>p});var n=s("@crewdle/web-sdk-types"),r=s("./src/errors/EarlyReturnError.ts"),i=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Connection/PeerConnection.ts"),a=s("./src/interfaces/Content/Content.ts"),c=s("./src/interfaces/Node/NodeMessage.ts"),d=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),l=s("./src/interfaces/Subscription/SystemEvent.ts"),u=s("./src/models/Subscription/IncomingSubscriptionManager.ts"),h=s("./src/models/Subscription/OutgoingSubscriptionManager.ts");class p{configs;maxOutgoingSubscriptions;maxDistance;systemTopic;incomingManager;outgoingManager;constructor(e,t,s){this.configs=e,this.maxOutgoingSubscriptions=t,this.maxDistance=s,this.configs.mediator.registerSystemSource(this),this.incomingManager=new u.IncomingSubscriptionManager(this.configs,this.maxDistance),this.outgoingManager=new h.OutgoingSubscriptionManager(this.configs,this.maxOutgoingSubscriptions)}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}close(){this.incomingManager.close(),this.outgoingManager.close(),this.configs.mediator.unregisterSystemSource(this)}createIncomingSubscription(e,t){this.incomingManager.createSubscription(e,t)}createOutgoingSubscription(e,t){this.outgoingManager.createSubscription(e,t)}removeIncomingSubscription(e,t,s=""){this.incomingManager.removeSubscription(e,t,s)}removeOutgoingSubscription(e,t,s=""){try{this.outgoingManager.removeSubscription(e,t,s)}catch(e){if(e instanceof i.SDKInternalError&&e.code===i.SDKInternalError.codes.InvalidSubscription)return}}handleSubscriptionSystemEvents(e){switch(e.content.type){case d.SubscriptionMessageType.SubscribeMediaStream:this.handleSubscriptionSubscribeMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.UnsubscribeMediaStream:this.outgoingManager.handleSubscriptionUnsubscribeMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.NeedMediaStream:this.handleSubscriptionNeedMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.RestartNeedMediaStream:this.incomingManager.handleSubscriptionRestartNeedMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.CanProvideMediaStream:case d.SubscriptionMessageType.CannotProvideMediaStream:this.incomingManager.handleSubscriptionProvideMediaStream(e.sourceId,e.content);break;case d.SubscriptionMessageType.MediaStreamUnavailable:this.incomingManager.handleSubscriptionMediaStreamUnavailable(e.sourceId,e.content)}}handleContentSystemEvents(e){switch(e.content.type){case a.ContentMessageType.UnpublishMediaStream:this.incomingManager.handleContentUnpublishMediaStream(e.content),this.outgoingManager.handleContentUnpublishMediaStream(e.content);break;case a.ContentMessageType.SubscribeMediaStream:this.incomingManager.handleContentSubscribeMediaStream(e.content);break;case a.ContentMessageType.UpdateMediaStream:this.incomingManager.handleContentUpdateMediaStream(e.content);break;case a.ContentMessageType.UnsubscribeMediaStream:this.handleContentUnsubscribeMediaStream(e.sourceId,e.content);break;case a.ContentMessageType.CloseMediaStream:this.outgoingManager.handleContentCloseMediaStream(e.content);break;case a.ContentMessageType.ClosePubSubTopic:this.handleCloseContent(e.content.label,n.ContentType.PubSub);break;case a.ContentMessageType.CloseObjectStoreBucket:this.handleCloseContent(e.content.label,n.ContentType.ObjectStore);break;case a.ContentMessageType.CloseKeyValueDatabase:this.handleCloseContent(e.content.label,n.ContentType.KeyValueDatabase);break;case a.ContentMessageType.CloseVectorDatabase:this.handleCloseContent(e.content.label,n.ContentType.VectorDatabase);break;case a.ContentMessageType.CloseGraphDatabase:this.handleCloseContent(e.content.label,n.ContentType.GraphDatabase);break;case a.ContentMessageType.CloseJobDispatcher:case a.ContentMessageType.CloseJobWorker:this.handleCloseContent(e.content.label,n.ContentType.Job);break;case a.ContentMessageType.RemoteMediaStreamTrackFail:this.incomingManager.handleContentRemoteMediaStreamTrackFail(e.content)}}handleNodeSystemEvents({content:e}){e.type===c.NodeMessageType.NodeLeave&&this.removeSubscriptionsForNode(e)}handlePeerConnectionSystemEvents(e){e.content.type===o.PeerConnectionMessageType.OptimizationConnectionSuccess&&this.incomingManager.handleOptimizationConnectionSuccess(e.sourceId)}handleContentUnsubscribeMediaStream(e,t){this.incomingManager.handleContentUnsubscribeMediaStream(t),this.outgoingManager.handleContentUnsubscribeMediaStream(e,t).forEach((e=>this.systemTopic.publish(e)))}handleSubscriptionSubscribeMediaStream(e,t){const s=this.outgoingManager.handleSubscriptionSubscribeMediaStream(e,t);if(s&&(this.systemTopic.publish({sourceId:this.configs.localNode.getId(),destinationIds:[e],messageType:l.SystemMessageType.Subscription,content:s}),s.type===d.SubscriptionMessageType.RestartNeedMediaStream))throw new r.EarlyReturnError("Restart NeedMediaStream")}handleSubscriptionNeedMediaStream(e,t){const s=this.outgoingManager.handleSubscriptionNeedMediaStream(e,t);this.systemTopic.publish({sourceId:this.configs.localNode.getId(),destinationIds:[e],messageType:l.SystemMessageType.Subscription,content:s})}handleCloseContent(e,t){this.removeIncomingSubscription(e,t),this.removeOutgoingSubscription(e,t)}removeSubscriptionsForNode({id:e}){this.incomingManager.removeSubscriptionsForNode(e),this.outgoingManager.removeSubscriptionsForNode(e)}}},"./src/models/Subscription/SubscriptionMaps.ts":(e,t,s)=>{s.r(t),s.d(t,{SubscriptionMaps:()=>o});var n=s("./src/errors/SDKInternalError.ts"),r=s("./src/models/Subscription/Helpers.ts"),i=s("./src/models/Subscription/Topic.ts");class o{maps={topics:new Map,subscriptions:new Map};getPartsFromSubscription;constructor(e){this.getPartsFromSubscription=e}get subscriptions(){return this.maps.subscriptions}get topics(){return this.maps.topics}createSubscription(e,t){const s=this.getPartsFromSubscription(t),i=(0,r.getPrefix)(e);if(!s.supportsContentType)throw new n.SDKInternalError(n.SDKInternalError.codes.InvalidSubscription,{message:`${i}: ${s.remoteId} does not support content type ${s.contentType}`,subscriptionType:e,subscription:t,subscriptonParts:s});const o=(0,r.getSubscriptionLabel)(e,s);if(this.maps.subscriptions.has(o))throw new n.SDKInternalError(n.SDKInternalError.codes.InvalidSubscription,{message:`${i}: ${o} already exists`,subscriptionType:e,subscription:t,subscriptonParts:s});this.maps.subscriptions.set(o,t),this.createTopic(s,t)}removeSubscription(e,t){const s=(0,r.getSubscriptionLabel)(t,e),i=this.maps.subscriptions.get(s);if(!i)throw new n.SDKInternalError(n.SDKInternalError.codes.InvalidSubscription,{message:`${(0,r.getPrefix)(t)}: ${s} does not exists`,subscriptionType:t,subscription:i,subscriptonParts:e});this.closeSubscription(i,s,e)}closeSubscription(e,t,s){s=s||this.getPartsFromSubscription(e),this.maps.subscriptions.delete(t),this.removeTopic(s,e)}createTopic(e,{source:t,destination:s}){const{contentType:n,label:o,remoteId:a}=e,c=(0,r.getTopicLabel)(n,o,a),d=new i.Topic(c,n);d.registerSource(t),d.registerDestination(s),this.maps.topics.set(d.getLabel(),d)}removeTopic(e,t){const{contentType:s,label:n,remoteId:i}=e,o=(0,r.getTopicLabel)(s,n,i),a=this.maps.topics.get(o);a&&(this.closeTopic(a,t),this.maps.topics.delete(o))}closeTopic(e,{source:t,destination:s}){e.unregisterSource(t),e.unregisterDestination(s)}removeSubscriptionsForNode(e){this.maps.subscriptions.forEach(((t,s)=>{s.endsWith(e)&&this.closeSubscription(t,s)}))}}},"./src/models/Subscription/SubscriptionRequest.ts":(e,t,s)=>{s.r(t),s.d(t,{SubscriptionRequest:()=>l});var n=s("./src/constants/Subscription.ts"),r=s("./src/errors/SDKInternalError.ts"),i=s("./src/interfaces/Subscription/Subscription.ts"),o=s("./src/interfaces/Subscription/SubscriptionMessage.ts"),a=s("./src/interfaces/Subscription/SystemEvent.ts"),c=s("./src/interfaces/Utils/Logger.ts"),d=s("./src/utils/Logger/Logger.ts");class l{currentDistance;maxDistance;tracks;systemTopic;answers=new Set;startTime=Date.now();params;retryCount=0;constructor(e,t,s,n){this.currentDistance=t,this.maxDistance=s,this.tracks=n,e.forEach((e=>{this.answers.add({nodeId:e,type:i.SubscriptionRequestType.Waiting})}))}getTracks(){return this.tracks}registerSystemPublisher(e){this.systemTopic=e}unregisterSystemPublisher(){delete this.systemTopic}reset(e,t){this.startTime=Date.now(),this.answers.clear(),e.forEach((e=>{this.answers.add({nodeId:e,type:i.SubscriptionRequestType.Waiting})})),this.retryCount+=1,this.currentDistance=t}sendRequest(e,t,s,i,l){if(this.retryCount>n.SUBSCRIPTION_MAX_RETRY_COUNT)throw new r.SDKInternalError(r.SDKInternalError.codes.SubscriptionRequestNoAnswer,{answers:Array.from(this.answers).map((e=>({nodeId:e.nodeId,type:e.type})))});const u=Array.from(this.answers).map((e=>e.nodeId));this.params=l,this.systemTopic.publish({sourceId:e,destinationIds:u,messageType:a.SystemMessageType.Subscription,content:{type:o.SubscriptionMessageType.NeedMediaStream,label:s,ownerId:t,trackKinds:i,params:l}}),d.default.log(c.LoggingChannels.Subscription,"Send request",e,u)}handleSubscriptionSystemEvents(e,t){switch(t.type){case o.SubscriptionMessageType.CanProvideMediaStream:{const s=this.currentDistance>=t.distance&&t.distance<=this.maxDistance,n=Array.from(this.answers).find((t=>t.nodeId===e));n.type=s?i.SubscriptionRequestType.Accepted:i.SubscriptionRequestType.Rejected,n.cost=t.cost,n.distance=t.distance,n.streamId=t.streamId,n.roundTripTime=Date.now()-this.startTime,n.params=this.params,n.ownerId=t.ownerId,n.trackKinds=t.trackKinds,n.streamLabel=t.label,d.default.log(c.LoggingChannels.Subscription,(s?"Accepted":"Rejected")+" answer",n);break}case o.SubscriptionMessageType.CannotProvideMediaStream:{const t=Array.from(this.answers).find((t=>t.nodeId===e));t.type=i.SubscriptionRequestType.Rejected,d.default.log(c.LoggingChannels.Subscription,"Rejected answer",t);break}}if(this.canChooseAnswer())return this.chooseAnswer()}chooseAnswer(){const e=Array.from(this.answers).filter((e=>e.type===i.SubscriptionRequestType.Accepted)).sort(((e,t)=>e.cost===t.cost?e.roundTripTime-t.roundTripTime:e.cost-t.cost));if(0===e.length)throw new r.SDKInternalError(r.SDKInternalError.codes.SubscriptionRequestNoAnswer,{answers:Array.from(this.answers).map((e=>({nodeId:e.nodeId,type:e.type})))});return d.default.log(c.LoggingChannels.Subscription,"Chosen answer",e[0],this.answers),e[0]}canChooseAnswer(){for(const e of this.answers)if(e.type===i.SubscriptionRequestType.Waiting)return!1;return!0}}},"./src/models/Subscription/SystemTopic.ts":(e,t,s)=>{s.r(t),s.d(t,{SystemTopic:()=>d});var n=s("uuid"),r=s("@crewdle/web-sdk-types"),i=s("./src/constants/System.ts"),o=s("./src/interfaces/Utils/Logger.ts"),a=s("./src/utils/Logger/Logger.ts"),c=s("./src/utils/Observer/Observer.ts");class d{label;listener=(0,c.createObserver)();constructor(){this.label=i.SYSTEM_TOPIC}getLabel(){return this.label}getContentType(){return r.ContentType.Data}registerSource(e){e.registerSystemPublisher(this)}unregisterSource(e){e.unregisterSystemPublisher()}publish(e){a.default.log(o.LoggingChannels.Events,"SystemTopic publish",e.sourceId,e),this.listener.publish({topicLabel:this.label,contentType:r.ContentType.Data,uuid:e.uuid??(0,n.v4)(),recipients:e.recipients??[],...e})}subscribe(e){return this.listener.subscribe(e)}}},"./src/models/Subscription/Topic.ts":(e,t,s)=>{s.r(t),s.d(t,{Topic:()=>i});var n=s("uuid"),r=s("./src/utils/Observer/Observer.ts");class i{label;contentType;listener=(0,r.createObserver)();constructor(e,t){this.label=e,this.contentType=t}getLabel(){return this.label}getContentType(){return this.contentType}registerSource(e){e.registerPublisher(this)}registerDestination(e){e.registerSubscriber(this)}publish(e){this.listener.publish({topicLabel:this.label,contentType:this.contentType,uuid:(0,n.v4)(),recipients:[],...e})}subscribe(e){return this.listener.subscribe(e)}unregisterSource(e){e.unregisterPublisher(this)}unregisterDestination(e){e.unregisterSubscriber(this)}}},"./src/public/errors/SDKClientError.ts":(e,t,s)=>{var n;s.r(t),s.d(t,{SDKClientError:()=>r,SDKClientErrorCodes:()=>n}),function(e){e.ConnectionBufferNotEmpty="connection-buffer-not-empty",e.ClusterAlreadyJoined="cluster-already-joined",e.FeatureNotEnabled="feature-not-enabled",e.GenerativeAIContextAlreadyExists="generative-ai-context-already-exists",e.GenerativeAIContextDoesNotExist="generative-ai-context-does-not-exist",e.GenerativeAILabelConflict="generative-ai-label-conflict",e.GenerativeAIWorkerAlreadyExists="generative-ai-worker-already-exists",e.GenerativeAIWorkerMissingConnector="generative-ai-worker-missing-connector",e.GenerativeAIWorkerModelSyncError="generative-ai-worker-model-sync-error",e.GraphDatabaseAlreadyExists="graph-database-already-exists",e.GraphDatabaseDoesNotExist="graph-database-does-not-exist",e.GraphDatabaseMissingConnector="graph-database-missing-connector",e.GraphDatabaseNameNotString="graph-database-name-not-string",e.JobDispatcherAlreadyExists="job-dispatcher-already-exists",e.JobDispatcherDoesNotExist="job-dispatcher-does-not-exist",e.JobDispatcherJobExists="job-dispatcher-job-exists",e.JobDispatcherJobNotFound="job-dispatcher-job-not-found",e.JobDispatcherInvalidJobType="job-dispatcher-invalid-job-type",e.JobWorkerAlreadyExists="job-worker-already-exists",e.JobWorkerDoesNotExist="job-worker-does-not-exist",e.ObjectStoreAlreadyExists="object-store-already-exists",e.ObjectStoreAlreadySubscribed="object-store-already-subscribed",e.ObjectStoreDoesNotExist="object-store-stream-does-not-exist",e.ObjectStoreNameNotString="object-store-name-not-string",e.ObjectStoreInvalidPayload="object-store-invalid-payload",e.ObjectStoreInvalidPath="object-store-invalid-path",e.ObjectStoreNotInSync="object-store-not-in-sync",e.InternalSDKError="internal-sdk-error",e.InvalidAccess="invalid-access",e.KeyValueDatabaseAlreadyExists="key-value-database-already-exists",e.KeyValueDatabaseDoesNotExist="key-value-database-does-not-exist",e.KeyValueDatabaseIndexNotFound="key-value-database-index-not-found",e.KeyValueDatabaseInvalidQuery="key-value-database-invalid-query",e.KeyValueDatabaseInvalidValue="key-value-database-invalid-value",e.KeyValueDatabaseNameNotString="key-value-database-name-not-string",e.KeyValueDatabaseNotOpen="key-value-database-not-open",e.KeyValueDatabaseTableNameReserved="key-value-database-table-name-reserved",e.KeyValueDatabaseTableNotFound="key-value-database-table-not-found",e.KeyValueDatabaseInvalidLayout="key-value-database-invalid-layout",e.LocalMediaStreamAlreadyExists="local-media-stream-already-exists",e.LocalMediaStreamNoAudioContext="local-media-stream-no-audio-context",e.PubSubTopicAlreadyExists="pub-sub-topic-already-exists",e.PubSubTopicDoesNotExist="pub-sub-topic-does-not-exist",e.PubSubTopicNameNotString="pub-sub-topic-name-not-string",e.PubSubTopicAlreadySubscribed="pub-sub-topic-already-subscribed",e.QueryBuilderInvalidArgument="query-helper-invalid-argument",e.RemoteMediaStreamAlreadyExists="remote-media-stream-already-exists",e.RemoteMediaStreamInvalidSubscriptionParams="remote-media-stream-invalid-subscription-params",e.SubscriptionRequestInProgress="subscription-request-in-progress",e.NodeNotAuthenticated="node-not-authenticated",e.NodeInvalidType="node-invalid-type",e.NodeTypeNotSupported="node-type-not-supported",e.VectorDatabaseAlreadyExists="vector-database-already-exists",e.VectorDatabaseDoesNotExist="vector-database-does-not-exist",e.VectorDatabaseMissingConnector="vector-database-missing-connector",e.VectorDatabaseNameNotString="vector-database-name-not-string"}(n||(n={}));class r extends Error{code;constructor(e,t){super(t),this.code=e}}},"./src/public/models/Content/KeyValueDatabaseLayoutBuilder.ts":(e,t,s)=>{s.r(t),s.d(t,{LayoutBuilder:()=>n,TableBuilder:()=>r});class n{layout;constructor(e){this.layout={tables:{},version:e}}static validateLayout(e){for(const t in e){if("version"!==t&&"tables"!==t)return[!1,`Invalid key '${t}' in layout`];if("tables"===t)for(const t in e.tables){if("string"!=typeof t)return[!1,`Invalid table name '${t}'`];for(const s in e.tables[t]){if("indexes"!==s)return[!1,`Invalid key '${s}' in table '${t}'`];const n=e.tables[t][s]??[];for(const e of n)if(void 0===e.keyPath||"string"!=typeof e.keyPath)return[!1,`Invalid index in table '${t}': missing or invalid keyPath`]}}else if("version"===t&&"number"!=typeof e[t])return[!1,`Invalid version '${e[t]}' in layout: Version must be a number`]}return[!0,"Valid layout"]}static layout(e){const t=new n(e);return t.layout.version=e,t}table(e){return this.layout.tables[e]={},new r(this.layout.tables[e])}getLayout(){return this.layout}}class r{tableLayout;constructor(e){this.tableLayout=e}index(e){return this.tableLayout.indexes=this.tableLayout.indexes??[],this.tableLayout.indexes.push({keyPath:e}),this}}},"./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts":(e,t,s)=>{s.r(t),s.d(t,{QueryBuilder:()=>r});var n=s("./src/public/errors/SDKClientError.ts");class r{query;constructor(e){this.query={orderBy:{key:e,direction:"asc"}}}static index(e){if("string"!=typeof e||0===e.length)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid index key: must be a string");return new r(e)}static validateQuery(e){try{return r.buildQuery(e),!0}catch(e){return!1}}static buildQuery(e){const t=r.index(e.orderBy?.key??e.where?.key??"");if(e.where){const s=e.where;if((r.isWhereValue(s)||r.isWhereValues(s)||r.isWhereBetween(s))&&t.where(s.operator,s.value),e.orderBy?.key&&e.orderBy?.key!==e.where.key)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid query: where and orderBy clauses must use the same key")}return e.orderBy&&t.orderBy(e.orderBy.direction),e.limit&&t.limit(e.limit),e.offset&&t.offset(e.offset),t}getQuery(){return{...this.query}}where(e,t){const s={key:this.query.orderBy.key,operator:e,value:t};if(!r.isWhereValue(s)&&!r.isWhereValues(s)&&!r.isWhereBetween(s))throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid where clause");return this.query.where=s,this}orderBy(e){if("asc"!==e&&"desc"!==e)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid order: must be asc or desc");return this.query.orderBy.direction=e,this}limit(e){if("number"!=typeof e||e<0)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid limit: must be a positive number");return this.query.limit=e,this}offset(e){if("number"!=typeof e||e<0)throw new n.SDKClientError(n.SDKClientErrorCodes.QueryBuilderInvalidArgument,"Invalid offset: must be a positive number");return this.query.offset=e,this}static isWhereValue(e){if(!(e&&"object"==typeof e&&"operator"in e&&"value"in e))return!1;const{operator:t,value:s}=e;return!(!["==","!=",">","<","<=",">="].includes(t)||Array.isArray(s))}static isWhereValues(e){if(!(e&&"object"==typeof e&&"operator"in e&&"value"in e))return!1;const{operator:t,value:s}=e;return!(!["in","not-in"].includes(t)||!Array.isArray(s))}static isWhereBetween(e){if(!(e&&"object"==typeof e&&"operator"in e&&"value"in e))return!1;const{operator:t,value:s}=e;return!("between"!==t||!Array.isArray(s)||2!==s.length)}}},"./src/services/Auth/FirebaseAuthService.ts":(e,t,s)=>{s.r(t),s.d(t,{FirebaseAuthService:()=>o});var n=s("firebase/auth"),r=s("firebase/functions"),i=s("./src/services/Firebase/FirebaseService.ts");class o{vendorId;user;constructor(e){this.vendorId=e}async signInWithCredential(e){const t=await(0,r.httpsCallable)(i.default.getFunctions(),"sdkCreateToken")({uid:`ccc${this.vendorId}ccc${e.id}`}),s=await(0,n.signInWithCustomToken)(i.default.getAuth(),t.data.token);this.user=s.user}async signOut(){await(0,n.signOut)(i.default.getAuth())}getIdToken(){return this.user?.getIdToken()??Promise.reject("User not signed in")}}},"./src/services/Discovery/FirebaseRDBDiscoveryService.ts":(e,t,s)=>{s.r(t),s.d(t,{FirebaseRDBDiscoveryService:()=>a});var n=s("firebase/database"),r=s("./src/services/Firebase/FirebaseService.ts"),i=s("./src/utils/Logger/Logger.ts"),o=s("./src/utils/Observer/Observer.ts");class a{vendorId;clusterId;localNode;minConnections;disconnectCallback=(0,o.createSingleObserver)();firebaseUnsubscriber;childRemovedUnsubscriber;onDisconnectHandler;connected=!1;clusterKey;nodeKey;constructor(e,t,s,o){this.vendorId=e,this.clusterId=t,this.localNode=s,this.minConnections=o,this.clusterKey=`ccc${this.vendorId}ccc${this.clusterId}`,this.nodeKey=`ccc${this.vendorId}ccc${this.localNode.getId()}`,this.firebaseUnsubscriber=(0,n.onValue)((0,n.ref)(r.default.getDatabase(),".info/connected"),(e=>{!0!==e.val()?this.connected&&i.default.error("firebase-disconnect",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type}):(this.connected=!0,this.setOnDisconnectHandler(),i.default.warning("firebase-connect",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type}))}))}async join(){await this.joinCluster();const e=await this.getAncestors();return this.childRemovedUnsubscriber=(0,n.onChildRemoved)((0,n.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/nodes`),(e=>{const t=e.key;if(!t)return;const s=t.replace(`ccc${this.vendorId}ccc`,"");this.disconnectCallback.publish(s)})),e}async close(){this.childRemovedUnsubscriber?.(),delete this.childRemovedUnsubscriber,this.onDisconnectHandler?.cancel(),delete this.onDisconnectHandler,this.firebaseUnsubscriber?.(),delete this.firebaseUnsubscriber,await(0,n.remove)((0,n.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/nodes/${this.nodeKey}`))}onNodeDisconnect(e){return this.disconnectCallback.subscribe(e)}async getAncestors(){const e=[],t=await(0,n.get)((0,n.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/nodes`)),s=[];return t.forEach((e=>{const t=e.key?.replace(`ccc${this.vendorId}ccc`,"");s.push({id:t,joinedAt:e.val().joinedAt,priority:e.val().priority})})),s.sort(((e,t)=>e.joinedAt===t.joinedAt?e.priority-t.priority:e.joinedAt-t.joinedAt)).splice(s.findIndex((e=>e.id===this.localNode.getId()))),s.sort(((e,t)=>t.joinedAt===e.joinedAt?t.priority-e.priority:t.joinedAt-e.joinedAt)).forEach((t=>{e.length>=this.minConnections||e.push(t.id)})),i.default.logEvent("discover",{clusterId:this.clusterId,nodeId:this.localNode.getId(),nodeType:this.localNode.type,data:{ancestorIds:e,allNodes:s}}),e}async joinCluster(){await(0,n.set)((0,n.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/nodes/${this.nodeKey}`),{joinedAt:(0,n.serverTimestamp)(),priority:Math.random()})}setOnDisconnectHandler(){this.onDisconnectHandler&&this.onDisconnectHandler.cancel(),this.onDisconnectHandler=(0,n.onDisconnect)((0,n.ref)(r.default.getDatabase(),`clusters/${this.clusterKey}/nodes/${this.nodeKey}`)),this.onDisconnectHandler.remove()}}},"./src/services/Firebase/FirebaseService.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var n=s("firebase/app"),r=s("firebase/auth"),i=s("firebase/database"),o=s("firebase/firestore"),a=s("firebase/functions"),c=s("uuid"),d=s("./src/constants/SDK.ts"),l=s("./src/environments/Environment.ts");class u{static instance;app;auth;functions;database;firestore;clockSkew;constructor(){this.getApp()}static getInstance(){return u.instance||(u.instance=new u),u.instance}getApp(){if(!this.app){let e=d.SDK_FIRESTORE_APP_NAME;"undefined"!=typeof window&&(e=`${d.SDK_FIRESTORE_APP_NAME}-${(0,c.v4)()}`),this.app=(0,n.initializeApp)(l.Environment.firebaseConfig,`${e}`)}return this.app}getAuth(){return this.auth||(this.auth=(0,r.getAuth)(this.getApp())),this.auth}getFunctions(){return this.functions||(this.functions=(0,a.getFunctions)(this.getApp(),l.Environment.firebaseConfig.functionsRegion)),this.functions}getDatabase(){return this.database||(this.database=(0,i.getDatabase)(this.getApp())),this.database}getFirestore(){return this.firestore||(this.firestore=(0,o.getFirestore)(this.getApp())),this.firestore}async getEstimatedTimestamp(){if(this.clockSkew)return Date.now()+this.clockSkew;const e=this.getDatabase(),t=(0,i.ref)(e,".info/connected"),s=(0,i.onValue)(t,(e=>{!1===e.val()&&(s(),delete this.clockSkew)})),n=(0,i.ref)(e,".info/serverTimeOffset");return new Promise((e=>{(0,i.onValue)(n,(t=>{(0,i.off)(n),this.clockSkew=t.val(),e(Date.now()+(this.clockSkew??0))}))}))}}const h=u.getInstance()},"./src/services/Graph/GraphService.ts":(e,t,s)=>{s.r(t),s.d(t,{GraphService:()=>n});class n{options;ranges=[];maxLayer;remoteNodes=new Map;constructor(e){this.options=e,this.maxLayer=(this.options.maxConnections-2*this.options.minConnections)/2,this.ranges.push({start:1,end:this.getNextTargetRank(1,1)-1});for(let e=0;e<this.maxLayer;++e)this.ranges.push({start:this.getNextTargetRank(1,e+1),end:this.getNextTargetRank(1,e+2)-1})}getNextTargetRank(e,t=1){let s=this.options.maxDistance-this.options.minConnections,n=1;for(let e=1;e<t;++e)s*=this.options.maxDistance-this.options.minConnections-e,n*=this.options.maxDistance-this.options.minConnections-e+1;return s*this.options.minConnections+e-n}getCurrentMaxLayer(e){let t=0;for(;this.ranges[t].end<e;)t+=1;return t}getMinConnections(){return this.options.minConnections}getMaxConnections(){return this.options.maxConnections}getMaxDistance(){return this.options.maxDistance}getRemoteNodes(){return this.remoteNodes}setRemoteNode(e,t){this.remoteNodes.set(e,t)}hasRemoteNode(e){return this.remoteNodes.has(e)}getRemoteNode(e){return this.remoteNodes.get(e)}deleteRemoteNode(e){this.remoteNodes.delete(e)}getClosestNodes(e,t){const s=this.getRemoteNode(t)?.getRank()??0;return e.map((e=>this.getRemoteNode(e))).filter((e=>void 0!==e)).sort(((e,t)=>Math.abs(s-(e&&e.getRank()||1/0))-Math.abs(s-(t&&t.getRank()||1/0)))).map((e=>e.getId()))}}},"./src/services/JobQueue/JobQueueService.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});class n{static instance;jobQueue=[];isRunning=!1;constructor(){}static getInstance(){return n.instance||(n.instance=new n),n.instance}get length(){return this.jobQueue.length}isAvailable(){return!this.isRunning}clear(e){e?this.jobQueue=this.jobQueue.filter((t=>t.ownerId!==e)):(this.jobQueue=[],this.isRunning=!1)}add(e,t){this.jobQueue.push({callback:t,ownerId:e}),this.runJobQueue()}async runJobQueue(){if(!this.isRunning){for(this.isRunning=!0;this.jobQueue.length>0;){const e=this.jobQueue.shift();if(e)try{console.warn("JobQueueService: Running job"),await e.callback()}catch(e){console.error("JobQueueService: Error running job",e)}}this.isRunning=!1}}}const r=n.getInstance()},"./src/services/MessageBuffer/MessageBufferService.ts":(e,t,s)=>{s.r(t),s.d(t,{MessageBufferService:()=>i});var n=s("./src/constants/Services.ts"),r=s("./src/utils/Interval/Interval.ts");class i{buffer=new Map;unsubscribeHandler;constructor(){this.unsubscribeHandler=r.default.setInterval((()=>{for(const[e,t]of this.buffer.entries())Date.now()-t>n.MESSAGE_BUFFER_RETENTION_TIME&&this.buffer.delete(e)}),n.MESSAGE_BUFFER_CLEANUP_INTERVAL)}close(){this.unsubscribeHandler()}addMessage(e){this.buffer.set(e,Date.now())}hasMessage(e){return this.buffer.has(e)}}},"./src/services/Transaction/FirebaseRDBTransactionService.ts":(e,t,s)=>{s.r(t),s.d(t,{FirebaseRDBTransactionService:()=>a});var n=s("./src/constants/Services.ts"),r=s("./src/errors/SDKInternalError.ts"),i=s("firebase/database"),o=s("./src/services/Firebase/FirebaseService.ts");class a{vendorId;clusterId;clusterKey;constructor(e,t){this.vendorId=e,this.clusterId=t,this.clusterKey=`ccc${this.vendorId}ccc${this.clusterId}`}async writeTransaction(e,t){const s=(0,i.ref)(o.default.getDatabase(),`clusters/${this.clusterKey}/objectstores/${t}/transactions/${e.id}`),n=(0,i.onDisconnect)(s);n.remove(),e.parentId||delete e.parentId;try{await(0,i.set)(s,e)}catch(e){throw await n.cancel(),new r.SDKInternalError(r.SDKInternalError.codes.ObjectStoreCannotWriteTransaction)}if(!1===(await(0,i.runTransaction)((0,i.ref)(o.default.getDatabase(),`clusters/${this.clusterKey}/objectstores/${t}/transactions/lastTransaction`),(t=>t?t===e.parentId?e.id:void 0:e.parentId?e.parentId:e.id))).committed)throw await(0,i.remove)(s),await n.cancel(),new r.SDKInternalError(r.SDKInternalError.codes.ObjectStoreNotSynced);await n.cancel()}async getTransactions(e,t){let s=[];const a=(0,i.ref)(o.default.getDatabase(),`clusters/${this.clusterKey}/objectstores/${e}/transactions`);let c=await(0,i.get)((0,i.query)(a,(0,i.limitToFirst)(n.TRANSACTION_PER_PAGE+1),(0,i.orderByKey)()));if(!c.exists()){if(void 0!==t)throw new r.SDKInternalError(r.SDKInternalError.codes.ObjectStoreInvalidState);return s}const d=c.val();for(;Object.keys(c.val()).length>n.TRANSACTION_PER_PAGE;){const e=Object.keys(c.val()),t=e[e.length-1];c=await(0,i.get)((0,i.query)(a,(0,i.limitToFirst)(n.TRANSACTION_PER_PAGE+1),(0,i.startAt)(t),(0,i.orderByKey)())),Object.assign(d,c.val())}if(s=Object.values(d).filter((e=>"string"!=typeof e)),0===s.length&&void 0!==t)throw new r.SDKInternalError(r.SDKInternalError.codes.ObjectStoreInvalidState);if(s.length>0&&void 0!==t&&!s.find((e=>e.id===t)))throw new r.SDKInternalError(r.SDKInternalError.codes.ObjectStoreInvalidState);const l=[];let u=s.find((e=>e.parentId===t));for(;u;)l.push(u),u=s.find((e=>e.parentId===u.id));return l}}},"./src/services/Workflow/WorkflowService.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var n=s("firebase/firestore"),r=s("@crewdle/web-sdk-types"),i=s("./src/errors/SDKInternalError.ts"),o=s("./src/interfaces/Services/Workflow.ts"),a=s("./src/services/Firebase/FirebaseService.ts");class c{static instance;constructor(){}static getInstance(){return c.instance||(c.instance=new c),c.instance}async getWorkflow(e,t){const s=await(0,n.getDoc)((0,n.doc)(a.default.getFirestore(),`/developers/${e}/resources/generative-ai-workflow/items/${t}`)),r=await this.getAgents(e),o=await this.getDataCollections(e),c=await this.getModels(e);if(!s.exists())throw new i.SDKInternalError(i.SDKInternalError.codes.WorkflowDoesNotExist);return this.parseWorkflowDocument(s,r,o,c)}parseWorkflowDocument(e,t,s,n){const r=e.data();if(!r)throw new i.SDKInternalError(i.SDKInternalError.codes.WorkflowDoesNotExist);const o=this.parseWorkflowBlocks(r.blocks,t,s);return{id:e.id,modelsBucketId:r.bucketId,blocks:o,models:this.getWorkflowModels(o,n),dataBucketIds:this.getWorkflowObjectStorageBuckets(o)}}getWorkflowModels(e,t){const s=new Set;for(const t of e)if(t.type===o.WorkflowBlockType.Agent&&s.add(t.modelId),t.type===o.WorkflowBlockType.DataCollection)for(const e of[...t.ingestBlocks,...t.retrieveBlocks])e.type===o.DataCollectionBlockType.Model&&s.add(e.id);return Array.from(s).map((e=>{const{id:s,engineType:n,taskType:r,inputType:i,outputType:o,sourceUrl:a}=t.find((t=>t.id===e));return{id:s,engineType:n,taskType:r,inputType:i,outputType:o,sourceUrl:a}}))}getWorkflowObjectStorageBuckets(e){const t=new Set;for(const s of e)if(s.type===o.WorkflowBlockType.DataCollection)for(const e of[...s.ingestBlocks,...s.retrieveBlocks])e.type===o.DataCollectionBlockType.ObjectStorageUpload&&t.add(e.id);return Array.from(t)}parseWorkflowBlocks(e,t,s){return e.map((e=>{switch(e.type){case o.WorkflowBlockType.Agent:const n=t.find((t=>t.id===e.id));if(!n)throw new i.SDKInternalError(i.SDKInternalError.codes.WorkflowInvalidBlockType,{block:e});return{type:n.type,id:n.id,uid:e.uid,instructions:n.instructions,temperature:n.temperature,maxTokens:n.maxTokens,modelId:n.modelId,links:e.links};case o.WorkflowBlockType.DataCollection:const r=s.find((t=>t.id===e.id));if(!r)throw new i.SDKInternalError(i.SDKInternalError.codes.WorkflowInvalidBlockType,{block:e});return{type:r.type,id:r.id,uid:e.uid,description:r.description,ingestBlocks:r.ingestBlocks,retrieveBlocks:r.retrieveBlocks,links:e.links};case o.WorkflowBlockType.Prompt:return{type:o.WorkflowBlockType.Prompt,id:e.id,uid:e.uid,links:e.links};case o.WorkflowBlockType.Answer:return{type:o.WorkflowBlockType.Answer,id:e.id,uid:e.uid,links:e.links};case o.WorkflowBlockType.Time:return{type:o.WorkflowBlockType.Time,id:e.id,uid:e.uid,links:e.links};case o.WorkflowBlockType.Code:return{type:o.WorkflowBlockType.Code,id:e.id,uid:e.uid,links:e.links};case o.WorkflowBlockType.Search:return{type:o.WorkflowBlockType.Search,id:e.id,uid:e.uid,links:e.links};case o.WorkflowBlockType.WebScraper:return{type:o.WorkflowBlockType.WebScraper,id:e.id,uid:e.uid,links:e.links};default:throw new i.SDKInternalError(i.SDKInternalError.codes.WorkflowInvalidBlockType,{block:e})}}))}async getAgents(e){return(await(0,n.getDocs)((0,n.collection)(a.default.getFirestore(),`/developers/${e}/resources/generative-ai-agent/items`))).docs.map((e=>{const t=e.data();return{type:o.WorkflowBlockType.Agent,id:e.id,instructions:t.instructions,temperature:t.temperature,maxTokens:t.maxTokens,modelId:t.modelId}}))}async getDataCollections(e){return(await(0,n.getDocs)((0,n.collection)(a.default.getFirestore(),`/developers/${e}/resources/generative-ai-collection/items`))).docs.map((e=>{const t=e.data();return{type:o.WorkflowBlockType.DataCollection,id:e.id,description:t.description,ingestBlocks:t.ingestBlocks,retrieveBlocks:t.retrieveBlocks}}))}async getModels(e){return(await(0,n.getDocs)((0,n.collection)(a.default.getFirestore(),`/developers/${e}/resources/generative-ai-model/items`))).docs.map((e=>{const t=e.data();return{id:e.id,modelName:t.modelName,engineType:t.engine,taskType:t.task,inputType:t.inputType??r.GenerativeAIModelInputType.Text,outputType:t.outputType??r.GenerativeAIModelOutputType.Text,sourceUrl:t.url}}))}}const d=c.getInstance()},"./src/utils/GenerativeAI/Ingest.ts":(e,t,s)=>{s.r(t),s.d(t,{processIngest:()=>n.processIngest});var n=s("./src/utils/GenerativeAI/Ingest/index.ts")},"./src/utils/GenerativeAI/Ingest/ChunkSplitter.ts":(e,t,s)=>{s.r(t),s.d(t,{processChunkSplitterBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts"),o=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts");async function a(e,t,s,a,d){let l=[];if(t instanceof Array)for(const e of t)l=l.concat(c(e.content,s,e.start,e.length));else l=c(t,s);i.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.ChunkSplitter,traceLevel:r.AITraceLevel.Debug,jobId:e,blockId:s.id,traceId:(0,n.v4)(),timestamp:Date.now(),status:"success",totalChunks:l.length,chunkSize:s.attributes.size}),await(0,o.processNextBlock)(e,l,s,a,d)}function c(e,t,s,n){const r=[];for(let i=0;i<e.length;i+=t.attributes.size){s||(s=i);let o=i-t.attributes.overlap;o<0&&(o=0);let a=i+t.attributes.size+t.attributes.overlap;a>e.length&&(a=e.length),n||(n=i+t.attributes.size)>e.length&&(n=e.length),r.push({content:e.substring(o,a),start:s,length:n})}return r}},"./src/utils/GenerativeAI/Ingest/DocumentParser.ts":(e,t,s)=>{s.r(t),s.d(t,{matchExtension:()=>d,plainTextCodeFiles:()=>c,processDocumentParserBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,l){let u;if(t.file.type.startsWith("text/")||d(t.file.name,c))u=await t.file.text();else{if(!l.documentParserConnector.supports(t.file))throw new Error(`Document Ingest - Unsupported file type - ${t.file.type} - ${t.file.name}`);u=await l.documentParserConnector.parse(t.file)}o.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.DocumentParser,traceLevel:r.AITraceLevel.Debug,blockId:s.id,jobId:e,traceId:(0,n.v4)(),timestamp:Date.now(),status:"success",documentType:t.file.type,documentName:t.file.name,extractionMethod:"OfficeParser"}),await(0,i.processNextBlock)(e,u,s,a,l)}const c=[".js",".ts",".py",".json",".txt",".html",".css",".xml",".md",".yml",".yaml",".sh",".bat",".ini",".cfg",".conf",".sql",".rb",".php",".java",".c",".cpp",".cs",".r",".go",".swift",".scala",".kt",".rs",".dart",".pl",".lua",".hs",".clj",".groovy",".erl",".ex",".exs",".vb",".ps1",".tcl",".m",".vbs",".awk",".rkt",".jl",".ipynb",".jsx",".tsx",".vue",".erb",".jinja",".jinja2",".hbs",".handlebars",".ejs",".pug",".liquid",".mustache",".tpl",".twig",".j2",".djt"];function d(e,t){return t.includes(`.${e.split(".").pop()?.toLowerCase()||""}`)}},"./src/utils/GenerativeAI/Ingest/EntityExtractor.ts":(e,t,s)=>{s.r(t),s.d(t,{processEntityExtractorBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,d){const l=new Set;for(const e of t)await c(e.content,l,s,d.nlpLibraryConnector);o.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.EntityExtractor,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,timestamp:Date.now(),blockId:s.id,status:"success",content:t.map((e=>e.content)).join(" "),entitiesExtracted:l,totalEntities:l.size}),await(0,i.processNextBlock)(e,l,s,a,d)}async function c(e,t,s,n){const r=await n.getEntities(e,{ner:s.attributes.ner,noun:s.attributes.noun,propn:s.attributes.propn,verb:s.attributes.verb});for(const e of r)t.add(e)}},"./src/utils/GenerativeAI/Ingest/GraphDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{processGraphDatabaseBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");function a(e,t,s,a,c){if(s.accumulated||(s.accumulated={}),"string"==typeof t?s.accumulated.content=t:t instanceof Set?s.accumulated.entities=t:t instanceof Map?s.accumulated.relations=t:t instanceof Array?s.accumulated.index=t:s.accumulated.file=t,s.timesCalled=s.timesCalled?s.timesCalled+1:1,(0,i.getIncomingLinks)(s,a)>s.timesCalled)return;if(!(s.accumulated.entities&&s.accumulated.file&&s.accumulated.content&&s.accumulated.index))throw new Error("Graph database block is missing required data");const d=c.contentMediator.getGraphDatabase(s.id);for(const e of s.accumulated.entities){let t=[];t=s.accumulated.index.filter((t=>t.content.includes(e)));try{d.addNode(s.accumulated.file.pathName,s.accumulated.content,t,e)}catch(e){}}if(s.accumulated.relations){for(const[e,t]of s.accumulated.relations)for(const s of t)try{d.addEdge(e,s)}catch(e){}o.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.GraphDatabase,jobId:e,blockId:s.id,status:"success",timestamp:Date.now(),traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,content:s.accumulated.content,entities:s.accumulated.entities,relations:s.accumulated.relations})}}},"./src/utils/GenerativeAI/Ingest/Model.ts":(e,t,s)=>{s.r(t),s.d(t,{processModelBlock:()=>c});var n=s("uuid"),r=s("@crewdle/web-sdk-types"),i=s("./src/interfaces/AITrace/Trace.ts"),o=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),a=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function c(e,t,s,c,l){const u=l.models.find((e=>e.id===s.id));if(!u)throw new Error("Model not found");switch(u.outputType){case r.GenerativeAIModelOutputType.Text:if("string"!=typeof t)throw new Error("Model output type is text but input is not text");await async function(e,t,s,r,c,d){let l;const u=d.generativeAIWorkerConnectors.find((e=>e.getEngineType()===s.engineType));if(!u)throw new Error("No connector found for model");l=await async function(e,t,s){const n=await t.processJob({prompt:e},{model:s});if(n.output instanceof Array)throw new Error("Model output is an array but expected text");return n.output}(t,u,s),a.default.trace({jobType:i.AITraceType.Ingest,type:i.AIIngestTraceBlock.Model,jobId:e,blockId:r.id,traceId:(0,n.v4)(),traceLevel:i.AITraceLevel.Debug,timestamp:Date.now(),status:"success",modelName:s.id,inputType:s.inputType,outputType:s.outputType,content:t,results:l}),await(0,o.processNextBlock)(e,l,r,c,d)}(e,t,u,s,c,l);break;case r.GenerativeAIModelOutputType.Vector:if(!(t instanceof Array))throw new Error("Model output type is vector but input is not an index");await async function(e,t,s,n,r,i){const a=[],c=i.generativeAIWorkerConnectors.find((e=>e.getEngineType()===s.engineType));if(!c)throw new Error("No connector found for model");for(const e of t)a.push(await d(e,c,s));await(0,o.processNextBlock)(e,a,n,r,i)}(e,t,u,s,c,l)}}async function d(e,t,s){return(await t.processJob({prompt:e.content},{model:s})).output}},"./src/utils/GenerativeAI/Ingest/NextBlock.ts":(e,t,s)=>{s.r(t),s.d(t,{getIncomingLinks:()=>g,processNextBlock:()=>p});var n=s("./src/interfaces/Services/Workflow.ts"),r=s("./src/utils/GenerativeAI/Ingest/ChunkSplitter.ts"),i=s("./src/utils/GenerativeAI/Ingest/DocumentParser.ts"),o=s("./src/utils/GenerativeAI/Ingest/EntityExtractor.ts"),a=s("./src/utils/GenerativeAI/Ingest/GraphDatabase.ts"),c=s("./src/utils/GenerativeAI/Ingest/Model.ts"),d=s("./src/utils/GenerativeAI/Ingest/RelationExtractor.ts"),l=s("./src/utils/GenerativeAI/Ingest/SentenceSplitter.ts"),u=s("./src/utils/GenerativeAI/Ingest/VectorDatabase.ts"),h=s("./src/utils/GenerativeAI/Ingest/WordSplitter.ts");async function p(e,t,s,p,g){for(const b of s.links||[]){const s=p.find((e=>e.uid===b.uid));if(s)switch(s.type){case n.DataCollectionBlockType.ChunkSplitter:await(0,r.processChunkSplitterBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.DocumentParser:await(0,i.processDocumentParserBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.EntityExtractor:await(0,o.processEntityExtractorBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.GraphDatabase:(0,a.processGraphDatabaseBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.Model:await(0,c.processModelBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.RelationExtractor:await(0,d.processRelationExtractorBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.SentenceSplitter:await(0,l.processSentenceSplitterBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.VectorDatabase:(0,u.processVectorDatabaseBlock)(e,t,s,p,g);break;case n.DataCollectionBlockType.WordSplitter:await(0,h.processWordSplitterBlock)(e,t,s,p,g)}}}function g(e,t){return t.filter((t=>t.links?.some((t=>t.uid===e.uid)))).length}},"./src/utils/GenerativeAI/Ingest/RelationExtractor.ts":(e,t,s)=>{s.r(t),s.d(t,{processRelationExtractorBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,d){if(s.accumulated||(s.accumulated={}),t instanceof Array?s.accumulated.index=t:s.accumulated.entities=t,s.timesCalled=s.timesCalled?s.timesCalled+1:1,(0,i.getIncomingLinks)(s,a)>s.timesCalled)return;if(!s.accumulated.index||!s.accumulated.entities)throw new Error("Relation extractor block is missing required data");const l=new Map;for(const e of s.accumulated.index)c(e.content,s.accumulated.entities,l);o.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.RelationExtractor,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,blockId:s.id,timestamp:Date.now(),status:"success",content:s.accumulated.index.map((e=>e.content)).join(" "),entities:s.accumulated.entities,relations:l,totalRelations:l.size}),await(0,i.processNextBlock)(e,l,s,a,d)}function c(e,t,s){for(const n of t)for(const r of t){if(n===r)continue;const t=e.indexOf(n),i=e.indexOf(r);-1!==t&&-1!==i&&(s.has(n)||s.set(n,new Set),s.get(n).add(r))}}},"./src/utils/GenerativeAI/Ingest/SentenceSplitter.ts":(e,t,s)=>{s.r(t),s.d(t,{processSentenceSplitterBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,c){let d=[];if(t instanceof Array)for(const e of t){const t=await c.nlpLibraryConnector.getSentences(e.content);d=d.concat(t.map((t=>({content:t,start:e.start,length:e.length}))))}else d=(await c.nlpLibraryConnector.getSentences(t)).map((e=>({content:e,start:t.indexOf(e),length:e.length})));o.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.SentenceSplitter,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,blockId:s.id,timestamp:Date.now(),status:"success",totalSentences:d.length,averageSentenceLength:d.reduce(((e,t)=>e+t.length),0)/d.length}),await(0,i.processNextBlock)(e,d,s,a,c)}},"./src/utils/GenerativeAI/Ingest/VectorDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{processVectorDatabaseBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");function a(e,t,s,a,c){var d;if(s.accumulated||(s.accumulated={}),t instanceof Array?(d=t)[0]instanceof Array&&"number"==typeof d[0]?.[0]?s.accumulated.vectors=t:s.accumulated.index=t:"string"==typeof t?s.accumulated.content=t:s.accumulated.file=t,s.timesCalled=s.timesCalled?s.timesCalled+1:1,!((0,i.getIncomingLinks)(s,a)>s.timesCalled)){if(!(s.accumulated.content&&s.accumulated.index&&s.accumulated.vectors&&s.accumulated.file))throw new Error("Vector database block is missing required data");c.contentMediator.getVectorDatabase(s.id).insert(s.accumulated.file.pathName,s.accumulated.content,s.accumulated.index,s.accumulated.vectors),o.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.VectorDatabase,jobId:e,blockId:s.id,status:"success",timestamp:Date.now(),traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,content:s.accumulated.content,vectors:s.accumulated.vectors,filePathName:s.accumulated.file.pathName})}}},"./src/utils/GenerativeAI/Ingest/WordSplitter.ts":(e,t,s)=>{s.r(t),s.d(t,{processWordSplitterBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,d){let l=[];if(t instanceof Array)for(const e of t)l=l.concat(c(e.content,s,e.start,e.length));else l=c(t,s);o.default.trace({jobType:r.AITraceType.Ingest,type:r.AIIngestTraceBlock.WordSplitter,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,blockId:s.id,timestamp:Date.now(),status:"success",totalChunks:l.length,averageChunkLength:l.reduce(((e,t)=>e+t.length),0)/l.length}),await(0,i.processNextBlock)(e,l,s,a,d)}function c(e,t,s,n){const r=[],i=e.split(" ");let o="",a=0,c=0,d=0;for(const e of i){if(o.length+e.length>t.attributes.size){let e=a,l="";for(;e>=0&&l.length+i[e].length<t.attributes.overlap;)l=i[e]+" "+l,e--;let u=c,h="";for(;u<i.length&&h.length+i[u].length<t.attributes.overlap;)h+=i[u]+" ",u++;o=l+o+h,r.push({content:o.trim(),start:s??d,length:n??o.length}),o="",a=c}o+=e+" ",c++,d+=e.length+1}if(o.length>0){let e=a,c="";for(;e>=0&&c.length+i[e].length<t.attributes.overlap;)c=i[e]+" "+c,e--;o=c+o,r.push({content:o.trim(),start:s??d,length:n??o.length})}return r}},"./src/utils/GenerativeAI/Ingest/index.ts":(e,t,s)=>{s.r(t),s.d(t,{processIngest:()=>r});var n=s("./src/utils/GenerativeAI/Ingest/NextBlock.ts");async function r(e,t,s,r,i){try{const o=i.contentMediator.getObjectStoreBucket(s.id),a=await o.get(t);await(0,n.processNextBlock)(e,{file:a,pathName:t},s,structuredClone(r),i)}catch(e){console.error("Error processing ingest",e)}}},"./src/utils/GenerativeAI/Retrieve.ts":(e,t,s)=>{s.r(t),s.d(t,{processRetrieve:()=>n.processRetrieve});var n=s("./src/utils/GenerativeAI/Retrieve/index.ts")},"./src/utils/GenerativeAI/Retrieve/EntityExtractor.ts":(e,t,s)=>{s.r(t),s.d(t,{processEntityExtractorBlock:()=>a,processEntityExtractorBlockHelper:()=>c});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Retrieve/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,d,l){const u=new Set;if(t instanceof Array)for(const e of t)await c(e.content,a,u,l.nlpLibraryConnector);else await c(t,a,u,l.nlpLibraryConnector);o.default.trace({jobType:r.AITraceType.Retrieve,type:r.AIRetrieveTraceBlock.EntityExtractor,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,timestamp:Date.now(),blockId:a.id,status:"success",content:t,entitiesExtracted:u,totalEntities:u.size}),await(0,i.processNextBlock)(e,u,s,a,d,l)}async function c(e,t,s,n){const r=await n.getEntities(e,{ner:t.attributes.ner,noun:t.attributes.noun,propn:t.attributes.propn,verb:t.attributes.verb});for(const e of r)s.add(e)}},"./src/utils/GenerativeAI/Retrieve/GraphDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{processGraphDatabaseBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Retrieve/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,c,d){if(a.accumulated||(a.accumulated={}),t instanceof Array?(a.accumulated.results||(a.accumulated.results=[]),a.accumulated.results.push(...t)):t instanceof Set?a.accumulated.entities=t:a.accumulated.prompt=t,a.timesCalled=a.timesCalled?a.timesCalled+1:1,(0,i.getIncomingLinks)(a,c)>a.timesCalled)return;if(!a.accumulated.prompt&&!a.accumulated.results||!a.accumulated.entities)throw new Error("Graph database block is missing required data");const l=d.contentMediator.getGraphDatabase(a.id).getContent(Array.from(a.accumulated.entities),a.attributes.maxDepth,a.attributes.contentSize);let u=[];for(const e in l){const t=l[e];for(const s of t){let t=0;if(a.accumulated.prompt&&(t=await d.nlpLibraryConnector.getSimilarity(a.accumulated.prompt,s)),a.accumulated.results)for(const e of a.accumulated.results)t=Math.max(t,await d.nlpLibraryConnector.getSimilarity(e.content,s));t<a.attributes.minRelevance||u.push({content:s,relevance:t,pathName:e})}}u=u.sort(((e,t)=>t.relevance-e.relevance)).slice(0,a.attributes.topK),o.default.trace({jobType:r.AITraceType.Retrieve,type:r.AIRetrieveTraceBlock.GraphSearch,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,timestamp:Date.now(),blockId:a.id,status:"success",content:t,topResults:u,numResults:u.length}),await(0,i.processNextBlock)(e,u,s,a,c,d)}},"./src/utils/GenerativeAI/Retrieve/Model.ts":(e,t,s)=>{s.r(t),s.d(t,{processModelBlock:()=>c});var n=s("uuid"),r=s("@crewdle/web-sdk-types"),i=s("./src/interfaces/AITrace/Trace.ts"),o=s("./src/utils/GenerativeAI/Retrieve/NextBlock.ts"),a=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function c(e,t,s,c,d,l){const u=l.models.find((e=>e.id===c.id));if(!u)throw new Error("Model not found");let h="";switch(h=t instanceof Array?t.map((e=>e.content)).join(", "):t,u.outputType){case r.GenerativeAIModelOutputType.Text:await async function(e,t,s,r,c,d,l){const u=l.generativeAIWorkerConnectors.find((e=>e.getEngineType()===r.engineType));if(!u)throw new Error("No connector found for model");const h=await async function(e,t,s,n){const r={prompt:e};t.context.length>0&&(r.instructions=`Additional context:\n${t.context.map((e=>`From ${e.pathName}: ${e.content}`)).join("\n")}`);const i=await s.processJob(r,{model:n});if(i.output instanceof Array)throw new Error("Unexpected output type");return t.inputTokens+=i.inputTokens??0,t.outputTokens+=i.outputTokens??0,i.output}(t,s,u,r);a.default.trace({jobType:i.AITraceType.Retrieve,type:i.AIRetrieveTraceBlock.TextModel,jobId:e,traceId:(0,n.v4)(),traceLevel:i.AITraceLevel.Debug,timestamp:Date.now(),blockId:c.id,status:"success",modelName:r.id,content:t,newPrompt:h,inputType:r.inputType,outputType:r.outputType}),await(0,o.processNextBlock)(e,h,s,c,d,l)}(e,h,s,u,c,d,l);break;case r.GenerativeAIModelOutputType.Vector:await async function(e,t,s,n,r,i,a){const c=a.generativeAIWorkerConnectors.find((e=>e.getEngineType()===n.engineType));if(!c)throw new Error("No connector found for model");const d=await async function(e,t,s){return(await t.processJob({prompt:e},{model:s})).output}(t,c,n);await(0,o.processNextBlock)(e,d,s,r,i,a)}(e,h,s,u,c,d,l)}}},"./src/utils/GenerativeAI/Retrieve/NextBlock.ts":(e,t,s)=>{s.r(t),s.d(t,{getIncomingLinks:()=>l,processNextBlock:()=>d});var n=s("./src/interfaces/Services/Workflow.ts"),r=s("./src/utils/GenerativeAI/Retrieve/EntityExtractor.ts"),i=s("./src/utils/GenerativeAI/Retrieve/GraphDatabase.ts"),o=s("./src/utils/GenerativeAI/Retrieve/Model.ts"),a=s("./src/utils/GenerativeAI/Retrieve/VectorDatabase.ts"),c=s("./src/utils/GenerativeAI/Retrieve/Reranker.ts");async function d(e,t,s,d,l,u){for(const h of d.links||[]){const d=l.find((e=>e.uid===h.uid));if(d)switch(d.type){case n.DataCollectionBlockType.Context:s.context.push(...t);break;case n.DataCollectionBlockType.EntityExtractor:await(0,r.processEntityExtractorBlock)(e,t,s,d,l,u);break;case n.DataCollectionBlockType.GraphDatabase:await(0,i.processGraphDatabaseBlock)(e,t,s,d,l,u);break;case n.DataCollectionBlockType.Model:await(0,o.processModelBlock)(e,t,s,d,l,u);break;case n.DataCollectionBlockType.Reranker:await(0,c.processRerankerBlock)(e,t,s,d,l,u);break;case n.DataCollectionBlockType.VectorDatabase:await(0,a.processVectorDatabaseBlock)(e,t,s,d,l,u)}}}function l(e,t){return t.filter((t=>t.links?.some((t=>t.uid===e.uid)))).length}},"./src/utils/GenerativeAI/Retrieve/Reranker.ts":(e,t,s)=>{s.r(t),s.d(t,{processRerankerBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Retrieve/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,c,d){if(a.accumulated||(a.accumulated={}),t instanceof Array?(a.accumulated.results||(a.accumulated.results=[]),a.accumulated.results.push(...t)):a.accumulated.prompt=t,a.timesCalled=a.timesCalled?a.timesCalled+1:1,(0,i.getIncomingLinks)(a,c)>a.timesCalled)return;if(!a.accumulated.prompt||!a.accumulated.results)throw new Error("Reranker block is missing required data");for(const e of a.accumulated.results)e.relevance=await d.nlpLibraryConnector.getSimilarity(a.accumulated.prompt,e.content);const l=a.accumulated.results.filter((e=>e.relevance>a.attributes.minRelevance)).sort(((e,t)=>t.relevance-e.relevance)).slice(0,a.attributes.topK);o.default.trace({jobType:r.AITraceType.Retrieve,type:r.AIRetrieveTraceBlock.Reranker,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,timestamp:Date.now(),blockId:a.id,status:"success",inputResults:a.accumulated.results,rerankedResults:l}),await(0,i.processNextBlock)(e,l,s,a,c,d)}},"./src/utils/GenerativeAI/Retrieve/VectorDatabase.ts":(e,t,s)=>{s.r(t),s.d(t,{processVectorDatabaseBlock:()=>a});var n=s("uuid"),r=s("./src/interfaces/AITrace/Trace.ts"),i=s("./src/utils/GenerativeAI/Retrieve/NextBlock.ts"),o=s("./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts");async function a(e,t,s,a,c,d){const l=d.contentMediator.getVectorDatabase(a.id).search(t,a.attributes.topK,a.attributes.minRelevance,a.attributes.contentSize);o.default.trace({jobType:r.AITraceType.Retrieve,type:r.AIRetrieveTraceBlock.VectorSearch,jobId:e,traceId:(0,n.v4)(),traceLevel:r.AITraceLevel.Debug,timestamp:Date.now(),blockId:a.id,status:"success",topResults:l,numResults:l.length}),await(0,i.processNextBlock)(e,l,s,a,c,d)}},"./src/utils/GenerativeAI/Retrieve/index.ts":(e,t,s)=>{s.r(t),s.d(t,{processRetrieve:()=>r});var n=s("./src/utils/GenerativeAI/Retrieve/NextBlock.ts");async function r(e,t,s,r,i){const o={output:"",context:[],inputTokens:0,outputTokens:0};try{await(0,n.processNextBlock)(e,t,o,s,structuredClone(r),i),o.output=`Additional context:\n${o.context.map((e=>`From ${e.pathName}: ${e.content}`)).join("\n")}`}catch(e){console.error("Error processing retrieve",e)}return o}},"./src/utils/GenerativeAI/Trace/GenerativeAITracing.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s("./src/interfaces/AITrace/Trace.ts");class r{static instance;logLevel=n.AITraceLevel.Error;static getInstance=()=>(r.instance||(r.instance=new r),r.instance);trace(e){e.traceLevel<this.logLevel||console.log(JSON.stringify(e,null,2))}}const i=r.getInstance()},"./src/utils/GenerativeAI/Workflow.ts":(e,t,s)=>{s.r(t),s.d(t,{processWorkflow:()=>n.processWorkflow,streamWorkflow:()=>n.streamWorkflow});var n=s("./src/utils/GenerativeAI/Workflow/index.ts")},"./src/utils/GenerativeAI/Workflow/Agent.ts":(e,t,s)=>{s.r(t),s.d(t,{processAgentBlock:()=>o});var n=s("./src/interfaces/Services/Workflow.ts"),r=s("./src/utils/GenerativeAI/Workflow/NextBlock.ts"),i=s("./src/utils/GenerativeAI/Workflow/AgentFunction.ts");async function o(e,t,s,o,a){for(const e of s.links||[]){const t=o.find((t=>t.uid===e.uid));if(t&&t.type===n.WorkflowBlockType.Answer)return s}const c=a.models.find((e=>e.id===s.modelId));if(!c)throw new Error("Model not found");const d=a.generativeAIWorkerConnectors.find((e=>e.getEngineType()===c.engineType));if(!d)throw new Error("No connector found for model");const l=await d.processJob({prompt:e.prompt,instructions:`${s.instructions}${e.instructions??""}`,temperature:s.temperature,maxTokens:s.maxTokens,history:e.history,functions:(0,i.getAgentFunctions)(t,s,o,a)},{model:c});if("string"!=typeof l.output)throw new Error("Agent output is not a string");return e.prompt=l.output,t.inputTokens+=l.inputTokens??0,t.outputTokens+=l.outputTokens??0,(0,r.processNextBlock)(e,t,s,o,a)}},"./src/utils/GenerativeAI/Workflow/AgentFunction.ts":(e,t,s)=>{s.r(t),s.d(t,{getAgentFunctions:()=>c});var n=s("uuid"),r=s("./src/constants/Content.ts"),i=s("./src/environments/Environment.ts"),o=s("./src/interfaces/Services/Workflow.ts"),a=s("./src/utils/GenerativeAI/Retrieve.ts");function c(e,t,s,n){const r=new Map,i=s.filter((e=>e.links?.find((e=>e.uid===t.uid&&(e.type===o.BlockLinkType.Knowledge||e.type===o.BlockLinkType.Skill)))));for(const t of i)t.type===o.WorkflowBlockType.DataCollection?r.set(`getContextFrom${t.id}`,d(e,t,n)):r.set(l(t),u(t,n));return r}function d(e,t,s){return{description:`Retrieve relevant information related to ${t.description} when you need broad or contextual data to inform your response.`,params:{query:{type:"string"}},callback:async r=>{if("string"!=typeof r?.query)return"Query is required";try{const i=(0,n.v4)(),c=t.retrieveBlocks.find((e=>e.type===o.DataCollectionBlockType.Prompt)),d=await(0,a.processRetrieve)(i,r.query,c,t.retrieveBlocks,s);return e.context=Array.from(new Set([...e.context,...d.context])),e.inputTokens+=d.inputTokens??0,e.outputTokens+=d.outputTokens??0,d.output}catch(e){return console.error(e),"Error retrieving context"}}}}function l(e){switch(e.type){case o.WorkflowBlockType.Time:return"getDate";case o.WorkflowBlockType.Code:return"runCode";case o.WorkflowBlockType.Search:return"search";case o.WorkflowBlockType.WebScraper:return"fetchUrl"}throw new Error("Unknown skill type")}function u(e,t){switch(e.type){case o.WorkflowBlockType.Time:return{description:"Retrieve the current date and time in the appropriate format for time-sensitive operations or logging purposes.",callback:()=>(new Date).toLocaleString()};case o.WorkflowBlockType.Code:return{description:"Execute a JavaScript code snippet that returns a string. Ensure the code is designed to produce a string output for further processing or display.",params:{code:{type:"string"}},callback:e=>{if("string"!=typeof e?.code)return"Code is required";try{return Function(`${e?.code}`)()}catch(e){return console.error(e),"Error executing code"}}};case o.WorkflowBlockType.Search:return function(e,t){return{description:"Retrieve relevant context from a web search query to inform decision-making or provide accurate responses.",params:{query:{type:"string"}},callback:async s=>{if(!t.searchConnector)return"Search connector not found";if("string"!=typeof s?.query)return"Query is required";try{const n=await t.searchConnector.search(s.query,e,i.Environment.google.searchEngineId);let r="";for(const e of n)r+=`${e.title} - ${e.url}\n${e.snippet}\n\n`;return r}catch(e){return console.error(e),"Error searching"}}}}(t.searchApiKey,t);case o.WorkflowBlockType.WebScraper:return{description:"Retrieve the content of a specified URL. The URL can be obtained from search results or other sources and should be used to extract relevant data or information.",params:{url:{type:"string"},page:{type:"number"}},callback:async e=>{if("string"!=typeof e?.url)return"URL is required";try{const t=await fetch(e.url),s=await t.text(),n=s.match(/<body[^>]*>((.|[\n\r])*)<\/body>/i),i=(n?n[1]:s).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").replace(/<br\s*\/?>/gi," "),o=i.replace(/&nbsp;/g," ").replace(/<\/?[^>]+(>|$)/g,"").replace(/\s\s+/g," ").trim();return o.length>r.CONTENT_GENERATIVE_AI_MAX_CONTEXT_LENGTH?"number"!=typeof e?.page?"Page is required":`\n            ${o.substring((e.page-1)*r.CONTENT_GENERATIVE_AI_MAX_CONTEXT_LENGTH,r.CONTENT_GENERATIVE_AI_MAX_CONTEXT_LENGTH)}\n            More content available on page ${e.page+1}\n          `:o}catch(e){return console.error(e),"Error fetching URL"}}}}throw new Error("Unknown skill type")}},"./src/utils/GenerativeAI/Workflow/NextBlock.ts":(e,t,s)=>{s.r(t),s.d(t,{processNextBlock:()=>i});var n=s("./src/interfaces/Services/Workflow.ts"),r=s("./src/utils/GenerativeAI/Workflow/Agent.ts");async function i(e,t,s,i,o){for(const a of s.links||[]){const s=i.find((e=>e.uid===a.uid));if(s&&s.type===n.WorkflowBlockType.Agent)return(0,r.processAgentBlock)(e,t,s,i,o)}throw new Error("No answer block found")}},"./src/utils/GenerativeAI/Workflow/index.ts":(e,t,s)=>{s.r(t),s.d(t,{processWorkflow:()=>i,streamWorkflow:()=>o});var n=s("./src/utils/GenerativeAI/Workflow/NextBlock.ts"),r=s("./src/utils/GenerativeAI/Workflow/AgentFunction.ts");async function i(e,t,s,i){const o={context:[],inputTokens:0,outputTokens:0},a=await(0,n.processNextBlock)(e,o,t,s,i),c=i.models.find((e=>e.id===a.modelId));if(!c)throw new Error("Model not found");const d=i.generativeAIWorkerConnectors.find((e=>e.getEngineType()===c.engineType));if(!d)throw new Error("No connector found for model");const l=await d.processJob({prompt:e.prompt,instructions:`${a.instructions}${e.instructions??""}`,temperature:a.temperature,maxTokens:a.maxTokens,history:e.history,functions:(0,r.getAgentFunctions)(o,a,s,i)},{model:c});return{output:l.output,context:o.context,inputTokens:(o.inputTokens??0)+(l.inputTokens??0),outputTokens:(o.outputTokens??0)+(l.outputTokens??0)}}async function*o(e,t,s,i){const o={context:[],inputTokens:0,outputTokens:0},a=await(0,n.processNextBlock)(e,o,t,s,i),c=i.models.find((e=>e.id===a.modelId));if(!c)throw new Error("Model not found");const d=i.generativeAIWorkerConnectors.find((e=>e.getEngineType()===c.engineType));if(!d)throw new Error("No connector found for model");for await(const t of d.processJobStream({prompt:e.prompt,instructions:`${a.instructions}${e.instructions??""}`,temperature:a.temperature,maxTokens:a.maxTokens,history:e.history,functions:(0,r.getAgentFunctions)(o,a,s,i)},{model:c}))yield{output:t.output,context:o.context,inputTokens:(o.inputTokens??0)+(t.inputTokens??0),outputTokens:(o.outputTokens??0)+(t.outputTokens??0)}}},"./src/utils/Interval/Interval.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s("./src/constants/Interval.ts");class r{static instance;parameters=[];source;constructor(){setInterval((()=>{this.parameters.forEach((e=>{if(Date.now()-e.lastExecuted>e.interval){try{e.callback()}catch(e){}e.lastExecuted=Date.now()}}))}),n.INTERVAL_TIME)}static getInstance(){return r.instance||(r.instance=new r),r.instance}startNoThrottlingHack(e){const t=this.createConstantSource(e),s=e.createGain();s&&t&&(s.gain.value=.001,t.connect(s),s.connect(e.destination),t.start())}stopNoThrottlingHack(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=void 0)}wait(e){return new Promise((t=>{setTimeout(t,e)}))}setInterval(e,t){return this.parameters.push({callback:e,interval:t,lastExecuted:Date.now()}),()=>{this.parameters=this.parameters.filter((t=>t.callback!==e))}}createConstantSource(e){if(e.createConstantSource)return e.createConstantSource();const t=e.createBufferSource(),s=e.createBuffer(1,1,e.sampleRate);return s.getChannelData(0)[0]=10,t.buffer=s,t.loop=!0,t}}const i=r.getInstance()},"./src/utils/Logger/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{formatCurrentDate:()=>c,getFormattedSytemLog:()=>d,getLoggableSystemMessage:()=>o});var n=s("./src/constants/System.ts");const r=["PeerConnection","Node","Content","Subscription","Stats","Detection","Remediation"],i=[["Offer","Answer","Handshake","Success","NeedRestart","Restart","Disconnect","Stats","OptimizationConnectionSuccess"],["NodeJoin","NodeUpdate","NodeConnectionsUpdate","NodeLeave"],["PublishMediaStream","UnpublishMediaStream","SubscribeMediaStream","UpdateMediaStream","UnsubscribeMediaStream","CloseJobDispatcher","CloseJobWorker","CloseObjectStoreBucket","CloseKeyValueDatabase","ClosePubSubTopic","CloseMediaStream","CloseVectorDatabase","CloseGraphDatabase","LocalMediaStreamTrackFail","RemoteMediaStreamTrackFail","RequestSyncKeyValueDatabase","SendTransactionsDump","RequestTransactionsValue","PubSubTopicStats","ObjectStoreStats","KeyValueDatabaseStats","GenerativeAIContextStats","GenerativeAIWorkerStats","VectorDatabaseStats","GraphDatabaseStats"],["SubscribeMediaStream","UpdateMediaStream","UnsubscribeMediaStream","NeedMediaStream","RestartNeedMediaStream","CanProvideMediaStream","CannotProvideMediaStream","MediaStreamUnavailable"],["StreamReport","LocalReport"],["Problem"],["Remediation","RemoteRemediation"]];function o(e){return{...e,systemMessageType:r[e.messageType],systemContentMessageType:i[e.messageType][e.content.type]}}const a={hour:"2-digit",minute:"2-digit",second:"2-digit"};function c(){const e=new Date,t=e.getMilliseconds(),s=e.toLocaleDateString("en-US",a).match(/\d\d:\d\d:\d\d/)?.[0];return`${s}.${t>100?`${t}`:t>10?`0${t}`:`00${t}`}`}function d(e,t){const s=c(),{sourceId:r,destinationIds:i,systemMessageType:a,systemContentMessageType:d}=o(e);return`${s} - ${t} - ${r===t?`Sending '${a}' to ${i?`${i}`:"everyone"}`:e.sourceId===n.SYSTEM_TOPIC_INTERNAL?`Internal event '${a}'`:`${i?"":"Everyone "}Receiving '${a}' from ${r}`} with '${d}' payload:`}},"./src/utils/Logger/Logger.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var n=s("firebase/firestore"),r=s("./src/environments/Environment.ts"),i=s("./src/interfaces/Utils/Logger.ts"),o=s("./src/services/Firebase/FirebaseService.ts");class a{static instance;enabledChannels=[i.LoggingChannels.Default];debugEnabled=!0;loggingConnectors;vendorId="";globalObject;batchQueue=[];currentBatch;batchTimeout;retryLimit=10;retryDelay=500;batchSize=450;timeoutValue=1e3;constructor(){if("undefined"!=typeof window)this.globalObject=window;else{if(void 0===s.g)throw new Error("No global object found");this.globalObject=s.g}this.loadEnabledChannels(),this.globalObject.crewdleSDKEnableLogging=e=>{if(e===i.LoggingChannels.All)return this.enabledChannels=Object.keys(i.LoggingChannels).map((e=>{const t=e;return i.LoggingChannels[t]})),void Object.keys(i.LoggingChannels).forEach((e=>{const t=e;localStorage.setItem(`crewdle-sdk-logging-${i.LoggingChannels[t]}`,"true")}));this.enabledChannels.includes(e)||(this.enabledChannels.push(e),localStorage.setItem(`crewdle-sdk-logging-${e}`,"true"))},this.globalObject.crewdleSDKDisableLogging=e=>{if(!e||e===i.LoggingChannels.All)return this.enabledChannels=[],void Object.keys(i.LoggingChannels).forEach((e=>{const t=e;localStorage.removeItem(`crewdle-sdk-logging-${i.LoggingChannels[t]}`)}));this.enabledChannels.includes(e)&&(this.enabledChannels=this.enabledChannels.filter((t=>t!==e)),localStorage.removeItem(`crewdle-sdk-logging-${e}`))},this.globalObject.crewdleSDKLoggingChannels=i.LoggingChannels}static getInstance(){try{return a.instance||(a.instance=new a),a.instance}catch(e){return console.error("Logger.getInstance",e),{log:()=>{},logRaw:()=>{},debug:()=>{},setVendorId:()=>{},setLoggingConnectors:()=>{},error:()=>{},logEvent:()=>{},logServiceEvent:()=>{},logStorage:()=>{},warning:()=>{},isChannelEnabled:()=>!1,processBatch:()=>{}}}}setVendorId(e){this.vendorId=e,this.batchQueue=[],this.currentBatch=this.createNewBatch(),this.batchTimeout&&(clearTimeout(this.batchTimeout),this.batchTimeout=void 0)}setLoggingConnectors(e){this.loggingConnectors=e}debug(e,...t){this.debugEnabled&&this.log(i.LoggingChannels.Default,`DEBUG - ${e}`,...t)}log(e,t,...s){r.Environment.isProduction||(this.enabledChannels.includes(e)&&console.log(`Channel '${e}'\n`,new Date+"\n",t,...s),this.loggingConnectors&&this.loggingConnectors.forEach((n=>{this.isInternalLoggingConnector(n)&&n.getEnabledChannels().includes(e)&&n.log(t,{vendorId:this.vendorId,nodeId:"",nodeType:"",data:{channel:e,...s}})})))}logRaw(e,t,...s){r.Environment.isProduction||(this.enabledChannels.includes(e)&&console.log(t,...s),this.loggingConnectors&&this.loggingConnectors.forEach((n=>{this.isInternalLoggingConnector(n)&&n.getEnabledChannels().includes(e)&&n.log(t,{vendorId:this.vendorId,nodeId:"",nodeType:"",data:{channel:e,...s}})})))}logEvent(e,t){if(!this.loggingConnectors)return;const s={vendorId:this.vendorId,...t};this.loggingConnectors.forEach((t=>{t.log(e,s)}))}logServiceEvent(e,t){this.createBatchOperation(e,t),this.logBatch()}logStorage(e,t,s){(0,n.setDoc)((0,n.doc)(o.default.getFirestore(),`developers/${this.vendorId}/${e}/${t}`),{storage:s,timestamp:(0,n.serverTimestamp)()})}logBatch(){this.currentBatch&&(this.currentBatch.counter+=1,this.currentBatch.counter===this.batchSize?this.processBatch():this.batchTimeout||(this.batchTimeout=this.globalObject.setTimeout((()=>this.processBatch()),this.timeoutValue)))}async processBatch(){if(this.currentBatch){for(this.batchQueue.push(this.currentBatch),this.currentBatch=this.createNewBatch();this.batchQueue.length>0;){const e=this.batchQueue.shift();if(!await this.commitBatch(e))break}clearTimeout(this.batchTimeout),this.batchTimeout=void 0}}error(e,t,...s){if(console.error(new Date,e,t,...s),this.loggingConnectors){const s={vendorId:this.vendorId,...t};this.loggingConnectors.forEach((t=>{t.error(e,s)}))}}warning(e,t,...s){if(console.warn(new Date,e,t,s),this.loggingConnectors){const s={vendorId:this.vendorId,...t};this.loggingConnectors.forEach((t=>{t.warn(e,s)}))}}isChannelEnabled(e){return this.enabledChannels.includes(e)}async commitBatch(e,t=0){if(e.counter>0)try{return await e.batch.commit(),!0}catch(s){if(console.error("Error committing batch:",s,"Operations:",e.operations),!(t<this.retryLimit)){const{nodeId:t="",nodeType:n="",clusterId:r=""}=e.operations[0].data,i={nodeId:t,nodeType:n,clusterId:r,data:{operations:e.operations,error:s}};return this.error("Failed to commit batch after retries:",i),!1}{const s=this.createBatch(e.operations);setTimeout((()=>this.commitBatch(s,t+1)),this.retryDelay*Math.pow(2,t))}}}loadEnabledChannels(){try{Object.keys(i.LoggingChannels).forEach((e=>{const t=e;localStorage.getItem(`crewdle-sdk-logging-${i.LoggingChannels[t]}`)&&(console.log("LoggingService: logging enabled for",i.LoggingChannels[t]),this.enabledChannels.push(i.LoggingChannels[t]))}))}catch(e){}}isInternalLoggingConnector(e){return void 0!==e.getEnabledChannels}createNewBatch(){return{batch:(0,n.writeBatch)(o.default.getFirestore()),operations:[],counter:0}}createBatch(e){const t=(0,n.writeBatch)(o.default.getFirestore());return e.forEach((e=>this.addBatchOperation(t,e))),{batch:t,operations:e,counter:e.length}}addBatchOperation(e,t){switch(t.type){case"set":e.set(t.ref,t.data);break;case"update":e.update(t.ref,t.data);break;case"delete":e.delete(t.ref)}}createBatchOperation(e,t){this.currentBatch||(this.currentBatch=this.createNewBatch());const s=(0,n.doc)((0,n.collection)(o.default.getFirestore(),`developers/${this.vendorId}/logs`)),r={...t,service:e,timestamp:(0,n.serverTimestamp)()},i={type:"set",path:s.path,ref:s,data:r};return this.currentBatch.operations.push(i),this.addBatchOperation(this.currentBatch.batch,i),s}}const c=a.getInstance()},"./src/utils/ObjectStore/Helpers.ts":(e,t,s)=>{s.r(t),s.d(t,{getFileChecksum:()=>a,getFileContent:()=>l,getPathName:()=>i,getPathParts:()=>r,readFileContent:()=>c,readFileStream:()=>d,splitPathName:()=>o});var n=s("./src/constants/Content.ts");function r(e){return e.split("/").filter((e=>e.length>0))}function i(e,t){return"/"===e?e+t:e+"/"+t}function o(e){const t=r(e),s=t.pop()||"",n=t.join("/");return[0===n.length?"/":n,s]}async function a(e){let t;const s=e.size/1048576;t=s<=10?1:s<=100?.5:s<=500?.1:.05;const r=Math.ceil(e.size/n.CONTENT_CHECKSUM_CHUNK_SIZE),i=Math.ceil(r*t);let o=new Uint8Array;for(let t=0;t<i;t++){const s=Math.floor(t/i*e.size);let r=s+n.CONTENT_CHECKSUM_CHUNK_SIZE;r>e.size&&(r=e.size);const a=e.slice(s,r),c=await a.arrayBuffer(),d=new Uint8Array([...o,...new Uint8Array(c)]);o=new Uint8Array(await crypto.subtle.digest("SHA-256",d))}return Array.from(new Uint8Array(o)).map((e=>e.toString(16).padStart(2,"0"))).join("")}async function c(e){const t=[];for await(const s of u(e))t.push(s);return t}async function*d(e,t=0,s){for await(const n of u(e,t,s))yield n}function l(e,t,s){return new File(e,t,{type:s})}async function*u(e,t=0,s){let r=t*n.CONTENT_FILE_CHUNK_SIZE,i=e;for(;r<i.size;){let e=r+n.CONTENT_FILE_CHUNK_SIZE;e>i.size&&(e=i.size);let t=0;for(;t<20;)try{await(s?.());const t=i.slice(r,e,"application/octet-stream"),n=await t.arrayBuffer();yield n,r=e,await new Promise((e=>setTimeout(e,0)));break}catch(e){if(console.error(`Error reading file chunk after ${t+1} attempts:`,e),t++,t>20)throw e;let s=1e3*Math.pow(2,t);s>3e4&&(s=3e4),await new Promise((e=>setTimeout(e,s)))}}}},"./src/utils/Observer/Observer.ts":(e,t,s)=>{function n(){let e=[];return{subscribe:t=>(e.push(t),()=>{e=e.filter((e=>e!==t))}),publish:t=>{e.forEach((e=>e(t)))}}}function r(){let e;return{subscribe:t=>(e=t,()=>{e=void 0}),publish:t=>{e&&e(t)}}}s.r(t),s.d(t,{createObserver:()=>n,createSingleObserver:()=>r})},"./src/utils/Queue/PriorityRetryQueue.ts":(e,t,s)=>{s.r(t),s.d(t,{createPriorityRetryQueue:()=>o});var n=s("./src/interfaces/Utils/Queue.ts"),r=s("./src/utils/Interval/Interval.ts"),i=s("./src/utils/Queue/Queue.ts");function o(e,t=n.QueueElementPriority,s=!1){let o=!1;const a=[];async function c(){if(!o){for(o=!0;a.some((e=>e.head));){let t,n=0;for(const[e,s]of a.entries())if(t=s.shift(),n=e,t)break;if(t)try{if(e instanceof i.SyncQueueCallback&&e.call(t),e instanceof i.AsyncQueueCallback&&await e.call(t),a.slice(-1).some((e=>e.head)))continue;const s=a.length-1;n===s&&a[s].head&&await r.default.wait(0)}catch(r){s?a[n].push(t,!1):a[n].unshift(t,!1),await e.wait()}}o=!1}}return Object.values(t).forEach((e=>{"string"!=typeof e&&(a[e]=(0,i.createQueue)(c))})),{queues:a}}},"./src/utils/Queue/Queue.ts":(e,t,s)=>{s.r(t),s.d(t,{AsyncQueueCallback:()=>r,SyncQueueCallback:()=>n,createQueue:()=>i});class n{callback;retryCallback;constructor(e,t){this.callback=e,this.retryCallback=t}call(e){this.callback(e)}async wait(){await this.retryCallback()}}class r{callback;retryCallback;constructor(e,t){this.callback=e,this.retryCallback=t}async call(e){await this.callback(e)}async wait(){await this.retryCallback()}}function i(e=(()=>{}),t=(()=>!1),s=(()=>{})){let n,r,i=0;return{get size(){return i},get head(){return n},get tail(){return r},set head(e){n=e},set tail(e){r=e},push(s,o=!0){const a={value:s};o&&t(a)?e():(r&&(a.previous=r,r.next=a),r=a,n||(n=a),i+=1,o&&e())},pop(){if(!r)return;const e=r.value;return r=r.previous,r&&delete r.next,r||(n=void 0),i-=1,e},unshift(s,o=!0){const a={value:s};o&&t(a)?e():(n&&(n.previous=a,a.next=n),n=a,r||(r=a),i+=1,o&&e())},shift(){if(!n)return;const e=n.value;return n=n.next,n&&delete n.previous,n||(r=void 0),i-=1,e},clear(){s(),n=void 0,r=void 0,i=0}}}},"./src/utils/Queue/RetryQueue.ts":(e,t,s)=>{s.r(t),s.d(t,{createRetryQueue:()=>r});var n=s("./src/utils/Queue/Queue.ts");function r(e,t=!1,s=(()=>{}),r=(()=>!1),i=(()=>{})){let o=!1;const a=(0,n.createQueue)((async function(){if(!o){for(o=!0;a.head;){const r=a.shift();if(r)try{e instanceof n.SyncQueueCallback&&e.call(r),e instanceof n.AsyncQueueCallback&&await e.call(r),s(r)}catch(s){t?a.push(r,!1):a.unshift(r,!1),await e.wait()}}o=!1}}),r,i);return a}},"./src/utils/Queue/VersionedRetryQueue.ts":(e,t,s)=>{s.r(t),s.d(t,{createVersionedRetryQueue:()=>r});var n=s("./src/utils/Queue/RetryQueue.ts");function r(e,t=!1){let s=new Map;const r=(0,n.createRetryQueue)(e,t,(function(e){i(e)&&s.delete(`${e.sourceId}-${e.destinationIds??[]}-${e.messageType}-${e.content.type}`)}),(function(e){return!!function(e){const t=e.value;if(!i(t))return!1;const n=`${t.sourceId}-${t.destinationIds??[]}-${t.messageType}-${t.content.type}`,o={version:t.content.version,element:e},a=s.get(n);return a?(a.version>=t.content.version||(a.element.previous&&(a.element.previous.next=e,e.previous=a.element.previous),a.element.next&&(a.element.next.previous=e,e.next=a.element.next),a.element===r.head&&(r.head=e),a.element===r.tail&&(r.tail=e),s.set(n,o)),!0):(s.set(n,o),!1)}(e)}),(function(){s.clear()}));function i(e){if(e&&"object"==typeof e&&e.hasOwnProperty("content")&&e.hasOwnProperty("messageType")&&e.hasOwnProperty("sourceId")){const t=e;if(t.content&&"object"==typeof t.content&&t.content.hasOwnProperty("version")&&t.content.hasOwnProperty("type"))return!0}return!1}return r}},"./src/utils/Support/Support.ts":(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});var n=s("./src/interfaces/Utils/Logger.ts"),r=s("./src/interfaces/Utils/Support.ts"),i=s("./src/utils/Logger/Logger.ts");class o{static instance;featureSupport=[];constructor(){}static getInstance(){return o.instance||(o.instance=new o),o.instance}initialize(){this.checkWebRTC(),this.checkMediaStream(),this.checkScreenSharing(),this.checkAudioVolume(),this.checkDeviceConfig(),this.checkAudioOutput(),this.checkMediaRecording(),this.checkBackgrounds(),this.checkWebGL(),this.checkAudioContext(),i.default.log(n.LoggingChannels.Support,"Support: current config",{featureSupport:this.featureSupport})}isFeatureSupported(e){const t=this.featureSupport.find((t=>t.name===e));return!!t&&t.supported}logSupport(e){i.default.logEvent("support",{nodeId:e.getId(),nodeType:e.type,data:{featureSupport:this.featureSupport}})}checkWebRTC(){const e=r.SupportFeatureName.WebRTC;let t=!1;"function"==typeof RTCPeerConnection&&"function"==typeof RTCIceCandidate&&"function"==typeof RTCSessionDescription?t=!0:i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkMediaStream(){const e=r.SupportFeatureName.MediaStream;let t=!1;"function"==typeof MediaStream&&"function"==typeof MediaStreamTrack&&"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?t=!0:i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkScreenSharing(){const e=r.SupportFeatureName.ScreenSharing;let t=!1;"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getDisplayMedia?t=!0:i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkAudioVolume(){const e=r.SupportFeatureName.AudioVolume;let t=!1;"function"!=typeof AudioContext||"function"!=typeof ScriptProcessorNode&&"function"!=typeof AudioWorkletNode||"function"!=typeof MediaStreamAudioSourceNode?i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`):t=!0,this.featureSupport.push({name:e,supported:t})}checkDeviceConfig(){const e=r.SupportFeatureName.DeviceConfig;let t=!1;"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.enumerateDevices&&"function"==typeof MediaDeviceInfo?t=!0:i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}checkAudioOutput(){const e=r.SupportFeatureName.AudioOutput;let t=!1;"object"==typeof document&&"function"==typeof document.createElement("video").setSinkId?t=!0:i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}async checkMediaRecording(){const e=r.SupportFeatureName.Recording;let t=!1;try{const e=document.createElement("canvas");if(MediaRecorder&&MediaSource&&e.captureStream){const s=e.captureStream(),n=new MediaRecorder(s);n.start(),await new Promise((e=>setTimeout(e,2e3))),n.stop(),t="inactive"===n.state}}catch(t){i.default.log(n.LoggingChannels.Support,`Support: ${e} check failed`,t)}this.featureSupport.push({name:e,supported:t}),t||i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`)}checkBackgrounds(){const e=r.SupportFeatureName.Backgrounds;let t=!1;try{document.createElement("canvas").captureStream&&(t=!0)}catch(t){i.default.log(n.LoggingChannels.Support,`Support: ${e} check failed`,t)}this.featureSupport.push({name:e,supported:t}),t||i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`)}checkWebGL(){const e=r.SupportFeatureName.WebGL;let t=!1;try{const e=document.createElement("canvas");WebGLRenderingContext&&e.getContext("webgl")&&(t=!0)}catch(t){i.default.log(n.LoggingChannels.Support,`Support: ${e} check failed`,t)}this.featureSupport.push({name:e,supported:t}),t||i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`)}checkAudioContext(){const e=r.SupportFeatureName.AudioContext;let t=!1;"function"==typeof AudioContext?t=!0:i.default.log(n.LoggingChannels.Support,`Support: ${e} not supported`),this.featureSupport.push({name:e,supported:t})}}const a=o.getInstance()},"@aws-amplify/api":e=>{e.exports=require("@aws-amplify/api")},"@aws-amplify/core":e=>{e.exports=require("@aws-amplify/core")},"@crewdle/mist-connector-indexed-db":e=>{e.exports=require("@crewdle/mist-connector-indexed-db")},"@crewdle/mist-connector-opfs":e=>{e.exports=require("@crewdle/mist-connector-opfs")},"@crewdle/mist-connector-webrtc-browser":e=>{e.exports=require("@crewdle/mist-connector-webrtc-browser")},"@crewdle/web-sdk-types":e=>{e.exports=require("@crewdle/web-sdk-types")},"aws-amplify":e=>{e.exports=require("aws-amplify")},"aws-amplify/utils":e=>{e.exports=require("aws-amplify/utils")},"firebase/app":e=>{e.exports=require("firebase/app")},"firebase/auth":e=>{e.exports=require("firebase/auth")},"firebase/database":e=>{e.exports=require("firebase/database")},"firebase/firestore":e=>{e.exports=require("firebase/firestore")},"firebase/functions":e=>{e.exports=require("firebase/functions")},rxjs:e=>{e.exports=require("rxjs")},uuid:e=>{e.exports=require("uuid")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};s.r(n),s.d(n,{KeyValueDatabase:()=>o.KeyValueDatabase,LayoutBuilder:()=>d.LayoutBuilder,LoggingChannels:()=>i.LoggingChannels,QueryBuilder:()=>c.QueryBuilder,SDK:()=>l.SDK,SDKClientErrorCodes:()=>r.SDKClientErrorCodes,TableBuilder:()=>d.TableBuilder,logger:()=>a.default});var r=s("./src/public/errors/SDKClientError.ts"),i=s("./src/interfaces/Utils/Logger.ts"),o=s("./src/models/Content/KeyValueDatabase.ts"),a=s("./src/utils/Logger/Logger.ts"),c=s("./src/public/models/Content/KeyValueDatabaseQueryBuilder.ts"),d=s("./src/public/models/Content/KeyValueDatabaseLayoutBuilder.ts"),l=s("./src/models/SDK/SDK.ts");return n})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXJjZXMiOlsid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL0Nvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvQ29udGVudC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9EZXRlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvRGV0ZWN0aW9uSXNzdWVSdWxlcy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9EZXRlY3Rpb25Qcm9ibGVtUnVsZXMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvSW50ZXJ2YWwudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvTm9kZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9QZWVyQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9SZW1lZGlhdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9SZW1lZGlhdGlvblJ1bGVzLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvY29uc3RhbnRzL1NESy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9TZXJ2aWNlcy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9TdGF0cy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2NvbnN0YW50cy9TdWJzY3JpcHRpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9jb25zdGFudHMvU3lzdGVtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvZW52aXJvbm1lbnRzL0Vudmlyb25tZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvZW52aXJvbm1lbnRzL2Vudmlyb25tZW50LmRlZmF1bHQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9lbnZpcm9ubWVudHMvZW52aXJvbm1lbnQuZGV2LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvZW52aXJvbm1lbnRzL2Vudmlyb25tZW50LnByZC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudC5zdGcudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9lcnJvcnMvRWFybHlSZXR1cm5FcnJvci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2Vycm9ycy9TREtJbnRlcm5hbEVycm9yLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9BSVRyYWNlL1RyYWNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9Db250ZW50L0NvbnRlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL0NvbnRlbnQvRGF0YUNvbnRlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL0RldGVjdGlvbi9EZXRlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL05vZGUvTm9kZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvTm9kZS9Ob2RlTWVzc2FnZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvUmVtZWRpYXRpb24vUmVtZWRpYXRpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1NESy9TREsudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1NlcnZpY2VzL1dvcmtmbG93LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9TdGF0cy9TdGF0cy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL01lZGlhU3Vic2NyaXB0aW9uRXZlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1V0aWxzL0xvZ2dlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL2ludGVyZmFjZXMvVXRpbHMvUXVldWUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9pbnRlcmZhY2VzL1V0aWxzL1N1cHBvcnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ2x1c3Rlci9DbHVzdGVyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NsdXN0ZXIvQ2x1c3RlckV2ZW50RW1pdHRlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL0FwcFN5bmNQdWJTdWJDb25uZWN0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0Nvbm5lY3Rpb24vQmFzZUNvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29ubmVjdGlvbi9CYXNlUGVlckNvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29ubmVjdGlvbi9Db25uZWN0aW9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb25Hcm91cC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uUG9vbC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db25uZWN0aW9uL1JlY2VpdmVyUGVlckNvbm5lY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29ubmVjdGlvbi9TZW5kZXJQZWVyQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db250ZW50L0Jhc2VEYXRhU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvQmFzZUxvY2FsTWVkaWFTdHJlYW0udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9CYXNlTWVkaWFTdHJlYW0udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9CYXNlU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvQ29udGVudE1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9HZW5lcmF0aXZlQUlDb250ZXh0LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvR2VuZXJhdGl2ZUFJV29ya2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvR3JhcGhEYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db250ZW50L0pvYkRpc3BhdGNoZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9Kb2JXb3JrZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9LZXlWYWx1ZURhdGFiYXNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvS2V5VmFsdWVEYXRhYmFzZVRhYmxlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9Mb2NhbE1lZGlhU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvT2JqZWN0U3RvcmUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9PdXRnb2luZ01lZGlhU3RyZWFtLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0NvbnRlbnQvUHViU3ViVG9waWMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvQ29udGVudC9SZW1vdGVNZWRpYVN0cmVhbS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Db250ZW50L1ZlY3RvckRhdGFiYXNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL0RldGVjdGlvbi9EZXRlY3Rpb25NYW5hZ2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9BdXRoQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9BdXRoVXNlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Ob2RlL0xvY2FsQWdlbnQudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9Mb2NhbFVzZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9Ob2RlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL05vZGUvTm9kZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9SZW1vdGVBZ2VudC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9Ob2RlL1JlbW90ZVVzZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvTm9kZS9Vc2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL09yY2hlc3RyYXRvci9PcmNoZXN0cmF0b3IudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvUmVtZWRpYXRpb24vSGVscGVycy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9SZW1lZGlhdGlvbi9SZW1lZGlhdGlvbk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU0RLL1NESy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9IZWxwZXJzLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N0YXRzL1N0YXRzLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N0YXRzL1N0YXRzRGF0YUNoYW5uZWwudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3RhdHMvU3RhdHNNYW5hZ2VyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N0YXRzL1N0YXRzTm9kZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9TdGF0c1N0cmVhbS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9TdGF0c1RyYWNrLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N0YXRzL1N0YXRzVHJhY2tBdWRpby50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdGF0cy9TdGF0c1RyYWNrVmlkZW8udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL0hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL0luY29taW5nU3Vic2NyaXB0aW9uLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvbW9kZWxzL1N1YnNjcmlwdGlvbi9JbmNvbWluZ1N1YnNjcmlwdGlvbk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL091dGdvaW5nU3Vic2NyaXB0aW9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uTWFuYWdlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uTWFwcy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uUmVxdWVzdC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL21vZGVscy9TdWJzY3JpcHRpb24vU3lzdGVtVG9waWMudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9tb2RlbHMvU3Vic2NyaXB0aW9uL1RvcGljLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvcHVibGljL2Vycm9ycy9TREtDbGllbnRFcnJvci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3B1YmxpYy9tb2RlbHMvQ29udGVudC9LZXlWYWx1ZURhdGFiYXNlTGF5b3V0QnVpbGRlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3B1YmxpYy9tb2RlbHMvQ29udGVudC9LZXlWYWx1ZURhdGFiYXNlUXVlcnlCdWlsZGVyLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvc2VydmljZXMvQXV0aC9GaXJlYmFzZUF1dGhTZXJ2aWNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvc2VydmljZXMvRGlzY292ZXJ5L0ZpcmViYXNlUkRCRGlzY292ZXJ5U2VydmljZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3NlcnZpY2VzL0ZpcmViYXNlL0ZpcmViYXNlU2VydmljZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3NlcnZpY2VzL0dyYXBoL0dyYXBoU2VydmljZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3NlcnZpY2VzL0pvYlF1ZXVlL0pvYlF1ZXVlU2VydmljZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3NlcnZpY2VzL01lc3NhZ2VCdWZmZXIvTWVzc2FnZUJ1ZmZlclNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy9zZXJ2aWNlcy9UcmFuc2FjdGlvbi9GaXJlYmFzZVJEQlRyYW5zYWN0aW9uU2VydmljZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3NlcnZpY2VzL1dvcmtmbG93L1dvcmtmbG93U2VydmljZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvQ2h1bmtTcGxpdHRlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvRG9jdW1lbnRQYXJzZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L0VudGl0eUV4dHJhY3Rvci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvR3JhcGhEYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvTW9kZWwudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L05leHRCbG9jay50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvUmVsYXRpb25FeHRyYWN0b3IudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L1NlbnRlbmNlU3BsaXR0ZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L1ZlY3RvckRhdGFiYXNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9Xb3JkU3BsaXR0ZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L2luZGV4LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvR2VuZXJhdGl2ZUFJL1JldHJpZXZlL0VudGl0eUV4dHJhY3Rvci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9HcmFwaERhdGFiYXNlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvR2VuZXJhdGl2ZUFJL1JldHJpZXZlL01vZGVsLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvR2VuZXJhdGl2ZUFJL1JldHJpZXZlL05leHRCbG9jay50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9SZXJhbmtlci50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9WZWN0b3JEYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9pbmRleC50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0dlbmVyYXRpdmVBSS9UcmFjZS9HZW5lcmF0aXZlQUlUcmFjaW5nLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvR2VuZXJhdGl2ZUFJL1dvcmtmbG93L0FnZW50LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvR2VuZXJhdGl2ZUFJL1dvcmtmbG93L0FnZW50RnVuY3Rpb24udHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9HZW5lcmF0aXZlQUkvV29ya2Zsb3cvTmV4dEJsb2NrLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvR2VuZXJhdGl2ZUFJL1dvcmtmbG93L2luZGV4LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvSW50ZXJ2YWwvSW50ZXJ2YWwudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9Mb2dnZXIvSGVscGVycy50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL0xvZ2dlci9Mb2dnZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9PYmplY3RTdG9yZS9IZWxwZXJzLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9RdWV1ZS9Qcmlvcml0eVJldHJ5UXVldWUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9RdWV1ZS9RdWV1ZS50cyIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrLy4vc3JjL3V0aWxzL1F1ZXVlL1JldHJ5UXVldWUudHMiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay8uL3NyYy91dGlscy9RdWV1ZS9WZXJzaW9uZWRSZXRyeVF1ZXVlLnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvLi9zcmMvdXRpbHMvU3VwcG9ydC9TdXBwb3J0LnRzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJAYXdzLWFtcGxpZnkvYXBpXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcIkBhd3MtYW1wbGlmeS9jb3JlXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcIkBjcmV3ZGxlL21pc3QtY29ubmVjdG9yLWluZGV4ZWQtZGJcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwiQGNyZXdkbGUvbWlzdC1jb25uZWN0b3Itb3Bmc1wiIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJAY3Jld2RsZS9taXN0LWNvbm5lY3Rvci13ZWJydGMtYnJvd3NlclwiIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJAY3Jld2RsZS93ZWItc2RrLXR5cGVzXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcImF3cy1hbXBsaWZ5XCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcImF3cy1hbXBsaWZ5L3V0aWxzXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcImZpcmViYXNlL2FwcFwiIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJmaXJlYmFzZS9hdXRoXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcImZpcmViYXNlL2RhdGFiYXNlXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay9leHRlcm5hbCBjb21tb25qcyBcImZpcmViYXNlL2ZpcmVzdG9yZVwiIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJmaXJlYmFzZS9mdW5jdGlvbnNcIiIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL2V4dGVybmFsIGNvbW1vbmpzIFwicnhqc1wiIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvZXh0ZXJuYWwgY29tbW9uanMgXCJ1dWlkXCIiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0BjcmV3ZGxlL3dlYi1zZGsvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9AY3Jld2RsZS93ZWItc2RrL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vQGNyZXdkbGUvd2ViLXNkay93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Il0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCAoKSA9PiB7XG5yZXR1cm4gIiwiaW1wb3J0IHsgQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5leHBvcnQgY29uc3QgQ09OTkVDVElPTl9NSU4gPSAzO1xuZXhwb3J0IGNvbnN0IENPTk5FQ1RJT05fTUFYID0gNCAqIENPTk5FQ1RJT05fTUlOO1xuZXhwb3J0IGNvbnN0IENPTk5FQ1RJT05fR1JPVVBfUkVUUllfREVMQVkgPSAxMDA7XG5leHBvcnQgY29uc3QgQ09OTkVDVElPTl9NQVhfQlVGRkVSX1NJWkUgPSAyICogQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUgKiAxMDI0O1xuIiwiZXhwb3J0IGNvbnN0IENPTlRFTlRfRlBTID0gMjQ7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9NQVhfV0lEVEggPSAxMjgwO1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfTUFYX0hFSUdIVCA9IDcyMDtcbmV4cG9ydCBjb25zdCBDT05URU5UX0JQUCA9IDAuMTI7IC8vIGJpdHMgcGVyIHBpeGVsXG5leHBvcnQgY29uc3QgQ09OVEVOVF9VUERBVEVfREVCT1VOQ0UgPSA1MDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9DSEVDS1NVTV9DSFVOS19TSVpFID0gMjU2ICogMTAyNDsgLy8gMjU2S0JcbmV4cG9ydCBjb25zdCBDT05URU5UX0ZJTEVfQ0hVTktfU0laRSA9IDI1NCAqIDEwMjQ7IC8vIDI1NEtCXG5leHBvcnQgY29uc3QgQ09OVEVOVF9GSUxFX0NIVU5LU19NQVhfQlVGRkVSX1NJWkUgPSAyICogMTAyNCAqIDEwMjQgKiAxMDI0O1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfRklMRV9IRUFERVJfU0laRSA9IDQ7IC8vIDQgYnl0ZXNcbmV4cG9ydCBjb25zdCBDT05URU5UX1BVQlNVQl9UT1BJQ19TVEFUU19ERUJPVU5DRSA9IDUwMDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfTEFTVF9UUkFOU0FDVElPTl9PQkpFQ1RfTkFNRSA9ICcuY3Jld2RsZS1sYXN0LXRyYW5zYWN0aW9uJztcbmV4cG9ydCBjb25zdCBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiA9ICcuY3Jld2RsZS1wZW5kaW5nJztcbmV4cG9ydCBjb25zdCBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX1JFVFJZX0RFTEFZID0gMTAgKiA2MCAqIDEwMDA7IC8vIDEwIG1pbnV0ZXMgLSBUbyByZXZpZXdcbmV4cG9ydCBjb25zdCBDT05URU5UX09CSkVDVF9TVE9SRV9TVEFUU19ERUJPVU5DRSA9IDUwMDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRSA9ICcuY3Jld2RsZS10cmFuc2FjdGlvbnMnO1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX0xBWU9VVF9UQUJMRV9OQU1FID0gJy5jcmV3ZGxlLWxheW91dCc7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfU1lOQ19USU1FT1VUID0gMzAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NUQVRTX0RFQk9VTkNFID0gNTAwMDtcbmV4cG9ydCBjb25zdCBDT05URU5UX1ZFQ1RPUl9EQVRBQkFTRV9TVEFUU19ERUJPVU5DRSA9IDUwMDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9HUkFQSF9EQVRBQkFTRV9TVEFUU19ERUJPVU5DRSA9IDUwMDA7XG5leHBvcnQgY29uc3QgQ09OVEVOVF9KT0JfU0VSVklDRV9GQUlMRURfUkVUUllfREVMQVkgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfSk9CX1NFUlZJQ0VfTUFYX1JFVFJJRVMgPSAzO1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfSk9CX1NFUlZJQ0VfTUFYX0FOU1dFUl9USU1FT1VUID0gMzAwMDtcbmV4cG9ydCBjb25zdCBDT05URU5UX0dFTkVSQVRJVkVfQUlfQ09OVEVYVF9BTlNXRVJfVElNRU9VVCA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlc1xuZXhwb3J0IGNvbnN0IENPTlRFTlRfR0VORVJBVElWRV9BSV9DT05URVhUX1NUQVRTX0RFQk9VTkNFID0gNTAwMDtcbmV4cG9ydCBjb25zdCBDT05URU5UX0dFTkVSQVRJVkVfQUlfV09SS0VSX1NUQVRTX0RFQk9VTkNFID0gNTAwMDtcbmV4cG9ydCBjb25zdCBDT05URU5UX0dFTkVSQVRJVkVfQUlfTU9ERUxfRVhURU5TSU9OID0gJy5nZ3VmJztcbmV4cG9ydCBjb25zdCBDT05URU5UX0dFTkVSQVRJVkVfQUlfTUFYX0NPTlRFWFRfTEVOR1RIID0gMjUwMDA7XG4iLCJleHBvcnQgY29uc3QgREVURUNUSU9OX0lTU1VFX1RJTUVPVVQgPSAzMDAwMDtcbiIsImltcG9ydCB7IENPTlRFTlRfQlBQIH0gZnJvbSAnY29uc3RhbnRzL0NvbnRlbnQnO1xuaW1wb3J0IHsgSXNzdWVUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9EZXRlY3Rpb24vRGV0ZWN0aW9uJztcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fSVNTVUVfU1RfVEhSRVNIT0xEID0gMjUwIC8gMTAwO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9JU1NVRV9EVF9USFJFU0hPTEQgPSA1MCAvIDEwMDtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fSVNTVUVfQklUUkFURV9USFJFU0hPTEQgPSAyNSAvIDEwMDtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fSVNTVUVfSklUVEVSX1RIUkVTSE9MRCA9IDAuNjtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fSVNTVUVfUlRUX1RIUkVTSE9MRCA9IEluZmluaXR5O1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9JU1NVRV9BVl9ERUxBWV9USFJFU0hPTEQgPSAzMDA7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX0lTU1VFX1RQRl9USFJFU0hPTEQgPSA3NSAvIDEwMDtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fSVNTVUVfRlBTX1RIUkVTSE9MRCA9IDEwO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9DT1JFX0lTU1VFX1JVTEVTID0gW1xuICAgIHtcbiAgICAgICAgdHlwZTogSXNzdWVUeXBlLlNUVm9sYXRpbGl0eSxcbiAgICAgICAgcmVwb3J0TWV0cmljOiAocmVwb3J0KSA9PiByZXBvcnQuU1RWb2xhdGlsaXR5LFxuICAgICAgICBtYXhUaHJlc2hvbGQ6IERFVEVDVElPTl9JU1NVRV9TVF9USFJFU0hPTEQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IElzc3VlVHlwZS5EVFZvbGF0aWxpdHksXG4gICAgICAgIHJlcG9ydE1ldHJpYzogKHJlcG9ydCkgPT4gcmVwb3J0LkRUVm9sYXRpbGl0eSxcbiAgICAgICAgbWF4VGhyZXNob2xkOiBERVRFQ1RJT05fSVNTVUVfRFRfVEhSRVNIT0xELFxuICAgIH0sXG5dO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9WSURFT19JU1NVRV9SVUxFUyA9IFtcbiAgICB7XG4gICAgICAgIHR5cGU6IElzc3VlVHlwZS5UaW1lUGVyRnJhbWUsXG4gICAgICAgIHJlcG9ydE1ldHJpYzogKHJlcG9ydCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGltZVBlckZyYW1lTGltaXQgPSAoMTAwMCAvIHJlcG9ydC5GUFMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcG9ydC50aW1lUGVyRnJhbWUgLyB0aW1lUGVyRnJhbWVMaW1pdDtcbiAgICAgICAgfSxcbiAgICAgICAgbWF4VGhyZXNob2xkOiBERVRFQ1RJT05fSVNTVUVfVFBGX1RIUkVTSE9MRCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogSXNzdWVUeXBlLkJpdHJhdGUsXG4gICAgICAgIHJlcG9ydE1ldHJpYzogKHJlcG9ydCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Qml0cmF0ZSA9IHJlcG9ydC5GUFMgKiByZXBvcnQuZnJhbWVXaWR0aCAqIHJlcG9ydC5mcmFtZUhlaWdodCAqIENPTlRFTlRfQlBQO1xuICAgICAgICAgICAgcmV0dXJuIHJlcG9ydC5iaXRyYXRlIC8gdGFyZ2V0Qml0cmF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgbWluVGhyZXNob2xkOiBERVRFQ1RJT05fSVNTVUVfQklUUkFURV9USFJFU0hPTEQsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IElzc3VlVHlwZS5KaXR0ZXIsXG4gICAgICAgIHJlcG9ydE1ldHJpYzogKHJlcG9ydCkgPT4gcmVwb3J0LmppdHRlcixcbiAgICAgICAgbWF4VGhyZXNob2xkOiBERVRFQ1RJT05fSVNTVUVfSklUVEVSX1RIUkVTSE9MRCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogSXNzdWVUeXBlLkZyYW1lUGVyU2Vjb25kLFxuICAgICAgICByZXBvcnRNZXRyaWM6IChyZXBvcnQpID0+IHJlcG9ydC5GUFMsXG4gICAgICAgIG1pblRocmVzaG9sZDogREVURUNUSU9OX0lTU1VFX0ZQU19USFJFU0hPTEQsXG4gICAgfSxcbl07XG5leHBvcnQgY29uc3QgREVURUNUSU9OX0FVRElPX0lTU1VFX1JVTEVTID0gW1xuICAgIHtcbiAgICAgICAgdHlwZTogSXNzdWVUeXBlLkppdHRlcixcbiAgICAgICAgcmVwb3J0TWV0cmljOiAocmVwb3J0KSA9PiByZXBvcnQuaml0dGVyLFxuICAgICAgICBtYXhUaHJlc2hvbGQ6IERFVEVDVElPTl9JU1NVRV9KSVRURVJfVEhSRVNIT0xELFxuICAgIH0sXG5dO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9TRU5ERVJfSVNTVUVfUlVMRVMgPSBbXG4gICAge1xuICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuUm91bmRUcmlwVGltZSxcbiAgICAgICAgcmVwb3J0TWV0cmljOiAocmVwb3J0KSA9PiByZXBvcnQucm91bmRUcmlwVGltZSxcbiAgICAgICAgbWF4VGhyZXNob2xkOiBERVRFQ1RJT05fSVNTVUVfUlRUX1RIUkVTSE9MRCxcbiAgICB9LFxuXTtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUkVDRUlWRVJfSVNTVUVfUlVMRVMgPSBbXG4gICAge1xuICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuQXVkaW9WaWRlb0RlbGF5LFxuICAgICAgICByZXBvcnRNZXRyaWM6IChyZXBvcnQpID0+IHJlcG9ydC5BdWRpb1ZpZGVvRGVsYXksXG4gICAgICAgIG1heFRocmVzaG9sZDogREVURUNUSU9OX0lTU1VFX0FWX0RFTEFZX1RIUkVTSE9MRCxcbiAgICB9LFxuXTtcbiIsImltcG9ydCB7IElzc3VlVHlwZSwgUHJvYmxlbVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0RldGVjdGlvbi9EZXRlY3Rpb24nO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9QUk9CTEVNX1NUX1RIUkVTSE9MRCA9IDU7XG5leHBvcnQgY29uc3QgREVURUNUSU9OX1BST0JMRU1fRFRfVEhSRVNIT0xEID0gNTtcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9UUEZfVEhSRVNIT0xEID0gMztcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9BVl9ERUxBWV9USFJFU0hPTEQgPSAyO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9QUk9CTEVNX0ZQU19USFJFU0hPTEQgPSAzO1xuZXhwb3J0IGNvbnN0IERFVEVDVElPTl9QUk9CTEVNX0JJVFJBVEVfVEhSRVNIT0xEID0gMztcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9KSVRURVJfVEhSRVNIT0xEID0gMztcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9SVFRfVEhSRVNIT0xEID0gMztcbmV4cG9ydCBjb25zdCBERVRFQ1RJT05fUFJPQkxFTV9SVUxFUyA9IFtcbiAgICB7XG4gICAgICAgIHR5cGU6IFByb2JsZW1UeXBlLkNQVUN5Y2xlLFxuICAgICAgICBpc3N1ZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuU1RWb2xhdGlsaXR5LFxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogREVURUNUSU9OX1BST0JMRU1fU1RfVEhSRVNIT0xELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuRFRWb2xhdGlsaXR5LFxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogREVURUNUSU9OX1BST0JMRU1fRFRfVEhSRVNIT0xELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogUHJvYmxlbVR5cGUuVGltZVBlckZyYW1lLFxuICAgICAgICBpc3N1ZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuVGltZVBlckZyYW1lLFxuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogREVURUNUSU9OX1BST0JMRU1fVFBGX1RIUkVTSE9MRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IFByb2JsZW1UeXBlLkF1ZGlvVmlkZW9EZWxheSxcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLkF1ZGlvVmlkZW9EZWxheSxcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IERFVEVDVElPTl9QUk9CTEVNX0FWX0RFTEFZX1RIUkVTSE9MRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IFByb2JsZW1UeXBlLkZyYW1lUGVyU2Vjb25kLFxuICAgICAgICBpc3N1ZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuRnJhbWVQZXJTZWNvbmQsXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiBERVRFQ1RJT05fUFJPQkxFTV9GUFNfVEhSRVNIT0xELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogUHJvYmxlbVR5cGUuQml0cmF0ZSxcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLkJpdHJhdGUsXG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiBERVRFQ1RJT05fUFJPQkxFTV9CSVRSQVRFX1RIUkVTSE9MRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IFByb2JsZW1UeXBlLkppdHRlcixcbiAgICAgICAgaXNzdWVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogSXNzdWVUeXBlLkppdHRlcixcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IERFVEVDVElPTl9QUk9CTEVNX0pJVFRFUl9USFJFU0hPTEQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiBQcm9ibGVtVHlwZS5Sb3VuZFRyaXBUaW1lLFxuICAgICAgICBpc3N1ZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBJc3N1ZVR5cGUuUm91bmRUcmlwVGltZSxcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IERFVEVDVElPTl9QUk9CTEVNX1JUVF9USFJFU0hPTEQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG5dO1xuIiwiZXhwb3J0IGNvbnN0IElOVEVSVkFMX1RJTUUgPSAxMDA7XG4iLCJleHBvcnQgY29uc3QgTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRSA9IDEwMDA7XG5leHBvcnQgY29uc3QgTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRV9NQVggPSAxMCAqIDEwMDA7XG5leHBvcnQgY29uc3QgTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRV9MSU1JVCA9IE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUVfTUFYIC0gTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRTtcbmV4cG9ydCBjb25zdCBOT0RFX1BST0NFU1NfUkFOS19ERUJPVUNFX1RJTUUgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRV9NQVggPSAxMCAqIDEwMDA7XG5leHBvcnQgY29uc3QgTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FX0xJTUlUID0gTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FX01BWCAtIE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRTtcbmV4cG9ydCBjb25zdCBOT0RFX0RJU1RBTkNFX0hPUCA9IDE7XG4vLyBUT0RPIC0gUmV2aWV3IHRoaXMgdmFsdWVcbmV4cG9ydCBjb25zdCBOT0RFX0RJU1RBTkNFX1JFU09MVVRJT04gPSAwO1xuZXhwb3J0IGNvbnN0IE5PREVfRElTVEFOQ0VfVFJBQ0tTID0gMTA7XG5leHBvcnQgY29uc3QgTk9ERV9ESVNUQU5DRV9NQVggPSAxMDtcbmV4cG9ydCBjb25zdCBOT0RFX0NMRUFOX1JFTU9URV9OT0RFU19JTlRFUlZBTCA9IDYwICogMTAwMDtcbmV4cG9ydCBjb25zdCBOT0RFX0NMRUFOX1JFTU9URV9OT0RFU19USFJFU0hPTEQgPSA1ICogNjAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IE5PREVfQUdFTlRfQ0FQQUNJVFlfUkVQT1JUX0lOVEVSVkFMID0gMzAgKiAxMDAwOyAvLyAzMCBzZWNvbmRzXG4iLCJpbXBvcnQgeyBDT05URU5UX0ZJTEVfQ0hVTktfU0laRSB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmV4cG9ydCBjb25zdCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkcgPSAnMCc7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9QT05HID0gJzEnO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfSU5URVJWQUwgPSAzMDAwO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfVEhSRVNIT0xEID0gUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9JTlRFUlZBTCAqIDU7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX1JFQ09OTkVDVF9USU1FT1VUID0gMzAwMDA7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX1RJTUVPVVQgPSAzMDAwMDtcbmV4cG9ydCBjb25zdCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1RJTUVPVVQgPSA2MCAqIDEwMDA7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX01FU1NBR0VfUkVUUlkgPSA1MDAwO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9IQU5EU0hBS0VfREVCT1VOQ0UgPSA1MDA7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX0NIVU5LX0lERU5USUZJRVIgPSAnY2h1bmsnO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9DSFVOS19TSVpFID0gQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkU7XG5leHBvcnQgY29uc3QgUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9MT1dfVEhSRVNIT0xEID0gUEVFUl9DT05ORUNUSU9OX0NIVU5LX1NJWkUgKiAzO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9CVUZGRVJfTUFYX1RIUkVTSE9MRCA9IDE2ICogUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9MT1dfVEhSRVNIT0xEO1xuZXhwb3J0IGNvbnN0IFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9SRVRSWV9ERUxBWSA9IDEwMDtcbmV4cG9ydCBjb25zdCBQRUVSX0NPTk5FQ1RJT05fREFUQUNIQU5ORUxfRElTQ09OTkVDVF9IQU5ETEVSX0RFTEFZID0gMjUwO1xuIiwiZXhwb3J0IGNvbnN0IFJFTUVESUFUSU9OX0RPV05HUkFERV9XQUlUX1RJTUUgPSA1MDAwO1xuZXhwb3J0IGNvbnN0IFJFTUVESUFUSU9OX1VQR1JBREVfV0FJVF9USU1FID0gMTUwMDA7XG5leHBvcnQgY29uc3QgUkVNRURJQVRJT05fTUlOX0ZQUyA9IDE1O1xuZXhwb3J0IGNvbnN0IFJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFID0gNDtcbmV4cG9ydCBjb25zdCBSRU1FRElBVElPTl9NSU5fQklUUkFURSA9IDUwMDAwO1xuZXhwb3J0IGNvbnN0IFJFTUVESUFUSU9OX1JFU09MVVRJT05fU0NBTEUgPSAwLjU7XG5leHBvcnQgY29uc3QgUkVNRURJQVRJT05fRlBTID0gMztcbmV4cG9ydCBjb25zdCBSRU1FRElBVElPTl9CSVRSQVRFID0gMC4yNTtcbiIsImltcG9ydCB7IFByb2JsZW1UeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9EZXRlY3Rpb24vRGV0ZWN0aW9uJztcbmltcG9ydCB7IFJlbWVkaWF0aW9uQ29tcG9uZW50LCBSZW1lZGlhdGlvbkFjdGlvbiwgUmVtZWRpYXRpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvUmVtZWRpYXRpb24vUmVtZWRpYXRpb24nO1xuZXhwb3J0IGNvbnN0IFJFTUVESUFUSU9OX1JVTEVTID0gW1xuICAgIHtcbiAgICAgICAgcHJvYmxlbVR5cGU6IFByb2JsZW1UeXBlLkNQVUN5Y2xlLFxuICAgICAgICByZW1lZGlhdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogUmVtZWRpYXRpb25Db21wb25lbnQuUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1vdGVSZW1lZGlhdGlvbixcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IFJlbWVkaWF0aW9uQ29tcG9uZW50LlJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgICBwcm9ibGVtVHlwZTogUHJvYmxlbVR5cGUuVGltZVBlckZyYW1lLFxuICAgICAgICByZW1lZGlhdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogUmVtZWRpYXRpb25Db21wb25lbnQuUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHByb2JsZW1UeXBlOiBQcm9ibGVtVHlwZS5BdWRpb1ZpZGVvRGVsYXksXG4gICAgICAgIHJlbWVkaWF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBSZW1lZGlhdGlvbkNvbXBvbmVudC5SZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcHJvYmxlbVR5cGU6IFByb2JsZW1UeXBlLkZyYW1lUGVyU2Vjb25kLFxuICAgICAgICByZW1lZGlhdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogUmVtZWRpYXRpb25Db21wb25lbnQuUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHByb2JsZW1UeXBlOiBQcm9ibGVtVHlwZS5CaXRyYXRlLFxuICAgICAgICByZW1lZGlhdGlvbnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogUmVtZWRpYXRpb25Db21wb25lbnQuQml0cmF0ZSxcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHByb2JsZW1UeXBlOiBQcm9ibGVtVHlwZS5KaXR0ZXIsXG4gICAgICAgIHJlbWVkaWF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBSZW1lZGlhdGlvbkNvbXBvbmVudC5CaXRyYXRlLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgcHJvYmxlbVR5cGU6IFByb2JsZW1UeXBlLlJvdW5kVHJpcFRpbWUsXG4gICAgICAgIHJlbWVkaWF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBSZW1lZGlhdGlvbkNvbXBvbmVudC5CaXRyYXRlLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICB9LFxuXTtcbiIsImV4cG9ydCBjb25zdCBTREtfUkVGUkVTSF9JTlRFUlZBTCA9IDMwICogNjAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IFNES19GSVJFU1RPUkVfQVBQX05BTUUgPSAnQ1JFV0RMRV9XRUJfU0RLJztcbiIsImV4cG9ydCBjb25zdCBNRVNTQUdFX0JVRkZFUl9SRVRFTlRJT05fVElNRSA9IDIwICogNjAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IE1FU1NBR0VfQlVGRkVSX0NMRUFOVVBfSU5URVJWQUwgPSAyICogNjAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IFRSQU5TQUNUSU9OX1BFUl9QQUdFID0gMTAwO1xuIiwiZXhwb3J0IGNvbnN0IFNUQVRTX0NPTExFQ1RfREVMQVkgPSAxMDAwO1xuZXhwb3J0IGNvbnN0IFNUQVRTX1JFUE9SVF9ERUxBWSA9IDMwICogMTAwMDsgLy8gMzAgc2Vjb25kc1xuZXhwb3J0IGNvbnN0IFNUQVRTX09VVEJPVU5EID0gJ291dGJvdW5kLXJ0cCc7XG5leHBvcnQgY29uc3QgU1RBVFNfUkVNT1RFX0lOQk9VTkQgPSAncmVtb3RlLWluYm91bmQtcnRwJztcbmV4cG9ydCBjb25zdCBTVEFUU19JTkJPVU5EID0gJ2luYm91bmQtcnRwJztcbmV4cG9ydCBjb25zdCBTVEFUU19TRU5ERVJfRklMVEVSUyA9IFtcbiAgICBTVEFUU19PVVRCT1VORCxcbiAgICBTVEFUU19SRU1PVEVfSU5CT1VORCxcbl07XG5leHBvcnQgY29uc3QgU1RBVFNfUkVDRUlWRVJfRklMVEVSUyA9IFtcbiAgICBTVEFUU19JTkJPVU5ELFxuXTtcbiIsImV4cG9ydCBjb25zdCBTVUJTQ1JJUFRJT05fUkVRVUVTVF9USU1FT1VUID0gMjAwMDtcbmV4cG9ydCBjb25zdCBTVUJTQ1JJUFRJT05fTUFYX1JFVFJZX0NPVU5UID0gMTA7XG5leHBvcnQgY29uc3QgU1VCU0NSSVBUSU9OX01BWF9PVVRHT0lORyA9IDE7XG5leHBvcnQgY29uc3QgU1VCU0NSSVBUSU9OX1JFVFJZX0RFTEFZID0gMTAwMDtcbmV4cG9ydCBjb25zdCBTVUJTQ1JJUFRJT05fUkVRVUVTVF9SRVRSWV9ERUxBWSA9IDEwMDtcbiIsImV4cG9ydCBjb25zdCBTWVNURU1fVE9QSUMgPSAwO1xuZXhwb3J0IGNvbnN0IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCA9ICdpbnRlcm5hbCc7XG4iLCJsZXQgZW52aXJvbm1lbnQgPSByZXF1aXJlKCdlbnZpcm9ubWVudHMvZW52aXJvbm1lbnQuZGVmYXVsdCcpLkVudmlyb25tZW50O1xuc3dpdGNoIChwcm9jZXNzLmVudi5DUkVXRExFX0VOVikge1xuICAgIGNhc2UgJ3ByZCc6XG4gICAgICAgIGVudmlyb25tZW50ID0gbWVyZ2VEZWVwKGVudmlyb25tZW50LCByZXF1aXJlKCdlbnZpcm9ubWVudHMvZW52aXJvbm1lbnQucHJkJykuRW52aXJvbm1lbnQpO1xuICAgICAgICBicmVhaztcbiAgICBjYXNlICdzdGcnOlxuICAgICAgICBlbnZpcm9ubWVudCA9IG1lcmdlRGVlcChlbnZpcm9ubWVudCwgcmVxdWlyZSgnZW52aXJvbm1lbnRzL2Vudmlyb25tZW50LnN0ZycpLkVudmlyb25tZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgZW52aXJvbm1lbnQgPSBtZXJnZURlZXAoZW52aXJvbm1lbnQsIHJlcXVpcmUoJ2Vudmlyb25tZW50cy9lbnZpcm9ubWVudC5kZXYnKS5FbnZpcm9ubWVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoaXRlbSkge1xuICAgIHJldHVybiBpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShpdGVtKSA/IHRydWUgOiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXAodGFyZ2V0LCAuLi5zb3VyY2VzKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNvdXJjZXMpIHx8IHNvdXJjZXMubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIGNvbnN0IHNvdXJjZSA9IHNvdXJjZXMuc2hpZnQoKTtcbiAgICBpZiAoaXNPYmplY3QodGFyZ2V0KSAmJiBpc09iamVjdChzb3VyY2UpKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHNvdXJjZVtrZXldKSkge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0W2tleV0pXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiB7fSB9KTtcbiAgICAgICAgICAgICAgICBtZXJnZURlZXAodGFyZ2V0W2tleV0sIHNvdXJjZVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGFyZ2V0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VEZWVwKHRhcmdldCwgLi4uc291cmNlcyk7XG59XG5leHBvcnQgY29uc3QgRW52aXJvbm1lbnQgPSBlbnZpcm9ubWVudDtcbiIsImV4cG9ydCBjb25zdCBFbnZpcm9ubWVudCA9IHtcbiAgICB2ZXJzaW9uOiAnMC41LjAuMCcsXG4gICAgaXNQcm9kdWN0aW9uOiBmYWxzZSxcbiAgICBmaXJlYmFzZUNvbmZpZzoge1xuICAgICAgICBhcGlLZXk6IFwiQUl6YVN5REhEZ21BNTc0TlZlTVdWOVNwVy1xNFFRTWprQU51dWVnXCIsXG4gICAgICAgIGF1dGhEb21haW46IFwiY3Jld2RsZS1zZGstc3RnLmZpcmViYXNlYXBwLmNvbVwiLFxuICAgICAgICBkYXRhYmFzZVVSTDogXCJodHRwczovL2NyZXdkbGUtc2RrLXN0Zy1kZWZhdWx0LXJ0ZGIuZmlyZWJhc2Vpby5jb21cIixcbiAgICAgICAgcHJvamVjdElkOiBcImNyZXdkbGUtc2RrLXN0Z1wiLFxuICAgICAgICBzdG9yYWdlQnVja2V0OiBcImNyZXdkbGUtc2RrLXN0Zy5hcHBzcG90LmNvbVwiLFxuICAgICAgICBhcHBJZDogXCIxOjUxOTQxNTcwMjc5MTp3ZWI6NWRkMzkwNDJmODgxY2ZkZTMyNTFhMlwiLFxuICAgICAgICBmdW5jdGlvbnNSZWdpb246ICdub3J0aGFtZXJpY2Etbm9ydGhlYXN0MScsXG4gICAgfSxcbiAgICBnb29nbGU6IHtcbiAgICAgICAgc2VhcmNoRW5naW5lSWQ6ICcyMWE5ZDc4ZGVlOTdmNDg3YicsXG4gICAgfSxcbiAgICBhd3M6IHtcbiAgICAgICAgZW5kcG9pbnQ6ICdodHRwczovLzNuYWJoanlhYWJkYWRucGN6c2dyeWU2dXB1LmFwcHN5bmMtYXBpLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tL2dyYXBocWwnLFxuICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxuICAgIH0sXG59O1xuIiwiZXhwb3J0IGNvbnN0IEVudmlyb25tZW50ID0ge307XG4iLCJleHBvcnQgY29uc3QgRW52aXJvbm1lbnQgPSB7XG4gICAgdmVyc2lvbjogJzAuNS4wJyxcbiAgICBpc1Byb2R1Y3Rpb246IHRydWUsXG4gICAgZmlyZWJhc2VDb25maWc6IHtcbiAgICAgICAgYXBpS2V5OiBcIkFJemFTeUNZNlQ0OUQ4MVFwb1pfQXBaNmF0cFQ0YzNZeTBfbFd2Z1wiLFxuICAgICAgICBhdXRoRG9tYWluOiBcImNyZXdkbGUtc2RrLmZpcmViYXNlYXBwLmNvbVwiLFxuICAgICAgICBkYXRhYmFzZVVSTDogXCJodHRwczovL2NyZXdkbGUtc2RrLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbVwiLFxuICAgICAgICBwcm9qZWN0SWQ6IFwiY3Jld2RsZS1zZGtcIixcbiAgICAgICAgc3RvcmFnZUJ1Y2tldDogXCJjcmV3ZGxlLXNkay5hcHBzcG90LmNvbVwiLFxuICAgICAgICBtZXNzYWdpbmdTZW5kZXJJZDogXCI0MjAyMzUxODEwODNcIixcbiAgICAgICAgYXBwSWQ6IFwiMTo0MjAyMzUxODEwODM6d2ViOjRlZmY2MDYyYmQ4NDVjYjA3NDhjYmVcIixcbiAgICAgICAgbWVhc3VyZW1lbnRJZDogXCJHLUY3VzhLWFJLUUJcIlxuICAgIH0sXG4gICAgYXdzOiB7XG4gICAgICAgIGVuZHBvaW50OiAnaHR0cHM6Ly9lN2lmMjd1bXB6ZjJmZjRrNjN3Z3pvNHByaS5hcHBzeW5jLWFwaS51cy1lYXN0LTEuYW1hem9uYXdzLmNvbS9ncmFwaHFsJyxcbiAgICAgICAgcmVnaW9uOiAndXMtZWFzdC0xJyxcbiAgICB9LFxufTtcbiIsImV4cG9ydCBjb25zdCBFbnZpcm9ubWVudCA9IHt9O1xuIiwiLyoqXG4gKiBFcnJvciB0aHJvd24gdG8gYWxsb3cgZWFybHkgcmV0dXJuIGZyb20gYSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEVhcmx5UmV0dXJuRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoZXJyb3IpIHtcbiAgICAgICAgc3VwZXIoYEVhcmx5IHJldHVybjogJHtlcnJvcn1gKTtcbiAgICB9XG59XG4iLCJleHBvcnQgdmFyIFNES0ludGVybmFsRXJyb3JDb2RlcztcbihmdW5jdGlvbiAoU0RLSW50ZXJuYWxFcnJvckNvZGVzKSB7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkXCJdID0gXCJjb25uZWN0aW9uLW5vdC1pbml0aWFsaXplZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkNvbm5lY3Rpb25Ob3RDb25uZWN0ZWRcIl0gPSBcImNvbm5lY3Rpb24tbm90LWNvbm5lY3RlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkNvbm5lY3Rpb25Ob1JldHJ5UXVldWVcIl0gPSBcImNvbm5lY3Rpb24tbm8tcmV0cnktcXVldWVcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJDb25uZWN0aW9uSW52YWxpZERhdGFFdmVudFwiXSA9IFwiY29ubmVjdGlvbi1pbnZhbGlkLWRhdGEtZXZlbnRcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJHZW5lcmF0aXZlQUlDb250ZXh0Q3JlYXRpb25GYWlsZWRcIl0gPSBcImdlbmVyYXRpdmUtYWktY29udGV4dC1jcmVhdGlvbi1mYWlsZWRcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJHZW5lcmF0aXZlQUlDb250ZXh0Sm9iRmFpbGVkXCJdID0gXCJnZW5lcmF0aXZlLWFpLWNvbnRleHQtam9iLWZhaWxlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkdlbmVyYXRpdmVBSUNvbnRleHRKb2JUaW1lb3V0XCJdID0gXCJnZW5lcmF0aXZlLWFpLWNvbnRleHQtam9iLXRpbWVvdXRcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJHZW5lcmF0aXZlQUlDb250ZXh0SW52YWxpZFBhcnRpYWxSZXN1bHRcIl0gPSBcImdlbmVyYXRpdmUtYWktY29udGV4dC1pbnZhbGlkLXBhcnRpYWwtcmVzdWx0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiR2VuZXJhdGl2ZUFJV29ya2VyQ3JlYXRpb25GYWlsZWRcIl0gPSBcImdlbmVyYXRpdmUtYWktd29ya2VyLWNyZWF0aW9uLWZhaWxlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkdyYXBoRGF0YWJhc2VDcmVhdGlvbkZhaWxlZFwiXSA9IFwiZ3JhcGgtZGF0YWJhc2UtY3JlYXRpb24tZmFpbGVkXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSW52YWxpZERhdGFDaGFubmVsXCJdID0gXCJpbnZhbGlkLWRhdGEtY2hhbmVsXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSW52YWxpZFB1Ymxpc2hlclwiXSA9IFwiaW52YWxpZC1wdWJsaXNoZXJcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJJbnZhbGlkU3Vic2NyaWJlclwiXSA9IFwiaW52YWxpZC1zdWJzY3JpYmVyXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSW52YWxpZFN1YnNjcmlwdGlvblwiXSA9IFwiaW52YWxpZC1zdWJzY3JpcHRpb25cIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJKb2JEaXNwYXRjaGVyQ3JlYXRpb25GYWlsZWRcIl0gPSBcImpvYi1kaXNwYXRjaGVyLWNyZWF0aW9uLWZhaWxlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkpvYkRpc3BhdGNoZXJJbnZhbGlkUGF5bG9hZFwiXSA9IFwiam9iLWRpc3BhdGNoZXItaW52YWxpZC1wYXlsb2FkXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSm9iRGlzcGF0Y2hlckpvYk5vdEZvdW5kXCJdID0gXCJqb2ItZGlzcGF0Y2hlci1qb2Itbm90LWZvdW5kXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiSm9iRGlzcGF0Y2hlck9ic2VydmVyTm90Rm91bmRcIl0gPSBcImpvYi1kaXNwYXRjaGVyLW9ic2VydmVyLW5vdC1mb3VuZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkpvYldvcmtlckNyZWF0aW9uRmFpbGVkXCJdID0gXCJqb2Itd29ya2VyLWNyZWF0aW9uLWZhaWxlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkpvYldvcmtlckludmFsaWRUeXBlXCJdID0gXCJqb2Itd29ya2VyLWludmFsaWQtdHlwZVwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VDcmVhdGlvbkZhaWxlZFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLWNyZWF0aW9uLWZhaWxlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VUYWJsZURvZXNOb3RFeGlzdFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLXRhYmxlLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLXRyYW5zYWN0aW9uLXRhYmxlLW5vdC1pbml0aWFsaXplZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VUcmFuc2FjdGlvblZhbHVlTm90U2V0XCJdID0gXCJrZXktdmFsdWUtZGF0YWJhc2UtdHJhbnNhY3Rpb24tdmFsdWUtbm90LXNldFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIkxvY2FsTWVkaWFTdHJlYW1Eb2VzTm90RXhpc3RcIl0gPSBcImxvY2FsLXN0cmVhbS1kb2VzLW5vdC1leGlzdFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIk1pc3NpbmdSZW1vdGVDb25uZWN0aW9uXCJdID0gXCJtaXNzaW5nLWluY29taW5nLWNvbm5lY3Rpb25cIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJNaXNzaW5nU3lzdGVtVG9waWNcIl0gPSBcIm1pc3Npbmctc3lzdGVtLXRvcGljXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiTWlzdGxldENhcGFjaXR5UmVwb3J0Tm90U2V0XCJdID0gXCJtaXN0bGV0LWNhcGFjaXR5LXJlcG9ydC1ub3Qtc2V0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVDYW5ub3RXcml0ZVRyYW5zYWN0aW9uXCJdID0gXCJvYmplY3Qtc3RvcmUtY2Fubm90LXdyaXRlLXRyYW5zYWN0aW9uXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVJbnZhbGlkU3RhdGVcIl0gPSBcIm9iamVjdC1zdG9yZS1pbnZhbGlkLXN0YXRlXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVJbnZhbGlkU3luY01lc3NhZ2VcIl0gPSBcIm9iamVjdC1zdG9yZS1pbnZhbGlkLXN5bmMtbWVzc2FnZVwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIk9iamVjdFN0b3JlTm90U3luY2VkXCJdID0gXCJvYmplY3Qtc3RvcmUtbm90LXN5bmNlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIk91dGdvaW5nTWVkaWFTdHJlYW1Ob1RvcGljXCJdID0gXCJvdXRnb2luZy1zdHJlYW0tbm8tdG9waWNcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJSZW1vdGVNZWRpYVN0cmVhbURvZXNOb3RFeGlzdFwiXSA9IFwicmVtb3RlLXN0cmVhbS1kb2VzLW5vdC1leGlzdFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIlJlbW90ZU1lZGlhU3RyZWFtTWlzc2luZ1Byb3ZpZGVySWRcIl0gPSBcInJlbW90ZS1zdHJlYW0tbWlzc2luZy1wcm92aWRlci1pZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIlJlbW90ZUNvbm5lY3Rpb25FeGlzdHNcIl0gPSBcInJlbW90ZS1jb25uZWN0aW9uLWV4aXN0c1wiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIlN1YnNjcmlwdGlvblJlcXVlc3REb2VzTm90RXhpc3RcIl0gPSBcInN1YnNjcmlwdGlvbi1yZXF1ZXN0LWRvZXMtbm90LWV4aXN0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiU3Vic2NyaXB0aW9uUmVxdWVzdEZhaWxlZFwiXSA9IFwic3Vic2NyaXB0aW9uLXJlcXVlc3QtZmFpbGVkXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiU3Vic2NyaXB0aW9uUmVxdWVzdE5vQW5zd2VyXCJdID0gXCJzdWJzY3JpcHRpb24tcmVxdWVzdC1uby1hbnN3ZXJcIjtcbiAgICBTREtJbnRlcm5hbEVycm9yQ29kZXNbXCJOb2RlRG9lc05vdEV4aXN0XCJdID0gXCJub2RlLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiTm9kZUFscmVhZHlFeGlzdFwiXSA9IFwibm9kZS1hbHJlYWR5LWV4aXN0XCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiUGVlckNvbm5lY3Rpb25JbnZhbGlkRGVzdGluYXRpb25cIl0gPSBcInBlZXItY29ubmVjdGlvbi1pbnZhbGlkLWRlc3RpbmF0aW9uXCI7XG4gICAgU0RLSW50ZXJuYWxFcnJvckNvZGVzW1wiVmVjdG9yRGF0YWJhc2VDcmVhdGlvbkZhaWxlZFwiXSA9IFwidmVjdG9yLWRhdGFiYXNlLWNyZWF0aW9uLWZhaWxlZFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIldvcmtmbG93RG9lc05vdEV4aXN0XCJdID0gXCJ3b3JrZmxvdy1kb2VzLW5vdC1leGlzdFwiO1xuICAgIFNES0ludGVybmFsRXJyb3JDb2Rlc1tcIldvcmtmbG93SW52YWxpZEJsb2NrVHlwZVwiXSA9IFwid29ya2Zsb3ctaW52YWxpZC1ibG9jay10eXBlXCI7XG59KShTREtJbnRlcm5hbEVycm9yQ29kZXMgfHwgKFNES0ludGVybmFsRXJyb3JDb2RlcyA9IHt9KSk7XG5jb25zdCBtZXNzYWdlcyA9IG5ldyBNYXAoW1xuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkLCAnQ29ubmVjdGlvbiBub3QgaW5pdGlhbGl6ZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Db25uZWN0aW9uTm90Q29ubmVjdGVkLCAnQ29ubmVjdGlvbiBub3QgY29ubmVjdGVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuQ29ubmVjdGlvbk5vUmV0cnlRdWV1ZSwgJ0Nvbm5lY3Rpb24gZG9lcyBub3QgaGF2ZSBhIHJldHJ5IHF1ZXVlLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuQ29ubmVjdGlvbkludmFsaWREYXRhRXZlbnQsICdJbnZhbGlkIGRhdGEgZXZlbnQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5HZW5lcmF0aXZlQUlDb250ZXh0Q3JlYXRpb25GYWlsZWQsICdHZW5lcmF0aXZlIEFJIGNvbnRleHQgY3JlYXRpb24gZmFpbGVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuR2VuZXJhdGl2ZUFJQ29udGV4dEpvYkZhaWxlZCwgJ0dlbmVyYXRpdmUgQUkgY29udGV4dCBqb2IgZmFpbGVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuR2VuZXJhdGl2ZUFJQ29udGV4dEpvYlRpbWVvdXQsICdHZW5lcmF0aXZlIEFJIGNvbnRleHQgam9iIHRpbWVvdXQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5HZW5lcmF0aXZlQUlDb250ZXh0SW52YWxpZFBhcnRpYWxSZXN1bHQsICdHZW5lcmF0aXZlIEFJIGNvbnRleHQgaW52YWxpZCBwYXJ0aWFsIHJlc3VsdC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLkdlbmVyYXRpdmVBSVdvcmtlckNyZWF0aW9uRmFpbGVkLCAnQUkgd29ya2VyIGNyZWF0aW9uIGZhaWxlZC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLkdyYXBoRGF0YWJhc2VDcmVhdGlvbkZhaWxlZCwgJ0dyYXBoIGRhdGFiYXNlIGNyZWF0aW9uIGZhaWxlZC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLkludmFsaWREYXRhQ2hhbm5lbCwgJ0ludmFsaWQgZGF0YSBjaGFubmVsLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuSW52YWxpZFB1Ymxpc2hlciwgJ0ludmFsaWQgcHVibGlzaGVyLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuSW52YWxpZFN1YnNjcmliZXIsICdJbnZhbGlkIHN1YnNjcmliZXIuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5JbnZhbGlkU3Vic2NyaXB0aW9uLCAnSW52YWxpZCBzdWJzY3JpcHRpb24uJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Kb2JEaXNwYXRjaGVyQ3JlYXRpb25GYWlsZWQsICdKb2Igc2VydmljZSBjcmVhdGlvbiBmYWlsZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Kb2JEaXNwYXRjaGVySW52YWxpZFBheWxvYWQsICdJbnZhbGlkIGpvYiBzZXJ2aWNlIHBheWxvYWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Kb2JEaXNwYXRjaGVySm9iTm90Rm91bmQsICdKb2Igc2VydmljZSBqb2Igbm90IGZvdW5kLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuSm9iRGlzcGF0Y2hlck9ic2VydmVyTm90Rm91bmQsICdKb2Igc2VydmljZSBvYnNlcnZlciBub3QgZm91bmQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Kb2JXb3JrZXJDcmVhdGlvbkZhaWxlZCwgJ0pvYiB3b3JrZXIgY3JlYXRpb24gZmFpbGVkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuSm9iV29ya2VySW52YWxpZFR5cGUsICdJbnZhbGlkIGpvYiB3b3JrZXIgdHlwZS4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VDcmVhdGlvbkZhaWxlZCwgJ0tleS12YWx1ZSBkYXRhYmFzZSBjcmVhdGlvbiBmYWlsZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVGFibGVEb2VzTm90RXhpc3QsICdLZXktdmFsdWUgZGF0YWJhc2UgdGFibGUgZG9lcyBub3QgZXhpc3QuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25UYWJsZU5vdEluaXRpYWxpemVkLCAnS2V5LXZhbHVlIGRhdGFiYXNlIHRyYW5zYWN0aW9uIHRhYmxlIG5vdCBpbml0aWFsaXplZC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VUcmFuc2FjdGlvblZhbHVlTm90U2V0LCAnS2V5LXZhbHVlIGRhdGFiYXNlIHRyYW5zYWN0aW9uIHZhbHVlIG5vdCBzZXQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Mb2NhbE1lZGlhU3RyZWFtRG9lc05vdEV4aXN0LCAnTG9jYWwgc3RyZWFtIGRvZXMgbm90IGV4aXN0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuTWlzc2luZ1JlbW90ZUNvbm5lY3Rpb24sICdDb25uZWN0aW9uIGRvZXMgbm90IGV4aXN0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuTWlzc2luZ1N5c3RlbVRvcGljLCAnVGhlIHN5c3RlbSB0b3BpYyBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLk1pc3RsZXRDYXBhY2l0eVJlcG9ydE5vdFNldCwgJ01pc3RsZXQgY2FwYWNpdHkgcmVwb3J0IG5vdCBzZXQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5PYmplY3RTdG9yZUNhbm5vdFdyaXRlVHJhbnNhY3Rpb24sICdDYW5ub3Qgd3JpdGUgdHJhbnNhY3Rpb24uJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5PYmplY3RTdG9yZUludmFsaWRTeW5jTWVzc2FnZSwgJ0ludmFsaWQgb2JqZWN0IHN0b3JlIHN5bmMgbWVzc2FnZS4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN0YXRlLCAnSW52YWxpZCBvYmplY3Qgc3RvcmUgc3RhdGUuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5PYmplY3RTdG9yZU5vdFN5bmNlZCwgJ09iamVjdCBzdG9yZSBub3Qgc3luY2VkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuT3V0Z29pbmdNZWRpYVN0cmVhbU5vVG9waWMsICdPdXRnb2luZyBzdHJlYW0gZG9lcyBub3QgaGF2ZSBhIHRvcGljLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuUmVtb3RlTWVkaWFTdHJlYW1Eb2VzTm90RXhpc3QsICdSZW1vdGUgc3RyZWFtIGRvZXMgbm90IGV4aXN0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuUmVtb3RlTWVkaWFTdHJlYW1NaXNzaW5nUHJvdmlkZXJJZCwgJ1JlbW90ZSBtZWRpYSBzdHJlYW0gaXMgbWlzc2luZyBhIHByb3ZpZGVyIGlkLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuUmVtb3RlQ29ubmVjdGlvbkV4aXN0cywgJ1JlbW90ZSBjb25uZWN0aW9uIGFscmVhZHkgZXhpc3RzLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdERvZXNOb3RFeGlzdCwgJ1N1YnNjcmlwdGlvbiByZXF1ZXN0IGRvZXMgbm90IGV4aXN0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdEZhaWxlZCwgJ1N1YnNjcmlwdGlvbiByZXF1ZXN0IGZhaWxlZC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLlN1YnNjcmlwdGlvblJlcXVlc3ROb0Fuc3dlciwgJ1N1YnNjcmlwdGlvbiByZXF1ZXN0IGhhcyBub3QgYmVlbiBhbnN3ZXJlZC4nXSxcbiAgICBbU0RLSW50ZXJuYWxFcnJvckNvZGVzLk5vZGVEb2VzTm90RXhpc3QsICdOb2RlIGRvZXMgbm90IGV4aXN0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuTm9kZUFscmVhZHlFeGlzdCwgJ05vZGUgYWxyZWFkeSBleGlzdHMuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5QZWVyQ29ubmVjdGlvbkludmFsaWREZXN0aW5hdGlvbiwgJ0ludmFsaWQgcGVlciBjb25uZWN0aW9uIGV2ZW50IGRlc3RpbmF0aW9uLiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuVmVjdG9yRGF0YWJhc2VDcmVhdGlvbkZhaWxlZCwgJ1ZlY3RvciBkYXRhYmFzZSBjcmVhdGlvbiBmYWlsZWQuJ10sXG4gICAgW1NES0ludGVybmFsRXJyb3JDb2Rlcy5Xb3JrZmxvd0RvZXNOb3RFeGlzdCwgJ1dvcmtmbG93IGRvZXMgbm90IGV4aXN0LiddLFxuICAgIFtTREtJbnRlcm5hbEVycm9yQ29kZXMuV29ya2Zsb3dJbnZhbGlkQmxvY2tUeXBlLCAnSW52YWxpZCB3b3JrZmxvdyBibG9jayB0eXBlLiddLFxuXSk7XG5leHBvcnQgY2xhc3MgU0RLSW50ZXJuYWxFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb2RlO1xuICAgIHN0YXRpYyBjb2RlcyA9IFNES0ludGVybmFsRXJyb3JDb2RlcztcbiAgICBkYXRhO1xuICAgIGNvbnN0cnVjdG9yKGNvZGUsIGRhdGEpIHtcbiAgICAgICAgc3VwZXIoYEludGVybmFsIFNESyBFcnJvcjogJHtjb2RlfTogJHttZXNzYWdlcy5nZXQoY29kZSl9XFxuQWRkaXRpb25hbCBkYXRhOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhIHx8IHt9O1xuICAgIH1cbn1cbiIsImV4cG9ydCB2YXIgVHJhY2VUeXBlO1xuKGZ1bmN0aW9uIChUcmFjZVR5cGUpIHtcbiAgICBUcmFjZVR5cGVbXCJBSVRyYWNlXCJdID0gXCJBSVRyYWNlXCI7XG4gICAgVHJhY2VUeXBlW1wiSW5nZXN0VHJhY2VcIl0gPSBcIkluZ2VzdFRyYWNlXCI7XG4gICAgVHJhY2VUeXBlW1wiUmV0cmlldmVUcmFjZVwiXSA9IFwiUmV0cmlldmVUcmFjZVwiO1xuICAgIFRyYWNlVHlwZVtcIldvcmtmbG93VHJhY2VcIl0gPSBcIldvcmtmbG93VHJhY2VcIjtcbn0pKFRyYWNlVHlwZSB8fCAoVHJhY2VUeXBlID0ge30pKTtcbmV4cG9ydCB2YXIgQUlSZXRyaWV2ZVRyYWNlQmxvY2s7XG4oZnVuY3Rpb24gKEFJUmV0cmlldmVUcmFjZUJsb2NrKSB7XG4gICAgQUlSZXRyaWV2ZVRyYWNlQmxvY2tbXCJJbml0aWFsUHJvbXB0XCJdID0gXCJJbml0aWFsUHJvbXB0XCI7XG4gICAgQUlSZXRyaWV2ZVRyYWNlQmxvY2tbXCJFbWJlZGRpbmdWZWN0b3JpemF0aW9uXCJdID0gXCJFbWJlZGRpbmdWZWN0b3JpemF0aW9uXCI7XG4gICAgQUlSZXRyaWV2ZVRyYWNlQmxvY2tbXCJUZXh0TW9kZWxcIl0gPSBcIlRleHRNb2RlbFwiO1xuICAgIEFJUmV0cmlldmVUcmFjZUJsb2NrW1wiVmVjdG9yU2VhcmNoXCJdID0gXCJWZWN0b3JTZWFyY2hcIjtcbiAgICBBSVJldHJpZXZlVHJhY2VCbG9ja1tcIkVudGl0eUV4dHJhY3RvclwiXSA9IFwiRW50aXR5RXh0cmFjdG9yXCI7XG4gICAgQUlSZXRyaWV2ZVRyYWNlQmxvY2tbXCJHcmFwaFNlYXJjaFwiXSA9IFwiR3JhcGhTZWFyY2hcIjtcbiAgICBBSVJldHJpZXZlVHJhY2VCbG9ja1tcIlJlcmFua2VyXCJdID0gXCJSZXJhbmtlclwiO1xuICAgIEFJUmV0cmlldmVUcmFjZUJsb2NrW1wiRmluYWxDb250ZXh0XCJdID0gXCJGaW5hbENvbnRleHRcIjtcbn0pKEFJUmV0cmlldmVUcmFjZUJsb2NrIHx8IChBSVJldHJpZXZlVHJhY2VCbG9jayA9IHt9KSk7XG5leHBvcnQgdmFyIEFJVHJhY2VMZXZlbDtcbihmdW5jdGlvbiAoQUlUcmFjZUxldmVsKSB7XG4gICAgQUlUcmFjZUxldmVsW0FJVHJhY2VMZXZlbFtcIkRlYnVnXCJdID0gMF0gPSBcIkRlYnVnXCI7XG4gICAgQUlUcmFjZUxldmVsW0FJVHJhY2VMZXZlbFtcIkluZm9cIl0gPSA1XSA9IFwiSW5mb1wiO1xuICAgIEFJVHJhY2VMZXZlbFtBSVRyYWNlTGV2ZWxbXCJXYXJuaW5nXCJdID0gMTBdID0gXCJXYXJuaW5nXCI7XG4gICAgQUlUcmFjZUxldmVsW0FJVHJhY2VMZXZlbFtcIkVycm9yXCJdID0gMTVdID0gXCJFcnJvclwiO1xufSkoQUlUcmFjZUxldmVsIHx8IChBSVRyYWNlTGV2ZWwgPSB7fSkpO1xuZXhwb3J0IHZhciBBSVRyYWNlVHlwZTtcbihmdW5jdGlvbiAoQUlUcmFjZVR5cGUpIHtcbiAgICBBSVRyYWNlVHlwZVtcIlJldHJpZXZlXCJdID0gXCJSZXRyaWV2ZVwiO1xuICAgIEFJVHJhY2VUeXBlW1wiSW5nZXN0XCJdID0gXCJJbmdlc3RcIjtcbiAgICBBSVRyYWNlVHlwZVtcIldvcmtmbG93XCJdID0gXCJXb3JrZmxvd1wiO1xufSkoQUlUcmFjZVR5cGUgfHwgKEFJVHJhY2VUeXBlID0ge30pKTtcbi8qXG5Jbmdlc3QgYmxvY2tzXG5cbkNodW5rU3BsaXR0ZXJcbkRvY3VtZW50UGFyc2VyXG5FbnRpdHlFeHRyYWN0b3JcbkdyYXBoRGF0YWJhc2VcbmluZGV4XG5Nb2RlbFxuTmV4dEJsb2NrXG5SZWxhdGlvbkV4dHJhY3RvclxuU2VudGVuY2VTcGxpdHRlclxuVmVjdG9yRGF0YWJhc2VcbldvcmRTcGxpdHRlclxuKi9cbmV4cG9ydCB2YXIgQUlJbmdlc3RUcmFjZUJsb2NrO1xuKGZ1bmN0aW9uIChBSUluZ2VzdFRyYWNlQmxvY2spIHtcbiAgICBBSUluZ2VzdFRyYWNlQmxvY2tbXCJDaHVua1NwbGl0dGVyXCJdID0gXCJDaHVua1NwbGl0dGVyXCI7XG4gICAgQUlJbmdlc3RUcmFjZUJsb2NrW1wiRG9jdW1lbnRQYXJzZXJcIl0gPSBcIkRvY3VtZW50UGFyc2VyXCI7XG4gICAgQUlJbmdlc3RUcmFjZUJsb2NrW1wiRW50aXR5RXh0cmFjdG9yXCJdID0gXCJFbnRpdHlFeHRyYWN0b3JcIjtcbiAgICBBSUluZ2VzdFRyYWNlQmxvY2tbXCJHcmFwaERhdGFiYXNlXCJdID0gXCJHcmFwaERhdGFiYXNlXCI7XG4gICAgQUlJbmdlc3RUcmFjZUJsb2NrW1wiTW9kZWxcIl0gPSBcIk1vZGVsXCI7XG4gICAgQUlJbmdlc3RUcmFjZUJsb2NrW1wiUmVsYXRpb25FeHRyYWN0b3JcIl0gPSBcIlJlbGF0aW9uRXh0cmFjdG9yXCI7XG4gICAgQUlJbmdlc3RUcmFjZUJsb2NrW1wiU2VudGVuY2VTcGxpdHRlclwiXSA9IFwiU2VudGVuY2VTcGxpdHRlclwiO1xuICAgIEFJSW5nZXN0VHJhY2VCbG9ja1tcIlZlY3RvckRhdGFiYXNlXCJdID0gXCJWZWN0b3JEYXRhYmFzZVwiO1xuICAgIEFJSW5nZXN0VHJhY2VCbG9ja1tcIldvcmRTcGxpdHRlclwiXSA9IFwiV29yZFNwbGl0dGVyXCI7XG59KShBSUluZ2VzdFRyYWNlQmxvY2sgfHwgKEFJSW5nZXN0VHJhY2VCbG9jayA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFBlZXJDb25uZWN0aW9uVHlwZTtcbihmdW5jdGlvbiAoUGVlckNvbm5lY3Rpb25UeXBlKSB7XG4gICAgUGVlckNvbm5lY3Rpb25UeXBlW1BlZXJDb25uZWN0aW9uVHlwZVtcIkNvcmVcIl0gPSAwXSA9IFwiQ29yZVwiO1xuICAgIFBlZXJDb25uZWN0aW9uVHlwZVtQZWVyQ29ubmVjdGlvblR5cGVbXCJPcHRpbWl6YXRpb25cIl0gPSAxXSA9IFwiT3B0aW1pemF0aW9uXCI7XG59KShQZWVyQ29ubmVjdGlvblR5cGUgfHwgKFBlZXJDb25uZWN0aW9uVHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUpIHtcbiAgICBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1BlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbXCJPZmZlclwiXSA9IDBdID0gXCJPZmZlclwiO1xuICAgIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtcIkFuc3dlclwiXSA9IDFdID0gXCJBbnN3ZXJcIjtcbiAgICBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1BlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbXCJIYW5kc2hha2VcIl0gPSAyXSA9IFwiSGFuZHNoYWtlXCI7XG4gICAgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1wiU3VjY2Vzc1wiXSA9IDNdID0gXCJTdWNjZXNzXCI7XG4gICAgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1wiTmVlZFJlc3RhcnRcIl0gPSA0XSA9IFwiTmVlZFJlc3RhcnRcIjtcbiAgICBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1BlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbXCJSZXN0YXJ0XCJdID0gNV0gPSBcIlJlc3RhcnRcIjtcbiAgICBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1BlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbXCJEaXNjb25uZWN0XCJdID0gNl0gPSBcIkRpc2Nvbm5lY3RcIjtcbiAgICBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlW1BlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbXCJTdGF0c1wiXSA9IDddID0gXCJTdGF0c1wiO1xuICAgIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGVbUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZVtcIk9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzXCJdID0gOF0gPSBcIk9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzXCI7XG59KShQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIHx8IChQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlID0ge30pKTtcbmV4cG9ydCB2YXIgUGVlckNvbm5lY3Rpb25PcmlnaW47XG4oZnVuY3Rpb24gKFBlZXJDb25uZWN0aW9uT3JpZ2luKSB7XG4gICAgUGVlckNvbm5lY3Rpb25PcmlnaW5bUGVlckNvbm5lY3Rpb25PcmlnaW5bXCJTZW5kZXJcIl0gPSAwXSA9IFwiU2VuZGVyXCI7XG4gICAgUGVlckNvbm5lY3Rpb25PcmlnaW5bUGVlckNvbm5lY3Rpb25PcmlnaW5bXCJSZWNlaXZlclwiXSA9IDFdID0gXCJSZWNlaXZlclwiO1xufSkoUGVlckNvbm5lY3Rpb25PcmlnaW4gfHwgKFBlZXJDb25uZWN0aW9uT3JpZ2luID0ge30pKTtcbiIsImV4cG9ydCB2YXIgQ29udGVudE1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChDb250ZW50TWVzc2FnZVR5cGUpIHtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiUHVibGlzaE1lZGlhU3RyZWFtXCJdID0gMF0gPSBcIlB1Ymxpc2hNZWRpYVN0cmVhbVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJVbnB1Ymxpc2hNZWRpYVN0cmVhbVwiXSA9IDFdID0gXCJVbnB1Ymxpc2hNZWRpYVN0cmVhbVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJTdWJzY3JpYmVNZWRpYVN0cmVhbVwiXSA9IDJdID0gXCJTdWJzY3JpYmVNZWRpYVN0cmVhbVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJVcGRhdGVNZWRpYVN0cmVhbVwiXSA9IDNdID0gXCJVcGRhdGVNZWRpYVN0cmVhbVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJVbnN1YnNjcmliZU1lZGlhU3RyZWFtXCJdID0gNF0gPSBcIlVuc3Vic2NyaWJlTWVkaWFTdHJlYW1cIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiQ2xvc2VKb2JEaXNwYXRjaGVyXCJdID0gNV0gPSBcIkNsb3NlSm9iRGlzcGF0Y2hlclwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJDbG9zZUpvYldvcmtlclwiXSA9IDZdID0gXCJDbG9zZUpvYldvcmtlclwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJDbG9zZU9iamVjdFN0b3JlQnVja2V0XCJdID0gN10gPSBcIkNsb3NlT2JqZWN0U3RvcmVCdWNrZXRcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiQ2xvc2VLZXlWYWx1ZURhdGFiYXNlXCJdID0gOF0gPSBcIkNsb3NlS2V5VmFsdWVEYXRhYmFzZVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJDbG9zZVB1YlN1YlRvcGljXCJdID0gOV0gPSBcIkNsb3NlUHViU3ViVG9waWNcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiQ2xvc2VNZWRpYVN0cmVhbVwiXSA9IDEwXSA9IFwiQ2xvc2VNZWRpYVN0cmVhbVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJDbG9zZVZlY3RvckRhdGFiYXNlXCJdID0gMTFdID0gXCJDbG9zZVZlY3RvckRhdGFiYXNlXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIkNsb3NlR3JhcGhEYXRhYmFzZVwiXSA9IDEyXSA9IFwiQ2xvc2VHcmFwaERhdGFiYXNlXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIkxvY2FsTWVkaWFTdHJlYW1UcmFja0ZhaWxcIl0gPSAxM10gPSBcIkxvY2FsTWVkaWFTdHJlYW1UcmFja0ZhaWxcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiUmVtb3RlTWVkaWFTdHJlYW1UcmFja0ZhaWxcIl0gPSAxNF0gPSBcIlJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIlJlcXVlc3RTeW5jS2V5VmFsdWVEYXRhYmFzZVwiXSA9IDE1XSA9IFwiUmVxdWVzdFN5bmNLZXlWYWx1ZURhdGFiYXNlXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIlNlbmRUcmFuc2FjdGlvbnNEdW1wXCJdID0gMTZdID0gXCJTZW5kVHJhbnNhY3Rpb25zRHVtcFwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJSZXF1ZXN0VHJhbnNhY3Rpb25zVmFsdWVcIl0gPSAxN10gPSBcIlJlcXVlc3RUcmFuc2FjdGlvbnNWYWx1ZVwiO1xuICAgIENvbnRlbnRNZXNzYWdlVHlwZVtDb250ZW50TWVzc2FnZVR5cGVbXCJQdWJTdWJUb3BpY1N0YXRzXCJdID0gMThdID0gXCJQdWJTdWJUb3BpY1N0YXRzXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIk9iamVjdFN0b3JlU3RhdHNcIl0gPSAxOV0gPSBcIk9iamVjdFN0b3JlU3RhdHNcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiS2V5VmFsdWVEYXRhYmFzZVN0YXRzXCJdID0gMjBdID0gXCJLZXlWYWx1ZURhdGFiYXNlU3RhdHNcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiR2VuZXJhdGl2ZUFJQ29udGV4dFN0YXRzXCJdID0gMjFdID0gXCJHZW5lcmF0aXZlQUlDb250ZXh0U3RhdHNcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiR2VuZXJhdGl2ZUFJV29ya2VyU3RhdHNcIl0gPSAyMl0gPSBcIkdlbmVyYXRpdmVBSVdvcmtlclN0YXRzXCI7XG4gICAgQ29udGVudE1lc3NhZ2VUeXBlW0NvbnRlbnRNZXNzYWdlVHlwZVtcIlZlY3RvckRhdGFiYXNlU3RhdHNcIl0gPSAyM10gPSBcIlZlY3RvckRhdGFiYXNlU3RhdHNcIjtcbiAgICBDb250ZW50TWVzc2FnZVR5cGVbQ29udGVudE1lc3NhZ2VUeXBlW1wiR3JhcGhEYXRhYmFzZVN0YXRzXCJdID0gMjRdID0gXCJHcmFwaERhdGFiYXNlU3RhdHNcIjtcbn0pKENvbnRlbnRNZXNzYWdlVHlwZSB8fCAoQ29udGVudE1lc3NhZ2VUeXBlID0ge30pKTtcbiIsImV4cG9ydCB2YXIgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb247XG4oZnVuY3Rpb24gKEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uKSB7XG4gICAgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb25bXCJGaWxlV3JpdGVcIl0gPSBcImZpbGUtd3JpdGVcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbltcIkZvbGRlckNyZWF0ZVwiXSA9IFwiZm9sZGVyLWNyZWF0ZVwiO1xuICAgIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uW1wiRGVsZXRlXCJdID0gXCJkZWxldGVcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbltcIk1vdmVcIl0gPSBcIm1vdmVcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbltcIlJlcXVlc3RGaWxlXCJdID0gXCJyZXF1ZXN0LWZpbGVcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbltcIlJlcXVlc3RBY2NlcHRlZFwiXSA9IFwicmVxdWVzdC1hY2NlcHRlZFwiO1xuICAgIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uW1wiUmVxdWVzdEZpbGVTeW5jXCJdID0gXCJyZXF1ZXN0LWZpbGUtc3luY1wiO1xuICAgIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uW1wiUmVxdWVzdEZpbGVXcml0ZVwiXSA9IFwicmVxdWVzdC1maWxlLXdyaXRlXCI7XG59KShJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbiB8fCAoSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24gPSB7fSkpO1xuZXhwb3J0IHZhciBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZFR5cGU7XG4oZnVuY3Rpb24gKEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZSkge1xuICAgIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZVtcIlJlcXVlc3RcIl0gPSBcInJlcXVlc3RcIjtcbiAgICBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZFR5cGVbXCJUcmFuc2FjdGlvblwiXSA9IFwidHJhbnNhY3Rpb25cIjtcbn0pKEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZSB8fCAoSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlID0ge30pKTtcbmV4cG9ydCB2YXIgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb247XG4oZnVuY3Rpb24gKEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uKSB7XG4gICAgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb25bXCJBZGRcIl0gPSBcImFkZFwiO1xuICAgIEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uW1wiVXBkYXRlXCJdID0gXCJ1cGRhdGVcIjtcbiAgICBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbltcIkRlbGV0ZVwiXSA9IFwiZGVsZXRlXCI7XG59KShJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbiB8fCAoSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24gPSB7fSkpO1xuZXhwb3J0IHZhciBJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uO1xuKGZ1bmN0aW9uIChJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uKSB7XG4gICAgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbltcIkdldFwiXSA9IFwiZ2V0XCI7XG4gICAgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbltcIkxpc3RcIl0gPSBcImxpc3RcIjtcbiAgICBJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uW1wiQ291bnRcIl0gPSBcImNvdW50XCI7XG59KShJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uIHx8IChJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uID0ge30pKTtcbmV4cG9ydCB2YXIgSW50ZXJuYWxKb2JQaGFzZTtcbihmdW5jdGlvbiAoSW50ZXJuYWxKb2JQaGFzZSkge1xuICAgIEludGVybmFsSm9iUGhhc2VbSW50ZXJuYWxKb2JQaGFzZVtcIlJlcXVlc3RcIl0gPSAwXSA9IFwiUmVxdWVzdFwiO1xuICAgIEludGVybmFsSm9iUGhhc2VbSW50ZXJuYWxKb2JQaGFzZVtcIkJpZFwiXSA9IDFdID0gXCJCaWRcIjtcbiAgICBJbnRlcm5hbEpvYlBoYXNlW0ludGVybmFsSm9iUGhhc2VbXCJBdHRyaWJ1dGlvblwiXSA9IDJdID0gXCJBdHRyaWJ1dGlvblwiO1xuICAgIEludGVybmFsSm9iUGhhc2VbSW50ZXJuYWxKb2JQaGFzZVtcIlBhcnRpYWxSZXN1bHRcIl0gPSAzXSA9IFwiUGFydGlhbFJlc3VsdFwiO1xuICAgIEludGVybmFsSm9iUGhhc2VbSW50ZXJuYWxKb2JQaGFzZVtcIlJlc3VsdFwiXSA9IDRdID0gXCJSZXN1bHRcIjtcbiAgICBJbnRlcm5hbEpvYlBoYXNlW0ludGVybmFsSm9iUGhhc2VbXCJGYWlsZWRcIl0gPSA1XSA9IFwiRmFpbGVkXCI7XG59KShJbnRlcm5hbEpvYlBoYXNlIHx8IChJbnRlcm5hbEpvYlBoYXNlID0ge30pKTtcbiIsImV4cG9ydCB2YXIgSXNzdWVUeXBlO1xuKGZ1bmN0aW9uIChJc3N1ZVR5cGUpIHtcbiAgICBJc3N1ZVR5cGVbXCJTVFZvbGF0aWxpdHlcIl0gPSBcInN0X3ZvbGF0aWxpdHlcIjtcbiAgICBJc3N1ZVR5cGVbXCJEVFZvbGF0aWxpdHlcIl0gPSBcImR0X3ZvbGF0aWxpdHlcIjtcbiAgICBJc3N1ZVR5cGVbXCJUaW1lUGVyRnJhbWVcIl0gPSBcInRpbWVfcGVyX2ZyYW1lXCI7XG4gICAgSXNzdWVUeXBlW1wiQml0cmF0ZVwiXSA9IFwiYml0cmF0ZVwiO1xuICAgIElzc3VlVHlwZVtcIkppdHRlclwiXSA9IFwiaml0dGVyXCI7XG4gICAgSXNzdWVUeXBlW1wiRnJhbWVQZXJTZWNvbmRcIl0gPSBcImZwc1wiO1xuICAgIElzc3VlVHlwZVtcIlJvdW5kVHJpcFRpbWVcIl0gPSBcInJ0dFwiO1xuICAgIElzc3VlVHlwZVtcIkF1ZGlvVmlkZW9EZWxheVwiXSA9IFwiYXZfZGVsYXlcIjtcbn0pKElzc3VlVHlwZSB8fCAoSXNzdWVUeXBlID0ge30pKTtcbmV4cG9ydCB2YXIgUHJvYmxlbVR5cGU7XG4oZnVuY3Rpb24gKFByb2JsZW1UeXBlKSB7XG4gICAgUHJvYmxlbVR5cGVbXCJDUFVDeWNsZVwiXSA9IFwiY3B1LmN5Y2xlXCI7XG4gICAgUHJvYmxlbVR5cGVbXCJUaW1lUGVyRnJhbWVcIl0gPSBcImNwdS50aW1lX3Blcl9mcmFtZVwiO1xuICAgIFByb2JsZW1UeXBlW1wiQXVkaW9WaWRlb0RlbGF5XCJdID0gXCJjcHUuYXZfZGVsYXlcIjtcbiAgICBQcm9ibGVtVHlwZVtcIkZyYW1lUGVyU2Vjb25kXCJdID0gXCJjcHUuZnBzXCI7XG4gICAgUHJvYmxlbVR5cGVbXCJCaXRyYXRlXCJdID0gXCJiYW5kd2lkdGguYml0cmF0ZVwiO1xuICAgIFByb2JsZW1UeXBlW1wiSml0dGVyXCJdID0gXCJiYW5kd2lkdGguaml0dGVyXCI7XG4gICAgUHJvYmxlbVR5cGVbXCJSb3VuZFRyaXBUaW1lXCJdID0gXCJiYW5kd2lkdGgucnR0XCI7XG59KShQcm9ibGVtVHlwZSB8fCAoUHJvYmxlbVR5cGUgPSB7fSkpO1xuZXhwb3J0IHZhciBEZXRlY3Rpb25NZXNzYWdlVHlwZTtcbihmdW5jdGlvbiAoRGV0ZWN0aW9uTWVzc2FnZVR5cGUpIHtcbiAgICBEZXRlY3Rpb25NZXNzYWdlVHlwZVtEZXRlY3Rpb25NZXNzYWdlVHlwZVtcIlByb2JsZW1cIl0gPSAwXSA9IFwiUHJvYmxlbVwiO1xufSkoRGV0ZWN0aW9uTWVzc2FnZVR5cGUgfHwgKERldGVjdGlvbk1lc3NhZ2VUeXBlID0ge30pKTtcbiIsImV4cG9ydCB2YXIgTm9kZVN0YXR1cztcbihmdW5jdGlvbiAoTm9kZVN0YXR1cykge1xuICAgIE5vZGVTdGF0dXNbTm9kZVN0YXR1c1tcIk9ubGluZVwiXSA9IDBdID0gXCJPbmxpbmVcIjtcbiAgICBOb2RlU3RhdHVzW05vZGVTdGF0dXNbXCJPZmZsaW5lXCJdID0gMV0gPSBcIk9mZmxpbmVcIjtcbn0pKE5vZGVTdGF0dXMgfHwgKE5vZGVTdGF0dXMgPSB7fSkpO1xuO1xuIiwiZXhwb3J0IHZhciBOb2RlTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKE5vZGVNZXNzYWdlVHlwZSkge1xuICAgIE5vZGVNZXNzYWdlVHlwZVtOb2RlTWVzc2FnZVR5cGVbXCJOb2RlSm9pblwiXSA9IDBdID0gXCJOb2RlSm9pblwiO1xuICAgIE5vZGVNZXNzYWdlVHlwZVtOb2RlTWVzc2FnZVR5cGVbXCJOb2RlVXBkYXRlXCJdID0gMV0gPSBcIk5vZGVVcGRhdGVcIjtcbiAgICBOb2RlTWVzc2FnZVR5cGVbTm9kZU1lc3NhZ2VUeXBlW1wiTm9kZUNvbm5lY3Rpb25zVXBkYXRlXCJdID0gMl0gPSBcIk5vZGVDb25uZWN0aW9uc1VwZGF0ZVwiO1xuICAgIE5vZGVNZXNzYWdlVHlwZVtOb2RlTWVzc2FnZVR5cGVbXCJOb2RlTGVhdmVcIl0gPSAzXSA9IFwiTm9kZUxlYXZlXCI7XG59KShOb2RlTWVzc2FnZVR5cGUgfHwgKE5vZGVNZXNzYWdlVHlwZSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFJlbWVkaWF0aW9uTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUpIHtcbiAgICBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlW1JlbWVkaWF0aW9uTWVzc2FnZVR5cGVbXCJSZW1lZGlhdGlvblwiXSA9IDBdID0gXCJSZW1lZGlhdGlvblwiO1xuICAgIFJlbWVkaWF0aW9uTWVzc2FnZVR5cGVbUmVtZWRpYXRpb25NZXNzYWdlVHlwZVtcIlJlbW90ZVJlbWVkaWF0aW9uXCJdID0gMV0gPSBcIlJlbW90ZVJlbWVkaWF0aW9uXCI7XG59KShSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlIHx8IChSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlID0ge30pKTtcbmV4cG9ydCB2YXIgUmVtZWRpYXRpb25BY3Rpb247XG4oZnVuY3Rpb24gKFJlbWVkaWF0aW9uQWN0aW9uKSB7XG4gICAgUmVtZWRpYXRpb25BY3Rpb25bXCJVcGdyYWRlXCJdID0gXCJ1cGdyYWRlXCI7XG4gICAgUmVtZWRpYXRpb25BY3Rpb25bXCJEb3duZ3JhZGVcIl0gPSBcImRvd25ncmFkZVwiO1xufSkoUmVtZWRpYXRpb25BY3Rpb24gfHwgKFJlbWVkaWF0aW9uQWN0aW9uID0ge30pKTtcbmV4cG9ydCB2YXIgUmVtZWRpYXRpb25Db21wb25lbnQ7XG4oZnVuY3Rpb24gKFJlbWVkaWF0aW9uQ29tcG9uZW50KSB7XG4gICAgUmVtZWRpYXRpb25Db21wb25lbnRbXCJSZXNvbHV0aW9uXCJdID0gXCJyZXNvbHV0aW9uXCI7XG4gICAgUmVtZWRpYXRpb25Db21wb25lbnRbXCJCaXRyYXRlXCJdID0gXCJiaXRyYXRlXCI7XG59KShSZW1lZGlhdGlvbkNvbXBvbmVudCB8fCAoUmVtZWRpYXRpb25Db21wb25lbnQgPSB7fSkpO1xuIiwiZXhwb3J0IHZhciBJSW50ZXJuYWxGZWF0dXJlcztcbihmdW5jdGlvbiAoSUludGVybmFsRmVhdHVyZXMpIHtcbiAgICBJSW50ZXJuYWxGZWF0dXJlc1tcIk1lZGlhU3RyZWFtXCJdID0gXCJtZWRpYS1zdHJlYW1cIjtcbn0pKElJbnRlcm5hbEZlYXR1cmVzIHx8IChJSW50ZXJuYWxGZWF0dXJlcyA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFdvcmtmbG93QmxvY2tUeXBlO1xuKGZ1bmN0aW9uIChXb3JrZmxvd0Jsb2NrVHlwZSkge1xuICAgIFdvcmtmbG93QmxvY2tUeXBlW1wiQWdlbnRcIl0gPSBcImFnZW50XCI7XG4gICAgV29ya2Zsb3dCbG9ja1R5cGVbXCJEYXRhQ29sbGVjdGlvblwiXSA9IFwiZGF0YS1jb2xsZWN0aW9uXCI7XG4gICAgV29ya2Zsb3dCbG9ja1R5cGVbXCJQcm9tcHRcIl0gPSBcInByb21wdFwiO1xuICAgIFdvcmtmbG93QmxvY2tUeXBlW1wiQW5zd2VyXCJdID0gXCJhbnN3ZXJcIjtcbiAgICBXb3JrZmxvd0Jsb2NrVHlwZVtcIlRpbWVcIl0gPSBcInRpbWVcIjtcbiAgICBXb3JrZmxvd0Jsb2NrVHlwZVtcIkNvZGVcIl0gPSBcImNvZGVcIjtcbiAgICBXb3JrZmxvd0Jsb2NrVHlwZVtcIlNlYXJjaFwiXSA9IFwic2VhcmNoXCI7XG4gICAgV29ya2Zsb3dCbG9ja1R5cGVbXCJXZWJTY3JhcGVyXCJdID0gXCJ3ZWItc2NyYXBlclwiO1xufSkoV29ya2Zsb3dCbG9ja1R5cGUgfHwgKFdvcmtmbG93QmxvY2tUeXBlID0ge30pKTtcbmV4cG9ydCB2YXIgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGU7XG4oZnVuY3Rpb24gKERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlKSB7XG4gICAgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGVbXCJPYmplY3RTdG9yYWdlVXBsb2FkXCJdID0gXCJvYmplY3Qtc3RvcmFnZS11cGxvYWRcIjtcbiAgICBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZVtcIkRvY3VtZW50UGFyc2VyXCJdID0gXCJkb2N1bWVudC1wYXJzZXJcIjtcbiAgICBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZVtcIkNodW5rU3BsaXR0ZXJcIl0gPSBcImNodW5rLXNwbGl0dGVyXCI7XG4gICAgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGVbXCJXb3JkU3BsaXR0ZXJcIl0gPSBcIndvcmQtc3BsaXR0ZXJcIjtcbiAgICBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZVtcIlNlbnRlbmNlU3BsaXR0ZXJcIl0gPSBcInNlbnRlbmNlLXNwbGl0dGVyXCI7XG4gICAgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGVbXCJSZWxhdGlvbkV4dHJhY3RvclwiXSA9IFwicmVsYXRpb24tZXh0cmFjdG9yXCI7XG4gICAgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGVbXCJFbnRpdHlFeHRyYWN0b3JcIl0gPSBcImVudGl0eS1leHRyYWN0b3JcIjtcbiAgICBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZVtcIlJlcmFua2VyXCJdID0gXCJyZXJhbmtlclwiO1xuICAgIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlW1wiTW9kZWxcIl0gPSBcIm1vZGVsXCI7XG4gICAgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGVbXCJPYmplY3RTdG9yYWdlQnVja2V0XCJdID0gXCJvYmplY3Qtc3RvcmFnZVwiO1xuICAgIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlW1wiS2V5VmFsdWVEYXRhYmFzZVwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlXCI7XG4gICAgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGVbXCJWZWN0b3JEYXRhYmFzZVwiXSA9IFwidmVjdG9yLWRhdGFiYXNlXCI7XG4gICAgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGVbXCJHcmFwaERhdGFiYXNlXCJdID0gXCJncmFwaC1kYXRhYmFzZVwiO1xuICAgIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlW1wiUHJvbXB0XCJdID0gXCJwcm9tcHRcIjtcbiAgICBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZVtcIkNvbnRleHRcIl0gPSBcImNvbnRleHRcIjtcbn0pKERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlIHx8IChEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIEJsb2NrTGlua1R5cGU7XG4oZnVuY3Rpb24gKEJsb2NrTGlua1R5cGUpIHtcbiAgICBCbG9ja0xpbmtUeXBlW1wiRmlsZVwiXSA9IFwiZmlsZVwiO1xuICAgIEJsb2NrTGlua1R5cGVbXCJUZXh0XCJdID0gXCJ0ZXh0XCI7XG4gICAgQmxvY2tMaW5rVHlwZVtcIkltYWdlXCJdID0gXCJpbWFnZVwiO1xuICAgIEJsb2NrTGlua1R5cGVbXCJBdWRpb1wiXSA9IFwiYXVkaW9cIjtcbiAgICBCbG9ja0xpbmtUeXBlW1wiRGF0YVwiXSA9IFwiZGF0YVwiO1xuICAgIEJsb2NrTGlua1R5cGVbXCJWZWN0b3JcIl0gPSBcInZlY3RvclwiO1xuICAgIEJsb2NrTGlua1R5cGVbXCJFbnRpdHlcIl0gPSBcImVudGl0eVwiO1xuICAgIEJsb2NrTGlua1R5cGVbXCJSZWxhdGlvblwiXSA9IFwicmVsYXRpb25cIjtcbiAgICBCbG9ja0xpbmtUeXBlW1wiU2VhcmNoXCJdID0gXCJzZWFyY2hcIjtcbiAgICBCbG9ja0xpbmtUeXBlW1wiSW5kZXhcIl0gPSBcImluZGV4XCI7XG4gICAgQmxvY2tMaW5rVHlwZVtcIktub3dsZWRnZVwiXSA9IFwia25vd2xlZGdlXCI7XG4gICAgQmxvY2tMaW5rVHlwZVtcIlNraWxsXCJdID0gXCJza2lsbFwiO1xufSkoQmxvY2tMaW5rVHlwZSB8fCAoQmxvY2tMaW5rVHlwZSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFN0YXRzTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKFN0YXRzTWVzc2FnZVR5cGUpIHtcbiAgICBTdGF0c01lc3NhZ2VUeXBlW1N0YXRzTWVzc2FnZVR5cGVbXCJTdHJlYW1SZXBvcnRcIl0gPSAwXSA9IFwiU3RyZWFtUmVwb3J0XCI7XG4gICAgU3RhdHNNZXNzYWdlVHlwZVtTdGF0c01lc3NhZ2VUeXBlW1wiTG9jYWxSZXBvcnRcIl0gPSAxXSA9IFwiTG9jYWxSZXBvcnRcIjtcbn0pKFN0YXRzTWVzc2FnZVR5cGUgfHwgKFN0YXRzTWVzc2FnZVR5cGUgPSB7fSkpO1xuIiwiZXhwb3J0IHZhciBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbjtcbihmdW5jdGlvbiAoTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24pIHtcbiAgICBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltcIkFkZFwiXSA9IDBdID0gXCJBZGRcIjtcbiAgICBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltcIlJlbW92ZVwiXSA9IDFdID0gXCJSZW1vdmVcIjtcbiAgICBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltcIlVwZGF0ZVwiXSA9IDJdID0gXCJVcGRhdGVcIjtcbiAgICBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltcIlJlbW90ZUFkZFwiXSA9IDNdID0gXCJSZW1vdGVBZGRcIjtcbiAgICBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbltcIlJlbW90ZVJlbW92ZVwiXSA9IDRdID0gXCJSZW1vdGVSZW1vdmVcIjtcbn0pKE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uIHx8IChNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbiA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlO1xuKGZ1bmN0aW9uIChTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZSkge1xuICAgIFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlW1N1YnNjcmlwdGlvblJlcXVlc3RUeXBlW1wiV2FpdGluZ1wiXSA9IDBdID0gXCJXYWl0aW5nXCI7XG4gICAgU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGVbU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGVbXCJBY2NlcHRlZFwiXSA9IDFdID0gXCJBY2NlcHRlZFwiO1xuICAgIFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlW1N1YnNjcmlwdGlvblJlcXVlc3RUeXBlW1wiUmVqZWN0ZWRcIl0gPSAyXSA9IFwiUmVqZWN0ZWRcIjtcbn0pKFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlIHx8IChTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIFN1YnNjcmlwdGlvblR5cGU7XG4oZnVuY3Rpb24gKFN1YnNjcmlwdGlvblR5cGUpIHtcbiAgICBTdWJzY3JpcHRpb25UeXBlW1wiSW5jb21pbmdcIl0gPSBcImluXCI7XG4gICAgU3Vic2NyaXB0aW9uVHlwZVtcIk91dGdvaW5nXCJdID0gXCJvdXRcIjtcbn0pKFN1YnNjcmlwdGlvblR5cGUgfHwgKFN1YnNjcmlwdGlvblR5cGUgPSB7fSkpO1xuO1xuIiwiZXhwb3J0IHZhciBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZTtcbihmdW5jdGlvbiAoU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUpIHtcbiAgICBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtcIlN1YnNjcmliZU1lZGlhU3RyZWFtXCJdID0gMF0gPSBcIlN1YnNjcmliZU1lZGlhU3RyZWFtXCI7XG4gICAgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbXCJVcGRhdGVNZWRpYVN0cmVhbVwiXSA9IDFdID0gXCJVcGRhdGVNZWRpYVN0cmVhbVwiO1xuICAgIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1N1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlW1wiVW5zdWJzY3JpYmVNZWRpYVN0cmVhbVwiXSA9IDJdID0gXCJVbnN1YnNjcmliZU1lZGlhU3RyZWFtXCI7XG4gICAgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbXCJOZWVkTWVkaWFTdHJlYW1cIl0gPSAzXSA9IFwiTmVlZE1lZGlhU3RyZWFtXCI7XG4gICAgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGVbXCJSZXN0YXJ0TmVlZE1lZGlhU3RyZWFtXCJdID0gNF0gPSBcIlJlc3RhcnROZWVkTWVkaWFTdHJlYW1cIjtcbiAgICBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtcIkNhblByb3ZpZGVNZWRpYVN0cmVhbVwiXSA9IDVdID0gXCJDYW5Qcm92aWRlTWVkaWFTdHJlYW1cIjtcbiAgICBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtcIkNhbm5vdFByb3ZpZGVNZWRpYVN0cmVhbVwiXSA9IDZdID0gXCJDYW5ub3RQcm92aWRlTWVkaWFTdHJlYW1cIjtcbiAgICBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtTdWJzY3JpcHRpb25NZXNzYWdlVHlwZVtcIk1lZGlhU3RyZWFtVW5hdmFpbGFibGVcIl0gPSA3XSA9IFwiTWVkaWFTdHJlYW1VbmF2YWlsYWJsZVwiO1xufSkoU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfHwgKFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlID0ge30pKTtcbiIsImV4cG9ydCB2YXIgU3lzdGVtTWVzc2FnZVR5cGU7XG4oZnVuY3Rpb24gKFN5c3RlbU1lc3NhZ2VUeXBlKSB7XG4gICAgU3lzdGVtTWVzc2FnZVR5cGVbU3lzdGVtTWVzc2FnZVR5cGVbXCJQZWVyQ29ubmVjdGlvblwiXSA9IDBdID0gXCJQZWVyQ29ubmVjdGlvblwiO1xuICAgIFN5c3RlbU1lc3NhZ2VUeXBlW1N5c3RlbU1lc3NhZ2VUeXBlW1wiTm9kZVwiXSA9IDFdID0gXCJOb2RlXCI7XG4gICAgU3lzdGVtTWVzc2FnZVR5cGVbU3lzdGVtTWVzc2FnZVR5cGVbXCJDb250ZW50XCJdID0gMl0gPSBcIkNvbnRlbnRcIjtcbiAgICBTeXN0ZW1NZXNzYWdlVHlwZVtTeXN0ZW1NZXNzYWdlVHlwZVtcIlN1YnNjcmlwdGlvblwiXSA9IDNdID0gXCJTdWJzY3JpcHRpb25cIjtcbiAgICBTeXN0ZW1NZXNzYWdlVHlwZVtTeXN0ZW1NZXNzYWdlVHlwZVtcIlN0YXRzXCJdID0gNF0gPSBcIlN0YXRzXCI7XG4gICAgU3lzdGVtTWVzc2FnZVR5cGVbU3lzdGVtTWVzc2FnZVR5cGVbXCJEZXRlY3Rpb25cIl0gPSA1XSA9IFwiRGV0ZWN0aW9uXCI7XG4gICAgU3lzdGVtTWVzc2FnZVR5cGVbU3lzdGVtTWVzc2FnZVR5cGVbXCJSZW1lZGlhdGlvblwiXSA9IDZdID0gXCJSZW1lZGlhdGlvblwiO1xufSkoU3lzdGVtTWVzc2FnZVR5cGUgfHwgKFN5c3RlbU1lc3NhZ2VUeXBlID0ge30pKTtcbiIsImV4cG9ydCB2YXIgTG9nZ2luZ1NlcnZpY2VzO1xuKGZ1bmN0aW9uIChMb2dnaW5nU2VydmljZXMpIHtcbiAgICBMb2dnaW5nU2VydmljZXNbXCJQdWJTdWJcIl0gPSBcInB1YnN1YlwiO1xuICAgIExvZ2dpbmdTZXJ2aWNlc1tcIk9iamVjdFN0b3JhZ2VcIl0gPSBcIm9iamVjdC1zdG9yYWdlXCI7XG4gICAgTG9nZ2luZ1NlcnZpY2VzW1wiS2V5VmFsdWVEYXRhYmFzZVwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlXCI7XG4gICAgTG9nZ2luZ1NlcnZpY2VzW1wiVmVjdG9yRGF0YWJhc2VcIl0gPSBcInZlY3Rvci1kYXRhYmFzZVwiO1xuICAgIExvZ2dpbmdTZXJ2aWNlc1tcIkdyYXBoRGF0YWJhc2VcIl0gPSBcImdyYXBoLWRhdGFiYXNlXCI7XG4gICAgTG9nZ2luZ1NlcnZpY2VzW1wiTWVkaWFTdHJlYW1cIl0gPSBcIm1lZGlhLXN0cmVhbVwiO1xuICAgIExvZ2dpbmdTZXJ2aWNlc1tcIkdlbmVyYXRpdmVBSUNvbnRleHRcIl0gPSBcImdlbmVyYXRpdmUtYWlcIjtcbn0pKExvZ2dpbmdTZXJ2aWNlcyB8fCAoTG9nZ2luZ1NlcnZpY2VzID0ge30pKTtcbjtcbmV4cG9ydCB2YXIgTG9nZ2luZ0NoYW5uZWxzO1xuKGZ1bmN0aW9uIChMb2dnaW5nQ2hhbm5lbHMpIHtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJBbGxcIl0gPSBcImFsbFwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIkRlZmF1bHRcIl0gPSBcImRlZmF1bHRcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJDb25uZWN0aW9uXCJdID0gXCJjb25uZWN0aW9uXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiQ29ubmVjdGlvblN0YXRlXCJdID0gXCJjb25uZWN0aW9uLXN0YXRlXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiQ2x1c3RlclwiXSA9IFwiY2x1c3RlclwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIkNvbnRlbnRcIl0gPSBcImNvbnRlbnRcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJEYXRhU3RyZWFtXCJdID0gXCJkYXRhLXN0cmVhbVwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIkRldGVjdGlvblwiXSA9IFwiZGV0ZWN0aW9uXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiRXZlbnRzXCJdID0gXCJldmVudHNcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJFcnJvclwiXSA9IFwiZXJyb3JcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJKb2JzXCJdID0gXCJqb2JzXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiTm9kZVwiXSA9IFwibm9kZVwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlBvb2xcIl0gPSBcInBvb2xcIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJQdWJTdWJcIl0gPSBcInB1YnN1YlwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlJlbWVkaWF0aW9uXCJdID0gXCJyZW1lZGlhdGlvblwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlNpZ25hbGluZ1wiXSA9IFwic2lnbmFsaW5nXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiU3RhdHNcIl0gPSBcInN0YXRzXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiU3Vic2NyaXB0aW9uXCJdID0gXCJzdWJzY3JpcHRpb25cIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJTdXBwb3J0XCJdID0gXCJzdXBwb3J0XCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiU3lzdGVtXCJdID0gXCJzeXN0ZW1cIjtcbiAgICBMb2dnaW5nQ2hhbm5lbHNbXCJTeXN0ZW1TdGF0c1wiXSA9IFwic3lzdGVtLXN0YXRzXCI7XG4gICAgTG9nZ2luZ0NoYW5uZWxzW1wiVGVzdFBhZ2VcIl0gPSBcInRlc3QtcGFnZVwiO1xuICAgIExvZ2dpbmdDaGFubmVsc1tcIlBlZXJDb25uZWN0aW9uXCJdID0gXCJwZWVyLWNvbm5lY3Rpb25cIjtcbn0pKExvZ2dpbmdDaGFubmVscyB8fCAoTG9nZ2luZ0NoYW5uZWxzID0ge30pKTtcbiIsImV4cG9ydCB2YXIgUXVldWVFbGVtZW50UHJpb3JpdHk7XG4oZnVuY3Rpb24gKFF1ZXVlRWxlbWVudFByaW9yaXR5KSB7XG4gICAgUXVldWVFbGVtZW50UHJpb3JpdHlbUXVldWVFbGVtZW50UHJpb3JpdHlbXCJIaWdoXCJdID0gMF0gPSBcIkhpZ2hcIjtcbiAgICBRdWV1ZUVsZW1lbnRQcmlvcml0eVtRdWV1ZUVsZW1lbnRQcmlvcml0eVtcIk1lZGl1bVwiXSA9IDFdID0gXCJNZWRpdW1cIjtcbiAgICBRdWV1ZUVsZW1lbnRQcmlvcml0eVtRdWV1ZUVsZW1lbnRQcmlvcml0eVtcIkxvd1wiXSA9IDJdID0gXCJMb3dcIjtcbn0pKFF1ZXVlRWxlbWVudFByaW9yaXR5IHx8IChRdWV1ZUVsZW1lbnRQcmlvcml0eSA9IHt9KSk7XG4iLCJleHBvcnQgdmFyIFN1cHBvcnRGZWF0dXJlTmFtZTtcbihmdW5jdGlvbiAoU3VwcG9ydEZlYXR1cmVOYW1lKSB7XG4gICAgU3VwcG9ydEZlYXR1cmVOYW1lW1wiQXVkaW9Db250ZXh0XCJdID0gXCJBdWRpb0NvbnRleHRcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJBdWRpb091dHB1dFwiXSA9IFwiQXVkaW9PdXRwdXRcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJBdWRpb1ZvbHVtZVwiXSA9IFwiQXVkaW9Wb2x1bWVcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJCYWNrZ3JvdW5kc1wiXSA9IFwiQmFja2dyb3VuZHNcIjtcbiAgICBTdXBwb3J0RmVhdHVyZU5hbWVbXCJEZXZpY2VDb25maWdcIl0gPSBcIkRldmljZUNvbmZpZ1wiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIk1lZGlhU3RyZWFtXCJdID0gXCJNZWRpYVN0cmVhbVwiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIlJlY29yZGluZ1wiXSA9IFwiUmVjb3JkaW5nXCI7XG4gICAgU3VwcG9ydEZlYXR1cmVOYW1lW1wiU2NyZWVuU2hhcmluZ1wiXSA9IFwiU2NyZWVuU2hhcmluZ1wiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIldlYkdMXCJdID0gXCJXZWJHTFwiO1xuICAgIFN1cHBvcnRGZWF0dXJlTmFtZVtcIldlYlJUQ1wiXSA9IFwiV2ViUlRDXCI7XG59KShTdXBwb3J0RmVhdHVyZU5hbWUgfHwgKFN1cHBvcnRGZWF0dXJlTmFtZSA9IHt9KSk7XG4iLCJpbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IENsdXN0ZXJFdmVudEVtaXR0ZXIgfSBmcm9tICdtb2RlbHMvQ2x1c3Rlci9DbHVzdGVyRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IE9yY2hlc3RyYXRvciB9IGZyb20gJ21vZGVscy9PcmNoZXN0cmF0b3IvT3JjaGVzdHJhdG9yJztcbmV4cG9ydCBjbGFzcyBDbHVzdGVyIHtcbiAgICB2ZW5kb3JJZDtcbiAgICBjbHVzdGVySWQ7XG4gICAgYXV0aE5vZGU7XG4gICAgZXZlbnRFbWl0dGVyO1xuICAgIG9yY2hlc3RyYXRvcjtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY2x1c3RlcklkLCBhdXRoTm9kZSwgYXV0aFNlcnZpY2UsIG9wdGlvbnMsIGNvbmZpZ3MsIGV2ZW50RW1pdHRlciA9IG5ldyBDbHVzdGVyRXZlbnRFbWl0dGVyKSB7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMuYXV0aE5vZGUgPSBhdXRoTm9kZTtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBldmVudEVtaXR0ZXI7XG4gICAgICAgIHRoaXMub3JjaGVzdHJhdG9yID0gbmV3IE9yY2hlc3RyYXRvcih0aGlzLnZlbmRvcklkLCB0aGlzLmNsdXN0ZXJJZCwgYXV0aE5vZGUsIGF1dGhTZXJ2aWNlLCBvcHRpb25zLCBjb25maWdzLCB0aGlzKTtcbiAgICB9XG4gICAgYXN5bmMgam9pbigpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5vcmNoZXN0cmF0b3IuaW5pdGlhbGl6ZSgpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuYXV0aE5vZGUudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5Vc2VyOlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aE5vZGUucmVnaXN0ZXJDbHVzdGVyKHRoaXMuY2x1c3RlcklkLCAodXNlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9yY2hlc3RyYXRvci51cGRhdGVVc2VyKHVzZXIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZWF2ZShvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy5vcmNoZXN0cmF0b3IuY2xvc2Uob3B0aW9ucyk7XG4gICAgICAgIHN3aXRjaCAodGhpcy5hdXRoTm9kZS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLlVzZXI6XG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoTm9kZS51bnJlZ2lzdGVyQ2x1c3Rlcih0aGlzLmNsdXN0ZXJJZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnY2x1c3Rlci1sZWF2ZScsIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIG9wZW5QdWJTdWJUb3BpYyhuYW1lKSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMub3JjaGVzdHJhdG9yLm9wZW5QdWJTdWJUb3BpYyhuYW1lKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldE5hbWU6IHN0cmVhbS5nZXROYW1lLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldE93bmVySWQ6IHN0cmVhbS5nZXRPd25lcklkLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldENvbnRlbnRUeXBlOiBzdHJlYW0uZ2V0Q29udGVudFR5cGUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgcHVibGlzaDogc3RyZWFtLnB1Ymxpc2guYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgY2xvc2U6IHN0cmVhbS5jbG9zZS5iaW5kKHN0cmVhbSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIG9wZW5PYmplY3RTdG9yZUJ1Y2tldChsYWJlbCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLm9yY2hlc3RyYXRvci5vcGVuT2JqZWN0U3RvcmVCdWNrZXQobGFiZWwsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0TmFtZTogc3RyZWFtLmdldE5hbWUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogc3RyZWFtLmdldE93bmVySWQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IHN0cmVhbS5nZXRDb250ZW50VHlwZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBwdWJsaXNoOiBzdHJlYW0ucHVibGlzaC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICB1bnB1Ymxpc2g6IHN0cmVhbS51bnB1Ymxpc2guYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0OiBzdHJlYW0uZ2V0LmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGxpc3Q6IHN0cmVhbS5saXN0LmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldFNpemU6IHN0cmVhbS5nZXRTaXplLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHN1YnNjcmliZTogc3RyZWFtLnN1YnNjcmliZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICB1bnN1YnNjcmliZTogc3RyZWFtLnVuc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGNsb3NlOiBzdHJlYW0uY2xvc2UuYmluZChzdHJlYW0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBvcGVuS2V5VmFsdWVEYXRhYmFzZShsYWJlbCwgbGF5b3V0KSB7XG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5vcmNoZXN0cmF0b3Iub3BlbktleVZhbHVlRGF0YWJhc2UobGFiZWwsIGxheW91dCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXROYW1lOiBkYi5nZXROYW1lLmJpbmQoZGIpLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogZGIuZ2V0T3duZXJJZC5iaW5kKGRiKSxcbiAgICAgICAgICAgIGdldENvbnRlbnRUeXBlOiBkYi5nZXRDb250ZW50VHlwZS5iaW5kKGRiKSxcbiAgICAgICAgICAgIGdldFRhYmxlOiBkYi5nZXRUYWJsZS5iaW5kKGRiKSxcbiAgICAgICAgICAgIHN1YnNjcmliZTogZGIuc3Vic2NyaWJlLmJpbmQoZGIpLFxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGRiLnVuc3Vic2NyaWJlLmJpbmQoZGIpLFxuICAgICAgICAgICAgY2xvc2U6IGRiLmNsb3NlLmJpbmQoZGIpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBvcGVuSm9iRGlzcGF0Y2hlcihsYWJlbCkge1xuICAgICAgICBjb25zdCBqb2JTZXJ2aWNlID0gYXdhaXQgdGhpcy5vcmNoZXN0cmF0b3Iub3BlbkpvYkRpc3BhdGNoZXIobGFiZWwpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0TmFtZTogam9iU2VydmljZS5nZXROYW1lLmJpbmQoam9iU2VydmljZSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBqb2JTZXJ2aWNlLmdldE93bmVySWQuYmluZChqb2JTZXJ2aWNlKSxcbiAgICAgICAgICAgIGdldENvbnRlbnRUeXBlOiBqb2JTZXJ2aWNlLmdldENvbnRlbnRUeXBlLmJpbmQoam9iU2VydmljZSksXG4gICAgICAgICAgICBjcmVhdGVKb2I6IGpvYlNlcnZpY2UuY3JlYXRlSm9iLmJpbmQoam9iU2VydmljZSksXG4gICAgICAgICAgICBnZXRKb2I6IGpvYlNlcnZpY2UuZ2V0Sm9iLmJpbmQoam9iU2VydmljZSksXG4gICAgICAgICAgICBnZXRKb2JzOiBqb2JTZXJ2aWNlLmdldEpvYnMuYmluZChqb2JTZXJ2aWNlKSxcbiAgICAgICAgICAgIGNsb3NlOiBqb2JTZXJ2aWNlLmNsb3NlLmJpbmQoam9iU2VydmljZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIG9wZW5Kb2JXb3JrZXIobGFiZWwpIHtcbiAgICAgICAgY29uc3Qgam9iV29ya2VyID0gYXdhaXQgdGhpcy5vcmNoZXN0cmF0b3Iub3BlbkpvYldvcmtlcihsYWJlbCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbG9zZTogam9iV29ya2VyLmNsb3NlLmJpbmQoam9iV29ya2VyKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgb3BlbkdlbmVyYXRpdmVBSUNvbnRleHQobGFiZWwpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZUFJQ29udGV4dCA9IGF3YWl0IHRoaXMub3JjaGVzdHJhdG9yLm9wZW5HZW5lcmF0aXZlQUlDb250ZXh0KGxhYmVsKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb21wdDogZ2VuZXJhdGl2ZUFJQ29udGV4dC5wcm9tcHQuYmluZChnZW5lcmF0aXZlQUlDb250ZXh0KSxcbiAgICAgICAgICAgIHN0cmVhbTogZ2VuZXJhdGl2ZUFJQ29udGV4dC5zdHJlYW0uYmluZChnZW5lcmF0aXZlQUlDb250ZXh0KSxcbiAgICAgICAgICAgIGdldERhdGFCdWNrZXRJZHM6IGdlbmVyYXRpdmVBSUNvbnRleHQuZ2V0RGF0YUJ1Y2tldElkcy5iaW5kKGdlbmVyYXRpdmVBSUNvbnRleHQpLFxuICAgICAgICAgICAgY2xvc2U6IGdlbmVyYXRpdmVBSUNvbnRleHQuY2xvc2UuYmluZChnZW5lcmF0aXZlQUlDb250ZXh0KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgb3BlbkdlbmVyYXRpdmVBSVdvcmtlcihsYWJlbCkge1xuICAgICAgICBjb25zdCBhaVdvcmtlciA9IGF3YWl0IHRoaXMub3JjaGVzdHJhdG9yLm9wZW5HZW5lcmF0aXZlQUlXb3JrZXIobGFiZWwpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvc2U6IGFpV29ya2VyLmNsb3NlLmJpbmQoYWlXb3JrZXIpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvcGVuR3JhcGhEYXRhYmFzZShsYWJlbCkge1xuICAgICAgICBjb25zdCBkYiA9IHRoaXMub3JjaGVzdHJhdG9yLm9wZW5HcmFwaERhdGFiYXNlKGxhYmVsKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldE5hbWU6IGRiLmdldE5hbWUuYmluZChkYiksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBkYi5nZXRPd25lcklkLmJpbmQoZGIpLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IGRiLmdldENvbnRlbnRUeXBlLmJpbmQoZGIpLFxuICAgICAgICAgICAgYWRkTm9kZTogZGIuYWRkTm9kZS5iaW5kKGRiKSxcbiAgICAgICAgICAgIGFkZEVkZ2U6IGRiLmFkZEVkZ2UuYmluZChkYiksXG4gICAgICAgICAgICBnZXRDb250ZW50OiBkYi5nZXRDb250ZW50LmJpbmQoZGIpLFxuICAgICAgICAgICAgY2xvc2U6IGRiLmNsb3NlLmJpbmQoZGIpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvcGVuVmVjdG9yRGF0YWJhc2UobGFiZWwpIHtcbiAgICAgICAgY29uc3QgZGIgPSB0aGlzLm9yY2hlc3RyYXRvci5vcGVuVmVjdG9yRGF0YWJhc2UobGFiZWwpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0TmFtZTogZGIuZ2V0TmFtZS5iaW5kKGRiKSxcbiAgICAgICAgICAgIGdldE93bmVySWQ6IGRiLmdldE93bmVySWQuYmluZChkYiksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogZGIuZ2V0Q29udGVudFR5cGUuYmluZChkYiksXG4gICAgICAgICAgICBzZWFyY2g6IGRiLnNlYXJjaC5iaW5kKGRiKSxcbiAgICAgICAgICAgIGluc2VydDogZGIuaW5zZXJ0LmJpbmQoZGIpLFxuICAgICAgICAgICAgcmVtb3ZlOiBkYi5yZW1vdmUuYmluZChkYiksXG4gICAgICAgICAgICBjbG9zZTogZGIuY2xvc2UuYmluZChkYiksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFB1YlN1YlRvcGljcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0UHViU3ViVG9waWNzKHN0cmF0ZWd5KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbXMubWFwKChzdHJlYW0pID0+ICh7XG4gICAgICAgICAgICBnZXROYW1lOiBzdHJlYW0uZ2V0TmFtZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHB1Ymxpc2g6IHN0cmVhbS5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHN1YnNjcmliZTogc3RyZWFtLnN1YnNjcmliZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICB1bnN1YnNjcmliZTogc3RyZWFtLnVuc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGNsb3NlOiBzdHJlYW0uY2xvc2UuYmluZChzdHJlYW0pLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE9iamVjdFN0b3JlQnVja2V0cyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0T2JqZWN0U3RvcmVCdWNrZXRzKHN0cmF0ZWd5KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbXMubWFwKChzdHJlYW0pID0+ICh7XG4gICAgICAgICAgICBnZXROYW1lOiBzdHJlYW0uZ2V0TmFtZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHB1Ymxpc2g6IHN0cmVhbS5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVucHVibGlzaDogc3RyZWFtLnVucHVibGlzaC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXQ6IHN0cmVhbS5nZXQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgbGlzdDogc3RyZWFtLmxpc3QuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0U2l6ZTogc3RyZWFtLmdldFNpemUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgY2xvc2U6IHN0cmVhbS5jbG9zZS5iaW5kKHN0cmVhbSksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0S2V5VmFsdWVEYXRhYmFzZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IHRoaXMub3JjaGVzdHJhdG9yLmdldEtleVZhbHVlRGF0YWJhc2VzKHN0cmF0ZWd5KTtcbiAgICAgICAgcmV0dXJuIHN0cmVhbXMubWFwKChzdHJlYW0pID0+ICh7XG4gICAgICAgICAgICBnZXROYW1lOiBzdHJlYW0uZ2V0TmFtZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldFRhYmxlOiBzdHJlYW0uZ2V0VGFibGUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgY2xvc2U6IHN0cmVhbS5jbG9zZS5iaW5kKHN0cmVhbSksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0R2VuZXJhdGl2ZUFJQ29udGV4dHMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGl2ZUFJQ29udGV4dHMgPSB0aGlzLm9yY2hlc3RyYXRvci5nZXRHZW5lcmF0aXZlQUlDb250ZXh0cyhzdHJhdGVneSk7XG4gICAgICAgIHJldHVybiBnZW5lcmF0aXZlQUlDb250ZXh0cy5tYXAoKGNvbnRleHQpID0+ICh7XG4gICAgICAgICAgICBwcm9tcHQ6IGNvbnRleHQucHJvbXB0LmJpbmQoY29udGV4dCksXG4gICAgICAgICAgICBzdHJlYW06IGNvbnRleHQuc3RyZWFtLmJpbmQoY29udGV4dCksXG4gICAgICAgICAgICBnZXREYXRhQnVja2V0SWRzOiBjb250ZXh0LmdldERhdGFCdWNrZXRJZHMuYmluZChjb250ZXh0KSxcbiAgICAgICAgICAgIGNsb3NlOiBjb250ZXh0LmNsb3NlLmJpbmQoY29udGV4dCksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0R2VuZXJhdGl2ZUFJV29ya2VycyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBnZW5lcmF0aXZlQUlXb3JrZXJzID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0R2VuZXJhdGl2ZUFJV29ya2VycyhzdHJhdGVneSk7XG4gICAgICAgIHJldHVybiBnZW5lcmF0aXZlQUlXb3JrZXJzLm1hcCgod29ya2VyKSA9PiAoe1xuICAgICAgICAgICAgY2xvc2U6IHdvcmtlci5jbG9zZS5iaW5kKHdvcmtlciksXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcHVibGlzaExvY2FsTWVkaWFTdHJlYW0obGFiZWwsIG1lZGlhU291cmNlKSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMub3JjaGVzdHJhdG9yLmNyZWF0ZUxvY2FsTWVkaWFTdHJlYW0obGFiZWwsIG1lZGlhU291cmNlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdldExhYmVsOiBzdHJlYW0uZ2V0TGFiZWwuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogc3RyZWFtLmdldE93bmVySWQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IHN0cmVhbS5nZXRDb250ZW50VHlwZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRNZWRpYVN0cmVhbTogc3RyZWFtLmdldE1lZGlhU3RyZWFtLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHNldFByaW9yaXR5OiBzdHJlYW0uc2V0UHJpb3JpdHkuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdW5wdWJsaXNoOiBzdHJlYW0udW5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHVibGlzaExvY2FsRHluYW1pY01lZGlhU3RyZWFtKGxhYmVsLCBtZWRpYVNvdXJjZSkge1xuICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLm9yY2hlc3RyYXRvci5jcmVhdGVMb2NhbER5bmFtaWNNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0TGFiZWw6IHN0cmVhbS5nZXRMYWJlbC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHNldFByaW9yaXR5OiBzdHJlYW0uc2V0UHJpb3JpdHkuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdW5wdWJsaXNoOiBzdHJlYW0udW5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldE1lZGlhU3RyZWFtOiBzdHJlYW0uZ2V0TWVkaWFTdHJlYW0uYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgYWRkVHJhY2s6IHN0cmVhbS5hZGRUcmFjay5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICByZW1vdmVUcmFjazogc3RyZWFtLnJlbW92ZVRyYWNrLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHJlcGxhY2VUcmFjazogc3RyZWFtLnJlcGxhY2VUcmFjay5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBzZXRUcmFuc2Zvcm1hdGlvbnM6IHN0cmVhbS5zZXRUcmFuc2Zvcm1hdGlvbnMuYmluZChzdHJlYW0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRMb2NhbE1lZGlhU3RyZWFtcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0TG9jYWxNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpO1xuICAgICAgICByZXR1cm4gc3RyZWFtcy5tYXAoKHN0cmVhbSkgPT4gKHtcbiAgICAgICAgICAgIGdldExhYmVsOiBzdHJlYW0uZ2V0TGFiZWwuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogc3RyZWFtLmdldE93bmVySWQuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IHN0cmVhbS5nZXRDb250ZW50VHlwZS5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRNZWRpYVN0cmVhbTogc3RyZWFtLmdldE1lZGlhU3RyZWFtLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHNldFByaW9yaXR5OiBzdHJlYW0uc2V0UHJpb3JpdHkuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdW5wdWJsaXNoOiBzdHJlYW0udW5wdWJsaXNoLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRSZW1vdGVNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IHRoaXMub3JjaGVzdHJhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtcyhzdHJhdGVneSk7XG4gICAgICAgIHJldHVybiBzdHJlYW1zLm1hcCgoc3RyZWFtKSA9PiAoe1xuICAgICAgICAgICAgZ2V0TGFiZWw6IHN0cmVhbS5nZXRMYWJlbC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBzdHJlYW0uZ2V0T3duZXJJZC5iaW5kKHN0cmVhbSksXG4gICAgICAgICAgICBnZXRDb250ZW50VHlwZTogc3RyZWFtLmdldENvbnRlbnRUeXBlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIGdldE1lZGlhU3RyZWFtOiBzdHJlYW0uZ2V0TWVkaWFTdHJlYW0uYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgc3Vic2NyaWJlOiBzdHJlYW0uc3Vic2NyaWJlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBzdHJlYW0udW5zdWJzY3JpYmUuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgZ2V0QXZhaWxhYmxlVHJhY2tLaW5kczogc3RyZWFtLmdldEF2YWlsYWJsZVRyYWNrS2luZHMuYmluZChzdHJlYW0pLFxuICAgICAgICAgICAgdXBkYXRlOiBzdHJlYW0udXBkYXRlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgICAgIG9uUHJvdmlkZXJDaGFuZ2U6IHN0cmVhbS5vblByb3ZpZGVyQ2hhbmdlLmJpbmQoc3RyZWFtKSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRHcmFwaERhdGFiYXNlcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBkYnMgPSB0aGlzLm9yY2hlc3RyYXRvci5nZXRHcmFwaERhdGFiYXNlcyhzdHJhdGVneSk7XG4gICAgICAgIHJldHVybiBkYnMubWFwKChkYikgPT4gKHtcbiAgICAgICAgICAgIGdldE5hbWU6IGRiLmdldE5hbWUuYmluZChkYiksXG4gICAgICAgICAgICBnZXRPd25lcklkOiBkYi5nZXRPd25lcklkLmJpbmQoZGIpLFxuICAgICAgICAgICAgZ2V0Q29udGVudFR5cGU6IGRiLmdldENvbnRlbnRUeXBlLmJpbmQoZGIpLFxuICAgICAgICAgICAgYWRkTm9kZTogZGIuYWRkTm9kZS5iaW5kKGRiKSxcbiAgICAgICAgICAgIGFkZEVkZ2U6IGRiLmFkZEVkZ2UuYmluZChkYiksXG4gICAgICAgICAgICBnZXRDb250ZW50OiBkYi5nZXRDb250ZW50LmJpbmQoZGIpLFxuICAgICAgICAgICAgY2xvc2U6IGRiLmNsb3NlLmJpbmQoZGIpLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldFZlY3RvckRhdGFiYXNlcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBkYnMgPSB0aGlzLm9yY2hlc3RyYXRvci5nZXRWZWN0b3JEYXRhYmFzZXMoc3RyYXRlZ3kpO1xuICAgICAgICByZXR1cm4gZGJzLm1hcCgoZGIpID0+ICh7XG4gICAgICAgICAgICBnZXROYW1lOiBkYi5nZXROYW1lLmJpbmQoZGIpLFxuICAgICAgICAgICAgZ2V0T3duZXJJZDogZGIuZ2V0T3duZXJJZC5iaW5kKGRiKSxcbiAgICAgICAgICAgIGdldENvbnRlbnRUeXBlOiBkYi5nZXRDb250ZW50VHlwZS5iaW5kKGRiKSxcbiAgICAgICAgICAgIHNlYXJjaDogZGIuc2VhcmNoLmJpbmQoZGIpLFxuICAgICAgICAgICAgaW5zZXJ0OiBkYi5pbnNlcnQuYmluZChkYiksXG4gICAgICAgICAgICByZW1vdmU6IGRiLnJlbW92ZS5iaW5kKGRiKSxcbiAgICAgICAgICAgIGNsb3NlOiBkYi5jbG9zZS5iaW5kKGRiKSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMb2NhbE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm9yY2hlc3RyYXRvci5nZXRMb2NhbE5vZGUoKTtcbiAgICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5Vc2VyLFxuICAgICAgICAgICAgICAgICAgICBnZXRJZDogbm9kZS5nZXRJZC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBnZXREaXNwbGF5TmFtZTogbm9kZS5nZXREaXNwbGF5TmFtZS5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBnZXRFbWFpbDogbm9kZS5nZXRFbWFpbC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBnZXRSZW1vdGVDb25uZWN0aW9uczogbm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucy5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBzZXREaXNwbGF5TmFtZTogbm9kZS5zZXREaXNwbGF5TmFtZS5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICBzZXRFbWFpbDogbm9kZS5zZXRFbWFpbC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLkFnZW50OlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5BZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgZ2V0SWQ6IG5vZGUuZ2V0SWQuYmluZChub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgZ2V0UmVtb3RlQ29ubmVjdGlvbnM6IG5vZGUuZ2V0UmVtb3RlQ29ubmVjdGlvbnMuYmluZChub2RlKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlbW90ZU5vZGVzKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5vcmNoZXN0cmF0b3IuZ2V0UmVtb3RlTm9kZXMoc3RyYXRlZ3kpO1xuICAgICAgICByZXR1cm4gbm9kZXMubWFwKChub2RlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKG5vZGUudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlLlVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRJZDogbm9kZS5nZXRJZC5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RGlzcGxheU5hbWU6IG5vZGUuZ2V0RGlzcGxheU5hbWUuYmluZChub2RlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEVtYWlsOiBub2RlLmdldEVtYWlsLmJpbmQobm9kZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRSZW1vdGVDb25uZWN0aW9uczogbm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucy5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuQWdlbnQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5BZ2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldElkOiBub2RlLmdldElkLmJpbmQobm9kZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRSZW1vdGVDb25uZWN0aW9uczogbm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucy5iaW5kKG5vZGUpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk5vZGVJbnZhbGlkVHlwZSwgJ0ludmFsaWQgbm9kZSB0eXBlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDbHVzdGVyIGV2ZW50cyBtZXRob2RzXG4gICAgb24gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbiguLi5hcmdzKTtcbiAgICB9O1xuICAgIGVtaXQgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCguLi5hcmdzKTtcbiAgICB9O1xuICAgIG9mZiguLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9mZiguLi5hcmdzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIENsdXN0ZXJFdmVudEVtaXR0ZXIge1xuICAgIHJlZ2lzdGVyZWRMaXN0ZW5lcnM7XG4gICAgYnVmZmVyZWRFdmVudHM7XG4gICAgZXZlbnRUYXJnZXQ7XG4gICAgY29uc3RydWN0b3IocmVnaXN0ZXJlZExpc3RlbmVycyA9IG5ldyBNYXAoKSwgYnVmZmVyZWRFdmVudHMgPSBuZXcgTWFwKCksIGV2ZW50VGFyZ2V0ID0gbmV3IEV2ZW50VGFyZ2V0KCkpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlcmVkTGlzdGVuZXJzID0gcmVnaXN0ZXJlZExpc3RlbmVycztcbiAgICAgICAgdGhpcy5idWZmZXJlZEV2ZW50cyA9IGJ1ZmZlcmVkRXZlbnRzO1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XG4gICAgfVxuICAgIGVtaXQgPSAoZXZlbnQsIGRhdGEpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnJlZ2lzdGVyZWRMaXN0ZW5lcnMuaGFzKGV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJFdmVudChldmVudCwgZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRXZlbnRzLCAnRW1pdHRpbmcgZXZlbnQgb24gbG9jYWwgY2x1c3RlcicsIHsgZXZlbnQsIGRhdGEgfSk7XG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnQsIHsgZGV0YWlsOiBkYXRhIH0pKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBvbiA9IChldmVudCwgbGlzdGVuZXIpID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnRUYXJnZXRMaXN0ZW5lciA9ICgoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkV2ZW50cywgJ1JlY2VpdmVkIGV2ZW50IG9uIGNsdXN0ZXInLCBldmVudC50eXBlLCBldmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgbGlzdGVuZXIoZXZlbnQuZGV0YWlsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5zZXQoZXZlbnQsIGV2ZW50VGFyZ2V0TGlzdGVuZXIpO1xuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGV2ZW50VGFyZ2V0TGlzdGVuZXIpO1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5DbHVzdGVyLCAnU3Vic2NyaWJpbmcgdG8gYW4gZXZlbnQ6IG9uJywgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5jb25zdW1lQnVmZmVyZWRFdmVudHMoZXZlbnQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIG9mZihldmVudHMpIHtcbiAgICAgICAgaWYgKCFldmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lciwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkTGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBldmVudHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xuICAgICAgICAgICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihldmVudCkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgICAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJlZExpc3RlbmVycy5kZWxldGUoZXZlbnQpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGJ1ZmZlckV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkV2ZW50cywgJ0J1ZmZlcmluZyBldmVudCcsIHsgZXZlbnQsIGRhdGEgfSk7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcmVkRGF0YSA9IHRoaXMuYnVmZmVyZWRFdmVudHMuZ2V0KGV2ZW50KSB8fCBbXTtcbiAgICAgICAgdGhpcy5idWZmZXJlZEV2ZW50cy5zZXQoZXZlbnQsIFsuLi5idWZmZXJlZERhdGEsIGRhdGFdKTtcbiAgICB9XG4gICAgY29uc3VtZUJ1ZmZlcmVkRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGJ1ZmZlcmVkRGF0YSA9IHRoaXMuYnVmZmVyZWRFdmVudHMuZ2V0KGV2ZW50KTtcbiAgICAgICAgaWYgKCFidWZmZXJlZERhdGEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBidWZmZXJlZERhdGEuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRXZlbnRzLCAnQ29uc3VtaW5nIGJ1ZmZlcmVkIGV2ZW50JywgeyBldmVudCwgZGF0YSB9KTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoZXZlbnQsIHsgZGV0YWlsOiBkYXRhIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnVmZmVyZWRFdmVudHMuZGVsZXRlKGV2ZW50KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBbXBsaWZ5IH0gZnJvbSAnYXdzLWFtcGxpZnknO1xuaW1wb3J0IHsgSHViIH0gZnJvbSAnYXdzLWFtcGxpZnkvdXRpbHMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVDbGllbnQsIENvbm5lY3Rpb25TdGF0ZSwgQ09OTkVDVElPTl9TVEFURV9DSEFOR0UgfSBmcm9tICdAYXdzLWFtcGxpZnkvYXBpJztcbmltcG9ydCB7IGRlY29kZUpXVCB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9jb3JlJztcbmltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gJ2Vudmlyb25tZW50cy9FbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgeyBCYXNlQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL0Jhc2VDb25uZWN0aW9uJztcbmltcG9ydCB7IGlzUmVjZWl2ZXIsIGlzU2VuZGVyIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9IZWxwZXJzJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBjcmVhdGVPYnNlcnZlciwgY3JlYXRlU2luZ2xlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5pbXBvcnQgeyBBc3luY1F1ZXVlQ2FsbGJhY2sgfSBmcm9tICd1dGlscy9RdWV1ZS9RdWV1ZSc7XG5pbXBvcnQgeyBjcmVhdGVSZXRyeVF1ZXVlIH0gZnJvbSAndXRpbHMvUXVldWUvUmV0cnlRdWV1ZSc7XG5jb25zdCBzdWJzY3JpYmVEb2MgPSAvKiBHcmFwaFFMICovIGBcbiAgc3Vic2NyaXB0aW9uIFN1YnNjcmliZSgkbmFtZTogU3RyaW5nISkge1xuICAgIHN1YnNjcmliZShuYW1lOiAkbmFtZSkge1xuICAgICAgZGF0YVxuICAgICAgbmFtZVxuICAgIH1cbiAgfVxuYDtcbmNvbnN0IHB1Ymxpc2hEb2MgPSAvKiBHcmFwaFFMICovIGBcbiAgbXV0YXRpb24gUHVibGlzaCgkZGF0YTogQVdTSlNPTiEsICRuYW1lOiBTdHJpbmchKSB7XG4gICAgcHVibGlzaChkYXRhOiAkZGF0YSwgbmFtZTogJG5hbWUpIHtcbiAgICAgIGRhdGFcbiAgICAgIG5hbWVcbiAgICB9XG4gIH1cbmA7XG5leHBvcnQgY2xhc3MgQXBwU3luY1B1YlN1YkNvbm5lY3Rpb24gZXh0ZW5kcyBCYXNlQ29ubmVjdGlvbiB7XG4gICAgdmVuZG9ySWQ7XG4gICAgYXV0aFNlcnZpY2U7XG4gICAgY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkRpc2Nvbm5lY3RlZDtcbiAgICBjb25uZWN0aW9uU3RhdGVMaXN0ZW5lciA9IGNyZWF0ZVNpbmdsZU9ic2VydmVyKCk7XG4gICAgbWVzc2FnZUxpc3RlbmVycyA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgc3Vic2NyaXB0aW9uO1xuICAgIGxpc3RlblVuc3Vic2NyaWJlcjtcbiAgICByZXRyeVF1ZXVlID0gY3JlYXRlUmV0cnlRdWV1ZShuZXcgQXN5bmNRdWV1ZUNhbGxiYWNrKHRoaXMuc2VuZEFjdGlvbi5iaW5kKHRoaXMpLCB0aGlzLndhaXRDb25uZWN0ZWQuYmluZCh0aGlzKSkpO1xuICAgIGNsaWVudDtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkLCBhdXRoU2VydmljZSkge1xuICAgICAgICBzdXBlcihjbHVzdGVySWQsIGxvY2FsTm9kZSwgcmVtb3RlSWQpO1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMuYXV0aFNlcnZpY2UgPSBhdXRoU2VydmljZTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG15VG9rZW5Qcm92aWRlciA9IHtcbiAgICAgICAgICAgICAgICBnZXRUb2tlbnM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmF1dGhTZXJ2aWNlLmdldElkVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBkZWNvZGVKV1QoYWNjZXNzVG9rZW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogZGVjb2RlSldUKGFjY2Vzc1Rva2VuKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIEFtcGxpZnkuY29uZmlndXJlKHtcbiAgICAgICAgICAgICAgICBBUEk6IHtcbiAgICAgICAgICAgICAgICAgICAgR3JhcGhRTDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnQ6IEVudmlyb25tZW50LmF3cy5lbmRwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogRW52aXJvbm1lbnQuYXdzLnJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBdXRoTW9kZTogJ29pZGMnLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBBdXRoOiB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuUHJvdmlkZXI6IG15VG9rZW5Qcm92aWRlcixcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50ID0gZ2VuZXJhdGVDbGllbnQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLmxpc3RlblVuc3Vic2NyaWJlciA9IEh1Yi5saXN0ZW4oJ2FwaScsIGFzeW5jICh7IHBheWxvYWQgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLmV2ZW50ID09PSBDT05ORUNUSU9OX1NUQVRFX0NIQU5HRSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcGF5bG9hZC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IGRhdGEuY29ubmVjdGlvblN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZUxpc3RlbmVyLnB1Ymxpc2goZGF0YS5jb25uZWN0aW9uU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5EaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignYXBwc3luYy1kaXNjb25uZWN0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmdldExvY2FsSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgPT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKCdhcHBzeW5jLWNvbm5lY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZygnYXBwc3luYy1zdGF0ZWNoYW5nZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogZGF0YS5jb25uZWN0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdhcHBzeW5jLWNvbm5lY3QtZmFpbCcsIHtcbiAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgbG9nZ2VyLndhcm5pbmcoJ2FwcHN5bmMtY2xvc2UnLCB7XG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmdldExvY2FsSWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZXRyeVF1ZXVlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMubGlzdGVuVW5zdWJzY3JpYmVyPy4oKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24/LnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN1YnNjcmlwdGlvbjtcbiAgICB9XG4gICAgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNvbm5lY3RlZDtcbiAgICB9XG4gICAgc2VuZChkYXRhKSB7XG4gICAgICAgIHRoaXMucmV0cnlRdWV1ZS5wdXNoKGRhdGEpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUxpc3RlbmVycy5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICBnZXRTdXBwb3J0ZWRDb250ZW50VHlwZXMoKSB7XG4gICAgICAgIHJldHVybiBbQ29udGVudFR5cGUuRGF0YV07XG4gICAgfVxuICAgIGFzeW5jIHdhaXRDb25uZWN0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5jb25uZWN0aW9uU3RhdGVMaXN0ZW5lci5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBDb25uZWN0aW9uU3RhdGUuQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRBY3Rpb24oZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgIT09IENvbm5lY3Rpb25TdGF0ZS5Db25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXBwU3luYyBjb25uZWN0aW9uIG5vdCByZWFkeScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGF0YS5kZXN0aW5hdGlvbklkcyB8fCBkYXRhLmRlc3RpbmF0aW9uSWRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdhcHBzeW5jLW5vLWRlc3RpbmF0aW9uJywge1xuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmdldExvY2FsSWQoKSxcbiAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMucHVibGlzaChkYXRhLmRlc3RpbmF0aW9uSWRzWzBdLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfVxuICAgIGFzeW5jIHB1Ymxpc2goZGVzdGluYXRpb25JZCwgZGF0YSkge1xuICAgICAgICBpZiAoIXRoaXMuY2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FwcFN5bmMgY2xpZW50IG5vdCByZWFkeScpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlNpZ25hbGluZywgJ0FwcFN5bmMgcHVibGlzaCcsIHRoaXMuZ2V0TG9jYWxJZCgpLCBkYXRhKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQuZ3JhcGhxbCh7XG4gICAgICAgICAgICBxdWVyeTogcHVibGlzaERvYyxcbiAgICAgICAgICAgIHZhcmlhYmxlczogeyBuYW1lOiBhd2FpdCB0aGlzLmdldEhhc2goZGVzdGluYXRpb25JZCksIGRhdGEgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBcHBTeW5jIGNsaWVudCBub3QgcmVhZHknKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TaWduYWxpbmcsICdBcHBTeW5jIHN1YnNjcmliZScsIHRoaXMuZ2V0TG9jYWxJZCgpKTtcbiAgICAgICAgY29uc3QgZ3JhcGhxbCA9IGF3YWl0IHRoaXMuY2xpZW50LmdyYXBocWwoe1xuICAgICAgICAgICAgcXVlcnk6IHN1YnNjcmliZURvYyxcbiAgICAgICAgICAgIHZhcmlhYmxlczogeyBuYW1lOiBhd2FpdCB0aGlzLmdldEhhc2goKSB9LFxuICAgICAgICAgICAgYXV0aFRva2VuOiBhd2FpdCB0aGlzLmF1dGhTZXJ2aWNlLmdldElkVG9rZW4oKSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYXdhaXQgdGhpcy5hdXRoU2VydmljZS5nZXRJZFRva2VuKCksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IGdyYXBocWwuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQ6ICh7IGRhdGEgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGRhdGEuc3Vic2NyaWJlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChpc1NlbmRlcihtZXNzYWdlLCB0aGlzLmdldExvY2FsSWQoKSkgfHwgIWlzUmVjZWl2ZXIobWVzc2FnZSwgdGhpcy5nZXRMb2NhbElkKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdGVuZXJzLnB1Ymxpc2gobWVzc2FnZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGNvbnNvbGUubG9nLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0SGFzaChub2RlSWQpIHtcbiAgICAgICAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMScsIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShgJHt0aGlzLnZlbmRvcklkfS0ke3RoaXMuY2x1c3RlcklkfS0ke25vZGVJZCA/PyB0aGlzLmdldExvY2FsSWQoKX1gKSk7XG4gICAgICAgIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcikpO1xuICAgICAgICBjb25zdCBoYXNoID0gaGFzaEFycmF5Lm1hcCgoYikgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XG4gICAgICAgIHJldHVybiBoYXNoO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBCYXNlQ29ubmVjdGlvbiB7XG4gICAgY2x1c3RlcklkO1xuICAgIGxvY2FsTm9kZTtcbiAgICByZW1vdGVJZDtcbiAgICBjb25zdHJ1Y3RvcihjbHVzdGVySWQsIGxvY2FsTm9kZSwgcmVtb3RlSWQpIHtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLnJlbW90ZUlkID0gcmVtb3RlSWQ7XG4gICAgfVxuICAgIGdldExvY2FsSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpO1xuICAgIH1cbiAgICBnZXRSZW1vdGVJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlSWQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUEVFUl9DT05ORUNUSU9OX0hBTkRTSEFLRV9ERUJPVU5DRSB9IGZyb20gJ2NvbnN0YW50cy9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25UeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBCYXNlUGVlckNvbm5lY3Rpb24ge1xuICAgIGNsdXN0ZXJJZDtcbiAgICBsb2NhbE5vZGU7XG4gICAgcmVtb3RlSWQ7XG4gICAgaWNlU2VydmVycztcbiAgICBjb25uZWN0aW9uVHlwZTtcbiAgICBjb25uZWN0aW9uQ29uc3RydWN0b3I7XG4gICAgY29ubmVjdGlvbjtcbiAgICBkYXRhQ2hhbm5lbDtcbiAgICBjdXJyZW50VmVyc2lvbiA9IDE7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgaGFuZHNoYWtlQ2FuZGlkYXRlcyA9IFtdO1xuICAgIHBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzID0gW107XG4gICAgaGFuZHNoYWtlRGVib3VuY2U7XG4gICAgY29uc3RydWN0b3IoY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkLCBpY2VTZXJ2ZXJzLCBjb25uZWN0aW9uVHlwZSwgY29ubmVjdGlvbkNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLmxvY2FsTm9kZSA9IGxvY2FsTm9kZTtcbiAgICAgICAgdGhpcy5yZW1vdGVJZCA9IHJlbW90ZUlkO1xuICAgICAgICB0aGlzLmljZVNlcnZlcnMgPSBpY2VTZXJ2ZXJzO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25UeXBlID0gY29ubmVjdGlvblR5cGU7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yID0gY29ubmVjdGlvbkNvbnN0cnVjdG9yO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBuZXcgdGhpcy5jb25uZWN0aW9uQ29uc3RydWN0b3IoeyBoYW5kc2hha2VTZXJ2ZXJzOiB0aGlzLmljZVNlcnZlcnMgfSk7XG4gICAgICAgIHRoaXMuc2V0dXBDb25uZWN0aW9uRXZlbnRzKCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnN0b3BDb25uZWN0aW9uKCk7XG4gICAgfVxuICAgIHNldENvbm5lY3Rpb25UeXBlKGNvbm5lY3Rpb25UeXBlKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblR5cGUgPSBjb25uZWN0aW9uVHlwZTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlSGFuZHNoYWtlKGNhbmRpZGF0ZXMsIHZlcnNpb24pIHtcbiAgICAgICAgaWYgKHZlcnNpb24gIT09IHRoaXMuY3VycmVudFZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGlvbi5jYW5BZGRDYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkUGVuZGluZ0hhbmRzaGFrZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uYWRkQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgdGhpcy5sb2dDb25uZWN0aW9uU3RhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUgPT09ICdjb25uZWN0ZWQnICYmXG4gICAgICAgICAgICBbJ2Nvbm5lY3RlZCcsICdjb21wbGV0ZWQnXS5pbmNsdWRlcyh0aGlzLmNvbm5lY3Rpb24uaGFuZHNoYWtlU3RhdGUpICYmXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUgIT09ICdjbG9zZWQnICYmXG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsPy5zdGF0ZSA9PT0gJ29wZW4nO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxuICAgIHJlc2V0Q29ubmVjdGlvbih2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMuc3RvcENvbm5lY3Rpb24oKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbmV3IHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yKHsgaGFuZHNoYWtlU2VydmVyczogdGhpcy5pY2VTZXJ2ZXJzIH0pO1xuICAgICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmVyc2lvbiA9IHZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXR1cENvbm5lY3Rpb25FdmVudHMoKTtcbiAgICB9XG4gICAgcHJvY2Vzc1BlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzKCkge1xuICAgICAgICB0aGlzLnBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzLmZvckVhY2goY2FuZGlkYXRlID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmFkZENhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7IH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGVuZGluZ0hhbmRzaGFrZUNhbmRpZGF0ZXMgPSBbXTtcbiAgICB9XG4gICAgcHVibGlzaFN5c3RlbU1lc3NhZ2UoY29udGVudCwgdXVpZCkge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtVG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuTWlzc2luZ1N5c3RlbVRvcGljLCB7IGNvbnRlbnQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdGhpcy5yZW1vdGVJZF0sXG4gICAgICAgICAgICBwcm9wYWdhdGU6IHRoaXMuY29ubmVjdGlvblR5cGUgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgcmV0cnk6IHRoaXMuY29ubmVjdGlvblR5cGUgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHV1aWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnV1aWQgPSB1dWlkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaChldmVudCk7XG4gICAgfVxuICAgIHNldHVwQ29ubmVjdGlvbkV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uR2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHdhaXQgZm9yIHRoZSBnYXRoZXJpbmcgc3RhdGUgdG8gYmUgY29tcGxldGUgYmVmb3JlIHNlbmRpbmcgdGhlIGNhbmRpZGF0ZXMuXG4gICAgICAgICAgICAvLyBBIGRlYm91bmNlIGlzIHVzZWQgYmVjYXVzZSB0aGUgZ2F0aGVyaW5nIHN0YXRlIGNhbiBiZSBjb21wbGV0ZSBtdWx0aXBsZSB0aW1lcy5cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb24uZ2F0aGVyaW5nU3RhdGUgPT09ICdjb21wbGV0ZScgJiYgdGhpcy5oYW5kc2hha2VDYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYW5kc2hha2VEZWJvdW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oYW5kc2hha2VEZWJvdW5jZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlRGVib3VuY2UgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFuZHNoYWtlRGVib3VuY2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZEljZUNhbmRpZGF0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kc2hha2VDYW5kaWRhdGVzID0gW107XG4gICAgICAgICAgICAgICAgfSwgUEVFUl9DT05ORUNUSU9OX0hBTkRTSEFLRV9ERUJPVU5DRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkNhbmRpZGF0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZHNoYWtlQ2FuZGlkYXRlcy5wdXNoKGV2ZW50LmNhbmRpZGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0b3BDb25uZWN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oYW5kc2hha2VEZWJvdW5jZSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmhhbmRzaGFrZURlYm91bmNlO1xuICAgICAgICB0aGlzLmhhbmRzaGFrZUNhbmRpZGF0ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wZW5kaW5nSGFuZHNoYWtlQ2FuZGlkYXRlcyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbk1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbkNsb3NlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFDaGFubmVsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkdhdGhlcmluZ1N0YXRlQ2hhbmdlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uQ2FuZGlkYXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uSGFuZHNoYWtlU3RhdGVDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25Db25uZWN0aW9uU3RhdGVDaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25UcmFjayA9IG51bGw7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkRhdGFDaGFubmVsID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGUoY2FuZGlkYXRlKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0hhbmRzaGFrZUNhbmRpZGF0ZXMucHVzaChjYW5kaWRhdGUpO1xuICAgIH1cbiAgICBsb2dDb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkNvbm5lY3Rpb25TdGF0ZSwgJ0Jhc2UgUGVlciBDb25uZWN0aW9uJywge1xuICAgICAgICAgICAgbG9jYWxJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgY29ubmVjdGlvblN0YXRlOiB0aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlLFxuICAgICAgICAgICAgaGFuZHNoYWtlU3RhdGU6IHRoaXMuY29ubmVjdGlvbi5oYW5kc2hha2VTdGF0ZSxcbiAgICAgICAgICAgIHNpZ25hbGluZ1N0YXRlOiB0aGlzLmNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUsXG4gICAgICAgICAgICBkYXRhQ2hhbm5lbFN0YXRlOiB0aGlzLmRhdGFDaGFubmVsPy5zdGF0ZVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDT05ORUNUSU9OX01BWF9CVUZGRVJfU0laRSB9IGZyb20gJ2NvbnN0YW50cy9Db25uZWN0aW9uJztcbmltcG9ydCB7IEVhcmx5UmV0dXJuRXJyb3IgfSBmcm9tICdlcnJvcnMvRWFybHlSZXR1cm5FcnJvcic7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25UeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgTm9kZU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGVNZXNzYWdlJztcbmltcG9ydCB7IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1JlbWVkaWF0aW9uL1JlbWVkaWF0aW9uJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgQXBwU3luY1B1YlN1YkNvbm5lY3Rpb24gfSBmcm9tICdtb2RlbHMvQ29ubmVjdGlvbi9BcHBTeW5jUHViU3ViQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uR3JvdXAgfSBmcm9tICdtb2RlbHMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbkdyb3VwJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uUG9vbCB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uUG9vbCc7XG5pbXBvcnQgeyBNZXNzYWdlQnVmZmVyU2VydmljZSB9IGZyb20gJ3NlcnZpY2VzL01lc3NhZ2VCdWZmZXIvTWVzc2FnZUJ1ZmZlclNlcnZpY2UnO1xuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25NYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIGF1dGhTZXJ2aWNlO1xuICAgIGljZVNlcnZlcnM7XG4gICAgb3B0aW9ucztcbiAgICBjb25uZWN0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICBjb25uZWN0aW9uUG9vbDtcbiAgICBjb25uZWN0aW9uR3JvdXA7XG4gICAgc2lnbmFsaW5nU2VydmVyO1xuICAgIG1lc3NhZ2VCdWZmZXI7XG4gICAgY29uc3RydWN0b3IoY29uZmlncywgYXV0aFNlcnZpY2UsIGdyYXBoU2VydmljZSwgaWNlU2VydmVycywgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlID0gYXV0aFNlcnZpY2U7XG4gICAgICAgIHRoaXMuaWNlU2VydmVycyA9IGljZVNlcnZlcnM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMubWVzc2FnZUJ1ZmZlciA9IG5ldyBNZXNzYWdlQnVmZmVyU2VydmljZSgpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Hcm91cCA9IG5ldyBQZWVyQ29ubmVjdGlvbkdyb3VwKHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSwgdGhpcy5tZXNzYWdlQnVmZmVyLCBncmFwaFNlcnZpY2UpO1xuICAgICAgICB0aGlzLnNpZ25hbGluZ1NlcnZlciA9IG5ldyBBcHBTeW5jUHViU3ViQ29ubmVjdGlvbih0aGlzLmNvbmZpZ3MudmVuZG9ySWQsIHRoaXMuY29uZmlncy5jbHVzdGVySWQsIHRoaXMuY29uZmlncy5sb2NhbE5vZGUsICdzZXJ2ZXInLCB0aGlzLmF1dGhTZXJ2aWNlKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uUG9vbCA9IG5ldyBQZWVyQ29ubmVjdGlvblBvb2wodGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCB0aGlzLm1lc3NhZ2VCdWZmZXIpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Qb29sLmFkZENvbm5lY3Rpb24odGhpcy5jb25uZWN0aW9uR3JvdXApO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Qb29sLmFkZENvbm5lY3Rpb24odGhpcy5zaWduYWxpbmdTZXJ2ZXIpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcy5jb25uZWN0aW9uUG9vbCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VCdWZmZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5mb3JFYWNoKChfLCByZW1vdGVJZCkgPT4gdGhpcy5jbG9zZUNvbm5lY3Rpb24ocmVtb3RlSWQpKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcy5jb25uZWN0aW9uUG9vbCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblBvb2wucmVtb3ZlQ29ubmVjdGlvbih0aGlzLnNpZ25hbGluZ1NlcnZlcik7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblBvb2wucmVtb3ZlQ29ubmVjdGlvbih0aGlzLmNvbm5lY3Rpb25Hcm91cCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblBvb2wuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5zaWduYWxpbmdTZXJ2ZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uR3JvdXAuY2xvc2UoKTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zaWduYWxpbmdTZXJ2ZXIuY29ubmVjdCgpO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVDb25uZWN0aW9uKHJlbW90ZUlkLCBjb25uZWN0aW9uVHlwZSA9IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25zLmhhcyhyZW1vdGVJZCkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25zLmdldChyZW1vdGVJZCk/LmdldENvbm5lY3Rpb25UeXBlKCkgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5PcHRpbWl6YXRpb24gJiYgY29ubmVjdGlvblR5cGUgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5nZXQocmVtb3RlSWQpPy5zZXRDb25uZWN0aW9uVHlwZShQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5SZW1vdGVDb25uZWN0aW9uRXhpc3RzLCB7IGxvY2FsSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSwgcmVtb3RlSWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IG5ldyBQZWVyQ29ubmVjdGlvbih0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLCByZW1vdGVJZCwgdGhpcy5pY2VTZXJ2ZXJzLCBjb25uZWN0aW9uVHlwZSwgdGhpcy5vcHRpb25zLm1heEZwcywgdGhpcy5vcHRpb25zLm1heEJwcCwgdGhpcy5vcHRpb25zLnBlZXJDb25uZWN0aW9uQ29ubmVjdG9yKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5zZXQocmVtb3RlSWQsIGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25Hcm91cC5hZGRDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoY29ubmVjdGlvbik7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclJlbW90ZU5vZGUocmVtb3RlSWQpO1xuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgZ2V0Q29ubmVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uR3JvdXA7XG4gICAgfVxuICAgIGdldENvbm5lY3Rpb24ocmVtb3RlSWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3Rpb25zLmhhcyhyZW1vdGVJZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuTWlzc2luZ1JlbW90ZUNvbm5lY3Rpb24sIHsgbG9jYWxJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCByZW1vdGVJZCB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9ucy5nZXQocmVtb3RlSWQpO1xuICAgIH1cbiAgICBnZXRDb25uZWN0aW9ucyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25zLmZpbHRlcihzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25zO1xuICAgIH1cbiAgICBhc3luYyBjb2xsZWN0U3RhdHMocmVtb3RlSWQpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbnMuZ2V0KHJlbW90ZUlkKTtcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uIHx8ICFjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbGxlY3RTdGF0cygpO1xuICAgIH1cbiAgICBoYW5kbGVPdXRnb2luZ1N5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICAvLyBQZWVyIENvbm5lY3Rpb24gZXZlbnRzIGNhbiBmYWxsYmFjayBvbiB0aGUgc2lnbmFsaW5nIHNlcnZlclxuICAgICAgICBpZiAoZXZlbnQubWVzc2FnZVR5cGUgPT09IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uICYmICFldmVudC5wcm9wYWdhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvblBvb2wuc2VuZChldmVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbkdyb3VwLnNlbmQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVhcmx5UmV0dXJuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZWFybHkgcmV0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICAvLyBJZ25vcmUgZXZlbnRzIHdlIGRvbid0IHdhbnQgdG8gaGFuZGxlXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuRGlzY29ubmVjdDpcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdGF0czpcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5PcHRpbWl6YXRpb25Db25uZWN0aW9uU3VjY2VzczpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFldmVudC5kZXN0aW5hdGlvbklkcyB8fCBldmVudC5kZXN0aW5hdGlvbklkcy5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuUGVlckNvbm5lY3Rpb25JbnZhbGlkRGVzdGluYXRpb24sIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGVlciBDb25uZWN0aW9uIHN5c3RlbSBldmVudHMgbXVzdCBoYXZlIGV4YWN0bHkgb25lIGRlc3RpbmF0aW9uJyxcbiAgICAgICAgICAgICAgICBldmVudFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LmRlc3RpbmF0aW9uSWRzWzBdICE9PSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuUGVlckNvbm5lY3Rpb25JbnZhbGlkRGVzdGluYXRpb24sIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW5jb21pbmcgUGVlciBDb25uZWN0aW9uIGV2ZW50cyBtdXN0IGhhdmUgdGhlIGxvY2FsIGlkIGFzIGEgZGVzdGluYXRpb24nLFxuICAgICAgICAgICAgICAgIGV2ZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29ubmVjdGlvbnMuaGFzKGV2ZW50LnNvdXJjZUlkKSkge1xuICAgICAgICAgICAgbGV0IGNvbm5lY3Rpb25UeXBlID0gUGVlckNvbm5lY3Rpb25UeXBlLkNvcmU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc09mZmVyKGV2ZW50LmNvbnRlbnQpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5pc0ljZUNhbmRpZGF0ZShldmVudC5jb250ZW50KSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuaXNOZWVkUmVzdGFydChldmVudC5jb250ZW50KSkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlID0gZXZlbnQuY29udGVudC5jb25uZWN0aW9uVHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBldmVudHMgd2hlbiB0aGUgY29ubmVjdGlvbiBkb2Vzbid0IGV4aXN0XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVDb25uZWN0aW9uKGV2ZW50LnNvdXJjZUlkLCBjb25uZWN0aW9uVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbnMuZ2V0KGV2ZW50LnNvdXJjZUlkKTtcbiAgICAgICAgYXdhaXQgY29ubmVjdGlvbi5oYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgfVxuICAgIGhhbmRsZVJlbWVkaWF0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb246XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbnRlbnQudGFyZ2V0SWQgPT09IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmZvckVhY2goKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uaGFuZGxlUmVtZWRpYXRpb25TeXN0ZW1FdmVudHMoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLmdldChldmVudC5jb250ZW50LnRhcmdldElkKT8uaGFuZGxlUmVtZWRpYXRpb25TeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZU5vZGVTeXN0ZW1FdmVudHMoeyBjb250ZW50IH0pIHtcbiAgICAgICAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZU1lc3NhZ2VUeXBlLk5vZGVMZWF2ZTpcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ29ubmVjdGlvbihjb250ZW50LmlkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YWl0Rm9yQXJyYXlCdWZmZXJTaXplKCkge1xuICAgICAgICBjb25zdCBidWZmZXJTaXplID0gQXJyYXkuZnJvbSh0aGlzLmNvbm5lY3Rpb25zLnZhbHVlcygpKS5yZWR1Y2UoKGFjYywgY29ubmVjdGlvbikgPT4gYWNjICsgY29ubmVjdGlvbi5jYWxjdWxhdGVBcnJheUJ1ZmZlclNpemUoKSwgMCk7XG4gICAgICAgIGlmIChidWZmZXJTaXplIDwgQ09OTkVDVElPTl9NQVhfQlVGRkVSX1NJWkUpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYnVmZmVyU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdCdWZmZXJTaXplID0gQXJyYXkuZnJvbSh0aGlzLmNvbm5lY3Rpb25zLnZhbHVlcygpKS5yZWR1Y2UoKGFjYywgY29ubmVjdGlvbikgPT4gYWNjICsgY29ubmVjdGlvbi5jYWxjdWxhdGVBcnJheUJ1ZmZlclNpemUoKSwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0J1ZmZlclNpemUgPCBDT05ORUNUSU9OX01BWF9CVUZGRVJfU0laRSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXdCdWZmZXJTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhc0J1ZmZlcmVkRGF0YSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb25uZWN0aW9uIG9mIHRoaXMuY29ubmVjdGlvbnMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLmdldEJ1ZmZlcmVkQW1vdW50KCkgPiAwIHx8IGNvbm5lY3Rpb24uY2FsY3VsYXRlQXJyYXlCdWZmZXJTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjbG9zZUNvbm5lY3Rpb24ocmVtb3RlSWQpIHtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHRoaXMuY29ubmVjdGlvbnMuZ2V0KHJlbW90ZUlkKTtcbiAgICAgICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyUmVtb3RlTm9kZShyZW1vdGVJZCk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShjb25uZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChjb25uZWN0aW9uIGluc3RhbmNlb2YgUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25Hcm91cC5yZW1vdmVDb25uZWN0aW9uKGNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5kZWxldGUocmVtb3RlSWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzT2ZmZXIoY29udGVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudC50eXBlID09PSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk9mZmVyO1xuICAgIH1cbiAgICBpc05lZWRSZXN0YXJ0KGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQudHlwZSA9PT0gUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5OZWVkUmVzdGFydDtcbiAgICB9XG4gICAgaXNJY2VDYW5kaWRhdGUoY29udGVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudC50eXBlID09PSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLkhhbmRzaGFrZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25UeXBlLCBQZWVyQ29ubmVjdGlvbk9yaWdpbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vTWVkaWFTdWJzY3JpcHRpb25FdmVudCc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VDb25uZWN0aW9uIH0gZnJvbSAnbW9kZWxzL0Nvbm5lY3Rpb24vQmFzZUNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUmVjZWl2ZXJQZWVyQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL1JlY2VpdmVyUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgU2VuZGVyUGVlckNvbm5lY3Rpb24gfSBmcm9tICdtb2RlbHMvQ29ubmVjdGlvbi9TZW5kZXJQZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBpc1JlY2VpdmVyLCBpc1NlbmRlciwgZ2V0VG9waWNMYWJlbCB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vSGVscGVycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgUGVlckNvbm5lY3Rpb24gZXh0ZW5kcyBCYXNlQ29ubmVjdGlvbiB7XG4gICAgaWNlU2VydmVycztcbiAgICBjb25uZWN0aW9uVHlwZTtcbiAgICBtYXhGcHM7XG4gICAgbWF4QnBwO1xuICAgIGNvbm5lY3Rpb25Db25zdHJ1Y3RvcjtcbiAgICBzZW5kZXJDb25uZWN0aW9uO1xuICAgIHJlY2VpdmVyQ29ubmVjdGlvbjtcbiAgICByZWNlaXZlclVuc3Vic2NyaWJlcnMgPSBbXTtcbiAgICBtZXNzYWdlTGlzdGVuZXJzID0gY3JlYXRlT2JzZXJ2ZXIoKTtcbiAgICB0cmFja0xpc3RlbmVycyA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgcmVtb3ZlVHJhY2tMaXN0ZW5lcnMgPSBjcmVhdGVPYnNlcnZlcigpO1xuICAgIGxpc3RlbmVyVW5zdWJzY3JpYmVycyA9IFtdO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGRhdGFUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgZGF0YVVuc3Vic2NyaWJlcnMgPSBuZXcgTWFwKCk7XG4gICAgbWVkaWFUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgbWVkaWFVbnN1YnNjcmliZXJzID0gbmV3IE1hcCgpO1xuICAgIHN1Y2Nlc3NOb3RpZmllZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKGNsdXN0ZXJJZCwgbG9jYWxOb2RlLCByZW1vdGVJZCwgaWNlU2VydmVycywgY29ubmVjdGlvblR5cGUsIG1heEZwcywgbWF4QnBwLCBjb25uZWN0aW9uQ29uc3RydWN0b3IpIHtcbiAgICAgICAgc3VwZXIoY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkKTtcbiAgICAgICAgdGhpcy5pY2VTZXJ2ZXJzID0gaWNlU2VydmVycztcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uVHlwZSA9IGNvbm5lY3Rpb25UeXBlO1xuICAgICAgICB0aGlzLm1heEZwcyA9IG1heEZwcztcbiAgICAgICAgdGhpcy5tYXhCcHAgPSBtYXhCcHA7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yID0gY29ubmVjdGlvbkNvbnN0cnVjdG9yO1xuICAgIH1cbiAgICByZWdpc3RlclB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgc3dpdGNoIChwdWJsaXNoZXIuZ2V0Q29udGVudFR5cGUoKSkge1xuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5EYXRhOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5QdWJTdWI6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLk9iamVjdFN0b3JlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5LZXlWYWx1ZURhdGFiYXNlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5Kb2I6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLlZlY3RvckRhdGFiYXNlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5HcmFwaERhdGFiYXNlOlxuICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBUaGUgc3dpdGNoIHNob3VsZCBkaXNjcmltaW5hdGVcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgd2UgYWRkIGEgdW5pb24gdHlwZSBiZXR3ZWVuIElUb3BpY1B1Ymxpc2hlcjxJRGF0YVN1YnNjcmlwdGlvbkV2ZW50PiBhbmQgSVRvcGljUHVibGlzaGVyPElNZWRpYVN1YnNjcmlwdGlvbkV2ZW50Pj9cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFUb3BpY3Muc2V0KHB1Ymxpc2hlci5nZXRMYWJlbCgpLCBwdWJsaXNoZXIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5NZWRpYTpcbiAgICAgICAgICAgICAgICB0aGlzLm1lZGlhVG9waWNzLnNldChwdWJsaXNoZXIuZ2V0TGFiZWwoKSwgcHVibGlzaGVyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnJlZ2lzdGVyUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICBzd2l0Y2ggKHB1Ymxpc2hlci5nZXRDb250ZW50VHlwZSgpKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkRhdGE6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLlB1YlN1YjpcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuT2JqZWN0U3RvcmU6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2U6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkpvYjpcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuVmVjdG9yRGF0YWJhc2U6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkdyYXBoRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVG9waWNzLmRlbGV0ZShwdWJsaXNoZXIuZ2V0TGFiZWwoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLk1lZGlhOlxuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFUb3BpY3MuZGVsZXRlKHB1Ymxpc2hlci5nZXRMYWJlbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3RlclN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgICBzd2l0Y2ggKHN1YnNjcmliZXIuZ2V0Q29udGVudFR5cGUoKSkge1xuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5EYXRhOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5QdWJTdWI6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLk9iamVjdFN0b3JlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5LZXlWYWx1ZURhdGFiYXNlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5Kb2I6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLlZlY3RvckRhdGFiYXNlOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5HcmFwaERhdGFiYXNlOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBzdWJzY3JpYmVyLnN1YnNjcmliZSgoY29udGVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZW5kZXIoY29udGVudCwgdGhpcy5nZXRMb2NhbElkKCkpICYmIGlzUmVjZWl2ZXIoY29udGVudCwgdGhpcy5yZW1vdGVJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZChjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVVuc3Vic2NyaWJlcnMuc2V0KHN1YnNjcmliZXIuZ2V0TGFiZWwoKSwgdW5zdWJzY3JpYmUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5NZWRpYToge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gc3Vic2NyaWJlci5zdWJzY3JpYmUoKHsgY29udGVudCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29udGVudC5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uQWRkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJhY2soY29udGVudC50cmFjaywgY29udGVudC5zdHJlYW0sIGNvbnRlbnQucHJpb3JpdHksIGNvbnRlbnQucGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uUmVtb3ZlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVHJhY2soY29udGVudC50cmFjaywgY29udGVudC5zdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5VcGRhdGU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQcmlvcml0eShjb250ZW50LnN0cmVhbSwgY29udGVudC5wcmlvcml0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBhcmFtcyhjb250ZW50LnN0cmVhbSwgY29udGVudC5wYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFVbnN1YnNjcmliZXJzLnNldChzdWJzY3JpYmVyLmdldExhYmVsKCksIHVuc3Vic2NyaWJlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnJlZ2lzdGVyU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICAgIHN3aXRjaCAoc3Vic2NyaWJlci5nZXRDb250ZW50VHlwZSgpKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkRhdGE6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLlB1YlN1YjpcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuT2JqZWN0U3RvcmU6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2U6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkpvYjpcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuVmVjdG9yRGF0YWJhc2U6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkdyYXBoRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVW5zdWJzY3JpYmVycy5nZXQoc3Vic2NyaWJlci5nZXRMYWJlbCgpKT8uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVW5zdWJzY3JpYmVycy5kZWxldGUoc3Vic2NyaWJlci5nZXRMYWJlbCgpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudFR5cGUuTWVkaWE6XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYVVuc3Vic2NyaWJlcnMuZ2V0KHN1YnNjcmliZXIuZ2V0TGFiZWwoKSk/LigpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFVbnN1YnNjcmliZXJzLmRlbGV0ZShzdWJzY3JpYmVyLmdldExhYmVsKCkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZENvbnRlbnRUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLkRhdGEsXG4gICAgICAgICAgICBDb250ZW50VHlwZS5NZWRpYSxcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLlB1YlN1YixcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLk9iamVjdFN0b3JlLFxuICAgICAgICAgICAgQ29udGVudFR5cGUuS2V5VmFsdWVEYXRhYmFzZSxcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLkpvYixcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLlZlY3RvckRhdGFiYXNlLFxuICAgICAgICAgICAgQ29udGVudFR5cGUuR3JhcGhEYXRhYmFzZSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KCkge1xuICAgICAgICB0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT2ZmZXIoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXJzLmZvckVhY2goKHVuc3Vic2NyaWJlKSA9PiB1bnN1YnNjcmliZSgpKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uPy51bnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKCk7XG4gICAgICAgIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8uY2xvc2UoKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc2VuZGVyQ29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5yZWNlaXZlclVuc3Vic2NyaWJlcnMuZm9yRWFjaCgodW5zdWJzY3JpYmUpID0+IHVuc3Vic2NyaWJlKCkpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyVW5zdWJzY3JpYmVycyA9IFtdO1xuICAgICAgICB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbj8udW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbj8uY2xvc2UoKTtcbiAgICAgICAgZGVsZXRlIHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uO1xuICAgIH1cbiAgICBpc0Nvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8uaXNDb25uZWN0ZWQoKSAmJiB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbj8uaXNDb25uZWN0ZWQoKSB8fCBmYWxzZTtcbiAgICB9XG4gICAgc2VuZChkYXRhKSB7XG4gICAgICAgIGlmICghdGhpcy5zZW5kZXJDb25uZWN0aW9uIHx8ICF0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1NlbmRlciBjb25uZWN0aW9uIGlzIG5vdCBpbml0aWFsaXplZCB3aGlsZSB0cnlpbmcgdG8gc2VuZCBhIG1lc3NhZ2UuJyxcbiAgICAgICAgICAgICAgICBzZW5kZXJDb25uZWN0ZWQ6IHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8uaXNDb25uZWN0ZWQoKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlckNvbm5lY3RlZDogdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24/LmlzQ29ubmVjdGVkKCksXG4gICAgICAgICAgICAgICAgbG9jYWxJZDogdGhpcy5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZGVyQ29ubmVjdGlvbi5zZW5kKGRhdGEpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUxpc3RlbmVycy5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICBvblRyYWNrKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYWNrTGlzdGVuZXJzLnN1YnNjcmliZSgoeyB0cmFjaywgc3RyZWFtIH0pID0+IGNhbGxiYWNrKHRyYWNrLCBzdHJlYW0pKTtcbiAgICB9XG4gICAgb25SZW1vdmVUcmFjayhjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVUcmFja0xpc3RlbmVycy5zdWJzY3JpYmUoKHsgdHJhY2ssIHN0cmVhbSB9KSA9PiBjYWxsYmFjayh0cmFjaywgc3RyZWFtKSk7XG4gICAgfVxuICAgIGFkZFRyYWNrKHRyYWNrLCBzdHJlYW0sIHByaW9yaXR5LCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uPy5hZGRUcmFjayh0cmFjaywgc3RyZWFtLCBwcmlvcml0eSwgcGFyYW1zKTtcbiAgICB9XG4gICAgc2V0UHJpb3JpdHkoc3RyZWFtLCBwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LnNldFByaW9yaXR5KHN0cmVhbSwgcHJpb3JpdHkpO1xuICAgIH1cbiAgICBzZXRQYXJhbXMoc3RyZWFtLCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uPy5zZXRQYXJhbXMoc3RyZWFtLCBwYXJhbXMpO1xuICAgIH1cbiAgICByZW1vdmVUcmFjayh0cmFjaywgc3RyZWFtKSB7XG4gICAgICAgIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8ucmVtb3ZlVHJhY2sodHJhY2ssIHN0cmVhbSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVBlZXJDb25uZWN0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkNvbm5lY3Rpb24sICdDcmV3ZGxlQ29ubmVjdGlvbiBoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cycsIHRoaXMuZ2V0TG9jYWxJZCgpLCBldmVudCk7XG4gICAgICAgIGNvbnN0IHsgY29udGVudCB9ID0gZXZlbnQ7XG4gICAgICAgIHN3aXRjaCAoY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuT2ZmZXI6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVPZmZlcihjb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5BbnN3ZXI6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVBbnN3ZXIoY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuU3VjY2VzczpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN1Y2Nlc3MoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5IYW5kc2hha2U6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVJY2VDYW5kaWRhdGVzKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk5lZWRSZXN0YXJ0OlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTmVlZFJlc3RhcnQoY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuUmVzdGFydDpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlUmVtZWRpYXRpb25TeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uPy5hcHBseVJlbWVkaWF0aW9uKGV2ZW50LmNvbnRlbnQuZGF0YSk7XG4gICAgfVxuICAgIGdldENvbm5lY3Rpb25UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uVHlwZTtcbiAgICB9XG4gICAgc2V0Q29ubmVjdGlvblR5cGUoY29ubmVjdGlvblR5cGUpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uVHlwZSA9IGNvbm5lY3Rpb25UeXBlO1xuICAgICAgICB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LnNldENvbm5lY3Rpb25UeXBlKGNvbm5lY3Rpb25UeXBlKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24/LnNldENvbm5lY3Rpb25UeXBlKGNvbm5lY3Rpb25UeXBlKTtcbiAgICB9XG4gICAgYXN5bmMgY29sbGVjdFN0YXRzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LmNvbGxlY3RTdGF0cygpO1xuICAgICAgICBhd2FpdCB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbj8uY29sbGVjdFN0YXRzKCk7XG4gICAgfVxuICAgIGNhbGN1bGF0ZUFycmF5QnVmZmVyU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyQ29ubmVjdGlvbj8uY2FsY3VsYXRlQXJyYXlCdWZmZXJTaXplKCkgPz8gMDtcbiAgICB9XG4gICAgZ2V0QnVmZmVyZWRBbW91bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRlckNvbm5lY3Rpb24/LmdldEJ1ZmZlcmVkQW1vdW50KCkgPz8gMDtcbiAgICB9XG4gICAgc2V0dXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXJzLnB1c2godGhpcy5vbk1lc3NhZ2UoKGRhdGEpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBTaG91bGQgd2UgYWRkIGEgaGVscGVyIHRvIGNoZWNrIGZvciBzeXN0ZW0gdG9waWM/XG4gICAgICAgICAgICBpZiAoaXNSZWNlaXZlcihkYXRhLCB0aGlzLmdldExvY2FsSWQoKSkgJiYgZGF0YS50b3BpY0xhYmVsICE9PSBTWVNURU1fVE9QSUMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFUb3BpY3MuZ2V0KGRhdGEudG9waWNMYWJlbCk/LnB1Ymxpc2goZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlcnMucHVzaCh0aGlzLm9uVHJhY2soKHRyYWNrLCBzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvcGljTGFiZWwgPSBnZXRUb3BpY0xhYmVsKENvbnRlbnRUeXBlLk1lZGlhLCBzdHJlYW0uaWQsIHRoaXMucmVtb3RlSWQpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYVRvcGljcy5nZXQodG9waWNMYWJlbCk/LnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHRvcGljTGFiZWw6IHRvcGljTGFiZWwsXG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5SZW1vdGVBZGQsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlcnMucHVzaCh0aGlzLm9uUmVtb3ZlVHJhY2soKHRyYWNrLCBzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvcGljTGFiZWwgPSBnZXRUb3BpY0xhYmVsKENvbnRlbnRUeXBlLk1lZGlhLCBzdHJlYW0uaWQsIHRoaXMucmVtb3RlSWQpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYVRvcGljcy5nZXQodG9waWNMYWJlbCk/LnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHRvcGljTGFiZWw6IHRvcGljTGFiZWwsXG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5SZW1vdGVSZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaGFuZGxlSWNlQ2FuZGlkYXRlcyh7IGNhbmRpZGF0ZXMsIG9yaWdpbiwgdmVyc2lvbiB9KSB7XG4gICAgICAgIGlmIChvcmlnaW4gPT09IFBlZXJDb25uZWN0aW9uT3JpZ2luLlNlbmRlcikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVjZWl2ZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24uaGFuZGxlSGFuZHNoYWtlKGNhbmRpZGF0ZXMsIHZlcnNpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRlckNvbm5lY3Rpb24uaGFuZGxlSGFuZHNoYWtlKGNhbmRpZGF0ZXMsIHZlcnNpb24pO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVPZmZlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlbmRlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2VuZGVyQ29ubmVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVPZmZlcih7IG9mZmVyLCB2ZXJzaW9uIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVSZWNlaXZlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbi5oYW5kbGVPZmZlcihvZmZlciwgdmVyc2lvbik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFuc3dlcih7IGFuc3dlciwgdmVyc2lvbiB9KSB7XG4gICAgICAgIGlmICghdGhpcy5zZW5kZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkNvbm5lY3Rpb25Ob3Rpbml0aWFsaXplZCwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTZW5kZXIgY29ubmVjdGlvbiBpcyBub3QgaW5pdGlhbGl6ZWQuJyxcbiAgICAgICAgICAgICAgICBsb2NhbElkOiB0aGlzLmdldExvY2FsSWQoKSxcbiAgICAgICAgICAgICAgICByZW1vdGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBhbnN3ZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlbmRlckNvbm5lY3Rpb24uaGFuZGxlQW5zd2VyKGFuc3dlciwgdmVyc2lvbik7XG4gICAgfVxuICAgIGhhbmRsZVN1Y2Nlc3MoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1JlY2VpdmVyIGNvbm5lY3Rpb24gaXMgbm90IGluaXRpYWxpemVkLicsXG4gICAgICAgICAgICAgICAgbG9jYWxJZDogdGhpcy5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbi5oYW5kbGVTdWNjZXNzKCk7XG4gICAgICAgIGlmICghdGhpcy5zdWNjZXNzTm90aWZpZWQgJiYgdGhpcy5jb25uZWN0aW9uVHlwZSA9PT0gUGVlckNvbm5lY3Rpb25UeXBlLk9wdGltaXphdGlvbikge1xuICAgICAgICAgICAgdGhpcy5zdWNjZXNzTm90aWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYz8ucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFt0aGlzLmdldExvY2FsSWQoKV0sXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5PcHRpbWl6YXRpb25Db25uZWN0aW9uU3VjY2VzcyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOZWVkUmVzdGFydChjb250ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlUmVjZWl2ZXJDb25uZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24uaGFuZGxlTmVlZFJlc3RhcnQoY29udGVudC52ZXJzaW9uKTtcbiAgICB9XG4gICAgY3JlYXRlU2VuZGVyQ29ubmVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uID0gbmV3IFNlbmRlclBlZXJDb25uZWN0aW9uKHRoaXMuY2x1c3RlcklkLCB0aGlzLmxvY2FsTm9kZSwgdGhpcy5yZW1vdGVJZCwgdGhpcy5pY2VTZXJ2ZXJzLCB0aGlzLmNvbm5lY3Rpb25UeXBlLCB0aGlzLm1heEZwcywgdGhpcy5tYXhCcHAsIHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yKTtcbiAgICAgICAgdGhpcy5zZW5kZXJDb25uZWN0aW9uLnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHRoaXMuc3lzdGVtVG9waWMpO1xuICAgIH1cbiAgICBjcmVhdGVSZWNlaXZlckNvbm5lY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uID0gbmV3IFJlY2VpdmVyUGVlckNvbm5lY3Rpb24odGhpcy5jbHVzdGVySWQsIHRoaXMubG9jYWxOb2RlLCB0aGlzLnJlbW90ZUlkLCB0aGlzLmljZVNlcnZlcnMsIHRoaXMuY29ubmVjdGlvblR5cGUsIHRoaXMuY29ubmVjdGlvbkNvbnN0cnVjdG9yKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlckNvbm5lY3Rpb24ucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIodGhpcy5zeXN0ZW1Ub3BpYyk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJVbnN1YnNjcmliZXJzLnB1c2godGhpcy5yZWNlaXZlckNvbm5lY3Rpb24ub25NZXNzYWdlKChtZXNzYWdlKSA9PiB0aGlzLm1lc3NhZ2VMaXN0ZW5lcnMucHVibGlzaChtZXNzYWdlKSkpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyVW5zdWJzY3JpYmVycy5wdXNoKHRoaXMucmVjZWl2ZXJDb25uZWN0aW9uLm9uVHJhY2soKHRyYWNrLCBzdHJlYW0pID0+IHRoaXMudHJhY2tMaXN0ZW5lcnMucHVibGlzaCh7IHRyYWNrLCBzdHJlYW0gfSkpKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlclVuc3Vic2NyaWJlcnMucHVzaCh0aGlzLnJlY2VpdmVyQ29ubmVjdGlvbi5vblJlbW92ZVRyYWNrKCh0cmFjaywgc3RyZWFtKSA9PiB0aGlzLnJlbW92ZVRyYWNrTGlzdGVuZXJzLnB1Ymxpc2goeyB0cmFjaywgc3RyZWFtIH0pKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGVudFR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IENPTk5FQ1RJT05fR1JPVVBfUkVUUllfREVMQVkgfSBmcm9tICdjb25zdGFudHMvQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUMgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IEVhcmx5UmV0dXJuRXJyb3IgfSBmcm9tICdlcnJvcnMvRWFybHlSZXR1cm5FcnJvcic7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25UeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IGlzUmVjZWl2ZXIsIGlzU2VuZGVyIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9IZWxwZXJzJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgZ2V0Rm9ybWF0dGVkU3l0ZW1Mb2cgfSBmcm9tICd1dGlscy9Mb2dnZXIvSGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJ3V0aWxzL09ic2VydmVyL09ic2VydmVyJztcbmltcG9ydCB7IFN5bmNRdWV1ZUNhbGxiYWNrIH0gZnJvbSAndXRpbHMvUXVldWUvUXVldWUnO1xuaW1wb3J0IHsgY3JlYXRlVmVyc2lvbmVkUmV0cnlRdWV1ZSB9IGZyb20gJ3V0aWxzL1F1ZXVlL1ZlcnNpb25lZFJldHJ5UXVldWUnO1xuZXhwb3J0IGNsYXNzIFBlZXJDb25uZWN0aW9uR3JvdXAge1xuICAgIGxvY2FsSWQ7XG4gICAgbWVzc2FnZUJ1ZmZlcjtcbiAgICBncmFwaFNlcnZpY2U7XG4gICAgY29ubmVjdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgbWVzc2FnZUxpc3RlbmVycyA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgbWVzc2FnZVVuc3Vic2NyaWJlcjtcbiAgICBkYXRhVG9waWNzID0gbmV3IE1hcCgpO1xuICAgIGRhdGFVbnN1YnNjcmliZXJzID0gbmV3IE1hcCgpO1xuICAgIHJldHJ5UXVldWVzID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsSWQsIG1lc3NhZ2VCdWZmZXIsIGdyYXBoU2VydmljZSkge1xuICAgICAgICB0aGlzLmxvY2FsSWQgPSBsb2NhbElkO1xuICAgICAgICB0aGlzLm1lc3NhZ2VCdWZmZXIgPSBtZXNzYWdlQnVmZmVyO1xuICAgICAgICB0aGlzLmdyYXBoU2VydmljZSA9IGdyYXBoU2VydmljZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlVW5zdWJzY3JpYmVyID0gdGhpcy5vbk1lc3NhZ2UoKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2VCdWZmZXIuaGFzTWVzc2FnZShkYXRhLnV1aWQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUmVjZWl2ZXIoZGF0YSwgdGhpcy5sb2NhbElkKSAmJiBkYXRhLnRvcGljTGFiZWwgIT09IFNZU1RFTV9UT1BJQykge1xuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1ZmZlci5hZGRNZXNzYWdlKGRhdGEudXVpZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhVG9waWNzLmdldChkYXRhLnRvcGljTGFiZWwpPy5wdWJsaXNoKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkYXRhLnByb3BhZ2F0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2VuZChkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VVbnN1YnNjcmliZXI/LigpO1xuICAgIH1cbiAgICBhZGRDb25uZWN0aW9uKGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBjb25uZWN0aW9uLm9uTWVzc2FnZSgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlTGlzdGVuZXJzLnB1Ymxpc2goZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLnNldChjb25uZWN0aW9uLCB1bnN1YnNjcmliZSk7XG4gICAgICAgIHRoaXMucmV0cnlRdWV1ZXMuc2V0KGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSwgY3JlYXRlVmVyc2lvbmVkUmV0cnlRdWV1ZShuZXcgU3luY1F1ZXVlQ2FsbGJhY2soKGRhdGEpID0+IGNvbm5lY3Rpb24uc2VuZChkYXRhKSwgKCkgPT4gaW50ZXJ2YWwud2FpdChDT05ORUNUSU9OX0dST1VQX1JFVFJZX0RFTEFZKSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlQ29ubmVjdGlvbihjb25uZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbnMuZ2V0KGNvbm5lY3Rpb24pPy4oKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5kZWxldGUoY29ubmVjdGlvbik7XG4gICAgICAgIC8vIFRPRE8gLSBuZWVkIHRvIHNhdmUgdGhlIHF1ZXVlIHRvIHRyYW5zZmVyIGl0IHRvIGFub3RoZXIgY29ubmVjdGlvblxuICAgICAgICB0aGlzLnJldHJ5UXVldWVzLmdldChjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkpPy5jbGVhcigpO1xuICAgICAgICB0aGlzLnJldHJ5UXVldWVzLmRlbGV0ZShjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkpO1xuICAgIH1cbiAgICBpc0Nvbm5lY3RlZChkZXN0aW5hdGlvbklkKSB7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkNvbm5lY3Rpb25TdGF0ZSwgJ0Nvbm5lY3Rpb25Hcm91cCcsIHRoaXMubG9jYWxJZCwgdGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpO1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9ucy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpXG4gICAgICAgICAgICAuZmluZCgoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpID09PSBkZXN0aW5hdGlvbklkKT8uaXNDb25uZWN0ZWQoKSA/PyBmYWxzZTtcbiAgICB9XG4gICAgcmVnaXN0ZXJQdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuZGF0YVRvcGljcy5zZXQocHVibGlzaGVyLmdldExhYmVsKCksIHB1Ymxpc2hlcik7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJQdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuZGF0YVRvcGljcy5kZWxldGUocHVibGlzaGVyLmdldExhYmVsKCkpO1xuICAgIH1cbiAgICByZWdpc3RlclN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHN1YnNjcmliZXIuc3Vic2NyaWJlKHRoaXMuc2VuZC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5kYXRhVW5zdWJzY3JpYmVycy5zZXQoc3Vic2NyaWJlci5nZXRMYWJlbCgpLCB1bnN1YnNjcmliZSk7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTdWJzY3JpYmVyKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5kYXRhVW5zdWJzY3JpYmVycy5nZXQoc3Vic2NyaWJlci5nZXRMYWJlbCgpKT8uKCk7XG4gICAgICAgIHRoaXMuZGF0YVVuc3Vic2NyaWJlcnMuZGVsZXRlKHN1YnNjcmliZXIuZ2V0TGFiZWwoKSk7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZENvbnRlbnRUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLkRhdGEsXG4gICAgICAgICAgICBDb250ZW50VHlwZS5QdWJTdWIsXG4gICAgICAgICAgICBDb250ZW50VHlwZS5PYmplY3RTdG9yZSxcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2UsXG4gICAgICAgICAgICBDb250ZW50VHlwZS5Kb2IsXG4gICAgICAgICAgICBDb250ZW50VHlwZS5WZWN0b3JEYXRhYmFzZSxcbiAgICAgICAgICAgIENvbnRlbnRUeXBlLkdyYXBoRGF0YWJhc2UsXG4gICAgICAgIF07XG4gICAgfVxuICAgIHNlbmQoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5yZXRyeSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnByb3BhZ2F0ZSB8fCAhZGF0YS5kZXN0aW5hdGlvbklkcyB8fCBkYXRhLmRlc3RpbmF0aW9uSWRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuQ29ubmVjdGlvbkludmFsaWREYXRhRXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NyZXdkbGVDb25uZWN0aW9uR3JvdXA6IENhbm5vdCBicm9hZGNhc3Qgd2l0aCBBcHBTeW5jLicsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsSWQ6IHRoaXMubG9jYWxJZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0Nvbm5lY3RlZChkYXRhLmRlc3RpbmF0aW9uSWRzWzBdKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFYXJseVJldHVybkVycm9yKCdJZ25vcmluZyBtZXNzYWdlIC0gcmV0cnkgZmxhZyBpcyBmYWxzZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUmVjaXBpZW50cyA9IGRhdGEucmVjaXBpZW50cyA/PyBbXTtcbiAgICAgICAgLy8gRmlsdGVyIG91dCBkZXN0aW5hdGlvbklkcyB0aGF0IGFyZSBhbHJlYWR5IGluIHJlY2lwaWVudHNcbiAgICAgICAgLy8gQW5kIGV4dGVuZCByZWNpcGllbnRzIHdpdGggYWxsIGNvbm5lY3Rpb25zXG4gICAgICAgIC8vIElmIHRocm93cywgaXQgbWVhbnMgdGhhdCBhbGwgY29ubmVjdGlvbnMgYXJlIGFscmVhZHkgaW4gcmVjaXBpZW50cywgd2UgY2FuIHN0b3AgcHJvcGFnYXRpb25cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBSZXZpZXcgaWYgd2UgbmVlZCB0byBhZGp1c3QgZXh0ZW5kZWRSZWNpcGllbnRzIHdpdGggdGhlIG5ldyBydWxlc1xuICAgICAgICAgICAgY29uc3QgeyBmaWx0ZXJlZERlc3RpbmF0aW9uSWRzLCBleHRlbmRlZFJlY2lwaWVudHMgfSA9IHRoaXMudXBkYXRlUHJvcGFnYXRpb25Qcm9wZXJ0aWVzKGRhdGEsIGV4aXN0aW5nUmVjaXBpZW50cyk7XG4gICAgICAgICAgICBkYXRhLmRlc3RpbmF0aW9uSWRzID0gZmlsdGVyZWREZXN0aW5hdGlvbklkcztcbiAgICAgICAgICAgIGRhdGEucmVjaXBpZW50cyA9IGV4dGVuZGVkUmVjaXBpZW50cztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFYXJseVJldHVybkVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuQ29ubmVjdGlvbiwgJ0NyZXdkbGVDb25uZWN0aW9uR3JvdXAnLCAnRWFybHkgcmV0dXJuJywgZGF0YSwgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gT25seSBwcm9wYWdhdGUgaWYgbm90IGFsbCBkZXN0aW5hdGlvbklkcyBhcmUgaW4gY29ubmVjdGlvbnNcbiAgICAgICAgY29uc3QgcHJvcGFnYXRlID0gdGhpcy5zaG91bGRDb250aW51ZVByb3BhZ2F0aW9uKGRhdGEpO1xuICAgICAgICB0aGlzLmxvZ1Byb3BhZ2F0ZVN5c3RlbUV2ZW50KGRhdGEsIHByb3BhZ2F0ZSk7XG4gICAgICAgIGRhdGEucHJvcGFnYXRlID0gcHJvcGFnYXRlO1xuICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IHRoaXMuZ2V0Q29ubmVjdGlvbkRlc3RpbmF0aW9ucyhkYXRhLCBleGlzdGluZ1JlY2lwaWVudHMpO1xuICAgICAgICAvLyBUT0RPIC0gU2hvdWxkIHdlIGhhdmUgYSBnbG9iYWwgQ29ubmVjdGlvbkdyb3VwIHJldHJ5IHF1ZXVlP1xuICAgICAgICAvLyBJZiB3ZSBjdXJyZW50bHkgaGF2ZSAwIGNvbm5lY3Rpb25zIChmb3IgZXhhbXBsZSBvdXIgY29ubmVjdGlvbnMgYXJlIGxlZnQgYXQgdGhlIHNhbWUgdGltZSlcbiAgICAgICAgLy8gV2hlbiBwdWJsaXNoaW5nIGEgbWVzc2FnZSwgdGhlIG1lc3NhZ2Ugd2lsbCBzaW1wbHkgYmUgbG9zdFxuICAgICAgICBmb3IgKGNvbnN0IGNvbm5lY3Rpb24gb2YgY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldHJ5UXVldWUgPSB0aGlzLnJldHJ5UXVldWVzLmdldChjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkpO1xuICAgICAgICAgICAgaWYgKCFyZXRyeVF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Db25uZWN0aW9uTm9SZXRyeVF1ZXVlLCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDcmV3ZGxlQ29ubmVjdGlvbkdyb3VwOiBObyByZXRyeSBxdWV1ZSBhdmFpbGFibGUuJyxcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxJZDogdGhpcy5sb2NhbElkLFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVJZDogY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0cnlRdWV1ZS5wdXNoKGRhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlbW90ZUlkKCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGdldExvY2FsSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsSWQ7XG4gICAgfVxuICAgIG9uTWVzc2FnZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlTGlzdGVuZXJzLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHVwZGF0ZVByb3BhZ2F0aW9uUHJvcGVydGllcyhkYXRhLCBleGlzdGluZ1JlY2lwaWVudHMpIHtcbiAgICAgICAgY29uc3QgbmV3UHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgIGZpbHRlcmVkRGVzdGluYXRpb25JZHM6IGRhdGEuZGVzdGluYXRpb25JZHMsXG4gICAgICAgICAgICBleHRlbmRlZFJlY2lwaWVudHM6IGRhdGEucmVjaXBpZW50cyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFkYXRhLnByb3BhZ2F0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld1Byb3BlcnRpZXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVjaXBpZW50cyA9IEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKChjb25uZWN0aW9uKSA9PiBjb25uZWN0aW9uLmdldENvbm5lY3Rpb25UeXBlKCkgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlIHx8IGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSlcbiAgICAgICAgICAgIC5tYXAoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSk7XG4gICAgICAgIGNvbnN0IGFsbFJlY2lwaWVudHNSZWNlaXZlZCA9IHJlY2lwaWVudHMucmVkdWNlKChhY2MsIHJlY2lwaWVudCkgPT4gYWNjICYmIGRhdGEucmVjaXBpZW50cy5pbmNsdWRlcyhyZWNpcGllbnQpLCB0cnVlKTtcbiAgICAgICAgaWYgKGFsbFJlY2lwaWVudHNSZWNlaXZlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVhcmx5UmV0dXJuRXJyb3IoJ0FsbCByZWNpcGllbnRzIGFscmVhZHkgcmVjZWl2ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5kZXN0aW5hdGlvbklkcykge1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWREZXN0aW5hdGlvbklkcyA9IGRhdGEuZGVzdGluYXRpb25JZHMuZmlsdGVyKChkZXN0aW5hdGlvbklkKSA9PiBkZXN0aW5hdGlvbklkICE9PSB0aGlzLmxvY2FsSWQgJiYgIWRhdGEucmVjaXBpZW50cy5pbmNsdWRlcyhkZXN0aW5hdGlvbklkKSk7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWREZXN0aW5hdGlvbklkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWFybHlSZXR1cm5FcnJvcignTm8gZGVzdGluYXRpb25JZHMgbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3UHJvcGVydGllcy5maWx0ZXJlZERlc3RpbmF0aW9uSWRzID0gZmlsdGVyZWREZXN0aW5hdGlvbklkcztcbiAgICAgICAgfVxuICAgICAgICBuZXdQcm9wZXJ0aWVzLmV4dGVuZGVkUmVjaXBpZW50cyA9IFsuLi5uZXcgU2V0KFsuLi5leGlzdGluZ1JlY2lwaWVudHMsIC4uLnJlY2lwaWVudHMsIHRoaXMubG9jYWxJZF0pXTsgLy8gUmVtb3ZlcyBkdXBsaWNhdGVzXG4gICAgICAgIHJldHVybiBuZXdQcm9wZXJ0aWVzO1xuICAgIH1cbiAgICBsb2dQcm9wYWdhdGVTeXN0ZW1FdmVudChkYXRhLCBwcm9wYWdhdGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAoZGF0YS50b3BpY0xhYmVsID09PSBTWVNURU1fVE9QSUMgJiYgIWlzU2VuZGVyKGRhdGEsIHRoaXMubG9jYWxJZCkgJiYgZGF0YS5wcm9wYWdhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFN5c3RlbUxvZyA9IGdldEZvcm1hdHRlZFN5dGVtTG9nKGRhdGEsIHRoaXMubG9jYWxJZCk7XG4gICAgICAgICAgICBsb2dnZXIubG9nUmF3KExvZ2dpbmdDaGFubmVscy5TeXN0ZW0sIGAke2RhdGEudXVpZH0gLSBTZW5kaW5nIHByb3BhZ2F0aW9uICgke3Byb3BhZ2F0ZX0pICR7Zm9ybWF0dGVkU3lzdGVtTG9nfWAsIGRhdGEsIHByb3BhZ2F0ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2hvdWxkQ29udGludWVQcm9wYWdhdGlvbihkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhLmRlc3RpbmF0aW9uSWRzICYmIGRhdGEucHJvcGFnYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uSWRzID0gQXJyYXkuZnJvbSh0aGlzLmNvbm5lY3Rpb25zLmtleXMoKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChjb25uZWN0aW9uKSA9PiBjb25uZWN0aW9uLmdldENvbm5lY3Rpb25UeXBlKCkgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5Db3JlIHx8IGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSlcbiAgICAgICAgICAgICAgICAubWFwKChjb25uZWN0aW9uKSA9PiBjb25uZWN0aW9uLmdldFJlbW90ZUlkKCkpO1xuICAgICAgICAgICAgcmV0dXJuICFkYXRhLmRlc3RpbmF0aW9uSWRzLnJlZHVjZSgoYWNjLCBkZXN0aW5hdGlvbklkKSA9PiBhY2MgJiYgY29ubmVjdGlvbklkcy5pbmNsdWRlcyhkZXN0aW5hdGlvbklkKSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGEucHJvcGFnYXRlID8/IGZhbHNlO1xuICAgIH1cbiAgICBnZXRDb25uZWN0aW9uRGVzdGluYXRpb25zKGRhdGEsIGV4aXN0aW5nUmVjaXBpZW50cykge1xuICAgICAgICAvLyBGaWx0ZXIgY29ubmVjdGlvbiBpZiBpdCBhbHJlYWR5IGV4aXN0cyBpbiByZWNpcGllbnRzXG4gICAgICAgIC8vIE9yIGlmIGl0J3Mgbm90IGEgcmVjZWl2ZXIgYW5kIHdlIGRvbid0IHdhbnQgdG8gcHJvcGFnYXRlXG4gICAgICAgIGNvbnN0IGZpbHRlckNvbm5lY3Rpb24gPSAoY29ubmVjdGlvbklkKSA9PiAhZXhpc3RpbmdSZWNpcGllbnRzLmluY2x1ZGVzKGNvbm5lY3Rpb25JZClcbiAgICAgICAgICAgICYmIChpc1JlY2VpdmVyKGRhdGEsIGNvbm5lY3Rpb25JZCkgfHwgZGF0YS5wcm9wYWdhdGUpO1xuICAgICAgICBpZiAoZGF0YS5wcm9wYWdhdGUgJiYgZGF0YS5kZXN0aW5hdGlvbklkcykge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbklkcyA9IEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRDb25uZWN0aW9uVHlwZSgpID09PSBQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSB8fCBjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpXG4gICAgICAgICAgICAgICAgLm1hcCgoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgY29uc3QgbnVtYmVyT2ZDb25uZWN0aW9uc1RvQ2hvb3NlID0gZGF0YS5zb3VyY2VJZCA9PT0gdGhpcy5sb2NhbElkID8gMyA6IDE7XG4gICAgICAgICAgICBkYXRhLmRlc3RpbmF0aW9uSWRzLmZvckVhY2goKGRlc3RpbmF0aW9uSWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlSWRzID0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0Q2xvc2VzdE5vZGVzKGNvbm5lY3Rpb25JZHMsIGRlc3RpbmF0aW9uSWQpO1xuICAgICAgICAgICAgICAgIGxldCBub2RlSWRzQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGxldCBvcHRpbWl6YXRpb25Db3VudCA9IDA7XG4gICAgICAgICAgICAgICAgbm9kZUlkcy5mb3JFYWNoKChub2RlSWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVJZHNDb3VudCA+PSBudW1iZXJPZkNvbm5lY3Rpb25zVG9DaG9vc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gQXJyYXkuZnJvbSh0aGlzLmNvbm5lY3Rpb25zLmtleXMoKSkuZmluZCgoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpID09PSBub2RlSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGNvcmUgY29ubmVjdGlvbnMgaWYgd2UgdXNlZCBvcHRpbWl6YXRpb25zIGNvbm5lY3Rpb25zIHVudGlsIHdlJ3ZlIGlnbm9yZWQgdGhlIGZpcnN0IG4gY29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgYWxsb3cgdG8gaGF2ZSBhIGJldHRlciBkaXN0cmlidXRpb24gb2YgY29ubmVjdGlvbnMgYnkgc2VsZWN0aW5nIHRoZSBjb3JlIGNvbm5lY3Rpb25zIGNsb3Nlc3QgdG8geW91XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGUgcmlnaHQgZGlyZWN0aW9uIChhbmNlc3RvciB2cyBzdWNjZXNzb3IpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvbi5nZXRDb25uZWN0aW9uVHlwZSgpID09PSBQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSAmJiBvcHRpbWl6YXRpb25Db3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6YXRpb25Db3VudCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zLmFkZChjb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uLmdldENvbm5lY3Rpb25UeXBlKCkgPT09IFBlZXJDb25uZWN0aW9uVHlwZS5PcHRpbWl6YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpbWl6YXRpb25Db3VudCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkc0NvdW50ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY29ubmVjdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsd2F5cyBzZW5kIHRvIGNvcmUgY29ubmVjdGlvbnMgb3IgaWYgaXQncyBhIGRpcmVjdCBtZXNzYWdlLCBvdGhlcndpc2Ugc2VuZCB0byBjb25uZWN0ZWQgY29ubmVjdGlvbnNcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKChjb25uZWN0aW9uKSA9PiBmaWx0ZXJDb25uZWN0aW9uKGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSkgJiYgKCFkYXRhLnByb3BhZ2F0ZSB8fCBjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkgfHwgY29ubmVjdGlvbi5nZXRDb25uZWN0aW9uVHlwZSgpID09PSBQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUMgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IEVhcmx5UmV0dXJuRXJyb3IgfSBmcm9tICdlcnJvcnMvRWFybHlSZXR1cm5FcnJvcic7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgeyBpc1JlY2VpdmVyIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9IZWxwZXJzJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgUGVlckNvbm5lY3Rpb25Qb29sIHtcbiAgICBsb2NhbElkO1xuICAgIG1lc3NhZ2VCdWZmZXI7XG4gICAgY29ubmVjdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgY29uc3RydWN0b3IobG9jYWxJZCwgbWVzc2FnZUJ1ZmZlcikge1xuICAgICAgICB0aGlzLmxvY2FsSWQgPSBsb2NhbElkO1xuICAgICAgICB0aGlzLm1lc3NhZ2VCdWZmZXIgPSBtZXNzYWdlQnVmZmVyO1xuICAgIH1cbiAgICBjbG9zZSgpIHsgfVxuICAgIHNlbmQobWVzc2FnZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbm5lY3Rpb24gb2YgdGhpcy5jb25uZWN0aW9ucy5rZXlzKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgcmV0cnk6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gSWdub3JlIGVhcmx5IHJldHVyblxuICAgICAgICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBFYXJseVJldHVybkVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Qb29sLCBgc2VuZCBlcnJvciBvbiAke2Nvbm5lY3Rpb259YCwgZSwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlBvb2wsICdObyBjb25uZWN0aW9ucyBhdmFpbGFibGUgdG8gc2VuZCBtZXNzYWdlJyk7XG4gICAgfVxuICAgIGFkZENvbm5lY3Rpb24oY29ubmVjdGlvbikge1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IGNvbm5lY3Rpb24ub25NZXNzYWdlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5tZXNzYWdlQnVmZmVyLmhhc01lc3NhZ2UoZGF0YS51dWlkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRvcGljTGFiZWwgPT09IFNZU1RFTV9UT1BJQykge1xuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1ZmZlci5hZGRNZXNzYWdlKGRhdGEudXVpZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzUmVjZWl2ZXIoZGF0YSwgdGhpcy5sb2NhbElkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljPy5wdWJsaXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbnMuc2V0KGNvbm5lY3Rpb24sIHVuc3Vic2NyaWJlKTtcbiAgICB9XG4gICAgcmVtb3ZlQ29ubmVjdGlvbihjb25uZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbnMuZ2V0KGNvbm5lY3Rpb24pPy4oKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5kZWxldGUoY29ubmVjdGlvbik7XG4gICAgfVxuICAgIGdldExvY2FsSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsSWQ7XG4gICAgfVxuICAgIGdldFJlbW90ZUlkKCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZENvbnRlbnRUeXBlcygpIHtcbiAgICAgICAgcmV0dXJuIFtDb250ZW50VHlwZS5EYXRhXTtcbiAgICB9XG4gICAgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIC8vIFRPRE8gLSBpbXBsZW1lbnRcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUMsIFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgUEVFUl9DT05ORUNUSU9OX0NIVU5LX0lERU5USUZJRVIsIFBFRVJfQ09OTkVDVElPTl9DSFVOS19TSVpFLCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkcsIFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUE9ORywgUEVFUl9DT05ORUNUSU9OX01FU1NBR0VfUkVUUlkgfSBmcm9tICdjb25zdGFudHMvUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25UeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUsIFBlZXJDb25uZWN0aW9uT3JpZ2luIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZVBlZXJDb25uZWN0aW9uIH0gZnJvbSAnbW9kZWxzL0Nvbm5lY3Rpb24vQmFzZVBlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IHNlbmRTdGF0cyB9IGZyb20gJ21vZGVscy9TdGF0cy9IZWxwZXJzJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5pbXBvcnQgeyBnZXRMb2dnYWJsZVN5c3RlbU1lc3NhZ2UgfSBmcm9tICd1dGlscy9Mb2dnZXIvSGVscGVycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgY3JlYXRlU2luZ2xlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgUmVjZWl2ZXJQZWVyQ29ubmVjdGlvbiBleHRlbmRzIEJhc2VQZWVyQ29ubmVjdGlvbiB7XG4gICAgbWVzc2FnZUNhbGxiYWNrID0gY3JlYXRlU2luZ2xlT2JzZXJ2ZXIoKTtcbiAgICB0cmFja0NhbGxiYWNrID0gY3JlYXRlU2luZ2xlT2JzZXJ2ZXIoKTtcbiAgICByZW1vdmVUcmFja0NhbGxiYWNrID0gY3JlYXRlU2luZ2xlT2JzZXJ2ZXIoKTtcbiAgICByZWNlaXZlcnMgPSBuZXcgTWFwKCk7XG4gICAgY2h1bmtzID0gbmV3IE1hcCgpO1xuICAgIHdhaXRTdWNjZXNzO1xuICAgIG1lc3NhZ2VzUmVjZWl2ZWQgPSAwO1xuICAgIHN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWQgPSB7IG1lc3NhZ2VzOiB7IHRvdGFsOiAwIH0gfTtcbiAgICBieXRlc1JlY2VpdmVkID0gMDtcbiAgICB0aW1lUmVjZWl2aW5nID0gMDtcbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jbGVhcldhaXRTdWNjZXNzKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJzLmNsZWFyKCk7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZU9mZmVyKG9mZmVyLCB2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLmNsZWFyV2FpdFN1Y2Nlc3MoKTtcbiAgICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgdGhpcy5jb25uZWN0aW9uLmNyZWF0ZUFuc3dlcihvZmZlcik7XG4gICAgICAgIHRoaXMucHJvY2Vzc1BlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzKCk7XG4gICAgICAgIGNvbnN0IHV1aWQgPSB1dWlkdjQoKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLkFuc3dlcixcbiAgICAgICAgICAgIGFuc3dlcixcbiAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgICAgICBjb25uZWN0aW9uVHlwZTogdGhpcy5jb25uZWN0aW9uVHlwZSxcbiAgICAgICAgfSwgdXVpZCk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25UeXBlICE9PSBQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2FpdFN1Y2Nlc3MgPSBpbnRlcnZhbC5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hTeXN0ZW1NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLkFuc3dlcixcbiAgICAgICAgICAgICAgICBhbnN3ZXIsXG4gICAgICAgICAgICAgICAgdmVyc2lvbixcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uVHlwZTogdGhpcy5jb25uZWN0aW9uVHlwZSxcbiAgICAgICAgICAgIH0sIHV1aWQpO1xuICAgICAgICB9LCBQRUVSX0NPTk5FQ1RJT05fTUVTU0FHRV9SRVRSWSk7XG4gICAgfVxuICAgIGhhbmRsZVN1Y2Nlc3MoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJXYWl0U3VjY2VzcygpO1xuICAgIH1cbiAgICBoYW5kbGVOZWVkUmVzdGFydCh2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMucmVzZXRDb25uZWN0aW9uKHZlcnNpb24pO1xuICAgICAgICB0aGlzLnB1Ymxpc2hTeXN0ZW1NZXNzYWdlKHsgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5SZXN0YXJ0IH0pO1xuICAgIH1cbiAgICBhc3luYyBjb2xsZWN0U3RhdHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW1Ub3BpYykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jb2xsZWN0UmVjZWl2ZXJzU3RhdHModGhpcy5yZWNlaXZlcnMsIChzdGF0cywgc3RyZWFtSWQpID0+IHtcbiAgICAgICAgICAgIHNlbmRTdGF0cyh7XG4gICAgICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdGF0cyxcbiAgICAgICAgICAgICAgICBzdHJlYW1JZCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgc3RhdHMsXG4gICAgICAgICAgICB9LCB0aGlzLnN5c3RlbVRvcGljKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuU3RhdHMsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogUGVlckNvbm5lY3Rpb25PcmlnaW4uUmVjZWl2ZXIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNSZWNlaXZlZDogdGhpcy5tZXNzYWdlc1JlY2VpdmVkLFxuICAgICAgICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkOiB0aGlzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVSZWNlaXZpbmc6IHRoaXMudGltZVJlY2VpdmluZyxcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVzc2FnZXM6IHRoaXMuc3lzdGVtTWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZShjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlQ2FsbGJhY2suc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgb25UcmFjayhjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFja0NhbGxiYWNrLnN1YnNjcmliZSgoeyB0cmFjaywgc3RyZWFtIH0pID0+IGNhbGxiYWNrKHRyYWNrLCBzdHJlYW0pKTtcbiAgICB9XG4gICAgb25SZW1vdmVUcmFjayhjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVUcmFja0NhbGxiYWNrLnN1YnNjcmliZSgoeyB0cmFjaywgc3RyZWFtIH0pID0+IGNhbGxiYWNrKHRyYWNrLCBzdHJlYW0pKTtcbiAgICB9XG4gICAgcmVzZXRDb25uZWN0aW9uKHZlcnNpb24pIHtcbiAgICAgICAgdGhpcy5jbGVhcldhaXRTdWNjZXNzKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJzLmZvckVhY2goKHRyYWNrcykgPT4ge1xuICAgICAgICAgICAgdHJhY2tzLmNsZWFyKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdXBlci5yZXNldENvbm5lY3Rpb24odmVyc2lvbik7XG4gICAgfVxuICAgIHNlbmRJY2VDYW5kaWRhdGVzKCkge1xuICAgICAgICB0aGlzLnB1Ymxpc2hTeXN0ZW1NZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuSGFuZHNoYWtlLFxuICAgICAgICAgICAgY2FuZGlkYXRlczogdGhpcy5oYW5kc2hha2VDYW5kaWRhdGVzLFxuICAgICAgICAgICAgb3JpZ2luOiBQZWVyQ29ubmVjdGlvbk9yaWdpbi5SZWNlaXZlcixcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICBjb25uZWN0aW9uVHlwZTogdGhpcy5jb25uZWN0aW9uVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldHVwQ29ubmVjdGlvbkV2ZW50cygpIHtcbiAgICAgICAgc3VwZXIuc2V0dXBDb25uZWN0aW9uRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vblRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Db25uZWN0aW9uLCAnQ3Jld2RsZVJlY2VpdmVyQ29ubmVjdGlvbiBvbnRyYWNrJywgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgZXZlbnQpO1xuICAgICAgICAgICAgZXZlbnQuc3RyZWFtc1swXS5vbnJlbW92ZXRyYWNrID0gKHJlbW92ZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlcnMuZ2V0KGV2ZW50LnN0cmVhbXNbMF0uaWQpPy5kZWxldGUocmVtb3ZlRXZlbnQudHJhY2spO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlY2VpdmVycy5nZXQoZXZlbnQuc3RyZWFtc1swXS5pZCk/LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlcnMuZGVsZXRlKGV2ZW50LnN0cmVhbXNbMF0uaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrQ2FsbGJhY2sucHVibGlzaCh7IHRyYWNrOiByZW1vdmVFdmVudC50cmFjaywgc3RyZWFtOiBldmVudC5zdHJlYW1zWzBdIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghdGhpcy5yZWNlaXZlcnMuaGFzKGV2ZW50LnN0cmVhbXNbMF0uaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlcnMuc2V0KGV2ZW50LnN0cmVhbXNbMF0uaWQsIG5ldyBTZXQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVycy5nZXQoZXZlbnQuc3RyZWFtc1swXS5pZCkuYWRkKGV2ZW50LnRyYWNrKTtcbiAgICAgICAgICAgIHRoaXMudHJhY2tDYWxsYmFjay5wdWJsaXNoKHsgdHJhY2s6IGV2ZW50LnRyYWNrLCBzdHJlYW06IGV2ZW50LnN0cmVhbXNbMF0gfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbkRhdGFDaGFubmVsID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsID0gZXZlbnQuY2hhbm5lbDtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwub25NZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEgPT09IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUElORykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignbWlzc2luZy1kYXRhY2hhbm5lbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb246ICdyZWNlaXZlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFDaGFubmVsLnN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLnNlbmQoUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9QT05HKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU9uTWVzc2FnZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfVxuICAgIGhhbmRsZU9uTWVzc2FnZShkYXRhKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgJiYgZGF0YS5zdGFydHNXaXRoKFBFRVJfQ09OTkVDVElPTl9DSFVOS19JREVOVElGSUVSKSkge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc1JlY2VpdmVkICs9IDE7XG4gICAgICAgICAgICB0aGlzLmJ5dGVzUmVjZWl2ZWQgKz0gZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDaHVua01lc3NhZ2UoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBkYXRhLmxlbmd0aCA8PSBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNSZWNlaXZlZCArPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCArPSBkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBkYXRhLmJ5dGVMZW5ndGggOiBkYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBtZXNzYWdlO1xuICAgICAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtoZWFkZXIsIGNvbnRlbnRdID0gdGhpcy5zcGxpdFBhcnRzKGRhdGEpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBoZWFkZXI7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5jb250ZW50LmRhdGEgPSBjb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWVzc2FnZS50b3BpY0xhYmVsID09PSBTWVNURU1fVE9QSUMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWQubWVzc2FnZXMudG90YWwgKz0gMTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHN5c3RlbU1lc3NhZ2VUeXBlLCBzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGUgfSA9IGdldExvZ2dhYmxlU3lzdGVtTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3lzdGVtTWVzc2FnZXNSZWNlaXZlZFtzeXN0ZW1NZXNzYWdlVHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1NZXNzYWdlc1JlY2VpdmVkW3N5c3RlbU1lc3NhZ2VUeXBlXSA9IHsgW3N5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZV06IDAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWRbc3lzdGVtTWVzc2FnZVR5cGVdW3N5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1NZXNzYWdlc1JlY2VpdmVkW3N5c3RlbU1lc3NhZ2VUeXBlXVtzeXN0ZW1Db250ZW50TWVzc2FnZVR5cGVdID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWRbc3lzdGVtTWVzc2FnZVR5cGVdLnRvdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3lzdGVtTWVzc2FnZXNSZWNlaXZlZFtzeXN0ZW1NZXNzYWdlVHlwZV0udG90YWwgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWRbc3lzdGVtTWVzc2FnZVR5cGVdW3N5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZV0gKz0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLnN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWRbc3lzdGVtTWVzc2FnZVR5cGVdLnRvdGFsICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VDYWxsYmFjay5wdWJsaXNoKG1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhpcy50aW1lUmVjZWl2aW5nICs9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgICAgIH0sIDApO1xuICAgIH1cbiAgICBoYW5kbGVDaHVua01lc3NhZ2UoZGF0YSkge1xuICAgICAgICBjb25zdCBpbmZvID0gZGF0YS5zcGxpdCgnOycpO1xuICAgICAgICBjb25zdCBpZCA9IGluZm9bMV07XG4gICAgICAgIGNvbnN0IGNodW5rID0gcGFyc2VJbnQoaW5mb1syXSwgMTApO1xuICAgICAgICBjb25zdCB0b3RhbCA9IHBhcnNlSW50KGluZm9bM10sIDEwKTtcbiAgICAgICAgY29uc3QgY2h1bmtEYXRhID0gZGF0YS5yZXBsYWNlKGAke1BFRVJfQ09OTkVDVElPTl9DSFVOS19JREVOVElGSUVSfTske2lkfTske2NodW5rfTske3RvdGFsfTtgLCAnJyk7XG4gICAgICAgIGlmICghdGhpcy5jaHVua3MuaGFzKGlkKSkge1xuICAgICAgICAgICAgdGhpcy5jaHVua3Muc2V0KGlkLCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5jaHVua3MuZ2V0KGlkKTtcbiAgICAgICAgY2h1bmtzW2NodW5rXSA9IGNodW5rRGF0YTtcbiAgICAgICAgaWYgKGNodW5rcy5sZW5ndGggPT09IHRvdGFsKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU9uTWVzc2FnZShjaHVua3Muam9pbignJykpO1xuICAgICAgICAgICAgdGhpcy5jaHVua3MuZGVsZXRlKGlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhcldhaXRTdWNjZXNzKCkge1xuICAgICAgICB0aGlzLndhaXRTdWNjZXNzPy4oKTtcbiAgICAgICAgZGVsZXRlIHRoaXMud2FpdFN1Y2Nlc3M7XG4gICAgfVxuICAgIGFycmF5QnVmZmVyVG9PYmplY3QoYnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICAgICAgY29uc3QganNvblN0cmluZyA9IGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgIH1cbiAgICBzcGxpdFBhcnRzKGJ1ZmZlcikge1xuICAgICAgICBjb25zdCBoZWFkZXJTaXplVmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlci5zbGljZSgwLCBDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUpKTtcbiAgICAgICAgY29uc3QgaGVhZGVyU2l6ZSA9IG5ldyBVaW50MzJBcnJheShoZWFkZXJTaXplVmlldy5idWZmZXIpWzBdO1xuICAgICAgICBjb25zdCBoZWFkZXJWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLnNsaWNlKENPTlRFTlRfRklMRV9IRUFERVJfU0laRSwgQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFICsgaGVhZGVyU2l6ZSkpO1xuICAgICAgICBjb25zdCBjb250ZW50VmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlci5zbGljZShDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUgKyBoZWFkZXJTaXplKSk7XG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuYXJyYXlCdWZmZXJUb09iamVjdChoZWFkZXJWaWV3LmJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBbaGVhZGVyLCBjb250ZW50Vmlldy5idWZmZXJdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUsIENPTlRFTlRfRklMRV9IRUFERVJfU0laRSB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IFJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFLCBSRU1FRElBVElPTl9VUEdSQURFX1dBSVRfVElNRSB9IGZyb20gJ2NvbnN0YW50cy9SZW1lZGlhdGlvbic7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUMsIFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgUEVFUl9DT05ORUNUSU9OX1JFQ09OTkVDVF9USU1FT1VULCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkcsIFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUE9ORywgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9USFJFU0hPTEQsIFBFRVJfQ09OTkVDVElPTl9USU1FT1VULCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1RJTUVPVVQsIFBFRVJfQ09OTkVDVElPTl9NRVNTQUdFX1JFVFJZLCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX0lOVEVSVkFMLCBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSwgUEVFUl9DT05ORUNUSU9OX0NIVU5LX0lERU5USUZJRVIsIFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9SRVRSWV9ERUxBWSwgUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9MT1dfVEhSRVNIT0xELCBQRUVSX0NPTk5FQ1RJT05fREFUQUNIQU5ORUxfRElTQ09OTkVDVF9IQU5ETEVSX0RFTEFZLCBQRUVSX0NPTk5FQ1RJT05fQlVGRkVSX01BWF9USFJFU0hPTEQgfSBmcm9tICdjb25zdGFudHMvUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uVHlwZSwgUGVlckNvbm5lY3Rpb25PcmlnaW4sIFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUmVtZWRpYXRpb25BY3Rpb24sIFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1JlbWVkaWF0aW9uL1JlbWVkaWF0aW9uJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgUXVldWVFbGVtZW50UHJpb3JpdHkgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL1F1ZXVlJztcbmltcG9ydCB7IEJhc2VQZWVyQ29ubmVjdGlvbiB9IGZyb20gJ21vZGVscy9Db25uZWN0aW9uL0Jhc2VQZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBhcHBseVJlbWVkaWF0aW9uLCBmaW5kU2VuZGVyLCBnZXRNYXhCaXRyYXRlIH0gZnJvbSAnbW9kZWxzL1JlbWVkaWF0aW9uL0hlbHBlcnMnO1xuaW1wb3J0IHsgc2VuZFN0YXRzIH0gZnJvbSAnbW9kZWxzL1N0YXRzL0hlbHBlcnMnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBjcmVhdGVQcmlvcml0eVJldHJ5UXVldWUgfSBmcm9tICd1dGlscy9RdWV1ZS9Qcmlvcml0eVJldHJ5UXVldWUnO1xuaW1wb3J0IHsgU3luY1F1ZXVlQ2FsbGJhY2sgfSBmcm9tICd1dGlscy9RdWV1ZS9RdWV1ZSc7XG5leHBvcnQgY2xhc3MgU2VuZGVyUGVlckNvbm5lY3Rpb24gZXh0ZW5kcyBCYXNlUGVlckNvbm5lY3Rpb24ge1xuICAgIG1heEZwcztcbiAgICBtYXhCcHA7XG4gICAgc2VuZGVycyA9IG5ldyBNYXAoKTtcbiAgICBoZWFydGJlYXRVbnN1YnNjcmliZXI7XG4gICAgd2FpdEFuc3dlcjtcbiAgICBsYXN0SGVhcnRiZWF0O1xuICAgIGlzUmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgY29ubmVjdGlvblRpbWVvdXQ7XG4gICAgcmVzdGFydFRpbWVvdXQ7XG4gICAgdXBncmFkZVRpbWVvdXQ7XG4gICAgcmV0cnlRdWV1ZSA9IGNyZWF0ZVByaW9yaXR5UmV0cnlRdWV1ZShuZXcgU3luY1F1ZXVlQ2FsbGJhY2sodGhpcy5zZW5kQWN0aW9uLmJpbmQodGhpcyksIHRoaXMud2FpdFNlbmRCdWZmZXIuYmluZCh0aGlzKSkpO1xuICAgIG1lc3NhZ2VzU2VudCA9IDA7XG4gICAgYnl0ZXNTZW50ID0gMDtcbiAgICB0aW1lU2VuZGluZyA9IDA7XG4gICAgcm91bmRUcmlwVGltZSA9IDA7XG4gICAgb25jbG9zZVRpbWVvdXQ7XG4gICAgY29uc3RydWN0b3IoY2x1c3RlcklkLCBsb2NhbE5vZGUsIHJlbW90ZUlkLCBpY2VTZXJ2ZXJzLCBjb25uZWN0aW9uVHlwZSwgbWF4RnBzLCBtYXhCcHAsIGNvbm5lY3Rpb25Db25zdHJ1Y3Rvcikge1xuICAgICAgICBzdXBlcihjbHVzdGVySWQsIGxvY2FsTm9kZSwgcmVtb3RlSWQsIGljZVNlcnZlcnMsIGNvbm5lY3Rpb25UeXBlLCBjb25uZWN0aW9uQ29uc3RydWN0b3IpO1xuICAgICAgICB0aGlzLm1heEZwcyA9IG1heEZwcztcbiAgICAgICAgdGhpcy5tYXhCcHAgPSBtYXhCcHA7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNsZWFyVXBncmFkZVRpbWVvdXQoKTtcbiAgICAgICAgdGhpcy5jbGVhckhlYXJ0YmVhdCgpO1xuICAgICAgICBkZWxldGUgdGhpcy5sYXN0SGVhcnRiZWF0O1xuICAgICAgICB0aGlzLmNsZWFyUmVzdGFydFRpbWVvdXQoKTtcbiAgICAgICAgdGhpcy5jbGVhckNvbm5lY3Rpb25UaW1lb3V0KCk7XG4gICAgICAgIHRoaXMuY2xlYXJXYWl0QW5zd2VyKCk7XG4gICAgICAgIHRoaXMuc2VuZGVycy5jbGVhcigpO1xuICAgICAgICB0aGlzLmlzUmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmV0cnlRdWV1ZS5xdWV1ZXMuZm9yRWFjaCgocXVldWUpID0+IHF1ZXVlLmNsZWFyKCkpO1xuICAgICAgICB0aGlzLmNsZWFyT25jbG9zZVRpbWVvdXQoKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG4gICAgaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5sYXN0SGVhcnRiZWF0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmlzQ29ubmVjdGVkKCkgJiYgRGF0ZS5ub3coKSAtIHRoaXMubGFzdEhlYXJ0YmVhdCA8IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfVEhSRVNIT0xEO1xuICAgIH1cbiAgICBhc3luYyBjb2xsZWN0U3RhdHMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW1Ub3BpYykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jb2xsZWN0U2VuZGVyc1N0YXRzKHRoaXMuc2VuZGVycywgKHN0YXRzLCBzdHJlYW1JZCkgPT4ge1xuICAgICAgICAgICAgc2VuZFN0YXRzKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLlN0YXRzLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBzdGF0cyxcbiAgICAgICAgICAgIH0sIHRoaXMuc3lzdGVtVG9waWMpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuUGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdGF0cyxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZW50OiB0aGlzLm1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNTZW50OiB0aGlzLmJ5dGVzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgdGltZVNlbmRpbmc6IHRoaXMudGltZVNlbmRpbmcsXG4gICAgICAgICAgICAgICAgICAgIHJvdW5kVHJpcFRpbWU6IHRoaXMucm91bmRUcmlwVGltZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZU9mZmVyKG9wdGlvbnMpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuQ29ubmVjdGlvbiwgJ0NyZXdkbGVTZW5kZXJDb25uZWN0aW9uIGNyZWF0ZU9mZmVyJywgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgdGhpcy5yZW1vdGVJZCk7XG4gICAgICAgIHRoaXMuY2xlYXJSZXN0YXJ0VGltZW91dCgpO1xuICAgICAgICB0aGlzLmNsZWFyQ29ubmVjdGlvblRpbWVvdXQoKTtcbiAgICAgICAgdGhpcy5jbGVhcldhaXRBbnN3ZXIoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7XG4gICAgICAgIH0sIFBFRVJfQ09OTkVDVElPTl9USU1FT1VUKTtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGFDaGFubmVsKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsID0gdGhpcy5jb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdkYXRhJyk7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLmJ1ZmZlcmVkQW1vdW50TG93VGhyZXNob2xkID0gUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9MT1dfVEhSRVNIT0xEO1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25jbG9zZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub25jbG9zZVRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChbJ2Nvbm5lY3RpbmcnLCAnb3BlbiddLmluY2x1ZGVzKHRoaXMuZGF0YUNoYW5uZWw/LnN0YXRlID8/ICcnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIH0sIFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9ESVNDT05ORUNUX0hBTkRMRVJfREVMQVkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5jcmVhdGVPZmZlcihvcHRpb25zKTtcbiAgICAgICAgaWYgKCF0aGlzLmxhc3RIZWFydGJlYXQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdEhlYXJ0YmVhdCA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXVpZCA9IHV1aWR2NCgpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hTeXN0ZW1NZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuT2ZmZXIsXG4gICAgICAgICAgICBvZmZlcixcbiAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICBjb25uZWN0aW9uVHlwZTogdGhpcy5jb25uZWN0aW9uVHlwZSxcbiAgICAgICAgfSwgdXVpZCk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25UeXBlICE9PSBQZWVyQ29ubmVjdGlvblR5cGUuQ29yZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2FpdEFuc3dlciA9IGludGVydmFsLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHVibGlzaFN5c3RlbU1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUuT2ZmZXIsXG4gICAgICAgICAgICAgICAgb2ZmZXIsXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uVHlwZTogdGhpcy5jb25uZWN0aW9uVHlwZSxcbiAgICAgICAgICAgIH0sIHV1aWQpO1xuICAgICAgICB9LCBQRUVSX0NPTk5FQ1RJT05fTUVTU0FHRV9SRVRSWSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFuc3dlcihhbnN3ZXIsIHZlcnNpb24pIHtcbiAgICAgICAgaWYgKHZlcnNpb24gIT09IHRoaXMuY3VycmVudFZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyV2FpdEFuc3dlcigpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uLmhhbmRsZUFuc3dlcihhbnN3ZXIsIHRoaXMuY3JlYXRlT2ZmZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NQZW5kaW5nSGFuZHNoYWtlQ2FuZGlkYXRlcygpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckNvbm5lY3Rpb25UaW1lb3V0KCk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0SGVhcnRiZWF0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRGlzY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmQobWVzc2FnZSkge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZERhdGFDaGFubmVsLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RhdGFDaGFubmVsIGlzIG5vdCBpbml0aWFsaXplZC4nLFxuICAgICAgICAgICAgICAgIGxvY2FsSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgZXZlbnRNZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGF0YUNoYW5uZWwuc3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkRGF0YUNoYW5uZWwsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGF0YSBjbHVzdGVyIGlzIG5vdCBvcGVuLicsXG4gICAgICAgICAgICAgICAgbG9jYWxJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICByZW1vdGVJZDogdGhpcy5yZW1vdGVJZCxcbiAgICAgICAgICAgICAgICBldmVudE1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZW5jb2RlZE1lc3NhZ2U7XG4gICAgICAgIGlmIChtZXNzYWdlLmNvbnRlbnQuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICAvLyBDb3B5IGRhdGEgdG8gcmVtb3ZlIGRhdGEgZnJvbSBtZXNzYWdlIHdoaWxlIHByZXNlcnZpbmcgaW5pdGlhbCByZWZlcmVuY2VcbiAgICAgICAgICAgIC8vIFNlZSBDQS0yMjkwIGZvciBtb3JlIGluZm9ybWF0aW9uXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gbWVzc2FnZS5jb250ZW50LmRhdGE7XG4gICAgICAgICAgICBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVuY29kZWRNZXNzYWdlID0gdGhpcy5tZXJnZVBhcnRzKG1lc3NhZ2UsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW5jb2RlZE1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGVuY29kZWRNZXNzYWdlID09PSAnc3RyaW5nJyAmJiBlbmNvZGVkTWVzc2FnZS5sZW5ndGggPiBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZENodW5rZWQobWVzc2FnZSwgZW5jb2RlZE1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gbWVzc2FnZS50b3BpY0xhYmVsID09PSBTWVNURU1fVE9QSUMgJiYgW1N5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbiwgU3lzdGVtTWVzc2FnZVR5cGUuUGVlckNvbm5lY3Rpb25dLmluY2x1ZGVzKG1lc3NhZ2UubWVzc2FnZVR5cGUpXG4gICAgICAgICAgICA/IFF1ZXVlRWxlbWVudFByaW9yaXR5LkhpZ2hcbiAgICAgICAgICAgIDogbWVzc2FnZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gUXVldWVFbGVtZW50UHJpb3JpdHkuTG93IDogUXVldWVFbGVtZW50UHJpb3JpdHkuTWVkaXVtO1xuICAgICAgICB0aGlzLnNlbmRXaXRoUmV0cnkoZW5jb2RlZE1lc3NhZ2UsIHByaW9yaXR5KTtcbiAgICB9XG4gICAgYWRkVHJhY2sodHJhY2ssIHN0cmVhbSwgcHJpb3JpdHksIHBhcmFtcykge1xuICAgICAgICBjb25zdCBtYXhCaXRyYXRlID0gZ2V0TWF4Qml0cmF0ZSh0aGlzLm1heEZwcywgdGhpcy5tYXhCcHApO1xuICAgICAgICBjb25zdCBzZW5kZXJzID0gdGhpcy5zZW5kZXJzLmdldChzdHJlYW0uaWQpIHx8IHtcbiAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgIHByaW9yaXR5LFxuICAgICAgICAgICAgcmVzb2x1dGlvblNjYWxlOiAxLFxuICAgICAgICAgICAgbWluUmVzb2x1dGlvblNjYWxlOiAxLFxuICAgICAgICAgICAgYml0cmF0ZTogbWF4Qml0cmF0ZSxcbiAgICAgICAgICAgIG1heEJpdHJhdGU6IG1heEJpdHJhdGUsXG4gICAgICAgICAgICBmcmFtZXJhdGU6IHRoaXMubWF4RnBzLFxuICAgICAgICAgICAgbWF4RnJhbWVyYXRlOiB0aGlzLm1heEZwcyxcbiAgICAgICAgICAgIHRyYWNrczoge30sXG4gICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHRyYWNrcyA9IHNlbmRlcnMudHJhY2tzW3RyYWNrLmtpbmRdIHx8IHsgdHJhY2sgfTtcbiAgICAgICAgaWYgKHRyYWNrcy5zZW5kZXIpIHtcbiAgICAgICAgICAgIHRyYWNrcy50cmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlcGxhY2VUcmFjayh0cmFjaywgdHJhY2tzLnNlbmRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmFja3Muc2VuZGVyID0gdGhpcy5jb25uZWN0aW9uLmFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHNlbmRlcnMudHJhY2tzW3RyYWNrLmtpbmRdID0gdHJhY2tzO1xuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICBzZW5kZXJzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5raW5kID09PSAndmlkZW8nICYmIHBhcmFtcy5yZXNvbHV0aW9uICYmIHBhcmFtcy5tYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICBzZW5kZXJzLnJlc29sdXRpb25TY2FsZSA9IHRoaXMuZ2V0UmVzb2x1dGlvblNjYWxlKHBhcmFtcy5yZXNvbHV0aW9uLCBwYXJhbXMubWF4UmVzb2x1dGlvbik7XG4gICAgICAgICAgICBzZW5kZXJzLm1pblJlc29sdXRpb25TY2FsZSA9IHNlbmRlcnMucmVzb2x1dGlvblNjYWxlO1xuICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLnZpZGVvICYmIHNlbmRlcnMudHJhY2tzLnZpZGVvLnNlbmRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbmRlciA9IHNlbmRlcnMudHJhY2tzLnZpZGVvLnNlbmRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2V0RW5jb2RpbmdQYXJhbWV0ZXJzKHNlbmRlciwgTWF0aC5mbG9vcihzZW5kZXJzLnJlc29sdXRpb25TY2FsZSAqIDEwKSAvIDEwLCBzZW5kZXJzLmZyYW1lcmF0ZSwgc2VuZGVycy5iaXRyYXRlLCBzZW5kZXJzLnByaW9yaXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRlcnMuc2V0KHN0cmVhbS5pZCwgc2VuZGVycyk7XG4gICAgfVxuICAgIHNldFByaW9yaXR5KHN0cmVhbSwgcHJpb3JpdHkpIHtcbiAgICAgICAgY29uc3Qgc2VuZGVycyA9IHRoaXMuc2VuZGVycy5nZXQoc3RyZWFtLmlkKTtcbiAgICAgICAgaWYgKHNlbmRlcnMgJiYgc2VuZGVycy5wcmlvcml0eSAhPT0gcHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHNlbmRlcnMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgICAgIGlmIChzZW5kZXJzLnRyYWNrcy52aWRlbyAmJiBzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZW5kZXIgPSBzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNldEVuY29kaW5nUGFyYW1ldGVycyhzZW5kZXIsIE1hdGguZmxvb3Ioc2VuZGVycy5yZXNvbHV0aW9uU2NhbGUgKiAxMCkgLyAxMCwgc2VuZGVycy5mcmFtZXJhdGUsIHNlbmRlcnMuYml0cmF0ZSwgc2VuZGVycy5wcmlvcml0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UGFyYW1zKHN0cmVhbSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHNlbmRlcnMgPSB0aGlzLnNlbmRlcnMuZ2V0KHN0cmVhbS5pZCk7XG4gICAgICAgIGlmIChzZW5kZXJzKSB7XG4gICAgICAgICAgICBzZW5kZXJzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLmtpbmQgPT09ICd2aWRlbycgJiYgcGFyYW1zLnJlc29sdXRpb24gJiYgcGFyYW1zLm1heFJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICBzZW5kZXJzLm1pblJlc29sdXRpb25TY2FsZSA9IHRoaXMuZ2V0UmVzb2x1dGlvblNjYWxlKHBhcmFtcy5yZXNvbHV0aW9uLCBwYXJhbXMubWF4UmVzb2x1dGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlcnMucmVzb2x1dGlvblNjYWxlIDwgc2VuZGVycy5taW5SZXNvbHV0aW9uU2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVycy5yZXNvbHV0aW9uU2NhbGUgPSBzZW5kZXJzLm1pblJlc29sdXRpb25TY2FsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLnZpZGVvICYmIHNlbmRlcnMudHJhY2tzLnZpZGVvLnNlbmRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZW5kZXIgPSBzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZXRFbmNvZGluZ1BhcmFtZXRlcnMoc2VuZGVyLCBNYXRoLmZsb29yKHNlbmRlcnMucmVzb2x1dGlvblNjYWxlICogMTApIC8gMTAsIHNlbmRlcnMuZnJhbWVyYXRlLCBzZW5kZXJzLmJpdHJhdGUsIHNlbmRlcnMucHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyVXBncmFkZVRpbWVvdXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVwZ3JhZGVUaW1lb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbmRlcnMuc2V0KHN0cmVhbS5pZCwgc2VuZGVycyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlVHJhY2sodHJhY2ssIHN0cmVhbSkge1xuICAgICAgICBjb25zdCBzZW5kZXJzID0gdGhpcy5zZW5kZXJzLmdldChzdHJlYW0uaWQpO1xuICAgICAgICBpZiAoc2VuZGVycykge1xuICAgICAgICAgICAgY29uc3QgdHJhY2tzID0gc2VuZGVycy50cmFja3NbdHJhY2sua2luZF07XG4gICAgICAgICAgICBpZiAodHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrcy5zZW5kZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlbW92ZVRyYWNrKHRyYWNrcy5zZW5kZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cmFja3MudHJhY2sgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwbHlSZW1lZGlhdGlvbihyZW1lZGlhdGlvbikge1xuICAgICAgICB0aGlzLmNsZWFyVXBncmFkZVRpbWVvdXQoKTtcbiAgICAgICAgY29uc3Qgc2VuZGVyID0gZmluZFNlbmRlcihBcnJheS5mcm9tKHRoaXMuc2VuZGVycy52YWx1ZXMoKSksIHJlbWVkaWF0aW9uKTtcbiAgICAgICAgaWYgKHNlbmRlcikge1xuICAgICAgICAgICAgYXBwbHlSZW1lZGlhdGlvbihzZW5kZXIsIHJlbWVkaWF0aW9uKTtcbiAgICAgICAgICAgIGlmIChzZW5kZXIudHJhY2tzLnZpZGVvICYmIHNlbmRlci50cmFja3MudmlkZW8uc2VuZGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlkZW9TZW5kZXIgPSBzZW5kZXIudHJhY2tzLnZpZGVvLnNlbmRlcjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2V0RW5jb2RpbmdQYXJhbWV0ZXJzKHZpZGVvU2VuZGVyLCBNYXRoLmZsb29yKHNlbmRlci5yZXNvbHV0aW9uU2NhbGUgKiAxMCkgLyAxMCwgc2VuZGVyLmZyYW1lcmF0ZSwgc2VuZGVyLmJpdHJhdGUsIHNlbmRlci5wcmlvcml0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbmRlciB8fCByZW1lZGlhdGlvbi5hY3Rpb24gPT09IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRVcGdyYWRlVGltZW91dCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhbGN1bGF0ZUFycmF5QnVmZmVyU2l6ZSgpIHtcbiAgICAgICAgY29uc3QgYnVmZmVyZWRNZXNzYWdlcyA9IHRoaXMucmV0cnlRdWV1ZS5xdWV1ZXMucmVkdWNlKCh0b3RhbCwgcXVldWUpID0+IHRvdGFsICsgcXVldWUuc2l6ZSwgMCk7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBtYXhpbXVtLWJvdW5kIGVzdGltYXRpb24gb2YgdGhlIHRvdGFsIGJ1ZmZlcmVkIGFtb3VudCBpbiB0aGUgcmV0cnkgcXVldWVzLlxuICAgICAgICByZXR1cm4gYnVmZmVyZWRNZXNzYWdlcyAqIENPTlRFTlRfRklMRV9DSFVOS19TSVpFO1xuICAgIH1cbiAgICBnZXRCdWZmZXJlZEFtb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YUNoYW5uZWw/LmJ1ZmZlcmVkQW1vdW50ID8/IDA7XG4gICAgfVxuICAgIHJlc2V0Q29ubmVjdGlvbigpIHtcbiAgICAgICAgc3VwZXIucmVzZXRDb25uZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuY2xlYXJPbmNsb3NlVGltZW91dCgpO1xuICAgICAgICB0aGlzLmNsZWFyV2FpdEFuc3dlcigpO1xuICAgICAgICB0aGlzLnNlbmRlcnMuZm9yRWFjaCgoc2VuZGVycykgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLnZpZGVvKSB7XG4gICAgICAgICAgICAgICAgc2VuZGVycy50cmFja3MudmlkZW8uc2VuZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLmF1ZGlvKSB7XG4gICAgICAgICAgICAgICAgc2VuZGVycy50cmFja3MuYXVkaW8uc2VuZGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pc1JlY29ubmVjdGluZyA9IHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRTZW5kQnVmZmVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kYXRhQ2hhbm5lbCB8fCB0aGlzLmRhdGFDaGFubmVsLnN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpbnRlcnZhbC53YWl0KFBFRVJfQ09OTkVDVElPTl9EQVRBQ0hBTk5FTF9SRVRSWV9ERUxBWSk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFDaGFubmVsLmJ1ZmZlcmVkQW1vdW50IDwgUEVFUl9DT05ORUNUSU9OX0JVRkZFUl9MT1dfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwub25CdWZmZXJlZEFtb3VudExvdyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLm9uQnVmZmVyZWRBbW91bnRMb3cgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZENodW5rZWQobWVzc2FnZSwgbWVzc2FnZVN0cmluZykge1xuICAgICAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlU3RyaW5nLmxlbmd0aDsgaSArPSBQRUVSX0NPTk5FQ1RJT05fQ0hVTktfU0laRSkge1xuICAgICAgICAgICAgY2h1bmtzLnB1c2gobWVzc2FnZVN0cmluZy5zbGljZShpLCBpICsgUEVFUl9DT05ORUNUSU9OX0NIVU5LX1NJWkUpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgICAgICAgICAgdGhpcy5zZW5kV2l0aFJldHJ5KGAke1BFRVJfQ09OTkVDVElPTl9DSFVOS19JREVOVElGSUVSfTske21lc3NhZ2UudXVpZH07JHtjaHVua3MuaW5kZXhPZihjaHVuayl9OyR7Y2h1bmtzLmxlbmd0aH07JHtjaHVua31gLCBRdWV1ZUVsZW1lbnRQcmlvcml0eS5Mb3cpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNlbmRXaXRoUmV0cnkobWVzc2FnZSwgcHJpb3JpdHkpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgPT09IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUElORykge1xuICAgICAgICAgICAgaWYgKHRoaXMucmV0cnlRdWV1ZS5xdWV1ZXNbcHJpb3JpdHldLmhlYWQ/LnZhbHVlICE9PSBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJldHJ5UXVldWUucXVldWVzW3ByaW9yaXR5XS51bnNoaWZ0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXRyeVF1ZXVlLnF1ZXVlc1twcmlvcml0eV0ucHVzaChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kQWN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRhdGFDaGFubmVsIHx8IHRoaXMuZGF0YUNoYW5uZWwuc3RhdGUgIT09ICdvcGVuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhQ2hhbm5lbCBpcyBub3Qgb3Blbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbC5idWZmZXJlZEFtb3VudCA+PSBQRUVSX0NPTk5FQ1RJT05fQlVGRkVSX01BWF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YUNoYW5uZWwgYnVmZmVyIGlzIGZ1bGwuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKG1lc3NhZ2UgIT09IFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfUElORykge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc1NlbnQgKz0gMTtcbiAgICAgICAgICAgIHRoaXMuYnl0ZXNTZW50ICs9IG1lc3NhZ2UgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciA/IG1lc3NhZ2UuYnl0ZUxlbmd0aCA6IG1lc3NhZ2UubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRpbWVTZW5kaW5nICs9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG4gICAgfVxuICAgIHN0YXJ0SGVhcnRiZWF0KCkge1xuICAgICAgICBpZiAodGhpcy5oZWFydGJlYXRVbnN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJIZWFydGJlYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaW5pdGlhbFBvbmcgPSB0cnVlO1xuICAgICAgICBsZXQgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5sYXN0SGVhcnRiZWF0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5vbk1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5kYXRhID09PSBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BPTkcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdW5kVHJpcFRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsUG9uZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hTeXN0ZW1NZXNzYWdlKHsgdHlwZTogUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdWNjZXNzIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbml0aWFsUG9uZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEhlYXJ0YmVhdCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNSZWNvbm5lY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1pc3NpbmdTZW5kZXJzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdFVuc3Vic2NyaWJlciA9IGludGVydmFsLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRXaXRoUmV0cnkoUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9QSU5HLCBRdWV1ZUVsZW1lbnRQcmlvcml0eS5IaWdoKTtcbiAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0SGVhcnRiZWF0ID4gKGluaXRpYWxQb25nICYmIFBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfVEhSRVNIT0xEICogNiB8fCBQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1RIUkVTSE9MRCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9JTlRFUlZBTCk7XG4gICAgfVxuICAgIGhhbmRsZU1pc3NpbmdTZW5kZXJzKCkge1xuICAgICAgICB0aGlzLnNlbmRlcnMuZm9yRWFjaCgoc2VuZGVycykgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbmRlcnMudHJhY2tzLnZpZGVvICYmIHNlbmRlcnMudHJhY2tzLnZpZGVvLnRyYWNrICYmICFzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBzZW5kZXJzLnRyYWNrcy52aWRlby5zZW5kZXIgPSB0aGlzLmNvbm5lY3Rpb24uYWRkVHJhY2soc2VuZGVycy50cmFja3MudmlkZW8udHJhY2ssIHNlbmRlcnMuc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZW5kZXJzLnRyYWNrcy5hdWRpbyAmJiBzZW5kZXJzLnRyYWNrcy5hdWRpby50cmFjayAmJiAhc2VuZGVycy50cmFja3MuYXVkaW8uc2VuZGVyKSB7XG4gICAgICAgICAgICAgICAgc2VuZGVycy50cmFja3MuYXVkaW8uc2VuZGVyID0gdGhpcy5jb25uZWN0aW9uLmFkZFRyYWNrKHNlbmRlcnMudHJhY2tzLmF1ZGlvLnRyYWNrLCBzZW5kZXJzLnN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kSWNlQ2FuZGlkYXRlcygpIHtcbiAgICAgICAgdGhpcy5wdWJsaXNoU3lzdGVtTWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLkhhbmRzaGFrZSxcbiAgICAgICAgICAgIGNhbmRpZGF0ZXM6IHRoaXMuaGFuZHNoYWtlQ2FuZGlkYXRlcyxcbiAgICAgICAgICAgIG9yaWdpbjogUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyLFxuICAgICAgICAgICAgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgIGNvbm5lY3Rpb25UeXBlOiB0aGlzLmNvbm5lY3Rpb25UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0dXBDb25uZWN0aW9uRXZlbnRzKCkge1xuICAgICAgICBzdXBlci5zZXR1cENvbm5lY3Rpb25FdmVudHMoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uSGFuZHNoYWtlU3RhdGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uLmhhbmRzaGFrZVN0YXRlID09PSAnZmFpbGVkJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkNvbm5lY3Rpb25TdGF0ZSwgJ2ljZUNvbm5lY3Rpb25TdGF0ZSBmYWlsZWQnLCB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLCB0aGlzLnJlbW90ZUlkKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uLmNhblJlc3RhcnRIYW5kc2hha2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZXN0YXJ0SGFuZHNoYWtlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlT2ZmZXIoe1xuICAgICAgICAgICAgICAgICAgICBoYW5kc2hha2VSZXN0YXJ0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25Db25uZWN0aW9uU3RhdGVDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Rpc2Nvbm5lY3RlZCcgfHwgdGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaGFuZGxlRGlzY29ubmVjdCgpIHtcbiAgICAgICAgdGhpcy5jbGVhckhlYXJ0YmVhdCgpO1xuICAgICAgICB0aGlzLmNsZWFyUmVzdGFydFRpbWVvdXQoKTtcbiAgICAgICAgdGhpcy5jbGVhckNvbm5lY3Rpb25UaW1lb3V0KCk7XG4gICAgICAgIGxvZ2dlci53YXJuaW5nKCdkaXNjb25uZWN0Jywge1xuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblR5cGU6IHRoaXMuY29ubmVjdGlvblR5cGUsXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblN0YXRlOiB0aGlzLmNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlLFxuICAgICAgICAgICAgICAgIGljZUNvbm5lY3Rpb25TdGF0ZTogdGhpcy5jb25uZWN0aW9uLmhhbmRzaGFrZVN0YXRlLFxuICAgICAgICAgICAgICAgIHNpZ25hbGluZ1N0YXRlOiB0aGlzLmNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUsXG4gICAgICAgICAgICAgICAgcmVhZHlTdGF0ZTogdGhpcy5kYXRhQ2hhbm5lbD8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICAgICAgbGFzdEhlYXJ0YmVhdDogdGhpcy5sYXN0SGVhcnRiZWF0ID8gRGF0ZS5ub3coKSAtIHRoaXMubGFzdEhlYXJ0YmVhdCA6ICcnLFxuICAgICAgICAgICAgICAgIHJldHJ5UXVldWU6IHRoaXMucmV0cnlRdWV1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBpc0Nvbm5lY3Rpb25UaW1lZE91dCA9ICh0aGlzLmxhc3RIZWFydGJlYXQgJiYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RIZWFydGJlYXQpID4gUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9USU1FT1VUKSA/PyB0cnVlO1xuICAgICAgICBpZiAoaXNDb25uZWN0aW9uVGltZWRPdXQpIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFt0aGlzLmxvY2FsTm9kZS5nZXRJZCgpXSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuUGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLkRpc2Nvbm5lY3QsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzZXRDb25uZWN0aW9uKCk7XG4gICAgICAgIHRoaXMucHVibGlzaFN5c3RlbU1lc3NhZ2UoeyB0eXBlOiBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk5lZWRSZXN0YXJ0LCB2ZXJzaW9uOiB0aGlzLmN1cnJlbnRWZXJzaW9uLCBjb25uZWN0aW9uVHlwZTogdGhpcy5jb25uZWN0aW9uVHlwZSB9KTtcbiAgICAgICAgdGhpcy5yZXN0YXJ0VGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEaXNjb25uZWN0KCk7XG4gICAgICAgIH0sIFBFRVJfQ09OTkVDVElPTl9SRUNPTk5FQ1RfVElNRU9VVCk7XG4gICAgfVxuICAgIGNsZWFySGVhcnRiZWF0KCkge1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdFVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmhlYXJ0YmVhdFVuc3Vic2NyaWJlcjtcbiAgICB9XG4gICAgY2xlYXJDb25uZWN0aW9uVGltZW91dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3Rpb25UaW1lb3V0KTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbm5lY3Rpb25UaW1lb3V0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyUmVzdGFydFRpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3RhcnRUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXN0YXJ0VGltZW91dCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5yZXN0YXJ0VGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhclVwZ3JhZGVUaW1lb3V0KCkge1xuICAgICAgICBpZiAodGhpcy51cGdyYWRlVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBncmFkZVRpbWVvdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudXBncmFkZVRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VXBncmFkZVRpbWVvdXQoKSB7XG4gICAgICAgIHRoaXMudXBncmFkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlSZW1lZGlhdGlvbih7XG4gICAgICAgICAgICAgICAgdHlwZTogUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1lZGlhdGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IFJlbWVkaWF0aW9uQWN0aW9uLlVwZ3JhZGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgUkVNRURJQVRJT05fVVBHUkFERV9XQUlUX1RJTUUpO1xuICAgIH1cbiAgICBnZXRSZXNvbHV0aW9uU2NhbGUocmVzb2x1dGlvbiwgbWF4UmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCBzY2FsZSA9IE1hdGgubWF4KHJlc29sdXRpb24ud2lkdGggLyBtYXhSZXNvbHV0aW9uLndpZHRoLCByZXNvbHV0aW9uLmhlaWdodCAvIG1heFJlc29sdXRpb24uaGVpZ2h0KTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHNjYWxlLCAxKSwgUkVNRURJQVRJT05fTUFYX1JFU09MVVRJT05fU0NBTEUpO1xuICAgIH1cbiAgICBjbGVhcldhaXRBbnN3ZXIoKSB7XG4gICAgICAgIHRoaXMud2FpdEFuc3dlcj8uKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLndhaXRBbnN3ZXI7XG4gICAgfVxuICAgIGNsZWFyT25jbG9zZVRpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLm9uY2xvc2VUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5vbmNsb3NlVGltZW91dCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vbmNsb3NlVGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYmplY3RUb0FycmF5QnVmZmVyKG9iaikge1xuICAgICAgICBjb25zdCBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkob2JqKTtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICByZXR1cm4gZW5jb2Rlci5lbmNvZGUoanNvblN0cmluZykuYnVmZmVyO1xuICAgIH1cbiAgICBtZXJnZVBhcnRzKGhlYWRlciwgY29udGVudCkge1xuICAgICAgICBjb25zdCBoZWFkZXJCdWZmZXIgPSB0aGlzLm9iamVjdFRvQXJyYXlCdWZmZXIoaGVhZGVyKTtcbiAgICAgICAgY29uc3QgaGVhZGVyU2l6ZVZpZXcgPSBuZXcgVWludDhBcnJheShDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUpO1xuICAgICAgICBjb25zdCBoZWFkZXJWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyQnVmZmVyKTtcbiAgICAgICAgY29uc3QgY29udGVudFZpZXcgPSBuZXcgVWludDhBcnJheShjb250ZW50KTtcbiAgICAgICAgaGVhZGVyU2l6ZVZpZXcuc2V0KG5ldyBVaW50OEFycmF5KG5ldyBVaW50MzJBcnJheShbaGVhZGVyVmlldy5sZW5ndGhdKS5idWZmZXIpKTtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFVpbnQ4QXJyYXkoQ09OVEVOVF9GSUxFX0hFQURFUl9TSVpFICsgaGVhZGVyVmlldy5sZW5ndGggKyBjb250ZW50Vmlldy5sZW5ndGgpO1xuICAgICAgICBtZXJnZWQuc2V0KGhlYWRlclNpemVWaWV3KTtcbiAgICAgICAgbWVyZ2VkLnNldChoZWFkZXJWaWV3LCBDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUpO1xuICAgICAgICBtZXJnZWQuc2V0KGNvbnRlbnRWaWV3LCBDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUgKyBoZWFkZXJWaWV3Lmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBtZXJnZWQuYnVmZmVyO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L0Jhc2VTdHJlYW0nO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7IGdldEZpbGVDb250ZW50LCByZWFkRmlsZUNvbnRlbnQgfSBmcm9tICd1dGlscy9PYmplY3RTdG9yZS9IZWxwZXJzJztcbmV4cG9ydCBjbGFzcyBCYXNlRGF0YVN0cmVhbSBleHRlbmRzIEJhc2VTdHJlYW0ge1xuICAgIG91dGdvaW5nVG9waWM7XG4gICAgaW5jb21pbmdUb3BpYztcbiAgICBmaWxlQ2h1bmtzID0gbmV3IE1hcCgpO1xuICAgIG1lc3NhZ2VzU2VudCA9IDA7XG4gICAgbWVzc2FnZXNSZWNlaXZlZCA9IDA7XG4gICAgYnl0ZXNTZW50ID0gMDtcbiAgICBieXRlc1JlY2VpdmVkID0gMDtcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgbGFiZWwpIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsKTtcbiAgICB9XG4gICAgZ2V0TGFiZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsO1xuICAgIH1cbiAgICBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgICB9XG4gICAgZ2V0Q29udGVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBDb250ZW50VHlwZS5EYXRhO1xuICAgIH1cbiAgICBnZXRJbnRlcm5hbFN0cmVhbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgICB9XG4gICAgcmVnaXN0ZXJQdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIGlmICh0aGlzLm91dGdvaW5nVG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFB1Ymxpc2hlciwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBQdWJsaXNoZXIgYWxyZWFkeSByZWdpc3RlcmVkIG9uIFB1YlN1YlRvcGljICR7dGhpcy5vd25lci5nZXRJZCgpfSAtICR7dGhpcy5sYWJlbH1gLFxuICAgICAgICAgICAgICAgIHRvcGljOiB0aGlzLm91dGdvaW5nVG9waWMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm91dGdvaW5nVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHJlZ2lzdGVyU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmluY29taW5nVG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFN1YnNjcmliZXIsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgU3Vic2NyaWJlciBhbHJlYWR5IHJlZ2lzdGVyZWQgb24gUHViU3ViVG9waWMgJHt0aGlzLm93bmVyLmdldElkKCl9IC0gJHt0aGlzLmxhYmVsfWAsXG4gICAgICAgICAgICAgICAgdG9waWM6IHRoaXMuaW5jb21pbmdUb3BpYyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5jb21pbmdUb3BpYyA9IHN1YnNjcmliZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJQdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm91dGdvaW5nVG9waWM7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTdWJzY3JpYmVyKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5pbmNvbWluZ1RvcGljO1xuICAgIH1cbiAgICBhc3luYyBzZW5kKGNvbnRlbnQsIG5vZGVJZHMpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRGF0YVN0cmVhbSwgJ0RhdGFTdHJlYW0gc2VuZCcsIHRoaXMub3duZXIuZ2V0SWQoKSwgY29udGVudCwgbm9kZUlkcyk7XG4gICAgICAgIHRoaXMubWVzc2FnZXNTZW50ICs9IDE7XG4gICAgICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZmlsZUNodW5rcyA9IGF3YWl0IHJlYWRGaWxlQ29udGVudChjb250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuYnl0ZXNTZW50ICs9IGZpbGVDaHVua3MucmVkdWNlKChhY2MsIGNodW5rKSA9PiBhY2MgKyBjaHVuay5ieXRlTGVuZ3RoLCAwKTtcbiAgICAgICAgICAgIGZpbGVDaHVua3MuZm9yRWFjaCgoY2h1bmssIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRnb2luZ1RvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbklkczogbm9kZUlkcyxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogQ29udGVudFR5cGUuRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogY29udGVudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogY29udGVudC50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY2h1bmssXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsOiBmaWxlQ2h1bmtzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnl0ZXNTZW50ICs9IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpLmxlbmd0aDtcbiAgICAgICAgdGhpcy5vdXRnb2luZ1RvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBub2RlSWRzLFxuICAgICAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLkRhdGEsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluY29taW5nVG9waWMuc3Vic2NyaWJlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRGF0YVN0cmVhbSwgJ0RhdGFTdHJlYW0gb25NZXNzYWdlJywgdGhpcy5vd25lci5nZXRJZCgpLCBldmVudCk7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDb250ZW50VHlwZS5EYXRhOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzUmVjZWl2ZWQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ieXRlc1JlY2VpdmVkICs9IEpTT04uc3RyaW5naWZ5KGV2ZW50LmNvbnRlbnQpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQuc291cmNlSWQsIGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIENvbnRlbnRUeXBlLkZpbGU6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5maWxlQ2h1bmtzLmhhcyhldmVudC5jb250ZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVDaHVua3Muc2V0KGV2ZW50LmNvbnRlbnQubmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rc1JlY2VpdmVkOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVjZWl2ZWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tzdW06ICcnLCAvLyBUaGUgY2hlY2tzdW0gaXMgb25seSBuZWVkZWQgZm9yIE9iamVjdFN0b3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLmZpbGVDaHVua3MuZ2V0KGV2ZW50LmNvbnRlbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rcy5jaHVua3NSZWNlaXZlZCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBjaHVua3MuYnl0ZXNSZWNlaXZlZCArPSBldmVudC5jb250ZW50LmRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rcy5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua3MuY29udGVudFtldmVudC5jb250ZW50LmluZGV4XSA9IGV2ZW50LmNvbnRlbnQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVDaHVua3Muc2V0KGV2ZW50LmNvbnRlbnQubmFtZSwgY2h1bmtzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rcy5jaHVua3NSZWNlaXZlZCArIDEgPCBldmVudC5jb250ZW50LnRvdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc1JlY2VpdmVkICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCArPSBjaHVua3MuYnl0ZXNSZWNlaXZlZDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyAtIERvIHdlIG5lZWQgdG8gZ2V0IHRoZSBkYXRhIGZyb20gdGhlIHN0cmVhbSBpZiB3ZSBkb24ndCBoYXZlIHRoZSBjb250ZW50P1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtzLmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50LnNvdXJjZUlkLCBnZXRGaWxlQ29udGVudChjaHVua3MuY29udGVudCwgZXZlbnQuY29udGVudC5uYW1lLCBldmVudC5jb250ZW50LnR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbGVDaHVua3MuZGVsZXRlKGV2ZW50LmNvbnRlbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBNZWRpYVN0cmVhbVByaW9yaXR5IH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ1NlcnZpY2VzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZU1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZU1lZGlhU3RyZWFtJztcbmltcG9ydCB7IE91dGdvaW5nTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9PdXRnb2luZ01lZGlhU3RyZWFtJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgQmFzZUxvY2FsTWVkaWFTdHJlYW0gZXh0ZW5kcyBCYXNlTWVkaWFTdHJlYW0ge1xuICAgIGNsdXN0ZXJJZDtcbiAgICBwcmlvcml0eSA9IE1lZGlhU3RyZWFtUHJpb3JpdHkuRGVmYXVsdDtcbiAgICB0cmFja0VuZGVkTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIG91dGdvaW5nU3RyZWFtcyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgbGFiZWwsIG1lZGlhU291cmNlLCBjbHVzdGVySWQpIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsLCBtZWRpYVNvdXJjZSBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtID8gbWVkaWFTb3VyY2UgOlxuICAgICAgICAgICAgbWVkaWFTb3VyY2Uuc3JjT2JqZWN0ID8gbWVkaWFTb3VyY2Uuc3JjT2JqZWN0IDpcbiAgICAgICAgICAgICAgICBtZWRpYVNvdXJjZS5jYXB0dXJlU3RyZWFtKCkpO1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4gdGhpcy5zZXR1cFRyYWNrRW5kZWRMaXN0ZW5lcnModHJhY2spKTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuTWVkaWFTdHJlYW0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdwdWJsaXNoJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5vd25lci50eXBlLFxuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLmdldEludGVybmFsU3RyZWFtSWQoKSxcbiAgICAgICAgICAgIHRyYWNrS2luZHM6IHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkubWFwKCh0cmFjaykgPT4gdHJhY2sua2luZCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5vdXRnb2luZ1N0cmVhbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmZvckVhY2goKG91dGdvaW5nU3RyZWFtKSA9PiB7XG4gICAgICAgICAgICAgICAgb3V0Z29pbmdTdHJlYW0udW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpO1xuICAgICAgICAgICAgICAgIG91dGdvaW5nU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vdXRnb2luZ1N0cmVhbXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuZm9yRWFjaCgocmVtb3ZlTGlzdGVuZXIpID0+IHJlbW92ZUxpc3RlbmVyKCkpO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHB1Ymxpc2gocmVtb3RlSWQpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkczogcmVtb3RlSWQgPyBbcmVtb3RlSWRdIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlB1Ymxpc2hNZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgc3RyZWFtOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLmdldEludGVybmFsU3RyZWFtSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlVHJhY2tLaW5kczogdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5tYXAoKHRyYWNrKSA9PiB0cmFjay5raW5kKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVucHVibGlzaCgpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICBwcm9wYWdhdGU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuVW5wdWJsaXNoTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuTWVkaWFTdHJlYW0sIHtcbiAgICAgICAgICAgIHR5cGU6ICd1bnB1Ymxpc2gnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLm93bmVyLnR5cGUsXG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgc3RyZWFtSWQ6IHRoaXMuZ2V0SW50ZXJuYWxTdHJlYW1JZCgpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0UHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByaW9yaXR5O1xuICAgIH1cbiAgICBzZXRQcmlvcml0eShwcmlvcml0eSkge1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmZvckVhY2goKG91dGdvaW5nU3RyZWFtKSA9PiBvdXRnb2luZ1N0cmVhbS5zZXRQcmlvcml0eShwcmlvcml0eSkpO1xuICAgIH1cbiAgICBnZXRTaGFyZWFibGVTdHJlYW0oZGVzdGluYXRpb25JZCwgcGFyYW1zKSB7XG4gICAgICAgIGlmICghdGhpcy5vdXRnb2luZ1N0cmVhbXMuaGFzKGRlc3RpbmF0aW9uSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBvdXRnb2luZ1N0cmVhbSA9IG5ldyBPdXRnb2luZ01lZGlhU3RyZWFtKHRoaXMub3duZXIsIHRoaXMubGFiZWwsIHRoaXMubWVkaWFTdHJlYW0sIGRlc3RpbmF0aW9uSWQsIHBhcmFtcyk7XG4gICAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG91dGdvaW5nU3RyZWFtLm9uVW5yZWdpc3RlclB1Ymxpc2hlcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5nZXQoZGVzdGluYXRpb25JZCk/LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5kZWxldGUoZGVzdGluYXRpb25JZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLnNldChkZXN0aW5hdGlvbklkLCBvdXRnb2luZ1N0cmVhbSk7XG4gICAgICAgICAgICBvdXRnb2luZ1N0cmVhbS5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcih0aGlzLnN5c3RlbVRvcGljKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vdXRnb2luZ1N0cmVhbXMuZ2V0KGRlc3RpbmF0aW9uSWQpO1xuICAgIH1cbiAgICBnZXRTaGFyZWFibGVTdHJlYW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW0uaWQ7XG4gICAgfVxuICAgIGhhbmRsZUxvY2FsVHJhY2tGYWlsdXJlKHRyYWNrKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLkxvY2FsTWVkaWFTdHJlYW1UcmFja0ZhaWwsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kczogW3RyYWNrLmtpbmRdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldHVwVHJhY2tFbmRlZExpc3RlbmVycyh0cmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9ICgpID0+IHRoaXMuaGFuZGxlTG9jYWxUcmFja0ZhaWx1cmUodHJhY2spO1xuICAgICAgICBjb25zdCByZW1vdmVMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgY2FsbGJhY2spO1xuICAgICAgICAgICAgdHJhY2sucmVtb3ZlRXZlbnRMaXN0ZW5lcignbXV0ZScsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHRoaXMudHJhY2tFbmRlZExpc3RlbmVycy5kZWxldGUodHJhY2sua2luZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgY2FsbGJhY2spO1xuICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdtdXRlJywgY2FsbGJhY2spO1xuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuc2V0KHRyYWNrLmtpbmQsIHJlbW92ZUxpc3RlbmVyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgQmFzZVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L0Jhc2VTdHJlYW0nO1xuZXhwb3J0IGNsYXNzIEJhc2VNZWRpYVN0cmVhbSBleHRlbmRzIEJhc2VTdHJlYW0ge1xuICAgIG1lZGlhU3RyZWFtO1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBsYWJlbCwgbWVkaWFTdHJlYW0pIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbSA9IG1lZGlhU3RyZWFtO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLk1lZGlhO1xuICAgIH1cbiAgICBnZXRNZWRpYVN0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW07XG4gICAgfVxuICAgIGdldEludGVybmFsU3RyZWFtSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lZGlhU3RyZWFtLmlkO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBCYXNlU3RyZWFtIHtcbiAgICBvd25lcjtcbiAgICBsYWJlbDtcbiAgICBzeXN0ZW1Ub3BpYztcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgbGFiZWwpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgfVxuICAgIGdldExhYmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbDtcbiAgICB9XG4gICAgZ2V0T3duZXJJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3duZXIuZ2V0SWQoKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHsgfVxuICAgIHJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHRvcGljKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSB0b3BpYztcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBOb2RlTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL05vZGUvTm9kZU1lc3NhZ2UnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NZXNzYWdlJztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEdlbmVyYXRpdmVBSUNvbnRleHQgfSBmcm9tICdtb2RlbHMvQ29udGVudC9HZW5lcmF0aXZlQUlDb250ZXh0JztcbmltcG9ydCB7IEdlbmVyYXRpdmVBSVdvcmtlciB9IGZyb20gJ21vZGVscy9Db250ZW50L0dlbmVyYXRpdmVBSVdvcmtlcic7XG5pbXBvcnQgeyBHcmFwaERhdGFiYXNlIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvR3JhcGhEYXRhYmFzZSc7XG5pbXBvcnQgeyBKb2JEaXNwYXRjaGVyIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvSm9iRGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBKb2JXb3JrZXIgfSBmcm9tICdtb2RlbHMvQ29udGVudC9Kb2JXb3JrZXInO1xuaW1wb3J0IHsgS2V5VmFsdWVEYXRhYmFzZSB9IGZyb20gJ21vZGVscy9Db250ZW50L0tleVZhbHVlRGF0YWJhc2UnO1xuaW1wb3J0IHsgTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9Mb2NhbER5bmFtaWNNZWRpYVN0cmVhbSc7XG5pbXBvcnQgeyBMb2NhbE1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvTG9jYWxNZWRpYVN0cmVhbSc7XG5pbXBvcnQgeyBPYmplY3RTdG9yZSB9IGZyb20gJ21vZGVscy9Db250ZW50L09iamVjdFN0b3JlJztcbmltcG9ydCB7IFB1YlN1YlRvcGljIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvUHViU3ViVG9waWMnO1xuaW1wb3J0IHsgUmVtb3RlTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9SZW1vdGVNZWRpYVN0cmVhbSc7XG5pbXBvcnQgeyBWZWN0b3JEYXRhYmFzZSB9IGZyb20gJ21vZGVscy9Db250ZW50L1ZlY3RvckRhdGFiYXNlJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICdtb2RlbHMvTm9kZS9Vc2VyJztcbmltcG9ydCB7IEZpcmViYXNlUkRCVHJhbnNhY3Rpb25TZXJ2aWNlIH0gZnJvbSAnc2VydmljZXMvVHJhbnNhY3Rpb24vRmlyZWJhc2VSREJUcmFuc2FjdGlvblNlcnZpY2UnO1xuaW1wb3J0IGpvYlF1ZXVlIGZyb20gJ3NlcnZpY2VzL0pvYlF1ZXVlL0pvYlF1ZXVlU2VydmljZSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIENvbnRlbnRNYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIG9wdGlvbnM7XG4gICAgc2VhcmNoQXBpS2V5O1xuICAgIGxvY2FsTWVkaWFTdHJlYW1zID0gbmV3IE1hcCgpO1xuICAgIHJlbW90ZU1lZGlhU3RyZWFtcyA9IG5ldyBNYXAoKTtcbiAgICBwdWJTdWJUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgb2JqZWN0U3RvcmVzID0gbmV3IE1hcCgpO1xuICAgIGtleVZhbHVlRGF0YWJhc2VzID0gbmV3IE1hcCgpO1xuICAgIHZlY3RvckRhdGFiYXNlcyA9IG5ldyBNYXAoKTtcbiAgICBncmFwaERhdGFiYXNlcyA9IG5ldyBNYXAoKTtcbiAgICBqb2JEaXNwYXRjaGVycyA9IG5ldyBNYXAoKTtcbiAgICBqb2JXb3JrZXJzID0gbmV3IE1hcCgpO1xuICAgIHRyYW5zYWN0aW9uU2VydmljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBvcHRpb25zLCBzZWFyY2hBcGlLZXkpIHtcbiAgICAgICAgdGhpcy5jb25maWdzID0gY29uZmlncztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5zZWFyY2hBcGlLZXkgPSBzZWFyY2hBcGlLZXk7XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TZXJ2aWNlID0gbmV3IEZpcmViYXNlUkRCVHJhbnNhY3Rpb25TZXJ2aWNlKHRoaXMuY29uZmlncy52ZW5kb3JJZCwgdGhpcy5jb25maWdzLmNsdXN0ZXJJZCk7XG4gICAgfVxuICAgIGNsb3NlKHJlc2V0ID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMuZm9yRWFjaCgoc3RyZWFtcywgbm9kZUlkKSA9PiB7XG4gICAgICAgICAgICBzdHJlYW1zLmZvckVhY2goKF8sIGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVSZW1vdGVNZWRpYVN0cmVhbShub2RlSWQsIGxhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNldCkge1xuICAgICAgICAgICAgam9iUXVldWUuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuZm9yRWFjaCgoXywgbGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUxvY2FsTWVkaWFTdHJlYW0obGFiZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnB1YlN1YlRvcGljcy5mb3JFYWNoKChfLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUHViU3ViVG9waWMobGFiZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9iamVjdFN0b3Jlcy5mb3JFYWNoKChfLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlT2JqZWN0U3RvcmUobGFiZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmZvckVhY2goKF8sIGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVLZXlWYWx1ZURhdGFiYXNlKGxhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5qb2JEaXNwYXRjaGVycy5mb3JFYWNoKChfLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSm9iRGlzcGF0Y2hlcihsYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuam9iV29ya2Vycy5mb3JFYWNoKChfLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSm9iV29ya2VyKGxhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52ZWN0b3JEYXRhYmFzZXMuZm9yRWFjaCgoXywgbGFiZWwpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVZlY3RvckRhdGFiYXNlKGxhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ncmFwaERhdGFiYXNlcy5mb3JFYWNoKChfLCBsYWJlbCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlR3JhcGhEYXRhYmFzZShsYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVPYmplY3RTdG9yZUJ1Y2tldChsYWJlbCwgY29ubmVjdG9yQ29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKHRoaXMub2JqZWN0U3RvcmVzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlQWxyZWFkeUV4aXN0cywgJ1N0b3JlIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2FpdEZvckFycmF5QnVmZmVyU2l6ZSA9ICgpID0+IHRoaXMuY29uZmlncy5tZWRpYXRvci53YWl0Rm9yQXJyYXlCdWZmZXJTaXplKCk7XG4gICAgICAgIGNvbnN0IGRhdGFTdHJlYW0gPSBuZXcgT2JqZWN0U3RvcmUodGhpcy5jb25maWdzLmxvY2FsTm9kZSwgbGFiZWwsIHRoaXMuY29uZmlncy5jbHVzdGVySWQsIHRoaXMuY29uZmlncy52ZW5kb3JJZCwgdGhpcy50cmFuc2FjdGlvblNlcnZpY2UsIGNvbm5lY3RvckNvbnN0cnVjdG9yLCB3YWl0Rm9yQXJyYXlCdWZmZXJTaXplKTtcbiAgICAgICAgdGhpcy5vYmplY3RTdG9yZXMuc2V0KGxhYmVsLCBkYXRhU3RyZWFtKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKGRhdGFTdHJlYW0pO1xuICAgICAgICByZXR1cm4gZGF0YVN0cmVhbTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlS2V5VmFsdWVEYXRhYmFzZShsYWJlbCwgbGF5b3V0LCBjb25uZWN0b3JDb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAodGhpcy5rZXlWYWx1ZURhdGFiYXNlcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlQWxyZWFkeUV4aXN0cywgJ0RhdGFiYXNlIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbHVlRGF0YWJhc2UgPSBuZXcgS2V5VmFsdWVEYXRhYmFzZSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLCBsYWJlbCwgdGhpcy5jb25maWdzLmNsdXN0ZXJJZCwgdGhpcy5jb25maWdzLnZlbmRvcklkLCBsYXlvdXQsIGNvbm5lY3RvckNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgIHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuc2V0KGxhYmVsLCBrZXlWYWx1ZURhdGFiYXNlKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZShrZXlWYWx1ZURhdGFiYXNlKTtcbiAgICAgICAgICAgIHJldHVybiBrZXlWYWx1ZURhdGFiYXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNES0NsaWVudEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZUNyZWF0aW9uRmFpbGVkLCB7IGxhYmVsLCBjbHVzdGVySWQ6IHRoaXMuY29uZmlncy5jbHVzdGVySWQsIHZlbmRvcklkOiB0aGlzLmNvbmZpZ3MudmVuZG9ySWQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlSm9iRGlzcGF0Y2hlcihsYWJlbCwgZ3JhcGhTZXJ2aWNlKSB7XG4gICAgICAgIGlmICh0aGlzLmpvYkRpc3BhdGNoZXJzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkpvYkRpc3BhdGNoZXJBbHJlYWR5RXhpc3RzLCAnSm9iIERpc3BhdGNoZXIgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgam9iRGlzcGF0Y2hlciA9IG5ldyBKb2JEaXNwYXRjaGVyKHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIGxhYmVsLCBncmFwaFNlcnZpY2UpO1xuICAgICAgICAgICAgdGhpcy5qb2JEaXNwYXRjaGVycy5zZXQobGFiZWwsIGpvYkRpc3BhdGNoZXIpO1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKGpvYkRpc3BhdGNoZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGpvYkRpc3BhdGNoZXI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLQ2xpZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Kb2JEaXNwYXRjaGVyQ3JlYXRpb25GYWlsZWQsIHsgbGFiZWwsIGNsdXN0ZXJJZDogdGhpcy5jb25maWdzLmNsdXN0ZXJJZCwgdmVuZG9ySWQ6IHRoaXMuY29uZmlncy52ZW5kb3JJZCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjcmVhdGVKb2JXb3JrZXIobGFiZWwsIGNhcGFjaXR5UmVwb3J0ZXIsIHdvcmtlckNvbm5lY3Rvcikge1xuICAgICAgICBpZiAodGhpcy5qb2JXb3JrZXJzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkpvYldvcmtlckFscmVhZHlFeGlzdHMsICdKb2IgV29ya2VyIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGpvYldvcmtlciA9IG5ldyBKb2JXb3JrZXIodGhpcy5jb25maWdzLmxvY2FsTm9kZSwgbGFiZWwsIGNhcGFjaXR5UmVwb3J0ZXIsIFt3b3JrZXJDb25uZWN0b3JdKTtcbiAgICAgICAgICAgIHRoaXMuam9iV29ya2Vycy5zZXQobGFiZWwsIGpvYldvcmtlcik7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2Uoam9iV29ya2VyKTtcbiAgICAgICAgICAgIHJldHVybiBqb2JXb3JrZXI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLQ2xpZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Kb2JXb3JrZXJDcmVhdGlvbkZhaWxlZCwgeyBsYWJlbCwgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCB2ZW5kb3JJZDogdGhpcy5jb25maWdzLnZlbmRvcklkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE8gam9icyAtIEFsbCBjb250ZW50IG1hbmFnZXIgY3JlYXRlIHNlcnZpY2UgYXJlIHN5bmMgYnV0IGFyZSBkZWNsYXJlZCBhc3luYyAtIHdlIHNob3VsZCBmaXggdGhlbVxuICAgIGFzeW5jIGNyZWF0ZUdlbmVyYXRpdmVBSUNvbnRleHQobGFiZWwsIGdyYXBoU2VydmljZSkge1xuICAgICAgICBpZiAodGhpcy5qb2JEaXNwYXRjaGVycy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5HZW5lcmF0aXZlQUlDb250ZXh0QWxyZWFkeUV4aXN0cywgJ0FJIFNlcnZpY2UgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5qb2JXb3JrZXJzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkdlbmVyYXRpdmVBSUxhYmVsQ29uZmxpY3QsICdMYWJlbCBhbHJlYWR5IGluIHVzZSBieSBBSSBTZXJ2aWNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRpdmVBSUNvbnRleHQgPSBuZXcgR2VuZXJhdGl2ZUFJQ29udGV4dCh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLCBsYWJlbCwgdGhpcy5jb25maWdzLnZlbmRvcklkLCBncmFwaFNlcnZpY2UpO1xuICAgICAgICAgICAgdGhpcy5qb2JEaXNwYXRjaGVycy5zZXQobGFiZWwsIGdlbmVyYXRpdmVBSUNvbnRleHQpO1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKGdlbmVyYXRpdmVBSUNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRpdmVBSUNvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLQ2xpZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5HZW5lcmF0aXZlQUlDb250ZXh0Q3JlYXRpb25GYWlsZWQsIHsgbGFiZWwsIGNsdXN0ZXJJZDogdGhpcy5jb25maWdzLmNsdXN0ZXJJZCwgdmVuZG9ySWQ6IHRoaXMuY29uZmlncy52ZW5kb3JJZCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjcmVhdGVHZW5lcmF0aXZlQUlXb3JrZXIobGFiZWwsIGNhcGFjaXR5UmVwb3J0ZXIsIGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnMsIGRvY3VtZW50UGFyc2VyQ29ubmVjdG9yLCBubHBMaWJyYXJ5Q29ubmVjdG9yLCBzZWFyY2hDb25uZWN0b3IpIHtcbiAgICAgICAgaWYgKHRoaXMuam9iV29ya2Vycy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5HZW5lcmF0aXZlQUlXb3JrZXJBbHJlYWR5RXhpc3RzLCAnQUkgV29ya2VyIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuam9iRGlzcGF0Y2hlcnMuaGFzKGxhYmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuR2VuZXJhdGl2ZUFJTGFiZWxDb25mbGljdCwgJ0xhYmVsIGFscmVhZHkgaW4gdXNlIGJ5IEFJIFNlcnZpY2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYWlXb3JrZXIgPSBuZXcgR2VuZXJhdGl2ZUFJV29ya2VyKHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIGxhYmVsLCB0aGlzLmNvbmZpZ3MudmVuZG9ySWQsIGNhcGFjaXR5UmVwb3J0ZXIsIHRoaXMsIGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnMsIGRvY3VtZW50UGFyc2VyQ29ubmVjdG9yLCBubHBMaWJyYXJ5Q29ubmVjdG9yLCB0aGlzLnNlYXJjaEFwaUtleSwgc2VhcmNoQ29ubmVjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuam9iV29ya2Vycy5zZXQobGFiZWwsIGFpV29ya2VyKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZShhaVdvcmtlcik7XG4gICAgICAgICAgICByZXR1cm4gYWlXb3JrZXI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLQ2xpZW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5HZW5lcmF0aXZlQUlXb3JrZXJDcmVhdGlvbkZhaWxlZCwgeyBsYWJlbCwgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCB2ZW5kb3JJZDogdGhpcy5jb25maWdzLnZlbmRvcklkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUdyYXBoRGF0YWJhc2UobGFiZWwsIGNvbm5lY3RvckNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGlmICh0aGlzLmdyYXBoRGF0YWJhc2VzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkdyYXBoRGF0YWJhc2VBbHJlYWR5RXhpc3RzLCAnRGF0YWJhc2UgYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZ3JhcGhEYXRhYmFzZSA9IG5ldyBHcmFwaERhdGFiYXNlKHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIGxhYmVsLCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCBjb25uZWN0b3JDb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICB0aGlzLmdyYXBoRGF0YWJhc2VzLnNldChsYWJlbCwgZ3JhcGhEYXRhYmFzZSk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZ3JhcGhEYXRhYmFzZSk7XG4gICAgICAgICAgICByZXR1cm4gZ3JhcGhEYXRhYmFzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTREtDbGllbnRFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkdyYXBoRGF0YWJhc2VDcmVhdGlvbkZhaWxlZCwgeyBsYWJlbCwgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCB2ZW5kb3JJZDogdGhpcy5jb25maWdzLnZlbmRvcklkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsRHluYW1pY01lZGlhU3RyZWFtKGxhYmVsLCBtZWRpYVNvdXJjZSkge1xuICAgICAgICBpZiAodGhpcy5sb2NhbE1lZGlhU3RyZWFtcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Mb2NhbE1lZGlhU3RyZWFtQWxyZWFkeUV4aXN0cywgJ0xvY2FsIE1lZGlhU3RyZWFtIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuYXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Mb2NhbE1lZGlhU3RyZWFtTm9BdWRpb0NvbnRleHQsICdBdWRpb0NvbnRleHQgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2FsTWVkaWFTdHJlYW0gPSBuZXcgTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0odGhpcy5jb25maWdzLmxvY2FsTm9kZSwgbGFiZWwsIG1lZGlhU291cmNlLCB0aGlzLm9wdGlvbnMubWF4RnBzLCB0aGlzLm9wdGlvbnMuYXVkaW9Db250ZXh0LCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkKTtcbiAgICAgICAgdGhpcy5sb2NhbE1lZGlhU3RyZWFtcy5zZXQobGFiZWwsIGxvY2FsTWVkaWFTdHJlYW0pO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UobG9jYWxNZWRpYVN0cmVhbSk7XG4gICAgICAgIGxvY2FsTWVkaWFTdHJlYW0ucHVibGlzaCgpO1xuICAgICAgICByZXR1cm4gbG9jYWxNZWRpYVN0cmVhbTtcbiAgICB9XG4gICAgY3JlYXRlTG9jYWxNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpIHtcbiAgICAgICAgaWYgKHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuaGFzKGxhYmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuTG9jYWxNZWRpYVN0cmVhbUFscmVhZHlFeGlzdHMsICdTdHJlYW0gYWxyZWFkeSBleGlzdHMnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhbE1lZGlhU3RyZWFtID0gbmV3IExvY2FsTWVkaWFTdHJlYW0odGhpcy5jb25maWdzLmxvY2FsTm9kZSwgbGFiZWwsIG1lZGlhU291cmNlLCB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkKTtcbiAgICAgICAgdGhpcy5sb2NhbE1lZGlhU3RyZWFtcy5zZXQobGFiZWwsIGxvY2FsTWVkaWFTdHJlYW0pO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UobG9jYWxNZWRpYVN0cmVhbSk7XG4gICAgICAgIGxvY2FsTWVkaWFTdHJlYW0ucHVibGlzaCgpO1xuICAgICAgICByZXR1cm4gbG9jYWxNZWRpYVN0cmVhbTtcbiAgICB9XG4gICAgY3JlYXRlUHViU3ViVG9waWMobGFiZWwpIHtcbiAgICAgICAgaWYgKHRoaXMucHViU3ViVG9waWNzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlB1YlN1YlRvcGljQWxyZWFkeUV4aXN0cywgJ1B1YlN1YiBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFTdHJlYW0gPSBuZXcgUHViU3ViVG9waWModGhpcy5jb25maWdzLmxvY2FsTm9kZSwgbGFiZWwsIHRoaXMuY29uZmlncy5jbHVzdGVySWQpO1xuICAgICAgICB0aGlzLnB1YlN1YlRvcGljcy5zZXQobGFiZWwsIGRhdGFTdHJlYW0pO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZGF0YVN0cmVhbSk7XG4gICAgICAgIHJldHVybiBkYXRhU3RyZWFtO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVNZWRpYVN0cmVhbShub2RlSWQsIGxhYmVsLCBpbnRlcm5hbElkLCBhdmFpbGFibGVUcmFja0tpbmRzKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMuaGFzKG5vZGVJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLnNldChub2RlSWQsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlTWVkaWFTdHJlYW1zID0gdGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMuZ2V0KG5vZGVJZCk7XG4gICAgICAgIGlmIChyZW1vdGVNZWRpYVN0cmVhbXMuaGFzKGxhYmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUmVtb3RlTWVkaWFTdHJlYW1BbHJlYWR5RXhpc3RzLCAnUmVtb3RlIE1lZGlhU3RyZWFtIGFscmVhZHkgZXhpc3RzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlTm9kZSA9IG5ldyBVc2VyKG5vZGVJZCwgJycsICcnKTtcbiAgICAgICAgY29uc3QgcmVtb3RlTWVkaWFTdHJlYW0gPSBuZXcgUmVtb3RlTWVkaWFTdHJlYW0odGhpcy5jb25maWdzLmxvY2FsTm9kZSwgcmVtb3RlTm9kZSwgbGFiZWwsIGludGVybmFsSWQsIGF2YWlsYWJsZVRyYWNrS2luZHMsIHRoaXMuY29uZmlncy5jbHVzdGVySWQpO1xuICAgICAgICByZW1vdGVNZWRpYVN0cmVhbXMuc2V0KGxhYmVsLCByZW1vdGVNZWRpYVN0cmVhbSk7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZShyZW1vdGVNZWRpYVN0cmVhbSk7XG4gICAgICAgIHJldHVybiByZW1vdGVNZWRpYVN0cmVhbTtcbiAgICB9XG4gICAgY3JlYXRlVmVjdG9yRGF0YWJhc2UobGFiZWwsIGNvbm5lY3RvckNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGlmICh0aGlzLnZlY3RvckRhdGFiYXNlcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5WZWN0b3JEYXRhYmFzZUFscmVhZHlFeGlzdHMsICdEYXRhYmFzZSBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB2ZWN0b3JEYXRhYmFzZSA9IG5ldyBWZWN0b3JEYXRhYmFzZSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLCBsYWJlbCwgdGhpcy5jb25maWdzLmNsdXN0ZXJJZCwgY29ubmVjdG9yQ29uc3RydWN0b3IpO1xuICAgICAgICAgICAgdGhpcy52ZWN0b3JEYXRhYmFzZXMuc2V0KGxhYmVsLCB2ZWN0b3JEYXRhYmFzZSk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodmVjdG9yRGF0YWJhc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHZlY3RvckRhdGFiYXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNES0NsaWVudEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuVmVjdG9yRGF0YWJhc2VDcmVhdGlvbkZhaWxlZCwgeyBsYWJlbCwgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLCB2ZW5kb3JJZDogdGhpcy5jb25maWdzLnZlbmRvcklkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE9iamVjdFN0b3JlQnVja2V0cyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gQXJyYXkuZnJvbSh0aGlzLm9iamVjdFN0b3Jlcy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0S2V5VmFsdWVEYXRhYmFzZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IEFycmF5LmZyb20odGhpcy5rZXlWYWx1ZURhdGFiYXNlcy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0Sm9iRGlzcGF0Y2hlcnMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IEFycmF5LmZyb20odGhpcy5qb2JEaXNwYXRjaGVycy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0Sm9iV29ya2VycyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gQXJyYXkuZnJvbSh0aGlzLmpvYldvcmtlcnMudmFsdWVzKCkpO1xuICAgICAgICBpZiAoc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW1zLmZpbHRlcihzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbXM7XG4gICAgfVxuICAgIGdldEdlbmVyYXRpdmVBSUNvbnRleHRzKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpdmVBSUNvbnRleHRzID0gQXJyYXkuZnJvbSh0aGlzLmpvYkRpc3BhdGNoZXJzLnZhbHVlcygpKS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBHZW5lcmF0aXZlQUlDb250ZXh0KTtcbiAgICAgICAgaWYgKHN0cmF0ZWd5KSB7XG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGl2ZUFJQ29udGV4dHMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2VuZXJhdGl2ZUFJQ29udGV4dHM7XG4gICAgfVxuICAgIGdldEdlbmVyYXRpdmVBSVdvcmtlcnMoc3RyYXRlZ3kpIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtcyA9IEFycmF5LmZyb20odGhpcy5qb2JXb3JrZXJzLnZhbHVlcygpKS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBHZW5lcmF0aXZlQUlXb3JrZXIpO1xuICAgICAgICBpZiAoc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW1zLmZpbHRlcihzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbXM7XG4gICAgfVxuICAgIGdldEdyYXBoRGF0YWJhc2VzKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbXMgPSBBcnJheS5mcm9tKHRoaXMuZ3JhcGhEYXRhYmFzZXMudmFsdWVzKCkpO1xuICAgICAgICBpZiAoc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW1zLmZpbHRlcihzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbXM7XG4gICAgfVxuICAgIGdldExvY2FsTWVkaWFTdHJlYW1zKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbXMgPSBBcnJheS5mcm9tKHRoaXMubG9jYWxNZWRpYVN0cmVhbXMudmFsdWVzKCkpO1xuICAgICAgICBpZiAoc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJlYW1zLmZpbHRlcihzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbXM7XG4gICAgfVxuICAgIGdldFB1YlN1YlRvcGljcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBzdHJlYW1zID0gQXJyYXkuZnJvbSh0aGlzLnB1YlN1YlRvcGljcy52YWx1ZXMoKSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0UmVtb3RlTWVkaWFTdHJlYW1zKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbXMgPSBBcnJheS5mcm9tKHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLnZhbHVlcygpKS5yZWR1Y2UoKGFjYywgcmVtb3RlU3RyZWFtcykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsIC4uLkFycmF5LmZyb20ocmVtb3RlU3RyZWFtcy52YWx1ZXMoKSldO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0cmVhbXMuZmlsdGVyKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtcztcbiAgICB9XG4gICAgZ2V0VmVjdG9yRGF0YWJhc2VzKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbXMgPSBBcnJheS5mcm9tKHRoaXMudmVjdG9yRGF0YWJhc2VzLnZhbHVlcygpKTtcbiAgICAgICAgaWYgKHN0cmF0ZWd5KSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyZWFtcy5maWx0ZXIoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW1zO1xuICAgIH1cbiAgICBnZXRPYmplY3RTdG9yZUJ1Y2tldChsYWJlbCkge1xuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRoaXMub2JqZWN0U3RvcmVzLmdldChsYWJlbCk7XG4gICAgICAgIGlmICghb2JqZWN0U3RvcmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlRG9lc05vdEV4aXN0LCAnT2JqZWN0U3RvcmUgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iamVjdFN0b3JlO1xuICAgIH1cbiAgICBnZXRHcmFwaERhdGFiYXNlKGxhYmVsKSB7XG4gICAgICAgIGNvbnN0IGdyYXBoRGF0YWJhc2UgPSB0aGlzLmdyYXBoRGF0YWJhc2VzLmdldChsYWJlbCk7XG4gICAgICAgIGlmICghZ3JhcGhEYXRhYmFzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuR3JhcGhEYXRhYmFzZURvZXNOb3RFeGlzdCwgJ0dyYXBoRGF0YWJhc2Ugbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdyYXBoRGF0YWJhc2U7XG4gICAgfVxuICAgIGdldEtleVZhbHVlRGF0YWJhc2UobGFiZWwpIHtcbiAgICAgICAgY29uc3Qga2V5VmFsdWVEYXRhYmFzZSA9IHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuZ2V0KGxhYmVsKTtcbiAgICAgICAgaWYgKCFrZXlWYWx1ZURhdGFiYXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlRG9lc05vdEV4aXN0LCAnS2V5VmFsdWVEYXRhYmFzZSBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5VmFsdWVEYXRhYmFzZTtcbiAgICB9XG4gICAgZ2V0UHViU3ViVG9waWMobGFiZWwpIHtcbiAgICAgICAgY29uc3QgcHViU3ViVG9waWMgPSB0aGlzLnB1YlN1YlRvcGljcy5nZXQobGFiZWwpO1xuICAgICAgICBpZiAoIXB1YlN1YlRvcGljKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5QdWJTdWJUb3BpY0RvZXNOb3RFeGlzdCwgJ1B1YlN1YlRvcGljIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwdWJTdWJUb3BpYztcbiAgICB9XG4gICAgZ2V0VmVjdG9yRGF0YWJhc2UobGFiZWwpIHtcbiAgICAgICAgY29uc3QgdmVjdG9yRGF0YWJhc2UgPSB0aGlzLnZlY3RvckRhdGFiYXNlcy5nZXQobGFiZWwpO1xuICAgICAgICBpZiAoIXZlY3RvckRhdGFiYXNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5WZWN0b3JEYXRhYmFzZURvZXNOb3RFeGlzdCwgJ1ZlY3RvckRhdGFiYXNlIG5vdCBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2ZWN0b3JEYXRhYmFzZTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuUHVibGlzaE1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUHVibGlzaE1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuVW5wdWJsaXNoTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVVbnB1Ymxpc2hNZWRpYVN0cmVhbShldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlSm9iRGlzcGF0Y2hlcjpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUpvYkRpc3BhdGNoZXIoZXZlbnQuY29udGVudC5sYWJlbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZUpvYldvcmtlcjpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUpvYldvcmtlcihldmVudC5jb250ZW50LmxhYmVsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMb2NhbE1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQubGFiZWwpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VQdWJTdWJUb3BpYzpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVB1YlN1YlRvcGljKGV2ZW50LmNvbnRlbnQubGFiZWwpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VPYmplY3RTdG9yZUJ1Y2tldDpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU9iamVjdFN0b3JlKGV2ZW50LmNvbnRlbnQubGFiZWwpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VLZXlWYWx1ZURhdGFiYXNlOlxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlS2V5VmFsdWVEYXRhYmFzZShldmVudC5jb250ZW50LmxhYmVsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlVmVjdG9yRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVWZWN0b3JEYXRhYmFzZShldmVudC5jb250ZW50LmxhYmVsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlR3JhcGhEYXRhYmFzZTpcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUdyYXBoRGF0YWJhc2UoZXZlbnQuY29udGVudC5sYWJlbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5VbnN1YnNjcmliZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ29udGVudFVuc3Vic2NyaWJlTWVkaWFTdHJlYW0oZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5SZXF1ZXN0U3luY0tleVZhbHVlRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlWYWx1ZURhdGFiYXNlcy5nZXQoZXZlbnQuY29udGVudC5sYWJlbCk/LnNlbmRUcmFuc2FjdGlvbnNEdW1wKGV2ZW50LnNvdXJjZUlkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlNlbmRUcmFuc2FjdGlvbnNEdW1wOlxuICAgICAgICAgICAgICAgIHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuZ2V0KGV2ZW50LmNvbnRlbnQubGFiZWwpPy5wcm9jZXNzVHJhbnNhY3Rpb25zRHVtcChldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudC50cmFuc2FjdGlvbnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuUmVxdWVzdFRyYW5zYWN0aW9uc1ZhbHVlOlxuICAgICAgICAgICAgICAgIHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuZ2V0KGV2ZW50LmNvbnRlbnQubGFiZWwpPy5zZW5kVHJhbnNhY3Rpb25zVmFsdWUoZXZlbnQuc291cmNlSWQsIGV2ZW50LmNvbnRlbnQudHJhbnNhY3Rpb25JZHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuTG9jYWxNZWRpYVN0cmVhbVRyYWNrRmFpbDpcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iubm90aWZ5Q2x1c3RlcignbG9jYWwtbWVkaWEtc3RyZWFtLXRyYWNrLWZhaWwnLCB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBldmVudC5jb250ZW50LmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICB0cmFja0tpbmRzOiBldmVudC5jb250ZW50LnRyYWNrS2luZHMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTm9kZVN5c3RlbUV2ZW50cyh7IGNvbnRlbnQgfSkge1xuICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBOb2RlTWVzc2FnZVR5cGUuTm9kZUpvaW46XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOb2RlSm9pbk5lZWRQdWJsaXNoZWRTdHJlYW0oY29udGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlPYmplY3RTdG9yZU9mTm9kZUpvaW4oY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE5vZGVNZXNzYWdlVHlwZS5Ob2RlTGVhdmU6XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOb2RlTGVhdmUoY29udGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlPYmplY3RTdG9yZU9mTm9kZUxlYXZlKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5TdWJzY3JpYmVNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN1YnNjcmliZU1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuVXBkYXRlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVVcGRhdGVNZWRpYVN0cmVhbShldmVudC5zb3VyY2VJZCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlVuc3Vic2NyaWJlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVVbnN1YnNjcmliZU1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShjb250ZW50KSB7XG4gICAgICAgIGlmIChjb250ZW50LnJlbWFpbmluZ1RyYWNrcyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMuZ2V0KGNvbnRlbnQub3duZXJJZCk/LmdldChjb250ZW50LmxhYmVsKT8uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIFJlbW90ZU1lZGlhU3RyZWFtLCB3ZSBuZWVkIHRvIHVuc3Vic2NyaWJlIGl0cyB0cmFja0VuZGVkTGlzdGVuZXIocylcbiAgICAgICAgICAgIC8vIEJlZm9yZSB3ZSB1bnN1YnNjcmliZSB0aGUgdHJhY2suIE90aGVyd2lzZSB3ZSB3aWxsIHJlY2VpdmUgYSBSZW1vdGVUcmFja0ZhaWx1cmVcbiAgICAgICAgICAgIC8vIHdoZW4gdGhlIHRyYWNrIGlzIHJlbW92ZWQgZnJvbSB0aGUgY29ubmVjdGlvbi5cbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZU1lZGlhU3RyZWFtID0gdGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMuZ2V0KGNvbnRlbnQub3duZXJJZCk/LmdldChjb250ZW50LmxhYmVsKTtcbiAgICAgICAgICAgIGlmICghcmVtb3RlTWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50LnRyYWNrS2luZHMuZm9yRWFjaCgodHJhY2tLaW5kKSA9PiByZW1vdGVNZWRpYVN0cmVhbS51bnN1YnNjcmliZVRyYWNrRW5kZWRMaXN0ZW5lcih0cmFja0tpbmQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVQdWJsaXNoTWVkaWFTdHJlYW0oY29udGVudCkge1xuICAgICAgICBjb25zdCB7IGxhYmVsLCBvd25lcklkLCBzdHJlYW06IHsgc3RyZWFtSWQsIGF2YWlsYWJsZVRyYWNrS2luZHMgfSB9ID0gY29udGVudDtcbiAgICAgICAgaWYgKHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmdldChvd25lcklkKT8uaGFzKGxhYmVsKSkge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuQ29udGVudCwgJ1N0cmVhbSBhbHJlYWR5IGV4aXN0cycsIHN0cmVhbUlkKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLmNyZWF0ZVJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsLCBzdHJlYW1JZCwgYXZhaWxhYmxlVHJhY2tLaW5kcyk7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5ub3RpZnlDbHVzdGVyKCdjb250ZW50LXB1Ymxpc2gtbWVkaWEnLCB7XG4gICAgICAgICAgICBvd25lcklkLFxuICAgICAgICAgICAgc3RyZWFtLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlVW5wdWJsaXNoTWVkaWFTdHJlYW0oeyBvd25lcklkLCBsYWJlbCB9KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlUmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iubm90aWZ5Q2x1c3RlcignY29udGVudC11bnB1Ymxpc2gtbWVkaWEnLCB7XG4gICAgICAgICAgICBvd25lcklkLFxuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICBjb25zdCB7IG93bmVySWQsIGxhYmVsIH0gPSBjb250ZW50O1xuICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICBpZiAob3duZXJJZCAhPT0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpKSB7XG4gICAgICAgICAgICBzb3VyY2UgPSB0aGlzLnJlbW90ZU1lZGlhU3RyZWFtcy5nZXQob3duZXJJZCkuZ2V0KGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuZ2V0KGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBzb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtKHNvdXJjZUlkLCBjb250ZW50LnBhcmFtcykuc3Vic2NyaWJlKGNvbnRlbnQsIHNvdXJjZS5nZXRQcmlvcml0eSgpKTtcbiAgICB9XG4gICAgaGFuZGxlVXBkYXRlTWVkaWFTdHJlYW0oc291cmNlSWQsIGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgeyBvd25lcklkLCBsYWJlbCB9ID0gY29udGVudDtcbiAgICAgICAgbGV0IHNvdXJjZTtcbiAgICAgICAgaWYgKG93bmVySWQgIT09IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSkge1xuICAgICAgICAgICAgc291cmNlID0gdGhpcy5yZW1vdGVNZWRpYVN0cmVhbXMuZ2V0KG93bmVySWQpLmdldChsYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzb3VyY2UgPSB0aGlzLmxvY2FsTWVkaWFTdHJlYW1zLmdldChsYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbShzb3VyY2VJZCwgY29udGVudC5wYXJhbXMpLnVwZGF0ZShjb250ZW50KTtcbiAgICB9XG4gICAgaGFuZGxlVW5zdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICBjb25zdCB7IG93bmVySWQsIGxhYmVsIH0gPSBjb250ZW50O1xuICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICBpZiAob3duZXJJZCAhPT0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpKSB7XG4gICAgICAgICAgICBzb3VyY2UgPSB0aGlzLnJlbW90ZU1lZGlhU3RyZWFtcy5nZXQob3duZXJJZCkuZ2V0KGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNvdXJjZSA9IHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuZ2V0KGxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBzb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtKHNvdXJjZUlkKS51bnN1YnNjcmliZShjb250ZW50KTtcbiAgICB9XG4gICAgaGFuZGxlTm9kZUpvaW5OZWVkUHVibGlzaGVkU3RyZWFtKHsgaWQgfSkge1xuICAgICAgICB0aGlzLmdldExvY2FsTWVkaWFTdHJlYW1zKCkuZm9yRWFjaCgoc3RyZWFtKSA9PiB7XG4gICAgICAgICAgICBzdHJlYW0ucHVibGlzaChpZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVOb2RlTGVhdmUoeyBpZCB9KSB7XG4gICAgICAgIHRoaXMuZ2V0UmVtb3RlTWVkaWFTdHJlYW1zKChzdHJlYW0pID0+IHN0cmVhbS5nZXRPd25lcklkKCkgPT09IGlkKS5mb3JFYWNoKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVtb3RlTWVkaWFTdHJlYW0oc3RyZWFtLmdldE93bmVySWQoKSwgc3RyZWFtLmdldExhYmVsKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm90aWZ5T2JqZWN0U3RvcmVPZk5vZGVKb2luKHsgaWQgfSkge1xuICAgICAgICB0aGlzLm9iamVjdFN0b3Jlcy5mb3JFYWNoKChzdHJlYW0pID0+IHN0cmVhbS5oYW5kbGVOb2RlSm9pbihpZCkpO1xuICAgIH1cbiAgICBub3RpZnlPYmplY3RTdG9yZU9mTm9kZUxlYXZlKHsgaWQgfSkge1xuICAgICAgICB0aGlzLm9iamVjdFN0b3Jlcy5mb3JFYWNoKChzdHJlYW0pID0+IHN0cmVhbS5oYW5kbGVOb2RlTGVhdmUoaWQpKTtcbiAgICB9XG4gICAgcmVtb3ZlSm9iRGlzcGF0Y2hlcihsYWJlbCkge1xuICAgICAgICBpZiAoIXRoaXMuam9iRGlzcGF0Y2hlcnMuaGFzKGxhYmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuSm9iRGlzcGF0Y2hlckRvZXNOb3RFeGlzdCwgJ0pvYiBEaXNwYXRjaGVyIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgam9iRGlzcGF0Y2hlciA9IHRoaXMuam9iRGlzcGF0Y2hlcnMuZ2V0KGxhYmVsKTtcbiAgICAgICAgdGhpcy5qb2JEaXNwYXRjaGVycy5kZWxldGUobGFiZWwpO1xuICAgICAgICBqb2JEaXNwYXRjaGVyLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2Uoam9iRGlzcGF0Y2hlcik7XG4gICAgfVxuICAgIHJlbW92ZUpvYldvcmtlcihsYWJlbCkge1xuICAgICAgICBpZiAoIXRoaXMuam9iV29ya2Vycy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Kb2JXb3JrZXJEb2VzTm90RXhpc3QsICdKb2IgV29ya2VyIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgam9iV29ya2VyID0gdGhpcy5qb2JXb3JrZXJzLmdldChsYWJlbCk7XG4gICAgICAgIHRoaXMuam9iV29ya2Vycy5kZWxldGUobGFiZWwpO1xuICAgICAgICBqb2JXb3JrZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShqb2JXb3JrZXIpO1xuICAgIH1cbiAgICByZW1vdmVPYmplY3RTdG9yZShsYWJlbCkge1xuICAgICAgICBpZiAoIXRoaXMub2JqZWN0U3RvcmVzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlRG9lc05vdEV4aXN0LCAnU3RyZWFtIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YVN0cmVhbSA9IHRoaXMub2JqZWN0U3RvcmVzLmdldChsYWJlbCk7XG4gICAgICAgIHRoaXMub2JqZWN0U3RvcmVzLmRlbGV0ZShsYWJlbCk7XG4gICAgICAgIGRhdGFTdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShkYXRhU3RyZWFtKTtcbiAgICB9XG4gICAgcmVtb3ZlUHViU3ViVG9waWMobGFiZWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnB1YlN1YlRvcGljcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5QdWJTdWJUb3BpY0RvZXNOb3RFeGlzdCwgJ1N0cmVhbSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFTdHJlYW0gPSB0aGlzLnB1YlN1YlRvcGljcy5nZXQobGFiZWwpO1xuICAgICAgICB0aGlzLnB1YlN1YlRvcGljcy5kZWxldGUobGFiZWwpO1xuICAgICAgICBkYXRhU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZGF0YVN0cmVhbSk7XG4gICAgfVxuICAgIHJlbW92ZUtleVZhbHVlRGF0YWJhc2UobGFiZWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VEb2VzTm90RXhpc3QsICdEYXRhYmFzZSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFiYXNlID0gdGhpcy5rZXlWYWx1ZURhdGFiYXNlcy5nZXQobGFiZWwpO1xuICAgICAgICB0aGlzLmtleVZhbHVlRGF0YWJhc2VzLmRlbGV0ZShsYWJlbCk7XG4gICAgICAgIGRhdGFiYXNlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZGF0YWJhc2UpO1xuICAgIH1cbiAgICByZW1vdmVWZWN0b3JEYXRhYmFzZShsYWJlbCkge1xuICAgICAgICBpZiAoIXRoaXMudmVjdG9yRGF0YWJhc2VzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlZlY3RvckRhdGFiYXNlRG9lc05vdEV4aXN0LCAnRGF0YWJhc2UgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhYmFzZSA9IHRoaXMudmVjdG9yRGF0YWJhc2VzLmdldChsYWJlbCk7XG4gICAgICAgIHRoaXMudmVjdG9yRGF0YWJhc2VzLmRlbGV0ZShsYWJlbCk7XG4gICAgICAgIGRhdGFiYXNlLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UoZGF0YWJhc2UpO1xuICAgIH1cbiAgICByZW1vdmVHcmFwaERhdGFiYXNlKGxhYmVsKSB7XG4gICAgICAgIGlmICghdGhpcy5ncmFwaERhdGFiYXNlcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5HcmFwaERhdGFiYXNlRG9lc05vdEV4aXN0LCAnRGF0YWJhc2UgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhYmFzZSA9IHRoaXMuZ3JhcGhEYXRhYmFzZXMuZ2V0KGxhYmVsKTtcbiAgICAgICAgdGhpcy5ncmFwaERhdGFiYXNlcy5kZWxldGUobGFiZWwpO1xuICAgICAgICBkYXRhYmFzZS5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyU3lzdGVtU291cmNlKGRhdGFiYXNlKTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxNZWRpYVN0cmVhbShsYWJlbCkge1xuICAgICAgICBpZiAoIXRoaXMubG9jYWxNZWRpYVN0cmVhbXMuaGFzKGxhYmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Mb2NhbE1lZGlhU3RyZWFtRG9lc05vdEV4aXN0LCB7IGxhYmVsLCBsb2NhbElkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxNZWRpYVN0cmVhbSA9IHRoaXMubG9jYWxNZWRpYVN0cmVhbXMuZ2V0KGxhYmVsKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UobG9jYWxNZWRpYVN0cmVhbSk7XG4gICAgICAgIGxvY2FsTWVkaWFTdHJlYW0uZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmxvY2FsTWVkaWFTdHJlYW1zLmRlbGV0ZShsYWJlbCk7XG4gICAgfVxuICAgIHJlbW92ZVJlbW90ZU1lZGlhU3RyZWFtKG5vZGVJZCwgbGFiZWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbW90ZU1lZGlhU3RyZWFtcy5oYXMobm9kZUlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Ob2RlRG9lc05vdEV4aXN0LCB7IG5vZGVJZCwgbG9jYWxJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZU1lZGlhU3RyZWFtcyA9IHRoaXMucmVtb3RlTWVkaWFTdHJlYW1zLmdldChub2RlSWQpO1xuICAgICAgICBpZiAoIXJlbW90ZU1lZGlhU3RyZWFtcy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLlJlbW90ZU1lZGlhU3RyZWFtRG9lc05vdEV4aXN0LCB7IG5vZGVJZCwgbGFiZWwsIGxvY2FsSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdGVTdHJlYW0gPSByZW1vdGVNZWRpYVN0cmVhbXMuZ2V0KGxhYmVsKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UocmVtb3RlU3RyZWFtKTtcbiAgICAgICAgcmVtb3RlU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgcmVtb3RlTWVkaWFTdHJlYW1zLmRlbGV0ZShsYWJlbCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBKb2JTdGF0dXMsIEpvYlR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IENPTlRFTlRfR0VORVJBVElWRV9BSV9DT05URVhUX0FOU1dFUl9USU1FT1VULCBDT05URU5UX0dFTkVSQVRJVkVfQUlfQ09OVEVYVF9TVEFUU19ERUJPVU5DRSB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ1NlcnZpY2VzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgSm9iRGlzcGF0Y2hlciB9IGZyb20gJ21vZGVscy9Db250ZW50L0pvYkRpc3BhdGNoZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB3b3JrZmxvd1NlcnZpY2UgZnJvbSAnc2VydmljZXMvV29ya2Zsb3cvV29ya2Zsb3dTZXJ2aWNlJztcbmV4cG9ydCBjbGFzcyBHZW5lcmF0aXZlQUlDb250ZXh0IGV4dGVuZHMgSm9iRGlzcGF0Y2hlciB7XG4gICAgbG9jYWxOb2RlO1xuICAgIHZlbmRvcklkO1xuICAgIHByb21wdHMgPSAwO1xuICAgIHRva2VucyA9IDA7XG4gICAgZGVib3VuY2VTdGF0cztcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbE5vZGUsIGxhYmVsLCB2ZW5kb3JJZCwgZ3JhcGhTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKGxvY2FsTm9kZSwgbGFiZWwsIGdyYXBoU2VydmljZSk7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlU3RhdHMpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZGVib3VuY2VTdGF0cztcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnByb21wdHMgPSAwO1xuICAgICAgICB0aGlzLnRva2VucyA9IDA7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIHN1cGVyLnJlc2V0KCk7XG4gICAgfVxuICAgIGFzeW5jIHByb21wdChwcm9tcHQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgam9iT2JzZXJ2YWJsZSA9IGF3YWl0IHRoaXMuZ2V0Sm9iT2JzZXJ2YWJsZShwcm9tcHQsIEpvYlR5cGUuSm9iLCBvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHRUaW1lb3V0O1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gam9iT2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgIG5leHQ6ICh1cGRhdGVkSm9iKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodXBkYXRlZEpvYi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgSm9iU3RhdHVzLkNvbXBsZXRlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHVwZGF0ZWRKb2IucmVzdWx0LmlucHV0VG9rZW5zID8/IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dTZXJ2aWNlRXZlbnQocHJvbXB0LCBpbnB1dFRva2Vucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc3VsdFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodXBkYXRlZEpvYi5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvbXB0cyArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zICs9IGlucHV0VG9rZW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEpvYlN0YXR1cy5GYWlsZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc3VsdFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkdlbmVyYXRpdmVBSUNvbnRleHRKb2JGYWlsZWQsIHsgdXBkYXRlZEpvYiB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc3VsdFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5HZW5lcmF0aXZlQUlDb250ZXh0Sm9iRmFpbGVkLCB7IGVyciB9KSk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRGdW5jdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5HZW5lcmF0aXZlQUlDb250ZXh0Sm9iVGltZW91dCkpO1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdFRpbWVvdXQgPSBzZXRUaW1lb3V0KHRpbWVvdXRGdW5jdGlvbiwgQ09OVEVOVF9HRU5FUkFUSVZFX0FJX0NPTlRFWFRfQU5TV0VSX1RJTUVPVVQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgKnN0cmVhbShwcm9tcHQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgam9iT2JzZXJ2YWJsZSA9IGF3YWl0IHRoaXMuZ2V0Sm9iT2JzZXJ2YWJsZShwcm9tcHQsIEpvYlR5cGUuSm9iU3RyZWFtLCBvcHRpb25zKTtcbiAgICAgICAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgICAgICAgbGV0IG5leHRJbmRleCA9IDA7XG4gICAgICAgIGxldCByZXN1bHRUaW1lb3V0O1xuICAgICAgICBsZXQgZXJyb3I7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gW107XG4gICAgICAgIGNvbnN0IHdhaXRRdWV1ZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc1dhaXRRdWV1ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHdoaWxlICh3YWl0UXVldWUuaGFzKG5leHRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHdhaXRRdWV1ZS5nZXQocXVldWUubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgd2FpdFF1ZXVlLmRlbGV0ZShxdWV1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIG5leHRJbmRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBsZXQgcGVuZGluZ1Jlc29sdmUgPSBudWxsO1xuICAgICAgICBjb25zdCByZXNvbHZlUHJvbWlzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nUmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdSZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgcGVuZGluZ1Jlc29sdmUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjbG9zZUxvb3AgPSAoZSkgPT4ge1xuICAgICAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgICAgICByZXNvbHZlUHJvbWlzZSgpO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBlcnJvciA9IGU7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGpvYk9ic2VydmFibGUuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgIG5leHQ6ICh1cGRhdGVkSm9iKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh1cGRhdGVkSm9iLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEpvYlN0YXR1cy5QYXJ0aWFsOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRKb2IucmVzdWx0ICYmIHVwZGF0ZWRKb2IucmVzdWx0Lm91dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRKb2IucmVzdWx0LmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VMb29wKFNES0ludGVybmFsRXJyb3IuY29kZXMuR2VuZXJhdGl2ZUFJQ29udGV4dEludmFsaWRQYXJ0aWFsUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEluZGV4ID09PSB1cGRhdGVkSm9iLnJlc3VsdC5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHVwZGF0ZWRKb2IucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NXYWl0UXVldWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0UXVldWUuc2V0KHVwZGF0ZWRKb2IucmVzdWx0LmluZGV4LCB1cGRhdGVkSm9iLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSm9iU3RhdHVzLkNvbXBsZXRlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0VG9rZW5zID0gdXBkYXRlZEpvYi5yZXN1bHQuaW5wdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nU2VydmljZUV2ZW50KHByb21wdCwgaW5wdXRUb2tlbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc3VsdFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VMb29wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb21wdHMgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW5zICs9IGlucHV0VG9rZW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEpvYlN0YXR1cy5GYWlsZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVzdWx0VGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUxvb3AoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5HZW5lcmF0aXZlQUlDb250ZXh0Sm9iRmFpbGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVzdWx0VGltZW91dCk7XG4gICAgICAgICAgICAgICAgY2xvc2VMb29wKFNES0ludGVybmFsRXJyb3IuY29kZXMuR2VuZXJhdGl2ZUFJQ29udGV4dEpvYkZhaWxlZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdGltZW91dEZ1bmN0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgY2xvc2VMb29wKFNES0ludGVybmFsRXJyb3IuY29kZXMuR2VuZXJhdGl2ZUFJQ29udGV4dEpvYlRpbWVvdXQpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXNldFRpbWVvdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQocmVzdWx0VGltZW91dCk7XG4gICAgICAgICAgICByZXN1bHRUaW1lb3V0ID0gc2V0VGltZW91dCh0aW1lb3V0RnVuY3Rpb24sIENPTlRFTlRfR0VORVJBVElWRV9BSV9DT05URVhUX0FOU1dFUl9USU1FT1VUKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVzdWx0VGltZW91dCA9IHNldFRpbWVvdXQodGltZW91dEZ1bmN0aW9uLCBDT05URU5UX0dFTkVSQVRJVkVfQUlfQ09OVEVYVF9BTlNXRVJfVElNRU9VVCk7XG4gICAgICAgIHdoaWxlICghZG9uZSB8fCBxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgbmV4dCBwYXJ0aWFsIHJlc3VsdCBvciB0aGUgam9iIHRvIGNvbXBsZXRlL2ZhaWxcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gKHBlbmRpbmdSZXNvbHZlID0gcmVzb2x2ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdHZW5lcmF0aXZlQUlDb250ZXh0IHN0cmVhbSBlcnJvcicsIHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXREYXRhQnVja2V0SWRzKCkge1xuICAgICAgICBjb25zdCB3b3JrZmxvdyA9IGF3YWl0IHdvcmtmbG93U2VydmljZS5nZXRXb3JrZmxvdyh0aGlzLnZlbmRvcklkLCB0aGlzLmxhYmVsKTtcbiAgICAgICAgcmV0dXJuIHdvcmtmbG93LmRhdGFCdWNrZXRJZHM7XG4gICAgfVxuICAgIGxvZ1NlcnZpY2VFdmVudChwcm9tcHQsIHRva2VuQ291bnQpIHtcbiAgICAgICAgY29uc3QgdG9waWMgPSB0aGlzLmxhYmVsO1xuICAgICAgICBjb25zdCBub2RlSWQgPSB0aGlzLmdldE93bmVySWQoKTtcbiAgICAgICAgY29uc3QgdHlwZSA9ICdwcm9tcHQnO1xuICAgICAgICBsb2dnZXIubG9nU2VydmljZUV2ZW50KExvZ2dpbmdTZXJ2aWNlcy5HZW5lcmF0aXZlQUlDb250ZXh0LCB7XG4gICAgICAgICAgICB0b3BpYyxcbiAgICAgICAgICAgIHByb21wdCxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBub2RlSWQsXG4gICAgICAgICAgICB0b2tlbkNvdW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Sm9iT2JzZXJ2YWJsZShwcm9tcHQsIGpvYlR5cGUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBqb2IgPSB7XG4gICAgICAgICAgICBpZDogYGpvYi0ke3V1aWR2NCgpfWAsXG4gICAgICAgICAgICBqb2JUeXBlLFxuICAgICAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgICAgIHByb21wdDogcHJvbXB0LFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhdHVzOiBKb2JTdGF0dXMuUGVuZGluZyxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgam9iT2JzZXJ2YWJsZSA9IGF3YWl0IHRoaXMuY3JlYXRlSm9iKGpvYik7XG4gICAgICAgIHJldHVybiBqb2JPYnNlcnZhYmxlO1xuICAgIH1cbiAgICBzZW5kU3RhdHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlU3RhdHMpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVib3VuY2VTdGF0cyA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZGVib3VuY2VTdGF0cztcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5HZW5lcmF0aXZlQUlDb250ZXh0U3RhdHMsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBzdGF0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzU2VudDogdGhpcy5tZXNzYWdlc1NlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc1JlY2VpdmVkOiB0aGlzLm1lc3NhZ2VzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1NlbnQ6IHRoaXMuYnl0ZXNTZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNSZWNlaXZlZDogdGhpcy5ieXRlc1JlY2VpdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRzOiB0aGlzLnByb21wdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnM6IHRoaXMudG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgQ09OVEVOVF9HRU5FUkFUSVZFX0FJX0NPTlRFWFRfU1RBVFNfREVCT1VOQ0UpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBHZW5lcmF0aXZlQUlFbmdpbmVUeXBlLCBPYmplY3RLaW5kLCBQYXlsb2FkQWN0aW9uLCBTdG9yYWdlRXZlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBDT05URU5UX0dFTkVSQVRJVkVfQUlfTU9ERUxfRVhURU5TSU9OLCBDT05URU5UX0dFTkVSQVRJVkVfQUlfV09SS0VSX1NUQVRTX0RFQk9VTkNFIH0gZnJvbSAnY29uc3RhbnRzL0NvbnRlbnQnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZSwgV29ya2Zsb3dCbG9ja1R5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1NlcnZpY2VzL1dvcmtmbG93JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzLCBMb2dnaW5nU2VydmljZXMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgeyBKb2JXb3JrZXIgfSBmcm9tICdtb2RlbHMvQ29udGVudC9Kb2JXb3JrZXInO1xuaW1wb3J0IHdvcmtmbG93U2VydmljZSBmcm9tICdzZXJ2aWNlcy9Xb3JrZmxvdy9Xb3JrZmxvd1NlcnZpY2UnO1xuaW1wb3J0IHsgcHJvY2Vzc0luZ2VzdCB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QnO1xuaW1wb3J0IHsgcHJvY2Vzc1dvcmtmbG93LCBzdHJlYW1Xb3JrZmxvdyB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9Xb3JrZmxvdyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIEdlbmVyYXRpdmVBSVdvcmtlciBleHRlbmRzIEpvYldvcmtlciB7XG4gICAgbG9jYWxOb2RlO1xuICAgIHZlbmRvcklkO1xuICAgIGNvbnRlbnRNZWRpYXRvcjtcbiAgICBnZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzO1xuICAgIGRvY3VtZW50UGFyc2VyQ29ubmVjdG9yO1xuICAgIG5scExpYnJhcnlDb25uZWN0b3I7XG4gICAgc2VhcmNoQXBpS2V5O1xuICAgIHNlYXJjaENvbm5lY3RvcjtcbiAgICB3b3JrZmxvdztcbiAgICBtb2RlbFN0b3JlO1xuICAgIGRhdGFTdG9yZXMgPSBuZXcgTWFwKCk7XG4gICAgbW9kZWxzID0gbmV3IE1hcCgpO1xuICAgIGRlYm91bmNlU3RhdHM7XG4gICAgcHJvbXB0cyA9IDA7XG4gICAgdG9rZW5zID0gMDtcbiAgICBpc09wZW5lZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsTm9kZSwgbGFiZWwsIHZlbmRvcklkLCBjYXBhY2l0eVJlcG9ydGVyLCBjb250ZW50TWVkaWF0b3IsIGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnMsIGRvY3VtZW50UGFyc2VyQ29ubmVjdG9yLCBubHBMaWJyYXJ5Q29ubmVjdG9yLCBzZWFyY2hBcGlLZXksIHNlYXJjaENvbm5lY3Rvcikge1xuICAgICAgICBzdXBlcihsb2NhbE5vZGUsIGxhYmVsLCBjYXBhY2l0eVJlcG9ydGVyLCBnZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzKTtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUgPSBsb2NhbE5vZGU7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy5jb250ZW50TWVkaWF0b3IgPSBjb250ZW50TWVkaWF0b3I7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9ycyA9IGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnM7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRQYXJzZXJDb25uZWN0b3IgPSBkb2N1bWVudFBhcnNlckNvbm5lY3RvcjtcbiAgICAgICAgdGhpcy5ubHBMaWJyYXJ5Q29ubmVjdG9yID0gbmxwTGlicmFyeUNvbm5lY3RvcjtcbiAgICAgICAgdGhpcy5zZWFyY2hBcGlLZXkgPSBzZWFyY2hBcGlLZXk7XG4gICAgICAgIHRoaXMuc2VhcmNoQ29ubmVjdG9yID0gc2VhcmNoQ29ubmVjdG9yO1xuICAgIH1cbiAgICBhc3luYyBkZXN0cm95KCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvbm5lY3RvciBvZiB0aGlzLmdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbm5lY3Rvci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubW9kZWxTdG9yZT8udW5zdWJzY3JpYmUodGhpcy5sYWJlbCk7XG4gICAgICAgIHRoaXMuZGF0YVN0b3Jlcy5mb3JFYWNoKChkYXRhU3RvcmUpID0+IGRhdGFTdG9yZS51bnN1YnNjcmliZSh0aGlzLmxhYmVsKSk7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlU3RhdHMpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZGVib3VuY2VTdGF0cztcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGFzeW5jIG9wZW4oc2tpcFN5bmMgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW5lZCkge1xuICAgICAgICAgICAgc3VwZXIub3BlbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud29ya2Zsb3cgPSBhd2FpdCB3b3JrZmxvd1NlcnZpY2UuZ2V0V29ya2Zsb3codGhpcy52ZW5kb3JJZCwgdGhpcy5sYWJlbCk7XG4gICAgICAgIHRoaXMubW9kZWxTdG9yZSA9IHRoaXMuY29udGVudE1lZGlhdG9yLmdldE9iamVjdFN0b3JlQnVja2V0KHRoaXMud29ya2Zsb3cubW9kZWxzQnVja2V0SWQpO1xuICAgICAgICBpZiAoIXRoaXMubW9kZWxTdG9yZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlbCBzdG9yZSBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNraXBTeW5jKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JTeW5jQ29tcGxldGUodGhpcy5tb2RlbFN0b3JlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHRoaXMud29ya2Zsb3cubW9kZWxzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBwYXRoTmFtZTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZWwuZW5naW5lVHlwZSA9PT0gR2VuZXJhdGl2ZUFJRW5naW5lVHlwZS5MbGFtYWNwcCkge1xuICAgICAgICAgICAgICAgICAgICBwYXRoTmFtZSA9IGF3YWl0IHRoaXMuZ2V0TW9kZWwoYC8ke21vZGVsLmlkfSR7Q09OVEVOVF9HRU5FUkFUSVZFX0FJX01PREVMX0VYVEVOU0lPTn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbHMuc2V0KG1vZGVsLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBtb2RlbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgZW5naW5lVHlwZTogbW9kZWwuZW5naW5lVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdGFza1R5cGU6IG1vZGVsLnRhc2tUeXBlLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dFR5cGU6IG1vZGVsLmlucHV0VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogbW9kZWwub3V0cHV0VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVXJsOiBtb2RlbC5zb3VyY2VVcmwsXG4gICAgICAgICAgICAgICAgICAgIHBhdGhOYW1lLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vZGVsU3RvcmUucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogUGF5bG9hZEFjdGlvbi5GaWxlLFxuICAgICAgICAgICAgICAgICAgICBmaWxlOiBuZXcgRmlsZShbJyddLCBgJHttb2RlbC5pZH0ke0NPTlRFTlRfR0VORVJBVElWRV9BSV9NT0RFTF9FWFRFTlNJT059YCksXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6ICcvJyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEVuY3J5cHRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmZXRjaFVybDogbW9kZWwuc291cmNlVXJsLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbHMuc2V0KG1vZGVsLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBtb2RlbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgZW5naW5lVHlwZTogbW9kZWwuZW5naW5lVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdGFza1R5cGU6IG1vZGVsLnRhc2tUeXBlLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dFR5cGU6IG1vZGVsLmlucHV0VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogbW9kZWwub3V0cHV0VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVXJsOiBtb2RlbC5zb3VyY2VVcmwsXG4gICAgICAgICAgICAgICAgICAgIHBhdGhOYW1lOiBhd2FpdCB0aGlzLmdldE1vZGVsKGAvJHttb2RlbC5pZH0ke0NPTlRFTlRfR0VORVJBVElWRV9BSV9NT0RFTF9FWFRFTlNJT059YClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNvbm5lY3RvciBvZiB0aGlzLmdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbm5lY3Rvci5pbml0aWFsaXplKHRoaXMubGFiZWwsIHRoaXMubW9kZWxzKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGJ1Y2tldElkIG9mIHRoaXMud29ya2Zsb3cuZGF0YUJ1Y2tldElkcykge1xuICAgICAgICAgICAgdGhpcy5kYXRhU3RvcmVzLnNldChidWNrZXRJZCwgdGhpcy5jb250ZW50TWVkaWF0b3IuZ2V0T2JqZWN0U3RvcmVCdWNrZXQoYnVja2V0SWQpKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRFeGlzdGluZ0NvbnRlbnQoc2tpcFN5bmMpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvQ29udGVudCgpO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICB0aGlzLmlzT3BlbmVkID0gdHJ1ZTtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5wcm9tcHRzID0gMDtcbiAgICAgICAgdGhpcy50b2tlbnMgPSAwO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICBzdXBlci5yZXNldCgpO1xuICAgIH1cbiAgICBnZXRCaWQoKSB7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvcmVzRnJvbUNhcGFjaXR5UmVwb3J0KCk7XG4gICAgfVxuICAgIGNvbXBpbGVTdGF0cyhqb2JSZXN1bHQsIHN0YXJ0VGltZSwgZW5kVGltZSkge1xuICAgICAgICBjb25zdCB7IG91dHB1dFRva2VucyA9IDAsIG91dHB1dCA9ICcnIH0gPSBqb2JSZXN1bHQ7XG4gICAgICAgIGNvbnN0IHRva2Vuc1BlclNlY29uZCA9IG91dHB1dFRva2VucyAvICgoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyAxMDAwKTtcbiAgICAgICAgdGhpcy5wcm9tcHRzICs9IDE7XG4gICAgICAgIHRoaXMudG9rZW5zICs9IG91dHB1dFRva2VucztcbiAgICAgICAgdGhpcy5sb2dTZXJ2aWNlRXZlbnQob3V0cHV0LCB0b2tlbnNQZXJTZWNvbmQsIG91dHB1dFRva2Vucyk7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIGFjY3VtdWxhdGVSZXN1bHQoZmluYWxSZXN1bHQsIG5ld1Jlc3VsdCkge1xuICAgICAgICBmaW5hbFJlc3VsdC5vdXRwdXQgPSBmaW5hbFJlc3VsdC5vdXRwdXQgPz8gJyc7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvdXRwdXQ6ICh0eXBlb2YgZmluYWxSZXN1bHQub3V0cHV0ID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgbmV3UmVzdWx0Lm91dHB1dCA9PT0gJ3N0cmluZycpID8gZmluYWxSZXN1bHQub3V0cHV0ICsgbmV3UmVzdWx0Lm91dHB1dCA6IG5ld1Jlc3VsdC5vdXRwdXQsXG4gICAgICAgICAgICBvdXRwdXRUb2tlbnM6IG5ld1Jlc3VsdC5vdXRwdXRUb2tlbnMgPz8gZmluYWxSZXN1bHQub3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgaW5wdXRUb2tlbnM6IG5ld1Jlc3VsdC5pbnB1dFRva2VucyA/PyBmaW5hbFJlc3VsdC5pbnB1dFRva2VucyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgaW50ZXJuYWxQcm9jZXNzSm9iKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLndvcmtmbG93KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtmbG93IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21wdEJsb2NrID0gdGhpcy53b3JrZmxvdy5ibG9ja3MuZmluZCgoYikgPT4gYi50eXBlID09PSBXb3JrZmxvd0Jsb2NrVHlwZS5Qcm9tcHQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9jZXNzV29ya2Zsb3cocGFyYW1ldGVycywgcHJvbXB0QmxvY2ssIHRoaXMud29ya2Zsb3cuYmxvY2tzLCB7XG4gICAgICAgICAgICBkb2N1bWVudFBhcnNlckNvbm5lY3RvcjogdGhpcy5kb2N1bWVudFBhcnNlckNvbm5lY3RvcixcbiAgICAgICAgICAgIG5scExpYnJhcnlDb25uZWN0b3I6IHRoaXMubmxwTGlicmFyeUNvbm5lY3RvcixcbiAgICAgICAgICAgIGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnM6IHRoaXMuZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9ycyxcbiAgICAgICAgICAgIG1vZGVsczogdGhpcy53b3JrZmxvdy5tb2RlbHMsXG4gICAgICAgICAgICBjb250ZW50TWVkaWF0b3I6IHRoaXMuY29udGVudE1lZGlhdG9yLFxuICAgICAgICAgICAgc2VhcmNoQXBpS2V5OiB0aGlzLnNlYXJjaEFwaUtleSxcbiAgICAgICAgICAgIHNlYXJjaENvbm5lY3RvcjogdGhpcy5zZWFyY2hDb25uZWN0b3IsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyAqaW50ZXJuYWxQcm9jZXNzSm9iU3RyZWFtKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLndvcmtmbG93KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtmbG93IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21wdEJsb2NrID0gdGhpcy53b3JrZmxvdy5ibG9ja3MuZmluZCgoYikgPT4gYi50eXBlID09PSBXb3JrZmxvd0Jsb2NrVHlwZS5Qcm9tcHQpO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHJlc3VsdCBvZiBzdHJlYW1Xb3JrZmxvdyhwYXJhbWV0ZXJzLCBwcm9tcHRCbG9jaywgdGhpcy53b3JrZmxvdy5ibG9ja3MsIHtcbiAgICAgICAgICAgIGRvY3VtZW50UGFyc2VyQ29ubmVjdG9yOiB0aGlzLmRvY3VtZW50UGFyc2VyQ29ubmVjdG9yLFxuICAgICAgICAgICAgbmxwTGlicmFyeUNvbm5lY3RvcjogdGhpcy5ubHBMaWJyYXJ5Q29ubmVjdG9yLFxuICAgICAgICAgICAgZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9yczogdGhpcy5nZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzLFxuICAgICAgICAgICAgbW9kZWxzOiB0aGlzLndvcmtmbG93Lm1vZGVscyxcbiAgICAgICAgICAgIGNvbnRlbnRNZWRpYXRvcjogdGhpcy5jb250ZW50TWVkaWF0b3IsXG4gICAgICAgICAgICBzZWFyY2hBcGlLZXk6IHRoaXMuc2VhcmNoQXBpS2V5LFxuICAgICAgICAgICAgc2VhcmNoQ29ubmVjdG9yOiB0aGlzLnNlYXJjaENvbm5lY3RvcixcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIHlpZWxkIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB3YWl0Rm9yU3luY0NvbXBsZXRlKHN0b3JlKSB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBzdG9yZS5zdWJzY3JpYmUodGhpcy5sYWJlbCwgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ldmVudCA9PT0gU3RvcmFnZUV2ZW50VHlwZS5TeW5jQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcmUudW5zdWJzY3JpYmUodGhpcy5sYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1vZGVsKHBhdGhOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5tb2RlbFN0b3JlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZGVsIHN0b3JlIG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMubW9kZWxTdG9yZS5saXN0KCcvJywgeyByZWN1cnNpdmU6IGZhbHNlLCBpbmNsdWRlU3luY2luZ0ZpbGVzOiBmYWxzZSB9KTtcbiAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBtb2RlbHMpIHtcbiAgICAgICAgICAgIGlmIChtb2RlbC5raW5kID09PSBPYmplY3RLaW5kLkZpbGUgJiYgbW9kZWwucGF0aE5hbWUgPT09IHBhdGhOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVsLmFic29sdXRlUGF0aE5hbWUgPz8gbW9kZWwucGF0aE5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlbCBub3QgZm91bmQ6ICcgKyBwYXRoTmFtZSk7XG4gICAgfVxuICAgIGFzeW5jIGxvYWRFeGlzdGluZ0NvbnRlbnQoc2tpcFN5bmMpIHtcbiAgICAgICAgZm9yIChjb25zdCBkYXRhU3RvcmUgb2YgdGhpcy5kYXRhU3RvcmVzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghc2tpcFN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yU3luY0NvbXBsZXRlKGRhdGFTdG9yZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBkYXRhU3RvcmUubGlzdCgnLycsIHsgcmVjdXJzaXZlOiB0cnVlLCBpbmNsdWRlU3luY2luZ0ZpbGVzOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnN5bmNGb2xkZXIoZGF0YVN0b3JlLmdldE5hbWUoKSwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgbG9hZGluZyBleGlzdGluZyBjb250ZW50Jywge1xuICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN5bmNGb2xkZXIoZGF0YVN0b3JlSWQsIGVudHJpZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmtpbmQgPT09IE9iamVjdEtpbmQuRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtLmVudHJpZXMgfHwgaXRlbS5lbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jRm9sZGVyKGRhdGFTdG9yZUlkLCBpdGVtLmVudHJpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0ua2luZCA9PT0gT2JqZWN0S2luZC5GaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRDb250ZW50KGRhdGFTdG9yZUlkLCBpdGVtLnBhdGhOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmVUb0NvbnRlbnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgZGF0YVN0b3JlIG9mIHRoaXMuZGF0YVN0b3Jlcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgZGF0YVN0b3JlLnN1YnNjcmliZSh0aGlzLmxhYmVsLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YS5ldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0b3JhZ2VFdmVudFR5cGUuRmlsZVdyaXRlOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRDb250ZW50KGRhdGFTdG9yZS5nZXROYW1lKCksIGRhdGEucGF5bG9hZC5maWxlLnBhdGhOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0b3JhZ2VFdmVudFR5cGUuRmlsZURlbGV0ZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ29udGVudChkYXRhU3RvcmUuZ2V0TmFtZSgpLCBkYXRhLnBheWxvYWQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGFkZENvbnRlbnQoZGF0YVN0b3JlSWQsIHBhdGhOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy53b3JrZmxvdykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXb3JrZmxvdyBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGxEYXRhQ29sbGVjdGlvbnMgPSB0aGlzLndvcmtmbG93LmJsb2Nrcy5maWx0ZXIoKGJsb2NrKSA9PiBibG9jay50eXBlID09PSBXb3JrZmxvd0Jsb2NrVHlwZS5EYXRhQ29sbGVjdGlvbik7XG4gICAgICAgIGNvbnN0IGRhdGFDb2xsZWN0aW9ucyA9IGFsbERhdGFDb2xsZWN0aW9ucy5maWx0ZXIoKGNvbGxlY3Rpb24pID0+IGNvbGxlY3Rpb24uaW5nZXN0QmxvY2tzLnNvbWUoKGluZ2VzdEJsb2NrKSA9PiBpbmdlc3RCbG9jay50eXBlID09PSBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZS5PYmplY3RTdG9yYWdlVXBsb2FkICYmIGluZ2VzdEJsb2NrLmlkID09PSBkYXRhU3RvcmVJZCkpO1xuICAgICAgICBmb3IgKGNvbnN0IGRhdGFDb2xsZWN0aW9uIG9mIGRhdGFDb2xsZWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBkYXRhQ29sbGVjdGlvbi5pbmdlc3RCbG9ja3MuZmluZCgoYmxvY2spID0+IGJsb2NrLnR5cGUgPT09IERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLk9iamVjdFN0b3JhZ2VVcGxvYWQgJiYgYmxvY2suaWQgPT09IGRhdGFTdG9yZUlkKTtcbiAgICAgICAgICAgIGlmICghc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGpvYklkID0gdjQoKTtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NJbmdlc3Qoam9iSWQsIHBhdGhOYW1lLCBzdGFydCwgZGF0YUNvbGxlY3Rpb24uaW5nZXN0QmxvY2tzLCB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRQYXJzZXJDb25uZWN0b3I6IHRoaXMuZG9jdW1lbnRQYXJzZXJDb25uZWN0b3IsXG4gICAgICAgICAgICAgICAgbmxwTGlicmFyeUNvbm5lY3RvcjogdGhpcy5ubHBMaWJyYXJ5Q29ubmVjdG9yLFxuICAgICAgICAgICAgICAgIGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnM6IHRoaXMuZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9ycyxcbiAgICAgICAgICAgICAgICBtb2RlbHM6IHRoaXMud29ya2Zsb3cubW9kZWxzLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRNZWRpYXRvcjogdGhpcy5jb250ZW50TWVkaWF0b3IsXG4gICAgICAgICAgICAgICAgc2VhcmNoQXBpS2V5OiB0aGlzLnNlYXJjaEFwaUtleSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIHJlbW92ZUNvbnRlbnQoZGF0YVN0b3JlSWQsIG5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLndvcmtmbG93KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dvcmtmbG93IG5vdCBpbml0aWFsaXplZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGFDb2xsZWN0aW9ucyA9IHRoaXMud29ya2Zsb3cuYmxvY2tzLmZpbHRlcigoYmxvY2spID0+IGJsb2NrLnR5cGUgPT09IFdvcmtmbG93QmxvY2tUeXBlLkRhdGFDb2xsZWN0aW9uKTtcbiAgICAgICAgY29uc3QgZGF0YUNvbGxlY3Rpb24gPSBkYXRhQ29sbGVjdGlvbnMuZmluZCgoYmxvY2spID0+IGJsb2NrLmluZ2VzdEJsb2Nrcy5zb21lKChpbmdlc3RCbG9jaykgPT4gaW5nZXN0QmxvY2suaWQgPT09IGRhdGFTdG9yZUlkKSk7XG4gICAgICAgIGZvciAoY29uc3QgYmxvY2sgb2YgZGF0YUNvbGxlY3Rpb24/LmluZ2VzdEJsb2NrcyA/PyBbXSkge1xuICAgICAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLlZlY3RvckRhdGFiYXNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YWJhc2UgPSB0aGlzLmNvbnRlbnRNZWRpYXRvci5nZXRWZWN0b3JEYXRhYmFzZShibG9jay5pZCk7XG4gICAgICAgICAgICAgICAgZGF0YWJhc2UucmVtb3ZlKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIGdldENvcmVzRnJvbUNhcGFjaXR5UmVwb3J0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FwYWNpdHlSZXBvcnRlci5nZXRDYXBhY2l0eVJlcG9ydCgpLmdwdS5jb3JlcyAqICgxIC0gdGhpcy5jYXBhY2l0eVJlcG9ydGVyLmdldENhcGFjaXR5UmVwb3J0KCkuZ3B1LmxvYWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCAnSm9iV29ya2VyOiBFcnJvciBnZXR0aW5nIGNvcmVzIGZyb20gY2FwYWNpdHkgcmVwb3J0JywgZSk7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kU3RhdHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlU3RhdHMpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVib3VuY2VTdGF0cyA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZGVib3VuY2VTdGF0cztcbiAgICAgICAgICAgIGlmICghdGhpcy5tb2RlbFN0b3JlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHN0b3JhZ2UgPSBhd2FpdCB0aGlzLm1vZGVsU3RvcmUuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhU3RvcmUgb2YgdGhpcy5kYXRhU3RvcmVzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgc3RvcmFnZSArPSBhd2FpdCBkYXRhU3RvcmUuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLkdlbmVyYXRpdmVBSVdvcmtlclN0YXRzLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc1NlbnQ6IHRoaXMubWVzc2FnZXNTZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNSZWNlaXZlZDogdGhpcy5tZXNzYWdlc1JlY2VpdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNTZW50OiB0aGlzLmJ5dGVzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVjZWl2ZWQ6IHRoaXMuYnl0ZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0czogdGhpcy5wcm9tcHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiB0aGlzLnRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIENPTlRFTlRfR0VORVJBVElWRV9BSV9XT1JLRVJfU1RBVFNfREVCT1VOQ0UpO1xuICAgIH1cbiAgICBsb2dTZXJ2aWNlRXZlbnQob3V0cHV0LCB0b2tlbnNQZXJTZWNvbmQsIHRva2VuQ291bnQpIHtcbiAgICAgICAgY29uc3QgdG9waWMgPSB0aGlzLmxhYmVsO1xuICAgICAgICBjb25zdCBub2RlSWQgPSB0aGlzLmdldE93bmVySWQoKTtcbiAgICAgICAgY29uc3QgdHlwZSA9ICdhbnN3ZXInO1xuICAgICAgICBsb2dnZXIubG9nU2VydmljZUV2ZW50KExvZ2dpbmdTZXJ2aWNlcy5HZW5lcmF0aXZlQUlDb250ZXh0LCB7XG4gICAgICAgICAgICB0b3BpYyxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBub2RlSWQsXG4gICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICB0b2tlbkNvdW50LFxuICAgICAgICAgICAgdG9rZW5zUGVyU2Vjb25kLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IENPTlRFTlRfR1JBUEhfREFUQUJBU0VfU1RBVFNfREVCT1VOQ0UgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ1NlcnZpY2VzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZURhdGFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlRGF0YVN0cmVhbSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIEdyYXBoRGF0YWJhc2UgZXh0ZW5kcyBCYXNlRGF0YVN0cmVhbSB7XG4gICAgbG9jYWxOb2RlO1xuICAgIGNsdXN0ZXJJZDtcbiAgICBkYjtcbiAgICBkZWJvdW5jZVN0YXRzO1xuICAgIHdyaXRlcyA9IDA7XG4gICAgcmVhZHMgPSAwO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsTm9kZSwgbGFiZWwsIGNsdXN0ZXJJZCwgY29ubmVjdG9yQ29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkdyYXBoRGF0YWJhc2VOYW1lTm90U3RyaW5nLCAnQ2Fubm90IGNyZWF0ZSBHcmFwaCBEYXRhYmFzZTogTmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobG9jYWxOb2RlLCBsYWJlbCk7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy5kYiA9IG5ldyBjb25uZWN0b3JDb25zdHJ1Y3RvcigpO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVN0YXRzKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuZGVib3VuY2VTdGF0cztcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VHcmFwaERhdGFiYXNlLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldENvbnRlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gQ29udGVudFR5cGUuR3JhcGhEYXRhYmFzZTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIGFkZE5vZGUobmFtZSwgY29udGVudCwgaW5kZXgsIG5vZGUpIHtcbiAgICAgICAgdGhpcy5kYi5hZGROb2RlKG5hbWUsIGNvbnRlbnQsIGluZGV4LCBub2RlKTtcbiAgICAgICAgdGhpcy53cml0ZXMgKz0gMTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgYWRkRWRnZShmcm9tLCB0bykge1xuICAgICAgICB0aGlzLmRiLmFkZEVkZ2UoZnJvbSwgdG8pO1xuICAgICAgICB0aGlzLndyaXRlcyArPSAxO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBnZXRDb250ZW50KG5vZGVzLCBtYXhEZXB0aCwgY29udGVudFNpemUpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuZGIuZ2V0Q29udGVudChub2RlcywgbWF4RGVwdGgsIGNvbnRlbnRTaXplKTtcbiAgICAgICAgdGhpcy5yZWFkcyArPSAxO1xuICAgICAgICBsb2dnZXIubG9nU2VydmljZUV2ZW50KExvZ2dpbmdTZXJ2aWNlcy5HcmFwaERhdGFiYXNlLCB7XG4gICAgICAgICAgICB0eXBlOiAnZ2V0LWNvbnRlbnQnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIHNlbmRTdGF0cygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVib3VuY2VTdGF0cykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VTdGF0cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJvdW5jZVN0YXRzID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuZGIuZ2V0U2l6ZSgpO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLkdyYXBoRGF0YWJhc2VTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlOiBzaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZW50OiB0aGlzLm1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IHRoaXMubWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzU2VudDogdGhpcy5ieXRlc1NlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkOiB0aGlzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXM6IHRoaXMud3JpdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHM6IHRoaXMucmVhZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dTdG9yYWdlKExvZ2dpbmdTZXJ2aWNlcy5HcmFwaERhdGFiYXNlLCBgY2NjJHt0aGlzLmNsdXN0ZXJJZH1jY2Mke3RoaXMubGFiZWx9YCwgc2l6ZSk7XG4gICAgICAgIH0sIENPTlRFTlRfR1JBUEhfREFUQUJBU0VfU1RBVFNfREVCT1VOQ0UpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENvbnRlbnRUeXBlLCBKb2JTdGF0dXMsIE5vZGVUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTREtDbGllbnRFcnJvciwgU0RLQ2xpZW50RXJyb3JDb2RlcyB9IGZyb20gJ3B1YmxpYy9lcnJvcnMvU0RLQ2xpZW50RXJyb3InO1xuaW1wb3J0IHsgQ09OVEVOVF9KT0JfU0VSVklDRV9GQUlMRURfUkVUUllfREVMQVksIENPTlRFTlRfSk9CX1NFUlZJQ0VfTUFYX0FOU1dFUl9USU1FT1VULCBDT05URU5UX0pPQl9TRVJWSUNFX01BWF9SRVRSSUVTIH0gZnJvbSAnY29uc3RhbnRzL0NvbnRlbnQnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgQ29udGVudE1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0NvbnRlbnQnO1xuaW1wb3J0IHsgSW50ZXJuYWxKb2JQaGFzZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9EYXRhQ29udGVudCc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VEYXRhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZURhdGFTdHJlYW0nO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBKb2JEaXNwYXRjaGVyIGV4dGVuZHMgQmFzZURhdGFTdHJlYW0ge1xuICAgIGdyYXBoU2VydmljZTtcbiAgICBqb2JzID0gbmV3IE1hcCgpO1xuICAgIGpvYk9ic2VydmVycyA9IG5ldyBNYXAoKTtcbiAgICBqb2JCaWRzID0gbmV3IE1hcCgpO1xuICAgIHVuc3Vic2NyaWJlSGFuZGxlcjtcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgbGFiZWwsIGdyYXBoU2VydmljZSkge1xuICAgICAgICBzdXBlcihvd25lciwgbGFiZWwpO1xuICAgICAgICB0aGlzLmdyYXBoU2VydmljZSA9IGdyYXBoU2VydmljZTtcbiAgICB9XG4gICAgZ2V0Q29udGVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBDb250ZW50VHlwZS5Kb2I7XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gdGhpcy5vbk1lc3NhZ2UoKG5vZGVJZCwgY29udGVudCkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuSm9icywgJ0pvYkRpc3BhdGNoZXI6IFJlY2VpdmVkIGpvYicsIG5vZGVJZCwgY29udGVudCwgdGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZXMoKSk7XG4gICAgICAgICAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkpvYkRpc3BhdGNoZXJJbnZhbGlkUGF5bG9hZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc0JpZFJlc3BvbnNlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkQmlkUmVzcG9uc2Uobm9kZUlkLCBjb250ZW50LmlkLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGFydGlhbFJlc3VsdFJlc3BvbnNlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuSm9icywgYEpvYiAke2NvbnRlbnQuaWR9IHJlY2VpdmVkIHBhcnRpYWwgcmVzdWx0OmAsIGNvbnRlbnQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRlUGFydGlhbEpvYihjb250ZW50LmlkLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jlc3VsdFJlc3BvbnNlKGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuSm9icywgYEpvYiAke2NvbnRlbnQuaWR9IHJlY2VpdmVkIHJlc3VsdDpgLCBjb250ZW50LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmFsdWF0ZVByb2NjZXNzZWRKb2IoY29udGVudC5pZCwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNGYWlsZWRSZXNwb25zZShjb250ZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmFpbEpvYihjb250ZW50LmlkLCBjb250ZW50Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuam9icy5jbGVhcigpO1xuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZUhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWM/LnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZUpvYkRpc3BhdGNoZXIsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlSm9iKGpvYlRvRGlzcGF0Y2gpIHtcbiAgICAgICAgY29uc3QgeyBpZCwgcGFyYW1ldGVycywgam9iVHlwZSB9ID0gam9iVG9EaXNwYXRjaDtcbiAgICAgICAgY29uc3Qgam9iID0ge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBqb2JUeXBlLFxuICAgICAgICAgICAgcGFyYW1ldGVycyxcbiAgICAgICAgICAgIHN0YXR1czogSm9iU3RhdHVzLlBlbmRpbmcsXG4gICAgICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXBkYXRlZDogbmV3IERhdGUoKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuam9icy5oYXMoam9iLmlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuSm9iRGlzcGF0Y2hlckpvYkV4aXN0cywgYEpvYiB3aXRoIGlkICR7am9iLmlkfSBhbHJlYWR5IGV4aXN0cy5gKTtcbiAgICAgICAgfVxuICAgICAgICBqb2IuY3JlYXRlZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGpvYi51cGRhdGVkID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuam9icy5zZXQoam9iLmlkLCBqb2IpO1xuICAgICAgICB0aGlzLmpvYk9ic2VydmVycy5zZXQoam9iLmlkLCBzdWJqZWN0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGpvYi5pZCxcbiAgICAgICAgICAgICAgICBqb2JQaGFzZTogSW50ZXJuYWxKb2JQaGFzZS5SZXF1ZXN0LFxuICAgICAgICAgICAgICAgIGpvYlR5cGU6IGpvYi5qb2JUeXBlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG1heFJldHJpZXMgPSBDT05URU5UX0pPQl9TRVJWSUNFX01BWF9SRVRSSUVTO1xuICAgICAgICAgICAgbGV0IGF0dGVtcHRzID0gMDtcbiAgICAgICAgICAgIGNvbnN0IGF0dGVtcHRUb1NlbmRKb2IgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXR0ZW1wdHMgKz0gMTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCBgSm9iICR7am9iLmlkfSBzZW5kaW5nIGF0dGVtcHQgJHthdHRlbXB0c30uYCwgdGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgam9iLnVwZGF0ZWQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmpvYnMuc2V0KGpvYi5pZCwgam9iKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEJpZFJlc3BvbnNlSGFuZGxpbmcoam9iLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRlbXB0cyA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGBBdHRlbXB0ICR7YXR0ZW1wdHN9IHRvIHNlbmQgZGlzcGF0Y2hlckpvYiAke2pvYi5pZH0gZmFpbGVkLiBSZXRyeWluZy4uLmAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5vd25lci50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UmV0cmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXR0ZW1wdFRvU2VuZEpvYiwgQ09OVEVOVF9KT0JfU0VSVklDRV9GQUlMRURfUkVUUllfREVMQVkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgam9iLnN0YXR1cyA9IEpvYlN0YXR1cy5GYWlsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBqb2IudXBkYXRlZCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmpvYnMuc2V0KGpvYi5pZCwgam9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgRmFpbGVkIHRvIHNlbmQgam9iICR7am9iLmlkfSBhZnRlciAke21heFJldHJpZXN9IGF0dGVtcHRzOmAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5vd25lci50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam9iLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UmV0cmllcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXR0ZW1wdFRvU2VuZEpvYigpO1xuICAgICAgICAgICAgY29uc3QgeyBpZDogam9iSWQgfSA9IGpvYjtcbiAgICAgICAgICAgIHRoaXMubG9nRXZlbnQoYEpvYiAke2pvYi5pZH0gY3JlYXRlZCBhbmQgZGlzcGF0Y2hlZC5gLCB7IGpvYklkIH0pO1xuICAgICAgICAgICAgam9iLnVwZGF0ZWQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgam9iLnN0YXR1cyA9IEpvYlN0YXR1cy5GYWlsZWQ7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoYEZhaWxlZCB0byBzZW5kIGpvYiAke2pvYi5pZH06YCwge1xuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLm93bmVyLnR5cGUsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBqb2IsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBnZXRKb2Ioam9iSWQpIHtcbiAgICAgICAgY29uc3Qgam9iID0gdGhpcy5qb2JzLmdldChqb2JJZCk7XG4gICAgICAgIGlmICgham9iKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Kb2JEaXNwYXRjaGVySm9iTm90Rm91bmQsIGBKb2Igd2l0aCBpZCAke2pvYklkfSBub3QgZm91bmQuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBqb2IuaWQsXG4gICAgICAgICAgICBqb2JUeXBlOiBqb2Iuam9iVHlwZSxcbiAgICAgICAgICAgIHN0YXR1czogam9iLnN0YXR1cyxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGpvYi5wYXJhbWV0ZXJzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRKb2JzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmpvYnMudmFsdWVzKCkpLm1hcCgoam9iKSA9PiB0aGlzLmdldEpvYihqb2IuaWQpKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlSm9iKGpvYklkLCBwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGNvbnN0IGpvYiA9IHRoaXMuam9icy5nZXQoam9iSWQpO1xuICAgICAgICBpZiAoIWpvYikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuSm9iRGlzcGF0Y2hlckpvYk5vdEZvdW5kLCBgSm9iIHdpdGggaWQgJHtqb2JJZH0gbm90IGZvdW5kLmApO1xuICAgICAgICB9XG4gICAgICAgIGpvYi5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcbiAgICAgICAgam9iLnVwZGF0ZWQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLmpvYnMuc2V0KGpvYklkLCBqb2IpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVKb2Ioam9iSWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmpvYnMuZGVsZXRlKGpvYklkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuSm9iRGlzcGF0Y2hlckpvYk5vdEZvdW5kLCBgSm9iIHdpdGggaWQgJHtqb2JJZH0gbm90IGZvdW5kLmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN1YmplY3QgPSB0aGlzLmpvYk9ic2VydmVycy5nZXQoam9iSWQpO1xuICAgICAgICBpZiAoIXN1YmplY3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSm9iRGlzcGF0Y2hlck9ic2VydmVyTm90Rm91bmQpO1xuICAgICAgICB9XG4gICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5qb2JPYnNlcnZlcnMuZGVsZXRlKGpvYklkKTtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuSm9icywgYEpvYiAke2pvYklkfSBkZWxldGVkLmApO1xuICAgIH1cbiAgICBhZGRCaWRSZXNwb25zZShub2RlSWQsIGpvYklkLCByZXNwb25zZSkge1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLmpvYkJpZHMuZ2V0KGpvYklkKSA/PyBuZXcgTWFwKCk7XG4gICAgICAgIHJlc3BvbnNlcy5zZXQobm9kZUlkLCBbcmVzcG9uc2UsIERhdGUubm93KCldKTtcbiAgICAgICAgdGhpcy5qb2JCaWRzLnNldChqb2JJZCwgcmVzcG9uc2VzKTtcbiAgICAgICAgdGhpcy5ldmFsdWF0ZUJpZHNBbmRBdHRyaWJ1dGVKb2Ioam9iSWQpO1xuICAgIH1cbiAgICBzdGFydEJpZFJlc3BvbnNlSGFuZGxpbmcoam9iSWQpIHtcbiAgICAgICAgY29uc3Qgam9iID0gdGhpcy5qb2JzLmdldChqb2JJZCk7XG4gICAgICAgIGlmICgham9iKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkpvYkRpc3BhdGNoZXJKb2JOb3RGb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmV2YWx1YXRlQmlkc0FuZEF0dHJpYnV0ZUpvYihqb2JJZCwgdHJ1ZSksIENPTlRFTlRfSk9CX1NFUlZJQ0VfTUFYX0FOU1dFUl9USU1FT1VUKTtcbiAgICAgICAgam9iLnJlc3BvbnNlVGltZW91dCA9IHJlc3BvbnNlVGltZW91dDtcbiAgICAgICAgdGhpcy5qb2JzLnNldChqb2IuaWQsIGpvYik7XG4gICAgfVxuICAgIGV2YWx1YXRlQmlkc0FuZEF0dHJpYnV0ZUpvYihqb2JJZCwgdGltZW91dCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IG5vZGVzID0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZXMoKTtcbiAgICAgICAgY29uc3QgbWlzdGxldHMgPSBBcnJheS5mcm9tKG5vZGVzLnZhbHVlcygpKS5maWx0ZXIoKG5vZGUpID0+IG5vZGUudHlwZSA9PT0gTm9kZVR5cGUuQWdlbnQpO1xuICAgICAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLmpvYkJpZHMuZ2V0KGpvYklkKSA/PyBuZXcgTWFwKCk7XG4gICAgICAgIC8vIElmIHRoZSB0aW1lb3V0IGhhcyBub3Qgb2NjdXJyZWQgYW5kIHdlIGhhdmUgbm90IHJlY2VpdmVkIHJlc3BvbnNlcyBmcm9tIGFsbCBtaXN0bGV0cyxcbiAgICAgICAgLy8gdGhlbiB3ZSByZXR1cm4gYW5kIHdhaXQgZm9yIG1vcmUgcmVzcG9uc2VzLlxuICAgICAgICBpZiAoIXRpbWVvdXQgJiYgKCFyZXNwb25zZXMgfHwgcmVzcG9uc2VzLnNpemUgPCBtaXN0bGV0cy5sZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgam9iID0gdGhpcy5qb2JzLmdldChqb2JJZCk7XG4gICAgICAgIGlmICgham9iKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkpvYkRpc3BhdGNoZXJKb2JOb3RGb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUaW1lb3V0KGpvYi5yZXNwb25zZVRpbWVvdXQpO1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCBgSm9iICR7am9iLmlkfSByZWNlaXZlZCByZXNwb25zZXM6YCwgcmVzcG9uc2VzLCB0aGlzLmpvYkJpZHMpO1xuICAgICAgICBpZiAoIXJlc3BvbnNlcyB8fCByZXNwb25zZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSBubyB2YWxpZCByZXNwb25zZSBhbmQgaGl0IHRoZSB0aW1lb3V0IC0gRmFpbCB0aGUgam9iXG4gICAgICAgICAgICBqb2Iuc3RhdHVzID0gSm9iU3RhdHVzLkZhaWxlZDtcbiAgICAgICAgICAgIGpvYi51cGRhdGVkID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihgSm9iICR7am9iLmlkfSBmYWlsZWQgdG8gcmVjZWl2ZSBhIHZhbGlkIGJpZCByZXNwb25zZXMgaW4gdGltZS5gLCB7XG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMub3duZXIudHlwZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGpvYixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VzLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc3ViamVjdCA9IHRoaXMuam9iT2JzZXJ2ZXJzLmdldChqb2JJZCk7XG4gICAgICAgICAgICBpZiAoIXN1YmplY3QpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkpvYkRpc3BhdGNoZXJPYnNlcnZlck5vdEZvdW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnTm8gdmFsaWQgYmlkIHJlc3BvbnNlcyByZWNlaXZlZCBpbiB0aW1lLic7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGpvYi5pZCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGpvYi5zdGF0dXMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzdWJqZWN0Lm5leHQocmVzdWx0KTtcbiAgICAgICAgICAgIHN1YmplY3QuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHRoaXMuam9icy5zZXQoam9iLmlkLCBqb2IpO1xuICAgICAgICAgICAgdGhpcy5qb2JCaWRzLmRlbGV0ZShqb2JJZCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBub2RlSWQsIHJlc3BvbnNlIH0gPSB0aGlzLmV2YWx1YXRlQmlkcyhqb2IuaWQsIHJlc3BvbnNlcyk7XG4gICAgICAgIGpvYi5zdGF0dXMgPSBKb2JTdGF0dXMuUHJvY2Vzc2luZztcbiAgICAgICAgam9iLnVwZGF0ZWQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCBgSm9iICR7am9iLmlkfSBhdHRyaWJ1dGVkIHRvICR7bm9kZUlkfSB3aXRoIHJlc3BvbnNlOmAsIHJlc3BvbnNlKTtcbiAgICAgICAgY29uc3Qgam9iQXR0cmlidXRpb24gPSB7XG4gICAgICAgICAgICBpZDogam9iLmlkLFxuICAgICAgICAgICAgam9iVHlwZTogam9iLmpvYlR5cGUsXG4gICAgICAgICAgICBqb2JQaGFzZTogSW50ZXJuYWxKb2JQaGFzZS5BdHRyaWJ1dGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGpvYi5wYXJhbWV0ZXJzLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbmQoam9iQXR0cmlidXRpb24sIFtub2RlSWRdKTtcbiAgICAgICAgdGhpcy5qb2JzLnNldChqb2IuaWQsIGpvYik7XG4gICAgICAgIHRoaXMuam9iQmlkcy5kZWxldGUoam9iSWQpO1xuICAgIH1cbiAgICBldmFsdWF0ZUJpZHMoam9iSWQsIHJlc3BvbnNlcykge1xuICAgICAgICBsZXQgc29ydGVkUmVzcG9uc2VzO1xuICAgICAgICBjb25zdCB2YWxpZEJpZHMgPSBBcnJheS5mcm9tKHJlc3BvbnNlcy5lbnRyaWVzKCkpLmZpbHRlcigoWywgW2JpZF1dKSA9PiBiaWQuYXZhaWxhYmxlKTtcbiAgICAgICAgaWYgKHZhbGlkQmlkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzb3J0ZWRSZXNwb25zZXMgPSBBcnJheS5mcm9tKHJlc3BvbnNlcy5lbnRyaWVzKCkpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYlsxXVswXS5iaWQgLSBhWzFdWzBdLmJpZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc29ydGVkUmVzcG9uc2VzID0gQXJyYXkuZnJvbShyZXNwb25zZXMuZW50cmllcygpKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbMV1bMF0ucXVldWVMZW5ndGggLSBiWzFdWzBdLnF1ZXVlTGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnRlZFJlc3BvbnNlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbm9kZUlkOiBzb3J0ZWRSZXNwb25zZXNbMF1bMF0sXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHNvcnRlZFJlc3BvbnNlc1swXVsxXVswXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaW5kTWF4QmlkRnJvbVNvcnRlZCA9IChzb3J0ZWRSZXNwb25zZXMpID0+IHtcbiAgICAgICAgICAgIC8vIFJldHVybiBhbGwgbm9kZXMgd2l0aCB0aGUgc2FtZSBtYXggYmlkXG4gICAgICAgICAgICBjb25zdCBtYXhCaWQgPSBzb3J0ZWRSZXNwb25zZXNbMF1bMV1bMF0uYmlkO1xuICAgICAgICAgICAgY29uc3QgYmVzdFJlc3BvbnNlcyA9IHNvcnRlZFJlc3BvbnNlcy5maWx0ZXIoKFssIFtiaWRdXSkgPT4gYmlkLmJpZCA9PT0gbWF4QmlkKTtcbiAgICAgICAgICAgIHJldHVybiBiZXN0UmVzcG9uc2VzO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaW5kTWluUXVldWVMZW5ndGhGcm9tU29ydGVkID0gKHNvcnRlZFJlc3BvbnNlcykgPT4ge1xuICAgICAgICAgICAgLy8gUmV0dXJuIGFsbCBub2RlcyB3aXRoIHRoZSBzYW1lIG1pbiBxdWV1ZSBsZW5ndGhcbiAgICAgICAgICAgIGNvbnN0IG1pblF1ZXVlTGVuZ3RoID0gc29ydGVkUmVzcG9uc2VzWzBdWzFdWzBdLnF1ZXVlTGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYmVzdFJlc3BvbnNlcyA9IHNvcnRlZFJlc3BvbnNlcy5maWx0ZXIoKFssIFtiaWRdXSkgPT4gYmlkLnF1ZXVlTGVuZ3RoID09PSBtaW5RdWV1ZUxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gYmVzdFJlc3BvbnNlcztcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGJlc3RSZXNwb25zZXM7XG4gICAgICAgIGlmICh2YWxpZEJpZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYmVzdFJlc3BvbnNlcyA9IGZpbmRNYXhCaWRGcm9tU29ydGVkKHNvcnRlZFJlc3BvbnNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiZXN0UmVzcG9uc2VzID0gZmluZE1pblF1ZXVlTGVuZ3RoRnJvbVNvcnRlZChzb3J0ZWRSZXNwb25zZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiZXN0UmVzcG9uc2VzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6IGJlc3RSZXNwb25zZXNbMF1bMF0sXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IGJlc3RSZXNwb25zZXNbMF1bMV1bMF1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2FsY3VsYXRlIFJUVCBmb3IgdGhlIGJlc3QgcmVzcG9uc2VzXG4gICAgICAgIGNvbnN0IGpvYiA9IHRoaXMuam9icy5nZXQoam9iSWQpO1xuICAgICAgICBpZiAoIWpvYikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Kb2JEaXNwYXRjaGVySm9iTm90Rm91bmQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gam9iLmNyZWF0ZWQuZ2V0VGltZSgpO1xuICAgICAgICBjb25zdCBydHQgPSBiZXN0UmVzcG9uc2VzLm1hcCgoW25vZGVJZCwgWywgdGltZXN0YW1wXV0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHRpbWVzdGFtcDtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbm9kZUlkLFxuICAgICAgICAgICAgICAgIHJ0dDogZW5kIC0gc3RhcnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBGaW5kIHRoZSBub2RlIGlkIG9mIHRoZSBtaW4gcnR0XG4gICAgICAgIGNvbnN0IG1pblJ0dCA9IE1hdGgubWluKC4uLnJ0dC5tYXAoKHsgcnR0IH0pID0+IHJ0dCkpO1xuICAgICAgICBjb25zdCBiZXN0Tm9kZSA9IHJ0dC5maW5kKCh7IHJ0dCB9KSA9PiBydHQgPT09IG1pblJ0dCk7XG4gICAgICAgIGNvbnN0IFssIFtyZXNwb25zZSxdXSA9IGJlc3RSZXNwb25zZXMuZmluZCgoW25vZGVJZF0pID0+IG5vZGVJZCA9PT0gYmVzdE5vZGUubm9kZUlkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vZGVJZDogYmVzdE5vZGUubm9kZUlkLFxuICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGV2YWx1YXRlUGFydGlhbEpvYihqb2JJZCwgcmVzdWx0UGF5bG9hZCkge1xuICAgICAgICBjb25zdCBqb2IgPSB0aGlzLmpvYnMuZ2V0KGpvYklkKTtcbiAgICAgICAgaWYgKCFqb2IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSm9iRGlzcGF0Y2hlckpvYk5vdEZvdW5kKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdWJqZWN0ID0gdGhpcy5qb2JPYnNlcnZlcnMuZ2V0KGpvYklkKTtcbiAgICAgICAgaWYgKCFzdWJqZWN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkpvYkRpc3BhdGNoZXJPYnNlcnZlck5vdEZvdW5kKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBpZDogam9iLmlkLFxuICAgICAgICAgICAgc3RhdHVzOiBKb2JTdGF0dXMuUGFydGlhbCxcbiAgICAgICAgICAgIHJlc3VsdDogcmVzdWx0UGF5bG9hZC5yZXN1bHQsXG4gICAgICAgIH07XG4gICAgICAgIHN1YmplY3QubmV4dChyZXN1bHQpO1xuICAgIH1cbiAgICBldmFsdWF0ZVByb2NjZXNzZWRKb2Ioam9iSWQsIHJlc3VsdFBheWxvYWQpIHtcbiAgICAgICAgY29uc3Qgam9iID0gdGhpcy5qb2JzLmdldChqb2JJZCk7XG4gICAgICAgIGlmICgham9iKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkpvYkRpc3BhdGNoZXJKb2JOb3RGb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IHRoaXMuam9iT2JzZXJ2ZXJzLmdldChqb2JJZCk7XG4gICAgICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Kb2JEaXNwYXRjaGVyT2JzZXJ2ZXJOb3RGb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgam9iLnN0YXR1cyA9IEpvYlN0YXR1cy5Db21wbGV0ZWQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGlkOiBqb2IuaWQsXG4gICAgICAgICAgICBzdGF0dXM6IGpvYi5zdGF0dXMsXG4gICAgICAgICAgICByZXN1bHQ6IHJlc3VsdFBheWxvYWQucmVzdWx0LFxuICAgICAgICB9O1xuICAgICAgICBzdWJqZWN0Lm5leHQocmVzdWx0KTtcbiAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmpvYk9ic2VydmVycy5kZWxldGUoam9iSWQpO1xuICAgICAgICB0aGlzLmxvZ0V2ZW50KGBKb2IgJHtqb2JJZH0gZmluYWxpemVkLmAsIHsgam9iSWQgfSk7XG4gICAgfVxuICAgIGZhaWxKb2Ioam9iSWQsIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3Qgam9iID0gdGhpcy5qb2JzLmdldChqb2JJZCk7XG4gICAgICAgIGlmICgham9iKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkpvYkRpc3BhdGNoZXJKb2JOb3RGb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3ViamVjdCA9IHRoaXMuam9iT2JzZXJ2ZXJzLmdldChqb2JJZCk7XG4gICAgICAgIGlmICghc3ViamVjdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Kb2JEaXNwYXRjaGVyT2JzZXJ2ZXJOb3RGb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgam9iLnN0YXR1cyA9IEpvYlN0YXR1cy5GYWlsZWQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGlkOiBqb2IuaWQsXG4gICAgICAgICAgICBzdGF0dXM6IGpvYi5zdGF0dXMsXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICB9O1xuICAgICAgICBzdWJqZWN0Lm5leHQocmVzdWx0KTtcbiAgICAgICAgc3ViamVjdC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmpvYk9ic2VydmVycy5kZWxldGUoam9iSWQpO1xuICAgICAgICB0aGlzLmxvZ0V2ZW50KGBKb2IgJHtqb2JJZH0gZmFpbGVkLmAsIHsgam9iSWQgfSk7XG4gICAgfVxuICAgIGxvZ0V2ZW50KG1lc3NhZ2UsIHsgam9iSWQgfSkge1xuICAgICAgICBjb25zdCBtaXN0bGV0SWRzID0gQXJyYXkuZnJvbSh0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlcygpLnZhbHVlcygpKVxuICAgICAgICAgICAgLmZpbHRlcigobm9kZSkgPT4gbm9kZS50eXBlID09PSBOb2RlVHlwZS5BZ2VudClcbiAgICAgICAgICAgIC5tYXAoKG5vZGUpID0+IG5vZGUuZ2V0SWQoKSk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7IGpvYklkLCBtaXN0bGV0SWRzIH07XG4gICAgICAgIGxvZ2dlci5sb2dFdmVudChtZXNzYWdlLCB7XG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMuZ2V0T3duZXJJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMub3duZXIudHlwZSxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH0pO1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCBtZXNzYWdlLCBkYXRhKTtcbiAgICB9XG4gICAgaXNCaWRSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICBjb25zdCB7IGpvYlBoYXNlLCBhdmFpbGFibGUsIGJpZCB9ID0gcmVzcG9uc2U7XG4gICAgICAgIHJldHVybiBqb2JQaGFzZSA9PT0gSW50ZXJuYWxKb2JQaGFzZS5CaWQgJiYgYXZhaWxhYmxlICE9PSB1bmRlZmluZWQgJiYgYmlkICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlzUGFydGlhbFJlc3VsdFJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnN0IHsgam9iUGhhc2UsIHJlc3VsdCB9ID0gcmVzcG9uc2U7XG4gICAgICAgIHJldHVybiBqb2JQaGFzZSA9PT0gSW50ZXJuYWxKb2JQaGFzZS5QYXJ0aWFsUmVzdWx0ICYmIHJlc3VsdCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpc1Jlc3VsdFJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnN0IHsgam9iUGhhc2UsIHJlc3VsdCB9ID0gcmVzcG9uc2U7XG4gICAgICAgIHJldHVybiBqb2JQaGFzZSA9PT0gSW50ZXJuYWxKb2JQaGFzZS5SZXN1bHQgJiYgcmVzdWx0ICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlzRmFpbGVkUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3QgeyBqb2JQaGFzZSwgbWVzc2FnZSB9ID0gcmVzcG9uc2U7XG4gICAgICAgIHJldHVybiBqb2JQaGFzZSA9PT0gSW50ZXJuYWxKb2JQaGFzZS5GYWlsZWQgJiYgbWVzc2FnZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50VHlwZSwgSm9iVHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBJbnRlcm5hbEpvYlBoYXNlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0RhdGFDb250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZURhdGFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlRGF0YVN0cmVhbSc7XG5pbXBvcnQgam9iUXVldWUgZnJvbSAnc2VydmljZXMvSm9iUXVldWUvSm9iUXVldWVTZXJ2aWNlJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgSm9iV29ya2VyIGV4dGVuZHMgQmFzZURhdGFTdHJlYW0ge1xuICAgIGNhcGFjaXR5UmVwb3J0ZXI7XG4gICAgam9iV29ya2VyQ29ubmVjdG9ycztcbiAgICB1bnN1YnNjcmliZUxpc3RlbmVyO1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBsYWJlbCwgY2FwYWNpdHlSZXBvcnRlciwgam9iV29ya2VyQ29ubmVjdG9ycykge1xuICAgICAgICBzdXBlcihvd25lciwgbGFiZWwpO1xuICAgICAgICB0aGlzLmNhcGFjaXR5UmVwb3J0ZXIgPSBjYXBhY2l0eVJlcG9ydGVyO1xuICAgICAgICB0aGlzLmpvYldvcmtlckNvbm5lY3RvcnMgPSBqb2JXb3JrZXJDb25uZWN0b3JzO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLkpvYjtcbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb0pvYnMoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWM/LnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZUpvYldvcmtlcixcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUxpc3RlbmVyPy4oKTtcbiAgICAgICAgZGVsZXRlIHRoaXMudW5zdWJzY3JpYmVMaXN0ZW5lcjtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGpvYlF1ZXVlLmNsZWFyKHRoaXMubGFiZWwpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlTGlzdGVuZXI/LigpO1xuICAgICAgICBkZWxldGUgdGhpcy51bnN1YnNjcmliZUxpc3RlbmVyO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGlzQXZhaWxhYmxlKCkge1xuICAgICAgICByZXR1cm4gam9iUXVldWUuaXNBdmFpbGFibGUoKTtcbiAgICB9XG4gICAgZ2V0QmlkKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgY29tcGlsZVN0YXRzKGpvYlJlc3VsdCwgc3RhcnRUaW1lLCBlbmRUaW1lKSB7IH1cbiAgICBhY2N1bXVsYXRlUmVzdWx0KGZpbmFsUmVzdWx0LCBuZXdSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIGZpbmFsUmVzdWx0O1xuICAgIH1cbiAgICBpbnRlcm5hbFByb2Nlc3NKb2IocGFyYW1ldGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JXb3JrZXJDb25uZWN0b3JzWzBdLnByb2Nlc3NKb2IocGFyYW1ldGVycywge30pO1xuICAgIH1cbiAgICBpbnRlcm5hbFByb2Nlc3NKb2JTdHJlYW0ocGFyYW1ldGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5qb2JXb3JrZXJDb25uZWN0b3JzWzBdLnByb2Nlc3NKb2JTdHJlYW0ocGFyYW1ldGVycywge30pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb0pvYnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlTGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlTGlzdGVuZXIgPSB0aGlzLm9uTWVzc2FnZSgobm9kZUlkLCBjb250ZW50KSA9PiB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCAnSm9iV29ya2VyOiBSZWNlaXZlZCBqb2InLCBjb250ZW50KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzSm9iUmVxdWVzdChjb250ZW50KSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkpvYnMsICdKb2JXb3JrZXI6IFJlY2VpdmVkIGpvYiByZXF1ZXN0JywgY29udGVudCk7XG4gICAgICAgICAgICAgICAgLy8gRXZhbHVhdGUgcmVzb3VyY2VzIGFuZCByZXNwb25kIHdpdGggYSBiaWRcbiAgICAgICAgICAgICAgICBjb25zdCBhdmFpbGFibGUgPSB0aGlzLmlzQXZhaWxhYmxlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRCaWQoY29udGVudC5pZCwgY29udGVudC5qb2JUeXBlLCBub2RlSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kUmVqZWN0KGNvbnRlbnQuaWQsIGNvbnRlbnQuam9iVHlwZSwgbm9kZUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuaXNKb2JBdHRyaWJ1dGlvbihjb250ZW50KSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkpvYnMsICdKb2JXb3JrZXI6IFJlY2VpdmVkIGpvYiBhdHRyaWJ1dGlvbicsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGpvYlF1ZXVlLmFkZCh0aGlzLmxhYmVsLCAoKSA9PiB0aGlzLmhhbmRsZUpvYkF0dHJpYnV0aW9uKGNvbnRlbnQuaWQsIGNvbnRlbnQsIG5vZGVJZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZEJpZChqb2JJZCwgam9iVHlwZSwgc2VuZGVySWQpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIGlkOiBqb2JJZCxcbiAgICAgICAgICAgIGpvYlR5cGUsXG4gICAgICAgICAgICBqb2JQaGFzZTogSW50ZXJuYWxKb2JQaGFzZS5CaWQsXG4gICAgICAgICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICAgICAgICBxdWV1ZUxlbmd0aDogam9iUXVldWUubGVuZ3RoLFxuICAgICAgICAgICAgYmlkOiB0aGlzLmdldEJpZCgpLFxuICAgICAgICB9O1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCAnSm9iV29ya2VyOiBTZW5kaW5nIGpvYiBiaWQnLCBwYXlsb2FkKTtcbiAgICAgICAgdGhpcy5zZW5kKHBheWxvYWQsIFtzZW5kZXJJZF0pO1xuICAgIH1cbiAgICBzZW5kUmVqZWN0KGpvYklkLCBqb2JUeXBlLCBzZW5kZXJJZCkge1xuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgICAgaWQ6IGpvYklkLFxuICAgICAgICAgICAgam9iVHlwZSxcbiAgICAgICAgICAgIGpvYlBoYXNlOiBJbnRlcm5hbEpvYlBoYXNlLkJpZCxcbiAgICAgICAgICAgIGF2YWlsYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBxdWV1ZUxlbmd0aDogam9iUXVldWUubGVuZ3RoLFxuICAgICAgICAgICAgYmlkOiAwLFxuICAgICAgICB9O1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCAnSm9iV29ya2VyOiBTZW5kaW5nIGpvYiByZWplY3QnLCBwYXlsb2FkKTtcbiAgICAgICAgdGhpcy5zZW5kKHBheWxvYWQsIFtzZW5kZXJJZF0pO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgam9iIGF0dHJpYnV0aW9uIGFuZCBmb3J3YXJkIHRvIGpvYiBwcm9jZXNzb3JcbiAgICBhc3luYyBoYW5kbGVKb2JBdHRyaWJ1dGlvbihqb2JJZCwgam9iUGF5bG9hZCwgc2VuZGVySWQpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuSm9icywgJ0pvYldvcmtlcjogSGFuZGxpbmcgam9iIGF0dHJpYnV0aW9uJywgam9iUGF5bG9hZCk7XG4gICAgICAgIGNvbnN0IGpvYiA9IHtcbiAgICAgICAgICAgIGlkOiBqb2JJZCxcbiAgICAgICAgICAgIGpvYlR5cGU6IGpvYlBheWxvYWQuam9iVHlwZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGpvYlBheWxvYWQucGFyYW1ldGVycyxcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN3aXRjaCAoam9iUGF5bG9hZC5qb2JUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBKb2JUeXBlLkpvYjpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzSm9iKGpvYklkLCBqb2JQYXlsb2FkLCBqb2IsIHNlbmRlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBKb2JUeXBlLkpvYlN0cmVhbTpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzSm9iU3RyZWFtKGpvYklkLCBqb2JQYXlsb2FkLCBqb2IsIHNlbmRlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBqb2IgdHlwZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdKb2JXb3JrZXI6IEVycm9yIHByb2Nlc3Npbmcgam9iJywge1xuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLm93bmVyLnR5cGUsXG4gICAgICAgICAgICAgICAgZGF0YTogeyBqb2IgfSxcbiAgICAgICAgICAgIH0sIGVycm9yKTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdBbiBlcnJvciBvY2N1cnJlZCc7XG4gICAgICAgICAgICBjb25zdCBqb2JGYWlsZWQgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGpvYklkLFxuICAgICAgICAgICAgICAgIGpvYlR5cGU6IGpvYlBheWxvYWQuam9iVHlwZSxcbiAgICAgICAgICAgICAgICBqb2JQaGFzZTogSW50ZXJuYWxKb2JQaGFzZS5GYWlsZWQsXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmQoam9iRmFpbGVkLCBbc2VuZGVySWRdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzSm9iKGpvYklkLCBqb2JQYXlsb2FkLCBqb2IsIHNlbmRlcklkKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW50ZXJuYWxQcm9jZXNzSm9iKGpvYi5wYXJhbWV0ZXJzKTtcbiAgICAgICAgdGhpcy5jb21waWxlU3RhdHMocmVzdWx0LCBzdGFydFRpbWUsIERhdGUubm93KCkpO1xuICAgICAgICBjb25zdCBqb2JSZXN1bHQgPSB7XG4gICAgICAgICAgICBpZDogam9iSWQsXG4gICAgICAgICAgICBqb2JUeXBlOiBqb2JQYXlsb2FkLmpvYlR5cGUsXG4gICAgICAgICAgICBqb2JQaGFzZTogSW50ZXJuYWxKb2JQaGFzZS5SZXN1bHQsXG4gICAgICAgICAgICByZXN1bHQsXG4gICAgICAgIH07XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkpvYnMsICdKb2JXb3JrZXI6IFNlbmRpbmcgam9iIHJlc3VsdCcsIGpvYlJlc3VsdCk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZChqb2JSZXN1bHQsIFtzZW5kZXJJZF0pO1xuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzSm9iU3RyZWFtKGpvYklkLCBqb2JQYXlsb2FkLCBqb2IsIHNlbmRlcklkKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGxldCBmaW5hbFJlc3VsdCA9IHt9O1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHBhcnRpYWxSZXN1bHQgb2YgdGhpcy5pbnRlcm5hbFByb2Nlc3NKb2JTdHJlYW0oam9iLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJ0aWFsSm9iUmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgIGlkOiBqb2JJZCxcbiAgICAgICAgICAgICAgICBqb2JUeXBlOiBqb2JQYXlsb2FkLmpvYlR5cGUsXG4gICAgICAgICAgICAgICAgam9iUGhhc2U6IEludGVybmFsSm9iUGhhc2UuUGFydGlhbFJlc3VsdCxcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFydGlhbFJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Kb2JzLCAnSm9iV29ya2VyOiBTZW5kaW5nIGpvYiBwYXJ0aWFsIHJlc3VsdCcsIHBhcnRpYWxKb2JSZXN1bHQpO1xuICAgICAgICAgICAgdGhpcy5zZW5kKHBhcnRpYWxKb2JSZXN1bHQsIFtzZW5kZXJJZF0pO1xuICAgICAgICAgICAgZmluYWxSZXN1bHQgPSB0aGlzLmFjY3VtdWxhdGVSZXN1bHQoZmluYWxSZXN1bHQsIHBhcnRpYWxSZXN1bHQpO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBpbGVTdGF0cyhmaW5hbFJlc3VsdCwgc3RhcnRUaW1lLCBEYXRlLm5vdygpKTtcbiAgICAgICAgY29uc3Qgam9iUmVzdWx0ID0ge1xuICAgICAgICAgICAgaWQ6IGpvYklkLFxuICAgICAgICAgICAgam9iVHlwZTogam9iUGF5bG9hZC5qb2JUeXBlLFxuICAgICAgICAgICAgam9iUGhhc2U6IEludGVybmFsSm9iUGhhc2UuUmVzdWx0LFxuICAgICAgICAgICAgcmVzdWx0OiBmaW5hbFJlc3VsdCxcbiAgICAgICAgfTtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuSm9icywgJ0pvYldvcmtlcjogU2VuZGluZyBqb2IgcmVzdWx0Jywgam9iUmVzdWx0KTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kKGpvYlJlc3VsdCwgW3NlbmRlcklkXSk7XG4gICAgfVxuICAgIGlzSm9iUmVxdWVzdChwYXlsb2FkKSB7XG4gICAgICAgIHJldHVybiBwYXlsb2FkLmpvYlBoYXNlID09PSBJbnRlcm5hbEpvYlBoYXNlLlJlcXVlc3Q7XG4gICAgfVxuICAgIGlzSm9iQXR0cmlidXRpb24ocGF5bG9hZCkge1xuICAgICAgICByZXR1cm4gcGF5bG9hZC5qb2JQaGFzZSA9PT0gSW50ZXJuYWxKb2JQaGFzZS5BdHRyaWJ1dGlvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBEYXRhYmFzZUV2ZW50LCBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IFF1ZXJ5QnVpbGRlciB9IGZyb20gJ3B1YmxpYy9tb2RlbHMvQ29udGVudC9LZXlWYWx1ZURhdGFiYXNlUXVlcnlCdWlsZGVyJztcbmltcG9ydCB7IExheW91dEJ1aWxkZXIgfSBmcm9tICdwdWJsaWMvbW9kZWxzL0NvbnRlbnQvS2V5VmFsdWVEYXRhYmFzZUxheW91dEJ1aWxkZXInO1xuaW1wb3J0IHsgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfTEFZT1VUX1RBQkxFX05BTUUsIENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NUQVRTX0RFQk9VTkNFLCBDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9TWU5DX1RJTUVPVVQsIENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1RSQU5TQUNUSU9OX1RBQkxFX05BTUUgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbiwgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9EYXRhQ29udGVudCc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdTZXJ2aWNlcyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IEJhc2VEYXRhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZURhdGFTdHJlYW0nO1xuaW1wb3J0IHsgRGF0YWJhc2VUYWJsZSB9IGZyb20gJ21vZGVscy9Db250ZW50L0tleVZhbHVlRGF0YWJhc2VUYWJsZSc7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnc2VydmljZXMvRmlyZWJhc2UvRmlyZWJhc2VTZXJ2aWNlJztcbmltcG9ydCB7IGNyZWF0ZVNpbmdsZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBLZXlWYWx1ZURhdGFiYXNlIGV4dGVuZHMgQmFzZURhdGFTdHJlYW0ge1xuICAgIGxvY2FsTm9kZTtcbiAgICBjbHVzdGVySWQ7XG4gICAgdmVuZG9ySWQ7XG4gICAgZGI7XG4gICAgZGJLZXk7XG4gICAgdGFibGVzID0gbmV3IE1hcCgpO1xuICAgIHRhYmxlT2JzZXJ2ZXI7XG4gICAgdHJhbnNhY3Rpb25UYWJsZTtcbiAgICB0YWJsZVVuc3Vic2NyaWJlcjtcbiAgICBpc1N5bmM7XG4gICAgc3luY1Jlc29sdmU7XG4gICAgdHJhbnNhY3Rpb25zVG9TeW5jID0gW107XG4gICAgdGltZW91dENhbGxiYWNrID0gKCkgPT4geyB9O1xuICAgIHN5bmNUaW1lb3V0O1xuICAgIGV2ZW50TGlzdGVuZXIgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgIGxpc3RlbmVyVW5zdWJzY3JpYmVyO1xuICAgIHN5bmNUcmFuc2FjdGlvbnNXcml0dGVuID0gW107XG4gICAgbGF5b3V0O1xuICAgIGRlYm91bmNlU3RhdHM7XG4gICAgd3JpdGVzID0gMDtcbiAgICByZWFkcyA9IDA7XG4gICAgY29uc3RydWN0b3IobG9jYWxOb2RlLCBsYWJlbCwgY2x1c3RlcklkLCB2ZW5kb3JJZCwgbGF5b3V0LCBjb25uZWN0b3JDb25zdHJ1Y3Rvcikge1xuICAgICAgICBpZiAodHlwZW9mIGxhYmVsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZU5hbWVOb3RTdHJpbmcsICdDYW5ub3QgY3JlYXRlIEtleS1WYWx1ZSBEYXRhYmFzZTogTmFtZSBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobG9jYWxOb2RlLCBsYWJlbCk7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy52ZW5kb3JJZCA9IHZlbmRvcklkO1xuICAgICAgICB0aGlzLmRiS2V5ID0gYGNjYyR7dGhpcy52ZW5kb3JJZH1jY2Mke3RoaXMuY2x1c3RlcklkfWNjYyR7dGhpcy5sYWJlbH1gO1xuICAgICAgICB0aGlzLnRhYmxlT2JzZXJ2ZXIgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgICAgICB0aGlzLmlzU3luYyA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN5bmNSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChsYXlvdXQgaW5zdGFuY2VvZiBMYXlvdXRCdWlsZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dC5nZXRMYXlvdXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IFtpc1ZhbGlkLCByZWFzb25dID0gTGF5b3V0QnVpbGRlci52YWxpZGF0ZUxheW91dChsYXlvdXQpO1xuICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZUludmFsaWRMYXlvdXQsIGBJbnZhbGlkIGxheW91dDogJHtyZWFzb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFJlc2VydmVkVGFibGVzKHRoaXMubGF5b3V0KTtcbiAgICAgICAgdGhpcy5kYiA9IG5ldyBjb25uZWN0b3JDb25zdHJ1Y3Rvcih0aGlzLmRiS2V5LCB0aGlzLmxheW91dCk7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLktleVZhbHVlRGF0YWJhc2U7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy50YWJsZVVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZUtleVZhbHVlRGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VGFibGUodGFibGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZXMuZ2V0KHRhYmxlTmFtZSk7XG4gICAgICAgIGlmICh0YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRhYmxlO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZGIuaGFzVGFibGUodGFibGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VUYWJsZU5vdEZvdW5kLCAnVGFibGUgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBuZXdUYWJsZSA9IG5ldyBEYXRhYmFzZVRhYmxlKHRoaXMuZGIuZ2V0VGFibGVDb25uZWN0b3IodGFibGVOYW1lKSwgdGFibGVOYW1lLCB0aGlzLnRhYmxlT2JzZXJ2ZXIpO1xuICAgICAgICAgICAgdGhpcy50YWJsZXMuc2V0KHRhYmxlTmFtZSwgbmV3VGFibGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBnZXQ6IG5ld1RhYmxlLmdldC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBzZXQ6IG5ld1RhYmxlLnNldC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBhZGQ6IG5ld1RhYmxlLmFkZC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBkZWxldGU6IG5ld1RhYmxlLmRlbGV0ZS5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBjbGVhcjogbmV3VGFibGUuY2xlYXIuYmluZChuZXdUYWJsZSksXG4gICAgICAgICAgICAgICAgbGlzdDogbmV3VGFibGUubGlzdC5iaW5kKG5ld1RhYmxlKSxcbiAgICAgICAgICAgICAgICBjb3VudDogbmV3VGFibGUuY291bnQuYmluZChuZXdUYWJsZSksXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlOiBuZXdUYWJsZS5zdWJzY3JpYmUuYmluZChuZXdUYWJsZSksXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IG5ld1RhYmxlLnVuc3Vic2NyaWJlLmJpbmQobmV3VGFibGUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZU5vdE9wZW4sICdEYXRhYmFzZSBub3Qgb3BlbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVyID0gdGhpcy5ldmVudExpc3RlbmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVyPy4oKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgb3BlbigpIHtcbiAgICAgICAgY29uc3QgcmVzZXJ2ZWRUYWJsZXMgPSBbQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRSwgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfTEFZT1VUX1RBQkxFX05BTUVdO1xuICAgICAgICBjb25zdCB0cmFuc2FjdGlvblRhYmxlc1RvRGVsZXRlID0gW107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiLm9wZW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGxheW91dFRhYmxlID0gdGhpcy5kYi5nZXRUYWJsZUNvbm5lY3RvcihDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9MQVlPVVRfVEFCTEVfTkFNRSk7XG4gICAgICAgICAgICBjb25zdCBsYXlvdXRMaXN0ID0gYXdhaXQgbGF5b3V0VGFibGUubGlzdCgpO1xuICAgICAgICAgICAgY29uc3QgeyBpZCwgbGF5b3V0IH0gPSBsYXlvdXRMaXN0WzBdID8/IHt9O1xuICAgICAgICAgICAgaWYgKCFsYXlvdXQpIHtcbiAgICAgICAgICAgICAgICBsYXlvdXRUYWJsZS5hZGQoeyBsYXlvdXQ6IHRoaXMubGF5b3V0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0YWJsZSBpbiBsYXlvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc2VydmVkVGFibGVzLmluY2x1ZGVzKHRhYmxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRiLmhhc1RhYmxlKHRhYmxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25UYWJsZXNUb0RlbGV0ZS5wdXNoKHRhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxheW91dFRhYmxlLnNldChpZCwgeyBsYXlvdXQ6IHRoaXMubGF5b3V0IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlTm90T3BlbiwgZS5tZXNzYWdlIHx8ICdFcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBvcGVuaW5nIGRhdGFiYXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnN0YW50aWF0ZVRyYW5zYWN0aW9uVGFibGUoKTtcbiAgICAgICAgdGhpcy5zZXRPbk1lc3NhZ2VIYW5kbGVyKCk7XG4gICAgICAgIHRoaXMuc2V0T25UYWJsZVdyaXRlSGFuZGxlcigpO1xuICAgICAgICB0cmFuc2FjdGlvblRhYmxlc1RvRGVsZXRlLmZvckVhY2goKHRhYmxlTmFtZSkgPT4gdGhpcy5kZWxldGVUcmFuc2FjdGlvbnNGb3JUYWJsZSh0YWJsZU5hbWUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3luY3MgdGhlIGRhdGFiYXNlIHdpdGggdGhlIGNsb3Nlc3QgYW5jZXN0b3IuXG4gICAgICogU3RlcDE6IFJlcXVlc3QgYSBkdW1wIG9mIGFsbCB0cmFuc2FjdGlvbnMgZnJvbSB0aGUgYW5jZXN0b3JcbiAgICAgKiBTdGVwMjogQ29tcGFyZSB0aGUgZHVtcCBvZiB0cmFuc2FjdGlvbnMgd2l0aCBsb2NhbCB0cmFuc2FjdGlvbnMgYW5kIHJlcXVlc3QgdmFsdWUgb2YgYWxsIG1pc3NpbmcgdHJhbnNhY3Rpb25zXG4gICAgICogU3RlcDM6IENvbXBhcmUgbG9jYWwgdHJhbnNhY3Rpb25zIHdpdGggZHVtcCBvZiB0cmFuc2FjdGlvbnMgYW5kIGJyb2FkY2FzdCBhbGwgbmV3IHRyYW5zYWN0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jIHN5bmMoYW5jZXN0b3JJZCwgdGltZW91dENhbGxiYWNrKSB7XG4gICAgICAgIGlmICghYW5jZXN0b3JJZCkge1xuICAgICAgICAgICAgLy8gU2V0IGluIGEgbWljcm90YXNrIHRvIGFsbG93IHRoZSBjbGllbnQgdG8gc3Vic2NyaWJlIHRvIHRoZSBldmVudFxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclN5bmNUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3luY0NvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lb3V0Q2FsbGJhY2sgPSB0aW1lb3V0Q2FsbGJhY2s7XG4gICAgICAgIHRoaXMuc3luY1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFjaywgQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfU1lOQ19USU1FT1VUKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFthbmNlc3RvcklkXSxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5SZXF1ZXN0U3luY0tleVZhbHVlRGF0YWJhc2UsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5pc1N5bmM7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRUcmFuc2FjdGlvbnNEdW1wKG5vZGVJZCkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNhY3Rpb25UYWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25UYWJsZU5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmlzU3luYztcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmxpc3QoKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFtub2RlSWRdLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlNlbmRUcmFuc2FjdGlvbnNEdW1wLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzVHJhbnNhY3Rpb25zRHVtcChub2RlSWQsIHRyYW5zYWN0aW9uc0R1bXApIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uVGFibGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhclN5bmNUaW1lb3V0KCk7XG4gICAgICAgIGNvbnN0IGxvY2FsVHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmxpc3QoKTtcbiAgICAgICAgZm9yIChjb25zdCBsb2NhbFRyYW5zYWN0aW9uIG9mIGxvY2FsVHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IHRyYW5zYWN0aW9uc0R1bXAuZmluZCgodCkgPT4gdC5pZCA9PT0gbG9jYWxUcmFuc2FjdGlvbi5pZCk7XG4gICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24gJiYgdGhpcy5jb21wYXJlVHJhbnNhY3Rpb25zKGxvY2FsVHJhbnNhY3Rpb24sIHRyYW5zYWN0aW9uKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbdGFibGVOYW1lLCBrZXldID0gbG9jYWxUcmFuc2FjdGlvbi5pZC5zcGxpdCgnOjonKTtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZXMuZ2V0KHRhYmxlTmFtZSk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRhYmxlPy5nZXQoa2V5KTtcbiAgICAgICAgICAgIGxvY2FsVHJhbnNhY3Rpb24udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2VuZChsb2NhbFRyYW5zYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYW5zYWN0aW9uIG9mIHRyYW5zYWN0aW9uc0R1bXApIHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVHJhbnNhY3Rpb24gPSBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uVGFibGUuZ2V0KHRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgICAgIGlmIChsb2NhbFRyYW5zYWN0aW9uICYmIHRoaXMuY29tcGFyZVRyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbiwgbG9jYWxUcmFuc2FjdGlvbikgPD0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYW5zYWN0aW9uLmFjdGlvbiA9PT0gSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uRGVsZXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW3RhYmxlTmFtZSwga2V5XSA9IHRyYW5zYWN0aW9uLmlkLnNwbGl0KCc6OicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy50YWJsZXMuZ2V0KHRhYmxlTmFtZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGFibGU/LmRlbGV0ZShrZXksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNhY3Rpb25zVG9TeW5jLnB1c2godHJhbnNhY3Rpb24uaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyYW5zYWN0aW9uc1RvU3luYy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTeW5jVGltZW91dCgpO1xuICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3luY0NvbXBsZXRlZCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3luY1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMudGltZW91dENhbGxiYWNrLCBDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9TWU5DX1RJTUVPVVQpO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkczogW25vZGVJZF0sXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuUmVxdWVzdFRyYW5zYWN0aW9uc1ZhbHVlLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSWRzOiB0aGlzLnRyYW5zYWN0aW9uc1RvU3luYyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZW5kVHJhbnNhY3Rpb25zVmFsdWUobm9kZUlkLCB0cmFuc2FjdGlvbklkcykge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNhY3Rpb25UYWJsZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25UYWJsZU5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYW5zYWN0aW9uSWQgb2YgdHJhbnNhY3Rpb25JZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmdldCh0cmFuc2FjdGlvbklkKTtcbiAgICAgICAgICAgIGlmICghdHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFt0YWJsZU5hbWUsIGtleV0gPSB0cmFuc2FjdGlvbklkLnNwbGl0KCc6OicpO1xuICAgICAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLnRhYmxlcy5nZXQodGFibGVOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGFibGU/LmdldChrZXkpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb24udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2VuZCh0cmFuc2FjdGlvbiwgW25vZGVJZF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHdyaXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uVGFibGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBTaG91bGQgd2UgcXVldWUgdGhlIHdyaXRlcz9cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxUcmFuc2FjdGlvbiA9IGF3YWl0IHRoaXMudHJhbnNhY3Rpb25UYWJsZS5nZXQodHJhbnNhY3Rpb24uaWQpO1xuICAgICAgICBpZiAobG9jYWxUcmFuc2FjdGlvbiAmJiB0aGlzLmNvbXBhcmVUcmFuc2FjdGlvbnModHJhbnNhY3Rpb24sIGxvY2FsVHJhbnNhY3Rpb24pIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cml0ZVRyYW5zYWN0aW9uID0ge1xuICAgICAgICAgICAgLi4udHJhbnNhY3Rpb24sXG4gICAgICAgIH07XG4gICAgICAgIGRlbGV0ZSB3cml0ZVRyYW5zYWN0aW9uLnZhbHVlO1xuICAgICAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uVGFibGUuc2V0KHRyYW5zYWN0aW9uLmlkLCB3cml0ZVRyYW5zYWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICAgIH1cbiAgICBjb21wYXJlVHJhbnNhY3Rpb25zKGEsIGIpIHtcbiAgICAgICAgaWYgKGEudGltZXN0YW1wIDwgYi50aW1lc3RhbXApIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS50aW1lc3RhbXAgPiBiLnRpbWVzdGFtcCkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGEucHJpb3JpdHkgLSBiLnByaW9yaXR5O1xuICAgIH1cbiAgICBhc3luYyBnZXRUcmFuc2FjdGlvbkZyb21UYWJsZVdyaXRlRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uVGFibGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBTaG91bGQgd2UgcXVldWUgdGhlIHdyaXRlcz9cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25LZXkgPSBgJHtldmVudC50YWJsZU5hbWV9Ojoke2V2ZW50LmtleX1gO1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBhd2FpdCBmaXJlYmFzZS5nZXRFc3RpbWF0ZWRUaW1lc3RhbXAoKTtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB7XG4gICAgICAgICAgICBpZDogdHJhbnNhY3Rpb25LZXksXG4gICAgICAgICAgICBwcmlvcml0eTogTWF0aC5yYW5kb20oKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGFjdGlvbjogZXZlbnQuYWN0aW9uLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBpc1dyaXR0ZW4gPSBhd2FpdCB0aGlzLndyaXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgICAgICBpZiAoIWlzV3JpdHRlbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlVHJhbnNhY3Rpb25zRm9yVGFibGUodGFibGVOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy50cmFuc2FjdGlvblRhYmxlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLktleVZhbHVlRGF0YWJhc2VUcmFuc2FjdGlvblRhYmxlTm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhYmxlUHJlZml4ID0gYCR7dGFibGVOYW1lfTo6YDtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBRdWVyeUJ1aWxkZXIuaW5kZXgoJ2lkJykud2hlcmUoJ2JldHdlZW4nLCBbYCR7dGFibGVOYW1lfTo6YCwgYCR7dGFibGVOYW1lfTo6XFx1ZmZmZmBdKTtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblRhYmxlLmxpc3QocXVlcnkuZ2V0UXVlcnkoKSk7XG4gICAgICAgIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uVGFibGUuZGVsZXRlKHRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRPbk1lc3NhZ2VIYW5kbGVyKCkge1xuICAgICAgICB0aGlzLm9uTWVzc2FnZShhc3luYyAoXywgdHJhbnNhY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbiBpbnN0YW5jZW9mIEZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpc1dyaXR0ZW4gPSBhd2FpdCB0aGlzLndyaXRlVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCFpc1dyaXR0ZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrU3luY0NvbXBsZXRlKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRyYW5zYWN0aW9uLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVHJhbnNhY3Rpb25WYWx1ZU5vdFNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbdGFibGVOYW1lLCBrZXldID0gdHJhbnNhY3Rpb24uaWQuc3BsaXQoJzo6Jyk7XG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IHRoaXMudGFibGVzLmdldCh0YWJsZU5hbWUpO1xuICAgICAgICAgICAgaWYgKCF0YWJsZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuS2V5VmFsdWVEYXRhYmFzZVRhYmxlRG9lc05vdEV4aXN0LCB7IHRhYmxlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETyAtIEhhbmRsZSBzZXQgZXJyb3JzXG4gICAgICAgICAgICBsZXQgc2l6ZSA9IDA7XG4gICAgICAgICAgICBzd2l0Y2ggKHRyYW5zYWN0aW9uLmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uQWRkOlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uVXBkYXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdyaXRlVmFsdWUgPSB0YWJsZS5zZXQoa2V5LCB0cmFuc2FjdGlvbi52YWx1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBzaXplID0gSlNPTi5zdHJpbmdpZnkodHJhbnNhY3Rpb24udmFsdWUpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zVG9TeW5jLmluY2x1ZGVzKHRyYW5zYWN0aW9uLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zeW5jVHJhbnNhY3Rpb25zV3JpdHRlbi5wdXNoKHdyaXRlVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uLkRlbGV0ZToge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3cml0ZVZhbHVlID0gdGFibGUuZGVsZXRlKGtleSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvbnNUb1N5bmMuaW5jbHVkZXModHJhbnNhY3Rpb24uaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN5bmNUcmFuc2FjdGlvbnNXcml0dGVuLnB1c2god3JpdGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuS2V5VmFsdWVEYXRhYmFzZSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzeW5jJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tTeW5jQ29tcGxldGUodHJhbnNhY3Rpb24pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0T25UYWJsZVdyaXRlSGFuZGxlcigpIHtcbiAgICAgICAgdGhpcy50YWJsZVVuc3Vic2NyaWJlciA9IHRoaXMudGFibGVPYnNlcnZlci5zdWJzY3JpYmUoYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsZXQgc2l6ZSA9IDA7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmFjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uQWRkOlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uVXBkYXRlOlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uRGVsZXRlOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgdGhpcy5nZXRUcmFuc2FjdGlvbkZyb21UYWJsZVdyaXRlRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udmFsdWUgPSBldmVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IEpTT04uc3RyaW5naWZ5KGV2ZW50LnZhbHVlKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVzICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIEludGVybmFsRGF0YWJhc2VUYWJsZVJlYWRBY3Rpb24uR2V0OlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbi5MaXN0OlxuICAgICAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbi5Db3VudDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkcyArPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLktleVZhbHVlRGF0YWJhc2UsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBldmVudC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgdGFibGVOYW1lOiBldmVudC50YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAga2V5OiBldmVudC5rZXksXG4gICAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGluc3RhbnRpYXRlVHJhbnNhY3Rpb25UYWJsZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25UYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25UYWJsZSA9IHRoaXMuZGIuZ2V0VGFibGVDb25uZWN0b3IoQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRSk7XG4gICAgfVxuICAgIGNsZWFyU3luY1RpbWVvdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN5bmNUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zeW5jVGltZW91dCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zeW5jVGltZW91dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaXNoU3luY0NvbXBsZXRlZCgpIHtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyLnB1Ymxpc2goe1xuICAgICAgICAgICAgZXZlbnQ6IERhdGFiYXNlRXZlbnQuU3luY0NvbXBsZXRlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zeW5jUmVzb2x2ZT8uKHRydWUpO1xuICAgICAgICBkZWxldGUgdGhpcy5zeW5jUmVzb2x2ZTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgYXN5bmMgcHVibGlzaFN5bmNDb21wbGV0ZWRBZnRlcldyaXRlcygpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5zeW5jVHJhbnNhY3Rpb25zV3JpdHRlbik7XG4gICAgICAgIHRoaXMucHVibGlzaFN5bmNDb21wbGV0ZWQoKTtcbiAgICB9XG4gICAgY2hlY2tTeW5jQ29tcGxldGUodHJhbnNhY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zYWN0aW9uc1RvU3luYy5pbmNsdWRlcyh0cmFuc2FjdGlvbi5pZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyU3luY1RpbWVvdXQoKTtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbnNUb1N5bmMgPSB0aGlzLnRyYW5zYWN0aW9uc1RvU3luYy5maWx0ZXIoKHQpID0+IHQgIT09IHRyYW5zYWN0aW9uLmlkKTtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNhY3Rpb25zVG9TeW5jLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wdWJsaXNoU3luY0NvbXBsZXRlZEFmdGVyV3JpdGVzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zeW5jVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy50aW1lb3V0Q2FsbGJhY2ssIENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NZTkNfVElNRU9VVCk7XG4gICAgfVxuICAgIHNlbmRTdGF0cygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVib3VuY2VTdGF0cykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VTdGF0cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJvdW5jZVN0YXRzID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICAgICAgbGV0IHNpemUgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0YWJsZSBvZiB0aGlzLnRhYmxlcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgICAgIHNpemUgKz0gYXdhaXQgdGFibGUuY2FsY3VsYXRlU2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLktleVZhbHVlRGF0YWJhc2VTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlOiBzaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZW50OiB0aGlzLm1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IHRoaXMubWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzU2VudDogdGhpcy5ieXRlc1NlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkOiB0aGlzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXM6IHRoaXMud3JpdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHM6IHRoaXMucmVhZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dTdG9yYWdlKExvZ2dpbmdTZXJ2aWNlcy5LZXlWYWx1ZURhdGFiYXNlLCBgY2NjJHt0aGlzLmNsdXN0ZXJJZH1jY2Mke3RoaXMubGFiZWx9YCwgc2l6ZSk7XG4gICAgICAgIH0sIENPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NUQVRTX0RFQk9VTkNFKTtcbiAgICB9XG4gICAgYWRkUmVzZXJ2ZWRUYWJsZXMobGF5b3V0KSB7XG4gICAgICAgIGlmIChsYXlvdXQudGFibGVzW0NPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1RSQU5TQUNUSU9OX1RBQkxFX05BTUVdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVGFibGVOYW1lUmVzZXJ2ZWQsIGBDYW5ub3QgY3JlYXRlIEtleS1WYWx1ZSBEYXRhYmFzZTogVGFibGUgJyR7Q09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRX0nIHJlc2VydmVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxheW91dC50YWJsZXNbQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfTEFZT1VUX1RBQkxFX05BTUVdKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlVGFibGVOYW1lUmVzZXJ2ZWQsIGBDYW5ub3QgY3JlYXRlIEtleS1WYWx1ZSBEYXRhYmFzZTogVGFibGUgJyR7Q09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfTEFZT1VUX1RBQkxFX05BTUV9JyByZXNlcnZlZGApO1xuICAgICAgICB9XG4gICAgICAgIGxheW91dC50YWJsZXNbQ09OVEVOVF9LRVlfVkFMVUVfREFUQUJBU0VfVFJBTlNBQ1RJT05fVEFCTEVfTkFNRV0gPSB7XG4gICAgICAgICAgICBpbmRleGVzOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgbGF5b3V0LnRhYmxlc1tDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9MQVlPVVRfVEFCTEVfTkFNRV0gPSB7XG4gICAgICAgICAgICBpbmRleGVzOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTREtDbGllbnRFcnJvciwgU0RLQ2xpZW50RXJyb3JDb2RlcyB9IGZyb20gJ3B1YmxpYy9lcnJvcnMvU0RLQ2xpZW50RXJyb3InO1xuaW1wb3J0IHsgUXVlcnlCdWlsZGVyIH0gZnJvbSAncHVibGljL21vZGVscy9Db250ZW50L0tleVZhbHVlRGF0YWJhc2VRdWVyeUJ1aWxkZXInO1xuaW1wb3J0IHsgSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbiwgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24gfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvRGF0YUNvbnRlbnQnO1xuaW1wb3J0IHsgY3JlYXRlU2luZ2xlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgRGF0YWJhc2VUYWJsZSB7XG4gICAgY29ubmVjdG9yO1xuICAgIHRhYmxlTmFtZTtcbiAgICB0YWJsZU9ic2VydmVyO1xuICAgIC8vIFRPRE8gLSBSZXZpZXcgaWYgd2UgaW5zdGVhZCB1c2UgYW4gb2JzZXJ2ZXIgYW5kIHJldHVybiBhbiB1bnN1YnNjcmliZSBvbiB0aGUgc3Vic2NyaWJlIG1ldGhvZFxuICAgIGV2ZW50TGlzdGVuZXIgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgIGxpc3RlbmVyVW5zdWJzY3JpYmVyO1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3RvciwgdGFibGVOYW1lLCB0YWJsZU9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9yID0gY29ubmVjdG9yO1xuICAgICAgICB0aGlzLnRhYmxlTmFtZSA9IHRhYmxlTmFtZTtcbiAgICAgICAgdGhpcy50YWJsZU9ic2VydmVyID0gdGFibGVPYnNlcnZlcjtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlcj8uKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldChrZXkpIHtcbiAgICAgICAgY29uc3QgcmVhZEV2ZW50ID0ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbi5HZXQsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGFibGVPYnNlcnZlci5wdWJsaXNoKHJlYWRFdmVudCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rvci5nZXQoa2V5KTtcbiAgICB9XG4gICAgYXN5bmMgc2V0KGtleSwgdmFsdWUsIHB1Ymxpc2hXcml0ZUV2ZW50ID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnZhbGlkYXRlVmFsdWUodmFsdWUpO1xuICAgICAgICBjb25zdCBpc1VwZGF0ZSA9IGF3YWl0IHRoaXMuY29ubmVjdG9yLmdldChrZXkpO1xuICAgICAgICBjb25zdCB3cml0ZVZhbHVlID0gYXdhaXQgdGhpcy5jb25uZWN0b3Iuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICBjb25zdCBhY3Rpb24gPSBpc1VwZGF0ZSA/IEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uLlVwZGF0ZSA6IEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uLkFkZDtcbiAgICAgICAgdGhpcy5wdWJsaXNoKGFjdGlvbiwgd3JpdGVWYWx1ZSk7XG4gICAgICAgIGlmICghcHVibGlzaFdyaXRlRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB3cml0ZVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyaXRlRXZlbnQgPSB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgICAgdmFsdWU6IHdyaXRlVmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGFibGVPYnNlcnZlci5wdWJsaXNoKHdyaXRlRXZlbnQpO1xuICAgICAgICByZXR1cm4gd3JpdGVWYWx1ZTtcbiAgICB9XG4gICAgYXN5bmMgYWRkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIGNvbnN0IHdyaXRlVmFsdWUgPSBhd2FpdCB0aGlzLmNvbm5lY3Rvci5hZGQodmFsdWUpO1xuICAgICAgICBjb25zdCB3cml0ZUV2ZW50ID0ge1xuICAgICAgICAgICAga2V5OiB3cml0ZVZhbHVlLmlkLFxuICAgICAgICAgICAgdGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uQWRkLFxuICAgICAgICAgICAgdmFsdWU6IHdyaXRlVmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGFibGVPYnNlcnZlci5wdWJsaXNoKHdyaXRlRXZlbnQpO1xuICAgICAgICB0aGlzLnB1Ymxpc2god3JpdGVFdmVudC5hY3Rpb24sIHdyaXRlVmFsdWUpO1xuICAgICAgICByZXR1cm4gd3JpdGVWYWx1ZTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlKGtleSwgcHVibGlzaFdyaXRlRXZlbnQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHdyaXRlVmFsdWUgPSBhd2FpdCB0aGlzLmNvbm5lY3Rvci5nZXQoa2V5KTtcbiAgICAgICAgaWYgKCF3cml0ZVZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0b3IuZGVsZXRlKGtleSk7XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uLkRlbGV0ZTtcbiAgICAgICAgdGhpcy5wdWJsaXNoKGFjdGlvbiwgd3JpdGVWYWx1ZSk7XG4gICAgICAgIGlmICghcHVibGlzaFdyaXRlRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cml0ZUV2ZW50ID0ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgdGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICAgICAgICAgIGFjdGlvbixcbiAgICAgICAgICAgIHZhbHVlOiB3cml0ZVZhbHVlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRhYmxlT2JzZXJ2ZXIucHVibGlzaCh3cml0ZUV2ZW50KTtcbiAgICB9XG4gICAgYXN5bmMgY2xlYXIoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IHRoaXMubGlzdCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uRGVsZXRlO1xuICAgICAgICAgICAgdGhpcy5wdWJsaXNoKGFjdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgY29uc3Qgd3JpdGVFdmVudCA9IHtcbiAgICAgICAgICAgICAgICBrZXk6IHZhbHVlLmlkLFxuICAgICAgICAgICAgICAgIHRhYmxlTmFtZTogdGhpcy50YWJsZU5hbWUsXG4gICAgICAgICAgICAgICAgYWN0aW9uLFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudGFibGVPYnNlcnZlci5wdWJsaXNoKHdyaXRlRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rvci5jbGVhcigpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0KHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHJlYWRFdmVudCA9IHtcbiAgICAgICAgICAgIGtleTogJycsXG4gICAgICAgICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICAgICAgYWN0aW9uOiBJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uLkxpc3QsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudGFibGVPYnNlcnZlci5wdWJsaXNoKHJlYWRFdmVudCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgICAgICAgICBpZiAocXVlcnkgaW5zdGFuY2VvZiBRdWVyeUJ1aWxkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeS5nZXRRdWVyeSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSBRdWVyeUJ1aWxkZXIuYnVpbGRRdWVyeShxdWVyeSkuZ2V0UXVlcnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VJbnZhbGlkUXVlcnksICdJbnZhbGlkIHF1ZXJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbm5lY3Rvci5saXN0KHF1ZXJ5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSAnSW52YWxpZCBxdWVyeSc7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGUubWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLktleVZhbHVlRGF0YWJhc2VJbnZhbGlkUXVlcnksIG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvdW50KHF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHJlYWRFdmVudCA9IHtcbiAgICAgICAgICAgIGtleTogJycsXG4gICAgICAgICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICAgICAgYWN0aW9uOiBJbnRlcm5hbERhdGFiYXNlVGFibGVSZWFkQWN0aW9uLkNvdW50LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRhYmxlT2JzZXJ2ZXIucHVibGlzaChyZWFkRXZlbnQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXJ5IGluc3RhbmNlb2YgUXVlcnlCdWlsZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuZ2V0UXVlcnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gUXVlcnlCdWlsZGVyLmJ1aWxkUXVlcnkocXVlcnkpLmdldFF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlSW52YWxpZFF1ZXJ5LCAnSW52YWxpZCBxdWVyeScpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb25uZWN0b3IuY291bnQocXVlcnkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICdJbnZhbGlkIHF1ZXJ5JztcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gZS5tZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuS2V5VmFsdWVEYXRhYmFzZUludmFsaWRRdWVyeSwgbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FsY3VsYXRlU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdG9yLmNhbGN1bGF0ZVNpemUoKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXIgPSB0aGlzLmV2ZW50TGlzdGVuZXIuc3Vic2NyaWJlKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXI/LigpO1xuICAgIH1cbiAgICBwdWJsaXNoKHRhYmxlQWN0aW9uLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBldmVudCA9IHRoaXMuYnVpbGRUYWJsZUV2ZW50KHRhYmxlQWN0aW9uLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lci5wdWJsaXNoKGV2ZW50KTtcbiAgICB9XG4gICAgYnVpbGRUYWJsZUV2ZW50KHRhYmxlQWN0aW9uLCB2YWx1ZSkge1xuICAgICAgICBsZXQgYWN0aW9uO1xuICAgICAgICBzd2l0Y2ggKHRhYmxlQWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIEludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uLkFkZDpcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSAnYWRkJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxEYXRhYmFzZVRhYmxlV3JpdGVBY3Rpb24uVXBkYXRlOlxuICAgICAgICAgICAgICAgIGFjdGlvbiA9ICd1cGRhdGUnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBJbnRlcm5hbERhdGFiYXNlVGFibGVXcml0ZUFjdGlvbi5EZWxldGU6XG4gICAgICAgICAgICAgICAgYWN0aW9uID0gJ2RlbGV0ZSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgYWN0aW9uLCB2YWx1ZSB9O1xuICAgIH1cbiAgICB2YWxpZGF0ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlSW52YWxpZFZhbHVlLCAnSW52YWxpZCB2YWx1ZS4gTXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5VmFsdWUgPSB2YWx1ZVtrZXldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eVZhbHVlID09PSAnb2JqZWN0JyAmJiAhKHByb3BlcnR5VmFsdWUgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsaWRhdGVWYWx1ZShwcm9wZXJ0eVZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghWydzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nXS5pbmNsdWRlcyh0eXBlb2YgcHJvcGVydHlWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5LZXlWYWx1ZURhdGFiYXNlSW52YWxpZFZhbHVlLCBgSW52YWxpZCB2YWx1ZS4gUHJvcGVydHkgJyR7a2V5fScgbXVzdCBiZSBhIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvciBEYXRlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQmFzZUxvY2FsTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlTG9jYWxNZWRpYVN0cmVhbSc7XG5leHBvcnQgY2xhc3MgTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0gZXh0ZW5kcyBCYXNlTG9jYWxNZWRpYVN0cmVhbSB7XG4gICAgYXVkaW9Db250ZXh0O1xuICAgIHRyYW5zZm9ybWF0aW9ucyA9IFtdO1xuICAgIGNsaWVudFN0cmVhbTtcbiAgICBhdWRpb1NvdXJjZTtcbiAgICBhdWRpb0Rlc3RpbmF0aW9uO1xuICAgIHNvdXJjZVZpZGVvO1xuICAgIGNhbnZhcztcbiAgICBjb250ZXh0O1xuICAgIGludGVydmFsO1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBsYWJlbCwgbWVkaWFTb3VyY2UsIG1heEZwcywgYXVkaW9Db250ZXh0LCBjbHVzdGVySWQpIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsLCBtZWRpYVNvdXJjZSwgY2x1c3RlcklkKTtcbiAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQgPSBhdWRpb0NvbnRleHQ7XG4gICAgICAgIHRoaXMuY2xpZW50U3RyZWFtID0gdGhpcy5tZWRpYVN0cmVhbTtcbiAgICAgICAgdGhpcy5zb3VyY2VWaWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgIHRoaXMuc291cmNlVmlkZW8uYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICB0aGlzLnNvdXJjZVZpZGVvLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zb3VyY2VWaWRlby5zcmNPYmplY3QgPSB0aGlzLmNsaWVudFN0cmVhbTtcbiAgICAgICAgdGhpcy5zb3VyY2VWaWRlby5sb2FkKCk7XG4gICAgICAgIHRoaXMuc291cmNlVmlkZW8ub25sb2FkZWRkYXRhID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VWaWRlby5wbGF5KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIHRoaXMubWVkaWFTdHJlYW0gPSB0aGlzLmNhbnZhcy5jYXB0dXJlU3RyZWFtKG1heEZwcyk7XG4gICAgICAgIHRoaXMuYXVkaW9EZXN0aW5hdGlvbiA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24oKTtcbiAgICAgICAgaWYgKHRoaXMuY2xpZW50U3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9Tb3VyY2UgPSB0aGlzLmNsaWVudFN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdO1xuICAgICAgICAgICAgdGhpcy5hdWRpb1NvdXJjZSA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKG5ldyBNZWRpYVN0cmVhbShbYXVkaW9Tb3VyY2VdKSk7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvU291cmNlLmNvbm5lY3QodGhpcy5hdWRpb0Rlc3RpbmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb1RyYWNrID0gdGhpcy5hdWRpb0Rlc3RpbmF0aW9uLnN0cmVhbS5nZXRUcmFja3MoKVswXTtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5hZGRUcmFjayhhdWRpb1RyYWNrKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5zb3VyY2VWaWRlby52aWRlb1dpZHRoO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5zb3VyY2VWaWRlby52aWRlb0hlaWdodDtcbiAgICAgICAgICAgIGlmICghdGhpcy5zb3VyY2VWaWRlby52aWRlb1dpZHRoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jbGllbnRTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT09IDAgfHwgIXRoaXMuY2xpZW50U3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5jbGllbnRTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggPT09IDAgfHwgIXRoaXMuY2xpZW50U3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZHJhd0ltYWdlKHRoaXMuc291cmNlVmlkZW8sIDAsIDApO1xuICAgICAgICB9LCAxMDAwIC8gbWF4RnBzKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgdGhpcy5zb3VyY2VWaWRlby5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5jYW52YXMucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuYXVkaW9Tb3VyY2U/LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5hdWRpb0Rlc3RpbmF0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5tZWRpYVN0cmVhbS5yZW1vdmVUcmFjayh0cmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGFkZFRyYWNrKHRyYWNrKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVHJhY2sgPSB0aGlzLmdldFRyYWNrKHRyYWNrLmtpbmQpO1xuICAgICAgICBpZiAoZXhpc3RpbmdUcmFjaykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVUcmFjayhleGlzdGluZ1RyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgdGhpcy5hZGRBdWRpb1RyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgdGhpcy5hZGRWaWRlb1RyYWNrKHRyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldHVwVHJhY2tFbmRlZExpc3RlbmVycyh0cmFjayk7XG4gICAgfVxuICAgIHJlbW92ZVRyYWNrKHBhcmFtKSB7XG4gICAgICAgIGNvbnN0IHRyYWNrID0gdGhpcy5nZXRUcmFja0Zyb21QYXJhbShwYXJhbSk7XG4gICAgICAgIGlmICh0cmFjaykge1xuICAgICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvU291cmNlPy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb1NvdXJjZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJhY2tFbmRlZExpc3RlbmVycy5nZXQodHJhY2sua2luZCk/LigpO1xuICAgICAgICAgICAgdGhpcy5jbGllbnRTdHJlYW0ucmVtb3ZlVHJhY2sodHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFjaztcbiAgICB9XG4gICAgcmVwbGFjZVRyYWNrKHRyYWNrKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlVHJhY2sodHJhY2sua2luZCk7XG4gICAgICAgIHRoaXMuYWRkVHJhY2sodHJhY2spO1xuICAgIH1cbiAgICBzZXRUcmFuc2Zvcm1hdGlvbnModHJhbnNmb3JtYXRpb25zKSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtYXRpb25zID0gdHJhbnNmb3JtYXRpb25zO1xuICAgIH1cbiAgICBnZXRUcmFjayhraW5kKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsaWVudFN0cmVhbS5nZXRUcmFja3MoKS5maW5kKCh0cmFjaykgPT4gdHJhY2sua2luZCA9PT0ga2luZCkgfHwgbnVsbDtcbiAgICB9XG4gICAgZ2V0VHJhY2tGcm9tUGFyYW0ocGFyYW0pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRyYWNrKHBhcmFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgfVxuICAgIGFkZEF1ZGlvVHJhY2sodHJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9Db250ZXh0LnN0YXRlID09PSAnc3VzcGVuZGVkJykge1xuICAgICAgICAgICAgLy8gTmVlZGVkIHNpbmNlIHRoZSBBdWRpb0NvbnRleHQgaXMgaW5pdGlhbGl6ZWQgYmVmb3JlIGEgdXNlciBpbnRlcmFjdGlvbiB3aXRoIHRoZSBwYWdlLlxuICAgICAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQucmVzdW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRTdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuICAgICAgICB0aGlzLmF1ZGlvU291cmNlID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UodGhpcy5jbGllbnRTdHJlYW0pO1xuICAgICAgICB0aGlzLmF1ZGlvU291cmNlLmNvbm5lY3QodGhpcy5hdWRpb0Rlc3RpbmF0aW9uKTtcbiAgICB9XG4gICAgYWRkVmlkZW9UcmFjayh0cmFjaykge1xuICAgICAgICB0aGlzLmNsaWVudFN0cmVhbS5hZGRUcmFjayh0cmFjayk7XG4gICAgICAgIHRoaXMuc291cmNlVmlkZW8ubG9hZCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEJhc2VMb2NhbE1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZUxvY2FsTWVkaWFTdHJlYW0nO1xuZXhwb3J0IGNsYXNzIExvY2FsTWVkaWFTdHJlYW0gZXh0ZW5kcyBCYXNlTG9jYWxNZWRpYVN0cmVhbSB7XG59XG4iLCJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IE9iamVjdEtpbmQsIFBheWxvYWRBY3Rpb24sIFN0b3JhZ2VFdmVudFR5cGUsIENvbnRlbnRUeXBlLCBGaWxlU3RhdHVzIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTREtDbGllbnRFcnJvciwgU0RLQ2xpZW50RXJyb3JDb2RlcyB9IGZyb20gJ3B1YmxpYy9lcnJvcnMvU0RLQ2xpZW50RXJyb3InO1xuaW1wb3J0IHsgQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUsIENPTlRFTlRfRklMRV9DSFVOS1NfTUFYX0JVRkZFUl9TSVpFLCBDT05URU5UX09CSkVDVF9TVE9SRV9MQVNUX1RSQU5TQUNUSU9OX09CSkVDVF9OQU1FLCBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiwgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19SRVRSWV9ERUxBWSwgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfU1RBVFNfREVCT1VOQ0UgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBDb250ZW50TWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0NvbnRlbnQvQ29udGVudCc7XG5pbXBvcnQgeyBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbiwgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0RhdGFDb250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ1NlcnZpY2VzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZURhdGFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9CYXNlRGF0YVN0cmVhbSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgZ2V0RmlsZUNoZWNrc3VtLCByZWFkRmlsZVN0cmVhbSwgZ2V0UGF0aE5hbWUsIHNwbGl0UGF0aE5hbWUgfSBmcm9tICd1dGlscy9PYmplY3RTdG9yZS9IZWxwZXJzJztcbmltcG9ydCB7IGNyZWF0ZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIE9iamVjdFN0b3JlIGV4dGVuZHMgQmFzZURhdGFTdHJlYW0ge1xuICAgIGxvY2FsTm9kZTtcbiAgICBjbHVzdGVySWQ7XG4gICAgdmVuZG9ySWQ7XG4gICAgdHJhbnNhY3Rpb25TZXJ2aWNlO1xuICAgIHdhaXRGb3JBcnJheUJ1ZmZlclNpemU7XG4gICAgdW5zdWJzY3JpYmVIYW5kbGVyO1xuICAgIGxhc3RUcmFuc2FjdGlvbklkO1xuICAgIHBlbmRpbmdTeW5jVHJhbnNhY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgIG9iamVjdFJlcXVlc3RzID0gbmV3IE1hcCgpO1xuICAgIHBlbmRpbmdGaWxlc1N5bmNpbmcgPSBuZXcgTWFwKCk7XG4gICAgcGVuZGluZ0ZpbGVzVHJhbnNhY3Rpb25zID0gbmV3IE1hcCgpO1xuICAgIHBlbmRpbmdGaWxlc1JlbmFtZSA9IG5ldyBNYXAoKTtcbiAgICBmaWxlU2VuZGluZ01hcCA9IG5ldyBNYXAoKTtcbiAgICBvYmplY3RTdG9yZUNvbm5lY3RvcjtcbiAgICBldmVudExpc3RlbmVyID0gY3JlYXRlT2JzZXJ2ZXIoKTtcbiAgICBsaXN0ZW5lclVuc3Vic2NyaWJlcnMgPSBuZXcgTWFwKCk7XG4gICAgZGVib3VuY2VTdGF0cztcbiAgICB3cml0ZXMgPSAwO1xuICAgIHJlYWRzID0gMDtcbiAgICBzeW5jQ29udGVudCA9IHRydWU7XG4gICAgaXNTeW5jaW5nID0gdHJ1ZTtcbiAgICBub2Rlc0Nvbm5lY3RlZCA9IDA7XG4gICAgY29uc3RydWN0b3IobG9jYWxOb2RlLCBsYWJlbCwgY2x1c3RlcklkLCB2ZW5kb3JJZCwgdHJhbnNhY3Rpb25TZXJ2aWNlLCBjb25uZWN0b3JDb25zdHJ1Y3Rvciwgd2FpdEZvckFycmF5QnVmZmVyU2l6ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGxhYmVsICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuT2JqZWN0U3RvcmVOYW1lTm90U3RyaW5nLCAnQ2Fubm90IGNyZWF0ZSBPYmplY3RTdG9yZTogTGFiZWwgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGxvY2FsTm9kZSwgbGFiZWwpO1xuICAgICAgICB0aGlzLmxvY2FsTm9kZSA9IGxvY2FsTm9kZTtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvblNlcnZpY2UgPSB0cmFuc2FjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMud2FpdEZvckFycmF5QnVmZmVyU2l6ZSA9IHdhaXRGb3JBcnJheUJ1ZmZlclNpemU7XG4gICAgICAgIGNvbnN0IHN0b3JlS2V5ID0gYGNjYyR7dGhpcy52ZW5kb3JJZH1jY2Mke3RoaXMuY2x1c3RlcklkfWNjYyR7bGFiZWx9YDtcbiAgICAgICAgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3RvciA9IG5ldyBjb25uZWN0b3JDb25zdHJ1Y3RvcihzdG9yZUtleSk7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLk9iamVjdFN0b3JlO1xuICAgIH1cbiAgICBhc3luYyBzeW5jKHN5bmNDb250ZW50KSB7XG4gICAgICAgIGlmIChzeW5jQ29udGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN5bmNDb250ZW50ID0gc3luY0NvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N5bmNpbmcgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuZ2V0KENPTlRFTlRfT0JKRUNUX1NUT1JFX0xBU1RfVFJBTlNBQ1RJT05fT0JKRUNUX05BTUUpO1xuICAgICAgICAgICAgY29uc3QgbGFzdFRyYW5zYWN0aW9uSWQgPSBhd2FpdCBmaWxlLnRleHQoKTtcbiAgICAgICAgICAgIHRoaXMubGFzdFRyYW5zYWN0aW9uSWQgPSBsYXN0VHJhbnNhY3Rpb25JZDtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gdGhpcy5vbk1lc3NhZ2UoYXN5bmMgKF8sIGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQucGF5bG9hZFR5cGUgPT09IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5SZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVxdWVzdFBheWxvYWQoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUcmFuc2FjdGlvblBheWxvYWQoY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnN5bmNUcmFuc2FjdGlvbnMoKTtcbiAgICAgICAgaWYgKHRoaXMuc3luY0NvbnRlbnQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3luY1BlbmRpbmdGaWxlcygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVN5bmMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcj8uKCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljPy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VPYmplY3RTdG9yZUJ1Y2tldCxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmUobGFiZWwsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVycy5oYXMobGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZUFscmVhZHlTdWJzY3JpYmVkLCAnQ2Fubm90IHN1YnNjcmliZSB0byBPYmplY3RTdG9yZTogQWxyZWFkeSBzdWJzY3JpYmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0ZW5lclVuc3Vic2NyaWJlcnMuc2V0KGxhYmVsLCB0aGlzLmV2ZW50TGlzdGVuZXIuc3Vic2NyaWJlKGNhbGxiYWNrKSk7XG4gICAgICAgIGlmICghdGhpcy5pc1N5bmNpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lci5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBldmVudDogU3RvcmFnZUV2ZW50VHlwZS5TeW5jQ29tcGxldGUsXG4gICAgICAgICAgICAgICAgcGF5bG9hZDogbnVsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKGxhYmVsKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJVbnN1YnNjcmliZXJzLmdldChsYWJlbCk/LigpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyVW5zdWJzY3JpYmVycy5kZWxldGUobGFiZWwpO1xuICAgIH1cbiAgICBwdWJsaXNoKHBheWxvYWQpIHtcbiAgICAgICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBQYXlsb2FkQWN0aW9uLkZpbGU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVibGlzaEZpbGUocGF5bG9hZC5maWxlLCBwYXlsb2FkLnBhdGgsIHBheWxvYWQub3B0aW9ucyk7XG4gICAgICAgICAgICBjYXNlIFBheWxvYWRBY3Rpb24uRm9sZGVyOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1Ymxpc2hGb2xkZXIocGF5bG9hZC5wYXRoKTtcbiAgICAgICAgICAgIGNhc2UgUGF5bG9hZEFjdGlvbi5Nb3ZlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1Ymxpc2hNb3ZlKHBheWxvYWQucGF0aCwgcGF5bG9hZC5uZXdQYXRoKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkUGF5bG9hZCwgYENhbm5vdCBwdWJsaXNoIHBheWxvYWQ6ICR7cGF5bG9hZH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1bnB1Ymxpc2gocGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudElkID0gdGhpcy5sYXN0VHJhbnNhY3Rpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5UcmFuc2FjdGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLkRlbGV0ZSxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRJZCxcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFRyYW5zYWN0aW9uKHBheWxvYWQpO1xuICAgICAgICAgICAgY29uc3Qga2luZCA9IGF3YWl0IHRoaXMuZGVsZXRlT2JqZWN0KHBhdGgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHBheWxvYWQpO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd1bnB1Ymxpc2gnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53cml0ZXMgKz0gMTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlTm90SW5TeW5jLCBgQ2Fubm90IHVucHVibGlzaCBvYmplY3QgYXQgJHtwYXRofTogT2JqZWN0IHN0b3JlIGlzIG5vdCBpbiBzeW5jYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZUludmFsaWRQYXRoLCBgQ2Fubm90IHVucHVibGlzaCBvYmplY3Q6ICR7cGF0aH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXQocGF0aCwgZmlsZU9wdGlvbnMpIHtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgdHlwZTogJ2dldCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIHBhdGgsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlYWRzICs9IDE7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5nZXQocGF0aCwgZmlsZU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuZ2V0KHBhdGggKyBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFBhdGgsIGBDYW5ub3QgZ2V0IGZpbGU6ICR7cGF0aH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlTm90SW5TeW5jLCBgT2JqZWN0IHN0b3JlIGlzIG5vdCBpbiBzeW5jYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbGlzdChwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgcmVjdXJzaXZlID0gZmFsc2UsIGluY2x1ZGVTeW5jaW5nRmlsZXMgPSBmYWxzZSB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgdHlwZTogJ2xpc3QnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZWFkcyArPSAxO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IubGlzdChwYXRoLCByZWN1cnNpdmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc0xpc3QobGlzdCwgeyByZWN1cnNpdmUsIGluY2x1ZGVTeW5jaW5nRmlsZXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFBhdGgsIGBDYW5ub3QgbGlzdCBkaXJlY3Rvcnk6ICR7cGF0aH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOb2RlSm9pbihub2RlSWQpIHtcbiAgICAgICAgdGhpcy5ub2Rlc0Nvbm5lY3RlZCArPSAxO1xuICAgICAgICBmb3IgKGNvbnN0IHBheWxvYWQgb2YgdGhpcy5vYmplY3RSZXF1ZXN0cy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kKHBheWxvYWQsIFtub2RlSWRdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOb2RlTGVhdmUobm9kZUlkKSB7XG4gICAgICAgIHRoaXMubm9kZXNDb25uZWN0ZWQgLT0gMTtcbiAgICAgICAgY29uc3QgcGVuZGluZ0ZpbGVzID0gdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmdldChub2RlSWQpO1xuICAgICAgICBpZiAoIXBlbmRpbmdGaWxlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW3BheWxvYWQsIHRpbWVvdXRdIG9mIHBlbmRpbmdGaWxlcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRmlsZVJlcXVlc3RQYXlsb2FkKHBheWxvYWQsIHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5kZWxldGUobm9kZUlkKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2l6ZShwYXRoID0gJy8nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5jYWxjdWxhdGVTaXplKHBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlLmluY2x1ZGVzKCdFTk9FTlQnKSkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBwYXRoIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFBhdGgsIGBDYW5ub3QgZ2V0IHNpemUgb2YgcGF0aDogJHtwYXRofWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBsZXRlU3luYygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3luY2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTeW5jaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lci5wdWJsaXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiBTdG9yYWdlRXZlbnRUeXBlLlN5bmNDb21wbGV0ZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IG51bGwsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzTGlzdChsaXN0LCB7IGluY2x1ZGVTeW5jaW5nRmlsZXMgPSBmYWxzZSB9KSB7XG4gICAgICAgIGNvbnN0IGZpbmFsTGlzdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGxpc3QpIHtcbiAgICAgICAgICAgIGlmIChlbnRyeS5raW5kID09PSBPYmplY3RLaW5kLkZvbGRlcikge1xuICAgICAgICAgICAgICAgIGVudHJ5LmVudHJpZXMgPSBhd2FpdCB0aGlzLnByb2Nlc3NMaXN0KGVudHJ5LmVudHJpZXMgPz8gW10sIHsgaW5jbHVkZVN5bmNpbmdGaWxlcyB9KTtcbiAgICAgICAgICAgICAgICBmaW5hbExpc3QucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW50cnkubmFtZSA9PT0gQ09OVEVOVF9PQkpFQ1RfU1RPUkVfTEFTVF9UUkFOU0FDVElPTl9PQkpFQ1RfTkFNRSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVudHJ5Lm5hbWUuZW5kc1dpdGgoQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04pKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBpbmNsdWRlIHBlbmRpbmcgZmlsZXMgaW4gdGhlIGxpc3RcbiAgICAgICAgICAgICAgICBpZiAoIWluY2x1ZGVTeW5jaW5nRmlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBlbnRyeTtcbiAgICAgICAgICAgICAgICBmaWxlLm5hbWUgPSBmaWxlLm5hbWUucmVwbGFjZShDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiwgJycpO1xuICAgICAgICAgICAgICAgIGZpbGUucGF0aE5hbWUgPSBmaWxlLnBhdGhOYW1lLnJlcGxhY2UoQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04sICcnKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBpbmNsdWRlIHBlbmRpbmcgZmlsZSwgd2Ugd2FudCB0byBnaXZlIHRoZW0gdGhlIHJpZ2h0IHN0YXR1c1xuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBwZW5kaW5nIGZpbGUsIGJ1dCB0aGUgY29udGVudCBmaWxlIGV4aXN0czogV2UgYXJlIGN1cnJlbnRseSBzeW5jaW5nIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgLy8gV2UgY2FuIHJlbW92ZSB0aGUgcGVuZGluZyBmaWxlIGZyb20gdGhlIGxpc3QgYW5kIGNoYW5nZSB0aGUgc3RhdHVzIG9mIHRoZSBjb250ZW50IGZpbGUgdG8gc3luY2luZ1xuICAgICAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLnN5bmNlZEZpbGVFeGlzdHMoZmlsZS5wYXRoTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgY29udGVudCBmaWxlIGFuZCBjaGFuZ2UgaXRzIHN0YXR1c1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIC0gQ291bGQgd2UgYXNzdW1lIHRoZSBsYXN0IGZpbGUgaW4gdGhlIGxpc3QgYXJyYXkgaXMgdGhlIGNvbnRlbnQgZmlsZSBpbnN0ZWFkIG9mIHNlYXJjaGluZyB0aGUgd2hvbGUgbGlzdD9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudEZpbGUgPSBsaXN0LmZpbmQoZiA9PiBmLnBhdGhOYW1lID09PSBmaWxlLnBhdGhOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEZpbGUuc3RhdHVzID0gRmlsZVN0YXR1cy5TeW5jaW5nO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHBlbmRpbmcgZmlsZSwgYnV0IHRoZSBjb250ZW50IGZpbGUgZG9lc24ndCBleGlzdDogV2UgYXJlIHdhaXRpbmcgZm9yIHRoZSBmaWxlIHRvIGJlIHN5bmNlZFxuICAgICAgICAgICAgICAgIGZpbGUuc3RhdHVzID0gRmlsZVN0YXR1cy5QZW5kaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxMaXN0LnB1c2goZW50cnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaW5hbExpc3Q7XG4gICAgfVxuICAgIGFzeW5jIHB1Ymxpc2hGaWxlKGZpbGUsIHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja3N1bSA9IGF3YWl0IGdldEZpbGVDaGVja3N1bShmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhOYW1lID0gZ2V0UGF0aE5hbWUocGF0aCA/PyAnLycsIGZpbGUubmFtZSk7XG4gICAgICAgICAgICBsZXQgc2VuZEZpbGUgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5UcmFuc2FjdGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLkZpbGVXcml0ZSxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5sYXN0VHJhbnNhY3Rpb25JZCxcbiAgICAgICAgICAgICAgICBhbnN3ZXJlcklkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCA/PyAnLycsXG4gICAgICAgICAgICAgICAgc2tpcEVuY3J5cHRpb246IG9wdGlvbnM/LnNraXBFbmNyeXB0aW9uID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNoZWNrc3VtLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGVuZGluZ05hbWUgPSBwYXRoTmFtZSArIENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuZ2V0KHBlbmRpbmdOYW1lKTtcbiAgICAgICAgICAgICAgICBzZW5kRmlsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuZGVsZXRlT2JqZWN0KHBlbmRpbmdOYW1lKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdFJlcXVlc3RzLmRlbGV0ZShwYXRoTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN5bmNDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZUZpbGUoZmlsZSwgcGF0aCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVBlbmRpbmdGaWxlV3JpdGUoZmlsZS5uYW1lLCBwYXRoID8/ICcvJywge1xuICAgICAgICAgICAgICAgICAgICBjaGVja3N1bSxcbiAgICAgICAgICAgICAgICAgICAgc2tpcEVuY3J5cHRpb246IG9wdGlvbnM/LnNraXBFbmNyeXB0aW9uID8/IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhbiBleGlzdGluZyBzZW5kIHJlcXVlc3QgZm9yIHRoZSBmaWxlLCB3ZSBuZWVkIHRvIGludGVycnVwdCBpdCBhbmQgd2FpdCBiZWZvcmUgc2VuZGluZyB0aGUgbmV3IGZpbGVcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGVTZW5kaW5nTWFwLmhhcyhwYXRoTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBbXywgcHJvbWlzZV0gPSB0aGlzLmZpbGVTZW5kaW5nTWFwLmdldChwYXRoTmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlU2VuZGluZ01hcC5zZXQocGF0aE5hbWUsIFt0cnVlLCBwcm9taXNlXSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZVNlbmRpbmdNYXAuZGVsZXRlKHBhdGhOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZW5kRmlsZSAmJiB0aGlzLm5vZGVzQ29ubmVjdGVkID4gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZEZpbGUoZmlsZSwgdHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdwdWJsaXNoJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICBraW5kOiBPYmplY3RLaW5kLkZpbGUsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgIGZpbGVUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlcyArPSAxO1xuICAgICAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICAgICAgICAgIC8vIFRPRE8gLSB0cmlnZ2VyIGFuIGV2ZW50IHdoZW4gdGhlIGZpbGUgaGFzIGJlZW4gc3luY2VkIGF0IGxlYXN0IG9uY2VcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTREtJbnRlcm5hbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuT2JqZWN0U3RvcmVOb3RJblN5bmMsIGBPYmplY3Qgc3RvcmUgaXMgbm90IGluIHN5bmNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFBhdGgsIGBDYW5ub3QgcHVibGlzaCBmaWxlOiAke3BhdGh9JHtwYXRoPy5lbmRzV2l0aCgnLycpID8gJycgOiAnLyd9JHtmaWxlLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcHVibGlzaEZvbGRlcihwYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHV1aWR2NCgpO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50SWQgPSB0aGlzLmxhc3RUcmFuc2FjdGlvbklkO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkVHlwZTogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlLlRyYW5zYWN0aW9uLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRm9sZGVyQ3JlYXRlLFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wdWJsaXNoVHJhbnNhY3Rpb24ocGF5bG9hZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmNyZWF0ZUZvbGRlcihwYXRoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkKTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLk9iamVjdFN0b3JhZ2UsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncHVibGlzaCcsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAga2luZDogT2JqZWN0S2luZC5Gb2xkZXIsXG4gICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53cml0ZXMgKz0gMTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk9iamVjdFN0b3JlTm90SW5TeW5jLCBgT2JqZWN0IHN0b3JlIGlzIG5vdCBpbiBzeW5jYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZUludmFsaWRQYXRoLCBgQ2Fubm90IHB1Ymxpc2ggZm9sZGVyOiAke3BhdGh9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcHVibGlzaE1vdmUocGF0aCwgbmV3UGF0aCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudElkID0gdGhpcy5sYXN0VHJhbnNhY3Rpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZFR5cGU6IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZS5UcmFuc2FjdGlvbixcbiAgICAgICAgICAgICAgICBhY3Rpb246IEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLk1vdmUsXG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICBuZXdQYXRoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHVibGlzaFRyYW5zYWN0aW9uKHBheWxvYWQpO1xuICAgICAgICAgICAgY29uc3Qga2luZCA9IGF3YWl0IHRoaXMubW92ZU9iamVjdChwYXRoLCBuZXdQYXRoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZChwYXlsb2FkKTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2dTZXJ2aWNlRXZlbnQoTG9nZ2luZ1NlcnZpY2VzLk9iamVjdFN0b3JhZ2UsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbW92ZScsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgIG5ld1BhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVzICs9IDE7XG4gICAgICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNES0ludGVybmFsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5PYmplY3RTdG9yZU5vdEluU3luYywgYE9iamVjdCBzdG9yZSBpcyBub3QgaW4gc3luY2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkUGF0aCwgYENhbm5vdCBwdWJsaXNoIG1vdmUgb3BlcmF0aW9uOiAke3BhdGh9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVHJhbnNhY3Rpb25QYXlsb2FkKHBheWxvYWQsIGluaXRpYWxTeW5jID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdFRyYW5zYWN0aW9uSWQgJiYgcGF5bG9hZC5wYXJlbnRJZCAhPT0gdGhpcy5sYXN0VHJhbnNhY3Rpb25JZCAmJiBwYXlsb2FkLmlkICE9PSB0aGlzLmxhc3RUcmFuc2FjdGlvbklkKSB7XG4gICAgICAgICAgICBpZiAoIXBheWxvYWQucGFyZW50SWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1N5bmNUcmFuc2FjdGlvbnMuc2V0KHBheWxvYWQucGFyZW50SWQsIHBheWxvYWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gLSBoYW5kbGUgZmFpbGluZyB0cmFuc2FjdGlvblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzVHJhbnNhY3Rpb25QYXlsb2FkKHBheWxvYWQsIGluaXRpYWxTeW5jKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTGFzdFRyYW5zYWN0aW9uSWQocGF5bG9hZC5pZCk7XG4gICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1BlbmRpbmdTeW5jVHJhbnNhY3Rpb25zKHBheWxvYWQuaWQsIGluaXRpYWxTeW5jKTtcbiAgICB9XG4gICAgYXN5bmMgcHJvY2Vzc1RyYW5zYWN0aW9uUGF5bG9hZChwYXlsb2FkLCBpbml0aWFsU3luYyA9IGZhbHNlKSB7XG4gICAgICAgIHN3aXRjaCAocGF5bG9hZC5hY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRmlsZVdyaXRlOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlRmlsZVdyaXRlKHBheWxvYWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5Gb2xkZXJDcmVhdGU6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVGb2xkZXJDcmVhdGUocGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLk1vdmU6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVPYmplY3RNb3ZlKHBheWxvYWQsIGluaXRpYWxTeW5jKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uRGVsZXRlOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlT2JqZWN0RGVsZXRlKHBheWxvYWQsIGluaXRpYWxTeW5jKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZUludmFsaWRTeW5jTWVzc2FnZSwgeyBwYXlsb2FkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHByb2Nlc3NQZW5kaW5nU3luY1RyYW5zYWN0aW9ucyhpZCwgaW5pdGlhbFN5bmMgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nU3luY1RyYW5zYWN0aW9ucy5oYXMoaWQpKSB7XG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nUGF5bG9hZCA9IHRoaXMucGVuZGluZ1N5bmNUcmFuc2FjdGlvbnMuZ2V0KGlkKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1N5bmNUcmFuc2FjdGlvbnMuZGVsZXRlKGlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlVHJhbnNhY3Rpb25QYXlsb2FkKHBlbmRpbmdQYXlsb2FkLCBpbml0aWFsU3luYyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmVxdWVzdFBheWxvYWQocGF5bG9hZCkge1xuICAgICAgICBzd2l0Y2ggKHBheWxvYWQuYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLlJlcXVlc3RGaWxlOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUZpbGVSZXF1ZXN0KHBheWxvYWQpO1xuICAgICAgICAgICAgY2FzZSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5SZXF1ZXN0QWNjZXB0ZWQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRmlsZVJlcXVlc3RBbnN3ZXIocGF5bG9hZCk7XG4gICAgICAgICAgICBjYXNlIEludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkQWN0aW9uLlJlcXVlc3RGaWxlU3luYzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVGaWxlU3luYyhwYXlsb2FkKTtcbiAgICAgICAgICAgIGNhc2UgSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEZpbGVXcml0ZTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVGaWxlV3JpdGUocGF5bG9hZCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkU3luY01lc3NhZ2UsIHsgcGF5bG9hZCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBoYW5kbGVGaWxlV3JpdGUocGF5bG9hZCwgcmV0cnkgPSAwKSB7XG4gICAgICAgIC8vIHBheWxvYWQuaW5kZXggY2FuIGJlIDAsIHdoaWNoIG1lYW5zICFwYXlsb2FkLmluZGV4IHdpbGwgYmUgdHJ1ZVxuICAgICAgICBjb25zdCBwYXRoTmFtZSA9IGdldFBhdGhOYW1lKHBheWxvYWQucGF0aCwgcGF5bG9hZC5uYW1lKTtcbiAgICAgICAgaWYgKCFwYXlsb2FkLmRhdGEgfHwgcGF5bG9hZC5pbmRleCA9PT0gdW5kZWZpbmVkIHx8ICFwYXlsb2FkLnRvdGFsKSB7XG4gICAgICAgICAgICB0aGlzLmZpbGVDaHVua3MuZGVsZXRlKHBhdGhOYW1lKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUGVuZGluZ0ZpbGVXcml0ZShwYXlsb2FkLm5hbWUsIHBheWxvYWQucGF0aCwge1xuICAgICAgICAgICAgICAgIGNoZWNrc3VtOiBwYXlsb2FkLmNoZWNrc3VtLFxuICAgICAgICAgICAgICAgIHNraXBFbmNyeXB0aW9uOiBwYXlsb2FkLnNraXBFbmNyeXB0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVsZXRlIHRoZSBleGlzdGluZyBmaWxlIGNodW5rcyBpZiB0aGUgY2hlY2tzdW0gZG9lc24ndCBtYXRjaFxuICAgICAgICBpZiAodGhpcy5maWxlQ2h1bmtzLmhhcyhwYXRoTmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rcyA9IHRoaXMuZmlsZUNodW5rcy5nZXQocGF0aE5hbWUpO1xuICAgICAgICAgICAgaWYgKGNodW5rcy5jaGVja3N1bSAhPT0gcGF5bG9hZC5jaGVja3N1bSkge1xuICAgICAgICAgICAgICAgIGNodW5rcy5zdHJlYW0/LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5maWxlQ2h1bmtzLmRlbGV0ZShwYXRoTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjaHVuayB0cmFja2luZyBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIGlmICghdGhpcy5maWxlQ2h1bmtzLmhhcyhwYXRoTmFtZSkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBmaWxlIGFscmVhZHkgZXhpc3RzLCBkZWxldGUgaXQsIG9yIGlnbm9yZSB0aGUgZXJyb3IuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuZGVsZXRlT2JqZWN0KHBhdGhOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5zeW5jQ29udGVudCA/IGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IuY3JlYXRlV3JpdGFibGVTdHJlYW0ocGF0aE5hbWUsIHsgc2tpcEVuY3J5cHRpb246IHBheWxvYWQuc2tpcEVuY3J5cHRpb24gfSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtzID0ge1xuICAgICAgICAgICAgICAgICAgICBjaHVua3NSZWNlaXZlZDogcGF5bG9hZC5zdGFydEluZGV4ID8/IDAsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzUmVjZWl2ZWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tzdW06IHBheWxvYWQuY2hlY2tzdW0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVDaHVua3Muc2V0KHBhdGhOYW1lLCBjaHVua3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUGVuZGluZ0ZpbGVXcml0ZShwYXlsb2FkLm5hbWUsIHBheWxvYWQucGF0aCwge1xuICAgICAgICAgICAgICAgICAgICBjaGVja3N1bTogcGF5bG9hZC5jaGVja3N1bSxcbiAgICAgICAgICAgICAgICAgICAgc2tpcEVuY3J5cHRpb246IHBheWxvYWQuc2tpcEVuY3J5cHRpb24sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5maWxlQ2h1bmtzLmdldChwYXRoTmFtZSk7XG4gICAgICAgIGlmIChwYXlsb2FkLmNoZWNrc3VtICE9PSBjaHVua3MuY2hlY2tzdW0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFBlbmRpbmdGaWxlU3luY2luZ1BheWxvYWQocGF5bG9hZCwgcGF0aE5hbWUpO1xuICAgICAgICBpZiAodGhpcy5zeW5jQ29udGVudCkge1xuICAgICAgICAgICAgaWYgKCFjaHVua3Muc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZUludmFsaWRTeW5jTWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnV3JpdGFibGUgc3RyZWFtIGlzIG1pc3NpbmcnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETyAtIElmIGEgbmV3IGZpbGUgcmVxdWVzdCBpcyBlbWl0dGVkIHdoaWxlIHdlIGFyZSBzdGlsbCB3YWl0aW5nIGZvciBuZXcgY2h1bmtzXG4gICAgICAgICAgICAvLyBUaGUgZXhwZWN0ZWQgaW5kZXggd2lsbCBvdmVyZmxvdyB0aGUgdG90YWwgbnVtYmVyIG9mIGNodW5rc1xuICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIG1ha2Ugc3VyZSBubyBuZXcgZmlsZSByZXF1ZXN0IGlzIGVtaXR0ZWQgd2hpbGUgd2UgYXJlIHN0aWxsIHdhaXRpbmcgZm9yIGNodW5rc1xuICAgICAgICAgICAgLy8gQW5kIHdlIHNob3VsZCByZXNldCB0aGUgdGhpcy5maWxlQ2h1bmtzKGZpbGVQYXRoKSB3aGVuIGVtaXR0aW5nIGEgbmV3IHJlcXVlc3RcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjaHVuayBpcyBpbiBvcmRlclxuICAgICAgICAgICAgbGV0IGV4cGVjdGVkSW5kZXggPSBjaHVua3MuY2h1bmtzUmVjZWl2ZWQ7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5pbmRleCAhPT0gZXhwZWN0ZWRJbmRleCkge1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBjaHVua3MgdGhhdCBhcmUgZWFybGllciBpbiB0aGUgZmlsZSB0aGFuIG91ciBleHBlY3RlZCBpbmRleFxuICAgICAgICAgICAgICAgIGlmIChleHBlY3RlZEluZGV4ID4gcGF5bG9hZC5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBjaHVua3MgdG9vIGZhciBhd2F5IHRvIGVmZmVjdGl2ZWx5IGJ1ZmZlclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dE9mQm91bmRDaHVua3MgPSBDT05URU5UX0ZJTEVfQ0hVTktTX01BWF9CVUZGRVJfU0laRSAvIDQgLyBDT05URU5UX0ZJTEVfQ0hVTktfU0laRTtcbiAgICAgICAgICAgICAgICBpZiAocGF5bG9hZC5pbmRleCA+IGV4cGVjdGVkSW5kZXggKyBvdXRPZkJvdW5kQ2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjaHVua3MuYnVmZmVyZWRDaHVua3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtzLmJ1ZmZlcmVkQ2h1bmtzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNldCBhIGxpbWl0IHRvIHRoZSBtYXhpbXVtIHNpemUgb2YgYnVmZmVyZWQgY2h1bmtzXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rcy5idWZmZXJlZENodW5rcy5sZW5ndGggPiBDT05URU5UX0ZJTEVfQ0hVTktTX01BWF9CVUZGRVJfU0laRSAvIENPTlRFTlRfRklMRV9DSFVOS19TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZUNodW5rcy5kZWxldGUocGF0aE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQnVmZmVyZWQgY2h1bmtzIGFyZSB0b28gbGFyZ2UnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQnVmZmVyIHRoZSBjaHVuayB1bnRpbCBpdCBpcyByZWFkeSB0byBiZSBwcm9jZXNzZWRcbiAgICAgICAgICAgICAgICBjaHVua3MuYnVmZmVyZWRDaHVua3MucHVzaChwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNodW5rcy5jaHVua3NSZWNlaXZlZCArPSAxO1xuICAgICAgICAgICAgICAgIGNodW5rcy5ieXRlc1JlY2VpdmVkICs9IHBheWxvYWQuZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgIGF3YWl0IGNodW5rcy5zdHJlYW0ud3JpdGUocGF5bG9hZC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd3JpdGluZyBjaHVuayB0byBzdHJlYW0nLCBlKTtcbiAgICAgICAgICAgICAgICBpZiAocmV0cnkgPiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZUNodW5rcy5kZWxldGUocGF0aE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNYXggcmV0cmllcyByZWFjaGVkIGZvciB3cml0aW5nIGNodW5rIHRvIHN0cmVhbScsIGUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHJldHJpZXMgcmVhY2hlZCBmb3Igd3JpdGluZyBjaHVuayB0byBzdHJlYW0nLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRmlsZVdyaXRlKHBheWxvYWQsIHJldHJ5ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWFuYWdlQnVmZmVyZWRDaHVua3MoY2h1bmtzLCBwYXlsb2FkLmluZGV4ICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZUNodW5rcy5kZWxldGUocGF0aE5hbWUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbGVDaHVua3Muc2V0KHBhdGhOYW1lLCBjaHVua3MpO1xuICAgICAgICAvLyBDaGVjayBpZiBhbGwgY2h1bmtzIGhhdmUgYmVlbiByZWNlaXZlZFxuICAgICAgICBpZiAoY2h1bmtzLmNodW5rc1JlY2VpdmVkIDwgcGF5bG9hZC50b3RhbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmlsZUNodW5rcyhwYXRoTmFtZSk7XG4gICAgICAgIGlmICh0aGlzLnN5bmNDb250ZW50KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZVBlbmRpbmdGaWxlKHBheWxvYWQpO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuT2JqZWN0U3RvcmFnZSwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzeW5jJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICBraW5kOiBPYmplY3RLaW5kLkZpbGUsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF5bG9hZC5wYXRoLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBwYXlsb2FkLm5hbWUsXG4gICAgICAgICAgICAgICAgZmlsZVR5cGU6IHBheWxvYWQudHlwZSxcbiAgICAgICAgICAgICAgICBzaXplOiBjaHVua3MuYnl0ZXNSZWNlaXZlZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IHRoaXMucGVuZGluZ0ZpbGVzVHJhbnNhY3Rpb25zLmdldChwYXlsb2FkLnBhdGgpID8/IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHRyYW5zYWN0aW9uIG9mIHRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wcm9jZXNzVHJhbnNhY3Rpb25QYXlsb2FkKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmdGaWxlc1RyYW5zYWN0aW9ucy5kZWxldGUocGF5bG9hZC5wYXRoKTtcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyLnB1Ymxpc2goe1xuICAgICAgICAgICAgZXZlbnQ6IFN0b3JhZ2VFdmVudFR5cGUuRmlsZVdyaXRlLFxuICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIGZpbGU6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogT2JqZWN0S2luZC5GaWxlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXlsb2FkLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBheWxvYWQudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogY2h1bmtzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zeW5jQ29udGVudCA/IEZpbGVTdGF0dXMuU3luY2VkIDogRmlsZVN0YXR1cy5QZW5kaW5nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgYXN5bmMgbWFuYWdlQnVmZmVyZWRDaHVua3MoY2h1bmtzLCBleHBlY3RlZEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHdyaXRhYmxlU3RyZWFtID0gY2h1bmtzLnN0cmVhbTtcbiAgICAgICAgbGV0IHJldHJ5ID0gMDtcbiAgICAgICAgd2hpbGUgKGNodW5rcy5idWZmZXJlZENodW5rcyAmJiBjaHVua3MuYnVmZmVyZWRDaHVua3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbmV4dENodW5rID0gY2h1bmtzLmJ1ZmZlcmVkQ2h1bmtzLmZpbmQoY2h1bmsgPT4gY2h1bmsuaW5kZXggPT09IGV4cGVjdGVkSW5kZXggKyAxKTtcbiAgICAgICAgICAgIGlmICghbmV4dENodW5rKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaHVua3MuYnVmZmVyZWRDaHVua3MgPSBjaHVua3MuYnVmZmVyZWRDaHVua3MuZmlsdGVyKGNodW5rID0+IGNodW5rLmluZGV4ICE9PSBleHBlY3RlZEluZGV4ICsgMSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHdyaXRhYmxlU3RyZWFtLndyaXRlKG5leHRDaHVuay5kYXRhKTtcbiAgICAgICAgICAgICAgICBleHBlY3RlZEluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdyaXRpbmcgYnVmZmVyZWQgY2h1bmsgdG8gc3RyZWFtJywgZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJ5ID4gMykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNYXggcmV0cmllcyByZWFjaGVkIGZvciB3cml0aW5nIGJ1ZmZlcmVkIGNodW5rIHRvIHN0cmVhbScsIGUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN5bmNNZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHJldHJpZXMgcmVhY2hlZCBmb3Igd3JpdGluZyBidWZmZXJlZCBjaHVuayB0byBzdHJlYW0nLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0cnkrKztcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNodW5rcy5jaHVua3NSZWNlaXZlZCArPSAxO1xuICAgICAgICAgICAgY2h1bmtzLmJ5dGVzUmVjZWl2ZWQgKz0gbmV4dENodW5rLmRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBoYW5kbGVGb2xkZXJDcmVhdGUocGF5bG9hZCkge1xuICAgICAgICBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmNyZWF0ZUZvbGRlcihwYXlsb2FkLnBhdGgpO1xuICAgICAgICBjb25zdCBbcGF0aCwgbmFtZV0gPSBzcGxpdFBhdGhOYW1lKHBheWxvYWQucGF0aCk7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lci5wdWJsaXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiBTdG9yYWdlRXZlbnRUeXBlLkZvbGRlckNyZWF0ZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICBmb2xkZXI6IHtcbiAgICAgICAgICAgICAgICAgICAga2luZDogT2JqZWN0S2luZC5Gb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhdGhOYW1lOiBwYXlsb2FkLnBhdGgsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVPYmplY3REZWxldGUocGF5bG9hZCwgaW5pdGlhbFN5bmMgPSBmYWxzZSkge1xuICAgICAgICAvLyBUT0RPIC0gc3RvcCBzeW5jaW5nIGZpbGVzIHRoYXQgYXJlIGRlbGV0ZWRcbiAgICAgICAgaWYgKCFpbml0aWFsU3luYyAmJiAhdGhpcy5zaG91bGRQcm9jZXNzVHJhbnNhY3Rpb24ocGF5bG9hZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBraW5kID0gYXdhaXQgdGhpcy5kZWxldGVPYmplY3QocGF5bG9hZC5wYXRoKTtcbiAgICAgICAgY29uc3QgW3BhdGgsIG5hbWVdID0gc3BsaXRQYXRoTmFtZShwYXlsb2FkLnBhdGgpO1xuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIucHVibGlzaCh7XG4gICAgICAgICAgICBldmVudDoga2luZCA9PT0gT2JqZWN0S2luZC5Gb2xkZXIgPyBTdG9yYWdlRXZlbnRUeXBlLkZvbGRlckRlbGV0ZSA6IFN0b3JhZ2VFdmVudFR5cGUuRmlsZURlbGV0ZSxcbiAgICAgICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgcGF0aE5hbWU6IHBheWxvYWQucGF0aCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVPYmplY3RNb3ZlKHBheWxvYWQsIGluaXRpYWxTeW5jID0gZmFsc2UpIHtcbiAgICAgICAgLy8gVE9ETyAtIGhhbmRsZSBtb3Zpbmcgc3luY2luZyBmaWxlc1xuICAgICAgICBpZiAoIWluaXRpYWxTeW5jICYmICF0aGlzLnNob3VsZFByb2Nlc3NUcmFuc2FjdGlvbihwYXlsb2FkKSkge1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNSZW5hbWUuc2V0KHBheWxvYWQubmV3UGF0aCwgdGhpcy5wZW5kaW5nRmlsZXNSZW5hbWUuZ2V0KHBheWxvYWQucGF0aCkgPz8gcGF5bG9hZC5wYXRoKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0ZpbGVzUmVuYW1lLmRlbGV0ZShwYXlsb2FkLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ0ZpbGVzUmVuYW1lLmRlbGV0ZShwYXlsb2FkLnBhdGgpO1xuICAgICAgICBjb25zdCBraW5kID0gYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5tb3ZlT2JqZWN0KHBheWxvYWQucGF0aCwgcGF5bG9hZC5uZXdQYXRoKTtcbiAgICAgICAgY29uc3QgW29sZFBhdGgsIG9sZE5hbWVdID0gc3BsaXRQYXRoTmFtZShwYXlsb2FkLnBhdGgpO1xuICAgICAgICBjb25zdCBbcGF0aCwgbmFtZV0gPSBzcGxpdFBhdGhOYW1lKHBheWxvYWQubmV3UGF0aCk7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lci5wdWJsaXNoKHtcbiAgICAgICAgICAgIGV2ZW50OiBraW5kID09PSBPYmplY3RLaW5kLkZvbGRlciA/IFN0b3JhZ2VFdmVudFR5cGUuRm9sZGVyTW92ZSA6IFN0b3JhZ2VFdmVudFR5cGUuRmlsZU1vdmUsXG4gICAgICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgIHBhdGhOYW1lOiBwYXlsb2FkLm5ld1BhdGgsXG4gICAgICAgICAgICAgICAgb2xkTmFtZSxcbiAgICAgICAgICAgICAgICBvbGRQYXRoLFxuICAgICAgICAgICAgICAgIG9sZFBhdGhOYW1lOiBwYXlsb2FkLnBhdGgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgc2hvdWxkUHJvY2Vzc1RyYW5zYWN0aW9uKHBheWxvYWQpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxQYXRoID0gdGhpcy5wZW5kaW5nRmlsZXNSZW5hbWUuZ2V0KHBheWxvYWQucGF0aCkgPz8gcGF5bG9hZC5wYXRoO1xuICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5maWxlQ2h1bmtzLmtleXMoKSkge1xuICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKG9yaWdpbmFsUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSB0aGlzLnBlbmRpbmdGaWxlc1RyYW5zYWN0aW9ucy5nZXQoa2V5KSA/PyBbXTtcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnMucHVzaChwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdGaWxlc1RyYW5zYWN0aW9ucy5zZXQoa2V5LCB0cmFuc2FjdGlvbnMpO1xuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIWZvdW5kO1xuICAgIH1cbiAgICBhc3luYyBwdWJsaXNoVHJhbnNhY3Rpb24ocGF5bG9hZCkge1xuICAgICAgICBpZiAoIXBheWxvYWQuaWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkU3luY01lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWlzc2luZyB0cmFuc2FjdGlvbiBpZCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF5bG9hZC5wYXJlbnRJZCAhPT0gdGhpcy5sYXN0VHJhbnNhY3Rpb25JZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZU5vdFN5bmNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy50cmFuc2FjdGlvblNlcnZpY2Uud3JpdGVUcmFuc2FjdGlvbihwYXlsb2FkLCB0aGlzLmxhYmVsKTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMYXN0VHJhbnNhY3Rpb25JZChwYXlsb2FkLmlkKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlTGFzdFRyYW5zYWN0aW9uSWQobGFzdFRyYW5zYWN0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5sYXN0VHJhbnNhY3Rpb25JZCA9IGxhc3RUcmFuc2FjdGlvbklkO1xuICAgICAgICBjb25zdCBmaWxlID0gbmV3IEZpbGUoW25ldyBCbG9iKFt0aGlzLmxhc3RUcmFuc2FjdGlvbklkXSldLCBDT05URU5UX09CSkVDVF9TVE9SRV9MQVNUX1RSQU5TQUNUSU9OX09CSkVDVF9OQU1FLCB7IHR5cGU6ICd0ZXh0L3BsYWluJyB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZUZpbGUoZmlsZSwgJy8nKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlRmlsZVJlcXVlc3QocGF5bG9hZCkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVxdWVzdGVkIGZpbGUgaXMgYXZhaWxhYmxlIChjb21wYXJlIGNoZWNrc3VtcylcbiAgICAgICAgLy8gQW5zd2VyIGluaXRpYWwgRmlsZVJlcXVlc3QgKGFjY2VwdCBvciByZWplY3QpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5nZXQocGF5bG9hZC5wYXRoICsgJy8nICsgcGF5bG9hZC5uYW1lLCB7XG4gICAgICAgICAgICAgICAgc2tpcEVuY3J5cHRpb246IHBheWxvYWQuc2tpcEVuY3J5cHRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrc3VtID0gYXdhaXQgZ2V0RmlsZUNoZWNrc3VtKGZpbGUpO1xuICAgICAgICAgICAgaWYgKHBheWxvYWQuY2hlY2tzdW0gIT09ICcnICYmIGNoZWNrc3VtICE9PSBwYXlsb2FkLmNoZWNrc3VtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF5bG9hZC5hbnN3ZXJlcklkID0gdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKTtcbiAgICAgICAgICAgIHBheWxvYWQuYWN0aW9uID0gSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEFjY2VwdGVkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kKHBheWxvYWQsIFtwYXlsb2FkLnNvdXJjZUlkXSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgIH1cbiAgICBhc3luYyBoYW5kbGVGaWxlUmVxdWVzdEFuc3dlcihwYXlsb2FkKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXF1ZXN0IHdhcyBhbHJlYWR5IGFjY2VwdGVkXG4gICAgICAgIGNvbnN0IHBhdGhOYW1lID0gZ2V0UGF0aE5hbWUocGF5bG9hZC5wYXRoLCBwYXlsb2FkLm5hbWUpO1xuICAgICAgICBpZiAoIXRoaXMub2JqZWN0UmVxdWVzdHMuaGFzKHBhdGhOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9iamVjdFJlcXVlc3QgPSB0aGlzLm9iamVjdFJlcXVlc3RzLmdldChwYXRoTmFtZSk7XG4gICAgICAgIG9iamVjdFJlcXVlc3QuYWN0aW9uID0gSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEZpbGVTeW5jO1xuICAgICAgICBjb25zdCBhbnN3ZXJlcklkID0gcGF5bG9hZC5hbnN3ZXJlcklkO1xuICAgICAgICBpZiAoIWFuc3dlcmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkU3luY01lc3NhZ2UsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWlzc2luZyBhbnN3ZXJlciBpZCBvbiByZXF1ZXN0IGFuc3dlcicsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCB3YXMgYWNjZXB0ZWQsIHNlbmQgZmlsZSBzeW5jIHJlcXVlc3QgYW5kIGNyZWF0ZSB0aGUgc3luY2luZyBwYXlsb2FkIGFsbG93aW5nIHRvIHJldHJ5IHRoZSByZXF1ZXN0XG4gICAgICAgIHRoaXMub2JqZWN0UmVxdWVzdHMuZGVsZXRlKHBhdGhOYW1lKTtcbiAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuaGFzKGFuc3dlcmVySWQpKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuc2V0KGFuc3dlcmVySWQsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmdldChhbnN3ZXJlcklkKS5zZXQocGF0aE5hbWUsIFtvYmplY3RSZXF1ZXN0LCB0aGlzLmdldE9yUmVzZXRQZW5kaW5nRmlsZVRpbWVvdXQoYW5zd2VyZXJJZCwgcGF0aE5hbWUpXSk7XG4gICAgICAgIG9iamVjdFJlcXVlc3QuYW5zd2VyZXJJZCA9IGFuc3dlcmVySWQ7XG4gICAgICAgIG9iamVjdFJlcXVlc3Quc3RhcnRJbmRleCA9IHRoaXMuZmlsZUNodW5rcy5nZXQocGF0aE5hbWUpPy5jaHVua3NSZWNlaXZlZCA/PyAwO1xuICAgICAgICBpZiAob2JqZWN0UmVxdWVzdC5zdGFydEluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtpc0NvbnRlbnRGaWxlVmFsaWQsIGluZGV4XSA9IGF3YWl0IHRoaXMuY2hlY2tFeGlzdGluZ1BlbmRpbmdGaWxlQ29udGVudChwYXlsb2FkLm5hbWUsIHBheWxvYWQucGF0aCwgcGF5bG9hZC5jaGVja3N1bSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQ29udGVudEZpbGVWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3RSZXF1ZXN0LnN0YXJ0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW5kKG9iamVjdFJlcXVlc3QsIFthbnN3ZXJlcklkXSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUZpbGVTeW5jKHBheWxvYWQpIHtcbiAgICAgICAgY29uc3QgcGF0aE5hbWUgPSBnZXRQYXRoTmFtZShwYXlsb2FkLnBhdGgsIHBheWxvYWQubmFtZSk7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLmdldChwYXRoTmFtZSwge1xuICAgICAgICAgICAgc2tpcEVuY3J5cHRpb246IHBheWxvYWQuc2tpcEVuY3J5cHRpb24sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXF1ZXN0UGF5bG9hZCA9IHtcbiAgICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgICBhbnN3ZXJlcklkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgYWN0aW9uOiBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5SZXF1ZXN0RmlsZVdyaXRlLFxuICAgICAgICAgICAgc3RhcnRJbmRleDogcGF5bG9hZC5zdGFydEluZGV4ID8/IDAsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuc2VuZEZpbGUoZmlsZSwgcmVxdWVzdFBheWxvYWQsIFtwYXlsb2FkLnNvdXJjZUlkXSk7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRGaWxlKGZpbGUsIHBheWxvYWQsIG5vZGVJZHMpIHtcbiAgICAgICAgbGV0IHJlc29sdmU7XG4gICAgICAgIGxldCByZWplY3Q7XG4gICAgICAgIGNvbnN0IHN0YXJ0U3RyZWFtaW5nRmlsZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsQ2h1bmtzID0gTWF0aC5jZWlsKGZpbGUuc2l6ZSAvIENPTlRFTlRfRklMRV9DSFVOS19TSVpFKTtcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHBheWxvYWQuc3RhcnRJbmRleCA/PyAwO1xuICAgICAgICAgICAgY29uc3QgcGF0aE5hbWUgPSBnZXRQYXRoTmFtZShwYXlsb2FkLnBhdGgsIHBheWxvYWQubmFtZSk7XG4gICAgICAgICAgICB0aGlzLmZpbGVTZW5kaW5nTWFwLnNldChwYXRoTmFtZSwgW2ZhbHNlLCBwcm9taXNlXSk7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGRhdGEgb2YgcmVhZEZpbGVTdHJlYW0oZmlsZSwgaW5kZXgsIHRoaXMud2FpdEZvckFycmF5QnVmZmVyU2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBzZW5kaW5nIHdhcyBpbnRlcnJ1cHRlZCwgYW5kIHJlamVjdCB0aGUgcHJvbWlzZSB0byBzdG9wIHNlbmRpbmcgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICBjb25zdCBbaW50ZXJydXB0XSA9IHRoaXMuZmlsZVNlbmRpbmdNYXAuZ2V0KHBhdGhOYW1lKSA/PyBbXTtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJydXB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZVNlbmRpbmdNYXAuZGVsZXRlKHBhdGhOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmlsZSBzZW5kaW5nIGludGVycnVwdGVkJykpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFN0b3Agc2VuZGluZyBjaHVua3MgaWYgcmVjZWl2ZWQgYSBuZXcgRmlsZVdyaXRlIG9yIEZpbGVEZWxldGUgdHJhbnNhY3Rpb24gZm9yIHRoaXMgZmlsZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdGaWxlc1RyYW5zYWN0aW9ucy5oYXMocGF0aE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IHRoaXMucGVuZGluZ0ZpbGVzVHJhbnNhY3Rpb25zLmdldChwYXRoTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24uYWN0aW9uID09PSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5GaWxlV3JpdGUgfHwgdHJhbnNhY3Rpb24uYWN0aW9uID09PSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5EZWxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZVBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiB0b3RhbENodW5rcyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZChmaWxlUGF5bG9hZCwgbm9kZUlkcyk7XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHdhaXRGb3JCdWZmZXJFbXB0eSA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXJTaXplID0gYXdhaXQgdGhpcy53YWl0Rm9yQXJyYXlCdWZmZXJTaXplKCk7XG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZlclNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh3YWl0Rm9yQnVmZmVyRW1wdHkpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5maWxlU2VuZGluZ01hcC5kZWxldGUocGF0aE5hbWUpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmVQLCByZWplY3RQKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlID0gcmVzb2x2ZVA7XG4gICAgICAgICAgICByZWplY3QgPSByZWplY3RQO1xuICAgICAgICB9KTtcbiAgICAgICAgc3RhcnRTdHJlYW1pbmdGaWxlKCk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGVQZW5kaW5nRmlsZShwYXlsb2FkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoTmFtZSA9IGdldFBhdGhOYW1lKHBheWxvYWQucGF0aCwgcGF5bG9hZC5uYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdOYW1lID0gcGF0aE5hbWUgKyBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTjtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlT2JqZWN0KHBlbmRpbmdOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IFssIHRpbWVvdXRdID0gdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmdldChwYXlsb2FkLmFuc3dlcmVySWQpPy5nZXQocGF0aE5hbWUpID8/IFtdO1xuICAgICAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmdldChwYXlsb2FkLmFuc3dlcmVySWQpLmRlbGV0ZShwYXRoTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmdldChwYXlsb2FkLmFuc3dlcmVySWQpPy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuZGVsZXRlKHBheWxvYWQuYW5zd2VyZXJJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5zaXplID09PSAwICYmIHRoaXMub2JqZWN0UmVxdWVzdHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVN5bmMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzeW5jVHJhbnNhY3Rpb25zKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25zID0gYXdhaXQgdGhpcy50cmFuc2FjdGlvblNlcnZpY2UuZ2V0VHJhbnNhY3Rpb25zKHRoaXMubGFiZWwsIHRoaXMubGFzdFRyYW5zYWN0aW9uSWQpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFuc2FjdGlvbiBvZiB0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVRyYW5zYWN0aW9uUGF5bG9hZCh0cmFuc2FjdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIFRoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCBvdXIgbG9jYWwgdHJhbnNhY3Rpb25zLCBsZXRzIGNsZWFyIHRoZSBPYmplY3RTdG9yZSBhbmQgcmVzeW5jXG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNES0ludGVybmFsRXJyb3IgJiYgZS5jb2RlID09PSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5kZWxldGVPYmplY3QoQ09OVEVOVF9PQkpFQ1RfU1RPUkVfTEFTVF9UUkFOU0FDVElPTl9PQkpFQ1RfTkFNRSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGFzdFRyYW5zYWN0aW9uSWQ7XG4gICAgICAgICAgICAgICAgLy8gTGlzdCBhbGwgb2JqZWN0cyBpbiB0aGUgT2JqZWN0U3RvcmUgYW5kIHRyeSB0byBkZWxldGUgdGhlbVxuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBhbnkgZXJyb3JzIGFuZCBqdXN0IHJldHJ5IHN5bmNpbmcgdHJhbnNhY3Rpb25zXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IubGlzdCgnLycsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvYmplY3Qgb2Ygb2JqZWN0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5kZWxldGVPYmplY3Qob2JqZWN0LnBhdGhOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc3luY1RyYW5zYWN0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzeW5jUGVuZGluZ0ZpbGVzKCkge1xuICAgICAgICBjb25zdCByZXBvc2l0b3J5ID0gYXdhaXQgdGhpcy5saXN0KCcvJywgeyByZWN1cnNpdmU6IHRydWUsIGluY2x1ZGVTeW5jaW5nRmlsZXM6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUZpbGVSZXF1ZXN0cyA9IGFzeW5jIChyZXBvc2l0b3J5KSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHJlcG9zaXRvcnkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkua2luZCA9PT0gT2JqZWN0S2luZC5Gb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmVudHJpZXMgJiYgZW50cnkuZW50cmllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBjcmVhdGVGaWxlUmVxdWVzdHMoZW50cnkuZW50cmllcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5zdGF0dXMgIT09IEZpbGVTdGF0dXMuUGVuZGluZykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IHRoaXMuZ2V0KGVudHJ5LnBhdGhOYW1lICsgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlbmRpbmdGaWxlID0gSlNPTi5wYXJzZShhd2FpdCBmaWxlLnRleHQoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGVudHJ5Lm5hbWUucmVwbGFjZShDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiwgJycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkVHlwZTogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlLlJlcXVlc3QsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRBY3Rpb24uUmVxdWVzdEZpbGUsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZW50cnkucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tzdW06IHBlbmRpbmdGaWxlLmNoZWNrc3VtLFxuICAgICAgICAgICAgICAgICAgICBza2lwRW5jcnlwdGlvbjogcGVuZGluZ0ZpbGUuc2tpcEVuY3J5cHRpb24sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoTmFtZSA9IGdldFBhdGhOYW1lKGVudHJ5LnBhdGgsIG5hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0UmVxdWVzdHMuc2V0KHBhdGhOYW1lLCByZXF1ZXN0UGF5bG9hZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA7XG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IGNyZWF0ZUZpbGVSZXF1ZXN0cyhyZXBvc2l0b3J5KTtcbiAgICAgICAgaWYgKHRoaXMub2JqZWN0UmVxdWVzdHMuc2l6ZSA9PT0gMCAmJiB0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVN5bmMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjcmVhdGVQZW5kaW5nRmlsZVdyaXRlKG5hbWUsIHBhdGgsIHBlbmRpbmdGaWxlKSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHBlbmRpbmdGaWxlKV0pXSwgYCR7bmFtZX0ke0NPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OfWAsIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLndyaXRlRmlsZShmaWxlLCBwYXRoKTtcbiAgICB9XG4gICAgYXN5bmMgY2hlY2tFeGlzdGluZ1BlbmRpbmdGaWxlQ29udGVudChuYW1lLCBwYXRoLCBleHBlY3RlZENoZWNrc3VtKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoTmFtZSA9IGdldFBhdGhOYW1lKHBhdGgsIG5hbWUpO1xuICAgICAgICAgICAgY29uc3QgcGVuZGluZ1BhdGhOYW1lID0gcGF0aE5hbWUgKyBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTjtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmdldChwZW5kaW5nUGF0aE5hbWUpO1xuICAgICAgICAgICAgY29uc3QgeyBjaGVja3N1bSwgc2tpcEVuY3J5cHRpb24gfSA9IEpTT04ucGFyc2UoYXdhaXQgZmlsZS50ZXh0KCkpO1xuICAgICAgICAgICAgY29uc3QgY29udGVudEZpbGUgPSBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmdldChwYXRoTmFtZSwgeyBza2lwRW5jcnlwdGlvbiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRTaXplID0gY29udGVudEZpbGUuc2l6ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzQ2h1bmtpbmdWYWxpZCA9IGNvbnRlbnRTaXplICUgQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUgPT09IDA7XG4gICAgICAgICAgICBpZiAoY2hlY2tzdW0gPT09IGV4cGVjdGVkQ2hlY2tzdW0gJiYgaXNDaHVua2luZ1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGNvbnRlbnQgb2YgdGhlIHBlbmRpbmcgZmlsZSBpcyB0aGUgc2FtZSwgd2UgZG9uJ3QgbmVlZCB0byBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0cnVlLCBNYXRoLnJvdW5kKGNvbnRlbnRTaXplIC8gQ09OVEVOVF9GSUxFX0NIVU5LX1NJWkUpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjb250ZW50IG9mIHRoZSBwZW5kaW5nIGZpbGUgaXMgZGlmZmVyZW50LCB3ZSBkZWxldGUgdGhlIGFueSBleGlzdGluZyBjb250ZW50IGZpbGVcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmRlbGV0ZU9iamVjdChwYXRoTmFtZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBbZmFsc2UsIDBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE9yUmVzZXRQZW5kaW5nRmlsZVRpbWVvdXQobm9kZUlkLCBwYXRoTmFtZSkge1xuICAgICAgICBjb25zdCBbXywgdGltZW91dF0gPSB0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuZ2V0KG5vZGVJZCk/LmdldChwYXRoTmFtZSkgPz8gW107XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ0EtMjI3MiAtIFRoaXMgdGltZW91dCBzaG91bGQgYmUgcmVzZXQgZXZlcnkgdGltZSB3ZSByZWNlaXZlIGEgbmV3IGNodW5rXG4gICAgICAgIC8vIE90aGVyd2lzZSBmb3IgbGFyZ2UgZmlsZSBpdCB3aWxsIGZpcmUgZXZlbiB0aG91Z2ggd2UgYXJlIHJlY2VpdmluZyBkYXRhXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtwYXlsb2FkLCB0aW1lb3V0XSA9IHRoaXMucGVuZGluZ0ZpbGVzU3luY2luZy5nZXQobm9kZUlkKS5nZXQocGF0aE5hbWUpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRmlsZVJlcXVlc3RQYXlsb2FkKHBheWxvYWQsIHRpbWVvdXQpO1xuICAgICAgICB9LCBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX1JFVFJZX0RFTEFZKTtcbiAgICB9XG4gICAgYXN5bmMgc2VuZEZpbGVSZXF1ZXN0UGF5bG9hZChwYXlsb2FkLCB0aW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgcGF5bG9hZC5hY3Rpb24gPSBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5SZXF1ZXN0RmlsZTtcbiAgICAgICAgdGhpcy5vYmplY3RSZXF1ZXN0cy5zZXQoZ2V0UGF0aE5hbWUocGF5bG9hZC5wYXRoLCBwYXlsb2FkLm5hbWUpLCBwYXlsb2FkKTtcbiAgICAgICAgdGhpcy5zZW5kKHBheWxvYWQpO1xuICAgIH1cbiAgICBzZXRQZW5kaW5nRmlsZVN5bmNpbmdQYXlsb2FkKHBheWxvYWQsIHBhdGhOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5zeW5jQ29udGVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmhhcyhwYXlsb2FkLmFuc3dlcmVySWQpKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdGaWxlc1N5bmNpbmcuc2V0KHBheWxvYWQuYW5zd2VyZXJJZCwgbmV3IE1hcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbb2JqZWN0UmVxdWVzdFBheWxvYWRdID0gdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmdldChwYXlsb2FkLmFuc3dlcmVySWQpLmdldChwYXRoTmFtZSkgPz8gW3tcbiAgICAgICAgICAgICAgICBwYXlsb2FkVHlwZTogSW50ZXJuYWxPYmplY3RTdG9yZVBheWxvYWRUeXBlLlJlcXVlc3QsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbi5SZXF1ZXN0RmlsZSxcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICB0eXBlOiBwYXlsb2FkLnR5cGUsXG4gICAgICAgICAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLFxuICAgICAgICAgICAgICAgIHBhdGg6IHBheWxvYWQucGF0aCxcbiAgICAgICAgICAgICAgICBza2lwRW5jcnlwdGlvbjogcGF5bG9hZC5za2lwRW5jcnlwdGlvbixcbiAgICAgICAgICAgICAgICBjaGVja3N1bTogcGF5bG9hZC5jaGVja3N1bSxcbiAgICAgICAgICAgICAgICBhbnN3ZXJlcklkOiBwYXlsb2FkLmFuc3dlcmVySWQsXG4gICAgICAgICAgICB9XTtcbiAgICAgICAgdGhpcy5wZW5kaW5nRmlsZXNTeW5jaW5nLmdldChwYXlsb2FkLmFuc3dlcmVySWQpLnNldChwYXRoTmFtZSwgW29iamVjdFJlcXVlc3RQYXlsb2FkLCB0aGlzLmdldE9yUmVzZXRQZW5kaW5nRmlsZVRpbWVvdXQocGF5bG9hZC5hbnN3ZXJlcklkLCBwYXRoTmFtZSldKTtcbiAgICB9XG4gICAgYXN5bmMgd3JpdGVGaWxlKGZpbGUsIHBhdGgsIG9wdGlvbnMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci53cml0ZUZpbGUoZmlsZSwgcGF0aCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZU9iamVjdChwYXRoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3QgPSBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmRlbGV0ZU9iamVjdChwYXRoKTtcbiAgICAgICAgICAgIGlmICghcGF0aC5lbmRzV2l0aChDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTikpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmRlbGV0ZU9iamVjdChwYXRoICsgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5kZWxldGVPYmplY3QocGF0aCArIENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBtb3ZlT2JqZWN0KHBhdGgsIG5ld1BhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9iamVjdCA9IGF3YWl0IHRoaXMub2JqZWN0U3RvcmVDb25uZWN0b3IubW92ZU9iamVjdChwYXRoLCBuZXdQYXRoKTtcbiAgICAgICAgICAgIGlmICghcGF0aC5lbmRzV2l0aChDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTikpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLm1vdmVPYmplY3QocGF0aCArIENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OLCBuZXdQYXRoICsgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfUEVORElOR19FWFRFTlNJT04pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5vYmplY3RTdG9yZUNvbm5lY3Rvci5tb3ZlT2JqZWN0KHBhdGggKyBDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiwgbmV3UGF0aCArIENPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfRVhURU5TSU9OKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kU3RhdHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlU3RhdHMpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVib3VuY2VTdGF0cyA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZGVib3VuY2VTdGF0cztcbiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2UgPSBhd2FpdCB0aGlzLm9iamVjdFN0b3JlQ29ubmVjdG9yLmNhbGN1bGF0ZVNpemUoJy8nKTtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWM/LnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuT2JqZWN0U3RvcmVTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZW50OiB0aGlzLm1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IHRoaXMubWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzU2VudDogdGhpcy5ieXRlc1NlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkOiB0aGlzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXM6IHRoaXMud3JpdGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHM6IHRoaXMucmVhZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHRzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN5bmNDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZ1N0b3JhZ2UoTG9nZ2luZ1NlcnZpY2VzLk9iamVjdFN0b3JhZ2UsIGBjY2Mke3RoaXMuY2x1c3RlcklkfWNjYyR7dGhpcy5sYWJlbH1gLCBzdG9yYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgQ09OVEVOVF9PQkpFQ1RfU1RPUkVfU1RBVFNfREVCT1VOQ0UpO1xuICAgIH1cbiAgICBhc3luYyBzeW5jZWRGaWxlRXhpc3RzKHBhdGgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0KHBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBkZWxldGVGaWxlQ2h1bmtzKHBhdGhOYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5maWxlQ2h1bmtzLmhhcyhwYXRoTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaHVua3MgPSB0aGlzLmZpbGVDaHVua3MuZ2V0KHBhdGhOYW1lKTtcbiAgICAgICAgaWYgKGNodW5rcy5zdHJlYW0pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2h1bmtzLnN0cmVhbS5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbG9zaW5nIHdyaXRhYmxlIHN0cmVhbScsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlsZUNodW5rcy5kZWxldGUocGF0aE5hbWUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1lZGlhU3RyZWFtUHJpb3JpdHkgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbiB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL01lZGlhU3Vic2NyaXB0aW9uRXZlbnQnO1xuaW1wb3J0IHsgQmFzZU1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZU1lZGlhU3RyZWFtJztcbmltcG9ydCB7IGNyZWF0ZVNpbmdsZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIE91dGdvaW5nTWVkaWFTdHJlYW0gZXh0ZW5kcyBCYXNlTWVkaWFTdHJlYW0ge1xuICAgIHJlbW90ZUlkO1xuICAgIHBhcmFtcztcbiAgICB0b3BpYztcbiAgICB1bnJlZ2lzdGVyUHVibGlzaGVyTGlzdGVuZXIgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgIGNvbnN0cnVjdG9yKG93bmVyLCBsYWJlbCwgbWVkaWFTdHJlYW0sIHJlbW90ZUlkLCBwYXJhbXMpIHtcbiAgICAgICAgc3VwZXIob3duZXIsIGxhYmVsLCBtZWRpYVN0cmVhbSk7XG4gICAgICAgIHRoaXMucmVtb3RlSWQgPSByZW1vdGVJZDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlVHJhY2soJ2F1ZGlvJyk7XG4gICAgICAgIHRoaXMucmVtb3ZlVHJhY2soJ3ZpZGVvJyk7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgYWRkVHJhY2sodHJhY2spIHtcbiAgICAgICAgaWYgKCF0aGlzLnRvcGljKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk91dGdvaW5nTWVkaWFTdHJlYW1Ob1RvcGljLCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5BZGQsXG4gICAgICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICAgICAgc3RyZWFtOiB0aGlzLm1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiBNZWRpYVN0cmVhbVByaW9yaXR5LkRlZmF1bHQsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB0aGlzLmdldEludGVybmFsVHJhY2tQYXJhbXModHJhY2sua2luZCwgdGhpcy5wYXJhbXMpLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlVHJhY2sodHJhY2tLaW5kKSB7XG4gICAgICAgIGNvbnN0IHRyYWNrID0gdGhpcy5nZXRUcmFjayh0cmFja0tpbmQpO1xuICAgICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50b3BpYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50b3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5SZW1vdmUsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRoaXMubWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYWNrO1xuICAgIH1cbiAgICBzZXRQcmlvcml0eShwcmlvcml0eSkge1xuICAgICAgICBpZiAoIXRoaXMudG9waWMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT3V0Z29pbmdNZWRpYVN0cmVhbU5vVG9waWMsIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlSWQ6IHRoaXMucmVtb3RlSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMub3duZXIuZ2V0SWQoKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uLlVwZGF0ZSxcbiAgICAgICAgICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgICAgICAgICBzdHJlYW06IHRoaXMubWVkaWFTdHJlYW0sXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoeyB0cmFja0tpbmRzLCBwYXJhbXMgfSwgcHJpb3JpdHkpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRvcGljKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk91dGdvaW5nTWVkaWFTdHJlYW1Ob1RvcGljLCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiB0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpKSB7XG4gICAgICAgICAgICBpZiAodHJhY2tLaW5kcy5pbmNsdWRlcyh0cmFjay5raW5kKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uQWRkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRoaXMubWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogcHJpb3JpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHRoaXMuZ2V0SW50ZXJuYWxUcmFja1BhcmFtcyh0cmFjay5raW5kLCBwYXJhbXMpLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKHsgcGFyYW1zIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRvcGljKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk91dGdvaW5nTWVkaWFTdHJlYW1Ob1RvcGljLCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUlkOiB0aGlzLnJlbW90ZUlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiB0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpKSB7XG4gICAgICAgICAgICB0aGlzLnRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uLlVwZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0aGlzLm1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHRoaXMuZ2V0SW50ZXJuYWxUcmFja1BhcmFtcyh0cmFjay5raW5kLCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoeyB0cmFja0tpbmRzIH0pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRvcGljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiB0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpKSB7XG4gICAgICAgICAgICBpZiAodHJhY2tLaW5kcy5pbmNsdWRlcyh0cmFjay5raW5kKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogTWVkaWFTdWJzY3JpcHRpb25BY3Rpb24uUmVtb3ZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0aGlzLm1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICA7XG4gICAgfVxuICAgIHJlZ2lzdGVyUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICB0aGlzLnRvcGljID0gcHVibGlzaGVyO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICBpZiAocHVibGlzaGVyID09PSB0aGlzLnRvcGljKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50b3BpYztcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlclB1Ymxpc2hlckxpc3RlbmVyLnB1Ymxpc2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblVucmVnaXN0ZXJQdWJsaXNoZXIoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5yZWdpc3RlclB1Ymxpc2hlckxpc3RlbmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIGdldFRyYWNrKGtpbmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkuZmluZCgodHJhY2spID0+IHRyYWNrLmtpbmQgPT09IGtpbmQpIHx8IG51bGw7XG4gICAgfVxuICAgIGdldEludGVybmFsVHJhY2tQYXJhbXModHJhY2tLaW5kLCBwYXJhbXMpIHtcbiAgICAgICAgbGV0IHRyYWNrUGFyYW1zO1xuICAgICAgICBpZiAodHJhY2tLaW5kID09PSAndmlkZW8nICYmIHBhcmFtcz8udmlkZW8gJiYgdHlwZW9mIHBhcmFtcy52aWRlbyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0cmFja1BhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBraW5kOiAndmlkZW8nLFxuICAgICAgICAgICAgICAgIC4uLnBhcmFtcy52aWRlbyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cmFja1BhcmFtcy5yZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNrS2luZCA9PT0gJ2F1ZGlvJyAmJiBwYXJhbXM/LmF1ZGlvICYmIHR5cGVvZiBwYXJhbXMuYXVkaW8gIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdHJhY2tQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAga2luZDogJ2F1ZGlvJyxcbiAgICAgICAgICAgICAgICAuLi5wYXJhbXMuYXVkaW8sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFja1BhcmFtcztcbiAgICB9XG4gICAgZ2V0UmVzb2x1dGlvbigpIHtcbiAgICAgICAgbGV0IHJlc29sdXRpb24gPSB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcbiAgICAgICAgY29uc3QgdmlkZW9UcmFja3MgPSB0aGlzLm1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7XG4gICAgICAgIGlmICh2aWRlb1RyYWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHZpZGVvVHJhY2tzWzBdLmdldFNldHRpbmdzKCk7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2lkdGggJiYgc2V0dGluZ3MuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNldHRpbmdzLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHNldHRpbmdzLmhlaWdodCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHV0aW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTREtDbGllbnRFcnJvciwgU0RLQ2xpZW50RXJyb3JDb2RlcyB9IGZyb20gJ3B1YmxpYy9lcnJvcnMvU0RLQ2xpZW50RXJyb3InO1xuaW1wb3J0IHsgQ09OVEVOVF9QVUJTVUJfVE9QSUNfU1RBVFNfREVCT1VOQ0UgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzLCBMb2dnaW5nU2VydmljZXMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgeyBCYXNlRGF0YVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L0Jhc2VEYXRhU3RyZWFtJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgUHViU3ViVG9waWMgZXh0ZW5kcyBCYXNlRGF0YVN0cmVhbSB7XG4gICAgbG9jYWxOb2RlO1xuICAgIGNsdXN0ZXJJZDtcbiAgICB1bnN1YnNjcmliZUhhbmRsZXIgPSBuZXcgTWFwKCk7XG4gICAgZGVib3VuY2VTdGF0cztcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbE5vZGUsIGxhYmVsLCBjbHVzdGVySWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlB1YlN1YlRvcGljTmFtZU5vdFN0cmluZywgJ0Nhbm5vdCBjcmVhdGUgUHViU3ViU3RyZWFtOiBMYWJlbCBtdXN0IGJlIGEgc3RyaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobG9jYWxOb2RlLCBsYWJlbCk7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLmNsdXN0ZXJJZCA9IGNsdXN0ZXJJZDtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIGdldENvbnRlbnRUeXBlKCkge1xuICAgICAgICByZXR1cm4gQ29udGVudFR5cGUuUHViU3ViO1xuICAgIH1cbiAgICAvLyBUT0RPIC0gdGVzdCB3aXRoIHNldHRpbmdzIG5vZGVJZHNcbiAgICBwdWJsaXNoKGNvbnRlbnQsIG5vZGVJZHMpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuUHViU3ViLCAnUHViU3ViVG9waWMgcHVibGlzaCcsIHRoaXMubG9jYWxOb2RlLmdldElkKCksIGNvbnRlbnQsIG5vZGVJZHMpO1xuICAgICAgICBsb2dnZXIubG9nU2VydmljZUV2ZW50KExvZ2dpbmdTZXJ2aWNlcy5QdWJTdWIsIHtcbiAgICAgICAgICAgIHR5cGU6ICdwdWJsaXNoJyxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgcmVtb3RlSWRzOiBub2RlSWRzID8/IFtdLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnQgaW5zdGFuY2VvZiBGaWxlID8gQ29udGVudFR5cGUuRmlsZSA6IENvbnRlbnRUeXBlLkRhdGEsXG4gICAgICAgICAgICBzaXplOiBjb250ZW50IGluc3RhbmNlb2YgRmlsZSA/IGNvbnRlbnQuc2l6ZSA6IEpTT04uc3RyaW5naWZ5KGNvbnRlbnQpLmxlbmd0aCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgICAgIHRoaXMuc2VuZChjb250ZW50LCBub2RlSWRzKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGNvbnRlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZUhhbmRsZXIuaGFzKGNvbnRlbnRUeXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUHViU3ViVG9waWNBbHJlYWR5U3Vic2NyaWJlZCwgJ0Nhbm5vdCBzdWJzY3JpYmUgdG8gUHViU3ViVG9waWM6IEFscmVhZHkgc3Vic2NyaWJlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyLnNldChjb250ZW50VHlwZSwgdGhpcy5vbk1lc3NhZ2UoKG5vZGVJZCwgY29udGVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlID09PSAnZGF0YScgJiYgY29udGVudCBpbnN0YW5jZW9mIEZpbGUgfHwgY29udGVudFR5cGUgPT09ICdmaWxlJyAmJiAhKGNvbnRlbnQgaW5zdGFuY2VvZiBGaWxlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlB1YlN1YiwgJ1B1YlN1YlRvcGljIG9uTWVzc2FnZScsIHRoaXMubG9jYWxOb2RlLmdldElkKCksIG5vZGVJZCwgY29udGVudCk7XG4gICAgICAgICAgICBsb2dnZXIubG9nU2VydmljZUV2ZW50KExvZ2dpbmdTZXJ2aWNlcy5QdWJTdWIsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICByZW1vdGVJZDogbm9kZUlkLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgICAgIHNpemU6IGNvbnRlbnQgaW5zdGFuY2VvZiBGaWxlID8gY29udGVudC5zaXplIDogSlNPTi5zdHJpbmdpZnkoY29udGVudCkubGVuZ3RoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICAgICAgY2FsbGJhY2sobm9kZUlkLCBjb250ZW50KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZShjb250ZW50VHlwZSkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlci5nZXQoY29udGVudFR5cGUpPy4oKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXIuZGVsZXRlKGNvbnRlbnRUeXBlKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXIuZm9yRWFjaCgodW5zdWJzY3JpYmUpID0+IHVuc3Vic2NyaWJlKCkpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVN0YXRzKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuZGVib3VuY2VTdGF0cztcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYz8ucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlUHViU3ViVG9waWMsXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2VuZFN0YXRzKCkge1xuICAgICAgICBpZiAodGhpcy5kZWJvdW5jZVN0YXRzKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVN0YXRzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlYm91bmNlU3RhdHMgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWM/LnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuUHViU3ViVG9waWNTdGF0cyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZW50OiB0aGlzLm1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzUmVjZWl2ZWQ6IHRoaXMubWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzU2VudDogdGhpcy5ieXRlc1NlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1JlY2VpdmVkOiB0aGlzLmJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZXM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdHM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnM6IDAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBDT05URU5UX1BVQlNVQl9UT1BJQ19TVEFUU19ERUJPVU5DRSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTWVkaWFTdHJlYW1Qcmlvcml0eSwgaXNWYWxpZE1lZGlhU3Vic2NyaXB0aW9uUGFyYW1zIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTREtDbGllbnRFcnJvciwgU0RLQ2xpZW50RXJyb3JDb2RlcyB9IGZyb20gJ3B1YmxpYy9lcnJvcnMvU0RLQ2xpZW50RXJyb3InO1xuaW1wb3J0IHsgQ09OVEVOVF9VUERBVEVfREVCT1VOQ0UgfSBmcm9tICdjb25zdGFudHMvQ29udGVudCc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vTWVkaWFTdWJzY3JpcHRpb25FdmVudCc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscywgTG9nZ2luZ1NlcnZpY2VzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgQmFzZU1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvQmFzZU1lZGlhU3RyZWFtJztcbmltcG9ydCB7IE91dGdvaW5nTWVkaWFTdHJlYW0gfSBmcm9tICdtb2RlbHMvQ29udGVudC9PdXRnb2luZ01lZGlhU3RyZWFtJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgeyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJ3V0aWxzL09ic2VydmVyL09ic2VydmVyJztcbmV4cG9ydCBjbGFzcyBSZW1vdGVNZWRpYVN0cmVhbSBleHRlbmRzIEJhc2VNZWRpYVN0cmVhbSB7XG4gICAgbG9jYWxOb2RlO1xuICAgIGludGVybmFsSWQ7XG4gICAgYXZhaWxhYmxlVHJhY2tLaW5kcztcbiAgICBjbHVzdGVySWQ7XG4gICAgdW5zdWJzY3JpYmVIYW5kbGVyO1xuICAgIHJlc2l6ZUhhbmRsZXI7XG4gICAgdXBkYXRlRGVib3VuY2U7XG4gICAgb3V0Z29pbmdTdHJlYW1zID0gbmV3IE1hcCgpO1xuICAgIHJlbmRlckVsZW1lbnQ7XG4gICAgc3Vic2NyaWJlZFRyYWNrcyA9IG5ldyBTZXQoKTtcbiAgICBwcm92aWRlcklkO1xuICAgIHByb3ZpZGVyTGlzdGVuZXIgPSBjcmVhdGVPYnNlcnZlcigpO1xuICAgIHRyYWNrRW5kZWRMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3RydWN0b3IobG9jYWxOb2RlLCBvd25lciwgbGFiZWwsIGludGVybmFsSWQsIGF2YWlsYWJsZVRyYWNrS2luZHMsIGNsdXN0ZXJJZCkge1xuICAgICAgICBzdXBlcihvd25lciwgbGFiZWwsIG5ldyBNZWRpYVN0cmVhbSgpKTtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUgPSBsb2NhbE5vZGU7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxJZCA9IGludGVybmFsSWQ7XG4gICAgICAgIHRoaXMuYXZhaWxhYmxlVHJhY2tLaW5kcyA9IGF2YWlsYWJsZVRyYWNrS2luZHM7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0aGlzLnNldHVwVHJhY2tFbmRlZExpc3RlbmVycyh0cmFjaykpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAodGhpcy5vdXRnb2luZ1N0cmVhbXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmZvckVhY2goKG91dGdvaW5nU3RyZWFtKSA9PiB7XG4gICAgICAgICAgICAgICAgb3V0Z29pbmdTdHJlYW0udW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpO1xuICAgICAgICAgICAgICAgIG91dGdvaW5nU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vdXRnb2luZ1N0cmVhbXMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuZm9yRWFjaCgocmVtb3ZlTGlzdGVuZXIpID0+IHJlbW92ZUxpc3RlbmVyKCkpO1xuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKSA9PiB0aGlzLm1lZGlhU3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKSk7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZURlYm91bmNlKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVEZWJvdW5jZSk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy51cGRhdGVEZWJvdW5jZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXI/LigpO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gc3Vic2NyaWJlci5zdWJzY3JpYmUoKHsgY29udGVudCB9KSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbnRlbnQuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBNZWRpYVN1YnNjcmlwdGlvbkFjdGlvbi5SZW1vdGVBZGQ6XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1YnNjcmlwdGlvbiwgJ1JlY2VpdmVkIHRyYWNrJywgdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSwgdGhpcy5wcm92aWRlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQuc3RyZWFtLmlkICE9PSB0aGlzLmludGVybmFsSWQgfHwgY29udGVudC5wcm92aWRlcklkICE9PSB0aGlzLnByb3ZpZGVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKGNvbnRlbnQudHJhY2sua2luZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVkaWFTdHJlYW0uYWRkVHJhY2soY29udGVudC50cmFjayk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2Rlc3RpbmF0aW9uSWQsIG91dGdvaW5nU3RyZWFtXSBvZiB0aGlzLm91dGdvaW5nU3RyZWFtcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0Z29pbmdTdHJlYW0uYWRkVHJhY2soY29udGVudC50cmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGdvaW5nU3RyZWFtLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nU3RyZWFtcy5kZWxldGUoZGVzdGluYXRpb25JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFRyYWNrRW5kZWRMaXN0ZW5lcnMoY29udGVudC50cmFjayk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBSZW5kZXJFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZWRpYVN0cmVhbS5hY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbmRlckVsZW1lbnQ/LnBsYXkoKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucmVuZGVyRWxlbWVudD8ubG9hZCgpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFJlc2l6ZUhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIE1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uLlJlbW90ZVJlbW92ZToge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5zdHJlYW0uaWQgIT09IHRoaXMuaW50ZXJuYWxJZCB8fCBjb250ZW50LnByb3ZpZGVySWQgIT09IHRoaXMucHJvdmlkZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlVHJhY2soY29udGVudC50cmFjay5raW5kKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyRWxlbWVudCAmJiBjb250ZW50LnRyYWNrLmtpbmQgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplSGFuZGxlcj8uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tZWRpYVN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFbGVtZW50LmxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRWxlbWVudC5zcmNPYmplY3QgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTdWJzY3JpYmVyKCkge1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcj8uKCk7XG4gICAgICAgIHRoaXMudHJhY2tFbmRlZExpc3RlbmVycy5mb3JFYWNoKChyZW1vdmVMaXN0ZW5lcikgPT4gcmVtb3ZlTGlzdGVuZXIoKSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnVuc3Vic2NyaWJlSGFuZGxlcjtcbiAgICB9XG4gICAgZ2V0SW50ZXJuYWxTdHJlYW1JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxJZDtcbiAgICB9XG4gICAgc2V0SW50ZXJuYWxJZChpbnRlcm5hbElkKSB7XG4gICAgICAgIHRoaXMuaW50ZXJuYWxJZCA9IGludGVybmFsSWQ7XG4gICAgfVxuICAgIGdldEF2YWlsYWJsZVRyYWNrS2luZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF2YWlsYWJsZVRyYWNrS2luZHM7XG4gICAgfVxuICAgIGhhc1RyYWNrcyh0cmFja0tpbmRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2tLaW5kIG9mIHRyYWNrS2luZHMgfHwgdGhpcy5hdmFpbGFibGVUcmFja0tpbmRzKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkuZmluZCgodHJhY2spID0+IHRyYWNrLmtpbmQgPT09IHRyYWNrS2luZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGdldFJlc29sdXRpb24oKSB7XG4gICAgICAgIGxldCByZXNvbHV0aW9uID0geyB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XG4gICAgICAgIGNvbnN0IHZpZGVvVHJhY2tzID0gdGhpcy5tZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpO1xuICAgICAgICBpZiAodmlkZW9UcmFja3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB2aWRlb1RyYWNrc1swXS5nZXRTZXR0aW5ncygpO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLndpZHRoICYmIHNldHRpbmdzLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBzZXR0aW5ncy53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzZXR0aW5ncy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICB9XG4gICAgaXNTdWJzY3JpYmVkKHRyYWNrS2luZHMpIHtcbiAgICAgICAgZm9yIChjb25zdCB0cmFja0tpbmQgb2YgdHJhY2tLaW5kcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmliZWRUcmFja3MuaGFzKHRyYWNrS2luZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGdldFNoYXJlYWJsZVN0cmVhbShkZXN0aW5hdGlvbklkLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLm91dGdvaW5nU3RyZWFtcy5oYXMoZGVzdGluYXRpb25JZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dGdvaW5nU3RyZWFtID0gbmV3IE91dGdvaW5nTWVkaWFTdHJlYW0odGhpcy5vd25lciwgdGhpcy5sYWJlbCwgdGhpcy5tZWRpYVN0cmVhbSwgZGVzdGluYXRpb25JZCwgcGFyYW1zKTtcbiAgICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb3V0Z29pbmdTdHJlYW0ub25VbnJlZ2lzdGVyUHVibGlzaGVyKCgpID0+IHtcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmdldChkZXN0aW5hdGlvbklkKT8uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3V0Z29pbmdTdHJlYW1zLmRlbGV0ZShkZXN0aW5hdGlvbklkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vdXRnb2luZ1N0cmVhbXMuc2V0KGRlc3RpbmF0aW9uSWQsIG91dGdvaW5nU3RyZWFtKTtcbiAgICAgICAgICAgIG91dGdvaW5nU3RyZWFtLnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHRoaXMuc3lzdGVtVG9waWMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm91dGdvaW5nU3RyZWFtcy5nZXQoZGVzdGluYXRpb25JZCk7XG4gICAgfVxuICAgIGdldFNoYXJlYWJsZVN0cmVhbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZWRpYVN0cmVhbS5pZDtcbiAgICB9XG4gICAgLy8gVE9ETyAtIE5lZWQgdG8gaGFuZGxlIHRoaXNcbiAgICBnZXRQcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIE1lZGlhU3RyZWFtUHJpb3JpdHkuRGVmYXVsdDtcbiAgICB9XG4gICAgZ2V0U3Vic2NyaWJlZFRyYWNrcygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zdWJzY3JpYmVkVHJhY2tzKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHBhcmFtcykge1xuICAgICAgICBsZXQgdHJhY2tLaW5kcyA9IFtdO1xuICAgICAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICAgICAgdHJhY2tLaW5kcyA9IHRoaXMuZ2V0QXZhaWxhYmxlVHJhY2tLaW5kcygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMudmlkZW8gPT09ICdvYmplY3QnICYmICEocGFyYW1zLnZpZGVvLnJlbmRlckVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KSAmJiB0aGlzLnJlbmRlckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMudmlkZW8gPSB7IHJlbmRlckVsZW1lbnQ6IHRoaXMucmVuZGVyRWxlbWVudCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpc1ZhbGlkTWVkaWFTdWJzY3JpcHRpb25QYXJhbXMocGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUmVtb3RlTWVkaWFTdHJlYW1JbnZhbGlkU3Vic2NyaXB0aW9uUGFyYW1zLCAnSW52YWxpZCBwYXJhbXMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJhbXMudmlkZW8pIHtcbiAgICAgICAgICAgICAgICB0cmFja0tpbmRzLnB1c2goJ3ZpZGVvJyk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMudmlkZW8gIT09ICdib29sZWFuJyAmJiBwYXJhbXMudmlkZW8ucmVuZGVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnQgPSBwYXJhbXMudmlkZW8ucmVuZGVyRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbXMudmlkZW8ubWF4UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnZpZGVvLm1heFJlc29sdXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMucmVuZGVyRWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMucmVuZGVyRWxlbWVudC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXMudmlkZW8ucmVuZGVyRWxlbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFyYW1zLmF1ZGlvKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kcy5wdXNoKCdhdWRpbycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzU3Vic2NyaWJlZCh0cmFja0tpbmRzKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyYWNrS2luZHMuZm9yRWFjaCgodHJhY2tLaW5kKSA9PiB0aGlzLnN1YnNjcmliZWRUcmFja3MuYWRkKHRyYWNrS2luZCkpO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5TdWJzY3JpYmVNZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kcyxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuTWVkaWFTdHJlYW0sIHtcbiAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgc3RyZWFtSWQ6IHRoaXMuaW50ZXJuYWxJZCxcbiAgICAgICAgICAgIHRyYWNrS2luZHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGUocGFyYW1zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpc1ZhbGlkTWVkaWFTdWJzY3JpcHRpb25QYXJhbXMocGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUmVtb3RlTWVkaWFTdHJlYW1JbnZhbGlkU3Vic2NyaXB0aW9uUGFyYW1zLCAnSW52YWxpZCBwYXJhbXMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51cGRhdGVEZWJvdW5jZSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlRGVib3VuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlRGVib3VuY2UgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnVwZGF0ZURlYm91bmNlO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlVwZGF0ZU1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBDT05URU5UX1VQREFURV9ERUJPVU5DRSk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHRyYWNrS2luZHMpIHtcbiAgICAgICAgaWYgKCF0cmFja0tpbmRzKSB7XG4gICAgICAgICAgICB0cmFja0tpbmRzID0gdGhpcy5nZXRBdmFpbGFibGVUcmFja0tpbmRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2tLaW5kcyA9IEFycmF5LmlzQXJyYXkodHJhY2tLaW5kcykgPyB0cmFja0tpbmRzIDogW3RyYWNrS2luZHNdO1xuICAgICAgICB0cmFja0tpbmRzLmZvckVhY2goKHRyYWNrS2luZCkgPT4gdGhpcy5zdWJzY3JpYmVkVHJhY2tzLmRlbGV0ZSh0cmFja0tpbmQpKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuQ29udGVudCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBDb250ZW50TWVzc2FnZVR5cGUuVW5zdWJzY3JpYmVNZWRpYVN0cmVhbSxcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkOiB0aGlzLm93bmVyLmdldElkKCksXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kcyxcbiAgICAgICAgICAgICAgICByZW1haW5pbmdUcmFja3M6IHRoaXMuc3Vic2NyaWJlZFRyYWNrcy5zaXplLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uUHJvdmlkZXJDaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJMaXN0ZW5lci5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICBnZXRQcm92aWRlcklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcklkO1xuICAgIH1cbiAgICBzZXRQcm92aWRlcklkKHByb3ZpZGVySWQpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJJZCAhPT0gcHJvdmlkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJMaXN0ZW5lci5wdWJsaXNoKHByb3ZpZGVySWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlVHJhY2tFbmRlZExpc3RlbmVyKHRyYWNrS2luZCkge1xuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuZ2V0KHRyYWNrS2luZCk/LigpO1xuICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuZGVsZXRlKHRyYWNrS2luZCk7XG4gICAgfVxuICAgIHJlbW92ZVRyYWNrKHRyYWNrS2luZCkge1xuICAgICAgICBjb25zdCB0cmFjayA9IHRoaXMubWVkaWFTdHJlYW0uZ2V0VHJhY2tzKCkuZmluZCgodHJhY2spID0+IHRyYWNrLmtpbmQgPT09IHRyYWNrS2luZCk7XG4gICAgICAgIGlmICghdHJhY2spIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1lZGlhU3RyZWFtLnJlbW92ZVRyYWNrKHRyYWNrKTtcbiAgICAgICAgdGhpcy5vdXRnb2luZ1N0cmVhbXMuZm9yRWFjaChvdXRnb2luZ1N0cmVhbSA9PiBvdXRnb2luZ1N0cmVhbS5yZW1vdmVUcmFjayh0cmFja0tpbmQpKTtcbiAgICAgICAgdGhpcy50cmFja0VuZGVkTGlzdGVuZXJzLmdldCh0cmFja0tpbmQpPy4oKTtcbiAgICB9XG4gICAgc2V0dXBSZW5kZXJFbGVtZW50KCkge1xuICAgICAgICBpZiAoIXRoaXMucmVuZGVyRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJFbGVtZW50LnNyY09iamVjdCB8fCB0aGlzLnJlbmRlckVsZW1lbnQuc3JjT2JqZWN0ICE9PSB0aGlzLm1lZGlhU3RyZWFtKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckVsZW1lbnQuc3JjT2JqZWN0ID0gdGhpcy5tZWRpYVN0cmVhbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cFJlc2l6ZUhhbmRsZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJFbGVtZW50IHx8IHRoaXMucmVzaXplSGFuZGxlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgUmVzaXplT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFdpZHRoID0gdGhpcy5yZW5kZXJFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRIZWlnaHQgPSB0aGlzLnJlbmRlckVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGVudHJpZXNbMF0uY29udGVudFJlY3Q7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRXaWR0aCAhPT0gd2lkdGggfHwgY3VycmVudEhlaWdodCAhPT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaWR0aCA9IE1hdGguZmxvb3Iod2lkdGgpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SGVpZ2h0ID0gTWF0aC5mbG9vcihoZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFJlc29sdXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMucmVuZGVyRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXIgPSAoKSA9PiByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlUmVtb3RlVHJhY2tGYWlsdXJlKHRyYWNrKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZWRUcmFja3MgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWJzY3JpYmVkVHJhY2sgb2YgdGhpcy5zdWJzY3JpYmVkVHJhY2tzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKHN1YnNjcmliZWRUcmFjayk7XG4gICAgICAgICAgICByZW1vdmVkVHJhY2tzLnB1c2goc3Vic2NyaWJlZFRyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMucHJvdmlkZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLkNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkOiB0aGlzLmludGVybmFsSWQsXG4gICAgICAgICAgICAgICAgb3duZXJJZDogdGhpcy5vd25lci5nZXRJZCgpLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcbiAgICAgICAgICAgICAgICB0cmFja0tpbmRzOiByZW1vdmVkVHJhY2tzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldHVwVHJhY2tFbmRlZExpc3RlbmVycyh0cmFjaykge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9ICgpID0+IHRoaXMuaGFuZGxlUmVtb3RlVHJhY2tGYWlsdXJlKHRyYWNrKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0cmFjay5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIHRyYWNrLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ211dGUnLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLnRyYWNrRW5kZWRMaXN0ZW5lcnMuZGVsZXRlKHRyYWNrLmtpbmQpO1xuICAgICAgICB9O1xuICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIGNhbGxiYWNrKTtcbiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignbXV0ZScsIGNhbGxiYWNrKTtcbiAgICAgICAgdGhpcy50cmFja0VuZGVkTGlzdGVuZXJzLnNldCh0cmFjay5raW5kLCByZW1vdmVMaXN0ZW5lcik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGVudFR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IFNES0NsaWVudEVycm9yLCBTREtDbGllbnRFcnJvckNvZGVzIH0gZnJvbSAncHVibGljL2Vycm9ycy9TREtDbGllbnRFcnJvcic7XG5pbXBvcnQgeyBDT05URU5UX1ZFQ1RPUl9EQVRBQkFTRV9TVEFUU19ERUJPVU5DRSB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgQ29udGVudE1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0NvbnRlbnQnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5pbXBvcnQgeyBMb2dnaW5nU2VydmljZXMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgeyBCYXNlRGF0YVN0cmVhbSB9IGZyb20gJ21vZGVscy9Db250ZW50L0Jhc2VEYXRhU3RyZWFtJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgVmVjdG9yRGF0YWJhc2UgZXh0ZW5kcyBCYXNlRGF0YVN0cmVhbSB7XG4gICAgbG9jYWxOb2RlO1xuICAgIGNsdXN0ZXJJZDtcbiAgICBkYjtcbiAgICBkZWJvdW5jZVN0YXRzO1xuICAgIHdyaXRlcyA9IDA7XG4gICAgcmVhZHMgPSAwO1xuICAgIGNvbnN0cnVjdG9yKGxvY2FsTm9kZSwgbGFiZWwsIGNsdXN0ZXJJZCwgY29ubmVjdG9yQ29uc3RydWN0b3IpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlZlY3RvckRhdGFiYXNlTmFtZU5vdFN0cmluZywgJ0Nhbm5vdCBjcmVhdGUgVmVjdG9yIERhdGFiYXNlOiBOYW1lIG11c3QgYmUgYSBzdHJpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihsb2NhbE5vZGUsIGxhYmVsKTtcbiAgICAgICAgdGhpcy5sb2NhbE5vZGUgPSBsb2NhbE5vZGU7XG4gICAgICAgIHRoaXMuY2x1c3RlcklkID0gY2x1c3RlcklkO1xuICAgICAgICB0aGlzLmRiID0gbmV3IGNvbm5lY3RvckNvbnN0cnVjdG9yKCk7XG4gICAgICAgIHRoaXMuc2VuZFN0YXRzKCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlU3RhdHMpO1xuICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVN0YXRzO1xuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZVZlY3RvckRhdGFiYXNlLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLlZlY3RvckRhdGFiYXNlO1xuICAgIH1cbiAgICBzZWFyY2godmVjdG9yLCBrLCBtaW5SZWxldmFuY2UsIHN0YXJ0aW5nSW5kZXgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMuZGIuc2VhcmNoKHZlY3RvciwgaywgbWluUmVsZXZhbmNlLCBzdGFydGluZ0luZGV4KTtcbiAgICAgICAgdGhpcy5yZWFkcyArPSAxO1xuICAgICAgICBsb2dnZXIubG9nU2VydmljZUV2ZW50KExvZ2dpbmdTZXJ2aWNlcy5WZWN0b3JEYXRhYmFzZSwge1xuICAgICAgICAgICAgdHlwZTogJ3NlYXJjaCcsXG4gICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG4gICAgaW5zZXJ0KG5hbWUsIGNvbnRlbnQsIGluZGV4LCB2ZWN0b3JzKSB7XG4gICAgICAgIHRoaXMuZGIuaW5zZXJ0KG5hbWUsIGNvbnRlbnQsIGluZGV4LCB2ZWN0b3JzKTtcbiAgICAgICAgdGhpcy53cml0ZXMgKz0gMTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuVmVjdG9yRGF0YWJhc2UsIHtcbiAgICAgICAgICAgIHR5cGU6ICdpbnNlcnQnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBzaXplOiB2ZWN0b3JzLnJlZHVjZSgoYWNjLCB2KSA9PiBhY2MgKyB2Lmxlbmd0aCwgMCksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRTdGF0cygpO1xuICAgIH1cbiAgICByZW1vdmUobmFtZSkge1xuICAgICAgICB0aGlzLmRiLnJlbW92ZShuYW1lKTtcbiAgICAgICAgdGhpcy53cml0ZXMgKz0gMTtcbiAgICAgICAgbG9nZ2VyLmxvZ1NlcnZpY2VFdmVudChMb2dnaW5nU2VydmljZXMuVmVjdG9yRGF0YWJhc2UsIHtcbiAgICAgICAgICAgIHR5cGU6ICdyZW1vdmUnLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kU3RhdHMoKTtcbiAgICB9XG4gICAgc2VuZFN0YXRzKCkge1xuICAgICAgICBpZiAodGhpcy5kZWJvdW5jZVN0YXRzKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVN0YXRzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlYm91bmNlU3RhdHMgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlYm91bmNlU3RhdHM7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy5kYi5nZXRCdWZmZXIoKS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50LFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ29udGVudE1lc3NhZ2VUeXBlLlZlY3RvckRhdGFiYXNlU3RhdHMsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICBzdGF0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZTogc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzU2VudDogdGhpcy5tZXNzYWdlc1NlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc1JlY2VpdmVkOiB0aGlzLm1lc3NhZ2VzUmVjZWl2ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBieXRlc1NlbnQ6IHRoaXMuYnl0ZXNTZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNSZWNlaXZlZDogdGhpcy5ieXRlc1JlY2VpdmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVzOiB0aGlzLndyaXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRzOiB0aGlzLnJlYWRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0czogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuczogMCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsb2dnZXIubG9nU3RvcmFnZShMb2dnaW5nU2VydmljZXMuVmVjdG9yRGF0YWJhc2UsIGBjY2Mke3RoaXMuY2x1c3RlcklkfWNjYyR7dGhpcy5sYWJlbH1gLCBzaXplKTtcbiAgICAgICAgfSwgQ09OVEVOVF9WRUNUT1JfREFUQUJBU0VfU1RBVFNfREVCT1VOQ0UpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IERFVEVDVElPTl9JU1NVRV9USU1FT1VUIH0gZnJvbSAnY29uc3RhbnRzL0RldGVjdGlvbic7XG5pbXBvcnQgeyBERVRFQ1RJT05fQVVESU9fSVNTVUVfUlVMRVMsIERFVEVDVElPTl9DT1JFX0lTU1VFX1JVTEVTLCBERVRFQ1RJT05fUkVDRUlWRVJfSVNTVUVfUlVMRVMsIERFVEVDVElPTl9TRU5ERVJfSVNTVUVfUlVMRVMsIERFVEVDVElPTl9WSURFT19JU1NVRV9SVUxFUyB9IGZyb20gJ2NvbnN0YW50cy9EZXRlY3Rpb25Jc3N1ZVJ1bGVzJztcbmltcG9ydCB7IERFVEVDVElPTl9QUk9CTEVNX1JVTEVTIH0gZnJvbSAnY29uc3RhbnRzL0RldGVjdGlvblByb2JsZW1SdWxlcyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uT3JpZ2luIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IERldGVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9EZXRlY3Rpb24vRGV0ZWN0aW9uJztcbmltcG9ydCB7IFN0YXRzTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N0YXRzL1N0YXRzJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBEZXRlY3Rpb25NYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIGlzc3VlcyA9IFtdO1xuICAgIHN5c3RlbVRvcGljO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3MpIHtcbiAgICAgICAgdGhpcy5jb25maWdzID0gY29uZmlncztcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgIH1cbiAgICBoYW5kbGVTdGF0c1N5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTdGF0c01lc3NhZ2VUeXBlLkxvY2FsUmVwb3J0OlxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0TG9jYWxJc3N1ZXMoZXZlbnQuY29udGVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdHNNZXNzYWdlVHlwZS5TdHJlYW1SZXBvcnQ6XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRlY3RTdHJlYW1Jc3N1ZXMoZXZlbnQuY29udGVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRlY3RQcm9ibGVtcyhpc3N1ZVR5cGUsIG5vZGVJZCwgb3JpZ2luLCBjb3VudCkge1xuICAgICAgICBjb25zdCBydWxlID0gREVURUNUSU9OX1BST0JMRU1fUlVMRVMuZmluZCgocikgPT4gci5pc3N1ZXMuc29tZSgoaSkgPT4gaS50eXBlID09PSBpc3N1ZVR5cGUpKTtcbiAgICAgICAgaWYgKGNvdW50ID49IHJ1bGUuaXNzdWVzLmZpbmQoKGkpID0+IGkudHlwZSA9PT0gaXNzdWVUeXBlKS50aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUHJvYmxlbShydWxlLnR5cGUsIG5vZGVJZCwgb3JpZ2luKTtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gdGhpcy5pc3N1ZXMuZmlsdGVyKChpc3N1ZSkgPT4gIShpc3N1ZS50eXBlID09PSBpc3N1ZVR5cGUgJiYgaXNzdWUubm9kZUlkID09PSBub2RlSWQgJiYgaXNzdWUub3JpZ2luID09PSBvcmlnaW4pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXRlY3RMb2NhbElzc3VlcyhyZXBvcnQpIHtcbiAgICAgICAgREVURUNUSU9OX0NPUkVfSVNTVUVfUlVMRVMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBydWxlLnJlcG9ydE1ldHJpYyhyZXBvcnQpO1xuICAgICAgICAgICAgaWYgKHJ1bGUubWF4VGhyZXNob2xkICYmIHZhbHVlID4gcnVsZS5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZElzc3VlKHJ1bGUudHlwZSwgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydWxlLm1pblRocmVzaG9sZCAmJiB2YWx1ZSA8IHJ1bGUubWluVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJc3N1ZShydWxlLnR5cGUsIHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSwgUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXRlY3RTdHJlYW1Jc3N1ZXMocmVwb3J0KSB7XG4gICAgICAgIGxldCBydWxlcyA9IFtdO1xuICAgICAgICBzd2l0Y2ggKHJlcG9ydC5vcmlnaW4pIHtcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyOlxuICAgICAgICAgICAgICAgIHJ1bGVzID0gREVURUNUSU9OX1NFTkRFUl9JU1NVRV9SVUxFUztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25PcmlnaW4uUmVjZWl2ZXI6XG4gICAgICAgICAgICAgICAgcnVsZXMgPSBERVRFQ1RJT05fUkVDRUlWRVJfSVNTVUVfUlVMRVM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydC52aWRlbykge1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RWaWRlb0lzc3VlcyhyZXBvcnQubm9kZUlkLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHJlcG9ydC52aWRlbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcG9ydC5hdWRpbykge1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RBdWRpb0lzc3VlcyhyZXBvcnQubm9kZUlkLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHJlcG9ydC5hdWRpbyk7XG4gICAgICAgIH1cbiAgICAgICAgcnVsZXMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBydWxlLnJlcG9ydE1ldHJpYyhyZXBvcnQpO1xuICAgICAgICAgICAgaWYgKHJ1bGUubWF4VGhyZXNob2xkICYmIHZhbHVlID4gcnVsZS5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZElzc3VlKHJ1bGUudHlwZSwgcmVwb3J0Lm5vZGVJZCwgUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVsZS5taW5UaHJlc2hvbGQgJiYgdmFsdWUgPCBydWxlLm1pblRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkSXNzdWUocnVsZS50eXBlLCByZXBvcnQubm9kZUlkLCBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXIsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRldGVjdFZpZGVvSXNzdWVzKG5vZGVJZCwgb3JpZ2luLCByZXBvcnQpIHtcbiAgICAgICAgaWYgKHJlcG9ydC5iaXRyYXRlID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgREVURUNUSU9OX1ZJREVPX0lTU1VFX1JVTEVTLmZvckVhY2goKHJ1bGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcnVsZS5yZXBvcnRNZXRyaWMocmVwb3J0KTtcbiAgICAgICAgICAgIGlmIChydWxlLm1heFRocmVzaG9sZCAmJiB2YWx1ZSA+IHJ1bGUubWF4VGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJc3N1ZShydWxlLnR5cGUsIG5vZGVJZCwgb3JpZ2luLCB2YWx1ZSwgJ3ZpZGVvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocnVsZS5taW5UaHJlc2hvbGQgJiYgdmFsdWUgPCBydWxlLm1pblRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkSXNzdWUocnVsZS50eXBlLCBub2RlSWQsIG9yaWdpbiwgdmFsdWUsICd2aWRlbycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGV0ZWN0QXVkaW9Jc3N1ZXMobm9kZUlkLCBvcmlnaW4sIHJlcG9ydCkge1xuICAgICAgICBpZiAocmVwb3J0LmJpdHJhdGUgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBERVRFQ1RJT05fQVVESU9fSVNTVUVfUlVMRVMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBydWxlLnJlcG9ydE1ldHJpYyhyZXBvcnQpO1xuICAgICAgICAgICAgaWYgKHJ1bGUubWF4VGhyZXNob2xkICYmIHZhbHVlID4gcnVsZS5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZElzc3VlKHJ1bGUudHlwZSwgbm9kZUlkLCBvcmlnaW4sIHZhbHVlLCAnYXVkaW8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydWxlLm1pblRocmVzaG9sZCAmJiB2YWx1ZSA8IHJ1bGUubWluVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRJc3N1ZShydWxlLnR5cGUsIG5vZGVJZCwgb3JpZ2luLCB2YWx1ZSwgJ2F1ZGlvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRJc3N1ZSh0eXBlLCBub2RlSWQsIG9yaWdpbiwgdmFsdWUsIGtpbmQpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuRGV0ZWN0aW9uLCBgSXNzdWUgZGV0ZWN0ZWQ6ICR7dHlwZX1gLCB0eXBlLCB2YWx1ZSk7XG4gICAgICAgIGxvZ2dlci5sb2dFdmVudCgnaXNzdWUnLCB7XG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY29uZmlncy5jbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICByZW1vdGVJZDogbm9kZUlkLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IHRoaXMuaXNzdWVzLmZpbHRlcigoaXNzdWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gaXNzdWUudGltZXN0YW1wIDwgREVURUNUSU9OX0lTU1VFX1RJTUVPVVQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlzc3Vlcy5wdXNoKHsgdGltZXN0YW1wOiBEYXRlLm5vdygpLCB0eXBlLCBub2RlSWQ6IG5vZGVJZCwgb3JpZ2luLCB2YWx1ZSwga2luZCB9KTtcbiAgICAgICAgY29uc3QgbmJJc3N1ZXMgPSB0aGlzLmlzc3Vlcy5maWx0ZXIoKGlzc3VlKSA9PiBpc3N1ZS50eXBlID09PSB0eXBlICYmIGlzc3VlLm5vZGVJZCA9PT0gbm9kZUlkICYmIGlzc3VlLm9yaWdpbiA9PT0gb3JpZ2luKS5sZW5ndGg7XG4gICAgICAgIHRoaXMuZGV0ZWN0UHJvYmxlbXModHlwZSwgbm9kZUlkLCBvcmlnaW4sIG5iSXNzdWVzKTtcbiAgICB9XG4gICAgYWRkUHJvYmxlbSh0eXBlLCB1c2VySWQsIG9yaWdpbikge1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5EZXRlY3Rpb24sIGBQcm9ibGVtIGRldGVjdGVkOiAke3R5cGV9YCk7XG4gICAgICAgIGxvZ2dlci5sb2dFdmVudCgncHJvYmxlbScsIHtcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jb25maWdzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIHJlbW90ZUlkOiB1c2VySWQsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljPy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IERldGVjdGlvbk1lc3NhZ2VUeXBlLlByb2JsZW0sXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIG5vZGVJZDogdXNlcklkLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFBlZXJDb25uZWN0aW9uT3JpZ2luLlNlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnbW9kZWxzL05vZGUvTm9kZSc7XG5leHBvcnQgY2xhc3MgQWdlbnQgZXh0ZW5kcyBOb2RlIHtcbiAgICB0eXBlID0gTm9kZVR5cGUuQWdlbnQ7XG59XG4iLCJpbXBvcnQgeyBhZGREb2MsIGNvbGxlY3Rpb24sIGRvYywgb25TbmFwc2hvdCwgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBOT0RFX0FHRU5UX0NBUEFDSVRZX1JFUE9SVF9JTlRFUlZBTCB9IGZyb20gJ2NvbnN0YW50cy9Ob2RlJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnc2VydmljZXMvRmlyZWJhc2UvRmlyZWJhc2VTZXJ2aWNlJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIEF1dGhBZ2VudCB7XG4gICAgaWQ7XG4gICAgZ3JvdXBJZDtcbiAgICB2ZW5kb3JJZDtcbiAgICBhZ2VudENvbmZpZztcbiAgICB0eXBlID0gTm9kZVR5cGUuQWdlbnQ7XG4gICAgbGFzdENhcGFjaXR5UmVwb3J0O1xuICAgIGNvbnN0cnVjdG9yKGlkLCBncm91cElkLCB2ZW5kb3JJZCwgYWdlbnRDb25maWcpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBncm91cElkO1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgICAgIHRoaXMuYWdlbnRDb25maWcgPSBhZ2VudENvbmZpZztcbiAgICB9XG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cbiAgICBvbkNvbmZpZ3VyYXRpb25DaGFuZ2UoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvblNuYXBzaG90KGRvYyhmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSwgYGRldmVsb3BlcnMvJHt0aGlzLnZlbmRvcklkfS9yZXNvdXJjZXMvYWdlbnQvaXRlbXMvJHt0aGlzLmdyb3VwSWR9YCksIChzbmFwc2hvdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90LmV4aXN0cygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWdlbnRDb25maWcgPSBzbmFwc2hvdC5kYXRhKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWdlbnRDb25maWcudGltZXN0YW1wLmlzRXF1YWwoYWdlbnRDb25maWcudGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLk5vZGUsICdhZ2VudC1jb25maWctY2hhbmdlZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgYWdlbnRJZDogdGhpcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgICAgICAgICBvbGRDb25maWc6IHRoaXMuYWdlbnRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbmZpZzogYWdlbnRDb25maWcsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZ2VudENvbmZpZyA9IGFnZW50Q29uZmlnO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgc2V0UmVwb3J0Q2FwYWNpdHkocmVwb3J0Q2FwYWNpdHkpIHtcbiAgICAgICAgdGhpcy5yZXBvcnRDYXBhY2l0eSh0aGlzLmdyb3VwSWQsIHJlcG9ydENhcGFjaXR5KTtcbiAgICAgICAgcmV0dXJuIGludGVydmFsLnNldEludGVydmFsKCgpID0+IHRoaXMucmVwb3J0Q2FwYWNpdHkodGhpcy5ncm91cElkLCByZXBvcnRDYXBhY2l0eSksIE5PREVfQUdFTlRfQ0FQQUNJVFlfUkVQT1JUX0lOVEVSVkFMKTtcbiAgICB9XG4gICAgZ2V0Q2FwYWNpdHlSZXBvcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5sYXN0Q2FwYWNpdHlSZXBvcnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuTWlzdGxldENhcGFjaXR5UmVwb3J0Tm90U2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0Q2FwYWNpdHlSZXBvcnQ7XG4gICAgfVxuICAgIGFzeW5jIHJlcG9ydENhcGFjaXR5KGdyb3VwSWQsIHJlcG9ydENhcGFjaXR5KSB7XG4gICAgICAgIGNvbnN0IGNhcGFjaXR5ID0gYXdhaXQgcmVwb3J0Q2FwYWNpdHkoKTtcbiAgICAgICAgdGhpcy5sYXN0Q2FwYWNpdHlSZXBvcnQgPSBjYXBhY2l0eTtcbiAgICAgICAgYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGBkZXZlbG9wZXJzLyR7dGhpcy52ZW5kb3JJZH0vY2FwYWNpdGllc2ApLCB7XG4gICAgICAgICAgICBhZ2VudElkOiB0aGlzLmlkLFxuICAgICAgICAgICAgZ3JvdXBJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgICAgICBjYXBhY2l0eSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IGNyZWF0ZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIEF1dGhVc2VyIHtcbiAgICBpZDtcbiAgICBkaXNwbGF5TmFtZTtcbiAgICBlbWFpbDtcbiAgICB0eXBlID0gTm9kZVR5cGUuVXNlcjtcbiAgICBqb2luZWRDbHVzdGVycyA9IG5ldyBNYXAoKTtcbiAgICBvYnNlcnZlciA9IGNyZWF0ZU9ic2VydmVyKCk7XG4gICAgY29uc3RydWN0b3IoaWQsIGRpc3BsYXlOYW1lLCBlbWFpbCkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsO1xuICAgIH1cbiAgICBnZXRJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XG4gICAgfVxuICAgIGdldERpc3BsYXlOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5TmFtZTtcbiAgICB9XG4gICAgZ2V0RW1haWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVtYWlsO1xuICAgIH1cbiAgICBzZXREaXNwbGF5TmFtZShkaXNwbGF5TmFtZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSA9PT0gZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIucHVibGlzaCh0aGlzKTtcbiAgICB9XG4gICAgc2V0RW1haWwoZW1haWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZW1haWwgPT09IGVtYWlsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsO1xuICAgICAgICB0aGlzLm9ic2VydmVyLnB1Ymxpc2godGhpcyk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQ2x1c3RlcihjbHVzdGVySWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLmpvaW5lZENsdXN0ZXJzLmhhcyhjbHVzdGVySWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLm9ic2VydmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgICAgIHRoaXMuam9pbmVkQ2x1c3RlcnMuc2V0KGNsdXN0ZXJJZCwgdW5zdWJzY3JpYmUpO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyQ2x1c3RlcihjbHVzdGVySWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmpvaW5lZENsdXN0ZXJzLmhhcyhjbHVzdGVySWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmpvaW5lZENsdXN0ZXJzLmdldChjbHVzdGVySWQpO1xuICAgICAgICBpZiAodW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5qb2luZWRDbHVzdGVycy5kZWxldGUoY2x1c3RlcklkKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FX0xJTUlULCBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FIH0gZnJvbSAnY29uc3RhbnRzL05vZGUnO1xuaW1wb3J0IHsgTm9kZU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGVNZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9BZ2VudCc7XG5leHBvcnQgY2xhc3MgTG9jYWxBZ2VudCBleHRlbmRzIEFnZW50IHtcbiAgICBzeXN0ZW1Ub3BpYztcbiAgICBjdXJyZW50VmVyc2lvbiA9IERhdGUubm93KCk7XG4gICAgdXBkYXRlRGVib3VuY2VUaW1lb3V0O1xuICAgIGxhc3RVcGRhdGVkO1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMubGFzdFVwZGF0ZWQ7XG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSBEYXRlLm5vdygpO1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxuICAgIGFuc3dlckpvaW4odXNlcklkKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCB8fCAhdGhpcy5yYW5rKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFt1c2VySWRdLFxuICAgICAgICAgICAgcHJvcGFnYXRlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLk5vZGUsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogTm9kZU1lc3NhZ2VUeXBlLk5vZGVVcGRhdGUsXG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgbWV0YURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmFuazogdGhpcy5nZXRSYW5rKCksXG4gICAgICAgICAgICAgICAgcmVtb3RlQ29ubmVjdGlvbnM6IEFycmF5LmZyb20odGhpcy5yZW1vdGVDb25uZWN0aW9ucyksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRSZW1vdGVDb25uZWN0aW9uKHJlbW90ZUlkKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmhhcyhyZW1vdGVJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmFkZChyZW1vdGVJZCk7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50VmVyc2lvbigpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hVc2VyVXBkYXRlKHRydWUpO1xuICAgIH1cbiAgICByZW1vdmVSZW1vdGVDb25uZWN0aW9uKHJlbW90ZUlkKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5oYXMocmVtb3RlSWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5kZWxldGUocmVtb3RlSWQpO1xuICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoVXNlclVwZGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWZXJzaW9uO1xuICAgIH1cbiAgICBzZXRSYW5rKHJhbmssIGluY3JlbWVudFZlcnNpb24gPSB0cnVlKSB7XG4gICAgICAgIGlmICh0aGlzLnJhbmsgPT09IHJhbmspIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJhbmsgPSByYW5rO1xuICAgICAgICBpZiAoaW5jcmVtZW50VmVyc2lvbikge1xuICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnRWZXJzaW9uKCk7XG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hVc2VyVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5jcmVtZW50VmVyc2lvbigpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VmVyc2lvbiA9IERhdGUubm93KCk7XG4gICAgfVxuICAgIHB1Ymxpc2hVc2VyVXBkYXRlKGNvbm5lY3Rpb25zVXBkYXRlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJhbmspIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubGFzdFVwZGF0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFVwZGF0ZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCkge1xuICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RVcGRhdGVkID4gTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRV9MSU1JVCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RVcGRhdGVkO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0O1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5pZCxcbiAgICAgICAgICAgICAgICBwcm9wYWdhdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLk5vZGUsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBjb25uZWN0aW9uc1VwZGF0ZSA/IE5vZGVNZXNzYWdlVHlwZS5Ob2RlQ29ubmVjdGlvbnNVcGRhdGUgOiBOb2RlTWVzc2FnZVR5cGUuTm9kZVVwZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJhbms6IHRoaXMuZ2V0UmFuaygpLFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVDb25uZWN0aW9uczogQXJyYXkuZnJvbSh0aGlzLnJlbW90ZUNvbm5lY3Rpb25zKSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogdGhpcy5jdXJyZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUUpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUVfTElNSVQsIE5PREVfVVBEQVRFX0RFQk9VTkNFX1RJTUUgfSBmcm9tICdjb25zdGFudHMvTm9kZSc7XG5pbXBvcnQgeyBOb2RlTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL05vZGUvTm9kZU1lc3NhZ2UnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnbW9kZWxzL05vZGUvVXNlcic7XG5leHBvcnQgY2xhc3MgTG9jYWxVc2VyIGV4dGVuZHMgVXNlciB7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgY3VycmVudFZlcnNpb24gPSBEYXRlLm5vdygpO1xuICAgIHVwZGF0ZURlYm91bmNlVGltZW91dDtcbiAgICBsYXN0VXBkYXRlZDtcbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0O1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RVcGRhdGVkO1xuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gRGF0ZS5ub3coKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICBhbnN3ZXJKb2luKHVzZXJJZCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQgfHwgIXRoaXMucmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5pZCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdXNlcklkXSxcbiAgICAgICAgICAgIHByb3BhZ2F0ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5Ob2RlLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IE5vZGVNZXNzYWdlVHlwZS5Ob2RlVXBkYXRlLFxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIG1ldGFEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHRoaXMuZ2V0RGlzcGxheU5hbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuZ2V0RW1haWwoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJhbms6IHRoaXMuZ2V0UmFuaygpLFxuICAgICAgICAgICAgICAgIHJlbW90ZUNvbm5lY3Rpb25zOiBBcnJheS5mcm9tKHRoaXMucmVtb3RlQ29ubmVjdGlvbnMpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkUmVtb3RlQ29ubmVjdGlvbihyZW1vdGVJZCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdGVDb25uZWN0aW9ucy5oYXMocmVtb3RlSWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5hZGQocmVtb3RlSWQpO1xuICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoVXNlclVwZGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVtb3RlQ29ubmVjdGlvbihyZW1vdGVJZCkge1xuICAgICAgICBpZiAoIXRoaXMucmVtb3RlQ29ubmVjdGlvbnMuaGFzKHJlbW90ZUlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuZGVsZXRlKHJlbW90ZUlkKTtcbiAgICAgICAgdGhpcy5pbmNyZW1lbnRWZXJzaW9uKCk7XG4gICAgICAgIHRoaXMucHVibGlzaFVzZXJVcGRhdGUodHJ1ZSk7XG4gICAgfVxuICAgIGdldEN1cnJlbnRWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmVyc2lvbjtcbiAgICB9XG4gICAgc2V0RGlzcGxheU5hbWUoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheU5hbWUgPT09IGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgdGhpcy5wdWJsaXNoVXNlclVwZGF0ZSgpO1xuICAgIH1cbiAgICBzZXRFbWFpbChlbWFpbCkge1xuICAgICAgICBpZiAodGhpcy5lbWFpbCA9PT0gZW1haWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtYWlsID0gZW1haWw7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50VmVyc2lvbigpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hVc2VyVXBkYXRlKCk7XG4gICAgfVxuICAgIHNldFJhbmsocmFuaywgaW5jcmVtZW50VmVyc2lvbiA9IHRydWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmFuayA9PT0gcmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgICAgIGlmIChpbmNyZW1lbnRWZXJzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudFZlcnNpb24oKTtcbiAgICAgICAgICAgIHRoaXMucHVibGlzaFVzZXJVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmNyZW1lbnRWZXJzaW9uKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gRGF0ZS5ub3coKTtcbiAgICB9XG4gICAgcHVibGlzaFVzZXJVcGRhdGUoY29ubmVjdGlvbnNVcGRhdGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAoIXRoaXMucmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5sYXN0VXBkYXRlZCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0VXBkYXRlZCA9IERhdGUubm93KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0KSB7XG4gICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFVwZGF0ZWQgPiBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FX0xJTUlUKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlRGVib3VuY2VUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZURlYm91bmNlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubGFzdFVwZGF0ZWQ7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy51cGRhdGVEZWJvdW5jZVRpbWVvdXQ7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuTm9kZSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvbm5lY3Rpb25zVXBkYXRlID8gTm9kZU1lc3NhZ2VUeXBlLk5vZGVDb25uZWN0aW9uc1VwZGF0ZSA6IE5vZGVNZXNzYWdlVHlwZS5Ob2RlVXBkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgbWV0YURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB0aGlzLmdldERpc3BsYXlOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5nZXRFbWFpbCgpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByYW5rOiB0aGlzLmdldFJhbmsoKSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlQ29ubmVjdGlvbnM6IEFycmF5LmZyb20odGhpcy5yZW1vdGVDb25uZWN0aW9ucyksXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IHRoaXMuY3VycmVudFZlcnNpb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgTm9kZSB7XG4gICAgaWQ7XG4gICAgcmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgcmFuaztcbiAgICBjb25zdHJ1Y3RvcihpZCwgcmVtb3RlQ29ubmVjdGlvbnMgPSBuZXcgU2V0KCksIHJhbmspIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zID0gcmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnJhbmsgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMuY2xlYXIoKTtcbiAgICB9XG4gICAgZ2V0SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cbiAgICBnZXRSYW5rKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYW5rO1xuICAgIH1cbiAgICBnZXRSZW1vdGVDb25uZWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlQ29ubmVjdGlvbnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IE5PREVfQ0xFQU5fUkVNT1RFX05PREVTX0lOVEVSVkFMLCBOT0RFX0NMRUFOX1JFTU9URV9OT0RFU19USFJFU0hPTEQsIE5PREVfRElTVEFOQ0VfSE9QLCBOT0RFX1BST0NFU1NfUkFOS19ERUJPVUNFX1RJTUUsIE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRV9MSU1JVCB9IGZyb20gJ2NvbnN0YW50cy9Ob2RlJztcbmltcG9ydCB7IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgRWFybHlSZXR1cm5FcnJvciB9IGZyb20gJ2Vycm9ycy9FYXJseVJldHVybkVycm9yJztcbmltcG9ydCB7IFNES0ludGVybmFsRXJyb3IgfSBmcm9tICdlcnJvcnMvU0RLSW50ZXJuYWxFcnJvcic7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvblR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBOb2RlU3RhdHVzIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGUnO1xuaW1wb3J0IHsgTm9kZU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGVNZXNzYWdlJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgUmVtb3RlQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9SZW1vdGVBZ2VudCc7XG5pbXBvcnQgeyBSZW1vdGVVc2VyIH0gZnJvbSAnbW9kZWxzL05vZGUvUmVtb3RlVXNlcic7XG5pbXBvcnQgeyBGaXJlYmFzZVJEQkRpc2NvdmVyeVNlcnZpY2UgfSBmcm9tICdzZXJ2aWNlcy9EaXNjb3ZlcnkvRmlyZWJhc2VSREJEaXNjb3ZlcnlTZXJ2aWNlJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuZXhwb3J0IGNsYXNzIE5vZGVNYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIGdyYXBoU2VydmljZTtcbiAgICByZW1vdGVVbnN1YnNjcmliZXI7XG4gICAgZGlzY292ZXJ5U2VydmljZTtcbiAgICBkaXNjb3ZlcnlVbnN1YnNjcmliZXI7XG4gICAgYW5jZXN0b3JzID0gW107XG4gICAgc3lzdGVtVG9waWM7XG4gICAgb3B0aW1pemF0aW9uTGF5ZXJzID0gbmV3IE1hcCgpO1xuICAgIGRlYm91bmNlUHJvY2Vzc1Jhbms7XG4gICAgbGFzdFByb2Nlc3NSYW5rO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3MsIGdyYXBoU2VydmljZSkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLmdyYXBoU2VydmljZSA9IGdyYXBoU2VydmljZTtcbiAgICAgICAgdGhpcy5kaXNjb3ZlcnlTZXJ2aWNlID0gbmV3IEZpcmViYXNlUkRCRGlzY292ZXJ5U2VydmljZSh0aGlzLmNvbmZpZ3MudmVuZG9ySWQsIHRoaXMuY29uZmlncy5jbHVzdGVySWQsIHRoaXMuY29uZmlncy5sb2NhbE5vZGUsIHRoaXMuZ3JhcGhTZXJ2aWNlLmdldE1pbkNvbm5lY3Rpb25zKCkpO1xuICAgICAgICB0aGlzLmRpc2NvdmVyeVVuc3Vic2NyaWJlciA9IHRoaXMuZGlzY292ZXJ5U2VydmljZS5vbk5vZGVEaXNjb25uZWN0KHRoaXMuaGFuZGxlTm9kZURpc2Nvbm5lY3QuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgICAgICB0aGlzLnJlbW90ZVVuc3Vic2NyaWJlciA9IGludGVydmFsLnNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlcygpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5nZXRTdGF0dXMoKSA9PT0gTm9kZVN0YXR1cy5PZmZsaW5lICYmIG5vZGUuZ2V0TGFzdFVwZGF0ZWQoKSA8IG5vdyAtIE5PREVfQ0xFQU5fUkVNT1RFX05PREVTX1RIUkVTSE9MRCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdyYXBoU2VydmljZS5kZWxldGVSZW1vdGVOb2RlKG5vZGUuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIE5PREVfQ0xFQU5fUkVNT1RFX05PREVTX0lOVEVSVkFMKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIocHVibGlzaGVyKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMgPSBwdWJsaXNoZXI7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIoKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnN5c3RlbVRvcGljO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVib3VuY2VQcm9jZXNzUmFuaykge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVib3VuY2VQcm9jZXNzUmFuayk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5kZWJvdW5jZVByb2Nlc3NSYW5rO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RQcm9jZXNzUmFuaztcbiAgICAgICAgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5jbG9zZSgpO1xuICAgICAgICB0aGlzLnJlbW90ZVVuc3Vic2NyaWJlcigpO1xuICAgICAgICB0aGlzLmRpc2NvdmVyeVVuc3Vic2NyaWJlcigpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UodGhpcyk7XG4gICAgICAgIHRoaXMuZGlzY292ZXJ5U2VydmljZS5jbG9zZSgpO1xuICAgIH1cbiAgICBnZXRBbmNlc3RvcklkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5jZXN0b3JzO1xuICAgIH1cbiAgICBnZXRMb2NhbElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpO1xuICAgIH1cbiAgICBnZXRMb2NhbE5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlO1xuICAgIH1cbiAgICBnZXRSZW1vdGVOb2RlcyhzdHJhdGVneSkge1xuICAgICAgICBjb25zdCBub2RlcyA9IEFycmF5LmZyb20odGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZXMoKS52YWx1ZXMoKSkuZmlsdGVyKChub2RlKSA9PiBub2RlLmdldFN0YXR1cygpID09PSBOb2RlU3RhdHVzLk9ubGluZSk7XG4gICAgICAgIGlmIChzdHJhdGVneSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLmZpbHRlcihzdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH1cbiAgICBhc3luYyBkaXNjb3ZlcigpIHtcbiAgICAgICAgdGhpcy5hbmNlc3RvcnMgPSBhd2FpdCB0aGlzLmRpc2NvdmVyeVNlcnZpY2Uuam9pbigpO1xuICAgICAgICBpZiAodGhpcy5hbmNlc3RvcnMubGVuZ3RoIDwgdGhpcy5ncmFwaFNlcnZpY2UuZ2V0TWluQ29ubmVjdGlvbnMoKSkge1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5zZXRSYW5rKHRoaXMuYW5jZXN0b3JzLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmFuaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmFuY2VzdG9ycztcbiAgICB9XG4gICAgZ2V0RGlzdGFuY2Uoc291cmNlSWQsIHJlbW90ZUlkKSB7XG4gICAgICAgIGNvbnN0IHJlbW90ZUNvbm5lY3Rpb25zID0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRSZW1vdGVDb25uZWN0aW9ucygpO1xuICAgICAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldChyZW1vdGVDb25uZWN0aW9ucyk7XG4gICAgICAgIGNvbnN0IHF1ZXVlID0gQXJyYXkuZnJvbShyZW1vdGVDb25uZWN0aW9ucylcbiAgICAgICAgICAgIC5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gc291cmNlSWQpXG4gICAgICAgICAgICAubWFwKChpZCkgPT4gKHsgaWQsIGRpc3RhbmNlOiAxIH0pKTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudC5pZCA9PT0gcmVtb3RlSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudC5kaXN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlKGN1cnJlbnQuaWQpO1xuICAgICAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUuZ2V0U3RhdHVzKCkgPT09IE5vZGVTdGF0dXMuT2ZmbGluZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVtb3RlQ29ubmVjdGlvbnMgPSBub2RlLmdldFJlbW90ZUNvbm5lY3Rpb25zKCk7XG4gICAgICAgICAgICByZW1vdGVDb25uZWN0aW9ucy5mb3JFYWNoKChyZW1vdGVDb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkLmhhcyhyZW1vdGVDb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB2aXNpdGVkLmFkZChyZW1vdGVDb25uZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaCh7IGlkOiByZW1vdGVDb25uZWN0aW9uLCBkaXN0YW5jZTogY3VycmVudC5kaXN0YW5jZSArIE5PREVfRElTVEFOQ0VfSE9QIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaGFuZGxlTm9kZVN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE5vZGVNZXNzYWdlVHlwZS5Ob2RlVXBkYXRlOlxuICAgICAgICAgICAgICAgIGNhc2UgTm9kZU1lc3NhZ2VUeXBlLk5vZGVDb25uZWN0aW9uc1VwZGF0ZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOb2RlVXBkYXRlKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Ob2RlLCAnTm9kZU1hbmFnZXIgLSBOb2RlVXBkYXRlJywgYCcke3RoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKX0sICR7ZXZlbnQuc291cmNlSWR9J2AsIGV2ZW50LCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBOb2RlTWVzc2FnZVR5cGUuTm9kZUxlYXZlOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUoZXZlbnQuY29udGVudC5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLk5vZGUsICdOb2RlTWFuYWdlciAtIE5vZGVMZWF2ZScsIGAnJHt0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCl9LCAke2V2ZW50LnNvdXJjZUlkfSdgLCBldmVudCwgZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVhcmx5UmV0dXJuRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Ob2RlLCBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlUGVlckNvbm5lY3Rpb25TeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdWNjZXNzOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ29ubmVjdGlvblN1Y2Nlc3MoZXZlbnQuc291cmNlSWQpO1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLk5vZGUsICdOb2RlTWFuYWdlciAtIENvbm5lY3Rpb25TdWNjZXNzJywgYCcke3RoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKX0sICR7ZXZlbnQuc291cmNlSWR9J2AsIGV2ZW50LCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5EaXNjb25uZWN0OlxuICAgICAgICAgICAgICAgIHRoaXMucHVibGlzaE5vZGVMZWF2ZShldmVudC5zb3VyY2VJZCk7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuTm9kZSwgJ05vZGVNYW5hZ2VyIC0gUHVibGlzaE5vZGVMZWF2ZScsIHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSwgZXZlbnQsIGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZU5vZGVKb2luKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVSZW1vdGVOb2RlKGNvbnRlbnQpO1xuICAgICAgICB0aGlzLm5vdGlmeUpvaW4oY29udGVudCk7XG4gICAgfVxuICAgIG5vdGlmeUpvaW4oY29udGVudCkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmFuc3dlckpvaW4oY29udGVudC5pZCk7XG4gICAgICAgIHRoaXMucHVibGlzaE5vZGVKb2luKGNvbnRlbnQuaWQpO1xuICAgICAgICB0aGlzLm5vdGlmeUNsdXN0ZXJOb2RlSm9pbihjb250ZW50KTtcbiAgICB9XG4gICAgaGFuZGxlTm9kZVVwZGF0ZShjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIG1ldGFEYXRhLCByYW5rLCByZW1vdGVDb25uZWN0aW9ucywgdmVyc2lvbiB9ID0gY29udGVudDtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGUoaWQpO1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTm9kZUpvaW4oY29udGVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZlcnNpb24gPD0gbm9kZS5nZXRDdXJyZW50VmVyc2lvbigpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5zZXRSZW1vdGVDb25uZWN0aW9ucyhyZW1vdGVDb25uZWN0aW9ucyk7XG4gICAgICAgIG5vZGUuc2V0Q3VycmVudFZlcnNpb24odmVyc2lvbik7XG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09IE5vZGVUeXBlLlVzZXIgJiYgbWV0YURhdGEudHlwZSA9PT0gTm9kZVR5cGUuVXNlcikge1xuICAgICAgICAgICAgbm9kZS5zZXREaXNwbGF5TmFtZShtZXRhRGF0YS5kaXNwbGF5TmFtZSk7XG4gICAgICAgICAgICBub2RlLnNldEVtYWlsKG1ldGFEYXRhLmVtYWlsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmFuaykge1xuICAgICAgICAgICAgbm9kZS5zZXRSYW5rKHJhbmspO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0TG9jYWxSYW5rKGlkLCByYW5rKTtcbiAgICAgICAgaWYgKG5vZGUuZ2V0U3RhdHVzKCkgPT09IE5vZGVTdGF0dXMuT2ZmbGluZSkge1xuICAgICAgICAgICAgbm9kZS5zZXRTdGF0dXMoTm9kZVN0YXR1cy5PbmxpbmUpO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmFuaygpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlKb2luKGNvbnRlbnQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvY2Vzc1JhbmsoKTtcbiAgICAgICAgdGhpcy5ub3RpZnlDbHVzdGVyTm9kZVVwZGF0ZSh7IGlkLCBtZXRhRGF0YSwgcmVtb3RlQ29ubmVjdGlvbnMsIHZlcnNpb24gfSk7XG4gICAgfVxuICAgIHNldExvY2FsUmFuayhub2RlSWQsIHJhbmspIHtcbiAgICAgICAgaWYgKHJhbmsgJiYgdGhpcy5hbmNlc3RvcnMuaW5jbHVkZXMobm9kZUlkKSkge1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5zZXRSYW5rKHJhbmsgKyB0aGlzLmFuY2VzdG9ycy5pbmRleE9mKG5vZGVJZCkgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb25uZWN0aW9uU3VjY2Vzcyhzb3VyY2VJZCkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmFkZFJlbW90ZUNvbm5lY3Rpb24oc291cmNlSWQpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVOb2RlKHsgaWQsIG1ldGFEYXRhLCByYW5rLCByZW1vdGVDb25uZWN0aW9ucywgdmVyc2lvbiB9KSB7XG4gICAgICAgIGlmICh0aGlzLmdyYXBoU2VydmljZS5oYXNSZW1vdGVOb2RlKGlkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVhcmx5UmV0dXJuRXJyb3IoYENhbm5vdCBjcmVhdGUgcmVtb3RlIG5vZGU6IE5vZGUgYWxyZWFkeSBleGlzdHM6ICR7aWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChtZXRhRGF0YS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLlVzZXI6XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkaXNwbGF5TmFtZSwgZW1haWwgfSA9IG1ldGFEYXRhO1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGhTZXJ2aWNlLnNldFJlbW90ZU5vZGUoaWQsIG5ldyBSZW1vdGVVc2VyKGlkLCBkaXNwbGF5TmFtZSwgZW1haWwsIG5ldyBTZXQocmVtb3RlQ29ubmVjdGlvbnMpLCB2ZXJzaW9uLCByYW5rKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLkFnZW50OlxuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGhTZXJ2aWNlLnNldFJlbW90ZU5vZGUoaWQsIG5ldyBSZW1vdGVBZ2VudChpZCwgbmV3IFNldChyZW1vdGVDb25uZWN0aW9ucyksIHZlcnNpb24sIHJhbmspKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldExvY2FsUmFuayhpZCwgcmFuayk7XG4gICAgICAgIHRoaXMucHJvY2Vzc1JhbmsoKTtcbiAgICB9XG4gICAgcHVibGlzaE5vZGVKb2luKGlkKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLk5vZGUsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogTm9kZU1lc3NhZ2VUeXBlLk5vZGVKb2luLFxuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1Ymxpc2hOb2RlTGVhdmUoaWQpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYz8ucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLk5vZGUsXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogTm9kZU1lc3NhZ2VUeXBlLk5vZGVMZWF2ZSxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZU5vZGVEaXNjb25uZWN0KGlkKSB7XG4gICAgICAgIGlmIChpZCA9PT0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iubm90aWZ5Q2x1c3RlcignY2x1c3Rlci1kaXNjb25uZWN0JywgeyBpZCB9KTtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBuZWVkIHRvIGhhbmRsZSB0aGlzIG1vcmUgZ3JhY2VmdWxseVxuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLmNsb3NlKHsgZm9yY2U6IHRydWUgfSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3Iub3BlbigpO1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLmluaXRpYWxpemUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB1Ymxpc2hOb2RlTGVhdmUoaWQpO1xuICAgIH1cbiAgICByZW1vdmVOb2RlKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLmFuY2VzdG9ycy5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgICAgIHRoaXMubWFuYWdlQW5jZXN0b3IoaWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0UmVtb3RlQ29ubmVjdGlvbnMoKS5oYXMoaWQpKSB7XG4gICAgICAgICAgICB0aGlzLm1hbmFnZU9wdGltaXphdGlvbihpZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5yZW1vdmVSZW1vdGVDb25uZWN0aW9uKGlkKTtcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBBcnJheS5mcm9tKHRoaXMub3B0aW1pemF0aW9uTGF5ZXJzLmVudHJpZXMoKSkuZmluZCgoWywgaWRdKSA9PiBpZCA9PT0gaWQpO1xuICAgICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW1pemF0aW9uTGF5ZXJzLmRlbGV0ZShsYXllclswXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3RlTm9kZSA9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGUoaWQpO1xuICAgICAgICBpZiAoIXJlbW90ZU5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdGVSYW5rID0gcmVtb3RlTm9kZS5nZXRSYW5rKCk7XG4gICAgICAgIGNvbnN0IGxvY2FsUmFuayA9IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0UmFuaygpO1xuICAgICAgICBpZiAobG9jYWxSYW5rICYmIHJlbW90ZVJhbmsgJiYgcmVtb3RlUmFuayA8IGxvY2FsUmFuaykge1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5zZXRSYW5rKGxvY2FsUmFuayAtIDEsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBBcnJheS5mcm9tKHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGVzKCkudmFsdWVzKCkpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmsgPSBub2RlLmdldFJhbmsoKTtcbiAgICAgICAgICAgIGlmIChyYW5rICYmIHJlbW90ZVJhbmsgJiYgcmVtb3RlUmFuayA8IHJhbmspIHtcbiAgICAgICAgICAgICAgICBub2RlLnNldFJhbmsocmFuayAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmVtb3RlTm9kZS5zZXRTdGF0dXMoTm9kZVN0YXR1cy5PZmZsaW5lKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLm5vdGlmeUNsdXN0ZXIoYCR7cmVtb3RlTm9kZS50eXBlfS1sZWF2ZWAsIHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm90aWZ5Q2x1c3Rlck5vZGVKb2luKHsgaWQsIG1ldGFEYXRhLCByZW1vdGVDb25uZWN0aW9ucyB9KSB7XG4gICAgICAgIHN3aXRjaCAobWV0YURhdGEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5Vc2VyOlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5ub3RpZnlDbHVzdGVyKCd1c2VyLWpvaW4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgICBtZXRhRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlQ29ubmVjdGlvbnMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLkFnZW50OlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5ub3RpZnlDbHVzdGVyKCdhZ2VudC1qb2luJywge1xuICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgbWV0YURhdGEsXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZUNvbm5lY3Rpb25zLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5vdGlmeUNsdXN0ZXJOb2RlVXBkYXRlKHsgaWQsIG1ldGFEYXRhLCByZW1vdGVDb25uZWN0aW9ucyB9KSB7XG4gICAgICAgIHN3aXRjaCAobWV0YURhdGEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBOb2RlVHlwZS5Vc2VyOlxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5ub3RpZnlDbHVzdGVyKCd1c2VyLXVwZGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFEYXRhLFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVDb25uZWN0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuQWdlbnQ6XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLm5vdGlmeUNsdXN0ZXIoJ2FnZW50LXVwZGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFEYXRhLFxuICAgICAgICAgICAgICAgICAgICByZW1vdGVDb25uZWN0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzUmFuaygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxhc3RQcm9jZXNzUmFuaykge1xuICAgICAgICAgICAgdGhpcy5sYXN0UHJvY2Vzc1JhbmsgPSBEYXRlLm5vdygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlYm91bmNlUHJvY2Vzc1JhbmspIHtcbiAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0UHJvY2Vzc1JhbmsgPiBOT0RFX1BST0NFU1NfUkFOS19ERUJPVUNFX1RJTUVfTElNSVQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZVByb2Nlc3NSYW5rKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlYm91bmNlUHJvY2Vzc1JhbmsgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxhc3RQcm9jZXNzUmFuaztcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRlYm91bmNlUHJvY2Vzc1Jhbms7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFJhbmsgPSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldFJhbmsoKTtcbiAgICAgICAgICAgIGlmICghbG9jYWxSYW5rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY3VycmVudE1heExheWVyID0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0Q3VycmVudE1heExheWVyKHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGVzKCkuc2l6ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpbWl6YXRpb25MYXllcnMuc2l6ZSA+PSBjdXJyZW50TWF4TGF5ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbGF5ZXIgPSAxO1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRDb25uZWN0aW9ucygpLmxlbmd0aCA8IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldE1heENvbm5lY3Rpb25zKCkgJiYgbGF5ZXIgPD0gY3VycmVudE1heExheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW1pemF0aW9uTGF5ZXJzLmhhcyhsYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFJhbmsgPSB0aGlzLmdyYXBoU2VydmljZS5nZXROZXh0VGFyZ2V0UmFuayhsb2NhbFJhbmssIGxheWVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdGVOb2RlID0gQXJyYXkuZnJvbSh0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlcygpLnZhbHVlcygpKS5maW5kKChub2RlKSA9PiBub2RlLmdldFJhbmsoKSA9PT0gdGFyZ2V0UmFuayAmJiBub2RlLmdldFN0YXR1cygpID09PSBOb2RlU3RhdHVzLk9ubGluZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZW1vdGVOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuY3JlYXRlQ29ubmVjdGlvbihyZW1vdGVOb2RlLmdldElkKCksIFBlZXJDb25uZWN0aW9uVHlwZS5PcHRpbWl6YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGltaXphdGlvbkxheWVycy5zZXQobGF5ZXIsIHJlbW90ZU5vZGUuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0RLSW50ZXJuYWxFcnJvciAmJiBlLmNvZGUgPT09IFNES0ludGVybmFsRXJyb3IuY29kZXMuUmVtb3RlQ29ubmVjdGlvbkV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuTm9kZSwgdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCByZW1vdGVOb2RlLmdldElkKCksIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxheWVyICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIE5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRSk7XG4gICAgfVxuICAgIGFzeW5jIG1hbmFnZUFuY2VzdG9yKG5vZGVJZCkge1xuICAgICAgICB0aGlzLmFuY2VzdG9ycy5zcGxpY2UodGhpcy5hbmNlc3RvcnMuaW5kZXhPZihub2RlSWQpLCAxKTtcbiAgICAgICAgY29uc3QgbmV3QW5jZXN0b3JJZHMgPSBhd2FpdCB0aGlzLmRpc2NvdmVyeVNlcnZpY2UuZ2V0QW5jZXN0b3JzKCk7XG4gICAgICAgIGZvciAoY29uc3QgYW5jZXN0b3JJZCBvZiBuZXdBbmNlc3Rvcklkcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFuY2VzdG9ycy5pbmNsdWRlcyhhbmNlc3RvcklkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVyID0gQXJyYXkuZnJvbSh0aGlzLm9wdGltaXphdGlvbkxheWVycy5lbnRyaWVzKCkpLmZpbmQoKFssIGlkXSkgPT4gaWQgPT09IGFuY2VzdG9ySWQpO1xuICAgICAgICAgICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGltaXphdGlvbkxheWVycy5kZWxldGUobGF5ZXJbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEbyBub3QgYXdhaXQgdGhpcyBjcmVhdGUgY29ubmVjdGlvbiBzaW5jZSBpdCB3aWxsIG5vdCB1cGRhdGUgdGhlIGFuY2VzdG9ycyBzeW5jaHJvbm91c2x5XG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLmNyZWF0ZUNvbm5lY3Rpb24oYW5jZXN0b3JJZCwgUGVlckNvbm5lY3Rpb25UeXBlLkNvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdBbmNlc3Rvcklkcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5sb2NhbE5vZGUuc2V0UmFuaygxKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuY2VzdG9ycyA9IG5ld0FuY2VzdG9ySWRzO1xuICAgIH1cbiAgICBhc3luYyBtYW5hZ2VPcHRpbWl6YXRpb24obm9kZUlkKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsUmFuayA9IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0UmFuaygpO1xuICAgICAgICBpZiAoIWxvY2FsUmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW90ZU5vZGUgPSB0aGlzLmdyYXBoU2VydmljZS5nZXRSZW1vdGVOb2RlKG5vZGVJZCk7XG4gICAgICAgIGlmICghcmVtb3RlTm9kZSB8fCByZW1vdGVOb2RlLmdldFN0YXR1cygpID09PSBOb2RlU3RhdHVzLk9mZmxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdGVSYW5rID0gcmVtb3RlTm9kZS5nZXRSYW5rKCk7XG4gICAgICAgIGlmICghcmVtb3RlUmFuayB8fCByZW1vdGVSYW5rIDwgbG9jYWxSYW5rKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxPcHRpbWl6YXRpb25Db25uZWN0aW9ucyA9IHRoaXMuZ2V0T3V0Z29pbmdPcHRpbWl6YXRpb25Db25uZWN0aW9ucyh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldFJlbW90ZUNvbm5lY3Rpb25zKCksIGxvY2FsUmFuayk7XG4gICAgICAgIGNvbnN0IHJlbW90ZU9wdGltaXphdGlvbkNvbm5lY3Rpb25zID0gdGhpcy5nZXRPdXRnb2luZ09wdGltaXphdGlvbkNvbm5lY3Rpb25zKHJlbW90ZU5vZGUuZ2V0UmVtb3RlQ29ubmVjdGlvbnMoKSwgcmVtb3RlUmFuayk7XG4gICAgICAgIGNvbnN0IGluZGV4T2ZSZW1vdmVkTm9kZSA9IGxvY2FsT3B0aW1pemF0aW9uQ29ubmVjdGlvbnMuZmluZEluZGV4KChbcmVtb3RlQ29ubmVjdGlvbklkXSkgPT4gcmVtb3RlQ29ubmVjdGlvbklkID09PSBub2RlSWQpO1xuICAgICAgICBjb25zdCBub2RlVG9Db25uZWN0ID0gcmVtb3RlT3B0aW1pemF0aW9uQ29ubmVjdGlvbnNbaW5kZXhPZlJlbW92ZWROb2RlXTtcbiAgICAgICAgaWYgKCFub2RlVG9Db25uZWN0IHx8IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0UmVtb3RlQ29ubmVjdGlvbnMoKS5oYXMobm9kZVRvQ29ubmVjdFswXSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdSZW1vdGVOb2RlID0gdGhpcy5ncmFwaFNlcnZpY2UuZ2V0UmVtb3RlTm9kZShub2RlVG9Db25uZWN0WzBdKTtcbiAgICAgICAgaWYgKCFuZXdSZW1vdGVOb2RlIHx8IG5ld1JlbW90ZU5vZGUuZ2V0U3RhdHVzKCkgPT09IE5vZGVTdGF0dXMuT2ZmbGluZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuY3JlYXRlQ29ubmVjdGlvbihub2RlVG9Db25uZWN0WzBdLCBQZWVyQ29ubmVjdGlvblR5cGUuT3B0aW1pemF0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gQXJyYXkuZnJvbSh0aGlzLm9wdGltaXphdGlvbkxheWVycy5lbnRyaWVzKCkpLmZpbmQoKFssIGlkXSkgPT4gaWQgPT09IG5vZGVJZCk7XG4gICAgICAgICAgICBpZiAobGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGltaXphdGlvbkxheWVycy5zZXQobGF5ZXJbMF0sIG5vZGVUb0Nvbm5lY3RbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNES0ludGVybmFsRXJyb3IgJiYgZS5jb2RlID09PSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLlJlbW90ZUNvbm5lY3Rpb25FeGlzdHMpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5Ob2RlLCB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksIG5vZGVUb0Nvbm5lY3RbMF0sIGUubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldE91dGdvaW5nT3B0aW1pemF0aW9uQ29ubmVjdGlvbnMoY29ubmVjdGlvbnMsIG5vZGVSYW5rKSB7XG4gICAgICAgIHJldHVybiBBcnJheVxuICAgICAgICAgICAgLmZyb20oY29ubmVjdGlvbnMpXG4gICAgICAgICAgICAucmVkdWNlKChhY2MsIHJlbW90ZUNvbm5lY3Rpb25JZCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldFJlbW90ZU5vZGUocmVtb3RlQ29ubmVjdGlvbklkKTtcbiAgICAgICAgICAgIGlmICghbm9kZSB8fCBub2RlLmdldFN0YXR1cygpID09PSBOb2RlU3RhdHVzLk9mZmxpbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmFuayA9IG5vZGUuZ2V0UmFuaygpO1xuICAgICAgICAgICAgaWYgKCFyYW5rKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJhbmtEaWZmZXJlbmNlID0gcmFuayAtIG5vZGVSYW5rO1xuICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBhbmNlc3RvcnMsIHN1Y2Nlc3NvcnMgYW5kIGluY29taW5nIG9wdGltaXphdGlvbiBjb25uZWN0aW9uc1xuICAgICAgICAgICAgaWYgKHJhbmtEaWZmZXJlbmNlIDw9IHRoaXMuZ3JhcGhTZXJ2aWNlLmdldE1pbkNvbm5lY3Rpb25zKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjLnB1c2goW3JlbW90ZUNvbm5lY3Rpb25JZCwgcmFua0RpZmZlcmVuY2VdKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIFtdKVxuICAgICAgICAgICAgLnNvcnQoKFssIHJhbmtEaWZmZXJlbmNlQV0sIFssIHJhbmtEaWZmZXJlbmNlQl0pID0+IHJhbmtEaWZmZXJlbmNlQSAtIHJhbmtEaWZmZXJlbmNlQik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9kZVN0YXR1cyB9IGZyb20gJ2ludGVyZmFjZXMvTm9kZS9Ob2RlJztcbmltcG9ydCB7IEFnZW50IH0gZnJvbSAnbW9kZWxzL05vZGUvQWdlbnQnO1xuZXhwb3J0IGNsYXNzIFJlbW90ZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIGN1cnJlbnRWZXJzaW9uO1xuICAgIHN0YXR1cyA9IE5vZGVTdGF0dXMuT25saW5lO1xuICAgIGxhc3RVcGRhdGVkID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdHJ1Y3RvcihpZCwgcmVtb3RlQ29ubmVjdGlvbnMgPSBuZXcgU2V0KCksIGN1cnJlbnRWZXJzaW9uLCByYW5rKSB7XG4gICAgICAgIHN1cGVyKGlkLCByZW1vdGVDb25uZWN0aW9ucywgcmFuayk7XG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSBjdXJyZW50VmVyc2lvbjtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWZXJzaW9uO1xuICAgIH1cbiAgICBnZXRTdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgICB9XG4gICAgZ2V0TGFzdFVwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RVcGRhdGVkO1xuICAgIH1cbiAgICBzZXRSYW5rKHJhbmspIHtcbiAgICAgICAgaWYgKHRoaXMucmFuayA9PT0gcmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFVwZGF0ZWQoKTtcbiAgICB9XG4gICAgc2V0UmVtb3RlQ29ubmVjdGlvbnMocmVtb3RlQ29ubmVjdGlvbnMpIHtcbiAgICAgICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCByZW1vdGVDb25uZWN0aW9uIG9mIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghcmVtb3RlQ29ubmVjdGlvbnMuaW5jbHVkZXMocmVtb3RlQ29ubmVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmRlbGV0ZShyZW1vdGVDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHJlbW90ZUNvbm5lY3Rpb24gb2YgcmVtb3RlQ29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5oYXMocmVtb3RlQ29ubmVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmFkZChyZW1vdGVDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RVcGRhdGVkKCk7XG4gICAgfVxuICAgIHNldEN1cnJlbnRWZXJzaW9uKHZlcnNpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZlcnNpb24gPT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0VXBkYXRlZCgpO1xuICAgIH1cbiAgICBzZXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gc3RhdHVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFVwZGF0ZWQoKTtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gTm9kZVN0YXR1cy5PZmZsaW5lKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlTGFzdFVwZGF0ZWQoKSB7XG4gICAgICAgIHRoaXMubGFzdFVwZGF0ZWQgPSBEYXRlLm5vdygpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vZGVTdGF0dXMgfSBmcm9tICdpbnRlcmZhY2VzL05vZGUvTm9kZSc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnbW9kZWxzL05vZGUvVXNlcic7XG5leHBvcnQgY2xhc3MgUmVtb3RlVXNlciBleHRlbmRzIFVzZXIge1xuICAgIGN1cnJlbnRWZXJzaW9uO1xuICAgIHN0YXR1cyA9IE5vZGVTdGF0dXMuT25saW5lO1xuICAgIGxhc3RVcGRhdGVkID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdHJ1Y3RvcihpZCwgZGlzcGxheU5hbWUsIGVtYWlsLCByZW1vdGVDb25uZWN0aW9ucyA9IG5ldyBTZXQoKSwgY3VycmVudFZlcnNpb24sIHJhbmspIHtcbiAgICAgICAgc3VwZXIoaWQsIGRpc3BsYXlOYW1lLCBlbWFpbCwgcmVtb3RlQ29ubmVjdGlvbnMsIHJhbmspO1xuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gY3VycmVudFZlcnNpb247XG4gICAgfVxuICAgIGdldEN1cnJlbnRWZXJzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmVyc2lvbjtcbiAgICB9XG4gICAgZ2V0U3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXM7XG4gICAgfVxuICAgIGdldExhc3RVcGRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXN0VXBkYXRlZDtcbiAgICB9XG4gICAgc2V0RGlzcGxheU5hbWUoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheU5hbWUgPT09IGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RVcGRhdGVkKCk7XG4gICAgfVxuICAgIHNldEVtYWlsKGVtYWlsKSB7XG4gICAgICAgIGlmICh0aGlzLmVtYWlsID09PSBlbWFpbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1haWwgPSBlbWFpbDtcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0VXBkYXRlZCgpO1xuICAgIH1cbiAgICBzZXRSYW5rKHJhbmspIHtcbiAgICAgICAgaWYgKHRoaXMucmFuayA9PT0gcmFuaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFVwZGF0ZWQoKTtcbiAgICB9XG4gICAgc2V0UmVtb3RlQ29ubmVjdGlvbnMocmVtb3RlQ29ubmVjdGlvbnMpIHtcbiAgICAgICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yIChjb25zdCByZW1vdGVDb25uZWN0aW9uIG9mIHRoaXMucmVtb3RlQ29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghcmVtb3RlQ29ubmVjdGlvbnMuaW5jbHVkZXMocmVtb3RlQ29ubmVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmRlbGV0ZShyZW1vdGVDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHJlbW90ZUNvbm5lY3Rpb24gb2YgcmVtb3RlQ29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5yZW1vdGVDb25uZWN0aW9ucy5oYXMocmVtb3RlQ29ubmVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZUNvbm5lY3Rpb25zLmFkZChyZW1vdGVDb25uZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhc0NoYW5nZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RVcGRhdGVkKCk7XG4gICAgfVxuICAgIHNldEN1cnJlbnRWZXJzaW9uKHZlcnNpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZlcnNpb24gPT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy51cGRhdGVMYXN0VXBkYXRlZCgpO1xuICAgIH1cbiAgICBzZXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gc3RhdHVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMudXBkYXRlTGFzdFVwZGF0ZWQoKTtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gTm9kZVN0YXR1cy5PZmZsaW5lKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlTGFzdFVwZGF0ZWQoKSB7XG4gICAgICAgIHRoaXMubGFzdFVwZGF0ZWQgPSBEYXRlLm5vdygpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnbW9kZWxzL05vZGUvTm9kZSc7XG5leHBvcnQgY2xhc3MgVXNlciBleHRlbmRzIE5vZGUge1xuICAgIGlkO1xuICAgIGRpc3BsYXlOYW1lO1xuICAgIGVtYWlsO1xuICAgIHJlbW90ZUNvbm5lY3Rpb25zO1xuICAgIHJhbms7XG4gICAgdHlwZSA9IE5vZGVUeXBlLlVzZXI7XG4gICAgY29uc3RydWN0b3IoaWQsIGRpc3BsYXlOYW1lLCBlbWFpbCwgcmVtb3RlQ29ubmVjdGlvbnMgPSBuZXcgU2V0KCksIHJhbmspIHtcbiAgICAgICAgc3VwZXIoaWQsIHJlbW90ZUNvbm5lY3Rpb25zLCByYW5rKTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7XG4gICAgICAgIHRoaXMuZW1haWwgPSBlbWFpbDtcbiAgICAgICAgdGhpcy5yZW1vdGVDb25uZWN0aW9ucyA9IHJlbW90ZUNvbm5lY3Rpb25zO1xuICAgICAgICB0aGlzLnJhbmsgPSByYW5rO1xuICAgIH1cbiAgICBnZXREaXNwbGF5TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheU5hbWU7XG4gICAgfVxuICAgIGdldEVtYWlsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbWFpbDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IEVhcmx5UmV0dXJuRXJyb3IgfSBmcm9tICdlcnJvcnMvRWFybHlSZXR1cm5FcnJvcic7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5pbXBvcnQgeyBJSW50ZXJuYWxGZWF0dXJlcyB9IGZyb20gJ2ludGVyZmFjZXMvU0RLL1NESyc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCB7IENvbm5lY3Rpb25NYW5hZ2VyIH0gZnJvbSAnbW9kZWxzL0Nvbm5lY3Rpb24vQ29ubmVjdGlvbk1hbmFnZXInO1xuaW1wb3J0IHsgQ29udGVudE1hbmFnZXIgfSBmcm9tICdtb2RlbHMvQ29udGVudC9Db250ZW50TWFuYWdlcic7XG5pbXBvcnQgeyBEZXRlY3Rpb25NYW5hZ2VyIH0gZnJvbSAnbW9kZWxzL0RldGVjdGlvbi9EZXRlY3Rpb25NYW5hZ2VyJztcbmltcG9ydCB7IExvY2FsQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9Mb2NhbEFnZW50JztcbmltcG9ydCB7IExvY2FsVXNlciB9IGZyb20gJ21vZGVscy9Ob2RlL0xvY2FsVXNlcic7XG5pbXBvcnQgeyBBdXRoQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9BdXRoQWdlbnQnO1xuaW1wb3J0IHsgTm9kZU1hbmFnZXIgfSBmcm9tICdtb2RlbHMvTm9kZS9Ob2RlTWFuYWdlcic7XG5pbXBvcnQgeyBSZW1lZGlhdGlvbk1hbmFnZXIgfSBmcm9tICdtb2RlbHMvUmVtZWRpYXRpb24vUmVtZWRpYXRpb25NYW5hZ2VyJztcbmltcG9ydCB7IFN0YXRzTWFuYWdlciB9IGZyb20gJ21vZGVscy9TdGF0cy9TdGF0c01hbmFnZXInO1xuaW1wb3J0IHsgaXNTZW5kZXIgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL0hlbHBlcnMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWFuYWdlciB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uTWFuYWdlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1lc3NhZ2UnO1xuaW1wb3J0IHsgU3lzdGVtVG9waWMgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL1N5c3RlbVRvcGljJztcbmltcG9ydCB7IEdyYXBoU2VydmljZSB9IGZyb20gJ3NlcnZpY2VzL0dyYXBoL0dyYXBoU2VydmljZSc7XG5pbXBvcnQgeyBnZXRGb3JtYXR0ZWRTeXRlbUxvZyB9IGZyb20gJ3V0aWxzL0xvZ2dlci9IZWxwZXJzJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgT3JjaGVzdHJhdG9yIHtcbiAgICB2ZW5kb3JJZDtcbiAgICBjbHVzdGVySWQ7XG4gICAgYXV0aE5vZGU7XG4gICAgYXV0aFNlcnZpY2U7XG4gICAgb3B0aW9ucztcbiAgICBjb25maWdzO1xuICAgIGNsdXN0ZXJFdmVudEVtaXR0ZXI7XG4gICAgY29udGVudE1hbmFnZXI7XG4gICAgY29ubmVjdGlvbk1hbmFnZXI7XG4gICAgc3Vic2NyaXB0aW9uTWFuYWdlcjtcbiAgICBzdGF0c01hbmFnZXI7XG4gICAgZGV0ZWN0aW9uTWFuYWdlcjtcbiAgICByZW1lZGlhdGlvbk1hbmFnZXI7XG4gICAgbm9kZU1hbmFnZXI7XG4gICAgZ3JhcGhTZXJ2aWNlO1xuICAgIHN5c3RlbVRvcGljID0gbmV3IFN5c3RlbVRvcGljKCk7XG4gICAgc3lzdGVtVG9waWNVbnN1YnNjcmliZTtcbiAgICBsb2NhbE5vZGU7XG4gICAgY29uc3RydWN0b3IodmVuZG9ySWQsIGNsdXN0ZXJJZCwgYXV0aE5vZGUsIGF1dGhTZXJ2aWNlLCBvcHRpb25zLCBjb25maWdzLCBjbHVzdGVyRXZlbnRFbWl0dGVyKSB7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMuYXV0aE5vZGUgPSBhdXRoTm9kZTtcbiAgICAgICAgdGhpcy5hdXRoU2VydmljZSA9IGF1dGhTZXJ2aWNlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLmNsdXN0ZXJFdmVudEVtaXR0ZXIgPSBjbHVzdGVyRXZlbnRFbWl0dGVyO1xuICAgICAgICBzd2l0Y2ggKGF1dGhOb2RlLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZVR5cGUuVXNlcjpcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsTm9kZSA9IG5ldyBMb2NhbFVzZXIoYXV0aE5vZGUuZ2V0SWQoKSwgYXV0aE5vZGUuZ2V0RGlzcGxheU5hbWUoKSwgYXV0aE5vZGUuZ2V0RW1haWwoKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE5vZGVUeXBlLkFnZW50OlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsTm9kZSA9IG5ldyBMb2NhbEFnZW50KGF1dGhOb2RlLmdldElkKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hbmFnZXJDb25maWdzID0gdGhpcy5nZXRDb25maWdzKCk7XG4gICAgICAgIHRoaXMuZ3JhcGhTZXJ2aWNlID0gbmV3IEdyYXBoU2VydmljZSh0aGlzLm9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyID0gbmV3IENvbnRlbnRNYW5hZ2VyKG1hbmFnZXJDb25maWdzLCB0aGlzLm9wdGlvbnMsIHRoaXMuY29uZmlncy5zZWFyY2hBcGlLZXkpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyID0gbmV3IENvbm5lY3Rpb25NYW5hZ2VyKG1hbmFnZXJDb25maWdzLCB0aGlzLmF1dGhTZXJ2aWNlLCB0aGlzLmdyYXBoU2VydmljZSwgdGhpcy5jb25maWdzLmljZVNlcnZlcnMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlciA9IG5ldyBTdWJzY3JpcHRpb25NYW5hZ2VyKG1hbmFnZXJDb25maWdzLCB0aGlzLm9wdGlvbnMubWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zLCB0aGlzLmdyYXBoU2VydmljZS5nZXRNYXhEaXN0YW5jZSgpKTtcbiAgICAgICAgdGhpcy5zdGF0c01hbmFnZXIgPSBuZXcgU3RhdHNNYW5hZ2VyKG1hbmFnZXJDb25maWdzKTtcbiAgICAgICAgdGhpcy5kZXRlY3Rpb25NYW5hZ2VyID0gbmV3IERldGVjdGlvbk1hbmFnZXIobWFuYWdlckNvbmZpZ3MpO1xuICAgICAgICB0aGlzLnJlbWVkaWF0aW9uTWFuYWdlciA9IG5ldyBSZW1lZGlhdGlvbk1hbmFnZXIobWFuYWdlckNvbmZpZ3MpO1xuICAgICAgICB0aGlzLm5vZGVNYW5hZ2VyID0gbmV3IE5vZGVNYW5hZ2VyKG1hbmFnZXJDb25maWdzLCB0aGlzLmdyYXBoU2VydmljZSk7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWNVbnN1YnNjcmliZSA9IHRoaXMuaW5pdGlhbGl6ZVN5c3RlbVRvcGljKCk7XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIGNvbnN0IG1hbmFnZXJDb25maWdzID0gdGhpcy5nZXRDb25maWdzKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIgPSBuZXcgQ29ubmVjdGlvbk1hbmFnZXIobWFuYWdlckNvbmZpZ3MsIHRoaXMuYXV0aFNlcnZpY2UsIHRoaXMuZ3JhcGhTZXJ2aWNlLCB0aGlzLmNvbmZpZ3MuaWNlU2VydmVycywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyID0gbmV3IFN1YnNjcmlwdGlvbk1hbmFnZXIobWFuYWdlckNvbmZpZ3MsIHRoaXMub3B0aW9ucy5tYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMsIHRoaXMuZ3JhcGhTZXJ2aWNlLmdldE1heERpc3RhbmNlKCkpO1xuICAgICAgICB0aGlzLnN0YXRzTWFuYWdlciA9IG5ldyBTdGF0c01hbmFnZXIobWFuYWdlckNvbmZpZ3MpO1xuICAgICAgICB0aGlzLmRldGVjdGlvbk1hbmFnZXIgPSBuZXcgRGV0ZWN0aW9uTWFuYWdlcihtYW5hZ2VyQ29uZmlncyk7XG4gICAgICAgIHRoaXMucmVtZWRpYXRpb25NYW5hZ2VyID0gbmV3IFJlbWVkaWF0aW9uTWFuYWdlcihtYW5hZ2VyQ29uZmlncyk7XG4gICAgICAgIHRoaXMubm9kZU1hbmFnZXIgPSBuZXcgTm9kZU1hbmFnZXIobWFuYWdlckNvbmZpZ3MsIHRoaXMuZ3JhcGhTZXJ2aWNlKTtcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25Hcm91cCgpO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldFB1YlN1YlRvcGljcygpLmZvckVhY2goKHRvcGljKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24odG9waWMsIGNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVJbmNvbWluZ1N1YnNjcmlwdGlvbihjb25uZWN0aW9ucywgdG9waWMpO1xuICAgICAgICAgICAgdG9waWMucmVzZXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0T2JqZWN0U3RvcmVCdWNrZXRzKCkuZm9yRWFjaCgoYnVja2V0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24oYnVja2V0LCBjb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24oY29ubmVjdGlvbnMsIGJ1Y2tldCk7XG4gICAgICAgICAgICBidWNrZXQucmVzZXQoKTtcbiAgICAgICAgICAgIGJ1Y2tldC5zeW5jKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldEtleVZhbHVlRGF0YWJhc2VzKCkuZm9yRWFjaCgoZGF0YWJhc2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbihkYXRhYmFzZSwgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCBkYXRhYmFzZSk7XG4gICAgICAgICAgICBkYXRhYmFzZS5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5zeW5jS2V5VmFsdWVEYXRhYmFzZShkYXRhYmFzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldEpvYkRpc3BhdGNoZXJzKCkuZm9yRWFjaCgoam9iU2VydmljZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uKGpvYlNlcnZpY2UsIGNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVJbmNvbWluZ1N1YnNjcmlwdGlvbihjb25uZWN0aW9ucywgam9iU2VydmljZSk7XG4gICAgICAgICAgICBqb2JTZXJ2aWNlLnJlc2V0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldEpvYldvcmtlcnMoKS5mb3JFYWNoKChqb2JXb3JrZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbihqb2JXb3JrZXIsIGNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVJbmNvbWluZ1N1YnNjcmlwdGlvbihjb25uZWN0aW9ucywgam9iV29ya2VyKTtcbiAgICAgICAgICAgIGpvYldvcmtlci5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250ZW50TWFuYWdlci5nZXRWZWN0b3JEYXRhYmFzZXMoKS5mb3JFYWNoKChkYXRhYmFzZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uKGRhdGFiYXNlLCBjb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24oY29ubmVjdGlvbnMsIGRhdGFiYXNlKTtcbiAgICAgICAgICAgIGRhdGFiYXNlLnJlc2V0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldEdyYXBoRGF0YWJhc2VzKCkuZm9yRWFjaCgoZGF0YWJhc2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbihkYXRhYmFzZSwgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCBkYXRhYmFzZSk7XG4gICAgICAgICAgICBkYXRhYmFzZS5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpY1Vuc3Vic2NyaWJlID0gdGhpcy5pbml0aWFsaXplU3lzdGVtVG9waWMoKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJTeXN0ZW1Tb3VyY2Uoc291cmNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnJlZ2lzdGVyU291cmNlKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2Uoc291cmNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnVucmVnaXN0ZXJTb3VyY2Uoc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQ29ubmVjdGlvbihyZW1vdGVJZCwgY29ubmVjdGlvblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuY3JlYXRlQ29ubmVjdGlvbihyZW1vdGVJZCwgY29ubmVjdGlvblR5cGUpO1xuICAgIH1cbiAgICBnZXRDb25uZWN0aW9uKHJlbW90ZUlkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uKHJlbW90ZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q29ubmVjdGlvbnMoc3RyYXRlZ3kpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25zKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmVtb3RlTWVkaWFTdHJlYW0ocmVtb3RlSWQsIGxhYmVsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TWFuYWdlci5nZXRSZW1vdGVNZWRpYVN0cmVhbXMoKHN0cmVhbSkgPT4gc3RyZWFtLmdldE93bmVySWQoKSA9PT0gcmVtb3RlSWQgJiYgc3RyZWFtLmdldExhYmVsKCkgPT09IGxhYmVsKVswXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TG9jYWxNZWRpYVN0cmVhbShsYWJlbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0TG9jYWxNZWRpYVN0cmVhbXMoKHN0cmVhbSkgPT4gc3RyZWFtLmdldExhYmVsKCkgPT09IGxhYmVsKVswXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm90aWZ5Q2x1c3RlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbHVzdGVyRXZlbnRFbWl0dGVyLmVtaXQoLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZWdpc3RlclJlbW90ZU5vZGUobm9kZUlkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRzTWFuYWdlci5hZGRSZW1vdGVOb2RlKG5vZGVJZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVucmVnaXN0ZXJSZW1vdGVOb2RlKG5vZGVJZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdGF0c01hbmFnZXIucmVtb3ZlUmVtb3RlTm9kZShub2RlSWQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb2xsZWN0U3RhdHMobm9kZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmNvbGxlY3RTdGF0cyhub2RlSWQpO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5pbml0aWFsaXplKCk7XG4gICAgICAgICAgICBjb25zdCBub2RlSWRzID0gYXdhaXQgdGhpcy5ub2RlTWFuYWdlci5kaXNjb3ZlcigpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBub2RlSWQgb2Ygbm9kZUlkcykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuY3JlYXRlQ29ubmVjdGlvbihub2RlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVVc2VyKHVzZXIpIHtcbiAgICAgICAgaWYgKHRoaXMubG9jYWxOb2RlLnR5cGUgIT09IE5vZGVUeXBlLlVzZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2FsTm9kZS5zZXRFbWFpbCh1c2VyLmdldEVtYWlsKCkpO1xuICAgICAgICB0aGlzLmxvY2FsTm9kZS5zZXREaXNwbGF5TmFtZSh1c2VyLmdldERpc3BsYXlOYW1lKCkpO1xuICAgIH1cbiAgICBjbG9zZSh7IGZvcmNlID0gZmFsc2UgfSwgcmVzZXQgPSBmYWxzZSkge1xuICAgICAgICBsb2dnZXIud2FybmluZygnb3JjaGVzdHJhdG9yLWNsb3NlJywge1xuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIG5vZGVJZDogdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFmb3JjZSAmJiB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmhhc0J1ZmZlcmVkRGF0YSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Db25uZWN0aW9uQnVmZmVyTm90RW1wdHksICdDYW5ub3QgY2xvc2UgdGhlIFNESyB3aGlsZSBkYXRhIGlzIGJlaW5nIHRyYW5zZmVycmVkLiBVc2UgYGZvcmNlYCBwYXJhbWV0ZXIgdG8gaW50ZXJydXB0IHRoZSBjb25uZWN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYXIgYmF0Y2hlZCBsb2dzIGJlZm9yZSBjbG9zaW5nXG4gICAgICAgIGxvZ2dlci5wcm9jZXNzQmF0Y2goKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpY1Vuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMucmVtZWRpYXRpb25NYW5hZ2VyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuZGV0ZWN0aW9uTWFuYWdlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLnN0YXRzTWFuYWdlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmNsb3NlKHJlc2V0KTtcbiAgICAgICAgdGhpcy5ub2RlTWFuYWdlci5jbG9zZSgpO1xuICAgIH1cbiAgICBvcGVuUHViU3ViVG9waWMobGFiZWwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHB1YlN1YkRhdGFUb3BpYyA9IHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlUHViU3ViVG9waWMobGFiZWwpO1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25Hcm91cCgpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uKHB1YlN1YkRhdGFUb3BpYywgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCBwdWJTdWJEYXRhVG9waWMpO1xuICAgICAgICAgICAgcmV0dXJuIHB1YlN1YkRhdGFUb3BpYztcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb3Blbk9iamVjdFN0b3JlQnVja2V0KGxhYmVsLCBvcHRpb25zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlT2JqZWN0U3RvcmVCdWNrZXQobGFiZWwsIHRoaXMub3B0aW9ucy5vYmplY3RTdG9yZUNvbm5lY3Rvcik7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbkdyb3VwKCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24ob2JqZWN0U3RvcmUsIGNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVJbmNvbWluZ1N1YnNjcmlwdGlvbihjb25uZWN0aW9ucywgb2JqZWN0U3RvcmUpO1xuICAgICAgICAgICAgYXdhaXQgb2JqZWN0U3RvcmUuc3luYyhvcHRpb25zPy5zeW5jQ29udGVudCA/PyB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3RTdG9yZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb3BlbktleVZhbHVlRGF0YWJhc2UobGFiZWwsIGxheW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qga2V5VmFsdWVEYXRhYmFzZSA9IGF3YWl0IHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlS2V5VmFsdWVEYXRhYmFzZShsYWJlbCwgbGF5b3V0LCB0aGlzLm9wdGlvbnMua2V5VmFsdWVEYXRhYmFzZUNvbm5lY3Rvcik7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbkdyb3VwKCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24oa2V5VmFsdWVEYXRhYmFzZSwgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCBrZXlWYWx1ZURhdGFiYXNlKTtcbiAgICAgICAgICAgIGF3YWl0IGtleVZhbHVlRGF0YWJhc2Uub3BlbigpO1xuICAgICAgICAgICAgdGhpcy5zeW5jS2V5VmFsdWVEYXRhYmFzZShrZXlWYWx1ZURhdGFiYXNlKTtcbiAgICAgICAgICAgIHJldHVybiBrZXlWYWx1ZURhdGFiYXNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvcGVuSm9iRGlzcGF0Y2hlcihsYWJlbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgam9iRGlzcGF0Y2hlciA9IGF3YWl0IHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlSm9iRGlzcGF0Y2hlcihsYWJlbCwgdGhpcy5ncmFwaFNlcnZpY2UpO1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25Hcm91cCgpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uKGpvYkRpc3BhdGNoZXIsIGNvbm5lY3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVJbmNvbWluZ1N1YnNjcmlwdGlvbihjb25uZWN0aW9ucywgam9iRGlzcGF0Y2hlcik7XG4gICAgICAgICAgICBqb2JEaXNwYXRjaGVyLm9wZW4oKTtcbiAgICAgICAgICAgIHJldHVybiBqb2JEaXNwYXRjaGVyO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvcGVuSm9iV29ya2VyKGxhYmVsKSB7XG4gICAgICAgIC8vIFRPRE8gLSBSZXZpZXcgaG93IHdlIHdhbnQgdG8gc3VwcG9ydCBvcGVuSm9iV29ya2VyIGZyb20gU0RLIENsaWVudFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuICAgIGFzeW5jIG9wZW5HZW5lcmF0aXZlQUlDb250ZXh0KGxhYmVsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0aXZlQUlDb250ZXh0ID0gYXdhaXQgdGhpcy5jb250ZW50TWFuYWdlci5jcmVhdGVHZW5lcmF0aXZlQUlDb250ZXh0KGxhYmVsLCB0aGlzLmdyYXBoU2VydmljZSk7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IHRoaXMuY29ubmVjdGlvbk1hbmFnZXIuZ2V0Q29ubmVjdGlvbkdyb3VwKCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlT3V0Z29pbmdTdWJzY3JpcHRpb24oZ2VuZXJhdGl2ZUFJQ29udGV4dCwgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCBnZW5lcmF0aXZlQUlDb250ZXh0KTtcbiAgICAgICAgICAgIGdlbmVyYXRpdmVBSUNvbnRleHQub3BlbigpO1xuICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRpdmVBSUNvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvcGVuR2VuZXJhdGl2ZUFJV29ya2VyKGxhYmVsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5nZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzIHx8ICF0aGlzLm9wdGlvbnMuZG9jdW1lbnRQYXJzZXJDb25uZWN0b3IgfHwgIXRoaXMub3B0aW9ucy5ubHBMaWJyYXJ5Q29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuR2VuZXJhdGl2ZUFJV29ya2VyTWlzc2luZ0Nvbm5lY3RvciwgJ01pc3NpbmcgQUkgd29ya2VyIGNvbm5lY3RvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEodGhpcy5hdXRoTm9kZSBpbnN0YW5jZW9mIEF1dGhBZ2VudCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Ob2RlSW52YWxpZFR5cGUsICdOb2RlIGlzIG5vdCBhbiBhZ2VudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWlXb3JrZXJDb25uZWN0b3JzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbm5lY3RvciBvZiB0aGlzLm9wdGlvbnMuZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgICAgIGFpV29ya2VyQ29ubmVjdG9ycy5wdXNoKG5ldyBjb25uZWN0b3IoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkb2N1bWVudFBhcnNlckNvbm5lY3RvciA9IG5ldyB0aGlzLm9wdGlvbnMuZG9jdW1lbnRQYXJzZXJDb25uZWN0b3IoKTtcbiAgICAgICAgICAgIGNvbnN0IG5scExpYnJhcnlDb25uZWN0b3IgPSBuZXcgdGhpcy5vcHRpb25zLm5scExpYnJhcnlDb25uZWN0b3IoKTtcbiAgICAgICAgICAgIGxldCBzZWFyY2hDb25uZWN0b3I7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNlYXJjaENvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgIHNlYXJjaENvbm5lY3RvciA9IG5ldyB0aGlzLm9wdGlvbnMuc2VhcmNoQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhaVdvcmtlciA9IGF3YWl0IHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlR2VuZXJhdGl2ZUFJV29ya2VyKGxhYmVsLCB0aGlzLmF1dGhOb2RlLCBhaVdvcmtlckNvbm5lY3RvcnMsIGRvY3VtZW50UGFyc2VyQ29ubmVjdG9yLCBubHBMaWJyYXJ5Q29ubmVjdG9yLCBzZWFyY2hDb25uZWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmdldENvbm5lY3Rpb25Hcm91cCgpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uKGFpV29ya2VyLCBjb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24oY29ubmVjdGlvbnMsIGFpV29ya2VyKTtcbiAgICAgICAgICAgIGNvbnN0IGFuY2VzdG9ycyA9IHRoaXMubm9kZU1hbmFnZXIuZ2V0QW5jZXN0b3JJZHMoKTtcbiAgICAgICAgICAgIGFpV29ya2VyLm9wZW4oYW5jZXN0b3JzLmxlbmd0aCA9PT0gMCA/IHRydWUgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgcmV0dXJuIGFpV29ya2VyO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvcGVuR3JhcGhEYXRhYmFzZShsYWJlbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZ3JhcGhEYXRhYmFzZUNvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLkdyYXBoRGF0YWJhc2VNaXNzaW5nQ29ubmVjdG9yLCAnTWlzc2luZyBncmFwaCBkYXRhYmFzZSBjb25uZWN0b3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKHRoaXMuYXV0aE5vZGUgaW5zdGFuY2VvZiBBdXRoQWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuTm9kZUludmFsaWRUeXBlLCAnTm9kZSBpcyBub3QgYW4gYWdlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGdyYXBoRGF0YWJhc2UgPSB0aGlzLmNvbnRlbnRNYW5hZ2VyLmNyZWF0ZUdyYXBoRGF0YWJhc2UobGFiZWwsIHRoaXMub3B0aW9ucy5ncmFwaERhdGFiYXNlQ29ubmVjdG9yKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gdGhpcy5jb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uR3JvdXAoKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbihncmFwaERhdGFiYXNlLCBjb25uZWN0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24oY29ubmVjdGlvbnMsIGdyYXBoRGF0YWJhc2UpO1xuICAgICAgICAgICAgcmV0dXJuIGdyYXBoRGF0YWJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW5WZWN0b3JEYXRhYmFzZShsYWJlbCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudmVjdG9yRGF0YWJhc2VDb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5WZWN0b3JEYXRhYmFzZU1pc3NpbmdDb25uZWN0b3IsICdNaXNzaW5nIHZlY3RvciBkYXRhYmFzZSBjb25uZWN0b3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKHRoaXMuYXV0aE5vZGUgaW5zdGFuY2VvZiBBdXRoQWdlbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuTm9kZUludmFsaWRUeXBlLCAnTm9kZSBpcyBub3QgYW4gYWdlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZlY3RvckRhdGFiYXNlID0gdGhpcy5jb250ZW50TWFuYWdlci5jcmVhdGVWZWN0b3JEYXRhYmFzZShsYWJlbCwgdGhpcy5vcHRpb25zLnZlY3RvckRhdGFiYXNlQ29ubmVjdG9yKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25zID0gdGhpcy5jb25uZWN0aW9uTWFuYWdlci5nZXRDb25uZWN0aW9uR3JvdXAoKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5jcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbih2ZWN0b3JEYXRhYmFzZSwgY29ubmVjdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uKGNvbm5lY3Rpb25zLCB2ZWN0b3JEYXRhYmFzZSk7XG4gICAgICAgICAgICByZXR1cm4gdmVjdG9yRGF0YWJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZSwge30pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFB1YlN1YlRvcGljcyhzdHJhdGVneSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0UHViU3ViVG9waWNzKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0T2JqZWN0U3RvcmVCdWNrZXRzKHN0cmF0ZWd5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TWFuYWdlci5nZXRPYmplY3RTdG9yZUJ1Y2tldHMoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRLZXlWYWx1ZURhdGFiYXNlcyhzdHJhdGVneSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0S2V5VmFsdWVEYXRhYmFzZXMoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRHZW5lcmF0aXZlQUlDb250ZXh0cyhzdHJhdGVneSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0R2VuZXJhdGl2ZUFJQ29udGV4dHMoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRHZW5lcmF0aXZlQUlXb3JrZXJzKHN0cmF0ZWd5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TWFuYWdlci5nZXRHZW5lcmF0aXZlQUlXb3JrZXJzKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0R3JhcGhEYXRhYmFzZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRNYW5hZ2VyLmdldEdyYXBoRGF0YWJhc2VzKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlTG9jYWxNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlTG9jYWxNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVMb2NhbER5bmFtaWNNZWRpYVN0cmVhbShsYWJlbCwgbWVkaWFTb3VyY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuY3JlYXRlTG9jYWxEeW5hbWljTWVkaWFTdHJlYW0obGFiZWwsIG1lZGlhU291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TG9jYWxNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0TG9jYWxNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSZW1vdGVNZWRpYVN0cmVhbXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ3MuZmVhdHVyZXMuaW5jbHVkZXMoSUludGVybmFsRmVhdHVyZXMuTWVkaWFTdHJlYW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5GZWF0dXJlTm90RW5hYmxlZCwgJ01lZGlhU3RyZWFtIGZlYXR1cmUgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudE1hbmFnZXIuZ2V0UmVtb3RlTWVkaWFTdHJlYW1zKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VmVjdG9yRGF0YWJhc2VzKHN0cmF0ZWd5KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50TWFuYWdlci5nZXRWZWN0b3JEYXRhYmFzZXMoc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXREaXN0YW5jZShzb3VyY2VJZCwgcmVtb3RlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZU1hbmFnZXIuZ2V0RGlzdGFuY2Uoc291cmNlSWQsIHJlbW90ZUlkKTtcbiAgICB9XG4gICAgZ2V0TG9jYWxOb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlTWFuYWdlci5nZXRMb2NhbE5vZGUoKTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlTm9kZXMoc3RyYXRlZ3kpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVNYW5hZ2VyLmdldFJlbW90ZU5vZGVzKHN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCB7fSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2FpdEZvckFycmF5QnVmZmVyU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbk1hbmFnZXIud2FpdEZvckFycmF5QnVmZmVyU2l6ZSgpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVTeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLkV2ZW50cywgJ09yY2hlc3RyYXRvciBoYW5kbGVTeXN0ZW1FdmVudHMnLCB0aGlzLm5vZGVNYW5hZ2VyLmdldExvY2FsSWQoKSwgZXZlbnQpO1xuICAgICAgICAgICAgaWYgKGlzU2VuZGVyKGV2ZW50LCB0aGlzLm5vZGVNYW5hZ2VyLmdldExvY2FsSWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25NYW5hZ2VyLmhhbmRsZU91dGdvaW5nU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50Lm1lc3NhZ2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBTeXN0ZW1NZXNzYWdlVHlwZS5Db250ZW50OlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRzTWFuYWdlci5oYW5kbGVDb250ZW50U3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmhhbmRsZUNvbnRlbnRTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRNYW5hZ2VyLmhhbmRsZUNvbnRlbnRTeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFN5c3RlbU1lc3NhZ2VUeXBlLk5vZGU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5oYW5kbGVOb2RlU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5oYW5kbGVOb2RlU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50TWFuYWdlci5oYW5kbGVOb2RlU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlTWFuYWdlci5oYW5kbGVOb2RlU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTeXN0ZW1NZXNzYWdlVHlwZS5EZXRlY3Rpb246XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtZWRpYXRpb25NYW5hZ2VyLmhhbmRsZURldGVjdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgU3lzdGVtTWVzc2FnZVR5cGUuUmVtZWRpYXRpb246XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtZWRpYXRpb25NYW5hZ2VyLmhhbmRsZVJlbWVkaWF0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTeXN0ZW1NZXNzYWdlVHlwZS5TdGF0czpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRlY3Rpb25NYW5hZ2VyLmhhbmRsZVN0YXRzU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTeXN0ZW1NZXNzYWdlVHlwZS5TdWJzY3JpcHRpb246XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5jb250ZW50LnR5cGUgIT09IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlVuc3Vic2NyaWJlTWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25TeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50TWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25TeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50TWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25TeXN0ZW1FdmVudHMoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTeXN0ZW1NZXNzYWdlVHlwZS5QZWVyQ29ubmVjdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uTWFuYWdlci5oYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHNNYW5hZ2VyLmhhbmRsZVBlZXJDb25uZWN0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlTWFuYWdlci5oYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5oYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIHt9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFcnJvcihlcnJvciwgY29udGV4dCkge1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFYXJseVJldHVybkVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU0RLQ2xpZW50RXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5JbnRlcm5hbFNES0Vycm9yLCBgSW50ZXJuYWwgdW5rbm93biBlcnJvcjogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShlcnJvciBpbnN0YW5jZW9mIFNES0ludGVybmFsRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5JbnRlcm5hbFNES0Vycm9yLCBgSW50ZXJuYWwgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5NaXNzaW5nU3lzdGVtVG9waWM6XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuTWlzc2luZ1JlbW90ZUNvbm5lY3Rpb246XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuUGVlckNvbm5lY3Rpb25JbnZhbGlkRGVzdGluYXRpb246XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuQ29ubmVjdGlvbk5vdGluaXRpYWxpemVkOlxuICAgICAgICAgICAgY2FzZSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLkNvbm5lY3Rpb25Ob3RDb25uZWN0ZWQ6XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZERhdGFDaGFubmVsOlxuICAgICAgICAgICAgY2FzZSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLkludmFsaWRQdWJsaXNoZXI6XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFN1YnNjcmliZXI6XG4gICAgICAgICAgICBjYXNlIFNES0ludGVybmFsRXJyb3IuY29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdERvZXNOb3RFeGlzdDpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0RmFpbGVkOlxuICAgICAgICAgICAgY2FzZSBTREtJbnRlcm5hbEVycm9yLmNvZGVzLlN1YnNjcmlwdGlvblJlcXVlc3ROb0Fuc3dlcjpcbiAgICAgICAgICAgIGNhc2UgU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkU3Vic2NyaXB0aW9uOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoYHNkay1pbnRlcm5hbC1lcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsIHtcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICB9LCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuSW50ZXJuYWxTREtFcnJvciwgYEludGVybmFsIFNESyBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldENvbmZpZ3MoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZWRpYXRvcjogdGhpcyxcbiAgICAgICAgICAgIHZlbmRvcklkOiB0aGlzLnZlbmRvcklkLFxuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgIGxvY2FsTm9kZTogdGhpcy5sb2NhbE5vZGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGluaXRpYWxpemVTeXN0ZW1Ub3BpYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3lzdGVtVG9waWMuc3Vic2NyaWJlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkU3lzdGVtTG9nID0gZ2V0Rm9ybWF0dGVkU3l0ZW1Mb2coZXZlbnQsIHRoaXMubG9jYWxOb2RlLmdldElkKCkpO1xuICAgICAgICAgICAgY29uc3QgbG9nZ2luZ0NsdXN0ZXIgPSBldmVudC5tZXNzYWdlVHlwZSA9PT0gU3lzdGVtTWVzc2FnZVR5cGUuU3RhdHNcbiAgICAgICAgICAgICAgICB8fCBldmVudC5tZXNzYWdlVHlwZSA9PT0gU3lzdGVtTWVzc2FnZVR5cGUuUGVlckNvbm5lY3Rpb24gJiYgZXZlbnQuY29udGVudC50eXBlID09PSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLlN0YXRzXG4gICAgICAgICAgICAgICAgPyBMb2dnaW5nQ2hhbm5lbHMuU3lzdGVtU3RhdHNcbiAgICAgICAgICAgICAgICA6IExvZ2dpbmdDaGFubmVscy5TeXN0ZW07XG4gICAgICAgICAgICBsb2dnZXIubG9nUmF3KGxvZ2dpbmdDbHVzdGVyLCBgJHtldmVudC51dWlkfSAtICR7Zm9ybWF0dGVkU3lzdGVtTG9nfWAsIGV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlU3lzdGVtRXZlbnRzKGV2ZW50KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gLSBuZWVkIHRvIHRyYWNrIHdoZXJlIHRoaXMgZXJyb3IgY29tZXMgZnJvbVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHN5bmNLZXlWYWx1ZURhdGFiYXNlKGtleVZhbHVlRGF0YWJhc2UsIGFuY2VzdG9yKSB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXRDYWxsYmFjayA9ICgpID0+IHRoaXMuc3luY0tleVZhbHVlRGF0YWJhc2Uoa2V5VmFsdWVEYXRhYmFzZSwgYW5jZXN0b3IpO1xuICAgICAgICBhbmNlc3RvciA9IHRoaXMuZmluZE5leHRBbmNlc3RvcihhbmNlc3Rvcik7XG4gICAgICAgIGF3YWl0IGtleVZhbHVlRGF0YWJhc2Uuc3luYyhhbmNlc3RvciwgdGltZW91dENhbGxiYWNrKTtcbiAgICB9XG4gICAgZmluZE5leHRBbmNlc3RvcihhbmNlc3Rvcikge1xuICAgICAgICBjb25zdCBhbmNlc3RvcnMgPSB0aGlzLm5vZGVNYW5hZ2VyLmdldEFuY2VzdG9ySWRzKCk7XG4gICAgICAgIGlmICghYW5jZXN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBhbmNlc3RvcnNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBhbmNlc3RvcnMuZmluZEluZGV4KChpZCkgPT4gYW5jZXN0b3IgPT09IGlkKTtcbiAgICAgICAgY29uc3QgbmV3QW5jZXN0b3IgPSBhbmNlc3RvcnNbaW5kZXggKyAxXTtcbiAgICAgICAgaWYgKGFuY2VzdG9ycy5sZW5ndGggPiAwICYmICFuZXdBbmNlc3Rvcikge1xuICAgICAgICAgICAgcmV0dXJuIGFuY2VzdG9yc1swXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3QW5jZXN0b3I7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ09OVEVOVF9NQVhfSEVJR0hULCBDT05URU5UX01BWF9XSURUSCB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IFJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFLCBSRU1FRElBVElPTl9NSU5fRlBTLCBSRU1FRElBVElPTl9NSU5fQklUUkFURSwgUkVNRURJQVRJT05fUkVTT0xVVElPTl9TQ0FMRSwgUkVNRURJQVRJT05fRlBTLCBSRU1FRElBVElPTl9CSVRSQVRFIH0gZnJvbSAnY29uc3RhbnRzL1JlbWVkaWF0aW9uJztcbmltcG9ydCB7IFJlbWVkaWF0aW9uQWN0aW9uLCBSZW1lZGlhdGlvbkNvbXBvbmVudCB9IGZyb20gJ2ludGVyZmFjZXMvUmVtZWRpYXRpb24vUmVtZWRpYXRpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTZW5kZXIoc2VuZGVycywgcmVtZWRpYXRpb24pIHtcbiAgICBjb25zdCBzb3J0ZWRTZW5kZXJzID0gc2VuZGVycy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChyZW1lZGlhdGlvbi5hY3Rpb24gPT09IFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZSkge1xuICAgICAgICAgICAgcmV0dXJuIGIucHJpb3JpdHkgLSBhLnByaW9yaXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eTtcbiAgICB9KTtcbiAgICByZXR1cm4gc29ydGVkU2VuZGVycy5maW5kKChzZW5kZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIGNhblJlbWVkaWF0ZShzZW5kZXIsIHJlbWVkaWF0aW9uKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVJlbWVkaWF0aW9uKHNlbmRlck1hcCwgcmVtZWRpYXRpb24pIHtcbiAgICBpZiAoc2VuZGVyTWFwLnRyYWNrcy52aWRlbyAmJiBzZW5kZXJNYXAudHJhY2tzLnZpZGVvLnNlbmRlcikge1xuICAgICAgICBzZW5kZXJNYXAucmVzb2x1dGlvblNjYWxlID0gZ2V0UmVzb2x1dGlvblNjYWxlKHNlbmRlck1hcC5yZXNvbHV0aW9uU2NhbGUsIHNlbmRlck1hcC5taW5SZXNvbHV0aW9uU2NhbGUsIHJlbWVkaWF0aW9uKTtcbiAgICAgICAgc2VuZGVyTWFwLmZyYW1lcmF0ZSA9IGdldEZyYW1lcmF0ZShzZW5kZXJNYXAuZnJhbWVyYXRlLCBzZW5kZXJNYXAubWF4RnJhbWVyYXRlLCByZW1lZGlhdGlvbik7XG4gICAgICAgIHNlbmRlck1hcC5iaXRyYXRlID0gZ2V0Qml0cmF0ZShzZW5kZXJNYXAuYml0cmF0ZSwgc2VuZGVyTWFwLm1heEJpdHJhdGUsIHJlbWVkaWF0aW9uKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4Qml0cmF0ZShmcHMsIGJwcCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKENPTlRFTlRfTUFYX1dJRFRIICogQ09OVEVOVF9NQVhfSEVJR0hUICogZnBzICogYnBwKTtcbn1cbmZ1bmN0aW9uIGdldFJlc29sdXRpb25TY2FsZShyZXNvbHV0aW9uU2NhbGUsIG1pblJlc29sdXRpb25TY2FsZSwgcmVtZWRpYXRpb24pIHtcbiAgICBzd2l0Y2ggKHJlbWVkaWF0aW9uLmFjdGlvbikge1xuICAgICAgICBjYXNlIFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZTpcbiAgICAgICAgICAgIGlmIChyZW1lZGlhdGlvbi5jb21wb25lbnQgPT09IFJlbWVkaWF0aW9uQ29tcG9uZW50LlJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uU2NhbGUgKz0gUkVNRURJQVRJT05fUkVTT0xVVElPTl9TQ0FMRTtcbiAgICAgICAgICAgICAgICBpZiAocmVzb2x1dGlvblNjYWxlID4gUkVNRURJQVRJT05fTUFYX1JFU09MVVRJT05fU0NBTEUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvblNjYWxlID0gUkVNRURJQVRJT05fTUFYX1JFU09MVVRJT05fU0NBTEU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVtZWRpYXRpb25BY3Rpb24uVXBncmFkZTpcbiAgICAgICAgICAgIHJlc29sdXRpb25TY2FsZSAtPSBSRU1FRElBVElPTl9SRVNPTFVUSU9OX1NDQUxFO1xuICAgICAgICAgICAgaWYgKHJlc29sdXRpb25TY2FsZSA8IG1pblJlc29sdXRpb25TY2FsZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb25TY2FsZSA9IG1pblJlc29sdXRpb25TY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb2x1dGlvblNjYWxlO1xufVxuZnVuY3Rpb24gZ2V0RnJhbWVyYXRlKGZyYW1lcmF0ZSwgbWF4RnJhbWVyYXRlLCByZW1lZGlhdGlvbikge1xuICAgIHN3aXRjaCAocmVtZWRpYXRpb24uYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgUmVtZWRpYXRpb25BY3Rpb24uRG93bmdyYWRlOlxuICAgICAgICAgICAgaWYgKHJlbWVkaWF0aW9uLmNvbXBvbmVudCA9PT0gUmVtZWRpYXRpb25Db21wb25lbnQuUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIGZyYW1lcmF0ZSAtPSBSRU1FRElBVElPTl9GUFM7XG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lcmF0ZSA8IFJFTUVESUFUSU9OX01JTl9GUFMpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVyYXRlID0gUkVNRURJQVRJT05fTUlOX0ZQUztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZW1lZGlhdGlvbkFjdGlvbi5VcGdyYWRlOlxuICAgICAgICAgICAgZnJhbWVyYXRlICs9IFJFTUVESUFUSU9OX0ZQUztcbiAgICAgICAgICAgIGlmIChmcmFtZXJhdGUgPiBtYXhGcmFtZXJhdGUpIHtcbiAgICAgICAgICAgICAgICBmcmFtZXJhdGUgPSBtYXhGcmFtZXJhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGZyYW1lcmF0ZTtcbn1cbmZ1bmN0aW9uIGdldEJpdHJhdGUoYml0cmF0ZSwgbWF4Qml0cmF0ZSwgcmVtZWRpYXRpb24pIHtcbiAgICBzd2l0Y2ggKHJlbWVkaWF0aW9uLmFjdGlvbikge1xuICAgICAgICBjYXNlIFJlbWVkaWF0aW9uQWN0aW9uLkRvd25ncmFkZTpcbiAgICAgICAgICAgIGlmIChyZW1lZGlhdGlvbi5jb21wb25lbnQgPT09IFJlbWVkaWF0aW9uQ29tcG9uZW50LkJpdHJhdGUpIHtcbiAgICAgICAgICAgICAgICBiaXRyYXRlICo9ICgxIC0gUkVNRURJQVRJT05fQklUUkFURSk7XG4gICAgICAgICAgICAgICAgaWYgKGJpdHJhdGUgPCBSRU1FRElBVElPTl9NSU5fQklUUkFURSkge1xuICAgICAgICAgICAgICAgICAgICBiaXRyYXRlID0gUkVNRURJQVRJT05fTUlOX0JJVFJBVEU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVtZWRpYXRpb25BY3Rpb24uVXBncmFkZTpcbiAgICAgICAgICAgIGJpdHJhdGUgKj0gKDEgKyBSRU1FRElBVElPTl9CSVRSQVRFKTtcbiAgICAgICAgICAgIGlmIChiaXRyYXRlID4gbWF4Qml0cmF0ZSkge1xuICAgICAgICAgICAgICAgIGJpdHJhdGUgPSBtYXhCaXRyYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBiaXRyYXRlO1xufVxuZnVuY3Rpb24gY2FuUmVtZWRpYXRlKHNlbmRlck1hcCwgcmVtZWRpYXRpb24pIHtcbiAgICBpZiAocmVtZWRpYXRpb24uYWN0aW9uID09PSBSZW1lZGlhdGlvbkFjdGlvbi5Eb3duZ3JhZGUpIHtcbiAgICAgICAgaWYgKHJlbWVkaWF0aW9uLmNvbXBvbmVudCA9PT0gUmVtZWRpYXRpb25Db21wb25lbnQuUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHNlbmRlck1hcC5yZXNvbHV0aW9uU2NhbGUgPCBSRU1FRElBVElPTl9NQVhfUkVTT0xVVElPTl9TQ0FMRSB8fCBzZW5kZXJNYXAubWF4RnJhbWVyYXRlID4gUkVNRURJQVRJT05fTUlOX0ZQUztcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVtZWRpYXRpb24uY29tcG9uZW50ID09PSBSZW1lZGlhdGlvbkNvbXBvbmVudC5CaXRyYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VuZGVyTWFwLm1heEJpdHJhdGUgPiBSRU1FRElBVElPTl9NSU5fQklUUkFURTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VuZGVyTWFwLnJlc29sdXRpb25TY2FsZSA+IHNlbmRlck1hcC5taW5SZXNvbHV0aW9uU2NhbGUgfHwgc2VuZGVyTWFwLmZyYW1lcmF0ZSA8IHNlbmRlck1hcC5tYXhGcmFtZXJhdGUgfHwgc2VuZGVyTWFwLmJpdHJhdGUgPCBzZW5kZXJNYXAubWF4Qml0cmF0ZTtcbn1cbiIsImltcG9ydCB7IFJFTUVESUFUSU9OX0RPV05HUkFERV9XQUlUX1RJTUUgfSBmcm9tICdjb25zdGFudHMvUmVtZWRpYXRpb24nO1xuaW1wb3J0IHsgUkVNRURJQVRJT05fUlVMRVMgfSBmcm9tICdjb25zdGFudHMvUmVtZWRpYXRpb25SdWxlcyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uT3JpZ2luIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IERldGVjdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9EZXRlY3Rpb24vRGV0ZWN0aW9uJztcbmltcG9ydCB7IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1JlbWVkaWF0aW9uL1JlbWVkaWF0aW9uJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBSZW1lZGlhdGlvbk1hbmFnZXIge1xuICAgIGNvbmZpZ3M7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgbGFzdFJlbWVkaWF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzKSB7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxuICAgIGhhbmRsZURldGVjdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBEZXRlY3Rpb25NZXNzYWdlVHlwZS5Qcm9ibGVtOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUHJvYmxlbShldmVudC5jb250ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVJlbWVkaWF0aW9uU3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtb3RlUmVtZWRpYXRpb246XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVJlbWVkaWF0aW9uKGV2ZW50LnNvdXJjZUlkLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFJlbWVkaWF0aW9uTWVzc2FnZVR5cGUuUmVtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogZXZlbnQuY29udGVudC5kYXRhLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBldmVudC5jb250ZW50LmRhdGEuYWN0aW9uLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVByb2JsZW0ocHJvYmxlbSkge1xuICAgICAgICBjb25zdCBydWxlID0gUkVNRURJQVRJT05fUlVMRVMuZmluZCgocikgPT4gci5wcm9ibGVtVHlwZSA9PT0gcHJvYmxlbS50eXBlKTtcbiAgICAgICAgcnVsZS5yZW1lZGlhdGlvbnM/LmZvckVhY2goKHJlbWVkaWF0aW9uKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5UmVtZWRpYXRpb24ocHJvYmxlbS5ub2RlSWQsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAocHJvYmxlbS5vcmlnaW4gPT09IFBlZXJDb25uZWN0aW9uT3JpZ2luLlNlbmRlcikgPyBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uIDogUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1vdGVSZW1lZGlhdGlvbixcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IHJlbWVkaWF0aW9uLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhY3Rpb246IHJlbWVkaWF0aW9uLmFjdGlvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXBwbHlSZW1lZGlhdGlvbihub2RlSWQsIHJlbWVkaWF0aW9uKSB7XG4gICAgICAgIGlmIChyZW1lZGlhdGlvbi50eXBlID09PSBSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgbGFzdFJlbWVkaWF0aW9uID0gdGhpcy5sYXN0UmVtZWRpYXRpb25zLmdldChub2RlSWQpO1xuICAgICAgICAgICAgaWYgKGxhc3RSZW1lZGlhdGlvbiAmJiAobm93IC0gbGFzdFJlbWVkaWF0aW9uKSA8IFJFTUVESUFUSU9OX0RPV05HUkFERV9XQUlUX1RJTUUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3RSZW1lZGlhdGlvbnMuc2V0KG5vZGVJZCwgbm93KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5SZW1lZGlhdGlvbiwgJ0FwcGx5IHJlbWVkaWF0aW9uJywgcmVtZWRpYXRpb24pO1xuICAgICAgICBsb2dnZXIubG9nRXZlbnQoJ3JlbWVkaWF0aW9uJywge1xuICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNvbmZpZ3MuY2x1c3RlcklkLFxuICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5jb25maWdzLmxvY2FsTm9kZS50eXBlLFxuICAgICAgICAgICAgcmVtb3RlSWQ6IG5vZGVJZCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiByZW1lZGlhdGlvbi50eXBlLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogcmVtZWRpYXRpb24uY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFjdGlvbjogcmVtZWRpYXRpb24uYWN0aW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBzb3VyY2VJZCA9IFNZU1RFTV9UT1BJQ19JTlRFUk5BTDtcbiAgICAgICAgbGV0IGRlc3RpbmF0aW9uSWRzO1xuICAgICAgICBpZiAocmVtZWRpYXRpb24udHlwZSA9PT0gUmVtZWRpYXRpb25NZXNzYWdlVHlwZS5SZW1vdGVSZW1lZGlhdGlvbikge1xuICAgICAgICAgICAgc291cmNlSWQgPSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCk7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkcyA9IFtub2RlSWRdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlJlbWVkaWF0aW9uLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IHJlbWVkaWF0aW9uLnR5cGUsXG4gICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG5vZGVJZCxcbiAgICAgICAgICAgICAgICBkYXRhOiByZW1lZGlhdGlvbixcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZG9jLCBnZXREb2MgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgaHR0cHNDYWxsYWJsZSB9IGZyb20gJ2ZpcmViYXNlL2Z1bmN0aW9ucyc7XG5pbXBvcnQgeyBPUEZTT2JqZWN0U3RvcmVDb25uZWN0b3IgfSBmcm9tICdAY3Jld2RsZS9taXN0LWNvbm5lY3Rvci1vcGZzJztcbmltcG9ydCB7IElEQkRhdGFiYXNlQ29ubmVjdG9yIH0gZnJvbSAnQGNyZXdkbGUvbWlzdC1jb25uZWN0b3ItaW5kZXhlZC1kYic7XG5pbXBvcnQgeyBXZWJSVENCcm93c2VyUGVlckNvbm5lY3Rpb25Db25uZWN0b3IgfSBmcm9tICdAY3Jld2RsZS9taXN0LWNvbm5lY3Rvci13ZWJydGMtYnJvd3Nlcic7XG5pbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU0RLQ2xpZW50RXJyb3IsIFNES0NsaWVudEVycm9yQ29kZXMgfSBmcm9tICdwdWJsaWMvZXJyb3JzL1NES0NsaWVudEVycm9yJztcbmltcG9ydCB7IENPTk5FQ1RJT05fTUFYLCBDT05ORUNUSU9OX01JTiB9IGZyb20gJ2NvbnN0YW50cy9Db25uZWN0aW9uJztcbmltcG9ydCB7IENPTlRFTlRfQlBQLCBDT05URU5UX0ZQUyB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IE5PREVfRElTVEFOQ0VfTUFYIH0gZnJvbSAnY29uc3RhbnRzL05vZGUnO1xuaW1wb3J0IHsgU0RLX1JFRlJFU0hfSU5URVJWQUwgfSBmcm9tICdjb25zdGFudHMvU0RLJztcbmltcG9ydCB7IFNVQlNDUklQVElPTl9NQVhfT1VUR09JTkcgfSBmcm9tICdjb25zdGFudHMvU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IEVudmlyb25tZW50IH0gZnJvbSAnZW52aXJvbm1lbnRzL0Vudmlyb25tZW50JztcbmltcG9ydCB7IFN1cHBvcnRGZWF0dXJlTmFtZSB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvU3VwcG9ydCc7XG5pbXBvcnQgeyBDbHVzdGVyIH0gZnJvbSAnbW9kZWxzL0NsdXN0ZXIvQ2x1c3Rlcic7XG5pbXBvcnQgeyBBdXRoQWdlbnQgfSBmcm9tICdtb2RlbHMvTm9kZS9BdXRoQWdlbnQnO1xuaW1wb3J0IHsgQXV0aFVzZXIgfSBmcm9tICdtb2RlbHMvTm9kZS9BdXRoVXNlcic7XG5pbXBvcnQgeyBGaXJlYmFzZUF1dGhTZXJ2aWNlIH0gZnJvbSAnc2VydmljZXMvQXV0aC9GaXJlYmFzZUF1dGhTZXJ2aWNlJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdzZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UnO1xuaW1wb3J0IGludGVydmFsIGZyb20gJ3V0aWxzL0ludGVydmFsL0ludGVydmFsJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQgc3VwcG9ydCBmcm9tICd1dGlscy9TdXBwb3J0L1N1cHBvcnQnO1xuZXhwb3J0IGNsYXNzIFNESyB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIHN0YXRpYyB1bnN1YnNjcmliZTtcbiAgICBhdXRoU2VydmljZTtcbiAgICB2ZW5kb3JJZDtcbiAgICBvcHRpb25zO1xuICAgIGNvbmZpZ3M7XG4gICAgY2x1c3RlcnMgPSBuZXcgTWFwKCk7XG4gICAgYXV0aENvbnRleHQ7XG4gICAgY29uc3RydWN0b3IodmVuZG9ySWQsIGNvbmZpZ3MsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy52ZW5kb3JJZCA9IHZlbmRvcklkO1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLmF1dGhTZXJ2aWNlID0gbmV3IEZpcmViYXNlQXV0aFNlcnZpY2UodGhpcy52ZW5kb3JJZCk7XG4gICAgICAgIHN1cHBvcnQuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBhdWRpb0NvbnRleHQ6IG9wdGlvbnM/LmF1ZGlvQ29udGV4dCA/PyAoc3VwcG9ydC5pc0ZlYXR1cmVTdXBwb3J0ZWQoU3VwcG9ydEZlYXR1cmVOYW1lLkF1ZGlvQ29udGV4dCkgJiYgbmV3IEF1ZGlvQ29udGV4dCgpIHx8IHVuZGVmaW5lZCksXG4gICAgICAgICAgICBtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnM6IG9wdGlvbnM/Lm1heE91dGdvaW5nU3Vic2NyaXB0aW9ucyA/PyBTVUJTQ1JJUFRJT05fTUFYX09VVEdPSU5HLFxuICAgICAgICAgICAgbWluQ29ubmVjdGlvbnM6IG9wdGlvbnM/Lm1pbkNvbm5lY3Rpb25zID8/IENPTk5FQ1RJT05fTUlOLFxuICAgICAgICAgICAgbWF4Q29ubmVjdGlvbnM6IG9wdGlvbnM/Lm1heENvbm5lY3Rpb25zID8/IChvcHRpb25zPy5taW5Db25uZWN0aW9ucyAmJiA0ICogb3B0aW9ucy5taW5Db25uZWN0aW9ucykgPz8gQ09OTkVDVElPTl9NQVgsXG4gICAgICAgICAgICBtYXhEaXN0YW5jZTogb3B0aW9ucz8ubWF4RGlzdGFuY2UgPz8gTk9ERV9ESVNUQU5DRV9NQVgsXG4gICAgICAgICAgICBtYXhGcHM6IG9wdGlvbnM/Lm1heEZwcyA/PyBDT05URU5UX0ZQUyxcbiAgICAgICAgICAgIG1heEJwcDogb3B0aW9ucz8ubWF4QnBwID8/IENPTlRFTlRfQlBQLFxuICAgICAgICAgICAgb2JqZWN0U3RvcmVDb25uZWN0b3I6IG9wdGlvbnM/Lm9iamVjdFN0b3JlQ29ubmVjdG9yID8/IE9QRlNPYmplY3RTdG9yZUNvbm5lY3RvcixcbiAgICAgICAgICAgIGtleVZhbHVlRGF0YWJhc2VDb25uZWN0b3I6IG9wdGlvbnM/LmtleVZhbHVlRGF0YWJhc2VDb25uZWN0b3IgPz8gSURCRGF0YWJhc2VDb25uZWN0b3IsXG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbkNvbm5lY3Rvcjogb3B0aW9ucz8ucGVlckNvbm5lY3Rpb25Db25uZWN0b3IgPz8gV2ViUlRDQnJvd3NlclBlZXJDb25uZWN0aW9uQ29ubmVjdG9yLFxuICAgICAgICAgICAgZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9yczogb3B0aW9ucz8uZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9ycyxcbiAgICAgICAgICAgIHZlY3RvckRhdGFiYXNlQ29ubmVjdG9yOiBvcHRpb25zPy52ZWN0b3JEYXRhYmFzZUNvbm5lY3RvcixcbiAgICAgICAgICAgIGdyYXBoRGF0YWJhc2VDb25uZWN0b3I6IG9wdGlvbnM/LmdyYXBoRGF0YWJhc2VDb25uZWN0b3IsXG4gICAgICAgICAgICBkb2N1bWVudFBhcnNlckNvbm5lY3Rvcjogb3B0aW9ucz8uZG9jdW1lbnRQYXJzZXJDb25uZWN0b3IsXG4gICAgICAgICAgICBubHBMaWJyYXJ5Q29ubmVjdG9yOiBvcHRpb25zPy5ubHBMaWJyYXJ5Q29ubmVjdG9yLFxuICAgICAgICAgICAgc2VhcmNoQ29ubmVjdG9yOiBvcHRpb25zPy5zZWFyY2hDb25uZWN0b3IsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvcHRpb25zPy5kaXNhYmxlSW50ZXJ2YWxIYWNrICYmIHRoaXMub3B0aW9ucy5hdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIGludGVydmFsLnN0YXJ0Tm9UaHJvdHRsaW5nSGFjayh0aGlzLm9wdGlvbnMuYXVkaW9Db250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuc2V0VmVuZG9ySWQodGhpcy52ZW5kb3JJZCk7XG4gICAgICAgIGlmIChvcHRpb25zPy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgbG9nZ2VyLnNldExvZ2dpbmdDb25uZWN0b3JzKG9wdGlvbnMubG9nZ2luZ0Nvbm5lY3RvcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBnZXRJbnN0YW5jZSh2ZW5kb3JJZCwgYWNjZXNzVG9rZW4sIG9wdGlvbnMsIHNlY3JldEtleSkge1xuICAgICAgICBjb25zdCBjb25maWdzID0gYXdhaXQgdGhpcy52YWxpZGF0ZUFjY2Vzcyh2ZW5kb3JJZCwgYWNjZXNzVG9rZW4sIHNlY3JldEtleSk7XG4gICAgICAgIGlmICghU0RLLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBTREsuaW5zdGFuY2UgPSBuZXcgU0RLKHZlbmRvcklkLCBjb25maWdzLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xvc2U6IFNESy5pbnN0YW5jZS5jbG9zZS5iaW5kKFNESy5pbnN0YW5jZSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGVVc2VyOiBTREsuaW5zdGFuY2UuYXV0aGVudGljYXRlVXNlci5iaW5kKFNESy5pbnN0YW5jZSksXG4gICAgICAgICAgICBhdXRoZW50aWNhdGVBZ2VudDogU0RLLmluc3RhbmNlLmF1dGhlbnRpY2F0ZUFnZW50LmJpbmQoU0RLLmluc3RhbmNlKSxcbiAgICAgICAgICAgIGpvaW5DbHVzdGVyOiBTREsuaW5zdGFuY2Uuam9pbkNsdXN0ZXIuYmluZChTREsuaW5zdGFuY2UpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgdGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gZmlyZWJhc2UuZ2V0RXN0aW1hdGVkVGltZXN0YW1wKCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc1Byb2R1Y3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBFbnZpcm9ubWVudC5pc1Byb2R1Y3Rpb247XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5jbHVzdGVycy5mb3JFYWNoKChjbHVzdGVyKSA9PiB7XG4gICAgICAgICAgICBjbHVzdGVyLm9mZigpO1xuICAgICAgICAgICAgY2x1c3Rlci5sZWF2ZShvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2x1c3RlcnMuY2xlYXIoKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIGludGVydmFsLnN0b3BOb1Rocm90dGxpbmdIYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgU0RLLnVuc3Vic2NyaWJlPy4oKTtcbiAgICAgICAgU0RLLnVuc3Vic2NyaWJlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmF1dGhDb250ZXh0ID0gdW5kZWZpbmVkO1xuICAgICAgICBhd2FpdCB0aGlzLmF1dGhTZXJ2aWNlLnNpZ25PdXQoKTtcbiAgICAgICAgU0RLLmluc3RhbmNlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgdmFsaWRhdGVBY2Nlc3ModmVuZG9ySWQsIGFjY2Vzc1Rva2VuLCBzZWNyZXRLZXkpIHtcbiAgICAgICAgbGV0IGNvbmZpZ3M7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25maWdzID0gYXdhaXQgaHR0cHNDYWxsYWJsZShmaXJlYmFzZS5nZXRGdW5jdGlvbnMoKSwgJ3Nka1ZhbGlkYXRlQWNjZXNzJykoe1xuICAgICAgICAgICAgICAgIHZlbmRvcklkLFxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuSW52YWxpZEFjY2VzcywgJ0ludmFsaWQgY3JlZGVudGlhbHMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNJbnRlcm5hbFNES0NvbmZpZ3MoY29uZmlncy5kYXRhKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuSW52YWxpZEFjY2VzcywgJ0ludmFsaWQgY3JlZGVudGlhbHMnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gY29uZmlncy5kYXRhO1xuICAgICAgICBpZiAoIWRhdGEuZmVhdHVyZXMpIHtcbiAgICAgICAgICAgIGRhdGEuZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSA9IGludGVydmFsLnNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RGF0YSA9IGF3YWl0IHRoaXMudmFsaWRhdGVBY2Nlc3ModmVuZG9ySWQsIGFjY2Vzc1Rva2VuLCBzZWNyZXRLZXkpO1xuICAgICAgICAgICAgICAgIGRhdGEuaWNlU2VydmVycyA9IG5ld0RhdGEuaWNlU2VydmVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2hlY2sgaWYgd2Ugd2FudCB0byB1c2UgdGhpcyB0byBoYW5kbGUgcmVtb3ZpbmcgYWNjZXNzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIFNES19SRUZSRVNIX0lOVEVSVkFMKTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGFzeW5jIGF1dGhlbnRpY2F0ZVVzZXIoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoU2VydmljZS5zaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFscyk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgQXV0aFVzZXIoY3JlZGVudGlhbHMuaWQsIGNyZWRlbnRpYWxzLmRpc3BsYXlOYW1lLCBjcmVkZW50aWFscy5lbWFpbCk7XG4gICAgICAgIHRoaXMuYXV0aENvbnRleHQgPSB7XG4gICAgICAgICAgICBub2RlOiB1c2VyLFxuICAgICAgICB9O1xuICAgICAgICBzdXBwb3J0LmxvZ1N1cHBvcnQodXNlcik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5Vc2VyLFxuICAgICAgICAgICAgZ2V0SWQ6IHVzZXIuZ2V0SWQuYmluZCh1c2VyKSxcbiAgICAgICAgICAgIGdldERpc3BsYXlOYW1lOiB1c2VyLmdldERpc3BsYXlOYW1lLmJpbmQodXNlciksXG4gICAgICAgICAgICBnZXRFbWFpbDogdXNlci5nZXRFbWFpbC5iaW5kKHVzZXIpLFxuICAgICAgICAgICAgc2V0RGlzcGxheU5hbWU6IHVzZXIuc2V0RGlzcGxheU5hbWUuYmluZCh1c2VyKSxcbiAgICAgICAgICAgIHNldEVtYWlsOiB1c2VyLnNldEVtYWlsLmJpbmQodXNlciksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGF1dGhlbnRpY2F0ZUFnZW50KGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGdyb3VwSWQgfSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICBjb25zdCBhZ2VudERvYyA9IGF3YWl0IGdldERvYyhkb2MoZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGBkZXZlbG9wZXJzLyR7dGhpcy52ZW5kb3JJZH0vcmVzb3VyY2VzL2FnZW50L2l0ZW1zLyR7Z3JvdXBJZH1gKSk7XG4gICAgICAgIGlmICghYWdlbnREb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk5vZGVOb3RBdXRoZW50aWNhdGVkLCAnQWdlbnQgZ3JvdXAgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWdlbnRDb25maWcgPSBhZ2VudERvYy5kYXRhKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aFNlcnZpY2Uuc2lnbkluV2l0aENyZWRlbnRpYWwoe1xuICAgICAgICAgICAgaWQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBhZ2VudCA9IG5ldyBBdXRoQWdlbnQoaWQsIGdyb3VwSWQsIHRoaXMudmVuZG9ySWQsIGFnZW50Q29uZmlnKTtcbiAgICAgICAgdGhpcy5hdXRoQ29udGV4dCA9IHtcbiAgICAgICAgICAgIG5vZGU6IGFnZW50LFxuICAgICAgICB9O1xuICAgICAgICBzdXBwb3J0LmxvZ1N1cHBvcnQoYWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3RBZ2VudChhZ2VudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZS5BZ2VudCxcbiAgICAgICAgICAgIGdldElkOiBhZ2VudC5nZXRJZC5iaW5kKGFnZW50KSxcbiAgICAgICAgICAgIG9uQ29uZmlndXJhdGlvbkNoYW5nZTogYWdlbnQub25Db25maWd1cmF0aW9uQ2hhbmdlLmJpbmQoYWdlbnQpLFxuICAgICAgICAgICAgc2V0UmVwb3J0Q2FwYWNpdHk6IGFnZW50LnNldFJlcG9ydENhcGFjaXR5LmJpbmQoYWdlbnQpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBqb2luQ2x1c3RlcihjbHVzdGVySWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmF1dGhDb250ZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5Ob2RlTm90QXV0aGVudGljYXRlZCwgJ05vZGUgbm90IGF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hdXRoQ29udGV4dC5ub2RlLnR5cGUgIT09IE5vZGVUeXBlLlVzZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLk5vZGVUeXBlTm90U3VwcG9ydGVkLCAnQ2Fubm90IGpvaW4gYSBjbHVzdGVyIGlmIHRoZSBub2RlIGlzIG5vdCBhIHVzZXInKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jbHVzdGVycy5oYXMoY2x1c3RlcklkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuQ2x1c3RlckFscmVhZHlKb2luZWQsICdDbHVzdGVyIGFscmVhZHkgam9pbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2x1c3RlciA9IG5ldyBDbHVzdGVyKHRoaXMudmVuZG9ySWQsIGNsdXN0ZXJJZCwgdGhpcy5hdXRoQ29udGV4dC5ub2RlLCB0aGlzLmF1dGhTZXJ2aWNlLCB0aGlzLm9wdGlvbnMsIHRoaXMuY29uZmlncyk7XG4gICAgICAgIGF3YWl0IGNsdXN0ZXIuam9pbigpO1xuICAgICAgICB0aGlzLmFkZENsdXN0ZXIoY2x1c3RlcklkLCBjbHVzdGVyKTtcbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdqb2luLWNsdXN0ZXInLCB7XG4gICAgICAgICAgICBjbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMuYXV0aENvbnRleHQubm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMuYXV0aENvbnRleHQubm9kZS50eXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlYXZlOiBjbHVzdGVyLmxlYXZlLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRMb2NhbE5vZGU6IGNsdXN0ZXIuZ2V0TG9jYWxOb2RlLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBvcGVuUHViU3ViVG9waWM6IGNsdXN0ZXIub3BlblB1YlN1YlRvcGljLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBvcGVuT2JqZWN0U3RvcmVCdWNrZXQ6IGNsdXN0ZXIub3Blbk9iamVjdFN0b3JlQnVja2V0LmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBvcGVuS2V5VmFsdWVEYXRhYmFzZTogY2x1c3Rlci5vcGVuS2V5VmFsdWVEYXRhYmFzZS5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgb3BlbkdlbmVyYXRpdmVBSUNvbnRleHQ6IGNsdXN0ZXIub3BlbkdlbmVyYXRpdmVBSUNvbnRleHQuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIG9wZW5HZW5lcmF0aXZlQUlXb3JrZXI6IGNsdXN0ZXIub3BlbkdlbmVyYXRpdmVBSVdvcmtlci5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgb3BlbkdyYXBoRGF0YWJhc2U6IGNsdXN0ZXIub3BlbkdyYXBoRGF0YWJhc2UuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIG9wZW5WZWN0b3JEYXRhYmFzZTogY2x1c3Rlci5vcGVuVmVjdG9yRGF0YWJhc2UuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIHB1Ymxpc2hMb2NhbE1lZGlhU3RyZWFtOiBjbHVzdGVyLnB1Ymxpc2hMb2NhbE1lZGlhU3RyZWFtLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBwdWJsaXNoTG9jYWxEeW5hbWljTWVkaWFTdHJlYW06IGNsdXN0ZXIucHVibGlzaExvY2FsRHluYW1pY01lZGlhU3RyZWFtLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRQdWJTdWJUb3BpY3M6IGNsdXN0ZXIuZ2V0UHViU3ViVG9waWNzLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRPYmplY3RTdG9yZUJ1Y2tldHM6IGNsdXN0ZXIuZ2V0T2JqZWN0U3RvcmVCdWNrZXRzLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRLZXlWYWx1ZURhdGFiYXNlczogY2x1c3Rlci5nZXRLZXlWYWx1ZURhdGFiYXNlcy5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgZ2V0R2VuZXJhdGl2ZUFJQ29udGV4dHM6IGNsdXN0ZXIuZ2V0R2VuZXJhdGl2ZUFJQ29udGV4dHMuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIGdldEdlbmVyYXRpdmVBSVdvcmtlcnM6IGNsdXN0ZXIuZ2V0R2VuZXJhdGl2ZUFJV29ya2Vycy5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgZ2V0R3JhcGhEYXRhYmFzZXM6IGNsdXN0ZXIuZ2V0R3JhcGhEYXRhYmFzZXMuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIGdldFZlY3RvckRhdGFiYXNlczogY2x1c3Rlci5nZXRWZWN0b3JEYXRhYmFzZXMuYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIGdldExvY2FsTWVkaWFTdHJlYW1zOiBjbHVzdGVyLmdldExvY2FsTWVkaWFTdHJlYW1zLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRSZW1vdGVNZWRpYVN0cmVhbXM6IGNsdXN0ZXIuZ2V0UmVtb3RlTWVkaWFTdHJlYW1zLmJpbmQoY2x1c3RlciksXG4gICAgICAgICAgICBnZXRSZW1vdGVOb2RlczogY2x1c3Rlci5nZXRSZW1vdGVOb2Rlcy5iaW5kKGNsdXN0ZXIpLFxuICAgICAgICAgICAgb246IGNsdXN0ZXIub24uYmluZChjbHVzdGVyKSxcbiAgICAgICAgICAgIG9mZjogY2x1c3Rlci5vZmYuYmluZChjbHVzdGVyKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdEFnZW50KGFnZW50KSB7XG4gICAgICAgIGZvciAoY29uc3QgY2x1c3RlckNvbmZpZyBvZiBhZ2VudC5hZ2VudENvbmZpZy5jbHVzdGVycykge1xuICAgICAgICAgICAgY29uc3QgY2x1c3RlciA9IG5ldyBDbHVzdGVyKHRoaXMudmVuZG9ySWQsIGNsdXN0ZXJDb25maWcuaWQsIGFnZW50LCB0aGlzLmF1dGhTZXJ2aWNlLCB0aGlzLm9wdGlvbnMsIHRoaXMuY29uZmlncyk7XG4gICAgICAgICAgICBhd2FpdCBjbHVzdGVyLmpvaW4oKTtcbiAgICAgICAgICAgIHRoaXMuYWRkQ2x1c3RlcihjbHVzdGVyQ29uZmlnLmlkLCBjbHVzdGVyKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9waWNJZCBvZiBjbHVzdGVyQ29uZmlnLnB1YlN1YlRvcGljcyA/PyBbXSkge1xuICAgICAgICAgICAgICAgIGNsdXN0ZXIub3BlblB1YlN1YlRvcGljKHRvcGljSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBidWNrZXRJZCBvZiBjbHVzdGVyQ29uZmlnLm9iamVjdFN0b3JhZ2VCdWNrZXRzID8/IFtdKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2x1c3Rlci5vcGVuT2JqZWN0U3RvcmVCdWNrZXQoYnVja2V0SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBkYXRhYmFzZUlkIG9mIGNsdXN0ZXJDb25maWcua2V5VmFsdWVEYXRhYmFzZXMgPz8gW10pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbHVzdGVyLm9wZW5LZXlWYWx1ZURhdGFiYXNlKGRhdGFiYXNlSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogMSxcbiAgICAgICAgICAgICAgICAgICAgdGFibGVzOiB7fSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YWJhc2VJZCBvZiBjbHVzdGVyQ29uZmlnLmdyYXBoRGF0YWJhc2VzID8/IFtdKSB7XG4gICAgICAgICAgICAgICAgY2x1c3Rlci5vcGVuR3JhcGhEYXRhYmFzZShkYXRhYmFzZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgZGF0YWJhc2VJZCBvZiBjbHVzdGVyQ29uZmlnLnZlY3RvckRhdGFiYXNlcyA/PyBbXSkge1xuICAgICAgICAgICAgICAgIGNsdXN0ZXIub3BlblZlY3RvckRhdGFiYXNlKGRhdGFiYXNlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBhaUNvbnRleHRJZCBvZiBjbHVzdGVyQ29uZmlnLmdlbmVyYXRpdmVBSUNvbnRleHRzID8/IFtdKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2x1c3Rlci5vcGVuR2VuZXJhdGl2ZUFJV29ya2VyKGFpQ29udGV4dElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQWdlbnQgY29ubmVjdGVkIHRvIGNsdXN0ZXInLCBjbHVzdGVyQ29uZmlnLmlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRDbHVzdGVyKGNsdXN0ZXJJZCwgY2x1c3Rlcikge1xuICAgICAgICB0aGlzLmNsdXN0ZXJzLnNldChjbHVzdGVySWQsIGNsdXN0ZXIpO1xuICAgICAgICBjbHVzdGVyLm9uKCdjbHVzdGVyLWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgY2x1c3Rlci5vZmYoKTtcbiAgICAgICAgICAgIHRoaXMuY2x1c3RlcnMuZGVsZXRlKGNsdXN0ZXJJZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgaXNJbnRlcm5hbFNES0NvbmZpZ3MoY29uZmlncykge1xuICAgICAgICByZXR1cm4gY29uZmlncy5pY2VTZXJ2ZXJzICE9PSB1bmRlZmluZWQ7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmV4cG9ydCBmdW5jdGlvbiBzZW5kU3RhdHMoY29udGVudCwgc3lzdGVtVG9waWMpIHtcbiAgICBzeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgc291cmNlSWQ6IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCxcbiAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlBlZXJDb25uZWN0aW9uLFxuICAgICAgICBjb250ZW50LFxuICAgIH0pO1xufVxuIiwiaW1wb3J0IHsgU1RBVFNfQ09MTEVDVF9ERUxBWSB9IGZyb20gJ2NvbnN0YW50cy9TdGF0cyc7XG5pbXBvcnQgeyBTWVNURU1fVE9QSUNfSU5URVJOQUwgfSBmcm9tICdjb25zdGFudHMvU3lzdGVtJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uT3JpZ2luIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IENvbnRlbnRNZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQ29udGVudC9Db250ZW50JztcbmltcG9ydCB7IFN0YXRzTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N0YXRzL1N0YXRzJztcbmltcG9ydCB7IFN5c3RlbU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3lzdGVtRXZlbnQnO1xuaW1wb3J0IHsgU3RhdHNOb2RlIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzTm9kZSc7XG5leHBvcnQgY2xhc3MgU3RhdHMge1xuICAgIG5vZGVzID0gbmV3IE1hcCgpO1xuICAgIHNjaGVkdWxlVGltZSA9IDA7XG4gICAgZHVyYXRpb25UaW1lID0gMDtcbiAgICBwdWJzdWJUb3BpY3MgPSBuZXcgTWFwKCk7XG4gICAgb2JqZWN0U3RvcmVzID0gbmV3IE1hcCgpO1xuICAgIGtleVZhbHVlRGF0YWJhc2VzID0gbmV3IE1hcCgpO1xuICAgIGdlbmVyYXRpdmVBSUNvbnRleHRzID0gbmV3IE1hcCgpO1xuICAgIGdlbmVyYXRpdmVBSVdvcmtlcnMgPSBuZXcgTWFwKCk7XG4gICAgdmVjdG9yRGF0YWJhc2VzID0gbmV3IE1hcCgpO1xuICAgIGdyYXBoRGF0YWJhc2VzID0gbmV3IE1hcCgpO1xuICAgIHNlbmRlclRvdGFsTWVzc2FnZXMgPSBuZXcgTWFwKCk7XG4gICAgcmVjZWl2ZXJUb3RhbE1lc3NhZ2VzID0gbmV3IE1hcCgpO1xuICAgIHNlbmRlclRpbWVQcm9jZXNzaW5nID0gbmV3IE1hcCgpO1xuICAgIHJlY2VpdmVyVGltZVByb2Nlc3NpbmcgPSBuZXcgTWFwKCk7XG4gICAgc3lzdGVtTWVzc2FnZXMgPSBuZXcgTWFwKCk7XG4gICAgc3lzdGVtVG9waWM7XG4gICAgZ2V0UmVwb3J0KCkge1xuICAgICAgICBjb25zdCBub2RlcyA9IHt9O1xuICAgICAgICB0aGlzLm5vZGVzLmZvckVhY2goKG5vZGUsIG5vZGVJZCkgPT4ge1xuICAgICAgICAgICAgbm9kZXNbbm9kZUlkXSA9IG5vZGUuZ2V0UmVwb3J0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc2VuZGVyVGltZVByb2Nlc3NpbmcgPSAwO1xuICAgICAgICB0aGlzLnNlbmRlclRpbWVQcm9jZXNzaW5nLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBzZW5kZXJUaW1lUHJvY2Vzc2luZyArPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCByZWNlaXZlclRpbWVQcm9jZXNzaW5nID0gMDtcbiAgICAgICAgdGhpcy5yZWNlaXZlclRpbWVQcm9jZXNzaW5nLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICByZWNlaXZlclRpbWVQcm9jZXNzaW5nICs9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdGltZVByb2Nlc3NpbmcgPSBzZW5kZXJUaW1lUHJvY2Vzc2luZyArIHJlY2VpdmVyVGltZVByb2Nlc3Npbmc7XG4gICAgICAgIGxldCBzeXN0ZW1NZXNzYWdlcyA9IHsgbWVzc2FnZXM6IHsgdG90YWw6IDAgfSB9O1xuICAgICAgICB0aGlzLnN5c3RlbU1lc3NhZ2VzLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaCgodHlwZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc3lzdGVtTWVzc2FnZXNbdHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVzc2FnZXNbdHlwZV0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModmFsdWVbdHlwZV0pLmZvckVhY2goKHN1YnR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzeXN0ZW1NZXNzYWdlc1t0eXBlXVtzdWJ0eXBlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVzc2FnZXNbdHlwZV1bc3VidHlwZV0gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbU1lc3NhZ2VzW3R5cGVdW3N1YnR5cGVdICs9IHZhbHVlW3R5cGVdW3N1YnR5cGVdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgdG90YWxTdG9yYWdlU2l6ZSA9IDA7XG4gICAgICAgIGxldCB0b3RhbE1lc3NhZ2VzU2VudCA9IDA7XG4gICAgICAgIGxldCB0b3RhbE1lc3NhZ2VzUmVjZWl2ZWQgPSAwO1xuICAgICAgICBsZXQgdG90YWxCeXRlc1NlbnQgPSAwO1xuICAgICAgICBsZXQgdG90YWxCeXRlc1JlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5wdWJzdWJUb3BpY3MuZm9yRWFjaCgodG9waWMpID0+IHtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNTZW50ICs9IHRvcGljLm1lc3NhZ2VzU2VudDtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNSZWNlaXZlZCArPSB0b3BpYy5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQgKz0gdG9waWMuYnl0ZXNTZW50O1xuICAgICAgICAgICAgdG90YWxCeXRlc1JlY2VpdmVkICs9IHRvcGljLmJ5dGVzUmVjZWl2ZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9iamVjdFN0b3Jlcy5mb3JFYWNoKChzdG9yZSkgPT4ge1xuICAgICAgICAgICAgdG90YWxTdG9yYWdlU2l6ZSArPSBzdG9yZS5zdG9yYWdlO1xuICAgICAgICAgICAgdG90YWxNZXNzYWdlc1NlbnQgKz0gc3RvcmUubWVzc2FnZXNTZW50O1xuICAgICAgICAgICAgdG90YWxNZXNzYWdlc1JlY2VpdmVkICs9IHN0b3JlLm1lc3NhZ2VzUmVjZWl2ZWQ7XG4gICAgICAgICAgICB0b3RhbEJ5dGVzU2VudCArPSBzdG9yZS5ieXRlc1NlbnQ7XG4gICAgICAgICAgICB0b3RhbEJ5dGVzUmVjZWl2ZWQgKz0gc3RvcmUuYnl0ZXNSZWNlaXZlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuZm9yRWFjaCgoZGIpID0+IHtcbiAgICAgICAgICAgIHRvdGFsU3RvcmFnZVNpemUgKz0gZGIuc3RvcmFnZTtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNTZW50ICs9IGRiLm1lc3NhZ2VzU2VudDtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNSZWNlaXZlZCArPSBkYi5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQgKz0gZGIuYnl0ZXNTZW50O1xuICAgICAgICAgICAgdG90YWxCeXRlc1JlY2VpdmVkICs9IGRiLmJ5dGVzUmVjZWl2ZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdlbmVyYXRpdmVBSUNvbnRleHRzLmZvckVhY2goKGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIHRvdGFsU3RvcmFnZVNpemUgKz0gY29udGV4dC5zdG9yYWdlO1xuICAgICAgICAgICAgdG90YWxNZXNzYWdlc1NlbnQgKz0gY29udGV4dC5tZXNzYWdlc1NlbnQ7XG4gICAgICAgICAgICB0b3RhbE1lc3NhZ2VzUmVjZWl2ZWQgKz0gY29udGV4dC5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQgKz0gY29udGV4dC5ieXRlc1NlbnQ7XG4gICAgICAgICAgICB0b3RhbEJ5dGVzUmVjZWl2ZWQgKz0gY29udGV4dC5ieXRlc1JlY2VpdmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZW5lcmF0aXZlQUlXb3JrZXJzLmZvckVhY2goKGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIHRvdGFsU3RvcmFnZVNpemUgKz0gY29udGV4dC5zdG9yYWdlO1xuICAgICAgICAgICAgdG90YWxNZXNzYWdlc1NlbnQgKz0gY29udGV4dC5tZXNzYWdlc1NlbnQ7XG4gICAgICAgICAgICB0b3RhbE1lc3NhZ2VzUmVjZWl2ZWQgKz0gY29udGV4dC5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQgKz0gY29udGV4dC5ieXRlc1NlbnQ7XG4gICAgICAgICAgICB0b3RhbEJ5dGVzUmVjZWl2ZWQgKz0gY29udGV4dC5ieXRlc1JlY2VpdmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52ZWN0b3JEYXRhYmFzZXMuZm9yRWFjaCgoZGIpID0+IHtcbiAgICAgICAgICAgIHRvdGFsU3RvcmFnZVNpemUgKz0gZGIuc3RvcmFnZTtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNTZW50ICs9IGRiLm1lc3NhZ2VzU2VudDtcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNSZWNlaXZlZCArPSBkYi5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQgKz0gZGIuYnl0ZXNTZW50O1xuICAgICAgICAgICAgdG90YWxCeXRlc1JlY2VpdmVkICs9IGRiLmJ5dGVzUmVjZWl2ZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdyYXBoRGF0YWJhc2VzLmZvckVhY2goKGRiKSA9PiB7XG4gICAgICAgICAgICB0b3RhbFN0b3JhZ2VTaXplICs9IGRiLnN0b3JhZ2U7XG4gICAgICAgICAgICB0b3RhbE1lc3NhZ2VzU2VudCArPSBkYi5tZXNzYWdlc1NlbnQ7XG4gICAgICAgICAgICB0b3RhbE1lc3NhZ2VzUmVjZWl2ZWQgKz0gZGIubWVzc2FnZXNSZWNlaXZlZDtcbiAgICAgICAgICAgIHRvdGFsQnl0ZXNTZW50ICs9IGRiLmJ5dGVzU2VudDtcbiAgICAgICAgICAgIHRvdGFsQnl0ZXNSZWNlaXZlZCArPSBkYi5ieXRlc1JlY2VpdmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFNUVm9sYXRpbGl0eTogdGhpcy5nZXRTVFZvbGF0aWxpdHkoKSxcbiAgICAgICAgICAgIERUVm9sYXRpbGl0eTogdGhpcy5nZXREVFZvbGF0aWxpdHkoKSxcbiAgICAgICAgICAgIGJpdHJhdGU6IHRoaXMuZ2V0Qml0cmF0ZSgpLFxuICAgICAgICAgICAgc2VuZGVyQml0cmF0ZTogdGhpcy5nZXRTZW5kZXJCaXRyYXRlKCksXG4gICAgICAgICAgICByZWNlaXZlckJpdHJhdGU6IHRoaXMuZ2V0UmVjZWl2ZXJCaXRyYXRlKCksXG4gICAgICAgICAgICB0b3RhbFN0b3JhZ2VTaXplLFxuICAgICAgICAgICAgdG90YWxNZXNzYWdlczogdG90YWxNZXNzYWdlc1NlbnQgKyB0b3RhbE1lc3NhZ2VzUmVjZWl2ZWQsXG4gICAgICAgICAgICB0b3RhbE1lc3NhZ2VzU2VudCxcbiAgICAgICAgICAgIHRvdGFsTWVzc2FnZXNSZWNlaXZlZCxcbiAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHRvdGFsQnl0ZXNTZW50ICsgdG90YWxCeXRlc1JlY2VpdmVkLFxuICAgICAgICAgICAgdG90YWxCeXRlc1NlbnQsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzUmVjZWl2ZWQsXG4gICAgICAgICAgICBzeXN0ZW1NZXNzYWdlcyxcbiAgICAgICAgICAgIHRpbWVQcm9jZXNzaW5nLFxuICAgICAgICAgICAgbm9kZXM6IG5vZGVzLFxuICAgICAgICAgICAgcHVic3ViVG9waWNzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5wdWJzdWJUb3BpY3MpLFxuICAgICAgICAgICAgb2JqZWN0U3RvcmVzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5vYmplY3RTdG9yZXMpLFxuICAgICAgICAgICAga2V5VmFsdWVEYXRhYmFzZXM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLmtleVZhbHVlRGF0YWJhc2VzKSxcbiAgICAgICAgICAgIGdlbmVyYXRpdmVBSUNvbnRleHRzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5nZW5lcmF0aXZlQUlDb250ZXh0cyksXG4gICAgICAgICAgICBnZW5lcmF0aXZlQUlXb3JrZXJzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5nZW5lcmF0aXZlQUlXb3JrZXJzKSxcbiAgICAgICAgICAgIHZlY3RvckRhdGFiYXNlczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMudmVjdG9yRGF0YWJhc2VzKSxcbiAgICAgICAgICAgIGdyYXBoRGF0YWJhc2VzOiBPYmplY3QuZnJvbUVudHJpZXModGhpcy5ncmFwaERhdGFiYXNlcyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFkZFJlbW90ZU5vZGUoaWQpIHtcbiAgICAgICAgdGhpcy5ub2Rlcy5zZXQoaWQsIG5ldyBTdGF0c05vZGUoKSk7XG4gICAgfVxuICAgIHJlbW92ZVJlbW90ZU5vZGUoaWQpIHtcbiAgICAgICAgdGhpcy5ub2Rlcy5kZWxldGUoaWQpO1xuICAgIH1cbiAgICBwcm9jZXNzUmVwb3J0cyhub2RlSWQsIHJlcG9ydHMsIHN0cmVhbUlkKSB7XG4gICAgICAgIGlmICghKHJlcG9ydHMgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc0RhdGFDaGFubmVsUmVwb3J0KG5vZGVJZCwgcmVwb3J0cyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVwb3J0ID0gdGhpcy5ub2Rlcy5nZXQobm9kZUlkKT8ucHJvY2Vzc1JlcG9ydHMocmVwb3J0cywgc3RyZWFtSWQpO1xuICAgICAgICBpZiAocmVwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBTWVNURU1fVE9QSUNfSU5URVJOQUwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN0YXRzLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogU3RhdHNNZXNzYWdlVHlwZS5TdHJlYW1SZXBvcnQsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlcG9ydCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVJZDogbm9kZUlkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzTG9jYWxSZXBvcnQocmVwb3J0KSB7XG4gICAgICAgIHRoaXMuc2V0U2NoZWR1bGVUaW1lKHJlcG9ydC5zZWNoZWR1bGVUaW1lKTtcbiAgICAgICAgdGhpcy5zZXREdXJhdGlvblRpbWUocmVwb3J0LmR1cmF0aW9uVGltZSk7XG4gICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICBzb3VyY2VJZDogU1lTVEVNX1RPUElDX0lOVEVSTkFMLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN0YXRzLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IFN0YXRzTWVzc2FnZVR5cGUuTG9jYWxSZXBvcnQsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBTVFZvbGF0aWxpdHk6IHRoaXMuZ2V0U1RWb2xhdGlsaXR5KCksXG4gICAgICAgICAgICAgICAgICAgIERUVm9sYXRpbGl0eTogdGhpcy5nZXREVFZvbGF0aWxpdHkoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHByb2Nlc3NTZXJ2aWNlUmVwb3J0KGxhYmVsLCB0eXBlLCByZXBvcnQpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5QdWJTdWJUb3BpY1N0YXRzOlxuICAgICAgICAgICAgICAgIHRoaXMucHVic3ViVG9waWNzLnNldChsYWJlbCwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLk9iamVjdFN0b3JlU3RhdHM6XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3RTdG9yZXMuc2V0KGxhYmVsLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuS2V5VmFsdWVEYXRhYmFzZVN0YXRzOlxuICAgICAgICAgICAgICAgIHRoaXMua2V5VmFsdWVEYXRhYmFzZXMuc2V0KGxhYmVsLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuR2VuZXJhdGl2ZUFJQ29udGV4dFN0YXRzOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGl2ZUFJQ29udGV4dHMuc2V0KGxhYmVsLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuR2VuZXJhdGl2ZUFJV29ya2VyU3RhdHM6XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0aXZlQUlXb3JrZXJzLnNldChsYWJlbCwgcmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlZlY3RvckRhdGFiYXNlU3RhdHM6XG4gICAgICAgICAgICAgICAgdGhpcy52ZWN0b3JEYXRhYmFzZXMuc2V0KGxhYmVsLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuR3JhcGhEYXRhYmFzZVN0YXRzOlxuICAgICAgICAgICAgICAgIHRoaXMuZ3JhcGhEYXRhYmFzZXMuc2V0KGxhYmVsLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljID0gcHVibGlzaGVyO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5zeXN0ZW1Ub3BpYztcbiAgICB9XG4gICAgZ2V0U1RWb2xhdGlsaXR5KCkge1xuICAgICAgICBpZiAodGhpcy5zY2hlZHVsZVRpbWUgPiAwICYmICh0aGlzLnNjaGVkdWxlVGltZSAtIFNUQVRTX0NPTExFQ1RfREVMQVkpID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnNjaGVkdWxlVGltZSAtIFNUQVRTX0NPTExFQ1RfREVMQVkpIC8gU1RBVFNfQ09MTEVDVF9ERUxBWTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZ2V0RFRWb2xhdGlsaXR5KCkge1xuICAgICAgICBpZiAodGhpcy5kdXJhdGlvblRpbWUgPiAwICYmICh0aGlzLmR1cmF0aW9uVGltZSAtIChTVEFUU19DT0xMRUNUX0RFTEFZIC8gMTApKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5kdXJhdGlvblRpbWUgLSAoU1RBVFNfQ09MTEVDVF9ERUxBWSAvIDEwKSkgLyAoU1RBVFNfQ09MTEVDVF9ERUxBWSAvIDEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZ2V0U2VuZGVyQml0cmF0ZSgpIHtcbiAgICAgICAgbGV0IHNlbmRlckJpdHJhdGUgPSAwO1xuICAgICAgICB0aGlzLm5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIHNlbmRlckJpdHJhdGUgKz0gbm9kZS5zZW5kZXJCaXRyYXRlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlbmRlckJpdHJhdGU7XG4gICAgfVxuICAgIGdldFJlY2VpdmVyQml0cmF0ZSgpIHtcbiAgICAgICAgbGV0IHJlY2VpdmVyQml0cmF0ZSA9IDA7XG4gICAgICAgIHRoaXMubm9kZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgcmVjZWl2ZXJCaXRyYXRlICs9IG5vZGUucmVjZWl2ZXJCaXRyYXRlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlY2VpdmVyQml0cmF0ZTtcbiAgICB9XG4gICAgZ2V0Qml0cmF0ZSgpIHtcbiAgICAgICAgbGV0IGJpdHJhdGUgPSAwO1xuICAgICAgICB0aGlzLm5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGJpdHJhdGUgKz0gbm9kZS5iaXRyYXRlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGJpdHJhdGU7XG4gICAgfVxuICAgIHNldFNjaGVkdWxlVGltZSh0aW1lKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVUaW1lID0gdGltZTtcbiAgICB9XG4gICAgc2V0RHVyYXRpb25UaW1lKHRpbWUpIHtcbiAgICAgICAgdGhpcy5kdXJhdGlvblRpbWUgPSB0aW1lO1xuICAgIH1cbiAgICBwcm9jZXNzRGF0YUNoYW5uZWxSZXBvcnQobm9kZUlkLCByZXBvcnQpIHtcbiAgICAgICAgc3dpdGNoIChyZXBvcnQub3JpZ2luKSB7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uT3JpZ2luLlNlbmRlcjpcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NTZW5kZXJSZXBvcnQobm9kZUlkLCByZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk9yaWdpbi5SZWNlaXZlcjpcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NSZWNlaXZlclJlcG9ydChub2RlSWQsIHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2Vzc1NlbmRlclJlcG9ydChub2RlSWQsIHJlcG9ydCkge1xuICAgICAgICB0aGlzLnNlbmRlclRvdGFsTWVzc2FnZXMuc2V0KG5vZGVJZCwgcmVwb3J0Lm1lc3NhZ2VzU2VudCk7XG4gICAgICAgIHRoaXMuc2VuZGVyVGltZVByb2Nlc3Npbmcuc2V0KG5vZGVJZCwgcmVwb3J0LnRpbWVTZW5kaW5nKTtcbiAgICB9XG4gICAgcHJvY2Vzc1JlY2VpdmVyUmVwb3J0KG5vZGVJZCwgcmVwb3J0KSB7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJUb3RhbE1lc3NhZ2VzLnNldChub2RlSWQsIHJlcG9ydC5tZXNzYWdlc1JlY2VpdmVkKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlclRpbWVQcm9jZXNzaW5nLnNldChub2RlSWQsIHJlcG9ydC50aW1lUmVjZWl2aW5nKTtcbiAgICAgICAgdGhpcy5zeXN0ZW1NZXNzYWdlcy5zZXQobm9kZUlkLCByZXBvcnQuc3lzdGVtTWVzc2FnZXMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNUQVRTX1JFUE9SVF9ERUxBWSB9IGZyb20gJ2NvbnN0YW50cy9TdGF0cyc7XG5pbXBvcnQgeyBQZWVyQ29ubmVjdGlvbk9yaWdpbiB9IGZyb20gJ2ludGVyZmFjZXMvQ29ubmVjdGlvbi9QZWVyQ29ubmVjdGlvbic7XG5leHBvcnQgY2xhc3MgU3RhdHNEYXRhQ2hhbm5lbCB7XG4gICAgc2VuZGVyQ3VycmVudFRpbWVzdGFtcCA9IDA7XG4gICAgc2VuZGVyUHJldmlvdXNUaW1lc3RhbXAgPSAwO1xuICAgIHJlY2VpdmVyQ3VycmVudFRpbWVzdGFtcCA9IDA7XG4gICAgcmVjZWl2ZXJQcmV2aW91c1RpbWVzdGFtcCA9IDA7XG4gICAgc2VuZGVyQ3VycmVudEJ5dGVzID0gMDtcbiAgICBzZW5kZXJQcmV2aW91c0J5dGVzID0gMDtcbiAgICByZWNlaXZlckN1cnJlbnRCeXRlcyA9IDA7XG4gICAgcmVjZWl2ZXJQcmV2aW91c0J5dGVzID0gMDtcbiAgICBzZW5kZXJUb3RhbE1lc3NhZ2VzID0gMDtcbiAgICByZWNlaXZlclRvdGFsTWVzc2FnZXMgPSAwO1xuICAgIHNlbmRlclRpbWVQcm9jZXNzaW5nID0gMDtcbiAgICByZWNlaXZlclRpbWVQcm9jZXNzaW5nID0gMDtcbiAgICByb3VuZFRyaXBUaW1lID0gMDtcbiAgICBnZXQgYml0cmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyQml0cmF0ZSArIHRoaXMucmVjZWl2ZXJCaXRyYXRlO1xuICAgIH1cbiAgICBnZXQgc2VuZGVyQml0cmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VuZGVyQ3VycmVudFRpbWVzdGFtcCA+IDAgJiYgdGhpcy5zZW5kZXJQcmV2aW91c1RpbWVzdGFtcCA+IDAgJiYgKERhdGUubm93KCkgLSB0aGlzLnNlbmRlckN1cnJlbnRUaW1lc3RhbXApIDwgU1RBVFNfUkVQT1JUX0RFTEFZKSB7XG4gICAgICAgICAgICByZXR1cm4gKCh0aGlzLnNlbmRlckN1cnJlbnRCeXRlcyAtIHRoaXMuc2VuZGVyUHJldmlvdXNCeXRlcykgLyAodGhpcy5zZW5kZXJDdXJyZW50VGltZXN0YW1wIC0gdGhpcy5zZW5kZXJQcmV2aW91c1RpbWVzdGFtcCkgKiA4ICogMTAwMCk7IC8vIGNvbnZlcnQgdG8gYnBzXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGdldCByZWNlaXZlckJpdHJhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlY2VpdmVyQ3VycmVudFRpbWVzdGFtcCA+IDAgJiYgdGhpcy5yZWNlaXZlclByZXZpb3VzVGltZXN0YW1wID4gMCAmJiAoRGF0ZS5ub3coKSAtIHRoaXMucmVjZWl2ZXJDdXJyZW50VGltZXN0YW1wKSA8IFNUQVRTX1JFUE9SVF9ERUxBWSkge1xuICAgICAgICAgICAgcmV0dXJuICgodGhpcy5yZWNlaXZlckN1cnJlbnRCeXRlcyAtIHRoaXMucmVjZWl2ZXJQcmV2aW91c0J5dGVzKSAvICh0aGlzLnJlY2VpdmVyQ3VycmVudFRpbWVzdGFtcCAtIHRoaXMucmVjZWl2ZXJQcmV2aW91c1RpbWVzdGFtcCkgKiA4ICogMTAwMCk7IC8vIGNvbnZlcnQgdG8gYnBzXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHByb2Nlc3NSZXBvcnQocmVwb3J0KSB7XG4gICAgICAgIHN3aXRjaCAocmVwb3J0Lm9yaWdpbikge1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk9yaWdpbi5TZW5kZXI6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzU2VuZGVyUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFBlZXJDb25uZWN0aW9uT3JpZ2luLlJlY2VpdmVyOlxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc1JlY2VpdmVyUmVwb3J0KHJlcG9ydCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UmVwb3J0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYml0cmF0ZTogdGhpcy5iaXRyYXRlLFxuICAgICAgICAgICAgc2VuZGVyQml0cmF0ZTogdGhpcy5zZW5kZXJCaXRyYXRlLFxuICAgICAgICAgICAgcmVjZWl2ZXJCaXRyYXRlOiB0aGlzLnJlY2VpdmVyQml0cmF0ZSxcbiAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHRoaXMuZ2V0VG90YWxCeXRlcygpLFxuICAgICAgICAgICAgc2VuZGVyVG90YWxCeXRlczogdGhpcy5nZXRTZW5kZXJUb3RhbEJ5dGVzKCksXG4gICAgICAgICAgICByZWNlaXZlclRvdGFsQnl0ZXM6IHRoaXMuZ2V0UmVjZWl2ZXJUb3RhbEJ5dGVzKCksXG4gICAgICAgICAgICB0b3RhbE1lc3NhZ2VzOiB0aGlzLnNlbmRlclRvdGFsTWVzc2FnZXMgKyB0aGlzLnJlY2VpdmVyVG90YWxNZXNzYWdlcyxcbiAgICAgICAgICAgIHNlbmRlclRvdGFsTWVzc2FnZXM6IHRoaXMuc2VuZGVyVG90YWxNZXNzYWdlcyxcbiAgICAgICAgICAgIHJlY2VpdmVyVG90YWxNZXNzYWdlczogdGhpcy5yZWNlaXZlclRvdGFsTWVzc2FnZXMsXG4gICAgICAgICAgICB0aW1lUHJvY2Vzc2luZzogdGhpcy5zZW5kZXJUaW1lUHJvY2Vzc2luZyArIHRoaXMucmVjZWl2ZXJUaW1lUHJvY2Vzc2luZyxcbiAgICAgICAgICAgIHNlbmRlclRpbWVQcm9jZXNzaW5nOiB0aGlzLnNlbmRlclRpbWVQcm9jZXNzaW5nLFxuICAgICAgICAgICAgcmVjZWl2ZXJUaW1lUHJvY2Vzc2luZzogdGhpcy5yZWNlaXZlclRpbWVQcm9jZXNzaW5nLFxuICAgICAgICAgICAgcm91bmRUcmlwVGltZTogdGhpcy5yb3VuZFRyaXBUaW1lLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRUb3RhbEJ5dGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kZXJDdXJyZW50Qnl0ZXMgKyB0aGlzLnJlY2VpdmVyQ3VycmVudEJ5dGVzO1xuICAgIH1cbiAgICBnZXRTZW5kZXJUb3RhbEJ5dGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kZXJDdXJyZW50Qnl0ZXM7XG4gICAgfVxuICAgIGdldFJlY2VpdmVyVG90YWxCeXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZXJDdXJyZW50Qnl0ZXM7XG4gICAgfVxuICAgIHByb2Nlc3NTZW5kZXJSZXBvcnQocmVwb3J0KSB7XG4gICAgICAgIHRoaXMuc2V0U2VuZGVyVGltZXN0YW1wKHJlcG9ydC50aW1lc3RhbXApO1xuICAgICAgICB0aGlzLnNldEJ5dGVzKHJlcG9ydC5ieXRlc1NlbnQpO1xuICAgICAgICB0aGlzLnNlbmRlclRvdGFsTWVzc2FnZXMgPSByZXBvcnQubWVzc2FnZXNTZW50O1xuICAgICAgICB0aGlzLnNlbmRlclRpbWVQcm9jZXNzaW5nID0gcmVwb3J0LnRpbWVTZW5kaW5nO1xuICAgICAgICB0aGlzLnJvdW5kVHJpcFRpbWUgPSByZXBvcnQucm91bmRUcmlwVGltZTtcbiAgICB9XG4gICAgcHJvY2Vzc1JlY2VpdmVyUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICB0aGlzLnNldFJlY2VpdmVyVGltZXN0YW1wKHJlcG9ydC50aW1lc3RhbXApO1xuICAgICAgICB0aGlzLnNldFJlY2VpdmVyQnl0ZXMocmVwb3J0LmJ5dGVzUmVjZWl2ZWQpO1xuICAgICAgICB0aGlzLnJlY2VpdmVyVG90YWxNZXNzYWdlcyA9IHJlcG9ydC5tZXNzYWdlc1JlY2VpdmVkO1xuICAgICAgICB0aGlzLnJlY2VpdmVyVGltZVByb2Nlc3NpbmcgPSByZXBvcnQudGltZVJlY2VpdmluZztcbiAgICB9XG4gICAgc2V0U2VuZGVyVGltZXN0YW1wKHRpbWVzdGFtcCkge1xuICAgICAgICBpZiAodGltZXN0YW1wID4gdGhpcy5zZW5kZXJDdXJyZW50VGltZXN0YW1wKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRlclByZXZpb3VzVGltZXN0YW1wID0gdGhpcy5zZW5kZXJDdXJyZW50VGltZXN0YW1wO1xuICAgICAgICAgICAgdGhpcy5zZW5kZXJDdXJyZW50VGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldFJlY2VpdmVyVGltZXN0YW1wKHRpbWVzdGFtcCkge1xuICAgICAgICBpZiAodGltZXN0YW1wID4gdGhpcy5yZWNlaXZlckN1cnJlbnRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgIHRoaXMucmVjZWl2ZXJQcmV2aW91c1RpbWVzdGFtcCA9IHRoaXMucmVjZWl2ZXJDdXJyZW50VGltZXN0YW1wO1xuICAgICAgICAgICAgdGhpcy5yZWNlaXZlckN1cnJlbnRUaW1lc3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0Qnl0ZXMoYnl0ZXMpIHtcbiAgICAgICAgdGhpcy5zZW5kZXJQcmV2aW91c0J5dGVzID0gdGhpcy5zZW5kZXJDdXJyZW50Qnl0ZXM7XG4gICAgICAgIHRoaXMuc2VuZGVyQ3VycmVudEJ5dGVzID0gYnl0ZXM7XG4gICAgfVxuICAgIHNldFJlY2VpdmVyQnl0ZXMoYnl0ZXMpIHtcbiAgICAgICAgdGhpcy5yZWNlaXZlclByZXZpb3VzQnl0ZXMgPSB0aGlzLnJlY2VpdmVyQ3VycmVudEJ5dGVzO1xuICAgICAgICB0aGlzLnJlY2VpdmVyQ3VycmVudEJ5dGVzID0gYnl0ZXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgYWRkRG9jLCBjb2xsZWN0aW9uLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgU1RBVFNfQ09MTEVDVF9ERUxBWSwgU1RBVFNfUkVQT1JUX0RFTEFZIH0gZnJvbSAnY29uc3RhbnRzL1N0YXRzJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGVudE1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0NvbnRlbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgU3RhdHMgfSBmcm9tICdtb2RlbHMvU3RhdHMvU3RhdHMnO1xuaW1wb3J0IGZpcmViYXNlIGZyb20gJ3NlcnZpY2VzL0ZpcmViYXNlL0ZpcmViYXNlU2VydmljZSc7XG5pbXBvcnQgaW50ZXJ2YWwgZnJvbSAndXRpbHMvSW50ZXJ2YWwvSW50ZXJ2YWwnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmV4cG9ydCBjbGFzcyBTdGF0c01hbmFnZXIge1xuICAgIGNvbmZpZ3M7XG4gICAgcmVtb3RlTm9kZXMgPSBuZXcgU2V0KCk7XG4gICAgbmV4dE5vZGVJZDtcbiAgICBzdGF0c0NvbGxlY3Rpb247XG4gICAgc3RhdHNSZXBvcnRpbmc7XG4gICAgc3RhdHNSZXBvcnQgPSBuZXcgU3RhdHMoKTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzKSB7XG4gICAgICAgIHRoaXMuY29uZmlncyA9IGNvbmZpZ3M7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLnN0YXRzUmVwb3J0KTtcbiAgICAgICAgdGhpcy5zdGF0c0NvbGxlY3Rpb24gPSB0aGlzLnNldHVwU3RhdHNDb2xsZWN0aW9uKCk7XG4gICAgICAgIHRoaXMuc3RhdHNSZXBvcnRpbmcgPSB0aGlzLnNldHVwU3RhdHNSZXBvcnRpbmcoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMuc3RhdHNSZXBvcnQpO1xuICAgICAgICB0aGlzLnN0YXRzUmVwb3J0aW5nKCk7XG4gICAgICAgIHRoaXMuc3RhdHNDb2xsZWN0aW9uKCk7XG4gICAgfVxuICAgIGFkZFJlbW90ZU5vZGUoaWQpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVOb2Rlcy5hZGQoaWQpO1xuICAgICAgICB0aGlzLnN0YXRzUmVwb3J0LmFkZFJlbW90ZU5vZGUoaWQpO1xuICAgIH1cbiAgICByZW1vdmVSZW1vdGVOb2RlKGlkKSB7XG4gICAgICAgIHRoaXMucmVtb3RlTm9kZXMuZGVsZXRlKGlkKTtcbiAgICAgICAgdGhpcy5zdGF0c1JlcG9ydC5yZW1vdmVSZW1vdGVOb2RlKGlkKTtcbiAgICB9XG4gICAgaGFuZGxlUGVlckNvbm5lY3Rpb25TeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgUGVlckNvbm5lY3Rpb25NZXNzYWdlVHlwZS5TdGF0czpcbiAgICAgICAgICAgICAgICBjb25zdCB7IG5vZGVJZCwgc3RyZWFtSWQsIHN0YXRzIH0gPSBldmVudC5jb250ZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHNSZXBvcnQucHJvY2Vzc1JlcG9ydHMobm9kZUlkLCBzdGF0cywgc3RyZWFtSWQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNvbnRlbnRTeXN0ZW1FdmVudHMoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5jb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLk9iamVjdFN0b3JlU3RhdHM6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5LZXlWYWx1ZURhdGFiYXNlU3RhdHM6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5QdWJTdWJUb3BpY1N0YXRzOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuR2VuZXJhdGl2ZUFJQ29udGV4dFN0YXRzOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuR2VuZXJhdGl2ZUFJV29ya2VyU3RhdHM6XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5WZWN0b3JEYXRhYmFzZVN0YXRzOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuR3JhcGhEYXRhYmFzZVN0YXRzOlxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHNSZXBvcnQucHJvY2Vzc1NlcnZpY2VSZXBvcnQoZXZlbnQuY29udGVudC5sYWJlbCwgZXZlbnQuY29udGVudC50eXBlLCBldmVudC5jb250ZW50LnN0YXRzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cFN0YXRzUmVwb3J0aW5nKCkge1xuICAgICAgICByZXR1cm4gaW50ZXJ2YWwuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVwb3J0ID0gdGhpcy5zdGF0c1JlcG9ydC5nZXRSZXBvcnQoKTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN0YXRzLCAnU3RhdHM6IHJlcG9ydCcsIHJlcG9ydCk7XG4gICAgICAgICAgICBhZGREb2MoY29sbGVjdGlvbihmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSwgYGRldmVsb3BlcnMvJHt0aGlzLmNvbmZpZ3MudmVuZG9ySWR9L3N0YXRzYCksIHtcbiAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY29uZmlncy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIHJlcG9ydCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdzdGF0cycsIHtcbiAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY29uZmlncy5jbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIFNUQVRTX1JFUE9SVF9ERUxBWSk7XG4gICAgfVxuICAgIHNldHVwU3RhdHNDb2xsZWN0aW9uKCkge1xuICAgICAgICBsZXQgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICBsZXQgbGFzdFJ1biA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiBpbnRlcnZhbC5zZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAocnVubmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlTm9kZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm5leHROb2RlSWQ7XG4gICAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLmZpbmROZXh0Tm9kZUlkKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29uZmlncy5tZWRpYXRvci5jb2xsZWN0U3RhdHModGhpcy5uZXh0Tm9kZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgIHRoaXMuc3RhdHNSZXBvcnQucHJvY2Vzc0xvY2FsUmVwb3J0KHtcbiAgICAgICAgICAgICAgICBzZWNoZWR1bGVUaW1lOiBub3cgLSBsYXN0UnVuLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uVGltZTogRGF0ZS5ub3coKSAtIG5vdyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGFzdFJ1biA9IG5vdztcbiAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgfSwgU1RBVFNfQ09MTEVDVF9ERUxBWSk7XG4gICAgfVxuICAgIGZpbmROZXh0Tm9kZUlkKCkge1xuICAgICAgICBsZXQgZmlyc3ROb2RlSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5uZXh0Tm9kZUlkKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVtb3RlTm9kZXMuaGFzKHRoaXMubmV4dE5vZGVJZCkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5uZXh0Tm9kZUlkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaWQgb2YgdGhpcy5yZW1vdGVOb2Rlcykge1xuICAgICAgICAgICAgaWYgKCFmaXJzdE5vZGVJZCkge1xuICAgICAgICAgICAgICAgIGZpcnN0Tm9kZUlkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5uZXh0Tm9kZUlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5uZXh0Tm9kZUlkO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0Tm9kZUlkID0gaWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5uZXh0Tm9kZUlkKSB7XG4gICAgICAgICAgICB0aGlzLm5leHROb2RlSWQgPSBmaXJzdE5vZGVJZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFNUQVRTX1JFQ0VJVkVSX0ZJTFRFUlMsIFNUQVRTX1NFTkRFUl9GSUxURVJTIH0gZnJvbSAnY29uc3RhbnRzL1N0YXRzJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uT3JpZ2luIH0gZnJvbSAnaW50ZXJmYWNlcy9Db25uZWN0aW9uL1BlZXJDb25uZWN0aW9uJztcbmltcG9ydCB7IFN0YXRzU3RyZWFtIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzU3RyZWFtJztcbmltcG9ydCB7IFN0YXRzRGF0YUNoYW5uZWwgfSBmcm9tICdtb2RlbHMvU3RhdHMvU3RhdHNEYXRhQ2hhbm5lbCc7XG5leHBvcnQgY2xhc3MgU3RhdHNOb2RlIHtcbiAgICBzZW5kZXJTdHJlYW1zID0gbmV3IE1hcCgpO1xuICAgIHJlY2VpdmVyU3RyZWFtcyA9IG5ldyBNYXAoKTtcbiAgICBkYXRhQ2hhbm5lbCA9IG5ldyBTdGF0c0RhdGFDaGFubmVsKCk7XG4gICAgZ2V0IHNlbmRlckJpdHJhdGUoKSB7XG4gICAgICAgIGxldCBzZW5kZXJCaXRyYXRlID0gMDtcbiAgICAgICAgdGhpcy5zZW5kZXJTdHJlYW1zLmZvckVhY2goKHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgc2VuZGVyQml0cmF0ZSArPSBzdHJlYW0uYml0cmF0ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbmRlckJpdHJhdGUgKz0gdGhpcy5kYXRhQ2hhbm5lbC5zZW5kZXJCaXRyYXRlO1xuICAgICAgICByZXR1cm4gc2VuZGVyQml0cmF0ZTtcbiAgICB9XG4gICAgZ2V0IHJlY2VpdmVyQml0cmF0ZSgpIHtcbiAgICAgICAgbGV0IHJlY2VpdmVyQml0cmF0ZSA9IDA7XG4gICAgICAgIHRoaXMucmVjZWl2ZXJTdHJlYW1zLmZvckVhY2goKHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgcmVjZWl2ZXJCaXRyYXRlICs9IHN0cmVhbS5iaXRyYXRlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVjZWl2ZXJCaXRyYXRlICs9IHRoaXMuZGF0YUNoYW5uZWwucmVjZWl2ZXJCaXRyYXRlO1xuICAgICAgICByZXR1cm4gcmVjZWl2ZXJCaXRyYXRlO1xuICAgIH1cbiAgICBnZXQgYml0cmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyQml0cmF0ZSArIHRoaXMucmVjZWl2ZXJCaXRyYXRlO1xuICAgIH1cbiAgICBwcm9jZXNzUmVwb3J0cyhyZXBvcnRzLCBzdHJlYW1JZCkge1xuICAgICAgICBjb25zdCBpbmJvdW5kUmVwb3J0cyA9IFtdO1xuICAgICAgICBjb25zdCBvdXRib3VuZFJlcG9ydHMgPSBbXTtcbiAgICAgICAgaWYgKHJlcG9ydHMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVwb3J0cy5mb3JFYWNoKChyZXBvcnQpID0+IHtcbiAgICAgICAgICAgICAgICByZXBvcnQuZm9yRWFjaCgocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoU1RBVFNfUkVDRUlWRVJfRklMVEVSUy5pbmNsdWRlcyhyLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJvdW5kUmVwb3J0cy5wdXNoKHIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChTVEFUU19TRU5ERVJfRklMVEVSUy5pbmNsdWRlcyhyLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRib3VuZFJlcG9ydHMucHVzaChyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLnByb2Nlc3NSZXBvcnQocmVwb3J0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluYm91bmRSZXBvcnRzLmxlbmd0aCA+IDAgJiYgc3RyZWFtSWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5wcm9jZXNzSW5ib3VuZFJlcG9ydHMoc3RyZWFtSWQsIGluYm91bmRSZXBvcnRzKSxcbiAgICAgICAgICAgICAgICBvcmlnaW46IFBlZXJDb25uZWN0aW9uT3JpZ2luLlJlY2VpdmVyLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0Ym91bmRSZXBvcnRzLmxlbmd0aCA+IDAgJiYgc3RyZWFtSWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5wcm9jZXNzT3V0Ym91bmRSZXBvcnRzKHN0cmVhbUlkLCBvdXRib3VuZFJlcG9ydHMpLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogUGVlckNvbm5lY3Rpb25PcmlnaW4uU2VuZGVyLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSZXBvcnQoKSB7XG4gICAgICAgIGNvbnN0IHNlbmRlclN0cmVhbXMgPSB7fTtcbiAgICAgICAgdGhpcy5zZW5kZXJTdHJlYW1zLmZvckVhY2goKHN0cmVhbSwgc3RyZWFtSWQpID0+IHtcbiAgICAgICAgICAgIHNlbmRlclN0cmVhbXNbc3RyZWFtSWRdID0gc3RyZWFtLmdldFJlcG9ydCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVjZWl2ZXJTdHJlYW1zID0ge307XG4gICAgICAgIHRoaXMucmVjZWl2ZXJTdHJlYW1zLmZvckVhY2goKHN0cmVhbSwgc3RyZWFtSWQpID0+IHtcbiAgICAgICAgICAgIHJlY2VpdmVyU3RyZWFtc1tzdHJlYW1JZF0gPSBzdHJlYW0uZ2V0UmVwb3J0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYml0cmF0ZTogdGhpcy5iaXRyYXRlLFxuICAgICAgICAgICAgc2VuZGVyQml0cmF0ZTogdGhpcy5zZW5kZXJCaXRyYXRlLFxuICAgICAgICAgICAgcmVjZWl2ZXJCaXRyYXRlOiB0aGlzLnJlY2VpdmVyQml0cmF0ZSxcbiAgICAgICAgICAgIHNlbmRlclN0cmVhbXM6IHNlbmRlclN0cmVhbXMsXG4gICAgICAgICAgICByZWNlaXZlclN0cmVhbXM6IHJlY2VpdmVyU3RyZWFtcyxcbiAgICAgICAgICAgIGRhdGFDaGFubmVsOiB0aGlzLmRhdGFDaGFubmVsLmdldFJlcG9ydCgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm9jZXNzSW5ib3VuZFJlcG9ydHMoc3RyZWFtSWQsIHJlcG9ydHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlY2VpdmVyU3RyZWFtcy5oYXMoc3RyZWFtSWQpKSB7XG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVyU3RyZWFtcy5zZXQoc3RyZWFtSWQsIG5ldyBTdGF0c1N0cmVhbSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZWNlaXZlclN0cmVhbXMuZ2V0KHN0cmVhbUlkKS5wcm9jZXNzUmVwb3J0cyhyZXBvcnRzKTtcbiAgICB9XG4gICAgcHJvY2Vzc091dGJvdW5kUmVwb3J0cyhzdHJlYW1JZCwgcmVwb3J0cykge1xuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyU3RyZWFtcy5oYXMoc3RyZWFtSWQpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRlclN0cmVhbXMuc2V0KHN0cmVhbUlkLCBuZXcgU3RhdHNTdHJlYW0oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZGVyU3RyZWFtcy5nZXQoc3RyZWFtSWQpLnByb2Nlc3NSZXBvcnRzKHJlcG9ydHMpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFN0YXRzVHJhY2tBdWRpbyB9IGZyb20gJ21vZGVscy9TdGF0cy9TdGF0c1RyYWNrQXVkaW8nO1xuaW1wb3J0IHsgU3RhdHNUcmFja1ZpZGVvIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzVHJhY2tWaWRlbyc7XG5leHBvcnQgY2xhc3MgU3RhdHNTdHJlYW0ge1xuICAgIGF1ZGlvID0gbmV3IFN0YXRzVHJhY2tBdWRpbygpO1xuICAgIHZpZGVvID0gbmV3IFN0YXRzVHJhY2tWaWRlbygpO1xuICAgIGdldCBiaXRyYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdWRpby5iaXRyYXRlICsgdGhpcy52aWRlby5iaXRyYXRlO1xuICAgIH1cbiAgICBwcm9jZXNzUmVwb3J0cyhyZXBvcnRzKSB7XG4gICAgICAgIHJlcG9ydHMuZm9yRWFjaCgocmVwb3J0KSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKHJlcG9ydC5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvLnByb2Nlc3NSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZGVvLnByb2Nlc3NSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXBvcnQoKTtcbiAgICB9XG4gICAgZ2V0UmVwb3J0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXVkaW86IHRoaXMuYXVkaW8uZ2V0UmVwb3J0KCksXG4gICAgICAgICAgICB2aWRlbzogdGhpcy52aWRlby5nZXRSZXBvcnQoKSxcbiAgICAgICAgICAgIHJvdW5kVHJpcFRpbWU6IHRoaXMuZ2V0Um91bmRUcmlwVGltZSgpLFxuICAgICAgICAgICAgQXVkaW9WaWRlb0RlbGF5OiB0aGlzLmdldEF1ZGlvVmlkZW9EZWxheSgpLFxuICAgICAgICAgICAgYml0cmF0ZTogdGhpcy5iaXRyYXRlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRSb3VuZFRyaXBUaW1lKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigodGhpcy5hdWRpby5yb3VuZFRyaXBUaW1lICsgdGhpcy52aWRlby5yb3VuZFRyaXBUaW1lKSAvIDIpO1xuICAgIH1cbiAgICBnZXRBdWRpb1ZpZGVvRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1ZGlvLmVzdGltYXRlZFBsYXlvdXRUaW1lc3RhbXAgLSB0aGlzLnZpZGVvLmVzdGltYXRlZFBsYXlvdXRUaW1lc3RhbXA7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU1RBVFNfSU5CT1VORCwgU1RBVFNfT1VUQk9VTkQsIFNUQVRTX1JFTU9URV9JTkJPVU5ELCBTVEFUU19SRVBPUlRfREVMQVkgfSBmcm9tICdjb25zdGFudHMvU3RhdHMnO1xuZXhwb3J0IGNsYXNzIFN0YXRzVHJhY2sge1xuICAgIHJvdW5kVHJpcFRpbWUgPSAwO1xuICAgIGVzdGltYXRlZFBsYXlvdXRUaW1lc3RhbXAgPSAwO1xuICAgIGppdHRlciA9IDA7XG4gICAgcGFja2V0c0xvc3QgPSAwO1xuICAgIHBhY2tldHMgPSAwO1xuICAgIGN1cnJlbnRUaW1lc3RhbXAgPSAwO1xuICAgIHByZXZpb3VzVGltZXN0YW1wID0gMDtcbiAgICBjdXJyZW50Qnl0ZXMgPSAwO1xuICAgIHByZXZpb3VzQnl0ZXMgPSAwO1xuICAgIGdldCBiaXRyYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50VGltZXN0YW1wID4gMCAmJiB0aGlzLnByZXZpb3VzVGltZXN0YW1wID4gMCAmJiAoRGF0ZS5ub3coKSAtIHRoaXMuY3VycmVudFRpbWVzdGFtcCkgPCBTVEFUU19SRVBPUlRfREVMQVkpIHtcbiAgICAgICAgICAgIHJldHVybiAoKHRoaXMuY3VycmVudEJ5dGVzIC0gdGhpcy5wcmV2aW91c0J5dGVzKSAvICh0aGlzLmN1cnJlbnRUaW1lc3RhbXAgLSB0aGlzLnByZXZpb3VzVGltZXN0YW1wKSAqIDggKiAxMDAwKTsgLy8gY29udmVydCB0byBicHNcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcHJvY2Vzc1JlcG9ydChyZXBvcnQpIHtcbiAgICAgICAgc3dpdGNoIChyZXBvcnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTVEFUU19JTkJPVU5EOlxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc0luYm91bmRSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU1RBVFNfT1VUQk9VTkQ6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzT3V0Ym91bmRSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU1RBVFNfUkVNT1RFX0lOQk9VTkQ6XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzUmVtb3RlSW5ib3VuZFJlcG9ydChyZXBvcnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJpdHJhdGU6IHRoaXMuYml0cmF0ZSxcbiAgICAgICAgICAgIHBhY2tldHNMb3N0UGVyYzogdGhpcy5nZXRQYWNrZXRzTG9zdFBlcmMoKSxcbiAgICAgICAgICAgIHJvdW5kVHJpcFRpbWU6IHRoaXMucm91bmRUcmlwVGltZSxcbiAgICAgICAgICAgIGppdHRlcjogdGhpcy5qaXR0ZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb2Nlc3NJbmJvdW5kUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICB0aGlzLnNldEJ5dGVzKHJlcG9ydC5ieXRlc1JlY2VpdmVkKTtcbiAgICAgICAgdGhpcy5zZXRUaW1lc3RhbXAocmVwb3J0LnRpbWVzdGFtcCk7XG4gICAgICAgIHRoaXMucGFja2V0cyA9IHJlcG9ydC5wYWNrZXRzUmVjZWl2ZWQ7XG4gICAgICAgIHRoaXMucGFja2V0c0xvc3QgPSByZXBvcnQucGFja2V0c0xvc3Q7XG4gICAgICAgIGlmICh0eXBlb2YgcmVwb3J0LmppdHRlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuaml0dGVyID0gcmVwb3J0LmppdHRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaml0dGVyID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlcG9ydC5lc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5lc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wID0gcmVwb3J0LmVzdGltYXRlZFBsYXlvdXRUaW1lc3RhbXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVzdGltYXRlZFBsYXlvdXRUaW1lc3RhbXAgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb2Nlc3NPdXRib3VuZFJlcG9ydChyZXBvcnQpIHtcbiAgICAgICAgdGhpcy5zZXRCeXRlcyhyZXBvcnQuYnl0ZXNTZW50KTtcbiAgICAgICAgdGhpcy5zZXRUaW1lc3RhbXAocmVwb3J0LnRpbWVzdGFtcCk7XG4gICAgICAgIHRoaXMucGFja2V0cyA9IHJlcG9ydC5wYWNrZXRzU2VudDtcbiAgICB9XG4gICAgcHJvY2Vzc1JlbW90ZUluYm91bmRSZXBvcnQocmVwb3J0KSB7XG4gICAgICAgIHRoaXMucm91bmRUcmlwVGltZSA9IHJlcG9ydC5yb3VuZFRyaXBUaW1lICogMTAwMDsgLy8gY29udmVydCB0byBtc1xuICAgICAgICBpZiAodHlwZW9mIHJlcG9ydC5qaXR0ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmppdHRlciA9IHJlcG9ydC5qaXR0ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmppdHRlciA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0UGFja2V0c0xvc3RQZXJjKCkge1xuICAgICAgICBpZiAodGhpcy5wYWNrZXRzID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFja2V0c0xvc3QgLyB0aGlzLnBhY2tldHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHNldFRpbWVzdGFtcCh0aW1lc3RhbXApIHtcbiAgICAgICAgaWYgKHRpbWVzdGFtcCA+IHRoaXMuY3VycmVudFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1RpbWVzdGFtcCA9IHRoaXMuY3VycmVudFRpbWVzdGFtcDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRCeXRlcyhieXRlcykge1xuICAgICAgICB0aGlzLnByZXZpb3VzQnl0ZXMgPSB0aGlzLmN1cnJlbnRCeXRlcztcbiAgICAgICAgdGhpcy5jdXJyZW50Qnl0ZXMgPSBieXRlcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdGF0c1RyYWNrIH0gZnJvbSAnbW9kZWxzL1N0YXRzL1N0YXRzVHJhY2snO1xuZXhwb3J0IGNsYXNzIFN0YXRzVHJhY2tBdWRpbyBleHRlbmRzIFN0YXRzVHJhY2sge1xufVxuIiwiaW1wb3J0IHsgU1RBVFNfUkVQT1JUX0RFTEFZIH0gZnJvbSAnY29uc3RhbnRzL1N0YXRzJztcbmltcG9ydCB7IFN0YXRzVHJhY2sgfSBmcm9tICdtb2RlbHMvU3RhdHMvU3RhdHNUcmFjayc7XG5leHBvcnQgY2xhc3MgU3RhdHNUcmFja1ZpZGVvIGV4dGVuZHMgU3RhdHNUcmFjayB7XG4gICAgZnJhbWVUaW1lID0gMDtcbiAgICBmcmFtZVdpZHRoID0gMDtcbiAgICBmcmFtZUhlaWdodCA9IDA7XG4gICAgY3VycmVudEZyYW1lcyA9IDA7XG4gICAgcHJldmlvdXNGcmFtZXMgPSAwO1xuICAgIGdldCBmcHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lc3RhbXAgPiAwICYmIHRoaXMucHJldmlvdXNUaW1lc3RhbXAgPiAwICYmIChEYXRlLm5vdygpIC0gdGhpcy5jdXJyZW50VGltZXN0YW1wKSA8IFNUQVRTX1JFUE9SVF9ERUxBWSkge1xuICAgICAgICAgICAgcmV0dXJuICgodGhpcy5jdXJyZW50RnJhbWVzIC0gdGhpcy5wcmV2aW91c0ZyYW1lcykgLyAodGhpcy5jdXJyZW50VGltZXN0YW1wIC0gdGhpcy5wcmV2aW91c1RpbWVzdGFtcCkgKiAxMDAwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZ2V0IHRpbWVQZXJGcmFtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZnJhbWVUaW1lICYmIHRoaXMuY3VycmVudEZyYW1lcyAmJiB0aGlzLmN1cnJlbnRGcmFtZXMgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mcmFtZVRpbWUgLyB0aGlzLmN1cnJlbnRGcmFtZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHNldCBmcmFtZXMoZnJhbWVzKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNGcmFtZXMgPSB0aGlzLmN1cnJlbnRGcmFtZXM7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lcyA9IGZyYW1lcztcbiAgICB9XG4gICAgZ2V0UmVwb3J0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIuZ2V0UmVwb3J0KCksXG4gICAgICAgICAgICBGUFM6IHRoaXMuZnBzLFxuICAgICAgICAgICAgdGltZVBlckZyYW1lOiB0aGlzLnRpbWVQZXJGcmFtZSxcbiAgICAgICAgICAgIGZyYW1lV2lkdGg6IHRoaXMuZnJhbWVXaWR0aCxcbiAgICAgICAgICAgIGZyYW1lSGVpZ2h0OiB0aGlzLmZyYW1lSGVpZ2h0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm9jZXNzSW5ib3VuZFJlcG9ydChyZXBvcnQpIHtcbiAgICAgICAgc3VwZXIucHJvY2Vzc0luYm91bmRSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgdGhpcy5mcmFtZVRpbWUgPSByZXBvcnQudG90YWxEZWNvZGVUaW1lO1xuICAgICAgICB0aGlzLmZyYW1lcyA9IHJlcG9ydC5mcmFtZXNEZWNvZGVkO1xuICAgICAgICB0aGlzLmZyYW1lV2lkdGggPSByZXBvcnQuZnJhbWVXaWR0aDtcbiAgICAgICAgdGhpcy5mcmFtZUhlaWdodCA9IHJlcG9ydC5mcmFtZUhlaWdodDtcbiAgICB9XG4gICAgcHJvY2Vzc091dGJvdW5kUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICBzdXBlci5wcm9jZXNzT3V0Ym91bmRSZXBvcnQocmVwb3J0KTtcbiAgICAgICAgdGhpcy5mcmFtZVRpbWUgPSByZXBvcnQudG90YWxFbmNvZGVUaW1lO1xuICAgICAgICB0aGlzLmZyYW1lcyA9IHJlcG9ydC5mcmFtZXNFbmNvZGVkO1xuICAgICAgICB0aGlzLmZyYW1lV2lkdGggPSByZXBvcnQuZnJhbWVXaWR0aDtcbiAgICAgICAgdGhpcy5mcmFtZUhlaWdodCA9IHJlcG9ydC5mcmFtZUhlaWdodDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdWJzY3JpcHRpb25UeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBpc1NlbmRlcihjb250ZW50LCBub2RlSWQpIHtcbiAgICByZXR1cm4gY29udGVudC5zb3VyY2VJZCA9PT0gbm9kZUlkO1xufVxuO1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVjZWl2ZXIoY29udGVudCwgbm9kZUlkKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQuZGVzdGluYXRpb25JZHM/LmluY2x1ZGVzKG5vZGVJZCkgPz8gaXNCcm9hZGNhc3QoY29udGVudCk7XG59XG47XG5leHBvcnQgZnVuY3Rpb24gaXNCcm9hZGNhc3QoY29udGVudCkge1xuICAgIHJldHVybiBjb250ZW50LmRlc3RpbmF0aW9uSWRzID09PSB1bmRlZmluZWQ7XG59XG47XG5leHBvcnQgZnVuY3Rpb24gZ2V0U3Vic2NyaXB0aW9uTGFiZWwoc3Vic2NyaXB0aW9uVHlwZSwgeyBjb250ZW50VHlwZSwgbGFiZWwsIHJlbW90ZUlkIH0pIHtcbiAgICByZXR1cm4gYCR7c3Vic2NyaXB0aW9uVHlwZX0tJHtjb250ZW50VHlwZX0tJHtsYWJlbH0tJHtyZW1vdGVJZH1gO1xufVxuO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcGljTGFiZWwoY29udGVudFR5cGUsIGxhYmVsLCByZW1vdGVJZCkge1xuICAgIHJldHVybiBgJHtjb250ZW50VHlwZX0ke2xhYmVsfSR7cmVtb3RlSWR9YDtcbn1cbjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmVmaXgoc3ViVHlwZSkge1xuICAgIHJldHVybiBzdWJUeXBlID09PSBTdWJzY3JpcHRpb25UeXBlLkluY29taW5nID8gJ0luY29taW5nU3Vic2NyaXB0aW9uJyA6ICdPdXRnb2luZ1N1YnNjcmlwdGlvbic7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFydHMoc3RyZWFtLCBjb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbGFiZWw6IHN0cmVhbS5nZXRJbnRlcm5hbFN0cmVhbUlkKCksXG4gICAgICAgIGNvbnRlbnRUeXBlOiBzdHJlYW0uZ2V0Q29udGVudFR5cGUoKSxcbiAgICAgICAgcmVtb3RlSWQ6IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSxcbiAgICAgICAgc3VwcG9ydHNDb250ZW50VHlwZTogY29ubmVjdGlvbi5nZXRTdXBwb3J0ZWRDb250ZW50VHlwZXMoKS5pbmNsdWRlcyhzdHJlYW0uZ2V0Q29udGVudFR5cGUoKSksXG4gICAgfTtcbn1cbiIsImltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1lc3NhZ2UnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5leHBvcnQgY2xhc3MgSW5jb21pbmdTdWJzY3JpcHRpb24ge1xuICAgIHNvdXJjZTtcbiAgICBkZXN0aW5hdGlvbjtcbiAgICBzeXN0ZW1Ub3BpYztcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgfVxuICAgIHJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljID0gcHVibGlzaGVyO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5zeXN0ZW1Ub3BpYztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSW5jb21pbmdNZWRpYVN1YnNjcmlwdGlvbiBleHRlbmRzIEluY29taW5nU3Vic2NyaXB0aW9uIHtcbiAgICBzb3VyY2U7XG4gICAgZGVzdGluYXRpb247XG4gICAgcGFyYW1zO1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSwgZGVzdGluYXRpb24sIHBhcmFtcykge1xuICAgICAgICBzdXBlcihzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgfVxuICAgIHN1YnNjcmliZShvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVzdGluYXRpb24uZ2V0Q29udGVudFR5cGUoKSA9PT0gQ29udGVudFR5cGUuTWVkaWEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuU3Vic2NyaWJlTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuZGVzdGluYXRpb24uZ2V0TGFiZWwoKSxcbiAgICAgICAgICAgICAgICBvd25lcklkLFxuICAgICAgICAgICAgICAgIHRyYWNrS2luZHM6IHRyYWNrS2luZHMgPz8gdGhpcy5kZXN0aW5hdGlvbi5nZXRBdmFpbGFibGVUcmFja0tpbmRzKCksXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYy5wdWJsaXNoKHtcbiAgICAgICAgICAgICAgICBzb3VyY2VJZDogdGhpcy5zb3VyY2UuZ2V0TG9jYWxJZCgpLFxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbdGhpcy5zb3VyY2UuZ2V0UmVtb3RlSWQoKV0sXG4gICAgICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUob3duZXJJZCwgcGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLmRlc3RpbmF0aW9uLmdldENvbnRlbnRUeXBlKCkgPT09IENvbnRlbnRUeXBlLk1lZGlhKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlVwZGF0ZU1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmRlc3RpbmF0aW9uLmdldExhYmVsKCksXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLnNvdXJjZS5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFt0aGlzLnNvdXJjZS5nZXRSZW1vdGVJZCgpXSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuU3Vic2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKG93bmVySWQsIHJlbWFpbmluZ1RyYWNrcywgdHJhY2tLaW5kcykge1xuICAgICAgICBpZiAodGhpcy5kZXN0aW5hdGlvbi5nZXRDb250ZW50VHlwZSgpID09PSBDb250ZW50VHlwZS5NZWRpYSkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5VbnN1YnNjcmliZU1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLmRlc3RpbmF0aW9uLmdldExhYmVsKCksXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgICAgICB0cmFja0tpbmRzOiB0cmFja0tpbmRzID8/IHRoaXMuZGVzdGluYXRpb24uZ2V0QXZhaWxhYmxlVHJhY2tLaW5kcygpLFxuICAgICAgICAgICAgICAgIHJlbWFpbmluZ1RyYWNrcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgICAgIHNvdXJjZUlkOiB0aGlzLnNvdXJjZS5nZXRMb2NhbElkKCksXG4gICAgICAgICAgICAgICAgZGVzdGluYXRpb25JZHM6IFt0aGlzLnNvdXJjZS5nZXRSZW1vdGVJZCgpXSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuU3Vic2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTVUJTQ1JJUFRJT05fUkVRVUVTVF9SRVRSWV9ERUxBWSwgU1VCU0NSSVBUSU9OX1JFUVVFU1RfVElNRU9VVCwgU1VCU0NSSVBUSU9OX1JFVFJZX0RFTEFZIH0gZnJvbSAnY29uc3RhbnRzL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1lc3NhZ2UnO1xuaW1wb3J0ICogYXMgSGVscGVycyBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL0hlbHBlcnMnO1xuaW1wb3J0IHsgSW5jb21pbmdNZWRpYVN1YnNjcmlwdGlvbiwgSW5jb21pbmdTdWJzY3JpcHRpb24gfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL0luY29taW5nU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvblJlcXVlc3QgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvblJlcXVlc3QnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uTWFwcyB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uTWFwcyc7XG5pbXBvcnQgaW50ZXJ2YWwgZnJvbSAndXRpbHMvSW50ZXJ2YWwvSW50ZXJ2YWwnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7IFN5bmNRdWV1ZUNhbGxiYWNrIH0gZnJvbSAndXRpbHMvUXVldWUvUXVldWUnO1xuaW1wb3J0IHsgY3JlYXRlUmV0cnlRdWV1ZSB9IGZyb20gJ3V0aWxzL1F1ZXVlL1JldHJ5UXVldWUnO1xuZXhwb3J0IGNsYXNzIEluY29taW5nU3Vic2NyaXB0aW9uTWFuYWdlciB7XG4gICAgY29uZmlncztcbiAgICBtYXhEaXN0YW5jZTtcbiAgICBzdWJzY3JpcHRpb25SZXF1ZXN0cyA9IG5ldyBNYXAoKTtcbiAgICBzdWJzY3JpcHRpb25SZXF1ZXN0c1F1ZXVlID0gY3JlYXRlUmV0cnlRdWV1ZShuZXcgU3luY1F1ZXVlQ2FsbGJhY2sodGhpcy5yZXF1ZXN0U3Vic2NyaXB0aW9uQWN0aW9uLmJpbmQodGhpcyksICgpID0+IGludGVydmFsLndhaXQoU1VCU0NSSVBUSU9OX1JFUVVFU1RfUkVUUllfREVMQVkpKSwgdHJ1ZSk7XG4gICAgc3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXRzID0gbmV3IE1hcCgpO1xuICAgIG1hcHM7XG4gICAgY2hvc2VuQW5zd2VycyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBtYXhEaXN0YW5jZSkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MgPSBjb25maWdzO1xuICAgICAgICB0aGlzLm1heERpc3RhbmNlID0gbWF4RGlzdGFuY2U7XG4gICAgICAgIHRoaXMubWFwcyA9IG5ldyBTdWJzY3JpcHRpb25NYXBzKCh7IHNvdXJjZSwgZGVzdGluYXRpb24gfSkgPT4gSGVscGVycy5nZXRQYXJ0cyhkZXN0aW5hdGlvbiwgc291cmNlKSk7XG4gICAgfVxuICAgIGNyZWF0ZVN1YnNjcmlwdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuaXNNZWRpYVNvdXJjZShzb3VyY2UpICYmIHRoaXMuaXNNZWRpYURlc3RpbmF0aW9uKGRlc3RpbmF0aW9uKVxuICAgICAgICAgICAgPyBuZXcgSW5jb21pbmdNZWRpYVN1YnNjcmlwdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKVxuICAgICAgICAgICAgOiBuZXcgSW5jb21pbmdTdWJzY3JpcHRpb24oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMubWFwcy5jcmVhdGVTdWJzY3JpcHRpb24oU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZywgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHN1YnNjcmlwdGlvbik7XG4gICAgfVxuICAgIHJlbW92ZVN1YnNjcmlwdGlvbihsYWJlbCwgY29udGVudFR5cGUsIHJlbW90ZUlkID0gJycpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSB7IGNvbnRlbnRUeXBlLCBsYWJlbCwgcmVtb3RlSWQgfTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uTGFiZWwgPSBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuSW5jb21pbmcsIHBhcnRzKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZ2V0KHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgIH1cbiAgICBoYW5kbGVDb250ZW50VW5wdWJsaXNoTWVkaWFTdHJlYW0oY29udGVudCkge1xuICAgICAgICB0aGlzLnJlbW92ZVJlbW90ZVN0cmVhbVN1YnNjcmlwdGlvbihjb250ZW50KTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFN1YnNjcmliZU1lZGlhU3RyZWFtKHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyB9KSB7XG4gICAgICAgIHRoaXMucmVxdWVzdFN1YnNjcmlwdGlvbihsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zKTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudFVwZGF0ZU1lZGlhU3RyZWFtKHsgb3duZXJJZCwgbGFiZWwsIHBhcmFtcyB9KSB7XG4gICAgICAgIGNvbnN0IHsgc3Vic2NyaXB0aW9uTGFiZWwgfSA9IHRoaXMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwobGFiZWwsIG93bmVySWQpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLmdldE1lZGlhU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpcHRpb24udXBkYXRlKG93bmVySWQsIHBhcmFtcyk7XG4gICAgfVxuICAgIGhhbmRsZUNvbnRlbnRVbnN1YnNjcmliZU1lZGlhU3RyZWFtKHsgb3duZXJJZCwgbGFiZWwsIHRyYWNrS2luZHMsIHJlbWFpbmluZ1RyYWNrcyB9KSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RMYWJlbCA9IEhlbHBlcnMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwoU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZywgeyBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsIGxhYmVsLCByZW1vdGVJZDogb3duZXJJZCB9KTtcbiAgICAgICAgdGhpcy5jbGVhclN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0KHJlcXVlc3RMYWJlbCk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmdldChyZXF1ZXN0TGFiZWwpO1xuICAgICAgICBpZiAocmVxdWVzdCkge1xuICAgICAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnVucmVnaXN0ZXJTeXN0ZW1Tb3VyY2UocmVxdWVzdCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmRlbGV0ZShyZXF1ZXN0TGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgcGFydHMsIHN1YnNjcmlwdGlvbkxhYmVsIH0gPSB0aGlzLmdldFN1YnNjcmlwdGlvbkxhYmVsKGxhYmVsLCBvd25lcklkKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5nZXRNZWRpYVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKG93bmVySWQsIHJlbWFpbmluZ1RyYWNrcywgdHJhY2tLaW5kcyk7XG4gICAgICAgIGlmIChyZW1haW5pbmdUcmFja3MgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKHBhcnRzLmxhYmVsLCBwYXJ0cy5jb250ZW50VHlwZSwgcGFydHMucmVtb3RlSWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvblJlc3RhcnROZWVkTWVkaWFTdHJlYW0oc291cmNlSWQsIHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHN0cmVhbUlkLCBwYXJhbXMgfSkge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25MYWJlbCA9IEhlbHBlcnMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwoU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZywgeyBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsIGxhYmVsOiBzdHJlYW1JZCwgcmVtb3RlSWQ6IHNvdXJjZUlkIH0pO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5nZXQoc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbiB8fCAhKHN1YnNjcmlwdGlvbiBpbnN0YW5jZW9mIEluY29taW5nTWVkaWFTdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLlN1YnNjcmlwdGlvblJlcXVlc3REb2VzTm90RXhpc3QsIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogc3Vic2NyaXB0aW9uTGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIHRoaXMucmVxdWVzdFN1YnNjcmlwdGlvbihsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zKTtcbiAgICB9XG4gICAgaGFuZGxlU3Vic2NyaXB0aW9uUHJvdmlkZU1lZGlhU3RyZWFtKHNvdXJjZUlkLCBjb250ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyB9ID0gY29udGVudDtcbiAgICAgICAgY29uc3QgcmVxdWVzdExhYmVsID0gSGVscGVycy5nZXRTdWJzY3JpcHRpb25MYWJlbChTdWJzY3JpcHRpb25UeXBlLkluY29taW5nLCB7IGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZS5NZWRpYSwgbGFiZWwsIHJlbW90ZUlkOiBvd25lcklkIH0pO1xuICAgICAgICBpZiAoIXRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMuaGFzKHJlcXVlc3RMYWJlbCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuU3Vic2NyaXB0aW9uUmVxdWVzdERvZXNOb3RFeGlzdCwge1xuICAgICAgICAgICAgICAgIGxhYmVsOiByZXF1ZXN0TGFiZWwsXG4gICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgICAgICBzdHJlYW1JZDogY29udGVudC5zdHJlYW1JZCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0czogdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvblJlcXVlc3QgPSB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmdldChyZXF1ZXN0TGFiZWwpO1xuICAgICAgICBpZiAodHJhY2tLaW5kcy5sZW5ndGggIT09IHN1YnNjcmlwdGlvblJlcXVlc3QuZ2V0VHJhY2tzKCkubGVuZ3RoIHx8ICF0cmFja0tpbmRzLmV2ZXJ5KCh0cmFja0tpbmQpID0+IHN1YnNjcmlwdGlvblJlcXVlc3QuZ2V0VHJhY2tzKCkuaW5jbHVkZXModHJhY2tLaW5kKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY2hvc2VuQW5zd2VyID0gc3Vic2NyaXB0aW9uUmVxdWVzdC5oYW5kbGVTdWJzY3JpcHRpb25TeXN0ZW1FdmVudHMoc291cmNlSWQsIGNvbnRlbnQpO1xuICAgICAgICAgICAgaWYgKCFjaG9zZW5BbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZShjaG9zZW5BbnN3ZXIsIG93bmVySWQsIGxhYmVsLCByZXF1ZXN0TGFiZWwsIHRyYWNrS2luZHMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTm9BbnN3ZXIobGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlU3Vic2NyaXB0aW9uTWVkaWFTdHJlYW1VbmF2YWlsYWJsZShzb3VyY2VJZCwgeyBsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcyB9KSB7XG4gICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtKG93bmVySWQsIGxhYmVsKTtcbiAgICAgICAgaWYgKCFkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0cmVhbUlkID0gZGVzdGluYXRpb24uZ2V0SW50ZXJuYWxTdHJlYW1JZCgpO1xuICAgICAgICBjb25zdCBzdWJzY3JpYmVkVHJhY2tzID0gZGVzdGluYXRpb24uZ2V0U3Vic2NyaWJlZFRyYWNrcygpO1xuICAgICAgICBjb25zdCBpc1N1YnNjcmliZWRUcmFja1VuYXZhaWxhYmxlID0gc3Vic2NyaWJlZFRyYWNrcy5zb21lKCh0cmFja0tpbmQpID0+IHRyYWNrS2luZHMuaW5jbHVkZXModHJhY2tLaW5kKSk7XG4gICAgICAgIGlmICghaXNTdWJzY3JpYmVkVHJhY2tVbmF2YWlsYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gaWdub3JlIHRoZSB0cmFja0tpbmRzIHBhc3NlZCBpbiBoZXJlIGFuZCBpbnN0ZWFkIHJlbHkgb24gdGhlIHRyYWNrS2luZHMgZnJvbSB0aGUgc3Vic2NyaXB0aW9uXG4gICAgICAgIC8vIEJlY2F1c2UgZXZlbiBpZiBvbmx5IG9uZSB0cmFjayBpcyB1bmF2YWlsYWJsZSwgd2UgbmVlZCB0byBmaW5kIGFuIGVudGlyZSBuZXcgc3Vic2NyaXB0aW9uXG4gICAgICAgIHRoaXMuZmluZE5ld01lZGlhU3Vic2NyaXB0aW9uKHNvdXJjZUlkLCBsYWJlbCwgc3RyZWFtSWQsIG93bmVySWQsIHN1YnNjcmliZWRUcmFja3MpO1xuICAgIH1cbiAgICBoYW5kbGVDb250ZW50UmVtb3RlTWVkaWFTdHJlYW1UcmFja0ZhaWwoeyBsYWJlbCwgcHJvdmlkZXJJZCwgb3duZXJJZCwgc3RyZWFtSWQsIHRyYWNrS2luZHMgfSkge1xuICAgICAgICB0aGlzLmZpbmROZXdNZWRpYVN1YnNjcmlwdGlvbihwcm92aWRlcklkLCBsYWJlbCwgc3RyZWFtSWQsIG93bmVySWQsIHRyYWNrS2luZHMpO1xuICAgIH1cbiAgICBoYW5kbGVPcHRpbWl6YXRpb25Db25uZWN0aW9uU3VjY2Vzcyhzb3VyY2VJZCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFuc3dlciBvZiB0aGlzLmNob3NlbkFuc3dlcnMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RyZWFtTGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyB9ID0gYW5zd2VyO1xuICAgICAgICAgICAgLy8gVE9ETyAtIFdlIHNob3VsZCBoYXZlIGEgc3BlY2lmaWMgdHlwZSBmb3IgYW4gYWNjZXB0ZWQgYW5zd2VyIHZzIGEgd2FpdGluZyBhbnN3ZXJcbiAgICAgICAgICAgIGlmICghb3duZXJJZCB8fCAhdHJhY2tLaW5kcyB8fCAhc3RyZWFtTGFiZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzUXVldWUucHVzaCh7IGxhYmVsOiBzdHJlYW1MYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zLCByZW1vdGVJZDogc291cmNlSWQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlU3Vic2NyaXB0aW9uc0Zvck5vZGUobm9kZUlkKSB7XG4gICAgICAgIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpID0+IHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25MYWJlbC5lbmRzV2l0aChub2RlSWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5kZXN0aW5hdGlvbi5nZXRDb250ZW50VHlwZSgpID09PSBDb250ZW50VHlwZS5NZWRpYSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1vdGVNZWRpYVN0cmVhbSA9IHN1YnNjcmlwdGlvbi5kZXN0aW5hdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW90ZU1lZGlhU3RyZWFtLmdldFN1YnNjcmliZWRUcmFja3MoKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLk1lZGlhU3RyZWFtVW5hdmFpbGFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHJlbW90ZU1lZGlhU3RyZWFtLmdldExhYmVsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXJJZDogcmVtb3RlTWVkaWFTdHJlYW0uZ2V0T3duZXJJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrS2luZHM6IHJlbW90ZU1lZGlhU3RyZWFtLmdldFN1YnNjcmliZWRUcmFja3MoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN1YnNjcmlwdGlvbk1lZGlhU3RyZWFtVW5hdmFpbGFibGUobm9kZUlkLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmZvckVhY2godGhpcy5jbG9zZVN1YnNjcmlwdGlvbi5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGNob3NlbkFuc3dlciwgb3duZXJJZCwgbGFiZWwsIHJlcXVlc3RMYWJlbCwgdHJhY2tLaW5kcykge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0Q29ubmVjdGlvbihjaG9zZW5BbnN3ZXIubm9kZUlkKTtcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICB0aGlzLmNsZWFyU3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQocmVxdWVzdExhYmVsKTtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMuaGFzKHJlcXVlc3RMYWJlbCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlncy5tZWRpYXRvci51bnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMuZ2V0KHJlcXVlc3RMYWJlbCkpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5kZWxldGUocmVxdWVzdExhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFuT2xkU3Vic2NyaXB0aW9uKGNob3NlbkFuc3dlciwgb3duZXJJZCwgbGFiZWwsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgZGVzdGluYXRpb24uc2V0SW50ZXJuYWxJZChjaG9zZW5BbnN3ZXIuc3RyZWFtSWQpO1xuICAgICAgICBkZXN0aW5hdGlvbi5zZXRQcm92aWRlcklkKGNob3NlbkFuc3dlci5ub2RlSWQpO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IEhlbHBlcnMuZ2V0UGFydHMoZGVzdGluYXRpb24sIHNvdXJjZSk7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkxhYmVsID0gSGVscGVycy5nZXRTdWJzY3JpcHRpb25MYWJlbChTdWJzY3JpcHRpb25UeXBlLkluY29taW5nLCBwYXJ0cyk7XG4gICAgICAgIGlmICghdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuaGFzKHN1YnNjcmlwdGlvbkxhYmVsKSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdWJzY3JpcHRpb24oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZ2V0KHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIShzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBJbmNvbWluZ01lZGlhU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0RG9lc05vdEV4aXN0LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHJlcXVlc3RMYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdzdWJzY3JpcHRpb24nLCB7XG4gICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY29uZmlncy5jbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIG5vZGVUeXBlOiB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uTGFiZWwsXG4gICAgICAgICAgICAgICAgY2hvc2VuQW5zd2VyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2hvc2VuQW5zd2Vycy5zZXQoc3Vic2NyaXB0aW9uTGFiZWwsIGNob3NlbkFuc3dlcik7XG4gICAgICAgIHN1YnNjcmlwdGlvbi5zdWJzY3JpYmUob3duZXJJZCwgdHJhY2tLaW5kcywgY2hvc2VuQW5zd2VyLnBhcmFtcyk7XG4gICAgfVxuICAgIHJlbW92ZVJlbW90ZVN0cmVhbVN1YnNjcmlwdGlvbih7IG93bmVySWQsIGxhYmVsIH0pIHtcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICBjb25zdCBbc3Vic2NyaXB0aW9uTGFiZWwsIHN1YnNjcmlwdGlvbl0gPSBBcnJheVxuICAgICAgICAgICAgLmZyb20odGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZW50cmllcygpKVxuICAgICAgICAgICAgLmZpbmQoKFtsYWJlbCwgX10pID0+IGxhYmVsLmluZGV4T2YoZGVzdGluYXRpb24uZ2V0SW50ZXJuYWxTdHJlYW1JZCgpKSAhPT0gLTEpO1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICB9XG4gICAgY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCkge1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZShzdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLm1hcHMuY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgfVxuICAgIGlzTWVkaWFTb3VyY2Uoc291cmNlKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2UuZ2V0U3VwcG9ydGVkQ29udGVudFR5cGVzKCkuaW5jbHVkZXMoQ29udGVudFR5cGUuTWVkaWEpO1xuICAgIH1cbiAgICBpc01lZGlhRGVzdGluYXRpb24oZGVzdGluYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uLmdldENvbnRlbnRUeXBlKCkgPT09IENvbnRlbnRUeXBlLk1lZGlhO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVOb0Fuc3dlcihsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zKSB7XG4gICAgICAgIGF3YWl0IGludGVydmFsLndhaXQoU1VCU0NSSVBUSU9OX1JFVFJZX0RFTEFZKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdExhYmVsID0gSGVscGVycy5nZXRTdWJzY3JpcHRpb25MYWJlbChTdWJzY3JpcHRpb25UeXBlLkluY29taW5nLCB7IGNvbnRlbnRUeXBlOiBDb250ZW50VHlwZS5NZWRpYSwgbGFiZWwsIHJlbW90ZUlkOiBvd25lcklkIH0pO1xuICAgICAgICB0aGlzLmNsZWFyU3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQocmVxdWVzdExhYmVsKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uUmVxdWVzdCA9IHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMuZ2V0KHJlcXVlc3RMYWJlbCk7XG4gICAgICAgIGlmICghc3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0RG9lc05vdEV4aXN0LCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHJlcXVlc3RMYWJlbCxcbiAgICAgICAgICAgICAgICBvd25lcklkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29ubmVjdGlvbnMgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0Q29ubmVjdGlvbnMoKGNvbm5lY3Rpb24pID0+IGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREaXN0YW5jZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXREaXN0YW5jZSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksIG93bmVySWQpO1xuICAgICAgICBzdWJzY3JpcHRpb25SZXF1ZXN0LnJlc2V0KGNvbm5lY3Rpb25zLm1hcCgoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpKSwgY3VycmVudERpc3RhbmNlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvblJlcXVlc3Quc2VuZFJlcXVlc3QodGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpLCBvd25lcklkLCBsYWJlbCwgdHJhY2tLaW5kcywgcGFyYW1zKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQobGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcywgcmVxdWVzdExhYmVsLCBzdWJzY3JpcHRpb25SZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0c1F1ZXVlLnB1c2goeyBsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcXVlc3RTdWJzY3JpcHRpb24obGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcykge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzUXVldWUucHVzaCh7IGxhYmVsLCBvd25lcklkLCB0cmFja0tpbmRzLCBwYXJhbXMgfSk7XG4gICAgfVxuICAgIHJlcXVlc3RTdWJzY3JpcHRpb25BY3Rpb24oeyBsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zLCByZW1vdGVJZCB9KSB7XG4gICAgICAgIGNvbnN0IHJlbW90ZVN0cmVhbSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRSZW1vdGVNZWRpYVN0cmVhbShvd25lcklkLCBsYWJlbCk7XG4gICAgICAgIGlmICghcmVtb3RlU3RyZWFtKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxOb2RlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldExvY2FsTm9kZSgpO1xuICAgICAgICBjb25zdCBsb2NhbFJhbmsgPSBsb2NhbE5vZGUuZ2V0UmFuaygpO1xuICAgICAgICBpZiAoIWxvY2FsUmFuaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMb2NhbCBub2RlIHJhbmsgaXMgbm90IHNldCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZW1vdGVJZCkge1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlTm9kZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRSZW1vdGVOb2RlcygpLmZpbmQoKG5vZGUpID0+IG5vZGUuZ2V0SWQoKSA9PT0gcmVtb3RlSWQpO1xuICAgICAgICAgICAgY29uc3QgcmVtb3RlUmFuayA9IHJlbW90ZU5vZGU/LmdldFJhbmsoKTtcbiAgICAgICAgICAgIGlmICghcmVtb3RlTm9kZSB8fCAhcmVtb3RlUmFuaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyByZW1vdGUgbm9kZSBvciByYW5rJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvd25lck5vZGUgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTm9kZXMoKS5maW5kKChub2RlKSA9PiBub2RlLmdldElkKCkgPT09IG93bmVySWQpO1xuICAgICAgICAgICAgY29uc3Qgb3duZXJSYW5rID0gb3duZXJOb2RlPy5nZXRSYW5rKCk7XG4gICAgICAgICAgICBpZiAoIW93bmVyTm9kZSB8fCAhb3duZXJSYW5rKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIG93bmVyIG5vZGUgb3IgcmFuaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2hvc2VuQW5zd2VyID0gdGhpcy5jaG9zZW5BbnN3ZXJzLmdldChsYWJlbCk7XG4gICAgICAgICAgICBpZiAoY2hvc2VuQW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hvc2VuQW5zd2VyTm9kZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRSZW1vdGVOb2RlcygpLmZpbmQoKG5vZGUpID0+IG5vZGUuZ2V0SWQoKSA9PT0gY2hvc2VuQW5zd2VyLm5vZGVJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hvc2VuQW5zd2VyUmFuayA9IGNob3NlbkFuc3dlck5vZGU/LmdldFJhbmsoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNob3NlbkFuc3dlck5vZGUgfHwgIWNob3NlbkFuc3dlclJhbmspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXRyeSByZXF1ZXN0IHdpdGggY2hvc2VuIGFuc3dlciBub2RlIG9yIHJhbmsnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJhbmtEaWZmZXJlbmNlID0gTWF0aC5hYnMoY2hvc2VuQW5zd2VyUmFuayAtIG93bmVyUmFuayk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmFua0RpZmZlcmVuY2UgPSBNYXRoLmFicyhyZW1vdGVSYW5rIC0gb3duZXJSYW5rKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFJhbmtEaWZmZXJlbmNlIDwgcmFua0RpZmZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRDb25uZWN0aW9ucygoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpICYmIChyZW1vdGVJZCA/IGNvbm5lY3Rpb24uZ2V0UmVtb3RlSWQoKSA9PT0gcmVtb3RlSWQgOiB0cnVlKSk7XG4gICAgICAgIGlmICghY29ubmVjdGlvbnMubGVuZ3RoIHx8IGNvbm5lY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb25uZWN0aW9ucyBhdmFpbGFibGUgdG8gc2VuZCBzdWJzY3JpcHRpb24gcmVxdWVzdCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnREaXN0YW5jZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXREaXN0YW5jZSh0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCksIG93bmVySWQpO1xuICAgICAgICBjb25zdCByZXF1ZXN0TGFiZWwgPSBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuSW5jb21pbmcsIHsgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLCBsYWJlbCwgcmVtb3RlSWQ6IG93bmVySWQgfSk7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmhhcyhyZXF1ZXN0TGFiZWwpKSB7XG4gICAgICAgICAgICBpZiAocmVtb3RlSWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlIG5lZWQgdG8gdHJlYXQgcmVxdWVzdHMgc2VxdWVudGlhbGx5IHdoZW4gdGhlIHJlbW90ZSBpZCBpcyBzZXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVHJhY2tzID0gdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0cy5nZXQocmVxdWVzdExhYmVsKS5nZXRUcmFja3MoKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIHRoZSBzYW1lLCB3ZSBkb24ndCBuZWVkIHRvIHNlbmQgaXQgYWdhaW5cbiAgICAgICAgICAgIGlmIChwcmV2aW91c1RyYWNrcy5sZW5ndGggPT09IHRyYWNrS2luZHMubGVuZ3RoICYmIHByZXZpb3VzVHJhY2tzLmV2ZXJ5KCh0cmFja0tpbmQpID0+IHRyYWNrS2luZHMuaW5jbHVkZXModHJhY2tLaW5kKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLmdldChyZXF1ZXN0TGFiZWwpKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdHMuZGVsZXRlKHJlcXVlc3RMYWJlbCk7XG4gICAgICAgICAgICB0cmFja0tpbmRzID0gQXJyYXkuZnJvbShuZXcgU2V0KHRyYWNrS2luZHMuY29uY2F0KHByZXZpb3VzVHJhY2tzKSkpO1xuICAgICAgICAgICAgdGhpcy5jbGVhclN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0KHJlcXVlc3RMYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uUmVxdWVzdCA9IG5ldyBTdWJzY3JpcHRpb25SZXF1ZXN0KGNvbm5lY3Rpb25zLm1hcCgoY29ubmVjdGlvbikgPT4gY29ubmVjdGlvbi5nZXRSZW1vdGVJZCgpKSwgY3VycmVudERpc3RhbmNlLCB0aGlzLm1heERpc3RhbmNlLCB0cmFja0tpbmRzKTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHN1YnNjcmlwdGlvblJlcXVlc3QpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RzLnNldChyZXF1ZXN0TGFiZWwsIHN1YnNjcmlwdGlvblJlcXVlc3QpO1xuICAgICAgICBzdWJzY3JpcHRpb25SZXF1ZXN0LnNlbmRSZXF1ZXN0KHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSwgb3duZXJJZCwgbGFiZWwsIHRyYWNrS2luZHMsIHBhcmFtcyk7XG4gICAgICAgIHRoaXMuc2V0U3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQobGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcywgcmVxdWVzdExhYmVsLCBzdWJzY3JpcHRpb25SZXF1ZXN0KTtcbiAgICB9XG4gICAgY2xlYXJTdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dChzdWJzY3JpcHRpb25MYWJlbCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dHMuaGFzKHN1YnNjcmlwdGlvbkxhYmVsKSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXRzLmdldChzdWJzY3JpcHRpb25MYWJlbCkpO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dHMuZGVsZXRlKHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dChsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zLCBzdWJzY3JpcHRpb25MYWJlbCwgc3Vic2NyaXB0aW9uUmVxdWVzdCkge1xuICAgICAgICB0aGlzLmNsZWFyU3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQoc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblJlcXVlc3RUaW1lb3V0cy5zZXQoc3Vic2NyaXB0aW9uTGFiZWwsIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dHMuZGVsZXRlKHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hvc2VuQW5zd2VyID0gc3Vic2NyaXB0aW9uUmVxdWVzdC5jaG9vc2VBbnN3ZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZShjaG9zZW5BbnN3ZXIsIG93bmVySWQsIGxhYmVsLCBzdWJzY3JpcHRpb25MYWJlbCwgdHJhY2tLaW5kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOb0Fuc3dlcihsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgU1VCU0NSSVBUSU9OX1JFUVVFU1RfVElNRU9VVCkpO1xuICAgIH1cbiAgICBmaW5kTmV3TWVkaWFTdWJzY3JpcHRpb24oc291cmNlSWQsIHN0cmVhbUxhYmVsLCBzdHJlYW1JZCwgb3duZXJJZCwgdHJhY2tLaW5kcykge1xuICAgICAgICBjb25zdCB7IHN1YnNjcmlwdGlvbkxhYmVsIH0gPSB0aGlzLmdldFN1YnNjcmlwdGlvbkxhYmVsKHN0cmVhbUxhYmVsLCBvd25lcklkKTtcbiAgICAgICAgY29uc3Qgb2xkU3Vic2NyaXB0aW9uID0gdGhpcy5nZXRNZWRpYVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsUGFyYW1zID0gb2xkU3Vic2NyaXB0aW9uPy5wYXJhbXM7XG4gICAgICAgIGlmIChvbGRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIG9sZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZShvd25lcklkLCAwKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKHN0cmVhbUlkLCBDb250ZW50VHlwZS5NZWRpYSwgc291cmNlSWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVxdWVzdFN1YnNjcmlwdGlvbihzdHJlYW1MYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgb3JpZ2luYWxQYXJhbXMpO1xuICAgIH1cbiAgICBnZXRNZWRpYVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25MYWJlbCkge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5nZXQoc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKHN1YnNjcmlwdGlvbiBpbnN0YW5jZW9mIEluY29taW5nTWVkaWFTdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkludmFsaWRTdWJzY3JpcHRpb24sIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogc3Vic2NyaXB0aW9uTGFiZWwsXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0U3Vic2NyaXB0aW9uTGFiZWwobGFiZWwsIG93bmVySWQpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLmdldFBhcnRzRm9yU3Vic2NyaXB0aW9uTGFiZWwobGFiZWwsIG93bmVySWQpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25MYWJlbCA9IEhlbHBlcnMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwoU3Vic2NyaXB0aW9uVHlwZS5JbmNvbWluZywgcGFydHMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFydHMsXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25MYWJlbCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0UGFydHNGb3JTdWJzY3JpcHRpb25MYWJlbChsYWJlbCwgb3duZXJJZCkge1xuICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRSZW1vdGVNZWRpYVN0cmVhbShvd25lcklkLCBsYWJlbCk7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBkZXN0aW5hdGlvbi5nZXRQcm92aWRlcklkKCk7XG4gICAgICAgIGlmICghcHJvdmlkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5SZW1vdGVNZWRpYVN0cmVhbU1pc3NpbmdQcm92aWRlcklkLCB7XG4gICAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgICAgc3RyZWFtSWQ6IGRlc3RpbmF0aW9uLmdldEludGVybmFsU3RyZWFtSWQoKSxcbiAgICAgICAgICAgICAgICBvd25lcklkLFxuICAgICAgICAgICAgICAgIGxvY2FsSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsXG4gICAgICAgICAgICBsYWJlbDogZGVzdGluYXRpb24uZ2V0SW50ZXJuYWxTdHJlYW1JZCgpLFxuICAgICAgICAgICAgcmVtb3RlSWQ6IHByb3ZpZGVySWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNsZWFuT2xkU3Vic2NyaXB0aW9uKGNob3NlbkFuc3dlciwgb3duZXJJZCwgbGFiZWwsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IG9sZFByb3ZpZGVySWQgPSBkZXN0aW5hdGlvbi5nZXRQcm92aWRlcklkKCk7XG4gICAgICAgIGlmIChvbGRQcm92aWRlcklkICYmIG9sZFByb3ZpZGVySWQgIT09IGNob3NlbkFuc3dlci5ub2RlSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGFydHMsIHN1YnNjcmlwdGlvbkxhYmVsIH0gPSB0aGlzLmdldFN1YnNjcmlwdGlvbkxhYmVsKGxhYmVsLCBvd25lcklkKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMuZ2V0TWVkaWFTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZShvd25lcklkLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihwYXJ0cy5sYWJlbCwgcGFydHMuY29udGVudFR5cGUsIHBhcnRzLnJlbW90ZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBOT0RFX0RJU1RBTkNFX01BWCwgTk9ERV9ESVNUQU5DRV9SRVNPTFVUSU9OLCBOT0RFX0RJU1RBTkNFX1RSQUNLUyB9IGZyb20gJ2NvbnN0YW50cy9Ob2RlJztcbmltcG9ydCB7IFNZU1RFTV9UT1BJQ19JTlRFUk5BTCB9IGZyb20gJ2NvbnN0YW50cy9TeXN0ZW0nO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvbk1lc3NhZ2UnO1xuaW1wb3J0IHsgU3lzdGVtTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL1N1YnNjcmlwdGlvbi9TeXN0ZW1FdmVudCc7XG5pbXBvcnQgKiBhcyBIZWxwZXJzIGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vSGVscGVycyc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25NYXBzIH0gZnJvbSAnbW9kZWxzL1N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25NYXBzJztcbmltcG9ydCB7IFJlbW90ZU1lZGlhU3RyZWFtIH0gZnJvbSAnbW9kZWxzL0NvbnRlbnQvUmVtb3RlTWVkaWFTdHJlYW0nO1xuZXhwb3J0IGNsYXNzIE91dGdvaW5nU3Vic2NyaXB0aW9uTWFuYWdlciB7XG4gICAgY29uZmlncztcbiAgICBtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnM7XG4gICAgbWFwcztcbiAgICBjb25zdHJ1Y3Rvcihjb25maWdzLCBtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgdGhpcy5jb25maWdzID0gY29uZmlncztcbiAgICAgICAgdGhpcy5tYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMgPSBtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMubWFwcyA9IG5ldyBTdWJzY3JpcHRpb25NYXBzKCh7IHNvdXJjZSwgZGVzdGluYXRpb24gfSkgPT4gSGVscGVycy5nZXRQYXJ0cyhzb3VyY2UsIGRlc3RpbmF0aW9uKSk7XG4gICAgfVxuICAgIGNyZWF0ZVN1YnNjcmlwdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHsgc291cmNlLCBkZXN0aW5hdGlvbiB9O1xuICAgICAgICB0aGlzLm1hcHMuY3JlYXRlU3Vic2NyaXB0aW9uKFN1YnNjcmlwdGlvblR5cGUuT3V0Z29pbmcsIHN1YnNjcmlwdGlvbik7XG4gICAgfVxuICAgIHJlbW92ZVN1YnNjcmlwdGlvbihsYWJlbCwgY29udGVudFR5cGUsIHJlbW90ZUlkID0gJycpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSB7IGNvbnRlbnRUeXBlLCBsYWJlbCwgcmVtb3RlSWQgfTtcbiAgICAgICAgdGhpcy5tYXBzLnJlbW92ZVN1YnNjcmlwdGlvbihwYXJ0cywgU3Vic2NyaXB0aW9uVHlwZS5PdXRnb2luZyk7XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvblN1YnNjcmliZU1lZGlhU3RyZWFtKHNvdXJjZUlkLCBjb250ZW50KSB7XG4gICAgICAgIGxldCBzb3VyY2U7XG4gICAgICAgIGlmIChjb250ZW50Lm93bmVySWQgIT09IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSkge1xuICAgICAgICAgICAgc291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldFJlbW90ZU1lZGlhU3RyZWFtKGNvbnRlbnQub3duZXJJZCwgY29udGVudC5sYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzb3VyY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0TG9jYWxNZWRpYVN0cmVhbShjb250ZW50LmxhYmVsKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25MYWJlbCA9IEhlbHBlcnMuZ2V0U3Vic2NyaXB0aW9uTGFiZWwoU3Vic2NyaXB0aW9uVHlwZS5PdXRnb2luZywgeyBjb250ZW50VHlwZTogQ29udGVudFR5cGUuTWVkaWEsIGxhYmVsOiBzb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtSWQoKSwgcmVtb3RlSWQ6IHNvdXJjZUlkIH0pO1xuICAgICAgICBjb25zdCBudW1iZXJPdXRnb2luZ1N1YnNjcmlwdGlvbnMgPSB0aGlzLmdldE51bWJlck91dGdvaW5nU3Vic2NyaXB0aW9ucygpO1xuICAgICAgICBpZiAoIXRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmhhcyhzdWJzY3JpcHRpb25MYWJlbCkgJiYgbnVtYmVyT3V0Z29pbmdTdWJzY3JpcHRpb25zID49IHRoaXMubWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlJlc3RhcnROZWVkTWVkaWFTdHJlYW0sXG4gICAgICAgICAgICAgICAgb3duZXJJZDogY29udGVudC5vd25lcklkLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBjb250ZW50LmxhYmVsLFxuICAgICAgICAgICAgICAgIHN0cmVhbUlkOiBzb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtSWQoKSxcbiAgICAgICAgICAgICAgICB0cmFja0tpbmRzOiBjb250ZW50LnRyYWNrS2luZHMsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBjb250ZW50LnBhcmFtcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIFJlbW90ZU1lZGlhU3RyZWFtICYmICFzb3VyY2UuaXNTdWJzY3JpYmVkKGNvbnRlbnQudHJhY2tLaW5kcykpIHtcbiAgICAgICAgICAgIHNvdXJjZS5zdWJzY3JpYmUoY29udGVudC5wYXJhbXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuaGFzKHN1YnNjcmlwdGlvbkxhYmVsKSkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdWJzY3JpcHRpb24oc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbShzb3VyY2VJZCksIHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRDb25uZWN0aW9uKHNvdXJjZUlkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlU3Vic2NyaXB0aW9uVW5zdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgeyBsYWJlbCwgb3duZXJJZCwgcmVtYWluaW5nVHJhY2tzIH0pIHtcbiAgICAgICAgaWYgKHJlbWFpbmluZ1RyYWNrcyA+IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc291cmNlO1xuICAgICAgICBpZiAob3duZXJJZCAhPT0gdGhpcy5jb25maWdzLmxvY2FsTm9kZS5nZXRJZCgpKSB7XG4gICAgICAgICAgICBzb3VyY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc291cmNlID0gdGhpcy5jb25maWdzLm1lZGlhdG9yLmdldExvY2FsTWVkaWFTdHJlYW0obGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0cmVhbUlkID0gc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gQ29udGVudFR5cGUuTWVkaWE7XG4gICAgICAgIHRoaXMucmVtb3ZlU3Vic2NyaXB0aW9uKHN0cmVhbUlkLCBjb250ZW50VHlwZSwgc291cmNlSWQpO1xuICAgIH1cbiAgICAvKlxuICAgICAqIEl0ZXJhdGUgb3ZlciBvdXRnb2luZyBzdWJzY3JpcHRpb25cbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byBlYWNoIHN1YnNjcmliZXIgZnJvbSB0aGlzIHN0cmVhbSB0byB0ZWxsIHRoZW0gd2UgY2FuIG5vIGxvbmdlciBwcm92aWRlIHRoZSBzdHJlYW1cbiAgICAgKiBBbmQgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gKFRPRE8gLSBJZiB3ZSByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBub3csIGl0IGJyZWFrcyB0aGUgcmVsYXkncyBuZXcgc3Vic2NyaXB0aW9uKVxuICAgICAgKi9cbiAgICBoYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgeyBsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcyB9KSB7XG4gICAgICAgIGlmIChzb3VyY2VJZCAhPT0gU1lTVEVNX1RPUElDX0lOVEVSTkFMKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1lc3NhZ2VzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uIG9mIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNvdXJjZSwgZGVzdGluYXRpb24gfSA9IHN1YnNjcmlwdGlvblsxXTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UuZ2V0TGFiZWwoKSAhPT0gbGFiZWwgfHwgc291cmNlLmdldE93bmVySWQoKSAhPT0gb3duZXJJZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbklkczogW2Rlc3RpbmF0aW9uLmdldFJlbW90ZUlkKCldLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5TdWJzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5NZWRpYVN0cmVhbVVuYXZhaWxhYmxlLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgb3duZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tLaW5kcyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25OZWVkTWVkaWFTdHJlYW0oc291cmNlSWQsIGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgeyBsYWJlbCwgb3duZXJJZCwgdHJhY2tLaW5kcywgcGFyYW1zIH0gPSBjb250ZW50O1xuICAgICAgICBjb25zdCB7IGhhc1RyYWNrcywgc3RyZWFtSWQsIGhhc1Jlc29sdXRpb24sIGRpc3RhbmNlLCBzdWJzY3JpcHRpb25MYWJlbCB9ID0gdGhpcy5nZXRTdWJzY3JpcHRpb25JbmZvKHNvdXJjZUlkLCBjb250ZW50KTtcbiAgICAgICAgY29uc3QgbnVtYmVyT3V0Z29pbmdTdWJzY3JpcHRpb25zID0gdGhpcy5nZXROdW1iZXJPdXRnb2luZ1N1YnNjcmlwdGlvbnMoKTtcbiAgICAgICAgbGV0IHR5cGUgPSBudW1iZXJPdXRnb2luZ1N1YnNjcmlwdGlvbnMgPCB0aGlzLm1heE91dGdvaW5nU3Vic2NyaXB0aW9ucyAmJiAoaGFzVHJhY2tzIHx8IGRpc3RhbmNlID4gLTEpXG4gICAgICAgICAgICA/IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLkNhblByb3ZpZGVNZWRpYVN0cmVhbVxuICAgICAgICAgICAgOiBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5DYW5ub3RQcm92aWRlTWVkaWFTdHJlYW07XG4gICAgICAgIGNvbnN0IGNvbXB1dGVkRGlzdGFuY2UgPSBkaXN0YW5jZSA8IDAgPyBOT0RFX0RJU1RBTkNFX01BWCA6IGRpc3RhbmNlO1xuICAgICAgICBsZXQgY29zdCA9IGhhc1RyYWNrc1xuICAgICAgICAgICAgPyAoaGFzUmVzb2x1dGlvbiA/IGNvbXB1dGVkRGlzdGFuY2UgOiBjb21wdXRlZERpc3RhbmNlICsgTk9ERV9ESVNUQU5DRV9SRVNPTFVUSU9OKVxuICAgICAgICAgICAgOiBjb21wdXRlZERpc3RhbmNlICsgTk9ERV9ESVNUQU5DRV9UUkFDS1M7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25MYWJlbCAmJiB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5oYXMoc3Vic2NyaXB0aW9uTGFiZWwpKSB7XG4gICAgICAgICAgICBpZiAoaGFzVHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgY29zdCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlID0gU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuQ2FuUHJvdmlkZU1lZGlhU3RyZWFtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY29zdCxcbiAgICAgICAgICAgIGRpc3RhbmNlLFxuICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICBvd25lcklkLFxuICAgICAgICAgICAgc3RyZWFtSWQsXG4gICAgICAgICAgICB0cmFja0tpbmRzLFxuICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBoYW5kbGVDb250ZW50VW5wdWJsaXNoTWVkaWFTdHJlYW0oY29udGVudCkge1xuICAgICAgICBjb25zdCB7IGxhYmVsLCBvd25lcklkIH0gPSBjb250ZW50O1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKChzdWJzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24uc291cmNlLmdldEludGVybmFsU3RyZWFtSWQoKSA9PT0gc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXN0aW5hdGlvbiA9IHN1YnNjcmlwdGlvbi5kZXN0aW5hdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihzb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtSWQoKSwgQ29udGVudFR5cGUuTWVkaWEsIGRlc3RpbmF0aW9uLmdldFJlbW90ZUlkKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlQ29udGVudENsb3NlTWVkaWFTdHJlYW0oeyBsYWJlbCB9KSB7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuY29uZmlncy5tZWRpYXRvci5nZXRMb2NhbE1lZGlhU3RyZWFtKGxhYmVsKTtcbiAgICAgICAgdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaCgoc3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uLnNvdXJjZS5nZXRJbnRlcm5hbFN0cmVhbUlkKCkgPT09IHNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW1JZCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzdGluYXRpb24gPSBzdWJzY3JpcHRpb24uZGVzdGluYXRpb247XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oc291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCksIENvbnRlbnRUeXBlLk1lZGlhLCBkZXN0aW5hdGlvbi5nZXRSZW1vdGVJZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZVN1YnNjcmlwdGlvbnNGb3JOb2RlKG5vZGVJZCkge1xuICAgICAgICB0aGlzLm1hcHMucmVtb3ZlU3Vic2NyaXB0aW9uc0Zvck5vZGUobm9kZUlkKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmZvckVhY2godGhpcy5jbG9zZVN1YnNjcmlwdGlvbi5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCkge1xuICAgICAgICB0aGlzLm1hcHMuY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCk7XG4gICAgfVxuICAgIGdldFN1YnNjcmlwdGlvbkluZm8oc291cmNlSWQsIHsgbGFiZWwsIG93bmVySWQsIHRyYWNrS2luZHMsIHBhcmFtcyB9KSB7XG4gICAgICAgIGNvbnN0IGlzUmVsYXkgPSBvd25lcklkICE9PSB0aGlzLmNvbmZpZ3MubG9jYWxOb2RlLmdldElkKCk7XG4gICAgICAgIGlmIChpc1JlbGF5KSB7XG4gICAgICAgICAgICBjb25zdCByZW1vdGVTb3VyY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0UmVtb3RlTWVkaWFTdHJlYW0ob3duZXJJZCwgbGFiZWwpO1xuICAgICAgICAgICAgaWYgKCFyZW1vdGVTb3VyY2UgfHwgcmVtb3RlU291cmNlLmdldFByb3ZpZGVySWQoKSA9PT0gc291cmNlSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBoYXNUcmFja3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBoYXNSZXNvbHV0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtSWQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZTogLTEsXG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkxhYmVsOiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGhhc1RyYWNrczogcmVtb3RlU291cmNlLmhhc1RyYWNrcyh0cmFja0tpbmRzKSxcbiAgICAgICAgICAgICAgICBoYXNSZXNvbHV0aW9uOiB0aGlzLmNhblByb3ZpZGVSZXNvbHV0aW9uKHJlbW90ZVNvdXJjZS5nZXRSZXNvbHV0aW9uKCksIHBhcmFtcyksXG4gICAgICAgICAgICAgICAgc3RyZWFtSWQ6IHJlbW90ZVNvdXJjZS5nZXRTaGFyZWFibGVTdHJlYW1JZCgpLFxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0RGlzdGFuY2Uoc291cmNlSWQsIG93bmVySWQpLFxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkxhYmVsOiBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuT3V0Z29pbmcsIHsgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLCBsYWJlbDogcmVtb3RlU291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCksIHJlbW90ZUlkOiBzb3VyY2VJZCB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxTb3VyY2UgPSB0aGlzLmNvbmZpZ3MubWVkaWF0b3IuZ2V0TG9jYWxNZWRpYVN0cmVhbShsYWJlbCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoYXNUcmFja3M6IHRydWUsXG4gICAgICAgICAgICBoYXNSZXNvbHV0aW9uOiB0cnVlLFxuICAgICAgICAgICAgc3RyZWFtSWQ6IGxvY2FsU291cmNlLmdldFNoYXJlYWJsZVN0cmVhbUlkKCksXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbkxhYmVsOiBIZWxwZXJzLmdldFN1YnNjcmlwdGlvbkxhYmVsKFN1YnNjcmlwdGlvblR5cGUuT3V0Z29pbmcsIHsgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLk1lZGlhLCBsYWJlbDogbG9jYWxTb3VyY2UuZ2V0U2hhcmVhYmxlU3RyZWFtSWQoKSwgcmVtb3RlSWQ6IHNvdXJjZUlkIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXROdW1iZXJPdXRnb2luZ1N1YnNjcmlwdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheVxuICAgICAgICAgICAgLmZyb20odGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZW50cmllcygpKVxuICAgICAgICAgICAgLmZpbHRlcigoW3N1YnNjcmlwdGlvbkxhYmVsLCB7IHNvdXJjZSB9XSkgPT4gc3Vic2NyaXB0aW9uTGFiZWwuc3RhcnRzV2l0aChTdWJzY3JpcHRpb25UeXBlLk91dGdvaW5nKVxuICAgICAgICAgICAgJiYgc291cmNlLmdldENvbnRlbnRUeXBlKCkgPT09IENvbnRlbnRUeXBlLk1lZGlhKVxuICAgICAgICAgICAgLmxlbmd0aDtcbiAgICB9XG4gICAgY2FuUHJvdmlkZVJlc29sdXRpb24ocmVzb2x1dGlvbiwgcGFyYW1zKSB7XG4gICAgICAgIGlmICghcGFyYW1zIHx8ICFwYXJhbXMudmlkZW8gfHwgdHlwZW9mIHBhcmFtcy52aWRlbyA9PT0gJ2Jvb2xlYW4nIHx8ICFwYXJhbXMudmlkZW8ubWF4UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBwYXJhbXMudmlkZW8ubWF4UmVzb2x1dGlvbjtcbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb24ud2lkdGggPj0gd2lkdGggJiYgcmVzb2x1dGlvbi5oZWlnaHQgPj0gaGVpZ2h0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbnRlbnRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBFYXJseVJldHVybkVycm9yIH0gZnJvbSAnZXJyb3JzL0Vhcmx5UmV0dXJuRXJyb3InO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IFBlZXJDb25uZWN0aW9uTWVzc2FnZVR5cGUgfSBmcm9tICdpbnRlcmZhY2VzL0Nvbm5lY3Rpb24vUGVlckNvbm5lY3Rpb24nO1xuaW1wb3J0IHsgQ29udGVudE1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Db250ZW50L0NvbnRlbnQnO1xuaW1wb3J0IHsgTm9kZU1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9Ob2RlL05vZGVNZXNzYWdlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uTWVzc2FnZSc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IEluY29taW5nU3Vic2NyaXB0aW9uTWFuYWdlciB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vSW5jb21pbmdTdWJzY3JpcHRpb25NYW5hZ2VyJztcbmltcG9ydCB7IE91dGdvaW5nU3Vic2NyaXB0aW9uTWFuYWdlciB9IGZyb20gJ21vZGVscy9TdWJzY3JpcHRpb24vT3V0Z29pbmdTdWJzY3JpcHRpb25NYW5hZ2VyJztcbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25NYW5hZ2VyIHtcbiAgICBjb25maWdzO1xuICAgIG1heE91dGdvaW5nU3Vic2NyaXB0aW9ucztcbiAgICBtYXhEaXN0YW5jZTtcbiAgICBzeXN0ZW1Ub3BpYztcbiAgICBpbmNvbWluZ01hbmFnZXI7XG4gICAgb3V0Z29pbmdNYW5hZ2VyO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZ3MsIG1heE91dGdvaW5nU3Vic2NyaXB0aW9ucywgbWF4RGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5jb25maWdzID0gY29uZmlncztcbiAgICAgICAgdGhpcy5tYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMgPSBtYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMubWF4RGlzdGFuY2UgPSBtYXhEaXN0YW5jZTtcbiAgICAgICAgdGhpcy5jb25maWdzLm1lZGlhdG9yLnJlZ2lzdGVyU3lzdGVtU291cmNlKHRoaXMpO1xuICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlciA9IG5ldyBJbmNvbWluZ1N1YnNjcmlwdGlvbk1hbmFnZXIodGhpcy5jb25maWdzLCB0aGlzLm1heERpc3RhbmNlKTtcbiAgICAgICAgdGhpcy5vdXRnb2luZ01hbmFnZXIgPSBuZXcgT3V0Z29pbmdTdWJzY3JpcHRpb25NYW5hZ2VyKHRoaXMuY29uZmlncywgdGhpcy5tYXhPdXRnb2luZ1N1YnNjcmlwdGlvbnMpO1xuICAgIH1cbiAgICByZWdpc3RlclN5c3RlbVB1Ymxpc2hlcihwdWJsaXNoZXIpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1Ub3BpYyA9IHB1Ymxpc2hlcjtcbiAgICB9XG4gICAgdW5yZWdpc3RlclN5c3RlbVB1Ymxpc2hlcigpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3lzdGVtVG9waWM7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLm91dGdvaW5nTWFuYWdlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLmNvbmZpZ3MubWVkaWF0b3IudW5yZWdpc3RlclN5c3RlbVNvdXJjZSh0aGlzKTtcbiAgICB9XG4gICAgY3JlYXRlSW5jb21pbmdTdWJzY3JpcHRpb24oc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5jcmVhdGVTdWJzY3JpcHRpb24oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gICAgfVxuICAgIGNyZWF0ZU91dGdvaW5nU3Vic2NyaXB0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICAgICAgdGhpcy5vdXRnb2luZ01hbmFnZXIuY3JlYXRlU3Vic2NyaXB0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIH1cbiAgICByZW1vdmVJbmNvbWluZ1N1YnNjcmlwdGlvbihsYWJlbCwgY29udGVudFR5cGUsIHJlbW90ZUlkID0gJycpIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIucmVtb3ZlU3Vic2NyaXB0aW9uKGxhYmVsLCBjb250ZW50VHlwZSwgcmVtb3RlSWQpO1xuICAgIH1cbiAgICByZW1vdmVPdXRnb2luZ1N1YnNjcmlwdGlvbihsYWJlbCwgY29udGVudFR5cGUsIHJlbW90ZUlkID0gJycpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMub3V0Z29pbmdNYW5hZ2VyLnJlbW92ZVN1YnNjcmlwdGlvbihsYWJlbCwgY29udGVudFR5cGUsIHJlbW90ZUlkKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBTREtJbnRlcm5hbEVycm9yICYmIGUuY29kZSA9PT0gU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5TdWJzY3JpYmVNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN1YnNjcmlwdGlvblN1YnNjcmliZU1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuVW5zdWJzY3JpYmVNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLm91dGdvaW5nTWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25VbnN1YnNjcmliZU1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuTmVlZE1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3Vic2NyaXB0aW9uTmVlZE1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuUmVzdGFydE5lZWRNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25SZXN0YXJ0TmVlZE1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuQ2FuUHJvdmlkZU1lZGlhU3RyZWFtOlxuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5DYW5ub3RQcm92aWRlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuaGFuZGxlU3Vic2NyaXB0aW9uUHJvdmlkZU1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuTWVkaWFTdHJlYW1VbmF2YWlsYWJsZTpcbiAgICAgICAgICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25NZWRpYVN0cmVhbVVuYXZhaWxhYmxlKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb250ZW50U3lzdGVtRXZlbnRzKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5VbnB1Ymxpc2hNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5oYW5kbGVDb250ZW50VW5wdWJsaXNoTWVkaWFTdHJlYW0oZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRnb2luZ01hbmFnZXIuaGFuZGxlQ29udGVudFVucHVibGlzaE1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuU3Vic2NyaWJlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuaGFuZGxlQ29udGVudFN1YnNjcmliZU1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuVXBkYXRlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIuaGFuZGxlQ29udGVudFVwZGF0ZU1lZGlhU3RyZWFtKGV2ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuVW5zdWJzY3JpYmVNZWRpYVN0cmVhbTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNvbnRlbnRVbnN1YnNjcmliZU1lZGlhU3RyZWFtKGV2ZW50LnNvdXJjZUlkLCBldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlTWVkaWFTdHJlYW06XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRnb2luZ01hbmFnZXIuaGFuZGxlQ29udGVudENsb3NlTWVkaWFTdHJlYW0oZXZlbnQuY29udGVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZVB1YlN1YlRvcGljOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2VDb250ZW50KGV2ZW50LmNvbnRlbnQubGFiZWwsIENvbnRlbnRUeXBlLlB1YlN1Yik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIENvbnRlbnRNZXNzYWdlVHlwZS5DbG9zZU9iamVjdFN0b3JlQnVja2V0OlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2VDb250ZW50KGV2ZW50LmNvbnRlbnQubGFiZWwsIENvbnRlbnRUeXBlLk9iamVjdFN0b3JlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlS2V5VmFsdWVEYXRhYmFzZTpcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUNsb3NlQ29udGVudChldmVudC5jb250ZW50LmxhYmVsLCBDb250ZW50VHlwZS5LZXlWYWx1ZURhdGFiYXNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLkNsb3NlVmVjdG9yRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDbG9zZUNvbnRlbnQoZXZlbnQuY29udGVudC5sYWJlbCwgQ29udGVudFR5cGUuVmVjdG9yRGF0YWJhc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VHcmFwaERhdGFiYXNlOlxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xvc2VDb250ZW50KGV2ZW50LmNvbnRlbnQubGFiZWwsIENvbnRlbnRUeXBlLkdyYXBoRGF0YWJhc2UpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VKb2JEaXNwYXRjaGVyOlxuICAgICAgICAgICAgY2FzZSBDb250ZW50TWVzc2FnZVR5cGUuQ2xvc2VKb2JXb3JrZXI6XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDbG9zZUNvbnRlbnQoZXZlbnQuY29udGVudC5sYWJlbCwgQ29udGVudFR5cGUuSm9iKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgQ29udGVudE1lc3NhZ2VUeXBlLlJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLmhhbmRsZUNvbnRlbnRSZW1vdGVNZWRpYVN0cmVhbVRyYWNrRmFpbChldmVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOb2RlU3lzdGVtRXZlbnRzKHsgY29udGVudCB9KSB7XG4gICAgICAgIHN3aXRjaCAoY29udGVudC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIE5vZGVNZXNzYWdlVHlwZS5Ob2RlTGVhdmU6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpcHRpb25zRm9yTm9kZShjb250ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlLk9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5jb21pbmdNYW5hZ2VyLmhhbmRsZU9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzKGV2ZW50LnNvdXJjZUlkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICB0aGlzLmluY29taW5nTWFuYWdlci5oYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShjb250ZW50KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLm91dGdvaW5nTWFuYWdlci5oYW5kbGVDb250ZW50VW5zdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgY29udGVudCk7XG4gICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZSA9PiB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2gobWVzc2FnZSkpO1xuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25TdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgZXZlbnRDb250ZW50KSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLm91dGdvaW5nTWFuYWdlci5oYW5kbGVTdWJzY3JpcHRpb25TdWJzY3JpYmVNZWRpYVN0cmVhbShzb3VyY2VJZCwgZXZlbnRDb250ZW50KTtcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtVG9waWMucHVibGlzaCh7XG4gICAgICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbklkczogW3NvdXJjZUlkXSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlVHlwZTogU3lzdGVtTWVzc2FnZVR5cGUuU3Vic2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlLlJlc3RhcnROZWVkTWVkaWFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWFybHlSZXR1cm5FcnJvcignUmVzdGFydCBOZWVkTWVkaWFTdHJlYW0nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVTdWJzY3JpcHRpb25OZWVkTWVkaWFTdHJlYW0oc291cmNlSWQsIGV2ZW50Q29udGVudCkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5vdXRnb2luZ01hbmFnZXIuaGFuZGxlU3Vic2NyaXB0aW9uTmVlZE1lZGlhU3RyZWFtKHNvdXJjZUlkLCBldmVudENvbnRlbnQpO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IHRoaXMuY29uZmlncy5sb2NhbE5vZGUuZ2V0SWQoKSxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uSWRzOiBbc291cmNlSWRdLFxuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFN5c3RlbU1lc3NhZ2VUeXBlLlN1YnNjcmlwdGlvbixcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVDbG9zZUNvbnRlbnQobGFiZWwsIGNvbnRlbnRUeXBlKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSW5jb21pbmdTdWJzY3JpcHRpb24obGFiZWwsIGNvbnRlbnRUeXBlKTtcbiAgICAgICAgdGhpcy5yZW1vdmVPdXRnb2luZ1N1YnNjcmlwdGlvbihsYWJlbCwgY29udGVudFR5cGUpO1xuICAgIH1cbiAgICByZW1vdmVTdWJzY3JpcHRpb25zRm9yTm9kZSh7IGlkIH0pIHtcbiAgICAgICAgdGhpcy5pbmNvbWluZ01hbmFnZXIucmVtb3ZlU3Vic2NyaXB0aW9uc0Zvck5vZGUoaWQpO1xuICAgICAgICB0aGlzLm91dGdvaW5nTWFuYWdlci5yZW1vdmVTdWJzY3JpcHRpb25zRm9yTm9kZShpZCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IGdldFByZWZpeCwgZ2V0U3Vic2NyaXB0aW9uTGFiZWwsIGdldFRvcGljTGFiZWwgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL0hlbHBlcnMnO1xuaW1wb3J0IHsgVG9waWMgfSBmcm9tICdtb2RlbHMvU3Vic2NyaXB0aW9uL1RvcGljJztcbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25NYXBzIHtcbiAgICBtYXBzID0ge1xuICAgICAgICB0b3BpY3M6IG5ldyBNYXAoKSxcbiAgICAgICAgc3Vic2NyaXB0aW9uczogbmV3IE1hcCgpLFxuICAgIH07XG4gICAgZ2V0UGFydHNGcm9tU3Vic2NyaXB0aW9uO1xuICAgIGNvbnN0cnVjdG9yKGdldFBhcnRzRnJvbVN1YnNjcmlwdGlvbikge1xuICAgICAgICB0aGlzLmdldFBhcnRzRnJvbVN1YnNjcmlwdGlvbiA9IGdldFBhcnRzRnJvbVN1YnNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IHN1YnNjcmlwdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucztcbiAgICB9XG4gICAgZ2V0IHRvcGljcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwcy50b3BpY3M7XG4gICAgfVxuICAgIGNyZWF0ZVN1YnNjcmlwdGlvbihzdWJUeXBlLCBzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLmdldFBhcnRzRnJvbVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICAgICAgICBjb25zdCBzdWJQcmVmaXggPSBnZXRQcmVmaXgoc3ViVHlwZSk7XG4gICAgICAgIGlmICghcGFydHMuc3VwcG9ydHNDb250ZW50VHlwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5JbnZhbGlkU3Vic2NyaXB0aW9uLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYCR7c3ViUHJlZml4fTogJHtwYXJ0cy5yZW1vdGVJZH0gZG9lcyBub3Qgc3VwcG9ydCBjb250ZW50IHR5cGUgJHtwYXJ0cy5jb250ZW50VHlwZX1gLFxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvblR5cGU6IHN1YlR5cGUsXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdG9uUGFydHM6IHBhcnRzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uTGFiZWwgPSBnZXRTdWJzY3JpcHRpb25MYWJlbChzdWJUeXBlLCBwYXJ0cyk7XG4gICAgICAgIGlmICh0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5oYXMoc3Vic2NyaXB0aW9uTGFiZWwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLkludmFsaWRTdWJzY3JpcHRpb24sIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgJHtzdWJQcmVmaXh9OiAke3N1YnNjcmlwdGlvbkxhYmVsfSBhbHJlYWR5IGV4aXN0c2AsXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogc3ViVHlwZSxcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0b25QYXJ0czogcGFydHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5zZXQoc3Vic2NyaXB0aW9uTGFiZWwsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgIHRoaXMuY3JlYXRlVG9waWMocGFydHMsIHN1YnNjcmlwdGlvbik7XG4gICAgfVxuICAgIHJlbW92ZVN1YnNjcmlwdGlvbihwYXJ0cywgc3ViVHlwZSkge1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25MYWJlbCA9IGdldFN1YnNjcmlwdGlvbkxhYmVsKHN1YlR5cGUsIHBhcnRzKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdGhpcy5tYXBzLnN1YnNjcmlwdGlvbnMuZ2V0KHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuSW52YWxpZFN1YnNjcmlwdGlvbiwge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGAke2dldFByZWZpeChzdWJUeXBlKX06ICR7c3Vic2NyaXB0aW9uTGFiZWx9IGRvZXMgbm90IGV4aXN0c2AsXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogc3ViVHlwZSxcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0b25QYXJ0czogcGFydHMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwsIHBhcnRzKTtcbiAgICB9XG4gICAgY2xvc2VTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCBzdWJzY3JpcHRpb25MYWJlbCwgcGFydHMpIHtcbiAgICAgICAgcGFydHMgPSBwYXJ0cyB8fCB0aGlzLmdldFBhcnRzRnJvbVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLm1hcHMuc3Vic2NyaXB0aW9ucy5kZWxldGUoc3Vic2NyaXB0aW9uTGFiZWwpO1xuICAgICAgICB0aGlzLnJlbW92ZVRvcGljKHBhcnRzLCBzdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICBjcmVhdGVUb3BpYyhwYXJ0cywgeyBzb3VyY2UsIGRlc3RpbmF0aW9uIH0pIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50VHlwZSwgbGFiZWwsIHJlbW90ZUlkIH0gPSBwYXJ0cztcbiAgICAgICAgY29uc3QgdG9waWNMYWJlbCA9IGdldFRvcGljTGFiZWwoY29udGVudFR5cGUsIGxhYmVsLCByZW1vdGVJZCk7XG4gICAgICAgIGNvbnN0IHRvcGljID0gbmV3IFRvcGljKHRvcGljTGFiZWwsIGNvbnRlbnRUeXBlKTtcbiAgICAgICAgdG9waWMucmVnaXN0ZXJTb3VyY2Uoc291cmNlKTtcbiAgICAgICAgdG9waWMucmVnaXN0ZXJEZXN0aW5hdGlvbihkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMubWFwcy50b3BpY3Muc2V0KHRvcGljLmdldExhYmVsKCksIHRvcGljKTtcbiAgICB9XG4gICAgcmVtb3ZlVG9waWMocGFydHMsIHN1YnNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRUeXBlLCBsYWJlbCwgcmVtb3RlSWQgfSA9IHBhcnRzO1xuICAgICAgICBjb25zdCB0b3BpY0xhYmVsID0gZ2V0VG9waWNMYWJlbChjb250ZW50VHlwZSwgbGFiZWwsIHJlbW90ZUlkKTtcbiAgICAgICAgY29uc3QgdG9waWMgPSB0aGlzLm1hcHMudG9waWNzLmdldCh0b3BpY0xhYmVsKTtcbiAgICAgICAgaWYgKCF0b3BpYykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VUb3BpYyh0b3BpYywgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5tYXBzLnRvcGljcy5kZWxldGUodG9waWNMYWJlbCk7XG4gICAgfVxuICAgIGNsb3NlVG9waWModG9waWMsIHsgc291cmNlLCBkZXN0aW5hdGlvbiB9KSB7XG4gICAgICAgIHRvcGljLnVucmVnaXN0ZXJTb3VyY2Uoc291cmNlKTtcbiAgICAgICAgdG9waWMudW5yZWdpc3RlckRlc3RpbmF0aW9uKGRlc3RpbmF0aW9uKTtcbiAgICB9XG4gICAgcmVtb3ZlU3Vic2NyaXB0aW9uc0Zvck5vZGUobm9kZUlkKSB7XG4gICAgICAgIHRoaXMubWFwcy5zdWJzY3JpcHRpb25zLmZvckVhY2goKHN1YnNjcmlwdGlvbiwgc3Vic2NyaXB0aW9uTGFiZWwpID0+IHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25MYWJlbC5lbmRzV2l0aChub2RlSWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHN1YnNjcmlwdGlvbkxhYmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU1VCU0NSSVBUSU9OX01BWF9SRVRSWV9DT1VOVCB9IGZyb20gJ2NvbnN0YW50cy9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uTWVzc2FnZSc7XG5pbXBvcnQgeyBTeXN0ZW1NZXNzYWdlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU3Vic2NyaXB0aW9uL1N5c3RlbUV2ZW50JztcbmltcG9ydCB7IExvZ2dpbmdDaGFubmVscyB9IGZyb20gJ2ludGVyZmFjZXMvVXRpbHMvTG9nZ2VyJztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uUmVxdWVzdCB7XG4gICAgY3VycmVudERpc3RhbmNlO1xuICAgIG1heERpc3RhbmNlO1xuICAgIHRyYWNrcztcbiAgICBzeXN0ZW1Ub3BpYztcbiAgICBhbnN3ZXJzID0gbmV3IFNldCgpO1xuICAgIHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgcGFyYW1zO1xuICAgIHJldHJ5Q291bnQgPSAwO1xuICAgIGNvbnN0cnVjdG9yKG5vZGVJZHMsIGN1cnJlbnREaXN0YW5jZSwgbWF4RGlzdGFuY2UsIHRyYWNrcykge1xuICAgICAgICB0aGlzLmN1cnJlbnREaXN0YW5jZSA9IGN1cnJlbnREaXN0YW5jZTtcbiAgICAgICAgdGhpcy5tYXhEaXN0YW5jZSA9IG1heERpc3RhbmNlO1xuICAgICAgICB0aGlzLnRyYWNrcyA9IHRyYWNrcztcbiAgICAgICAgbm9kZUlkcy5mb3JFYWNoKChub2RlSWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYW5zd2Vycy5hZGQoe1xuICAgICAgICAgICAgICAgIG5vZGVJZDogbm9kZUlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlLldhaXRpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VHJhY2tzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmFja3M7XG4gICAgfVxuICAgIHJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKHB1Ymxpc2hlcikge1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljID0gcHVibGlzaGVyO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKCkge1xuICAgICAgICBkZWxldGUgdGhpcy5zeXN0ZW1Ub3BpYztcbiAgICB9XG4gICAgcmVzZXQobm9kZUlkcywgY3VycmVudERpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5hbnN3ZXJzLmNsZWFyKCk7XG4gICAgICAgIG5vZGVJZHMuZm9yRWFjaCgobm9kZUlkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFuc3dlcnMuYWRkKHtcbiAgICAgICAgICAgICAgICBub2RlSWQ6IG5vZGVJZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZS5XYWl0aW5nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmV0cnlDb3VudCArPSAxO1xuICAgICAgICB0aGlzLmN1cnJlbnREaXN0YW5jZSA9IGN1cnJlbnREaXN0YW5jZTtcbiAgICB9XG4gICAgc2VuZFJlcXVlc3QobG9jYWxJZCwgb3duZXJJZCwgbGFiZWwsIHRyYWNrS2luZHMsIHBhcmFtcykge1xuICAgICAgICBpZiAodGhpcy5yZXRyeUNvdW50ID4gU1VCU0NSSVBUSU9OX01BWF9SRVRSWV9DT1VOVCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5TdWJzY3JpcHRpb25SZXF1ZXN0Tm9BbnN3ZXIsIHtcbiAgICAgICAgICAgICAgICBhbnN3ZXJzOiBBcnJheS5mcm9tKHRoaXMuYW5zd2VycykubWFwKChhbnN3ZXIpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVJZDogYW5zd2VyLm5vZGVJZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogYW5zd2VyLnR5cGUsXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9kZUlkcyA9IEFycmF5LmZyb20odGhpcy5hbnN3ZXJzKS5tYXAoKGFuc3dlcikgPT4gYW5zd2VyLm5vZGVJZCk7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgICB0aGlzLnN5c3RlbVRvcGljLnB1Ymxpc2goe1xuICAgICAgICAgICAgc291cmNlSWQ6IGxvY2FsSWQsXG4gICAgICAgICAgICBkZXN0aW5hdGlvbklkczogbm9kZUlkcyxcbiAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBTeXN0ZW1NZXNzYWdlVHlwZS5TdWJzY3JpcHRpb24sXG4gICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUuTmVlZE1lZGlhU3RyZWFtLFxuICAgICAgICAgICAgICAgIGxhYmVsLFxuICAgICAgICAgICAgICAgIG93bmVySWQsXG4gICAgICAgICAgICAgICAgdHJhY2tLaW5kcyxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3Vic2NyaXB0aW9uLCAnU2VuZCByZXF1ZXN0JywgbG9jYWxJZCwgbm9kZUlkcyk7XG4gICAgfVxuICAgIGhhbmRsZVN1YnNjcmlwdGlvblN5c3RlbUV2ZW50cyhzb3VyY2VJZCwgY29udGVudCkge1xuICAgICAgICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5DYW5Qcm92aWRlTWVkaWFTdHJlYW06IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5BY2NlcHQgPSB0aGlzLmN1cnJlbnREaXN0YW5jZSA+PSBjb250ZW50LmRpc3RhbmNlICYmIGNvbnRlbnQuZGlzdGFuY2UgPD0gdGhpcy5tYXhEaXN0YW5jZTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSBBcnJheS5mcm9tKHRoaXMuYW5zd2VycykuZmluZCgoYW5zd2VyKSA9PiBhbnN3ZXIubm9kZUlkID09PSBzb3VyY2VJZCk7XG4gICAgICAgICAgICAgICAgYW5zd2VyLnR5cGUgPSBjYW5BY2NlcHQgPyBTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZS5BY2NlcHRlZCA6IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlLlJlamVjdGVkO1xuICAgICAgICAgICAgICAgIGFuc3dlci5jb3N0ID0gY29udGVudC5jb3N0O1xuICAgICAgICAgICAgICAgIGFuc3dlci5kaXN0YW5jZSA9IGNvbnRlbnQuZGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgYW5zd2VyLnN0cmVhbUlkID0gY29udGVudC5zdHJlYW1JZDtcbiAgICAgICAgICAgICAgICBhbnN3ZXIucm91bmRUcmlwVGltZSA9IERhdGUubm93KCkgLSB0aGlzLnN0YXJ0VGltZTtcbiAgICAgICAgICAgICAgICBhbnN3ZXIucGFyYW1zID0gdGhpcy5wYXJhbXM7XG4gICAgICAgICAgICAgICAgYW5zd2VyLm93bmVySWQgPSBjb250ZW50Lm93bmVySWQ7XG4gICAgICAgICAgICAgICAgYW5zd2VyLnRyYWNrS2luZHMgPSBjb250ZW50LnRyYWNrS2luZHM7XG4gICAgICAgICAgICAgICAgYW5zd2VyLnN0cmVhbUxhYmVsID0gY29udGVudC5sYWJlbDtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdWJzY3JpcHRpb24sIGAke2NhbkFjY2VwdCA/ICdBY2NlcHRlZCcgOiAnUmVqZWN0ZWQnfSBhbnN3ZXJgLCBhbnN3ZXIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBTdWJzY3JpcHRpb25NZXNzYWdlVHlwZS5DYW5ub3RQcm92aWRlTWVkaWFTdHJlYW06IHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSBBcnJheS5mcm9tKHRoaXMuYW5zd2VycykuZmluZCgoYW5zd2VyKSA9PiBhbnN3ZXIubm9kZUlkID09PSBzb3VyY2VJZCk7XG4gICAgICAgICAgICAgICAgYW5zd2VyLnR5cGUgPSBTdWJzY3JpcHRpb25SZXF1ZXN0VHlwZS5SZWplY3RlZDtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdWJzY3JpcHRpb24sICdSZWplY3RlZCBhbnN3ZXInLCBhbnN3ZXIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNhbkNob29zZUFuc3dlcigpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaG9vc2VBbnN3ZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaG9vc2VBbnN3ZXIoKSB7XG4gICAgICAgIGNvbnN0IGFuc3dlcnMgPSBBcnJheS5mcm9tKHRoaXMuYW5zd2VycylcbiAgICAgICAgICAgIC5maWx0ZXIoKGFuc3dlcikgPT4gYW5zd2VyLnR5cGUgPT09IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlLkFjY2VwdGVkKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLmNvc3QgPT09IGIuY29zdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhLnJvdW5kVHJpcFRpbWUgLSBiLnJvdW5kVHJpcFRpbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYS5jb3N0IC0gYi5jb3N0O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFuc3dlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLlN1YnNjcmlwdGlvblJlcXVlc3ROb0Fuc3dlciwge1xuICAgICAgICAgICAgICAgIGFuc3dlcnM6IEFycmF5LmZyb20odGhpcy5hbnN3ZXJzKS5tYXAoKGFuc3dlcikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiBhbnN3ZXIubm9kZUlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBhbnN3ZXIudHlwZSxcbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdWJzY3JpcHRpb24sICdDaG9zZW4gYW5zd2VyJywgYW5zd2Vyc1swXSwgdGhpcy5hbnN3ZXJzKTtcbiAgICAgICAgcmV0dXJuIGFuc3dlcnNbMF07XG4gICAgfVxuICAgIGNhbkNob29zZUFuc3dlcigpIHtcbiAgICAgICAgZm9yIChjb25zdCBhbnN3ZXIgb2YgdGhpcy5hbnN3ZXJzKSB7XG4gICAgICAgICAgICBpZiAoYW5zd2VyLnR5cGUgPT09IFN1YnNjcmlwdGlvblJlcXVlc3RUeXBlLldhaXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBDb250ZW50VHlwZSB9IGZyb20gJ0BjcmV3ZGxlL3dlYi1zZGstdHlwZXMnO1xuaW1wb3J0IHsgU1lTVEVNX1RPUElDIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5pbXBvcnQgeyBMb2dnaW5nQ2hhbm5lbHMgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJ3V0aWxzL0xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHsgY3JlYXRlT2JzZXJ2ZXIgfSBmcm9tICd1dGlscy9PYnNlcnZlci9PYnNlcnZlcic7XG5leHBvcnQgY2xhc3MgU3lzdGVtVG9waWMge1xuICAgIGxhYmVsO1xuICAgIGxpc3RlbmVyID0gY3JlYXRlT2JzZXJ2ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5sYWJlbCA9IFNZU1RFTV9UT1BJQztcbiAgICB9XG4gICAgZ2V0TGFiZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIENvbnRlbnRUeXBlLkRhdGE7XG4gICAgfVxuICAgIHJlZ2lzdGVyU291cmNlKHNvdXJjZSkge1xuICAgICAgICBzb3VyY2UucmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIodGhpcyk7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTb3VyY2Uoc291cmNlKSB7XG4gICAgICAgIHNvdXJjZS51bnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyKCk7XG4gICAgfVxuICAgIHB1Ymxpc2goY29udGVudCkge1xuICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5FdmVudHMsICdTeXN0ZW1Ub3BpYyBwdWJsaXNoJywgY29udGVudC5zb3VyY2VJZCwgY29udGVudCk7XG4gICAgICAgIHRoaXMubGlzdGVuZXIucHVibGlzaCh7XG4gICAgICAgICAgICB0b3BpY0xhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IENvbnRlbnRUeXBlLkRhdGEsXG4gICAgICAgICAgICB1dWlkOiBjb250ZW50LnV1aWQgPz8gdXVpZHY0KCksXG4gICAgICAgICAgICByZWNpcGllbnRzOiBjb250ZW50LnJlY2lwaWVudHMgPz8gW10sXG4gICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBjcmVhdGVPYnNlcnZlciB9IGZyb20gJ3V0aWxzL09ic2VydmVyL09ic2VydmVyJztcbmV4cG9ydCBjbGFzcyBUb3BpYyB7XG4gICAgbGFiZWw7XG4gICAgY29udGVudFR5cGU7XG4gICAgbGlzdGVuZXIgPSBjcmVhdGVPYnNlcnZlcigpO1xuICAgIGNvbnN0cnVjdG9yKGxhYmVsLCBjb250ZW50VHlwZSkge1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgICAgIHRoaXMuY29udGVudFR5cGUgPSBjb250ZW50VHlwZTtcbiAgICB9XG4gICAgZ2V0TGFiZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsO1xuICAgIH1cbiAgICBnZXRDb250ZW50VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFR5cGU7XG4gICAgfVxuICAgIHJlZ2lzdGVyU291cmNlKHNvdXJjZSkge1xuICAgICAgICBzb3VyY2UucmVnaXN0ZXJQdWJsaXNoZXIodGhpcyk7XG4gICAgfVxuICAgIHJlZ2lzdGVyRGVzdGluYXRpb24oZGVzdGluYXRpb24pIHtcbiAgICAgICAgZGVzdGluYXRpb24ucmVnaXN0ZXJTdWJzY3JpYmVyKHRoaXMpO1xuICAgIH1cbiAgICBwdWJsaXNoKGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lci5wdWJsaXNoKHtcbiAgICAgICAgICAgIHRvcGljTGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogdGhpcy5jb250ZW50VHlwZSxcbiAgICAgICAgICAgIHV1aWQ6IHV1aWR2NCgpLFxuICAgICAgICAgICAgcmVjaXBpZW50czogW10sXG4gICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfVxuICAgIHVucmVnaXN0ZXJTb3VyY2Uoc291cmNlKSB7XG4gICAgICAgIHNvdXJjZS51bnJlZ2lzdGVyUHVibGlzaGVyKHRoaXMpO1xuICAgIH1cbiAgICB1bnJlZ2lzdGVyRGVzdGluYXRpb24oZGVzdGluYXRpb24pIHtcbiAgICAgICAgZGVzdGluYXRpb24udW5yZWdpc3RlclN1YnNjcmliZXIodGhpcyk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBTREsgQ2xpZW50IEVycm9yIENvZGVzIC0gQW55IGVycm9yIHRoYXQgaXMgdGhyb3duIGJ5IHRoZSBTREsgd2lsbCBoYXZlIGEgY29kZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBlcnJvci5cbiAqIEBjYXRlZ29yeSBDb3JlXG4gKi9cbmV4cG9ydCB2YXIgU0RLQ2xpZW50RXJyb3JDb2RlcztcbihmdW5jdGlvbiAoU0RLQ2xpZW50RXJyb3JDb2Rlcykge1xuICAgIC8qKlxuICAgICAqIFRoZSBDb25uZWN0aW9uIERhdGFDaGFubmVsJ3MgYnVmZmVyIGlzIG5vdCBlbXB0eS5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiQ29ubmVjdGlvbkJ1ZmZlck5vdEVtcHR5XCJdID0gXCJjb25uZWN0aW9uLWJ1ZmZlci1ub3QtZW1wdHlcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgY2x1c3RlciBoYXMgYWxyZWFkeSBiZWVuIGpvaW5lZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiQ2x1c3RlckFscmVhZHlKb2luZWRcIl0gPSBcImNsdXN0ZXItYWxyZWFkeS1qb2luZWRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgZmVhdHVyZSBpcyBub3QgZW5hYmxlZC4gQ29udGFjdCBvdXIgc3VwcG9ydCB0ZWFtIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJGZWF0dXJlTm90RW5hYmxlZFwiXSA9IFwiZmVhdHVyZS1ub3QtZW5hYmxlZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBHZW5lcmF0aXZlIEFJIENvbnRleHQgYWxyZWFkeSBleGlzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkdlbmVyYXRpdmVBSUNvbnRleHRBbHJlYWR5RXhpc3RzXCJdID0gXCJnZW5lcmF0aXZlLWFpLWNvbnRleHQtYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgR2VuZXJhdGl2ZSBBSSBDb250ZXh0IGRvZXMgbm90IGV4aXN0LlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJHZW5lcmF0aXZlQUlDb250ZXh0RG9lc05vdEV4aXN0XCJdID0gXCJnZW5lcmF0aXZlLWFpLWNvbnRleHQtZG9lcy1ub3QtZXhpc3RcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgR2VuZXJhdGl2ZSBBSSBsYWJlbCBjb25mbGljdHMgd2l0aCBhbiBleGlzdGluZyBsYWJlbC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiR2VuZXJhdGl2ZUFJTGFiZWxDb25mbGljdFwiXSA9IFwiZ2VuZXJhdGl2ZS1haS1sYWJlbC1jb25mbGljdFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBHZW5lcmF0aXZlIEFJIFdvcmtlciBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiR2VuZXJhdGl2ZUFJV29ya2VyQWxyZWFkeUV4aXN0c1wiXSA9IFwiZ2VuZXJhdGl2ZS1haS13b3JrZXItYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgR2VuZXJhdGl2ZSBBSSBXb3JrZXIgaXMgbWlzc2luZyByZXF1aXJlZCBjb25uZWN0b3IuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkdlbmVyYXRpdmVBSVdvcmtlck1pc3NpbmdDb25uZWN0b3JcIl0gPSBcImdlbmVyYXRpdmUtYWktd29ya2VyLW1pc3NpbmctY29ubmVjdG9yXCI7XG4gICAgLyoqXG4gICAgICogVGhlIEdlbmVyYXRpdmUgQUkgV29ya2VyIG1vZGVsIGlzIG5vdCBzeW5jaHJvbml6ZWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkdlbmVyYXRpdmVBSVdvcmtlck1vZGVsU3luY0Vycm9yXCJdID0gXCJnZW5lcmF0aXZlLWFpLXdvcmtlci1tb2RlbC1zeW5jLWVycm9yXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGdyYXBoIGRhdGFiYXNlIGFscmVhZHkgZXhpc3RzLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJHcmFwaERhdGFiYXNlQWxyZWFkeUV4aXN0c1wiXSA9IFwiZ3JhcGgtZGF0YWJhc2UtYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgZ3JhcGggZGF0YWJhc2UgZG9lcyBub3QgZXhpc3QuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkdyYXBoRGF0YWJhc2VEb2VzTm90RXhpc3RcIl0gPSBcImdyYXBoLWRhdGFiYXNlLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIGdyYXBoIGRhdGFiYXNlIGNvbm5lY3RvciBpcyBtaXNzaW5nLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJHcmFwaERhdGFiYXNlTWlzc2luZ0Nvbm5lY3RvclwiXSA9IFwiZ3JhcGgtZGF0YWJhc2UtbWlzc2luZy1jb25uZWN0b3JcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgZ3JhcGggZGF0YWJhc2UgbmFtZSBpcyBub3QgYSBzdHJpbmcuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkdyYXBoRGF0YWJhc2VOYW1lTm90U3RyaW5nXCJdID0gXCJncmFwaC1kYXRhYmFzZS1uYW1lLW5vdC1zdHJpbmdcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgam9iIGRpc3BhdGNoZXIgYWxyZWFkeSBleGlzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkpvYkRpc3BhdGNoZXJBbHJlYWR5RXhpc3RzXCJdID0gXCJqb2ItZGlzcGF0Y2hlci1hbHJlYWR5LWV4aXN0c1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBqb2IgZGlzcGF0Y2hlciBkb2VzIG5vdCBleGlzdC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiSm9iRGlzcGF0Y2hlckRvZXNOb3RFeGlzdFwiXSA9IFwiam9iLWRpc3BhdGNoZXItZG9lcy1ub3QtZXhpc3RcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgam9iIGRpc3BhdGNoZWQgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGpvYiBkaXNwYXRjaGVyLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJKb2JEaXNwYXRjaGVySm9iRXhpc3RzXCJdID0gXCJqb2ItZGlzcGF0Y2hlci1qb2ItZXhpc3RzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGpvYiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgam9iIGRpc3BhdGNoZXIuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkpvYkRpc3BhdGNoZXJKb2JOb3RGb3VuZFwiXSA9IFwiam9iLWRpc3BhdGNoZXItam9iLW5vdC1mb3VuZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBqb2IgZGlzcGF0Y2hlZCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBqb2IgZGlzcGF0Y2hlci5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiSm9iRGlzcGF0Y2hlckludmFsaWRKb2JUeXBlXCJdID0gXCJqb2ItZGlzcGF0Y2hlci1pbnZhbGlkLWpvYi10eXBlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGpvYiB3b3JrZXIgYWxyZWFkeSBleGlzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIkpvYldvcmtlckFscmVhZHlFeGlzdHNcIl0gPSBcImpvYi13b3JrZXItYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgam9iIHdvcmtlciBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiSm9iV29ya2VyRG9lc05vdEV4aXN0XCJdID0gXCJqb2Itd29ya2VyLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIG9iamVjdCBzdG9yZSBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVBbHJlYWR5RXhpc3RzXCJdID0gXCJvYmplY3Qtc3RvcmUtYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgb2JqZWN0IHN0b3JlIGlzIGFscmVhZHkgc3Vic2NyaWJlZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVBbHJlYWR5U3Vic2NyaWJlZFwiXSA9IFwib2JqZWN0LXN0b3JlLWFscmVhZHktc3Vic2NyaWJlZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBvYmplY3Qgc3RvcmUgZG9lcyBub3QgZXhpc3QuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIk9iamVjdFN0b3JlRG9lc05vdEV4aXN0XCJdID0gXCJvYmplY3Qtc3RvcmUtc3RyZWFtLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIG9iamVjdCBzdG9yZSBuYW1lIGlzIG5vdCBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiT2JqZWN0U3RvcmVOYW1lTm90U3RyaW5nXCJdID0gXCJvYmplY3Qtc3RvcmUtbmFtZS1ub3Qtc3RyaW5nXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG9iamVjdCBzdG9yZSBwYXlsb2FkIGlzIGludmFsaWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIk9iamVjdFN0b3JlSW52YWxpZFBheWxvYWRcIl0gPSBcIm9iamVjdC1zdG9yZS1pbnZhbGlkLXBheWxvYWRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCBpcyBpbnZhbGlkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJPYmplY3RTdG9yZUludmFsaWRQYXRoXCJdID0gXCJvYmplY3Qtc3RvcmUtaW52YWxpZC1wYXRoXCI7XG4gICAgLyoqXG4gICAgICogVGhlIG9iamVjdCBzdG9yZSBpcyBub3Qgc3luY2hyb25pemVkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJPYmplY3RTdG9yZU5vdEluU3luY1wiXSA9IFwib2JqZWN0LXN0b3JlLW5vdC1pbi1zeW5jXCI7XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgU0RLIGVycm9yLiBDb250YWN0IG91ciBzdXBwb3J0IHRlYW0gaWYgdGhlIGVycm9yIHBlcnNpc3RzLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJJbnRlcm5hbFNES0Vycm9yXCJdID0gXCJpbnRlcm5hbC1zZGstZXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBJbnZhbGlkIGFjY2Vzcy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiSW52YWxpZEFjY2Vzc1wiXSA9IFwiaW52YWxpZC1hY2Nlc3NcIjtcbiAgICAvKipcbiAgICAgKiBUaGUga2V5LXZhbHVlIGRhdGFiYXNlIGFscmVhZHkgZXhpc3RzLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlQWxyZWFkeUV4aXN0c1wiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLWFscmVhZHktZXhpc3RzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGtleS12YWx1ZSBkYXRhYmFzZSBkb2VzIG5vdCBleGlzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VEb2VzTm90RXhpc3RcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS1kb2VzLW5vdC1leGlzdFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBrZXktdmFsdWUgZGF0YWJhc2UgaW5kZXggd2FzIG5vdCBmb3VuZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiS2V5VmFsdWVEYXRhYmFzZUluZGV4Tm90Rm91bmRcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS1pbmRleC1ub3QtZm91bmRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUga2V5LXZhbHVlIGRhdGFiYXNlIHF1ZXJ5IGlzIGludmFsaWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VJbnZhbGlkUXVlcnlcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS1pbnZhbGlkLXF1ZXJ5XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGlzIGludmFsaWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VJbnZhbGlkVmFsdWVcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS1pbnZhbGlkLXZhbHVlXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGtleS12YWx1ZSBkYXRhYmFzZSBuYW1lIGlzIG5vdCBhIHN0cmluZy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiS2V5VmFsdWVEYXRhYmFzZU5hbWVOb3RTdHJpbmdcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS1uYW1lLW5vdC1zdHJpbmdcIjtcbiAgICAvKipcbiAgICAgKiBUaGUga2V5LXZhbHVlIGRhdGFiYXNlIGlzIG5vdCBvcGVuLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlTm90T3BlblwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLW5vdC1vcGVuXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGtleS12YWx1ZSBkYXRhYmFzZSBuYW1lIGlzIHJlc2VydmVkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlVGFibGVOYW1lUmVzZXJ2ZWRcIl0gPSBcImtleS12YWx1ZS1kYXRhYmFzZS10YWJsZS1uYW1lLXJlc2VydmVkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGtleS12YWx1ZSBkYXRhYmFzZSB0YWJsZSB3YXMgbm90IGZvdW5kLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJLZXlWYWx1ZURhdGFiYXNlVGFibGVOb3RGb3VuZFwiXSA9IFwia2V5LXZhbHVlLWRhdGFiYXNlLXRhYmxlLW5vdC1mb3VuZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBrZXktdmFsdWUgZGF0YWJhc2UgbGF5b3V0IGlzIGludmFsaWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIktleVZhbHVlRGF0YWJhc2VJbnZhbGlkTGF5b3V0XCJdID0gXCJrZXktdmFsdWUtZGF0YWJhc2UtaW52YWxpZC1sYXlvdXRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgbWVkaWEgc3RyZWFtIGFscmVhZHkgZXhpc3RzLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJMb2NhbE1lZGlhU3RyZWFtQWxyZWFkeUV4aXN0c1wiXSA9IFwibG9jYWwtbWVkaWEtc3RyZWFtLWFscmVhZHktZXhpc3RzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIG1lZGlhIHN0cmVhbSBuZWVkcyBhbiBhdWRpbyBjb250ZXh0LlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJMb2NhbE1lZGlhU3RyZWFtTm9BdWRpb0NvbnRleHRcIl0gPSBcImxvY2FsLW1lZGlhLXN0cmVhbS1uby1hdWRpby1jb250ZXh0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHB1Yi9zdWIgdG9waWMgYWxyZWFkeSBleGlzdHMuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIlB1YlN1YlRvcGljQWxyZWFkeUV4aXN0c1wiXSA9IFwicHViLXN1Yi10b3BpYy1hbHJlYWR5LWV4aXN0c1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwdWIvc3ViIHRvcGljIGRvZXMgbm90IGV4aXN0LlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJQdWJTdWJUb3BpY0RvZXNOb3RFeGlzdFwiXSA9IFwicHViLXN1Yi10b3BpYy1kb2VzLW5vdC1leGlzdFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBwdWIvc3ViIHRvcGljIG5hbWUgaXMgbm90IGEgc3RyaW5nLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJQdWJTdWJUb3BpY05hbWVOb3RTdHJpbmdcIl0gPSBcInB1Yi1zdWItdG9waWMtbmFtZS1ub3Qtc3RyaW5nXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHB1Yi9zdWIgdG9waWMgaXMgYWxyZWFkeSBzdWJzY3JpYmVkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJQdWJTdWJUb3BpY0FscmVhZHlTdWJzY3JpYmVkXCJdID0gXCJwdWItc3ViLXRvcGljLWFscmVhZHktc3Vic2NyaWJlZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBidWlsZGVyIGFyZ3VtZW50IGlzIGludmFsaWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudFwiXSA9IFwicXVlcnktaGVscGVyLWludmFsaWQtYXJndW1lbnRcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVtb3RlIG1lZGlhIHN0cmVhbSBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiUmVtb3RlTWVkaWFTdHJlYW1BbHJlYWR5RXhpc3RzXCJdID0gXCJyZW1vdGUtbWVkaWEtc3RyZWFtLWFscmVhZHktZXhpc3RzXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHJlbW90ZSBtZWRpYSBzdHJlYW0gc3Vic2NyaXB0aW9uIHBhcmFtZXRlcnMgYXJlIGludmFsaWQuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIlJlbW90ZU1lZGlhU3RyZWFtSW52YWxpZFN1YnNjcmlwdGlvblBhcmFtc1wiXSA9IFwicmVtb3RlLW1lZGlhLXN0cmVhbS1pbnZhbGlkLXN1YnNjcmlwdGlvbi1wYXJhbXNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgc3Vic2NyaXB0aW9uIHJlcXVlc3QgaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgU0RLQ2xpZW50RXJyb3JDb2Rlc1tcIlN1YnNjcmlwdGlvblJlcXVlc3RJblByb2dyZXNzXCJdID0gXCJzdWJzY3JpcHRpb24tcmVxdWVzdC1pbi1wcm9ncmVzc1wiO1xuICAgIC8qKlxuICAgICAqIFRoZSBub2RlIGlzIG5vdCBhdXRoZW50aWNhdGVkLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJOb2RlTm90QXV0aGVudGljYXRlZFwiXSA9IFwibm9kZS1ub3QtYXV0aGVudGljYXRlZFwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBub2RlIHR5cGUgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiTm9kZUludmFsaWRUeXBlXCJdID0gXCJub2RlLWludmFsaWQtdHlwZVwiO1xuICAgIC8qKlxuICAgICAqIFRoZSBub2RlIHR5cGUgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiTm9kZVR5cGVOb3RTdXBwb3J0ZWRcIl0gPSBcIm5vZGUtdHlwZS1ub3Qtc3VwcG9ydGVkXCI7XG4gICAgLyoqXG4gICAgICogVGhlIHZlY3RvciBkYXRhYmFzZSBhbHJlYWR5IGV4aXN0cy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiVmVjdG9yRGF0YWJhc2VBbHJlYWR5RXhpc3RzXCJdID0gXCJ2ZWN0b3ItZGF0YWJhc2UtYWxyZWFkeS1leGlzdHNcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgdmVjdG9yIGRhdGFiYXNlIGRvZXMgbm90IGV4aXN0LlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJWZWN0b3JEYXRhYmFzZURvZXNOb3RFeGlzdFwiXSA9IFwidmVjdG9yLWRhdGFiYXNlLWRvZXMtbm90LWV4aXN0XCI7XG4gICAgLyoqXG4gICAgICogVGhlIHZlY3RvciBkYXRhYmFzZSBjb25uZWN0b3IgaXMgbWlzc2luZy5cbiAgICAgKi9cbiAgICBTREtDbGllbnRFcnJvckNvZGVzW1wiVmVjdG9yRGF0YWJhc2VNaXNzaW5nQ29ubmVjdG9yXCJdID0gXCJ2ZWN0b3ItZGF0YWJhc2UtbWlzc2luZy1jb25uZWN0b3JcIjtcbiAgICAvKipcbiAgICAgKiBUaGUgdmVjdG9yIGRhdGFiYXNlIG5hbWUgaXMgbm90IGEgc3RyaW5nLlxuICAgICAqL1xuICAgIFNES0NsaWVudEVycm9yQ29kZXNbXCJWZWN0b3JEYXRhYmFzZU5hbWVOb3RTdHJpbmdcIl0gPSBcInZlY3Rvci1kYXRhYmFzZS1uYW1lLW5vdC1zdHJpbmdcIjtcbn0pKFNES0NsaWVudEVycm9yQ29kZXMgfHwgKFNES0NsaWVudEVycm9yQ29kZXMgPSB7fSkpO1xuLyoqXG4gKiBTREsgQ2xpZW50IEVycm9yIC0gQW55IGVycm9yIHRoYXQgaXMgdGhyb3duIGJ5IHRoZSBTREsgd2lsbCBiZSBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICogQGNhdGVnb3J5IENvcmVcbiAqL1xuZXhwb3J0IGNsYXNzIFNES0NsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvZGU7XG4gICAgLyoqXG4gICAgICogVGhyb3dzIGFuIGVycm9yIHdpdGggdGhlIGdpdmVuIGNvZGUgYW5kIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIGNvZGUgVGhlIGVycm9yIGNvZGVcbiAgICAgKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIG1lc3NhZ2VcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2RlLCBlcnJvcikge1xuICAgICAgICBzdXBlcihlcnJvcik7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBBIGxheW91dCBidWlsZGVyIGZvciB0aGUge0BsaW5rIElLZXlWYWx1ZURhdGFiYXNlfS5cbiAqIEBjYXRlZ29yeSBLZXktVmFsdWUgRGF0YWJhc2VcbiAqL1xuZXhwb3J0IGNsYXNzIExheW91dEJ1aWxkZXIge1xuICAgIGxheW91dDtcbiAgICBjb25zdHJ1Y3Rvcih2ZXJzaW9uKSB7XG4gICAgICAgIHRoaXMubGF5b3V0ID0ge1xuICAgICAgICAgICAgdGFibGVzOiB7fSxcbiAgICAgICAgICAgIHZlcnNpb24sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhIGxheW91dC5cbiAgICAgKiBAcGFyYW0gbGF5b3V0IFRoZSBsYXlvdXQgdG8gdmFsaWRhdGUuXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGUgbGF5b3V0IGlzIHZhbGlkLCBhbmQgYSBkZXNjcmlwdGl2ZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIHN0YXRpYyB2YWxpZGF0ZUxheW91dChsYXlvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbGF5b3V0KSB7XG4gICAgICAgICAgICBpZiAoa2V5ICE9PSAndmVyc2lvbicgJiYga2V5ICE9PSAndGFibGVzJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBbZmFsc2UsIGBJbnZhbGlkIGtleSAnJHtrZXl9JyBpbiBsYXlvdXRgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChrZXkgIT09ICd0YWJsZXMnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3ZlcnNpb24nICYmIHR5cGVvZiBsYXlvdXRba2V5XSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgYEludmFsaWQgdmVyc2lvbiAnJHtsYXlvdXRba2V5XX0nIGluIGxheW91dDogVmVyc2lvbiBtdXN0IGJlIGEgbnVtYmVyYF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0YWJsZSBpbiBsYXlvdXQudGFibGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YWJsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgYEludmFsaWQgdGFibGUgbmFtZSAnJHt0YWJsZX0nYF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFibGVLZXkgaW4gbGF5b3V0LnRhYmxlc1t0YWJsZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlS2V5ICE9PSAnaW5kZXhlcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbZmFsc2UsIGBJbnZhbGlkIGtleSAnJHt0YWJsZUtleX0nIGluIHRhYmxlICcke3RhYmxlfSdgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleGVzID0gbGF5b3V0LnRhYmxlc1t0YWJsZV1bdGFibGVLZXldID8/IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleC5rZXlQYXRoID09PSB1bmRlZmluZWQgfHwgdHlwZW9mIGluZGV4LmtleVBhdGggIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgYEludmFsaWQgaW5kZXggaW4gdGFibGUgJyR7dGFibGV9JzogbWlzc2luZyBvciBpbnZhbGlkIGtleVBhdGhgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3RydWUsICdWYWxpZCBsYXlvdXQnXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGxheW91dCBidWlsZGVyLlxuICAgICAqIEBwYXJhbSB2ZXJzaW9uIFRoZSB2ZXJzaW9uIG9mIHRoZSBsYXlvdXQuXG4gICAgICogQHJldHVybnMgQSBsYXlvdXQgYnVpbGRlci5cbiAgICAgKi9cbiAgICBzdGF0aWMgbGF5b3V0KHZlcnNpb24pIHtcbiAgICAgICAgY29uc3QgYnVpbGRlciA9IG5ldyBMYXlvdXRCdWlsZGVyKHZlcnNpb24pO1xuICAgICAgICBidWlsZGVyLmxheW91dC52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgcmV0dXJuIGJ1aWxkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSB0YWJsZSB0byB0aGUgbGF5b3V0LlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSB0YWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIHRhYmxlIGJ1aWxkZXIuXG4gICAgICovXG4gICAgdGFibGUobmFtZSkge1xuICAgICAgICB0aGlzLmxheW91dC50YWJsZXNbbmFtZV0gPSB7fTtcbiAgICAgICAgY29uc3QgdGFibGUgPSBuZXcgVGFibGVCdWlsZGVyKHRoaXMubGF5b3V0LnRhYmxlc1tuYW1lXSk7XG4gICAgICAgIHJldHVybiB0YWJsZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbGF5b3V0LlxuICAgICAqIEByZXR1cm5zIFRoZSBsYXlvdXQ6IHtAbGluayBJRGF0YWJhc2VMYXlvdXR9LlxuICAgICAqL1xuICAgIGdldExheW91dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0O1xuICAgIH1cbn1cbi8qKlxuICogQSB0YWJsZSBidWlsZGVyIGZvciB0aGUge0BsaW5rIElLZXlWYWx1ZURhdGFiYXNlfS5cbiAqIEBjYXRlZ29yeSBLZXktVmFsdWUgRGF0YWJhc2VcbiAqL1xuZXhwb3J0IGNsYXNzIFRhYmxlQnVpbGRlciB7XG4gICAgdGFibGVMYXlvdXQ7XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRhYmxlTGF5b3V0KSB7XG4gICAgICAgIHRoaXMudGFibGVMYXlvdXQgPSB0YWJsZUxheW91dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBpbmRleCB0byB0aGUgdGFibGUuXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGluZGV4LlxuICAgICAqIEByZXR1cm5zIFRoZSB0YWJsZSBidWlsZGVyLlxuICAgICAqL1xuICAgIGluZGV4KG5hbWUpIHtcbiAgICAgICAgdGhpcy50YWJsZUxheW91dC5pbmRleGVzID0gdGhpcy50YWJsZUxheW91dC5pbmRleGVzID8/IFtdO1xuICAgICAgICB0aGlzLnRhYmxlTGF5b3V0LmluZGV4ZXMucHVzaCh7IGtleVBhdGg6IG5hbWUgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNES0NsaWVudEVycm9yLCBTREtDbGllbnRFcnJvckNvZGVzIH0gZnJvbSAnLi4vLi4vZXJyb3JzL1NES0NsaWVudEVycm9yJztcbi8qKlxuICogQSBRdWVyeUJ1aWxkZXIgaGVscGVyIGZvciBidWlsZGluZyBxdWVyaWVzIGZvciB0aGUge0BsaW5rIElEYXRhYmFzZVRhYmxlfS5cbiAqIEBjYXRlZ29yeSBLZXktVmFsdWUgRGF0YWJhc2VcbiAqL1xuZXhwb3J0IGNsYXNzIFF1ZXJ5QnVpbGRlciB7XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHF1ZXJ5O1xuICAgIC8qKlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihrZXkpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHtcbiAgICAgICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiAnYXNjJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBrZXkgdG8gcXVlcnkgb24uIFRoaXMgaXMgdGhlIG1ldGhvZCB0byBjYWxsIHRvIGluaXRpYXRlIGFueSBxdWVyeS5cbiAgICAgKiBAcGFyYW0ga2V5IFRoZSBpbmRleCBrZXkgdG8gcXVlcnkgb24uXG4gICAgICogQHJldHVybnMgQSBRdWVyeUJ1aWxkZXIgaW5zdGFuY2UuXG4gICAgICogQHRocm93cyBhbiBTREtDbGllbnRFcnJvciB3aXRoIHRoZSBjb2RlIGBTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudGAgYW5kIGEgZGVzY3JpcHRpdmUgbWVzc2FnZSBpZiB0aGUgcXVlcnkgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgaW5kZXgoa2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJyB8fCBrZXkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLQ2xpZW50RXJyb3IoU0RLQ2xpZW50RXJyb3JDb2Rlcy5RdWVyeUJ1aWxkZXJJbnZhbGlkQXJndW1lbnQsICdJbnZhbGlkIGluZGV4IGtleTogbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlCdWlsZGVyKGtleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgdG8gdmFsaWRhdGUuXG4gICAgICogQHJldHVybnMgV2hldGhlciB0aGUgcXVlcnkgaXMgdmFsaWQuXG4gICAgICogQHRocm93cyBhbiBTREtDbGllbnRFcnJvciB3aXRoIHRoZSBjb2RlIGBTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudGAgYW5kIGEgZGVzY3JpcHRpdmUgbWVzc2FnZSBpZiB0aGUgcXVlcnkgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgdmFsaWRhdGVRdWVyeShxdWVyeSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgUXVlcnlCdWlsZGVyLmJ1aWxkUXVlcnkocXVlcnkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIGJ1aWxkLlxuICAgICAqIEByZXR1cm5zIEEgUXVlcnlCdWlsZGVyIGluc3RhbmNlLlxuICAgICAqIEB0aHJvd3MgYW4gU0RLQ2xpZW50RXJyb3Igd2l0aCB0aGUgY29kZSBgU0RLQ2xpZW50RXJyb3JDb2Rlcy5RdWVyeUJ1aWxkZXJJbnZhbGlkQXJndW1lbnRgIGFuZCBhIGRlc2NyaXB0aXZlIG1lc3NhZ2UgaWYgdGhlIHF1ZXJ5IGlzIGludmFsaWQuXG4gICAgICovXG4gICAgc3RhdGljIGJ1aWxkUXVlcnkocXVlcnkpIHtcbiAgICAgICAgY29uc3QgcXVlcnlCdWlsZGVyID0gUXVlcnlCdWlsZGVyXG4gICAgICAgICAgICAuaW5kZXgocXVlcnkub3JkZXJCeT8ua2V5ID8/IHF1ZXJ5LndoZXJlPy5rZXkgPz8gJycpO1xuICAgICAgICBpZiAocXVlcnkud2hlcmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHdoZXJlID0gcXVlcnkud2hlcmU7XG4gICAgICAgICAgICBpZiAoUXVlcnlCdWlsZGVyLmlzV2hlcmVWYWx1ZSh3aGVyZSkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIud2hlcmUod2hlcmUub3BlcmF0b3IsIHdoZXJlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKFF1ZXJ5QnVpbGRlci5pc1doZXJlVmFsdWVzKHdoZXJlKSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci53aGVyZSh3aGVyZS5vcGVyYXRvciwgd2hlcmUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoUXVlcnlCdWlsZGVyLmlzV2hlcmVCZXR3ZWVuKHdoZXJlKSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci53aGVyZSh3aGVyZS5vcGVyYXRvciwgd2hlcmUudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHF1ZXJ5Lm9yZGVyQnk/LmtleSAmJiBxdWVyeS5vcmRlckJ5Py5rZXkgIT09IHF1ZXJ5LndoZXJlLmtleSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudCwgJ0ludmFsaWQgcXVlcnk6IHdoZXJlIGFuZCBvcmRlckJ5IGNsYXVzZXMgbXVzdCB1c2UgdGhlIHNhbWUga2V5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Lm9yZGVyQnkpIHtcbiAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5vcmRlckJ5KHF1ZXJ5Lm9yZGVyQnkuZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVlcnkubGltaXQpIHtcbiAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5saW1pdChxdWVyeS5saW1pdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Lm9mZnNldCkge1xuICAgICAgICAgICAgcXVlcnlCdWlsZGVyLm9mZnNldChxdWVyeS5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBxdWVyeUJ1aWxkZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHF1ZXJ5LlxuICAgICAqL1xuICAgIGdldFF1ZXJ5KCkge1xuICAgICAgICByZXR1cm4geyAuLi50aGlzLnF1ZXJ5IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSB3aGVyZSBjbGF1c2UgdG8gdGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBvcGVyYXRvciBUaGUgb3BlcmF0b3IgZm9yIHRoZSB3aGVyZSBjbGF1c2UuXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSBmb3IgdGhlIHdoZXJlIGNsYXVzZS5cbiAgICAgKiBAcmV0dXJucyBBIFF1ZXJ5QnVpbGRlciBpbnN0YW5jZSB3aXRoIGEgd2hlcmUgY2xhdXNlIGFkZGVkLlxuICAgICAqIEB0aHJvd3MgYW4gU0RLQ2xpZW50RXJyb3Igd2l0aCB0aGUgY29kZSBgU0RLQ2xpZW50RXJyb3JDb2Rlcy5RdWVyeUJ1aWxkZXJJbnZhbGlkQXJndW1lbnRgIGFuZCBhIGRlc2NyaXB0aXZlIG1lc3NhZ2UgaWYgdGhlIHdoZXJlIGNsYXVzZSBpcyBpbnZhbGlkLlxuICAgICAqL1xuICAgIHdoZXJlKG9wZXJhdG9yLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCB3aGVyZSA9IHtcbiAgICAgICAgICAgIGtleTogdGhpcy5xdWVyeS5vcmRlckJ5LmtleSxcbiAgICAgICAgICAgIG9wZXJhdG9yLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghUXVlcnlCdWlsZGVyLmlzV2hlcmVWYWx1ZSh3aGVyZSkgJiYgIVF1ZXJ5QnVpbGRlci5pc1doZXJlVmFsdWVzKHdoZXJlKSAmJiAhUXVlcnlCdWlsZGVyLmlzV2hlcmVCZXR3ZWVuKHdoZXJlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50LCAnSW52YWxpZCB3aGVyZSBjbGF1c2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXJ5LndoZXJlID0gd2hlcmU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIG9yZGVyIGJ5IGNsYXVzZSB0byB0aGUgcXVlcnkuXG4gICAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciBmb3IgdGhlIG9yZGVyIGJ5IGNsYXVzZSwgZWl0aGVyICdhc2MnIG9yICdkZXNjJy5cbiAgICAgKiBAcmV0dXJucyBBIFF1ZXJ5QnVpbGRlciBpbnN0YW5jZSB3aXRoIGFuIG9yZGVyIGJ5IGNsYXVzZSBhZGRlZC5cbiAgICAgKiBAdGhyb3dzIGFuIFNES0NsaWVudEVycm9yIHdpdGggdGhlIGNvZGUgYFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50YCBpZiB0aGUgb3JkZXIgaXMgbm90ICdhc2MnIG9yICdkZXNjJy5cbiAgICAgKi9cbiAgICBvcmRlckJ5KG9yZGVyKSB7XG4gICAgICAgIGlmIChvcmRlciAhPT0gJ2FzYycgJiYgb3JkZXIgIT09ICdkZXNjJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50LCAnSW52YWxpZCBvcmRlcjogbXVzdCBiZSBhc2Mgb3IgZGVzYycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVlcnkub3JkZXJCeS5kaXJlY3Rpb24gPSBvcmRlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsaW1pdCB0byB0aGUgcXVlcnkuXG4gICAgICogQHBhcmFtIGxpbWl0IFRoZSBsaW1pdCBmb3IgdGhlIHF1ZXJ5LlxuICAgICAqIEByZXR1cm5zIEEgUXVlcnlCdWlsZGVyIGluc3RhbmNlIHdpdGggYSBsaW1pdCBhZGRlZC5cbiAgICAgKiBAdGhyb3dzIGFuIFNES0NsaWVudEVycm9yIHdpdGggdGhlIGNvZGUgYFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50YCBpZiB0aGUgbGltaXQgaXMgbm90IGEgcG9zaXRpdmUgbnVtYmVyLlxuICAgICAqL1xuICAgIGxpbWl0KGxpbWl0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgbGltaXQgIT09ICdudW1iZXInIHx8IGxpbWl0IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0NsaWVudEVycm9yKFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50LCAnSW52YWxpZCBsaW1pdDogbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVlcnkubGltaXQgPSBsaW1pdDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gb2Zmc2V0IHRvIHRoZSBxdWVyeS5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IFRoZSBvZmZzZXQgZm9yIHRoZSBxdWVyeS5cbiAgICAgKiBAcmV0dXJucyBBIFF1ZXJ5QnVpbGRlciBpbnN0YW5jZSB3aXRoIGFuIG9mZnNldCBhZGRlZC5cbiAgICAgKiBAdGhyb3dzIGFuIFNES0NsaWVudEVycm9yIHdpdGggdGhlIGNvZGUgYFNES0NsaWVudEVycm9yQ29kZXMuUXVlcnlCdWlsZGVySW52YWxpZEFyZ3VtZW50YCBhbmQgYSBkZXNjcmlwdGl2ZSBtZXNzYWdlIGlmIHRoZSBvZmZzZXQgaXMgbm90IGEgcG9zaXRpdmUgbnVtYmVyLlxuICAgICAqL1xuICAgIG9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvZmZzZXQgIT09ICdudW1iZXInIHx8IG9mZnNldCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtDbGllbnRFcnJvcihTREtDbGllbnRFcnJvckNvZGVzLlF1ZXJ5QnVpbGRlckludmFsaWRBcmd1bWVudCwgJ0ludmFsaWQgb2Zmc2V0OiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xdWVyeS5vZmZzZXQgPSBvZmZzZXQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgc3RhdGljIGlzV2hlcmVWYWx1ZSh3aGVyZSkge1xuICAgICAgICBjb25zdCBpc1doZXJlTGlrZSA9ICh3aGVyZSAmJiB0eXBlb2Ygd2hlcmUgPT09ICdvYmplY3QnICYmICdvcGVyYXRvcicgaW4gd2hlcmUgJiYgJ3ZhbHVlJyBpbiB3aGVyZSkgPz8gZmFsc2U7XG4gICAgICAgIGlmICghaXNXaGVyZUxpa2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IG9wZXJhdG9yLCB2YWx1ZSB9ID0gd2hlcmU7XG4gICAgICAgIGlmIChbJz09JywgJyE9JywgJz4nLCAnPCcsICc8PScsICc+PSddLmluY2x1ZGVzKG9wZXJhdG9yKSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHN0YXRpYyBpc1doZXJlVmFsdWVzKHdoZXJlKSB7XG4gICAgICAgIGNvbnN0IGlzV2hlcmVMaWtlID0gKHdoZXJlICYmIHR5cGVvZiB3aGVyZSA9PT0gJ29iamVjdCcgJiYgJ29wZXJhdG9yJyBpbiB3aGVyZSAmJiAndmFsdWUnIGluIHdoZXJlKSA/PyBmYWxzZTtcbiAgICAgICAgaWYgKCFpc1doZXJlTGlrZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgb3BlcmF0b3IsIHZhbHVlIH0gPSB3aGVyZTtcbiAgICAgICAgaWYgKFsnaW4nLCAnbm90LWluJ10uaW5jbHVkZXMob3BlcmF0b3IpICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBzdGF0aWMgaXNXaGVyZUJldHdlZW4od2hlcmUpIHtcbiAgICAgICAgY29uc3QgaXNXaGVyZUxpa2UgPSAod2hlcmUgJiYgdHlwZW9mIHdoZXJlID09PSAnb2JqZWN0JyAmJiAnb3BlcmF0b3InIGluIHdoZXJlICYmICd2YWx1ZScgaW4gd2hlcmUpID8/IGZhbHNlO1xuICAgICAgICBpZiAoIWlzV2hlcmVMaWtlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBvcGVyYXRvciwgdmFsdWUgfSA9IHdoZXJlO1xuICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdiZXR3ZWVuJyAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBzaWduSW5XaXRoQ3VzdG9tVG9rZW4sIHNpZ25PdXQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcbmltcG9ydCB7IGh0dHBzQ2FsbGFibGUgfSBmcm9tICdmaXJlYmFzZS9mdW5jdGlvbnMnO1xuaW1wb3J0IGZpcmViYXNlIGZyb20gJ3NlcnZpY2VzL0ZpcmViYXNlL0ZpcmViYXNlU2VydmljZSc7XG5leHBvcnQgY2xhc3MgRmlyZWJhc2VBdXRoU2VydmljZSB7XG4gICAgdmVuZG9ySWQ7XG4gICAgdXNlcjtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCkge1xuICAgICAgICB0aGlzLnZlbmRvcklkID0gdmVuZG9ySWQ7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgaHR0cHNDYWxsYWJsZShmaXJlYmFzZS5nZXRGdW5jdGlvbnMoKSwgJ3Nka0NyZWF0ZVRva2VuJykoe1xuICAgICAgICAgICAgdWlkOiBgY2NjJHt0aGlzLnZlbmRvcklkfWNjYyR7Y3JlZGVudGlhbHMuaWR9YCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEN1c3RvbVRva2VuKGZpcmViYXNlLmdldEF1dGgoKSwgdG9rZW4uZGF0YS50b2tlbik7XG4gICAgICAgIHRoaXMudXNlciA9IHVzZXJDcmVkZW50aWFsLnVzZXI7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XG4gICAgICAgIGF3YWl0IHNpZ25PdXQoZmlyZWJhc2UuZ2V0QXV0aCgpKTtcbiAgICB9XG4gICAgZ2V0SWRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcj8uZ2V0SWRUb2tlbigpID8/IFByb21pc2UucmVqZWN0KCdVc2VyIG5vdCBzaWduZWQgaW4nKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXQsIG9uQ2hpbGRSZW1vdmVkLCBvbkRpc2Nvbm5lY3QsIG9uVmFsdWUsIHJlZiwgcmVtb3ZlLCBzZXJ2ZXJUaW1lc3RhbXAsIHNldCB9IGZyb20gJ2ZpcmViYXNlL2RhdGFiYXNlJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdzZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICd1dGlscy9Mb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7IGNyZWF0ZVNpbmdsZU9ic2VydmVyIH0gZnJvbSAndXRpbHMvT2JzZXJ2ZXIvT2JzZXJ2ZXInO1xuZXhwb3J0IGNsYXNzIEZpcmViYXNlUkRCRGlzY292ZXJ5U2VydmljZSB7XG4gICAgdmVuZG9ySWQ7XG4gICAgY2x1c3RlcklkO1xuICAgIGxvY2FsTm9kZTtcbiAgICBtaW5Db25uZWN0aW9ucztcbiAgICBkaXNjb25uZWN0Q2FsbGJhY2sgPSBjcmVhdGVTaW5nbGVPYnNlcnZlcigpO1xuICAgIGZpcmViYXNlVW5zdWJzY3JpYmVyO1xuICAgIGNoaWxkUmVtb3ZlZFVuc3Vic2NyaWJlcjtcbiAgICBvbkRpc2Nvbm5lY3RIYW5kbGVyO1xuICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIGNsdXN0ZXJLZXk7XG4gICAgbm9kZUtleTtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY2x1c3RlcklkLCBsb2NhbE5vZGUsIG1pbkNvbm5lY3Rpb25zKSB7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMubG9jYWxOb2RlID0gbG9jYWxOb2RlO1xuICAgICAgICB0aGlzLm1pbkNvbm5lY3Rpb25zID0gbWluQ29ubmVjdGlvbnM7XG4gICAgICAgIHRoaXMuY2x1c3RlcktleSA9IGBjY2Mke3RoaXMudmVuZG9ySWR9Y2NjJHt0aGlzLmNsdXN0ZXJJZH1gO1xuICAgICAgICB0aGlzLm5vZGVLZXkgPSBgY2NjJHt0aGlzLnZlbmRvcklkfWNjYyR7dGhpcy5sb2NhbE5vZGUuZ2V0SWQoKX1gO1xuICAgICAgICB0aGlzLmZpcmViYXNlVW5zdWJzY3JpYmVyID0gb25WYWx1ZShyZWYoZmlyZWJhc2UuZ2V0RGF0YWJhc2UoKSwgJy5pbmZvL2Nvbm5lY3RlZCcpLCAoc25hcHNob3QpID0+IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdC52YWwoKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ2ZpcmViYXNlLWRpc2Nvbm5lY3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySWQ6IHRoaXMuY2x1c3RlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubG9jYWxOb2RlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9uRGlzY29ubmVjdEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZygnZmlyZWJhc2UtY29ubmVjdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlcklkOiB0aGlzLmNsdXN0ZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiB0aGlzLmxvY2FsTm9kZS5nZXRJZCgpLFxuICAgICAgICAgICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGpvaW4oKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuam9pbkNsdXN0ZXIoKTtcbiAgICAgICAgY29uc3Qgbm9kZUlkcyA9IGF3YWl0IHRoaXMuZ2V0QW5jZXN0b3JzKCk7XG4gICAgICAgIHRoaXMuY2hpbGRSZW1vdmVkVW5zdWJzY3JpYmVyID0gb25DaGlsZFJlbW92ZWQocmVmKGZpcmViYXNlLmdldERhdGFiYXNlKCksIGBjbHVzdGVycy8ke3RoaXMuY2x1c3RlcktleX0vbm9kZXNgKSwgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlS2V5ID0gc25hcHNob3Qua2V5O1xuICAgICAgICAgICAgaWYgKCFub2RlS2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9kZUlkID0gbm9kZUtleS5yZXBsYWNlKGBjY2Mke3RoaXMudmVuZG9ySWR9Y2NjYCwgJycpO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0Q2FsbGJhY2sucHVibGlzaChub2RlSWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5vZGVJZHM7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmNoaWxkUmVtb3ZlZFVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNoaWxkUmVtb3ZlZFVuc3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyPy5jYW5jZWwoKTtcbiAgICAgICAgZGVsZXRlIHRoaXMub25EaXNjb25uZWN0SGFuZGxlcjtcbiAgICAgICAgdGhpcy5maXJlYmFzZVVuc3Vic2NyaWJlcj8uKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmZpcmViYXNlVW5zdWJzY3JpYmVyO1xuICAgICAgICBhd2FpdCByZW1vdmUocmVmKGZpcmViYXNlLmdldERhdGFiYXNlKCksIGBjbHVzdGVycy8ke3RoaXMuY2x1c3RlcktleX0vbm9kZXMvJHt0aGlzLm5vZGVLZXl9YCkpO1xuICAgIH1cbiAgICBvbk5vZGVEaXNjb25uZWN0KGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2Nvbm5lY3RDYWxsYmFjay5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH1cbiAgICBhc3luYyBnZXRBbmNlc3RvcnMoKSB7XG4gICAgICAgIGNvbnN0IG5vZGVJZHMgPSBbXTtcbiAgICAgICAgY29uc3QgZmJFbnRpdGllcyA9IGF3YWl0IGdldChyZWYoZmlyZWJhc2UuZ2V0RGF0YWJhc2UoKSwgYGNsdXN0ZXJzLyR7dGhpcy5jbHVzdGVyS2V5fS9ub2Rlc2ApKTtcbiAgICAgICAgY29uc3QgYWxsTm9kZXMgPSBbXTtcbiAgICAgICAgZmJFbnRpdGllcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlSWQgPSBub2RlLmtleT8ucmVwbGFjZShgY2NjJHt0aGlzLnZlbmRvcklkfWNjY2AsICcnKTtcbiAgICAgICAgICAgIGFsbE5vZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGlkOiBub2RlSWQsXG4gICAgICAgICAgICAgICAgam9pbmVkQXQ6IG5vZGUudmFsKCkuam9pbmVkQXQsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IG5vZGUudmFsKCkucHJpb3JpdHksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFsbE5vZGVzXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5qb2luZWRBdCA9PT0gYi5qb2luZWRBdCA/IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5IDogYS5qb2luZWRBdCAtIGIuam9pbmVkQXQpXG4gICAgICAgICAgICAuc3BsaWNlKGFsbE5vZGVzLmZpbmRJbmRleCgobm9kZSkgPT4gbm9kZS5pZCA9PT0gdGhpcy5sb2NhbE5vZGUuZ2V0SWQoKSkpO1xuICAgICAgICBhbGxOb2Rlc1xuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIuam9pbmVkQXQgPT09IGEuam9pbmVkQXQgPyBiLnByaW9yaXR5IC0gYS5wcmlvcml0eSA6IGIuam9pbmVkQXQgLSBhLmpvaW5lZEF0KVxuICAgICAgICAgICAgLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmIChub2RlSWRzLmxlbmd0aCA+PSB0aGlzLm1pbkNvbm5lY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZUlkcy5wdXNoKG5vZGUuaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdkaXNjb3ZlcicsIHtcbiAgICAgICAgICAgIGNsdXN0ZXJJZDogdGhpcy5jbHVzdGVySWQsXG4gICAgICAgICAgICBub2RlSWQ6IHRoaXMubG9jYWxOb2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogdGhpcy5sb2NhbE5vZGUudHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBhbmNlc3Rvcklkczogbm9kZUlkcyxcbiAgICAgICAgICAgICAgICBhbGxOb2RlczogYWxsTm9kZXMsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbm9kZUlkcztcbiAgICB9XG4gICAgYXN5bmMgam9pbkNsdXN0ZXIoKSB7XG4gICAgICAgIGF3YWl0IHNldChyZWYoZmlyZWJhc2UuZ2V0RGF0YWJhc2UoKSwgYGNsdXN0ZXJzLyR7dGhpcy5jbHVzdGVyS2V5fS9ub2Rlcy8ke3RoaXMubm9kZUtleX1gKSwge1xuICAgICAgICAgICAgam9pbmVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgcHJpb3JpdHk6IE1hdGgucmFuZG9tKCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRPbkRpc2Nvbm5lY3RIYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdEhhbmRsZXIuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyID0gb25EaXNjb25uZWN0KHJlZihmaXJlYmFzZS5nZXREYXRhYmFzZSgpLCBgY2x1c3RlcnMvJHt0aGlzLmNsdXN0ZXJLZXl9L25vZGVzLyR7dGhpcy5ub2RlS2V5fWApKTtcbiAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3RIYW5kbGVyLnJlbW92ZSgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgZ2V0QXV0aCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xuaW1wb3J0IHsgZ2V0RGF0YWJhc2UsIG9mZiwgb25WYWx1ZSwgcmVmIH0gZnJvbSAnZmlyZWJhc2UvZGF0YWJhc2UnO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGdldEZ1bmN0aW9ucyB9IGZyb20gJ2ZpcmViYXNlL2Z1bmN0aW9ucyc7XG5pbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgU0RLX0ZJUkVTVE9SRV9BUFBfTkFNRSB9IGZyb20gJ2NvbnN0YW50cy9TREsnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tICdlbnZpcm9ubWVudHMvRW52aXJvbm1lbnQnO1xuY2xhc3MgRmlyZWJhc2VTZXJ2aWNlIHtcbiAgICBzdGF0aWMgaW5zdGFuY2U7XG4gICAgYXBwO1xuICAgIGF1dGg7XG4gICAgZnVuY3Rpb25zO1xuICAgIGRhdGFiYXNlO1xuICAgIGZpcmVzdG9yZTtcbiAgICBjbG9ja1NrZXc7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZ2V0QXBwKCk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKCFGaXJlYmFzZVNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIEZpcmViYXNlU2VydmljZS5pbnN0YW5jZSA9IG5ldyBGaXJlYmFzZVNlcnZpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRmlyZWJhc2VTZXJ2aWNlLmluc3RhbmNlO1xuICAgIH1cbiAgICBnZXRBcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5hcHApIHtcbiAgICAgICAgICAgIGxldCBpZCA9IFNES19GSVJFU1RPUkVfQVBQX05BTUU7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBpZCA9IGAke1NES19GSVJFU1RPUkVfQVBQX05BTUV9LSR7djQoKX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hcHAgPSBpbml0aWFsaXplQXBwKEVudmlyb25tZW50LmZpcmViYXNlQ29uZmlnLCBgJHtpZH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hcHA7XG4gICAgfVxuICAgIGdldEF1dGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGggPSBnZXRBdXRoKHRoaXMuZ2V0QXBwKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmF1dGg7XG4gICAgfVxuICAgIGdldEZ1bmN0aW9ucygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZ1bmN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5mdW5jdGlvbnMgPSBnZXRGdW5jdGlvbnModGhpcy5nZXRBcHAoKSwgRW52aXJvbm1lbnQuZmlyZWJhc2VDb25maWcuZnVuY3Rpb25zUmVnaW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5mdW5jdGlvbnM7XG4gICAgfVxuICAgIGdldERhdGFiYXNlKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGF0YWJhc2UpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YWJhc2UgPSBnZXREYXRhYmFzZSh0aGlzLmdldEFwcCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgZ2V0RmlyZXN0b3JlKCkge1xuICAgICAgICBpZiAoIXRoaXMuZmlyZXN0b3JlKSB7XG4gICAgICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGdldEZpcmVzdG9yZSh0aGlzLmdldEFwcCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maXJlc3RvcmU7XG4gICAgfVxuICAgIGFzeW5jIGdldEVzdGltYXRlZFRpbWVzdGFtcCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvY2tTa2V3KSB7XG4gICAgICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSArIHRoaXMuY2xvY2tTa2V3O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRiID0gdGhpcy5nZXREYXRhYmFzZSgpO1xuICAgICAgICBjb25zdCBjb25uZWN0ZWRSZWYgPSByZWYoZGIsICcuaW5mby9jb25uZWN0ZWQnKTtcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSBvblZhbHVlKGNvbm5lY3RlZFJlZiwgKHNuYXApID0+IHtcbiAgICAgICAgICAgIGlmIChzbmFwLnZhbCgpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2xvY2tTa2V3O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0UmVmID0gcmVmKGRiLCAnLmluZm8vc2VydmVyVGltZU9mZnNldCcpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIG9uVmFsdWUob2Zmc2V0UmVmLCAoc25hcCkgPT4ge1xuICAgICAgICAgICAgICAgIG9mZihvZmZzZXRSZWYpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvY2tTa2V3ID0gc25hcC52YWwoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKERhdGUubm93KCkgKyAodGhpcy5jbG9ja1NrZXcgPz8gMCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNvbnN0IGZpcmViYXNlID0gRmlyZWJhc2VTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG5leHBvcnQgZGVmYXVsdCBmaXJlYmFzZTtcbiIsImV4cG9ydCBjbGFzcyBHcmFwaFNlcnZpY2Uge1xuICAgIG9wdGlvbnM7XG4gICAgcmFuZ2VzID0gW107XG4gICAgbWF4TGF5ZXI7XG4gICAgcmVtb3RlTm9kZXMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm1heExheWVyID0gKHRoaXMub3B0aW9ucy5tYXhDb25uZWN0aW9ucyAtIDIgKiB0aGlzLm9wdGlvbnMubWluQ29ubmVjdGlvbnMpIC8gMjtcbiAgICAgICAgdGhpcy5yYW5nZXMucHVzaCh7IHN0YXJ0OiAxLCBlbmQ6IHRoaXMuZ2V0TmV4dFRhcmdldFJhbmsoMSwgMSkgLSAxIH0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF4TGF5ZXI7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5yYW5nZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHRoaXMuZ2V0TmV4dFRhcmdldFJhbmsoMSwgaSArIDEpLFxuICAgICAgICAgICAgICAgIGVuZDogdGhpcy5nZXROZXh0VGFyZ2V0UmFuaygxLCBpICsgMikgLSAxLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dFRhcmdldFJhbmsocmFuaywgbGF5ZXIgPSAxKSB7XG4gICAgICAgIGxldCBmYWN0b3IgPSB0aGlzLm9wdGlvbnMubWF4RGlzdGFuY2UgLSB0aGlzLm9wdGlvbnMubWluQ29ubmVjdGlvbnM7XG4gICAgICAgIGxldCBsYXllckFkanVzdG1lbnQgPSAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxheWVyOyArK2kpIHtcbiAgICAgICAgICAgIGZhY3RvciAqPSB0aGlzLm9wdGlvbnMubWF4RGlzdGFuY2UgLSB0aGlzLm9wdGlvbnMubWluQ29ubmVjdGlvbnMgLSBpO1xuICAgICAgICAgICAgbGF5ZXJBZGp1c3RtZW50ICo9IHRoaXMub3B0aW9ucy5tYXhEaXN0YW5jZSAtIHRoaXMub3B0aW9ucy5taW5Db25uZWN0aW9ucyAtIGkgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWN0b3IgKiB0aGlzLm9wdGlvbnMubWluQ29ubmVjdGlvbnMgKyByYW5rIC0gbGF5ZXJBZGp1c3RtZW50O1xuICAgIH1cbiAgICBnZXRDdXJyZW50TWF4TGF5ZXIobmJOb2Rlcykge1xuICAgICAgICBsZXQgbGF5ZXIgPSAwO1xuICAgICAgICB3aGlsZSAodGhpcy5yYW5nZXNbbGF5ZXJdLmVuZCA8IG5iTm9kZXMpIHtcbiAgICAgICAgICAgIGxheWVyICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxheWVyO1xuICAgIH1cbiAgICBnZXRNaW5Db25uZWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5taW5Db25uZWN0aW9ucztcbiAgICB9XG4gICAgZ2V0TWF4Q29ubmVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWF4Q29ubmVjdGlvbnM7XG4gICAgfVxuICAgIGdldE1heERpc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1heERpc3RhbmNlO1xuICAgIH1cbiAgICBnZXRSZW1vdGVOb2RlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlTm9kZXM7XG4gICAgfVxuICAgIHNldFJlbW90ZU5vZGUoaWQsIHJlbW90ZU5vZGUpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVOb2Rlcy5zZXQoaWQsIHJlbW90ZU5vZGUpO1xuICAgIH1cbiAgICBoYXNSZW1vdGVOb2RlKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZU5vZGVzLmhhcyhpZCk7XG4gICAgfVxuICAgIGdldFJlbW90ZU5vZGUoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlTm9kZXMuZ2V0KGlkKTtcbiAgICB9XG4gICAgZGVsZXRlUmVtb3RlTm9kZShpZCkge1xuICAgICAgICB0aGlzLnJlbW90ZU5vZGVzLmRlbGV0ZShpZCk7XG4gICAgfVxuICAgIGdldENsb3Nlc3ROb2RlcyhyZW1vdGVDb25uZWN0aW9ucywgZGVzdGluYXRpb25JZCkge1xuICAgICAgICBjb25zdCBkZXN0aW5hdGlvblJhbmsgPSB0aGlzLmdldFJlbW90ZU5vZGUoZGVzdGluYXRpb25JZCk/LmdldFJhbmsoKSA/PyAwO1xuICAgICAgICBjb25zdCBjbG9zZXN0Tm9kZXMgPSByZW1vdGVDb25uZWN0aW9uc1xuICAgICAgICAgICAgLm1hcCgocmVtb3RlSWQpID0+IHRoaXMuZ2V0UmVtb3RlTm9kZShyZW1vdGVJZCkpXG4gICAgICAgICAgICAuZmlsdGVyKChyZW1vdGVOb2RlKSA9PiByZW1vdGVOb2RlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gTWF0aC5hYnMoZGVzdGluYXRpb25SYW5rIC0gKGEgJiYgYS5nZXRSYW5rKCkgfHwgSW5maW5pdHkpKSAtIE1hdGguYWJzKGRlc3RpbmF0aW9uUmFuayAtIChiICYmIGIuZ2V0UmFuaygpIHx8IEluZmluaXR5KSkpXG4gICAgICAgICAgICAubWFwKChyZW1vdGVOb2RlKSA9PiByZW1vdGVOb2RlLmdldElkKCkpO1xuICAgICAgICByZXR1cm4gY2xvc2VzdE5vZGVzO1xuICAgIH1cbn1cbiIsImNsYXNzIEpvYlF1ZXVlU2VydmljZSB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIGpvYlF1ZXVlID0gW107XG4gICAgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIGlmICghSm9iUXVldWVTZXJ2aWNlLmluc3RhbmNlKSB7XG4gICAgICAgICAgICBKb2JRdWV1ZVNlcnZpY2UuaW5zdGFuY2UgPSBuZXcgSm9iUXVldWVTZXJ2aWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEpvYlF1ZXVlU2VydmljZS5pbnN0YW5jZTtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9iUXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBpc0F2YWlsYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzUnVubmluZztcbiAgICB9XG4gICAgY2xlYXIob3duZXJJZCkge1xuICAgICAgICBpZiAob3duZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5qb2JRdWV1ZSA9IHRoaXMuam9iUXVldWUuZmlsdGVyKChpdGVtKSA9PiBpdGVtLm93bmVySWQgIT09IG93bmVySWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuam9iUXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgYWRkKG93bmVySWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuam9iUXVldWUucHVzaCh7XG4gICAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgICAgIG93bmVySWQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJ1bkpvYlF1ZXVlKCk7XG4gICAgfVxuICAgIGFzeW5jIHJ1bkpvYlF1ZXVlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgICAgIHdoaWxlICh0aGlzLmpvYlF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IHRoaXMuam9iUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChqb2IpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0pvYlF1ZXVlU2VydmljZTogUnVubmluZyBqb2InKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgam9iLmNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdKb2JRdWV1ZVNlcnZpY2U6IEVycm9yIHJ1bm5pbmcgam9iJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIH1cbn1cbmNvbnN0IGpvYlF1ZXVlID0gSm9iUXVldWVTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG5leHBvcnQgZGVmYXVsdCBqb2JRdWV1ZTtcbiIsImltcG9ydCB7IE1FU1NBR0VfQlVGRkVSX0NMRUFOVVBfSU5URVJWQUwsIE1FU1NBR0VfQlVGRkVSX1JFVEVOVElPTl9USU1FIH0gZnJvbSAnY29uc3RhbnRzL1NlcnZpY2VzJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5leHBvcnQgY2xhc3MgTWVzc2FnZUJ1ZmZlclNlcnZpY2Uge1xuICAgIGJ1ZmZlciA9IG5ldyBNYXAoKTtcbiAgICB1bnN1YnNjcmliZUhhbmRsZXI7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVIYW5kbGVyID0gaW50ZXJ2YWwuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbdXVpZCwgdGltZXN0YW1wXSBvZiB0aGlzLmJ1ZmZlci5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRpbWVzdGFtcCA+IE1FU1NBR0VfQlVGRkVSX1JFVEVOVElPTl9USU1FKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLmRlbGV0ZSh1dWlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIE1FU1NBR0VfQlVGRkVSX0NMRUFOVVBfSU5URVJWQUwpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZUhhbmRsZXIoKTtcbiAgICB9XG4gICAgYWRkTWVzc2FnZSh1dWlkKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyLnNldCh1dWlkLCBEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgaGFzTWVzc2FnZSh1dWlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5oYXModXVpZCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVFJBTlNBQ1RJT05fUEVSX1BBR0UgfSBmcm9tICdjb25zdGFudHMvU2VydmljZXMnO1xuaW1wb3J0IHsgU0RLSW50ZXJuYWxFcnJvciB9IGZyb20gJ2Vycm9ycy9TREtJbnRlcm5hbEVycm9yJztcbmltcG9ydCB7IGdldCwgbGltaXRUb0ZpcnN0LCBvbkRpc2Nvbm5lY3QsIG9yZGVyQnlLZXksIHF1ZXJ5LCByZWYsIHJlbW92ZSwgcnVuVHJhbnNhY3Rpb24sIHNldCwgc3RhcnRBdCB9IGZyb20gJ2ZpcmViYXNlL2RhdGFiYXNlJztcbmltcG9ydCBmaXJlYmFzZSBmcm9tICdzZXJ2aWNlcy9GaXJlYmFzZS9GaXJlYmFzZVNlcnZpY2UnO1xuZXhwb3J0IGNsYXNzIEZpcmViYXNlUkRCVHJhbnNhY3Rpb25TZXJ2aWNlIHtcbiAgICB2ZW5kb3JJZDtcbiAgICBjbHVzdGVySWQ7XG4gICAgY2x1c3RlcktleTtcbiAgICBjb25zdHJ1Y3Rvcih2ZW5kb3JJZCwgY2x1c3RlcklkKSB7XG4gICAgICAgIHRoaXMudmVuZG9ySWQgPSB2ZW5kb3JJZDtcbiAgICAgICAgdGhpcy5jbHVzdGVySWQgPSBjbHVzdGVySWQ7XG4gICAgICAgIHRoaXMuY2x1c3RlcktleSA9IGBjY2Mke3RoaXMudmVuZG9ySWR9Y2NjJHt0aGlzLmNsdXN0ZXJJZH1gO1xuICAgIH1cbiAgICBhc3luYyB3cml0ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uLCBsYWJlbCkge1xuICAgICAgICBjb25zdCBuZXdUcmFuc2FjdGlvblJlZiA9IHJlZihmaXJlYmFzZS5nZXREYXRhYmFzZSgpLCBgY2x1c3RlcnMvJHt0aGlzLmNsdXN0ZXJLZXl9L29iamVjdHN0b3Jlcy8ke2xhYmVsfS90cmFuc2FjdGlvbnMvJHt0cmFuc2FjdGlvbi5pZH1gKTtcbiAgICAgICAgY29uc3QgZGlzY29ubmVjdCA9IG9uRGlzY29ubmVjdChuZXdUcmFuc2FjdGlvblJlZik7XG4gICAgICAgIGRpc2Nvbm5lY3QucmVtb3ZlKCk7XG4gICAgICAgIGlmICghdHJhbnNhY3Rpb24ucGFyZW50SWQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0cmFuc2FjdGlvbi5wYXJlbnRJZDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgc2V0KG5ld1RyYW5zYWN0aW9uUmVmLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCBkaXNjb25uZWN0LmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZUNhbm5vdFdyaXRlVHJhbnNhY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJ1blRyYW5zYWN0aW9uKHJlZihmaXJlYmFzZS5nZXREYXRhYmFzZSgpLCBgY2x1c3RlcnMvJHt0aGlzLmNsdXN0ZXJLZXl9L29iamVjdHN0b3Jlcy8ke2xhYmVsfS90cmFuc2FjdGlvbnMvbGFzdFRyYW5zYWN0aW9uYCksIChsYXN0VHJhbnNhY3Rpb25JZCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFsYXN0VHJhbnNhY3Rpb25JZCkge1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbi5wYXJlbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb24ucGFyZW50SWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbi5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXN0VHJhbnNhY3Rpb25JZCAhPT0gdHJhbnNhY3Rpb24ucGFyZW50SWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uLmlkO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHJlc3VsdC5jb21taXR0ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhd2FpdCByZW1vdmUobmV3VHJhbnNhY3Rpb25SZWYpO1xuICAgICAgICAgICAgYXdhaXQgZGlzY29ubmVjdC5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT2JqZWN0U3RvcmVOb3RTeW5jZWQpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGRpc2Nvbm5lY3QuY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFRyYW5zYWN0aW9ucyhsYWJlbCwgbGFzdEtub3duVHJhbnNhY3Rpb25JZCkge1xuICAgICAgICBsZXQgdHJhbnNhY3Rpb25zID0gW107XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uc1JlZiA9IHJlZihmaXJlYmFzZS5nZXREYXRhYmFzZSgpLCBgY2x1c3RlcnMvJHt0aGlzLmNsdXN0ZXJLZXl9L29iamVjdHN0b3Jlcy8ke2xhYmVsfS90cmFuc2FjdGlvbnNgKTtcbiAgICAgICAgbGV0IHNuYXBzaG90ID0gYXdhaXQgZ2V0KHF1ZXJ5KHRyYW5zYWN0aW9uc1JlZiwgbGltaXRUb0ZpcnN0KFRSQU5TQUNUSU9OX1BFUl9QQUdFICsgMSksIG9yZGVyQnlLZXkoKSkpO1xuICAgICAgICBpZiAoIXNuYXBzaG90LmV4aXN0cygpKSB7XG4gICAgICAgICAgICBpZiAobGFzdEtub3duVHJhbnNhY3Rpb25JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5PYmplY3RTdG9yZUludmFsaWRTdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25zO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uc01hcCA9IHNuYXBzaG90LnZhbCgpO1xuICAgICAgICB3aGlsZSAoT2JqZWN0LmtleXMoc25hcHNob3QudmFsKCkpLmxlbmd0aCA+IFRSQU5TQUNUSU9OX1BFUl9QQUdFKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc25hcHNob3QudmFsKCkpO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IGtleXNba2V5cy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHNuYXBzaG90ID0gYXdhaXQgZ2V0KHF1ZXJ5KHRyYW5zYWN0aW9uc1JlZiwgbGltaXRUb0ZpcnN0KFRSQU5TQUNUSU9OX1BFUl9QQUdFICsgMSksIHN0YXJ0QXQobmV4dCksIG9yZGVyQnlLZXkoKSkpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0cmFuc2FjdGlvbnNNYXAsIHNuYXBzaG90LnZhbCgpKTtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc2FjdGlvbnMgPSBPYmplY3QudmFsdWVzKHRyYW5zYWN0aW9uc01hcClcbiAgICAgICAgICAgIC5maWx0ZXIoKHRyYW5zYWN0aW9uKSA9PiB0eXBlb2YgdHJhbnNhY3Rpb24gIT09ICdzdHJpbmcnKTtcbiAgICAgICAgaWYgKHRyYW5zYWN0aW9ucy5sZW5ndGggPT09IDAgJiYgbGFzdEtub3duVHJhbnNhY3Rpb25JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLk9iamVjdFN0b3JlSW52YWxpZFN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhbnNhY3Rpb25zLmxlbmd0aCA+IDAgJiYgbGFzdEtub3duVHJhbnNhY3Rpb25JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIXRyYW5zYWN0aW9ucy5maW5kKHRyYW5zYWN0aW9uID0+IHRyYW5zYWN0aW9uLmlkID09PSBsYXN0S25vd25UcmFuc2FjdGlvbklkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuT2JqZWN0U3RvcmVJbnZhbGlkU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNvcnRlZFRyYW5zYWN0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgbmV4dFRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb25zLmZpbmQodHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb24ucGFyZW50SWQgPT09IGxhc3RLbm93blRyYW5zYWN0aW9uSWQpO1xuICAgICAgICB3aGlsZSAobmV4dFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICBzb3J0ZWRUcmFuc2FjdGlvbnMucHVzaChuZXh0VHJhbnNhY3Rpb24pO1xuICAgICAgICAgICAgbmV4dFRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb25zLmZpbmQodHJhbnNhY3Rpb24gPT4gdHJhbnNhY3Rpb24ucGFyZW50SWQgPT09IG5leHRUcmFuc2FjdGlvbi5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvcnRlZFRyYW5zYWN0aW9ucztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjb2xsZWN0aW9uLCBkb2MsIGdldERvYywgZ2V0RG9jcyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyBHZW5lcmF0aXZlQUlNb2RlbElucHV0VHlwZSwgR2VuZXJhdGl2ZUFJTW9kZWxPdXRwdXRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBTREtJbnRlcm5hbEVycm9yIH0gZnJvbSAnZXJyb3JzL1NES0ludGVybmFsRXJyb3InO1xuaW1wb3J0IHsgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUsIFdvcmtmbG93QmxvY2tUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TZXJ2aWNlcy9Xb3JrZmxvdyc7XG5pbXBvcnQgZmlyZWJhc2UgZnJvbSAnc2VydmljZXMvRmlyZWJhc2UvRmlyZWJhc2VTZXJ2aWNlJztcbmNsYXNzIFdvcmtmbG93U2VydmljZSB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgICAgICBpZiAoIVdvcmtmbG93U2VydmljZS5pbnN0YW5jZSkge1xuICAgICAgICAgICAgV29ya2Zsb3dTZXJ2aWNlLmluc3RhbmNlID0gbmV3IFdvcmtmbG93U2VydmljZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBXb3JrZmxvd1NlcnZpY2UuaW5zdGFuY2U7XG4gICAgfVxuICAgIGFzeW5jIGdldFdvcmtmbG93KHZlbmRvcklkLCB3b3JrZmxvd0lkKSB7XG4gICAgICAgIGNvbnN0IHdvcmtmbG93RG9jID0gYXdhaXQgZ2V0RG9jKGRvYyhmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSwgYC9kZXZlbG9wZXJzLyR7dmVuZG9ySWR9L3Jlc291cmNlcy9nZW5lcmF0aXZlLWFpLXdvcmtmbG93L2l0ZW1zLyR7d29ya2Zsb3dJZH1gKSk7XG4gICAgICAgIGNvbnN0IGFnZW50cyA9IGF3YWl0IHRoaXMuZ2V0QWdlbnRzKHZlbmRvcklkKTtcbiAgICAgICAgY29uc3QgZGF0YUNvbGxlY3Rpb25zID0gYXdhaXQgdGhpcy5nZXREYXRhQ29sbGVjdGlvbnModmVuZG9ySWQpO1xuICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmdldE1vZGVscyh2ZW5kb3JJZCk7XG4gICAgICAgIGlmICghd29ya2Zsb3dEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuV29ya2Zsb3dEb2VzTm90RXhpc3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlV29ya2Zsb3dEb2N1bWVudCh3b3JrZmxvd0RvYywgYWdlbnRzLCBkYXRhQ29sbGVjdGlvbnMsIG1vZGVscyk7XG4gICAgfVxuICAgIHBhcnNlV29ya2Zsb3dEb2N1bWVudCh3b3JrZmxvd0RvYywgYWdlbnRzLCBkYXRhQ29sbGVjdGlvbnMsIG1vZGVscykge1xuICAgICAgICBjb25zdCB3b3JrZmxvdyA9IHdvcmtmbG93RG9jLmRhdGEoKTtcbiAgICAgICAgaWYgKCF3b3JrZmxvdykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFNES0ludGVybmFsRXJyb3IoU0RLSW50ZXJuYWxFcnJvci5jb2Rlcy5Xb3JrZmxvd0RvZXNOb3RFeGlzdCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmxvY2tzID0gdGhpcy5wYXJzZVdvcmtmbG93QmxvY2tzKHdvcmtmbG93LmJsb2NrcywgYWdlbnRzLCBkYXRhQ29sbGVjdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHdvcmtmbG93RG9jLmlkLFxuICAgICAgICAgICAgbW9kZWxzQnVja2V0SWQ6IHdvcmtmbG93LmJ1Y2tldElkLFxuICAgICAgICAgICAgYmxvY2tzOiBibG9ja3MsXG4gICAgICAgICAgICBtb2RlbHM6IHRoaXMuZ2V0V29ya2Zsb3dNb2RlbHMoYmxvY2tzLCBtb2RlbHMpLFxuICAgICAgICAgICAgZGF0YUJ1Y2tldElkczogdGhpcy5nZXRXb3JrZmxvd09iamVjdFN0b3JhZ2VCdWNrZXRzKGJsb2NrcyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFdvcmtmbG93TW9kZWxzKGJsb2NrcywgbW9kZWxzKSB7XG4gICAgICAgIGNvbnN0IHdvcmtmbG93TW9kZWxzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIGJsb2Nrcykge1xuICAgICAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IFdvcmtmbG93QmxvY2tUeXBlLkFnZW50KSB7XG4gICAgICAgICAgICAgICAgd29ya2Zsb3dNb2RlbHMuYWRkKGJsb2NrLm1vZGVsSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJsb2NrLnR5cGUgPT09IFdvcmtmbG93QmxvY2tUeXBlLkRhdGFDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb2xsZWN0aW9uQmxvY2sgb2YgWy4uLmJsb2NrLmluZ2VzdEJsb2NrcywgLi4uYmxvY2sucmV0cmlldmVCbG9ja3NdKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uQmxvY2sudHlwZSA9PT0gRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUuTW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtmbG93TW9kZWxzLmFkZChjb2xsZWN0aW9uQmxvY2suaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHdvcmtmbG93TW9kZWxzKS5tYXAoKHdvcmtmbG93TW9kZWwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQsIGVuZ2luZVR5cGUsIHRhc2tUeXBlLCBpbnB1dFR5cGUsIG91dHB1dFR5cGUsIHNvdXJjZVVybCB9ID0gbW9kZWxzLmZpbmQoKG1vZGVsKSA9PiBtb2RlbC5pZCA9PT0gd29ya2Zsb3dNb2RlbCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIGVuZ2luZVR5cGUsXG4gICAgICAgICAgICAgICAgdGFza1R5cGUsXG4gICAgICAgICAgICAgICAgaW5wdXRUeXBlLFxuICAgICAgICAgICAgICAgIG91dHB1dFR5cGUsXG4gICAgICAgICAgICAgICAgc291cmNlVXJsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFdvcmtmbG93T2JqZWN0U3RvcmFnZUJ1Y2tldHMoYmxvY2tzKSB7XG4gICAgICAgIGNvbnN0IGJ1Y2tldHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgYmxvY2sgb2YgYmxvY2tzKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGJsb2NrLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLkRhdGFDb2xsZWN0aW9uOlxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb25CbG9jayBvZiBbLi4uYmxvY2suaW5nZXN0QmxvY2tzLCAuLi5ibG9jay5yZXRyaWV2ZUJsb2Nrc10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uQmxvY2sudHlwZSA9PT0gRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUuT2JqZWN0U3RvcmFnZVVwbG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldHMuYWRkKGNvbGxlY3Rpb25CbG9jay5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oYnVja2V0cyk7XG4gICAgfVxuICAgIHBhcnNlV29ya2Zsb3dCbG9ja3MoYmxvY2tzLCBhZ2VudHMsIGRhdGFDb2xsZWN0aW9ucykge1xuICAgICAgICByZXR1cm4gYmxvY2tzLm1hcCgoYmxvY2spID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoYmxvY2sudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgV29ya2Zsb3dCbG9ja1R5cGUuQWdlbnQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFnZW50ID0gYWdlbnRzLmZpbmQoKGFnZW50KSA9PiBhZ2VudC5pZCA9PT0gYmxvY2suaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFnZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLldvcmtmbG93SW52YWxpZEJsb2NrVHlwZSwgeyBibG9jayB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogYWdlbnQudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBhZ2VudC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZDogYmxvY2sudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBhZ2VudC5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogYWdlbnQudGVtcGVyYXR1cmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhUb2tlbnM6IGFnZW50Lm1heFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsSWQ6IGFnZW50Lm1vZGVsSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rczogYmxvY2subGlua3MsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY2FzZSBXb3JrZmxvd0Jsb2NrVHlwZS5EYXRhQ29sbGVjdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YUNvbGxlY3Rpb24gPSBkYXRhQ29sbGVjdGlvbnMuZmluZCgoZGF0YUNvbGxlY3Rpb24pID0+IGRhdGFDb2xsZWN0aW9uLmlkID09PSBibG9jay5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YUNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTREtJbnRlcm5hbEVycm9yKFNES0ludGVybmFsRXJyb3IuY29kZXMuV29ya2Zsb3dJbnZhbGlkQmxvY2tUeXBlLCB7IGJsb2NrIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBkYXRhQ29sbGVjdGlvbi50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRhdGFDb2xsZWN0aW9uLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdWlkOiBibG9jay51aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YUNvbGxlY3Rpb24uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmdlc3RCbG9ja3M6IGRhdGFDb2xsZWN0aW9uLmluZ2VzdEJsb2NrcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlQmxvY2tzOiBkYXRhQ29sbGVjdGlvbi5yZXRyaWV2ZUJsb2NrcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzOiBibG9jay5saW5rcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLlByb21wdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFdvcmtmbG93QmxvY2tUeXBlLlByb21wdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBibG9jay5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZDogYmxvY2sudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3M6IGJsb2NrLmxpbmtzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNhc2UgV29ya2Zsb3dCbG9ja1R5cGUuQW5zd2VyOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogV29ya2Zsb3dCbG9ja1R5cGUuQW5zd2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJsb2NrLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdWlkOiBibG9jay51aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rczogYmxvY2subGlua3MsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY2FzZSBXb3JrZmxvd0Jsb2NrVHlwZS5UaW1lOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogV29ya2Zsb3dCbG9ja1R5cGUuVGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBibG9jay5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZDogYmxvY2sudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3M6IGJsb2NrLmxpbmtzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNhc2UgV29ya2Zsb3dCbG9ja1R5cGUuQ29kZTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFdvcmtmbG93QmxvY2tUeXBlLkNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1aWQ6IGJsb2NrLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzOiBibG9jay5saW5rcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLlNlYXJjaDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFdvcmtmbG93QmxvY2tUeXBlLlNlYXJjaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBibG9jay5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpZDogYmxvY2sudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3M6IGJsb2NrLmxpbmtzLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNhc2UgV29ya2Zsb3dCbG9ja1R5cGUuV2ViU2NyYXBlcjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFdvcmtmbG93QmxvY2tUeXBlLldlYlNjcmFwZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogYmxvY2suaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1aWQ6IGJsb2NrLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzOiBibG9jay5saW5rcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU0RLSW50ZXJuYWxFcnJvcihTREtJbnRlcm5hbEVycm9yLmNvZGVzLldvcmtmbG93SW52YWxpZEJsb2NrVHlwZSwgeyBibG9jayB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldEFnZW50cyh2ZW5kb3JJZCkge1xuICAgICAgICBjb25zdCBhZ2VudERvY3MgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCksIGAvZGV2ZWxvcGVycy8ke3ZlbmRvcklkfS9yZXNvdXJjZXMvZ2VuZXJhdGl2ZS1haS1hZ2VudC9pdGVtc2ApKTtcbiAgICAgICAgcmV0dXJuIGFnZW50RG9jcy5kb2NzLm1hcCgoZG9jKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhZ2VudCA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFdvcmtmbG93QmxvY2tUeXBlLkFnZW50LFxuICAgICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBhZ2VudC5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IGFnZW50LnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgICAgIG1heFRva2VuczogYWdlbnQubWF4VG9rZW5zLFxuICAgICAgICAgICAgICAgIG1vZGVsSWQ6IGFnZW50Lm1vZGVsSWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RGF0YUNvbGxlY3Rpb25zKHZlbmRvcklkKSB7XG4gICAgICAgIGNvbnN0IGNvbGxlY3Rpb25Eb2NzID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGZpcmViYXNlLmdldEZpcmVzdG9yZSgpLCBgL2RldmVsb3BlcnMvJHt2ZW5kb3JJZH0vcmVzb3VyY2VzL2dlbmVyYXRpdmUtYWktY29sbGVjdGlvbi9pdGVtc2ApKTtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25Eb2NzLmRvY3MubWFwKChkb2MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBkb2MuZGF0YSgpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBXb3JrZmxvd0Jsb2NrVHlwZS5EYXRhQ29sbGVjdGlvbixcbiAgICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBjb2xsZWN0aW9uLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGluZ2VzdEJsb2NrczogY29sbGVjdGlvbi5pbmdlc3RCbG9ja3MsXG4gICAgICAgICAgICAgICAgcmV0cmlldmVCbG9ja3M6IGNvbGxlY3Rpb24ucmV0cmlldmVCbG9ja3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TW9kZWxzKHZlbmRvcklkKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsRG9jcyA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSwgYC9kZXZlbG9wZXJzLyR7dmVuZG9ySWR9L3Jlc291cmNlcy9nZW5lcmF0aXZlLWFpLW1vZGVsL2l0ZW1zYCkpO1xuICAgICAgICByZXR1cm4gbW9kZWxEb2NzLmRvY3MubWFwKChkb2MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IG1vZGVsLm1vZGVsTmFtZSxcbiAgICAgICAgICAgICAgICBlbmdpbmVUeXBlOiBtb2RlbC5lbmdpbmUsXG4gICAgICAgICAgICAgICAgdGFza1R5cGU6IG1vZGVsLnRhc2ssXG4gICAgICAgICAgICAgICAgaW5wdXRUeXBlOiBtb2RlbC5pbnB1dFR5cGUgPz8gR2VuZXJhdGl2ZUFJTW9kZWxJbnB1dFR5cGUuVGV4dCxcbiAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBtb2RlbC5vdXRwdXRUeXBlID8/IEdlbmVyYXRpdmVBSU1vZGVsT3V0cHV0VHlwZS5UZXh0LFxuICAgICAgICAgICAgICAgIHNvdXJjZVVybDogbW9kZWwudXJsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuY29uc3Qgd29ya2Zsb3dTZXJ2aWNlID0gV29ya2Zsb3dTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG5leHBvcnQgZGVmYXVsdCB3b3JrZmxvd1NlcnZpY2U7XG4iLCJpbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQUlJbmdlc3RUcmFjZUJsb2NrLCBBSVRyYWNlTGV2ZWwsIEFJVHJhY2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9BSVRyYWNlL1RyYWNlJztcbmltcG9ydCBnZW5lcmF0aXZlQUlUcmFjaW5nIGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9UcmFjZS9HZW5lcmF0aXZlQUlUcmFjaW5nJztcbmltcG9ydCB7IHByb2Nlc3NOZXh0QmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L05leHRCbG9jayc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0NodW5rU3BsaXR0ZXJCbG9jayhqb2JJZCwgY29udGVudCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGxldCBpbmRleCA9IFtdO1xuICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXguY29uY2F0KHByb2Nlc3NDaHVua1NwbGl0dGVyQmxvY2tIZWxwZXIoaXRlbS5jb250ZW50LCBibG9jaywgaXRlbS5zdGFydCwgaXRlbS5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaW5kZXggPSBwcm9jZXNzQ2h1bmtTcGxpdHRlckJsb2NrSGVscGVyKGNvbnRlbnQsIGJsb2NrKTtcbiAgICB9XG4gICAgZ2VuZXJhdGl2ZUFJVHJhY2luZy50cmFjZSh7XG4gICAgICAgIGpvYlR5cGU6IEFJVHJhY2VUeXBlLkluZ2VzdCxcbiAgICAgICAgdHlwZTogQUlJbmdlc3RUcmFjZUJsb2NrLkNodW5rU3BsaXR0ZXIsXG4gICAgICAgIHRyYWNlTGV2ZWw6IEFJVHJhY2VMZXZlbC5EZWJ1ZyxcbiAgICAgICAgam9iSWQsXG4gICAgICAgIGJsb2NrSWQ6IGJsb2NrLmlkLFxuICAgICAgICB0cmFjZUlkOiB2NCgpLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICB0b3RhbENodW5rczogaW5kZXgubGVuZ3RoLFxuICAgICAgICBjaHVua1NpemU6IGJsb2NrLmF0dHJpYnV0ZXMuc2l6ZSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcm9jZXNzTmV4dEJsb2NrKGpvYklkLCBpbmRleCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG5mdW5jdGlvbiBwcm9jZXNzQ2h1bmtTcGxpdHRlckJsb2NrSGVscGVyKGNvbnRlbnQsIGJsb2NrLCBzdGFydEluZGV4LCBsZW5ndGgpIHtcbiAgICBjb25zdCBpbmRleCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkgKz0gYmxvY2suYXR0cmlidXRlcy5zaXplKSB7XG4gICAgICAgIGlmICghc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgc3RhcnRJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXJ0ID0gaSAtIGJsb2NrLmF0dHJpYnV0ZXMub3ZlcmxhcDtcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuICAgICAgICAgICAgc3RhcnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlbmQgPSBpICsgYmxvY2suYXR0cmlidXRlcy5zaXplICsgYmxvY2suYXR0cmlidXRlcy5vdmVybGFwO1xuICAgICAgICBpZiAoZW5kID4gY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGVuZCA9IGNvbnRlbnQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICBsZW5ndGggPSBpICsgYmxvY2suYXR0cmlidXRlcy5zaXplO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA+IGNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXgucHVzaCh7XG4gICAgICAgICAgICBjb250ZW50OiBjb250ZW50LnN1YnN0cmluZyhzdGFydCwgZW5kKSxcbiAgICAgICAgICAgIHN0YXJ0OiBzdGFydEluZGV4LFxuICAgICAgICAgICAgbGVuZ3RoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xufVxuIiwiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEFJSW5nZXN0VHJhY2VCbG9jaywgQUlUcmFjZUxldmVsLCBBSVRyYWNlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEb2N1bWVudFBhcnNlckJsb2NrKGpvYklkLCBjb250ZW50LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgbGV0IG5ld0NvbnRlbnQ7XG4gICAgaWYgKGNvbnRlbnQuZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ3RleHQvJykgfHwgbWF0Y2hFeHRlbnNpb24oY29udGVudC5maWxlLm5hbWUsIHBsYWluVGV4dENvZGVGaWxlcykpIHtcbiAgICAgICAgbmV3Q29udGVudCA9IGF3YWl0IGNvbnRlbnQuZmlsZS50ZXh0KCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbm5lY3RvcnMuZG9jdW1lbnRQYXJzZXJDb25uZWN0b3Iuc3VwcG9ydHMoY29udGVudC5maWxlKSkge1xuICAgICAgICBuZXdDb250ZW50ID0gYXdhaXQgY29ubmVjdG9ycy5kb2N1bWVudFBhcnNlckNvbm5lY3Rvci5wYXJzZShjb250ZW50LmZpbGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCBJbmdlc3QgLSBVbnN1cHBvcnRlZCBmaWxlIHR5cGUgLSAke2NvbnRlbnQuZmlsZS50eXBlfSAtICR7Y29udGVudC5maWxlLm5hbWV9YCk7XG4gICAgfVxuICAgIGdlbmVyYXRpdmVBSVRyYWNpbmcudHJhY2Uoe1xuICAgICAgICBqb2JUeXBlOiBBSVRyYWNlVHlwZS5Jbmdlc3QsXG4gICAgICAgIHR5cGU6IEFJSW5nZXN0VHJhY2VCbG9jay5Eb2N1bWVudFBhcnNlcixcbiAgICAgICAgdHJhY2VMZXZlbDogQUlUcmFjZUxldmVsLkRlYnVnLFxuICAgICAgICBibG9ja0lkOiBibG9jay5pZCxcbiAgICAgICAgam9iSWQsXG4gICAgICAgIHRyYWNlSWQ6IHY0KCksXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIGRvY3VtZW50VHlwZTogY29udGVudC5maWxlLnR5cGUsXG4gICAgICAgIGRvY3VtZW50TmFtZTogY29udGVudC5maWxlLm5hbWUsXG4gICAgICAgIGV4dHJhY3Rpb25NZXRob2Q6ICdPZmZpY2VQYXJzZXInLCAvLyBjb25uZWN0b3JzLmRvY3VtZW50UGFyc2VyQ29ubmVjdG9yLm5hbWUsXG4gICAgfSk7XG4gICAgYXdhaXQgcHJvY2Vzc05leHRCbG9jayhqb2JJZCwgbmV3Q29udGVudCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG5leHBvcnQgY29uc3QgcGxhaW5UZXh0Q29kZUZpbGVzID0gW1xuICAgICcuanMnLCAvLyBKYXZhU2NyaXB0XG4gICAgJy50cycsIC8vIFR5cGVTY3JpcHRcbiAgICAnLnB5JywgLy8gUHl0aG9uXG4gICAgJy5qc29uJywgLy8gSlNPTiAoSmF2YVNjcmlwdCBPYmplY3QgTm90YXRpb24pXG4gICAgJy50eHQnLCAvLyBQbGFpbiBUZXh0XG4gICAgJy5odG1sJywgLy8gSFRNTCAoSHlwZXJ0ZXh0IE1hcmt1cCBMYW5ndWFnZSlcbiAgICAnLmNzcycsIC8vIENTUyAoQ2FzY2FkaW5nIFN0eWxlIFNoZWV0cylcbiAgICAnLnhtbCcsIC8vIFhNTCAoZVh0ZW5zaWJsZSBNYXJrdXAgTGFuZ3VhZ2UpXG4gICAgJy5tZCcsIC8vIE1hcmtkb3duXG4gICAgJy55bWwnLCAvLyBZQU1MIEFpbid0IE1hcmt1cCBMYW5ndWFnZVxuICAgICcueWFtbCcsIC8vIFlBTUwgQWluJ3QgTWFya3VwIExhbmd1YWdlIChhbHRlcm5hdGl2ZSBleHRlbnNpb24pXG4gICAgJy5zaCcsIC8vIFNoZWxsIFNjcmlwdFxuICAgICcuYmF0JywgLy8gQmF0Y2ggU2NyaXB0XG4gICAgJy5pbmknLCAvLyBJbml0aWFsaXphdGlvbiBGaWxlXG4gICAgJy5jZmcnLCAvLyBDb25maWd1cmF0aW9uIEZpbGVcbiAgICAnLmNvbmYnLCAvLyBDb25maWd1cmF0aW9uIEZpbGVcbiAgICAnLnNxbCcsIC8vIFNRTCAoU3RydWN0dXJlZCBRdWVyeSBMYW5ndWFnZSlcbiAgICAnLnJiJywgLy8gUnVieVxuICAgICcucGhwJywgLy8gUEhQIChIeXBlcnRleHQgUHJlcHJvY2Vzc29yKVxuICAgICcuamF2YScsIC8vIEphdmFcbiAgICAnLmMnLCAvLyBDIExhbmd1YWdlXG4gICAgJy5jcHAnLCAvLyBDKysgTGFuZ3VhZ2VcbiAgICAnLmNzJywgLy8gQyMgTGFuZ3VhZ2VcbiAgICAnLnInLCAvLyBSIExhbmd1YWdlXG4gICAgJy5nbycsIC8vIEdvIExhbmd1YWdlXG4gICAgJy5zd2lmdCcsIC8vIFN3aWZ0IExhbmd1YWdlXG4gICAgJy5zY2FsYScsIC8vIFNjYWxhIExhbmd1YWdlXG4gICAgJy5rdCcsIC8vIEtvdGxpbiBMYW5ndWFnZVxuICAgICcucnMnLCAvLyBSdXN0IExhbmd1YWdlXG4gICAgJy5kYXJ0JywgLy8gRGFydCBMYW5ndWFnZVxuICAgICcucGwnLCAvLyBQZXJsXG4gICAgJy5sdWEnLCAvLyBMdWEgU2NyaXB0XG4gICAgJy5ocycsIC8vIEhhc2tlbGxcbiAgICAnLmNsaicsIC8vIENsb2p1cmVcbiAgICAnLmdyb292eScsIC8vIEdyb292eSBTY3JpcHRcbiAgICAnLmVybCcsIC8vIEVybGFuZ1xuICAgICcuZXgnLCAvLyBFbGl4aXIgU2NyaXB0XG4gICAgJy5leHMnLCAvLyBFbGl4aXIgU2NyaXB0XG4gICAgJy52YicsIC8vIFZpc3VhbCBCYXNpY1xuICAgICcucHMxJywgLy8gUG93ZXJTaGVsbCBTY3JpcHRcbiAgICAnLnRjbCcsIC8vIFRjbCBTY3JpcHRcbiAgICAnLm0nLCAvLyBPYmplY3RpdmUtQyBvciBNQVRMQUJcbiAgICAnLnZicycsIC8vIFZCU2NyaXB0XG4gICAgJy5hd2snLCAvLyBBV0sgU2NyaXB0XG4gICAgJy5ya3QnLCAvLyBSYWNrZXRcbiAgICAnLmpsJywgLy8gSnVsaWFcbiAgICAnLmlweW5iJywgLy8gSnVweXRlciBOb3RlYm9vayAoSlNPTi1iYXNlZClcbiAgICAvKiogVGVtcGxhdGVzICoqL1xuICAgICcuanN4JywgLy8gSmF2YVNjcmlwdCBSZWFjdFxuICAgICcudHN4JywgLy8gVHlwZVNjcmlwdCBSZWFjdFxuICAgICcudnVlJywgLy8gVnVlLmpzXG4gICAgJy5lcmInLCAvLyBSdWJ5IEVSQlxuICAgICcuamluamEnLCAvLyBKaW5qYVxuICAgICcuamluamEyJywgLy8gSmluamEyXG4gICAgJy5oYnMnLCAvLyBIYW5kbGViYXJzXG4gICAgJy5oYW5kbGViYXJzJywgLy8gSGFuZGxlYmFyc1xuICAgICcuZWpzJywgLy8gRUpTXG4gICAgJy5wdWcnLCAvLyBQdWdcbiAgICAnLmxpcXVpZCcsIC8vIExpcXVpZFxuICAgICcubXVzdGFjaGUnLCAvLyBNdXN0YWNoZVxuICAgICcudHBsJywgLy8gU21hcnR5XG4gICAgJy50d2lnJywgLy8gVHdpZ1xuICAgICcuajInLCAvLyBKaW5qYVxuICAgICcuZGp0JywgLy8gRGphbmdvXG5dO1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoRXh0ZW5zaW9uKGZpbGUsIHN1cHBvcnRlZEV4dGVuc2lvbnMpIHtcbiAgICByZXR1cm4gc3VwcG9ydGVkRXh0ZW5zaW9ucy5pbmNsdWRlcyhgLiR7ZmlsZS5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpIHx8ICcnfWApO1xufVxuIiwiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEFJSW5nZXN0VHJhY2VCbG9jaywgQUlUcmFjZUxldmVsLCBBSVRyYWNlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NFbnRpdHlFeHRyYWN0b3JCbG9jayhqb2JJZCwgY29udGVudCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGNvbnN0IGVudGl0aWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb250ZW50KSB7XG4gICAgICAgIGF3YWl0IHByb2Nlc3NFbnRpdHlFeHRyYWN0b3JCbG9ja0hlbHBlcihpdGVtLmNvbnRlbnQsIGVudGl0aWVzLCBibG9jaywgY29ubmVjdG9ycy5ubHBMaWJyYXJ5Q29ubmVjdG9yKTtcbiAgICB9XG4gICAgZ2VuZXJhdGl2ZUFJVHJhY2luZy50cmFjZSh7XG4gICAgICAgIGpvYlR5cGU6IEFJVHJhY2VUeXBlLkluZ2VzdCxcbiAgICAgICAgdHlwZTogQUlJbmdlc3RUcmFjZUJsb2NrLkVudGl0eUV4dHJhY3RvcixcbiAgICAgICAgam9iSWQsXG4gICAgICAgIHRyYWNlSWQ6IHY0KCksXG4gICAgICAgIHRyYWNlTGV2ZWw6IEFJVHJhY2VMZXZlbC5EZWJ1ZyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBibG9ja0lkOiBibG9jay5pZCxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQubWFwKChpdGVtKSA9PiBpdGVtLmNvbnRlbnQpLmpvaW4oJyAnKSxcbiAgICAgICAgZW50aXRpZXNFeHRyYWN0ZWQ6IGVudGl0aWVzLFxuICAgICAgICB0b3RhbEVudGl0aWVzOiBlbnRpdGllcy5zaXplLFxuICAgIH0pO1xuICAgIGF3YWl0IHByb2Nlc3NOZXh0QmxvY2soam9iSWQsIGVudGl0aWVzLCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NFbnRpdHlFeHRyYWN0b3JCbG9ja0hlbHBlcihjb250ZW50LCBlbnRpdGllcywgYmxvY2ssIG5scExpYnJhcnlDb25uZWN0b3IpIHtcbiAgICBjb25zdCBuZXdFbnRpdGllcyA9IGF3YWl0IG5scExpYnJhcnlDb25uZWN0b3IuZ2V0RW50aXRpZXMoY29udGVudCwge1xuICAgICAgICBuZXI6IGJsb2NrLmF0dHJpYnV0ZXMubmVyLFxuICAgICAgICBub3VuOiBibG9jay5hdHRyaWJ1dGVzLm5vdW4sXG4gICAgICAgIHByb3BuOiBibG9jay5hdHRyaWJ1dGVzLnByb3BuLFxuICAgICAgICB2ZXJiOiBibG9jay5hdHRyaWJ1dGVzLnZlcmIsXG4gICAgfSk7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgbmV3RW50aXRpZXMpIHtcbiAgICAgICAgZW50aXRpZXMuYWRkKGVudGl0eSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEFJSW5nZXN0VHJhY2VCbG9jaywgQUlUcmFjZUxldmVsLCBBSVRyYWNlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBnZXRJbmNvbWluZ0xpbmtzIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NHcmFwaERhdGFiYXNlQmxvY2soam9iSWQsIGNvbnRlbnQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBpZiAoIWJsb2NrLmFjY3VtdWxhdGVkKSB7XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkID0ge307XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgYmxvY2suYWNjdW11bGF0ZWQuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgYmxvY2suYWNjdW11bGF0ZWQuZW50aXRpZXMgPSBjb250ZW50O1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250ZW50IGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkLnJlbGF0aW9ucyA9IGNvbnRlbnQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBibG9jay5hY2N1bXVsYXRlZC5pbmRleCA9IGNvbnRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBibG9jay5hY2N1bXVsYXRlZC5maWxlID0gY29udGVudDtcbiAgICB9XG4gICAgYmxvY2sudGltZXNDYWxsZWQgPSBibG9jay50aW1lc0NhbGxlZCA/IGJsb2NrLnRpbWVzQ2FsbGVkICsgMSA6IDE7XG4gICAgaWYgKGdldEluY29taW5nTGlua3MoYmxvY2ssIGJsb2NrcykgPiBibG9jay50aW1lc0NhbGxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghYmxvY2suYWNjdW11bGF0ZWQuZW50aXRpZXMgfHwgIWJsb2NrLmFjY3VtdWxhdGVkLmZpbGUgfHwgIWJsb2NrLmFjY3VtdWxhdGVkLmNvbnRlbnQgfHwgIWJsb2NrLmFjY3VtdWxhdGVkLmluZGV4KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR3JhcGggZGF0YWJhc2UgYmxvY2sgaXMgbWlzc2luZyByZXF1aXJlZCBkYXRhJyk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFiYXNlID0gY29ubmVjdG9ycy5jb250ZW50TWVkaWF0b3IuZ2V0R3JhcGhEYXRhYmFzZShibG9jay5pZCk7XG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgYmxvY2suYWNjdW11bGF0ZWQuZW50aXRpZXMpIHtcbiAgICAgICAgbGV0IGVudGl0eUNvbnRlbnQgPSBbXTtcbiAgICAgICAgZW50aXR5Q29udGVudCA9IGJsb2NrLmFjY3VtdWxhdGVkLmluZGV4LmZpbHRlcigoYykgPT4gYy5jb250ZW50LmluY2x1ZGVzKGVudGl0eSkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGF0YWJhc2UuYWRkTm9kZShibG9jay5hY2N1bXVsYXRlZC5maWxlLnBhdGhOYW1lLCBibG9jay5hY2N1bXVsYXRlZC5jb250ZW50LCBlbnRpdHlDb250ZW50LCBlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICB9XG4gICAgaWYgKCFibG9jay5hY2N1bXVsYXRlZC5yZWxhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtzb3VyY2UsIHRhcmdldHNdIG9mIGJsb2NrLmFjY3VtdWxhdGVkLnJlbGF0aW9ucykge1xuICAgICAgICBmb3IgKGNvbnN0IHRhcmdldCBvZiB0YXJnZXRzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGFiYXNlLmFkZEVkZ2Uoc291cmNlLCB0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdlbmVyYXRpdmVBSVRyYWNpbmcudHJhY2Uoe1xuICAgICAgICBqb2JUeXBlOiBBSVRyYWNlVHlwZS5Jbmdlc3QsXG4gICAgICAgIHR5cGU6IEFJSW5nZXN0VHJhY2VCbG9jay5HcmFwaERhdGFiYXNlLFxuICAgICAgICBqb2JJZCxcbiAgICAgICAgYmxvY2tJZDogYmxvY2suaWQsXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHRyYWNlSWQ6IHY0KCksXG4gICAgICAgIHRyYWNlTGV2ZWw6IEFJVHJhY2VMZXZlbC5EZWJ1ZyxcbiAgICAgICAgY29udGVudDogYmxvY2suYWNjdW11bGF0ZWQuY29udGVudCxcbiAgICAgICAgZW50aXRpZXM6IGJsb2NrLmFjY3VtdWxhdGVkLmVudGl0aWVzLFxuICAgICAgICByZWxhdGlvbnM6IGJsb2NrLmFjY3VtdWxhdGVkLnJlbGF0aW9ucyxcbiAgICB9KTtcbn1cbiIsImltcG9ydCB7IHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBHZW5lcmF0aXZlQUlNb2RlbE91dHB1dFR5cGUgfSBmcm9tICdAY3Jld2RsZS93ZWItc2RrLXR5cGVzJztcbmltcG9ydCB7IEFJSW5nZXN0VHJhY2VCbG9jaywgQUlUcmFjZUxldmVsLCBBSVRyYWNlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NNb2RlbEJsb2NrKGpvYklkLCBjb250ZW50LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgY29uc3QgbW9kZWwgPSBjb25uZWN0b3JzLm1vZGVscy5maW5kKChtb2RlbCkgPT4gbW9kZWwuaWQgPT09IGJsb2NrLmlkKTtcbiAgICBpZiAoIW1vZGVsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTW9kZWwgbm90IGZvdW5kJyk7XG4gICAgfVxuICAgIHN3aXRjaCAobW9kZWwub3V0cHV0VHlwZSkge1xuICAgICAgICBjYXNlIEdlbmVyYXRpdmVBSU1vZGVsT3V0cHV0VHlwZS5UZXh0OlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTW9kZWwgb3V0cHV0IHR5cGUgaXMgdGV4dCBidXQgaW5wdXQgaXMgbm90IHRleHQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NNb2RlbEJsb2NrVGV4dChqb2JJZCwgY29udGVudCwgbW9kZWwsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR2VuZXJhdGl2ZUFJTW9kZWxPdXRwdXRUeXBlLlZlY3RvcjpcbiAgICAgICAgICAgIGlmICghKGNvbnRlbnQgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZGVsIG91dHB1dCB0eXBlIGlzIHZlY3RvciBidXQgaW5wdXQgaXMgbm90IGFuIGluZGV4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzTW9kZWxCbG9ja1ZlY3Rvcihqb2JJZCwgY29udGVudCwgbW9kZWwsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01vZGVsQmxvY2tUZXh0KGpvYklkLCBjb250ZW50LCBtb2RlbCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGxldCByZXN1bHRzO1xuICAgIGNvbnN0IGNvbm5lY3RvciA9IGNvbm5lY3RvcnMuZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9ycy5maW5kKChjb25uZWN0b3IpID0+IGNvbm5lY3Rvci5nZXRFbmdpbmVUeXBlKCkgPT09IG1vZGVsLmVuZ2luZVR5cGUpO1xuICAgIGlmICghY29ubmVjdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29ubmVjdG9yIGZvdW5kIGZvciBtb2RlbCcpO1xuICAgIH1cbiAgICByZXN1bHRzID0gYXdhaXQgcHJvY2Vzc01vZGVsQmxvY2tUZXh0SGVscGVyKGNvbnRlbnQsIGNvbm5lY3RvciwgbW9kZWwpO1xuICAgIGdlbmVyYXRpdmVBSVRyYWNpbmcudHJhY2Uoe1xuICAgICAgICBqb2JUeXBlOiBBSVRyYWNlVHlwZS5Jbmdlc3QsXG4gICAgICAgIHR5cGU6IEFJSW5nZXN0VHJhY2VCbG9jay5Nb2RlbCxcbiAgICAgICAgam9iSWQsXG4gICAgICAgIGJsb2NrSWQ6IGJsb2NrLmlkLFxuICAgICAgICB0cmFjZUlkOiB2NCgpLFxuICAgICAgICB0cmFjZUxldmVsOiBBSVRyYWNlTGV2ZWwuRGVidWcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIG1vZGVsTmFtZTogbW9kZWwuaWQsXG4gICAgICAgIGlucHV0VHlwZTogbW9kZWwuaW5wdXRUeXBlLFxuICAgICAgICBvdXRwdXRUeXBlOiBtb2RlbC5vdXRwdXRUeXBlLFxuICAgICAgICBjb250ZW50LFxuICAgICAgICByZXN1bHRzLFxuICAgIH0pO1xuICAgIGF3YWl0IHByb2Nlc3NOZXh0QmxvY2soam9iSWQsIHJlc3VsdHMsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xufVxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01vZGVsQmxvY2tUZXh0SGVscGVyKGNvbnRlbnQsIGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvciwgbW9kZWwpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3IucHJvY2Vzc0pvYih7XG4gICAgICAgIHByb21wdDogY29udGVudCxcbiAgICB9LCB7XG4gICAgICAgIG1vZGVsLFxuICAgIH0pO1xuICAgIGlmIChyZXN1bHQub3V0cHV0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlbCBvdXRwdXQgaXMgYW4gYXJyYXkgYnV0IGV4cGVjdGVkIHRleHQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5vdXRwdXQ7XG59XG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzTW9kZWxCbG9ja1ZlY3Rvcihqb2JJZCwgY29udGVudCwgbW9kZWwsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBjb25zdCB2ZWN0b3JzID0gW107XG4gICAgY29uc3QgY29ubmVjdG9yID0gY29ubmVjdG9ycy5nZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzLmZpbmQoKGNvbm5lY3RvcikgPT4gY29ubmVjdG9yLmdldEVuZ2luZVR5cGUoKSA9PT0gbW9kZWwuZW5naW5lVHlwZSk7XG4gICAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb25uZWN0b3IgZm91bmQgZm9yIG1vZGVsJyk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb250ZW50KSB7XG4gICAgICAgIHZlY3RvcnMucHVzaChhd2FpdCBwcm9jZXNzTW9kZWxCbG9ja1ZlY3RvckhlbHBlcihpdGVtLCBjb25uZWN0b3IsIG1vZGVsKSk7XG4gICAgfVxuICAgIGF3YWl0IHByb2Nlc3NOZXh0QmxvY2soam9iSWQsIHZlY3RvcnMsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xufVxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01vZGVsQmxvY2tWZWN0b3JIZWxwZXIoaXRlbSwgZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9yLCBtb2RlbCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3Rvci5wcm9jZXNzSm9iKHtcbiAgICAgICAgcHJvbXB0OiBpdGVtLmNvbnRlbnQsXG4gICAgfSwge1xuICAgICAgICBtb2RlbCxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0Lm91dHB1dDtcbn1cbiIsImltcG9ydCB7IERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TZXJ2aWNlcy9Xb3JrZmxvdyc7XG5pbXBvcnQgeyBwcm9jZXNzQ2h1bmtTcGxpdHRlckJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9DaHVua1NwbGl0dGVyJztcbmltcG9ydCB7IHByb2Nlc3NEb2N1bWVudFBhcnNlckJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9Eb2N1bWVudFBhcnNlcic7XG5pbXBvcnQgeyBwcm9jZXNzRW50aXR5RXh0cmFjdG9yQmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L0VudGl0eUV4dHJhY3Rvcic7XG5pbXBvcnQgeyBwcm9jZXNzR3JhcGhEYXRhYmFzZUJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9HcmFwaERhdGFiYXNlJztcbmltcG9ydCB7IHByb2Nlc3NNb2RlbEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9Nb2RlbCc7XG5pbXBvcnQgeyBwcm9jZXNzUmVsYXRpb25FeHRyYWN0b3JCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvUmVsYXRpb25FeHRyYWN0b3InO1xuaW1wb3J0IHsgcHJvY2Vzc1NlbnRlbmNlU3BsaXR0ZXJCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvU2VudGVuY2VTcGxpdHRlcic7XG5pbXBvcnQgeyBwcm9jZXNzVmVjdG9yRGF0YWJhc2VCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9Jbmdlc3QvVmVjdG9yRGF0YWJhc2UnO1xuaW1wb3J0IHsgcHJvY2Vzc1dvcmRTcGxpdHRlckJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9Xb3JkU3BsaXR0ZXInO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NOZXh0QmxvY2soam9iSWQsIGNvbnRlbnQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBmb3IgKGNvbnN0IGxpbmsgb2YgYmxvY2subGlua3MgfHwgW10pIHtcbiAgICAgICAgY29uc3QgbmV3QmxvY2sgPSBibG9ja3MuZmluZCgoYikgPT4gYi51aWQgPT09IGxpbmsudWlkKTtcbiAgICAgICAgaWYgKCFuZXdCbG9jaykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChuZXdCbG9jay50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLkNodW5rU3BsaXR0ZXI6XG4gICAgICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc0NodW5rU3BsaXR0ZXJCbG9jayhqb2JJZCwgY29udGVudCwgbmV3QmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLkRvY3VtZW50UGFyc2VyOlxuICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NEb2N1bWVudFBhcnNlckJsb2NrKGpvYklkLCBjb250ZW50LCBuZXdCbG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUuRW50aXR5RXh0cmFjdG9yOlxuICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NFbnRpdHlFeHRyYWN0b3JCbG9jayhqb2JJZCwgY29udGVudCwgbmV3QmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLkdyYXBoRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgcHJvY2Vzc0dyYXBoRGF0YWJhc2VCbG9jayhqb2JJZCwgY29udGVudCwgbmV3QmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLk1vZGVsOlxuICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NNb2RlbEJsb2NrKGpvYklkLCBjb250ZW50LCBuZXdCbG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUuUmVsYXRpb25FeHRyYWN0b3I6XG4gICAgICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc1JlbGF0aW9uRXh0cmFjdG9yQmxvY2soam9iSWQsIGNvbnRlbnQsIG5ld0Jsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZS5TZW50ZW5jZVNwbGl0dGVyOlxuICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NTZW50ZW5jZVNwbGl0dGVyQmxvY2soam9iSWQsIGNvbnRlbnQsIG5ld0Jsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZS5WZWN0b3JEYXRhYmFzZTpcbiAgICAgICAgICAgICAgICBwcm9jZXNzVmVjdG9yRGF0YWJhc2VCbG9jayhqb2JJZCwgY29udGVudCwgbmV3QmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLldvcmRTcGxpdHRlcjpcbiAgICAgICAgICAgICAgICBhd2FpdCBwcm9jZXNzV29yZFNwbGl0dGVyQmxvY2soam9iSWQsIGNvbnRlbnQsIG5ld0Jsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEluY29taW5nTGlua3MoYmxvY2ssIGJsb2Nrcykge1xuICAgIHJldHVybiBibG9ja3MuZmlsdGVyKChiKSA9PiBiLmxpbmtzPy5zb21lKChsKSA9PiBsLnVpZCA9PT0gYmxvY2sudWlkKSkubGVuZ3RoO1xufVxuIiwiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEFJSW5nZXN0VHJhY2VCbG9jaywgQUlUcmFjZUxldmVsLCBBSVRyYWNlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBnZXRJbmNvbWluZ0xpbmtzLCBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NSZWxhdGlvbkV4dHJhY3RvckJsb2NrKGpvYklkLCBjb250ZW50LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgaWYgKCFibG9jay5hY2N1bXVsYXRlZCkge1xuICAgICAgICBibG9jay5hY2N1bXVsYXRlZCA9IHt9O1xuICAgIH1cbiAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkLmluZGV4ID0gY29udGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkLmVudGl0aWVzID0gY29udGVudDtcbiAgICB9XG4gICAgYmxvY2sudGltZXNDYWxsZWQgPSBibG9jay50aW1lc0NhbGxlZCA/IGJsb2NrLnRpbWVzQ2FsbGVkICsgMSA6IDE7XG4gICAgaWYgKGdldEluY29taW5nTGlua3MoYmxvY2ssIGJsb2NrcykgPiBibG9jay50aW1lc0NhbGxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghYmxvY2suYWNjdW11bGF0ZWQuaW5kZXggfHwgIWJsb2NrLmFjY3VtdWxhdGVkLmVudGl0aWVzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmVsYXRpb24gZXh0cmFjdG9yIGJsb2NrIGlzIG1pc3NpbmcgcmVxdWlyZWQgZGF0YScpO1xuICAgIH1cbiAgICBjb25zdCByZWxhdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGJsb2NrLmFjY3VtdWxhdGVkLmluZGV4KSB7XG4gICAgICAgIHByb2Nlc3NSZWxhdGlvbkV4dHJhY3RvckJsb2NrSGVscGVyKGl0ZW0uY29udGVudCwgYmxvY2suYWNjdW11bGF0ZWQuZW50aXRpZXMsIHJlbGF0aW9ucyk7XG4gICAgfVxuICAgIGdlbmVyYXRpdmVBSVRyYWNpbmcudHJhY2Uoe1xuICAgICAgICBqb2JUeXBlOiBBSVRyYWNlVHlwZS5Jbmdlc3QsXG4gICAgICAgIHR5cGU6IEFJSW5nZXN0VHJhY2VCbG9jay5SZWxhdGlvbkV4dHJhY3RvcixcbiAgICAgICAgam9iSWQsXG4gICAgICAgIHRyYWNlSWQ6IHY0KCksXG4gICAgICAgIHRyYWNlTGV2ZWw6IEFJVHJhY2VMZXZlbC5EZWJ1ZyxcbiAgICAgICAgYmxvY2tJZDogYmxvY2suaWQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIGNvbnRlbnQ6IGJsb2NrLmFjY3VtdWxhdGVkLmluZGV4Lm1hcCgoaXRlbSkgPT4gaXRlbS5jb250ZW50KS5qb2luKCcgJyksXG4gICAgICAgIGVudGl0aWVzOiBibG9jay5hY2N1bXVsYXRlZC5lbnRpdGllcyxcbiAgICAgICAgcmVsYXRpb25zOiByZWxhdGlvbnMsXG4gICAgICAgIHRvdGFsUmVsYXRpb25zOiByZWxhdGlvbnMuc2l6ZSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcm9jZXNzTmV4dEJsb2NrKGpvYklkLCByZWxhdGlvbnMsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xufVxuZnVuY3Rpb24gcHJvY2Vzc1JlbGF0aW9uRXh0cmFjdG9yQmxvY2tIZWxwZXIoY29udGVudCwgZW50aXRpZXMsIHJlbGF0aW9ucykge1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG4gICAgICAgIGZvciAoY29uc3Qgb3RoZXJFbnRpdHkgb2YgZW50aXRpZXMpIHtcbiAgICAgICAgICAgIGlmIChlbnRpdHkgPT09IG90aGVyRW50aXR5KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlbnRpdHlJbmRleCA9IGNvbnRlbnQuaW5kZXhPZihlbnRpdHkpO1xuICAgICAgICAgICAgY29uc3Qgb3RoZXJFbnRpdHlJbmRleCA9IGNvbnRlbnQuaW5kZXhPZihvdGhlckVudGl0eSk7XG4gICAgICAgICAgICBpZiAoZW50aXR5SW5kZXggPT09IC0xIHx8IG90aGVyRW50aXR5SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlbGF0aW9ucy5oYXMoZW50aXR5KSkge1xuICAgICAgICAgICAgICAgIHJlbGF0aW9ucy5zZXQoZW50aXR5LCBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVsYXRpb25zLmdldChlbnRpdHkpLmFkZChvdGhlckVudGl0eSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQUlJbmdlc3RUcmFjZUJsb2NrLCBBSVRyYWNlTGV2ZWwsIEFJVHJhY2VUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9BSVRyYWNlL1RyYWNlJztcbmltcG9ydCB7IHByb2Nlc3NOZXh0QmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L05leHRCbG9jayc7XG5pbXBvcnQgZ2VuZXJhdGl2ZUFJVHJhY2luZyBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvVHJhY2UvR2VuZXJhdGl2ZUFJVHJhY2luZyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1NlbnRlbmNlU3BsaXR0ZXJCbG9jayhqb2JJZCwgY29udGVudCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGxldCBpbmRleCA9IFtdO1xuICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlbnRlbmNlcyA9IGF3YWl0IGNvbm5lY3RvcnMubmxwTGlicmFyeUNvbm5lY3Rvci5nZXRTZW50ZW5jZXMoaXRlbS5jb250ZW50KTtcbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXguY29uY2F0KHNlbnRlbmNlcy5tYXAoKHNlbnRlbmNlKSA9PiAoe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHNlbnRlbmNlLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiBpdGVtLnN0YXJ0LFxuICAgICAgICAgICAgICAgIGxlbmd0aDogaXRlbS5sZW5ndGgsXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBzZW50ZW5jZXMgPSBhd2FpdCBjb25uZWN0b3JzLm5scExpYnJhcnlDb25uZWN0b3IuZ2V0U2VudGVuY2VzKGNvbnRlbnQpO1xuICAgICAgICBpbmRleCA9IHNlbnRlbmNlcy5tYXAoKHNlbnRlbmNlKSA9PiAoe1xuICAgICAgICAgICAgY29udGVudDogc2VudGVuY2UsXG4gICAgICAgICAgICBzdGFydDogY29udGVudC5pbmRleE9mKHNlbnRlbmNlKSxcbiAgICAgICAgICAgIGxlbmd0aDogc2VudGVuY2UubGVuZ3RoLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdlbmVyYXRpdmVBSVRyYWNpbmcudHJhY2Uoe1xuICAgICAgICBqb2JUeXBlOiBBSVRyYWNlVHlwZS5Jbmdlc3QsXG4gICAgICAgIHR5cGU6IEFJSW5nZXN0VHJhY2VCbG9jay5TZW50ZW5jZVNwbGl0dGVyLFxuICAgICAgICBqb2JJZCxcbiAgICAgICAgdHJhY2VJZDogdjQoKSxcbiAgICAgICAgdHJhY2VMZXZlbDogQUlUcmFjZUxldmVsLkRlYnVnLFxuICAgICAgICBibG9ja0lkOiBibG9jay5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgdG90YWxTZW50ZW5jZXM6IGluZGV4Lmxlbmd0aCxcbiAgICAgICAgYXZlcmFnZVNlbnRlbmNlTGVuZ3RoOiBpbmRleC5yZWR1Y2UoKGFjYywgc2VudGVuY2UpID0+IGFjYyArIHNlbnRlbmNlLmxlbmd0aCwgMCkgLyBpbmRleC5sZW5ndGgsXG4gICAgfSk7XG4gICAgYXdhaXQgcHJvY2Vzc05leHRCbG9jayhqb2JJZCwgaW5kZXgsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xufVxuIiwiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEFJSW5nZXN0VHJhY2VCbG9jaywgQUlUcmFjZUxldmVsLCBBSVRyYWNlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBnZXRJbmNvbWluZ0xpbmtzIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuLy8gTmVlZCB0byBhY2N1bXVsYXRlXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc1ZlY3RvckRhdGFiYXNlQmxvY2soam9iSWQsIGNvbnRlbnQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBpZiAoIWJsb2NrLmFjY3VtdWxhdGVkKSB7XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkID0ge307XG4gICAgfVxuICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgaWYgKGlzVmVjdG9yQXJyYXkoY29udGVudCkpIHtcbiAgICAgICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkLnZlY3RvcnMgPSBjb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYmxvY2suYWNjdW11bGF0ZWQuaW5kZXggPSBjb250ZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICBibG9jay5hY2N1bXVsYXRlZC5jb250ZW50ID0gY29udGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkLmZpbGUgPSBjb250ZW50O1xuICAgIH1cbiAgICBibG9jay50aW1lc0NhbGxlZCA9IGJsb2NrLnRpbWVzQ2FsbGVkID8gYmxvY2sudGltZXNDYWxsZWQgKyAxIDogMTtcbiAgICBpZiAoZ2V0SW5jb21pbmdMaW5rcyhibG9jaywgYmxvY2tzKSA+IGJsb2NrLnRpbWVzQ2FsbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFibG9jay5hY2N1bXVsYXRlZC5jb250ZW50IHx8ICFibG9jay5hY2N1bXVsYXRlZC5pbmRleCB8fCAhYmxvY2suYWNjdW11bGF0ZWQudmVjdG9ycyB8fCAhYmxvY2suYWNjdW11bGF0ZWQuZmlsZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZlY3RvciBkYXRhYmFzZSBibG9jayBpcyBtaXNzaW5nIHJlcXVpcmVkIGRhdGEnKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YWJhc2UgPSBjb25uZWN0b3JzLmNvbnRlbnRNZWRpYXRvci5nZXRWZWN0b3JEYXRhYmFzZShibG9jay5pZCk7XG4gICAgZGF0YWJhc2UuaW5zZXJ0KGJsb2NrLmFjY3VtdWxhdGVkLmZpbGUucGF0aE5hbWUsIGJsb2NrLmFjY3VtdWxhdGVkLmNvbnRlbnQsIGJsb2NrLmFjY3VtdWxhdGVkLmluZGV4LCBibG9jay5hY2N1bXVsYXRlZC52ZWN0b3JzKTtcbiAgICBnZW5lcmF0aXZlQUlUcmFjaW5nLnRyYWNlKHtcbiAgICAgICAgam9iVHlwZTogQUlUcmFjZVR5cGUuSW5nZXN0LFxuICAgICAgICB0eXBlOiBBSUluZ2VzdFRyYWNlQmxvY2suVmVjdG9yRGF0YWJhc2UsXG4gICAgICAgIGpvYklkLFxuICAgICAgICBibG9ja0lkOiBibG9jay5pZCxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgdHJhY2VJZDogdjQoKSxcbiAgICAgICAgdHJhY2VMZXZlbDogQUlUcmFjZUxldmVsLkRlYnVnLFxuICAgICAgICBjb250ZW50OiBibG9jay5hY2N1bXVsYXRlZC5jb250ZW50LFxuICAgICAgICB2ZWN0b3JzOiBibG9jay5hY2N1bXVsYXRlZC52ZWN0b3JzLFxuICAgICAgICBmaWxlUGF0aE5hbWU6IGJsb2NrLmFjY3VtdWxhdGVkLmZpbGUucGF0aE5hbWUsXG4gICAgfSk7XG59XG5mdW5jdGlvbiBpc1ZlY3RvckFycmF5KGFycikge1xuICAgIHJldHVybiBhcnJbMF0gaW5zdGFuY2VvZiBBcnJheSAmJiB0eXBlb2YgYXJyWzBdPy5bMF0gPT09ICdudW1iZXInO1xufVxuIiwiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEFJSW5nZXN0VHJhY2VCbG9jaywgQUlUcmFjZUxldmVsLCBBSVRyYWNlVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL0luZ2VzdC9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NXb3JkU3BsaXR0ZXJCbG9jayhqb2JJZCwgY29udGVudCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGxldCBpbmRleCA9IFtdO1xuICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXguY29uY2F0KHByb2Nlc3NXb3JkU3BsaXR0ZXJCbG9ja0hlbHBlcihpdGVtLmNvbnRlbnQsIGJsb2NrLCBpdGVtLnN0YXJ0LCBpdGVtLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpbmRleCA9IHByb2Nlc3NXb3JkU3BsaXR0ZXJCbG9ja0hlbHBlcihjb250ZW50LCBibG9jayk7XG4gICAgfVxuICAgIGdlbmVyYXRpdmVBSVRyYWNpbmcudHJhY2Uoe1xuICAgICAgICBqb2JUeXBlOiBBSVRyYWNlVHlwZS5Jbmdlc3QsXG4gICAgICAgIHR5cGU6IEFJSW5nZXN0VHJhY2VCbG9jay5Xb3JkU3BsaXR0ZXIsXG4gICAgICAgIGpvYklkLFxuICAgICAgICB0cmFjZUlkOiB2NCgpLFxuICAgICAgICB0cmFjZUxldmVsOiBBSVRyYWNlTGV2ZWwuRGVidWcsXG4gICAgICAgIGJsb2NrSWQ6IGJsb2NrLmlkLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICB0b3RhbENodW5rczogaW5kZXgubGVuZ3RoLFxuICAgICAgICBhdmVyYWdlQ2h1bmtMZW5ndGg6IGluZGV4LnJlZHVjZSgoYWNjLCBzZW50ZW5jZSkgPT4gYWNjICsgc2VudGVuY2UubGVuZ3RoLCAwKSAvIGluZGV4Lmxlbmd0aCxcbiAgICB9KTtcbiAgICBhd2FpdCBwcm9jZXNzTmV4dEJsb2NrKGpvYklkLCBpbmRleCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG5mdW5jdGlvbiBwcm9jZXNzV29yZFNwbGl0dGVyQmxvY2tIZWxwZXIoY29udGVudCwgYmxvY2ssIHN0YXJ0LCBsZW5ndGgpIHtcbiAgICBjb25zdCBpbmRleCA9IFtdO1xuICAgIGNvbnN0IHdvcmRzID0gY29udGVudC5zcGxpdCgnICcpO1xuICAgIGxldCBjaHVuayA9ICcnO1xuICAgIGxldCBwcmV2aW91c0luZGV4ID0gMDtcbiAgICBsZXQgY3VycmVudEluZGV4ID0gMDtcbiAgICBsZXQgc3RhcnRJbmRleCA9IDA7XG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgIGlmIChjaHVuay5sZW5ndGggKyB3b3JkLmxlbmd0aCA+IGJsb2NrLmF0dHJpYnV0ZXMuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IGogPSBwcmV2aW91c0luZGV4O1xuICAgICAgICAgICAgbGV0IHByZUNodW5rID0gJyc7XG4gICAgICAgICAgICB3aGlsZSAoaiA+PSAwICYmIHByZUNodW5rLmxlbmd0aCArIHdvcmRzW2pdLmxlbmd0aCA8IGJsb2NrLmF0dHJpYnV0ZXMub3ZlcmxhcCkge1xuICAgICAgICAgICAgICAgIHByZUNodW5rID0gd29yZHNbal0gKyAnICcgKyBwcmVDaHVuaztcbiAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgayA9IGN1cnJlbnRJbmRleDtcbiAgICAgICAgICAgIGxldCBwb3N0Q2h1bmsgPSAnJztcbiAgICAgICAgICAgIHdoaWxlIChrIDwgd29yZHMubGVuZ3RoICYmIHBvc3RDaHVuay5sZW5ndGggKyB3b3Jkc1trXS5sZW5ndGggPCBibG9jay5hdHRyaWJ1dGVzLm92ZXJsYXApIHtcbiAgICAgICAgICAgICAgICBwb3N0Q2h1bmsgKz0gd29yZHNba10gKyAnICc7XG4gICAgICAgICAgICAgICAgaysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2h1bmsgPSBwcmVDaHVuayArIGNodW5rICsgcG9zdENodW5rO1xuICAgICAgICAgICAgaW5kZXgucHVzaCh7XG4gICAgICAgICAgICAgICAgY29udGVudDogY2h1bmsudHJpbSgpLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCA/PyBzdGFydEluZGV4LFxuICAgICAgICAgICAgICAgIGxlbmd0aDogbGVuZ3RoID8/IGNodW5rLmxlbmd0aCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2h1bmsgPSAnJztcbiAgICAgICAgICAgIHByZXZpb3VzSW5kZXggPSBjdXJyZW50SW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgY2h1bmsgKz0gd29yZCArICcgJztcbiAgICAgICAgY3VycmVudEluZGV4Kys7XG4gICAgICAgIHN0YXJ0SW5kZXggKz0gd29yZC5sZW5ndGggKyAxO1xuICAgIH1cbiAgICBpZiAoY2h1bmsubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgaiA9IHByZXZpb3VzSW5kZXg7XG4gICAgICAgIGxldCBwcmVDaHVuayA9ICcnO1xuICAgICAgICB3aGlsZSAoaiA+PSAwICYmIHByZUNodW5rLmxlbmd0aCArIHdvcmRzW2pdLmxlbmd0aCA8IGJsb2NrLmF0dHJpYnV0ZXMub3ZlcmxhcCkge1xuICAgICAgICAgICAgcHJlQ2h1bmsgPSB3b3Jkc1tqXSArICcgJyArIHByZUNodW5rO1xuICAgICAgICAgICAgai0tO1xuICAgICAgICB9XG4gICAgICAgIGNodW5rID0gcHJlQ2h1bmsgKyBjaHVuaztcbiAgICAgICAgaW5kZXgucHVzaCh7XG4gICAgICAgICAgICBjb250ZW50OiBjaHVuay50cmltKCksXG4gICAgICAgICAgICBzdGFydDogc3RhcnQgPz8gc3RhcnRJbmRleCxcbiAgICAgICAgICAgIGxlbmd0aDogbGVuZ3RoID8/IGNodW5rLmxlbmd0aCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBpbmRleDtcbn1cbiIsImltcG9ydCB7IHByb2Nlc3NOZXh0QmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvSW5nZXN0L05leHRCbG9jayc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0luZ2VzdChqb2JJZCwgcGF0aE5hbWUsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBidWNrZXQgPSBjb25uZWN0b3JzLmNvbnRlbnRNZWRpYXRvci5nZXRPYmplY3RTdG9yZUJ1Y2tldChibG9jay5pZCk7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBidWNrZXQuZ2V0KHBhdGhOYW1lKTtcbiAgICAgICAgYXdhaXQgcHJvY2Vzc05leHRCbG9jayhqb2JJZCwgeyBmaWxlLCBwYXRoTmFtZSB9LCBibG9jaywgc3RydWN0dXJlZENsb25lKGJsb2NrcyksIGNvbm5lY3RvcnMpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBpbmdlc3QnLCBlcnJvcik7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IEFJVHJhY2VUeXBlLCBBSVRyYWNlTGV2ZWwsIEFJUmV0cmlldmVUcmFjZUJsb2NrIH0gZnJvbSAnaW50ZXJmYWNlcy9BSVRyYWNlL1RyYWNlJztcbmltcG9ydCB7IHByb2Nlc3NOZXh0QmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvUmV0cmlldmUvTmV4dEJsb2NrJztcbmltcG9ydCBnZW5lcmF0aXZlQUlUcmFjaW5nIGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9UcmFjZS9HZW5lcmF0aXZlQUlUcmFjaW5nJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRW50aXR5RXh0cmFjdG9yQmxvY2soam9iSWQsIGNvbnRlbnQsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGNvbnN0IGVudGl0aWVzID0gbmV3IFNldCgpO1xuICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjb250ZW50KSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzRW50aXR5RXh0cmFjdG9yQmxvY2tIZWxwZXIoY2h1bmsuY29udGVudCwgYmxvY2ssIGVudGl0aWVzLCBjb25uZWN0b3JzLm5scExpYnJhcnlDb25uZWN0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhd2FpdCBwcm9jZXNzRW50aXR5RXh0cmFjdG9yQmxvY2tIZWxwZXIoY29udGVudCwgYmxvY2ssIGVudGl0aWVzLCBjb25uZWN0b3JzLm5scExpYnJhcnlDb25uZWN0b3IpO1xuICAgIH1cbiAgICBnZW5lcmF0aXZlQUlUcmFjaW5nLnRyYWNlKHtcbiAgICAgICAgam9iVHlwZTogQUlUcmFjZVR5cGUuUmV0cmlldmUsXG4gICAgICAgIHR5cGU6IEFJUmV0cmlldmVUcmFjZUJsb2NrLkVudGl0eUV4dHJhY3RvcixcbiAgICAgICAgam9iSWQsXG4gICAgICAgIHRyYWNlSWQ6IHY0KCksXG4gICAgICAgIHRyYWNlTGV2ZWw6IEFJVHJhY2VMZXZlbC5EZWJ1ZyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBibG9ja0lkOiBibG9jay5pZCxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGVudGl0aWVzRXh0cmFjdGVkOiBlbnRpdGllcyxcbiAgICAgICAgdG90YWxFbnRpdGllczogZW50aXRpZXMuc2l6ZSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcm9jZXNzTmV4dEJsb2NrKGpvYklkLCBlbnRpdGllcywgcmVzdWx0LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRW50aXR5RXh0cmFjdG9yQmxvY2tIZWxwZXIoY29udGVudCwgYmxvY2ssIGVudGl0aWVzLCBubHBMaWJyYXJ5Q29ubmVjdG9yKSB7XG4gICAgY29uc3QgbmV3RW50aXRpZXMgPSBhd2FpdCBubHBMaWJyYXJ5Q29ubmVjdG9yLmdldEVudGl0aWVzKGNvbnRlbnQsIHtcbiAgICAgICAgbmVyOiBibG9jay5hdHRyaWJ1dGVzLm5lcixcbiAgICAgICAgbm91bjogYmxvY2suYXR0cmlidXRlcy5ub3VuLFxuICAgICAgICBwcm9wbjogYmxvY2suYXR0cmlidXRlcy5wcm9wbixcbiAgICAgICAgdmVyYjogYmxvY2suYXR0cmlidXRlcy52ZXJiLFxuICAgIH0pO1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIG5ld0VudGl0aWVzKSB7XG4gICAgICAgIGVudGl0aWVzLmFkZChlbnRpdHkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgeyBBSVRyYWNlVHlwZSwgQUlSZXRyaWV2ZVRyYWNlQmxvY2ssIEFJVHJhY2VMZXZlbCB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBnZXRJbmNvbWluZ0xpbmtzLCBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1JldHJpZXZlL05leHRCbG9jayc7XG5pbXBvcnQgZ2VuZXJhdGl2ZUFJVHJhY2luZyBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvVHJhY2UvR2VuZXJhdGl2ZUFJVHJhY2luZyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0dyYXBoRGF0YWJhc2VCbG9jayhqb2JJZCwgY29udGVudCwgcmVzdWx0LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgaWYgKCFibG9jay5hY2N1bXVsYXRlZCkge1xuICAgICAgICBibG9jay5hY2N1bXVsYXRlZCA9IHt9O1xuICAgIH1cbiAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGlmICghYmxvY2suYWNjdW11bGF0ZWQucmVzdWx0cykge1xuICAgICAgICAgICAgYmxvY2suYWNjdW11bGF0ZWQucmVzdWx0cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkLnJlc3VsdHMucHVzaCguLi5jb250ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29udGVudCBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICBibG9jay5hY2N1bXVsYXRlZC5lbnRpdGllcyA9IGNvbnRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBibG9jay5hY2N1bXVsYXRlZC5wcm9tcHQgPSBjb250ZW50O1xuICAgIH1cbiAgICBibG9jay50aW1lc0NhbGxlZCA9IGJsb2NrLnRpbWVzQ2FsbGVkID8gYmxvY2sudGltZXNDYWxsZWQgKyAxIDogMTtcbiAgICBpZiAoZ2V0SW5jb21pbmdMaW5rcyhibG9jaywgYmxvY2tzKSA+IGJsb2NrLnRpbWVzQ2FsbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCghYmxvY2suYWNjdW11bGF0ZWQucHJvbXB0ICYmICFibG9jay5hY2N1bXVsYXRlZC5yZXN1bHRzKSB8fCAhYmxvY2suYWNjdW11bGF0ZWQuZW50aXRpZXMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHcmFwaCBkYXRhYmFzZSBibG9jayBpcyBtaXNzaW5nIHJlcXVpcmVkIGRhdGEnKTtcbiAgICB9XG4gICAgY29uc3QgZGF0YWJhc2UgPSBjb25uZWN0b3JzLmNvbnRlbnRNZWRpYXRvci5nZXRHcmFwaERhdGFiYXNlKGJsb2NrLmlkKTtcbiAgICBjb25zdCBuZXdDb250ZW50ID0gZGF0YWJhc2UuZ2V0Q29udGVudChBcnJheS5mcm9tKGJsb2NrLmFjY3VtdWxhdGVkLmVudGl0aWVzKSwgYmxvY2suYXR0cmlidXRlcy5tYXhEZXB0aCwgYmxvY2suYXR0cmlidXRlcy5jb250ZW50U2l6ZSk7XG4gICAgbGV0IHNlYXJjaFJlc3VsdCA9IFtdO1xuICAgIGZvciAoY29uc3QgcGF0aE5hbWUgaW4gbmV3Q29udGVudCkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gbmV3Q29udGVudFtwYXRoTmFtZV07XG4gICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgIGxldCByZWxldmFuY2UgPSAwO1xuICAgICAgICAgICAgaWYgKGJsb2NrLmFjY3VtdWxhdGVkLnByb21wdCkge1xuICAgICAgICAgICAgICAgIHJlbGV2YW5jZSA9IGF3YWl0IGNvbm5lY3RvcnMubmxwTGlicmFyeUNvbm5lY3Rvci5nZXRTaW1pbGFyaXR5KGJsb2NrLmFjY3VtdWxhdGVkLnByb21wdCwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChibG9jay5hY2N1bXVsYXRlZC5yZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGJsb2NrLmFjY3VtdWxhdGVkLnJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsZXZhbmNlID0gTWF0aC5tYXgocmVsZXZhbmNlLCBhd2FpdCBjb25uZWN0b3JzLm5scExpYnJhcnlDb25uZWN0b3IuZ2V0U2ltaWxhcml0eShpdGVtLmNvbnRlbnQsIHJlc3VsdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWxldmFuY2UgPCBibG9jay5hdHRyaWJ1dGVzLm1pblJlbGV2YW5jZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VhcmNoUmVzdWx0LnB1c2goeyBjb250ZW50OiByZXN1bHQsIHJlbGV2YW5jZSwgcGF0aE5hbWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VhcmNoUmVzdWx0ID0gc2VhcmNoUmVzdWx0LnNvcnQoKGEsIGIpID0+IGIucmVsZXZhbmNlIC0gYS5yZWxldmFuY2UpLnNsaWNlKDAsIGJsb2NrLmF0dHJpYnV0ZXMudG9wSyk7XG4gICAgZ2VuZXJhdGl2ZUFJVHJhY2luZy50cmFjZSh7XG4gICAgICAgIGpvYlR5cGU6IEFJVHJhY2VUeXBlLlJldHJpZXZlLFxuICAgICAgICB0eXBlOiBBSVJldHJpZXZlVHJhY2VCbG9jay5HcmFwaFNlYXJjaCxcbiAgICAgICAgam9iSWQsXG4gICAgICAgIHRyYWNlSWQ6IHY0KCksXG4gICAgICAgIHRyYWNlTGV2ZWw6IEFJVHJhY2VMZXZlbC5EZWJ1ZyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBibG9ja0lkOiBibG9jay5pZCxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHRvcFJlc3VsdHM6IHNlYXJjaFJlc3VsdCxcbiAgICAgICAgbnVtUmVzdWx0czogc2VhcmNoUmVzdWx0Lmxlbmd0aCxcbiAgICB9KTtcbiAgICBhd2FpdCBwcm9jZXNzTmV4dEJsb2NrKGpvYklkLCBzZWFyY2hSZXN1bHQsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG4iLCJpbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgR2VuZXJhdGl2ZUFJTW9kZWxPdXRwdXRUeXBlIH0gZnJvbSAnQGNyZXdkbGUvd2ViLXNkay10eXBlcyc7XG5pbXBvcnQgeyBBSVRyYWNlVHlwZSwgQUlSZXRyaWV2ZVRyYWNlQmxvY2ssIEFJVHJhY2VMZXZlbCB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5pbXBvcnQgeyBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1JldHJpZXZlL05leHRCbG9jayc7XG5pbXBvcnQgZ2VuZXJhdGl2ZUFJVHJhY2luZyBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvVHJhY2UvR2VuZXJhdGl2ZUFJVHJhY2luZyc7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01vZGVsQmxvY2soam9iSWQsIGNvbnRlbnQsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGNvbnN0IG1vZGVsID0gY29ubmVjdG9ycy5tb2RlbHMuZmluZCgobW9kZWwpID0+IG1vZGVsLmlkID09PSBibG9jay5pZCk7XG4gICAgaWYgKCFtb2RlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZGVsIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBsZXQgdGVtcENvbnRlbnQgPSAnJztcbiAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHRlbXBDb250ZW50ID0gY29udGVudC5tYXAoKGl0ZW0pID0+IGl0ZW0uY29udGVudCkuam9pbignLCAnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRlbXBDb250ZW50ID0gY29udGVudDtcbiAgICB9XG4gICAgc3dpdGNoIChtb2RlbC5vdXRwdXRUeXBlKSB7XG4gICAgICAgIGNhc2UgR2VuZXJhdGl2ZUFJTW9kZWxPdXRwdXRUeXBlLlRleHQ6XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzTW9kZWxCbG9ja1RleHQoam9iSWQsIHRlbXBDb250ZW50LCByZXN1bHQsIG1vZGVsLCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdlbmVyYXRpdmVBSU1vZGVsT3V0cHV0VHlwZS5WZWN0b3I6XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzTW9kZWxCbG9ja1ZlY3Rvcihqb2JJZCwgdGVtcENvbnRlbnQsIHJlc3VsdCwgbW9kZWwsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01vZGVsQmxvY2tUZXh0KGpvYklkLCBjb250ZW50LCByZXN1bHQsIG1vZGVsLCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgY29uc3QgY29ubmVjdG9yID0gY29ubmVjdG9ycy5nZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzLmZpbmQoKGNvbm5lY3RvcikgPT4gY29ubmVjdG9yLmdldEVuZ2luZVR5cGUoKSA9PT0gbW9kZWwuZW5naW5lVHlwZSk7XG4gICAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb25uZWN0b3IgZm91bmQgZm9yIG1vZGVsJyk7XG4gICAgfVxuICAgIGNvbnN0IG5ld1Byb21wdCA9IGF3YWl0IHByb2Nlc3NNb2RlbEJsb2NrVGV4dEhlbHBlcihjb250ZW50LCByZXN1bHQsIGNvbm5lY3RvciwgbW9kZWwpO1xuICAgIGdlbmVyYXRpdmVBSVRyYWNpbmcudHJhY2Uoe1xuICAgICAgICBqb2JUeXBlOiBBSVRyYWNlVHlwZS5SZXRyaWV2ZSxcbiAgICAgICAgdHlwZTogQUlSZXRyaWV2ZVRyYWNlQmxvY2suVGV4dE1vZGVsLFxuICAgICAgICBqb2JJZCxcbiAgICAgICAgdHJhY2VJZDogdjQoKSxcbiAgICAgICAgdHJhY2VMZXZlbDogQUlUcmFjZUxldmVsLkRlYnVnLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGJsb2NrSWQ6IGJsb2NrLmlkLFxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgbW9kZWxOYW1lOiBtb2RlbC5pZCxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgbmV3UHJvbXB0LFxuICAgICAgICBpbnB1dFR5cGU6IG1vZGVsLmlucHV0VHlwZSxcbiAgICAgICAgb3V0cHV0VHlwZTogbW9kZWwub3V0cHV0VHlwZSxcbiAgICB9KTtcbiAgICBhd2FpdCBwcm9jZXNzTmV4dEJsb2NrKGpvYklkLCBuZXdQcm9tcHQsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzTW9kZWxCbG9ja1RleHRIZWxwZXIocHJvbXB0LCByZXN1bHQsIGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvciwgbW9kZWwpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgIHByb21wdCxcbiAgICB9O1xuICAgIGlmIChyZXN1bHQuY29udGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcy5pbnN0cnVjdGlvbnMgPSBgQWRkaXRpb25hbCBjb250ZXh0OlxcbiR7cmVzdWx0LmNvbnRleHQubWFwKChpdGVtKSA9PiBgRnJvbSAke2l0ZW0ucGF0aE5hbWV9OiAke2l0ZW0uY29udGVudH1gKS5qb2luKFwiXFxuXCIpfWA7XG4gICAgfVxuICAgIGNvbnN0IGpvYlJlc3VsdCA9IGF3YWl0IGdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3Rvci5wcm9jZXNzSm9iKHBhcmFtcywge1xuICAgICAgICBtb2RlbCxcbiAgICB9KTtcbiAgICBpZiAoam9iUmVzdWx0Lm91dHB1dCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBvdXRwdXQgdHlwZScpO1xuICAgIH1cbiAgICByZXN1bHQuaW5wdXRUb2tlbnMgKz0gam9iUmVzdWx0LmlucHV0VG9rZW5zID8/IDA7XG4gICAgcmVzdWx0Lm91dHB1dFRva2VucyArPSBqb2JSZXN1bHQub3V0cHV0VG9rZW5zID8/IDA7XG4gICAgcmV0dXJuIGpvYlJlc3VsdC5vdXRwdXQ7XG59XG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzTW9kZWxCbG9ja1ZlY3Rvcihqb2JJZCwgY29udGVudCwgcmVzdWx0LCBtb2RlbCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGNvbnN0IGNvbm5lY3RvciA9IGNvbm5lY3RvcnMuZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9ycy5maW5kKChjb25uZWN0b3IpID0+IGNvbm5lY3Rvci5nZXRFbmdpbmVUeXBlKCkgPT09IG1vZGVsLmVuZ2luZVR5cGUpO1xuICAgIGlmICghY29ubmVjdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29ubmVjdG9yIGZvdW5kIGZvciBtb2RlbCcpO1xuICAgIH1cbiAgICBjb25zdCB2ZWN0b3IgPSBhd2FpdCBwcm9jZXNzTW9kZWxCbG9ja1ZlY3RvckhlbHBlcihjb250ZW50LCBjb25uZWN0b3IsIG1vZGVsKTtcbiAgICBhd2FpdCBwcm9jZXNzTmV4dEJsb2NrKGpvYklkLCB2ZWN0b3IsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzTW9kZWxCbG9ja1ZlY3RvckhlbHBlcihjb250ZW50LCBnZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3IsIG1vZGVsKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9yLnByb2Nlc3NKb2Ioe1xuICAgICAgICBwcm9tcHQ6IGNvbnRlbnQsXG4gICAgfSwge1xuICAgICAgICBtb2RlbCxcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0Lm91dHB1dDtcbn1cbiIsImltcG9ydCB7IERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TZXJ2aWNlcy9Xb3JrZmxvdyc7XG5pbXBvcnQgeyBwcm9jZXNzRW50aXR5RXh0cmFjdG9yQmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvUmV0cmlldmUvRW50aXR5RXh0cmFjdG9yJztcbmltcG9ydCB7IHByb2Nlc3NHcmFwaERhdGFiYXNlQmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvUmV0cmlldmUvR3JhcGhEYXRhYmFzZSc7XG5pbXBvcnQgeyBwcm9jZXNzTW9kZWxCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9Nb2RlbCc7XG5pbXBvcnQgeyBwcm9jZXNzVmVjdG9yRGF0YWJhc2VCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9WZWN0b3JEYXRhYmFzZSc7XG5pbXBvcnQgeyBwcm9jZXNzUmVyYW5rZXJCbG9jayB9IGZyb20gJy4vUmVyYW5rZXInO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NOZXh0QmxvY2soam9iSWQsIGNvbnRlbnQsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycykge1xuICAgIGZvciAoY29uc3QgbGluayBvZiBibG9jay5saW5rcyB8fCBbXSkge1xuICAgICAgICBjb25zdCBuZXdCbG9jayA9IGJsb2Nrcy5maW5kKChiKSA9PiBiLnVpZCA9PT0gbGluay51aWQpO1xuICAgICAgICBpZiAoIW5ld0Jsb2NrKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKG5ld0Jsb2NrLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUuQ29udGV4dDpcbiAgICAgICAgICAgICAgICByZXN1bHQuY29udGV4dC5wdXNoKC4uLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZS5FbnRpdHlFeHRyYWN0b3I6XG4gICAgICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc0VudGl0eUV4dHJhY3RvckJsb2NrKGpvYklkLCBjb250ZW50LCByZXN1bHQsIG5ld0Jsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZS5HcmFwaERhdGFiYXNlOlxuICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NHcmFwaERhdGFiYXNlQmxvY2soam9iSWQsIGNvbnRlbnQsIHJlc3VsdCwgbmV3QmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLk1vZGVsOlxuICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NNb2RlbEJsb2NrKGpvYklkLCBjb250ZW50LCByZXN1bHQsIG5ld0Jsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBEYXRhQ29sbGVjdGlvbkJsb2NrVHlwZS5SZXJhbmtlcjpcbiAgICAgICAgICAgICAgICBhd2FpdCBwcm9jZXNzUmVyYW5rZXJCbG9jayhqb2JJZCwgY29udGVudCwgcmVzdWx0LCBuZXdCbG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUuVmVjdG9yRGF0YWJhc2U6XG4gICAgICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc1ZlY3RvckRhdGFiYXNlQmxvY2soam9iSWQsIGNvbnRlbnQsIHJlc3VsdCwgbmV3QmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5jb21pbmdMaW5rcyhibG9jaywgYmxvY2tzKSB7XG4gICAgcmV0dXJuIGJsb2Nrcy5maWx0ZXIoKGIpID0+IGIubGlua3M/LnNvbWUoKGwpID0+IGwudWlkID09PSBibG9jay51aWQpKS5sZW5ndGg7XG59XG4iLCJpbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQUlUcmFjZVR5cGUsIEFJUmV0cmlldmVUcmFjZUJsb2NrLCBBSVRyYWNlTGV2ZWwgfSBmcm9tICdpbnRlcmZhY2VzL0FJVHJhY2UvVHJhY2UnO1xuaW1wb3J0IHsgcHJvY2Vzc05leHRCbG9jaywgZ2V0SW5jb21pbmdMaW5rcyB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NSZXJhbmtlckJsb2NrKGpvYklkLCBjb250ZW50LCByZXN1bHQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBpZiAoIWJsb2NrLmFjY3VtdWxhdGVkKSB7XG4gICAgICAgIGJsb2NrLmFjY3VtdWxhdGVkID0ge307XG4gICAgfVxuICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgaWYgKCFibG9jay5hY2N1bXVsYXRlZC5yZXN1bHRzKSB7XG4gICAgICAgICAgICBibG9jay5hY2N1bXVsYXRlZC5yZXN1bHRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgYmxvY2suYWNjdW11bGF0ZWQucmVzdWx0cy5wdXNoKC4uLmNvbnRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYmxvY2suYWNjdW11bGF0ZWQucHJvbXB0ID0gY29udGVudDtcbiAgICB9XG4gICAgYmxvY2sudGltZXNDYWxsZWQgPSBibG9jay50aW1lc0NhbGxlZCA/IGJsb2NrLnRpbWVzQ2FsbGVkICsgMSA6IDE7XG4gICAgaWYgKGdldEluY29taW5nTGlua3MoYmxvY2ssIGJsb2NrcykgPiBibG9jay50aW1lc0NhbGxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghYmxvY2suYWNjdW11bGF0ZWQucHJvbXB0IHx8ICFibG9jay5hY2N1bXVsYXRlZC5yZXN1bHRzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmVyYW5rZXIgYmxvY2sgaXMgbWlzc2luZyByZXF1aXJlZCBkYXRhJyk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBibG9jay5hY2N1bXVsYXRlZC5yZXN1bHRzKSB7XG4gICAgICAgIGl0ZW0ucmVsZXZhbmNlID0gYXdhaXQgY29ubmVjdG9ycy5ubHBMaWJyYXJ5Q29ubmVjdG9yLmdldFNpbWlsYXJpdHkoYmxvY2suYWNjdW11bGF0ZWQucHJvbXB0LCBpdGVtLmNvbnRlbnQpO1xuICAgIH1cbiAgICBjb25zdCBuZXdDb250ZW50ID0gYmxvY2suYWNjdW11bGF0ZWQucmVzdWx0c1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnJlbGV2YW5jZSA+IGJsb2NrLmF0dHJpYnV0ZXMubWluUmVsZXZhbmNlKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi5yZWxldmFuY2UgLSBhLnJlbGV2YW5jZSlcbiAgICAgICAgLnNsaWNlKDAsIGJsb2NrLmF0dHJpYnV0ZXMudG9wSyk7XG4gICAgZ2VuZXJhdGl2ZUFJVHJhY2luZy50cmFjZSh7XG4gICAgICAgIGpvYlR5cGU6IEFJVHJhY2VUeXBlLlJldHJpZXZlLFxuICAgICAgICB0eXBlOiBBSVJldHJpZXZlVHJhY2VCbG9jay5SZXJhbmtlcixcbiAgICAgICAgam9iSWQsXG4gICAgICAgIHRyYWNlSWQ6IHY0KCksXG4gICAgICAgIHRyYWNlTGV2ZWw6IEFJVHJhY2VMZXZlbC5EZWJ1ZyxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICBibG9ja0lkOiBibG9jay5pZCxcbiAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgIGlucHV0UmVzdWx0czogYmxvY2suYWNjdW11bGF0ZWQucmVzdWx0cyxcbiAgICAgICAgcmVyYW5rZWRSZXN1bHRzOiBuZXdDb250ZW50LFxuICAgIH0pO1xuICAgIGF3YWl0IHByb2Nlc3NOZXh0QmxvY2soam9iSWQsIG5ld0NvbnRlbnQsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG4iLCJpbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQUlUcmFjZVR5cGUsIEFJUmV0cmlldmVUcmFjZUJsb2NrLCBBSVRyYWNlTGV2ZWwgfSBmcm9tICdpbnRlcmZhY2VzL0FJVHJhY2UvVHJhY2UnO1xuaW1wb3J0IHsgcHJvY2Vzc05leHRCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9OZXh0QmxvY2snO1xuaW1wb3J0IGdlbmVyYXRpdmVBSVRyYWNpbmcgZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1RyYWNlL0dlbmVyYXRpdmVBSVRyYWNpbmcnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NWZWN0b3JEYXRhYmFzZUJsb2NrKGpvYklkLCBjb250ZW50LCByZXN1bHQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBjb25zdCBkYXRhYmFzZSA9IGNvbm5lY3RvcnMuY29udGVudE1lZGlhdG9yLmdldFZlY3RvckRhdGFiYXNlKGJsb2NrLmlkKTtcbiAgICBjb25zdCBzZWFyY2hSZXN1bHQgPSBkYXRhYmFzZS5zZWFyY2goY29udGVudCwgYmxvY2suYXR0cmlidXRlcy50b3BLLCBibG9jay5hdHRyaWJ1dGVzLm1pblJlbGV2YW5jZSwgYmxvY2suYXR0cmlidXRlcy5jb250ZW50U2l6ZSk7XG4gICAgZ2VuZXJhdGl2ZUFJVHJhY2luZy50cmFjZSh7XG4gICAgICAgIGpvYlR5cGU6IEFJVHJhY2VUeXBlLlJldHJpZXZlLFxuICAgICAgICB0eXBlOiBBSVJldHJpZXZlVHJhY2VCbG9jay5WZWN0b3JTZWFyY2gsXG4gICAgICAgIGpvYklkLFxuICAgICAgICB0cmFjZUlkOiB2NCgpLFxuICAgICAgICB0cmFjZUxldmVsOiBBSVRyYWNlTGV2ZWwuRGVidWcsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgYmxvY2tJZDogYmxvY2suaWQsXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICB0b3BSZXN1bHRzOiBzZWFyY2hSZXN1bHQsXG4gICAgICAgIG51bVJlc3VsdHM6IHNlYXJjaFJlc3VsdC5sZW5ndGgsXG4gICAgfSk7XG4gICAgYXdhaXQgcHJvY2Vzc05leHRCbG9jayhqb2JJZCwgc2VhcmNoUmVzdWx0LCByZXN1bHQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xufVxuIiwiaW1wb3J0IHsgcHJvY2Vzc05leHRCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9SZXRyaWV2ZS9OZXh0QmxvY2snO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NSZXRyaWV2ZShqb2JJZCwgcHJvbXB0LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBvdXRwdXQ6ICcnLFxuICAgICAgICBjb250ZXh0OiBbXSxcbiAgICAgICAgaW5wdXRUb2tlbnM6IDAsXG4gICAgICAgIG91dHB1dFRva2VuczogMCxcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHByb2Nlc3NOZXh0QmxvY2soam9iSWQsIHByb21wdCwgcmVzdWx0LCBibG9jaywgc3RydWN0dXJlZENsb25lKGJsb2NrcyksIGNvbm5lY3RvcnMpO1xuICAgICAgICByZXN1bHQub3V0cHV0ID0gYEFkZGl0aW9uYWwgY29udGV4dDpcXG4ke3Jlc3VsdC5jb250ZXh0Lm1hcCgoaXRlbSkgPT4gYEZyb20gJHtpdGVtLnBhdGhOYW1lfTogJHtpdGVtLmNvbnRlbnR9YCkuam9pbihcIlxcblwiKX1gO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyByZXRyaWV2ZScsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsImltcG9ydCB7IEFJVHJhY2VMZXZlbCB9IGZyb20gJ2ludGVyZmFjZXMvQUlUcmFjZS9UcmFjZSc7XG5jbGFzcyBHZW5lcmF0aXZlQUlUcmFjaW5nIHtcbiAgICBzdGF0aWMgaW5zdGFuY2U7XG4gICAgbG9nTGV2ZWwgPSBBSVRyYWNlTGV2ZWwuRXJyb3I7XG4gICAgc3RhdGljIGdldEluc3RhbmNlID0gKCkgPT4ge1xuICAgICAgICBpZiAoIUdlbmVyYXRpdmVBSVRyYWNpbmcuaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIEdlbmVyYXRpdmVBSVRyYWNpbmcuaW5zdGFuY2UgPSBuZXcgR2VuZXJhdGl2ZUFJVHJhY2luZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHZW5lcmF0aXZlQUlUcmFjaW5nLmluc3RhbmNlO1xuICAgIH07XG4gICAgdHJhY2UodHJhY2UpIHtcbiAgICAgICAgaWYgKHRyYWNlLnRyYWNlTGV2ZWwgPCB0aGlzLmxvZ0xldmVsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodHJhY2UsIG51bGwsIDIpKTtcbiAgICB9XG59XG5jb25zdCBnZW5lcmF0aXZlQUlUcmFjaW5nID0gR2VuZXJhdGl2ZUFJVHJhY2luZy5nZXRJbnN0YW5jZSgpO1xuZXhwb3J0IGRlZmF1bHQgZ2VuZXJhdGl2ZUFJVHJhY2luZztcbiIsImltcG9ydCB7IFdvcmtmbG93QmxvY2tUeXBlIH0gZnJvbSAnaW50ZXJmYWNlcy9TZXJ2aWNlcy9Xb3JrZmxvdyc7XG5pbXBvcnQgeyBwcm9jZXNzTmV4dEJsb2NrIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1dvcmtmbG93L05leHRCbG9jayc7XG5pbXBvcnQgeyBnZXRBZ2VudEZ1bmN0aW9ucyB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9Xb3JrZmxvdy9BZ2VudEZ1bmN0aW9uJztcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzQWdlbnRCbG9jayhwYXJhbWV0ZXJzLCByZXN1bHQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBmb3IgKGNvbnN0IGxpbmsgb2YgYmxvY2subGlua3MgfHwgW10pIHtcbiAgICAgICAgY29uc3QgbmV3QmxvY2sgPSBibG9ja3MuZmluZCgoYikgPT4gYi51aWQgPT09IGxpbmsudWlkKTtcbiAgICAgICAgaWYgKCFuZXdCbG9jaykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChuZXdCbG9jay50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLkFuc3dlcjpcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbW9kZWwgPSBjb25uZWN0b3JzLm1vZGVscy5maW5kKChtb2RlbCkgPT4gbW9kZWwuaWQgPT09IGJsb2NrLm1vZGVsSWQpO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlbCBub3QgZm91bmQnKTtcbiAgICB9XG4gICAgY29uc3QgY29ubmVjdG9yID0gY29ubmVjdG9ycy5nZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzLmZpbmQoKGNvbm5lY3RvcikgPT4gY29ubmVjdG9yLmdldEVuZ2luZVR5cGUoKSA9PT0gbW9kZWwuZW5naW5lVHlwZSk7XG4gICAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb25uZWN0b3IgZm91bmQgZm9yIG1vZGVsJyk7XG4gICAgfVxuICAgIGNvbnN0IGFnZW50UmVzdWx0ID0gYXdhaXQgY29ubmVjdG9yLnByb2Nlc3NKb2Ioe1xuICAgICAgICBwcm9tcHQ6IHBhcmFtZXRlcnMucHJvbXB0LFxuICAgICAgICBpbnN0cnVjdGlvbnM6IGAke2Jsb2NrLmluc3RydWN0aW9uc30ke3BhcmFtZXRlcnMuaW5zdHJ1Y3Rpb25zID8/ICcnfWAsXG4gICAgICAgIHRlbXBlcmF0dXJlOiBibG9jay50ZW1wZXJhdHVyZSxcbiAgICAgICAgbWF4VG9rZW5zOiBibG9jay5tYXhUb2tlbnMsXG4gICAgICAgIGhpc3Rvcnk6IHBhcmFtZXRlcnMuaGlzdG9yeSxcbiAgICAgICAgZnVuY3Rpb25zOiBnZXRBZ2VudEZ1bmN0aW9ucyhyZXN1bHQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpLFxuICAgIH0sIHtcbiAgICAgICAgbW9kZWwsXG4gICAgfSk7XG4gICAgaWYgKHR5cGVvZiBhZ2VudFJlc3VsdC5vdXRwdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQWdlbnQgb3V0cHV0IGlzIG5vdCBhIHN0cmluZycpO1xuICAgIH1cbiAgICBwYXJhbWV0ZXJzLnByb21wdCA9IGFnZW50UmVzdWx0Lm91dHB1dDtcbiAgICByZXN1bHQuaW5wdXRUb2tlbnMgKz0gYWdlbnRSZXN1bHQuaW5wdXRUb2tlbnMgPz8gMDtcbiAgICByZXN1bHQub3V0cHV0VG9rZW5zICs9IGFnZW50UmVzdWx0Lm91dHB1dFRva2VucyA/PyAwO1xuICAgIHJldHVybiBwcm9jZXNzTmV4dEJsb2NrKHBhcmFtZXRlcnMsIHJlc3VsdCwgYmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyk7XG59XG4iLCJpbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgQ09OVEVOVF9HRU5FUkFUSVZFX0FJX01BWF9DT05URVhUX0xFTkdUSCB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmltcG9ydCB7IEVudmlyb25tZW50IH0gZnJvbSAnZW52aXJvbm1lbnRzL0Vudmlyb25tZW50JztcbmltcG9ydCB7IEJsb2NrTGlua1R5cGUsIERhdGFDb2xsZWN0aW9uQmxvY2tUeXBlLCBXb3JrZmxvd0Jsb2NrVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU2VydmljZXMvV29ya2Zsb3cnO1xuaW1wb3J0IHsgcHJvY2Vzc1JldHJpZXZlIH0gZnJvbSAndXRpbHMvR2VuZXJhdGl2ZUFJL1JldHJpZXZlJztcbmV4cG9ydCBmdW5jdGlvbiBnZXRBZ2VudEZ1bmN0aW9ucyhyZXN1bHQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBjb25zdCBmdW5jdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgbGlua2luZ0Jsb2NrID0gYmxvY2tzLmZpbHRlcigoYikgPT4gYi5saW5rcz8uZmluZCgobCkgPT4gbC51aWQgPT09IGJsb2NrLnVpZCAmJiAobC50eXBlID09PSBCbG9ja0xpbmtUeXBlLktub3dsZWRnZSB8fCBsLnR5cGUgPT09IEJsb2NrTGlua1R5cGUuU2tpbGwpKSk7XG4gICAgZm9yIChjb25zdCBsaW5rIG9mIGxpbmtpbmdCbG9jaykge1xuICAgICAgICBpZiAobGluay50eXBlID09PSBXb3JrZmxvd0Jsb2NrVHlwZS5EYXRhQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgZnVuY3Rpb25zLnNldChgZ2V0Q29udGV4dEZyb20ke2xpbmsuaWR9YCwgZ2V0Q29udGV4dEZ1bmN0aW9uKHJlc3VsdCwgbGluaywgY29ubmVjdG9ycykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnVuY3Rpb25zLnNldChnZXRTa2lsbE5hbWUobGluayksIGdldFNraWxsRnVuY3Rpb24obGluaywgY29ubmVjdG9ycykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbnM7XG59XG5mdW5jdGlvbiBnZXRDb250ZXh0RnVuY3Rpb24ocmVzdWx0LCBibG9jaywgY29ubmVjdG9ycykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBgUmV0cmlldmUgcmVsZXZhbnQgaW5mb3JtYXRpb24gcmVsYXRlZCB0byAke2Jsb2NrLmRlc2NyaXB0aW9ufSB3aGVuIHlvdSBuZWVkIGJyb2FkIG9yIGNvbnRleHR1YWwgZGF0YSB0byBpbmZvcm0geW91ciByZXNwb25zZS5gLFxuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHF1ZXJ5OiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAocGFyYW1zKSA9PiB7XG4gICAgICAgICAgICBpZiAoISh0eXBlb2YgcGFyYW1zPy5xdWVyeSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdRdWVyeSBpcyByZXF1aXJlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpvYklkID0gdjQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHRCbG9jayA9IGJsb2NrLnJldHJpZXZlQmxvY2tzLmZpbmQoKGIpID0+IGIudHlwZSA9PT0gRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUuUHJvbXB0KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXRyaWV2ZSA9IGF3YWl0IHByb2Nlc3NSZXRyaWV2ZShqb2JJZCwgcGFyYW1zLnF1ZXJ5LCBwcm9tcHRCbG9jaywgYmxvY2sucmV0cmlldmVCbG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5jb250ZXh0ID0gQXJyYXkuZnJvbShuZXcgU2V0KFsuLi5yZXN1bHQuY29udGV4dCwgLi4ucmV0cmlldmUuY29udGV4dF0pKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5wdXRUb2tlbnMgKz0gcmV0cmlldmUuaW5wdXRUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgICAgICByZXN1bHQub3V0cHV0VG9rZW5zICs9IHJldHJpZXZlLm91dHB1dFRva2VucyA/PyAwO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRyaWV2ZS5vdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0Vycm9yIHJldHJpZXZpbmcgY29udGV4dCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldFNraWxsTmFtZShibG9jaykge1xuICAgIHN3aXRjaCAoYmxvY2sudHlwZSkge1xuICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLlRpbWU6XG4gICAgICAgICAgICByZXR1cm4gJ2dldERhdGUnO1xuICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLkNvZGU6XG4gICAgICAgICAgICByZXR1cm4gJ3J1bkNvZGUnO1xuICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLlNlYXJjaDpcbiAgICAgICAgICAgIHJldHVybiAnc2VhcmNoJztcbiAgICAgICAgY2FzZSBXb3JrZmxvd0Jsb2NrVHlwZS5XZWJTY3JhcGVyOlxuICAgICAgICAgICAgcmV0dXJuICdmZXRjaFVybCc7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBza2lsbCB0eXBlJyk7XG59XG5mdW5jdGlvbiBnZXRTa2lsbEZ1bmN0aW9uKGJsb2NrLCBjb25uZWN0b3JzKSB7XG4gICAgc3dpdGNoIChibG9jay50eXBlKSB7XG4gICAgICAgIGNhc2UgV29ya2Zsb3dCbG9ja1R5cGUuVGltZTpcbiAgICAgICAgICAgIHJldHVybiBnZXREYXRlRnVuY3Rpb24oKTtcbiAgICAgICAgY2FzZSBXb3JrZmxvd0Jsb2NrVHlwZS5Db2RlOlxuICAgICAgICAgICAgcmV0dXJuIGdldENvZGVGdW5jdGlvbigpO1xuICAgICAgICBjYXNlIFdvcmtmbG93QmxvY2tUeXBlLlNlYXJjaDpcbiAgICAgICAgICAgIHJldHVybiBnZXRTZWFyY2hGdW5jdGlvbihjb25uZWN0b3JzLnNlYXJjaEFwaUtleSwgY29ubmVjdG9ycyk7XG4gICAgICAgIGNhc2UgV29ya2Zsb3dCbG9ja1R5cGUuV2ViU2NyYXBlcjpcbiAgICAgICAgICAgIHJldHVybiBnZXRGZXRjaFVybEZ1bmN0aW9uKCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBza2lsbCB0eXBlJyk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGVzY3JpcHRpb246ICdSZXRyaWV2ZSB0aGUgY3VycmVudCBkYXRlIGFuZCB0aW1lIGluIHRoZSBhcHByb3ByaWF0ZSBmb3JtYXQgZm9yIHRpbWUtc2Vuc2l0aXZlIG9wZXJhdGlvbnMgb3IgbG9nZ2luZyBwdXJwb3Nlcy4nLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0Q29kZUZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRXhlY3V0ZSBhIEphdmFTY3JpcHQgY29kZSBzbmlwcGV0IHRoYXQgcmV0dXJucyBhIHN0cmluZy4gRW5zdXJlIHRoZSBjb2RlIGlzIGRlc2lnbmVkIHRvIHByb2R1Y2UgYSBzdHJpbmcgb3V0cHV0IGZvciBmdXJ0aGVyIHByb2Nlc3Npbmcgb3IgZGlzcGxheS4nLFxuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIGNvZGU6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2s6IChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zPy5jb2RlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAnQ29kZSBpcyByZXF1aXJlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBGdW5jdGlvbihgJHtwYXJhbXM/LmNvZGV9YCkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnRXJyb3IgZXhlY3V0aW5nIGNvZGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cbmZ1bmN0aW9uIGdldFNlYXJjaEZ1bmN0aW9uKHNlYXJjaEFwaUtleSwgY29ubmVjdG9ycykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUmV0cmlldmUgcmVsZXZhbnQgY29udGV4dCBmcm9tIGEgd2ViIHNlYXJjaCBxdWVyeSB0byBpbmZvcm0gZGVjaXNpb24tbWFraW5nIG9yIHByb3ZpZGUgYWNjdXJhdGUgcmVzcG9uc2VzLicsXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgcXVlcnk6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jIChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIGlmICghY29ubmVjdG9ycy5zZWFyY2hDb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1NlYXJjaCBjb25uZWN0b3Igbm90IGZvdW5kJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKHR5cGVvZiBwYXJhbXM/LnF1ZXJ5ID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1F1ZXJ5IGlzIHJlcXVpcmVkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29ubmVjdG9ycy5zZWFyY2hDb25uZWN0b3Iuc2VhcmNoKHBhcmFtcy5xdWVyeSwgc2VhcmNoQXBpS2V5LCBFbnZpcm9ubWVudC5nb29nbGUuc2VhcmNoRW5naW5lSWQpO1xuICAgICAgICAgICAgICAgIGxldCBzZWFyY2hSZXN1bHRzID0gJyc7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBzZWFyY2hSZXN1bHRzICs9IGAke2l0ZW0udGl0bGV9IC0gJHtpdGVtLnVybH1cXG4ke2l0ZW0uc25pcHBldH1cXG5cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VhcmNoUmVzdWx0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAnRXJyb3Igc2VhcmNoaW5nJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xufVxuZnVuY3Rpb24gZ2V0RmV0Y2hVcmxGdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZXNjcmlwdGlvbjogJ1JldHJpZXZlIHRoZSBjb250ZW50IG9mIGEgc3BlY2lmaWVkIFVSTC4gVGhlIFVSTCBjYW4gYmUgb2J0YWluZWQgZnJvbSBzZWFyY2ggcmVzdWx0cyBvciBvdGhlciBzb3VyY2VzIGFuZCBzaG91bGQgYmUgdXNlZCB0byBleHRyYWN0IHJlbGV2YW50IGRhdGEgb3IgaW5mb3JtYXRpb24uJyxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICB1cmw6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHBhZ2U6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jIChwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIGlmICghKHR5cGVvZiBwYXJhbXM/LnVybCA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdVUkwgaXMgcmVxdWlyZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHBhcmFtcy51cmwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGh0bWxTdHJpbmcgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keU1hdGNoID0gaHRtbFN0cmluZy5tYXRjaCgvPGJvZHlbXj5dKj4oKC58W1xcblxccl0pKik8XFwvYm9keT4vaSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSBib2R5TWF0Y2ggPyBib2R5TWF0Y2hbMV0gOiBodG1sU3RyaW5nO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRXaXRob3V0U2NyaXB0cyA9IGJvZHlDb250ZW50LnJlcGxhY2UoLzxzY3JpcHRcXGJbXjxdKig/Oig/ITxcXC9zY3JpcHQ+KTxbXjxdKikqPFxcL3NjcmlwdD4vZ2ksICcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50V2l0aG91dFN0eWxlcyA9IGNvbnRlbnRXaXRob3V0U2NyaXB0cy5yZXBsYWNlKC88c3R5bGVcXGJbXjxdKig/Oig/ITxcXC9zdHlsZT4pPFtePF0qKSo8XFwvc3R5bGU+L2dpLCAnJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudFdpdGhOZXdsaW5lcyA9IGNvbnRlbnRXaXRob3V0U3R5bGVzLnJlcGxhY2UoLzxiclxccypcXC8/Pi9naSwgJyAnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50V2l0aG91dE5iU3AgPSBjb250ZW50V2l0aE5ld2xpbmVzLnJlcGxhY2UoLyZuYnNwOy9nLCAnICcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vSHRtbCA9IGNvbnRlbnRXaXRob3V0TmJTcC5yZXBsYWNlKC88XFwvP1tePl0rKD58JCkvZywgJycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWluVGV4dFdpdGhvdXRNdWx0aXBsZVNwYWNlcyA9IG5vSHRtbC5yZXBsYWNlKC9cXHNcXHMrL2csICcgJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGxhaW5UZXh0ID0gcGxhaW5UZXh0V2l0aG91dE11bHRpcGxlU3BhY2VzLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAocGxhaW5UZXh0Lmxlbmd0aCA+IENPTlRFTlRfR0VORVJBVElWRV9BSV9NQVhfQ09OVEVYVF9MRU5HVEgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIHBhcmFtcz8ucGFnZSA9PT0gJ251bWJlcicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1BhZ2UgaXMgcmVxdWlyZWQnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAke3BsYWluVGV4dC5zdWJzdHJpbmcoKHBhcmFtcy5wYWdlIC0gMSkgKiBDT05URU5UX0dFTkVSQVRJVkVfQUlfTUFYX0NPTlRFWFRfTEVOR1RILCBDT05URU5UX0dFTkVSQVRJVkVfQUlfTUFYX0NPTlRFWFRfTEVOR1RIKX1cbiAgICAgICAgICAgIE1vcmUgY29udGVudCBhdmFpbGFibGUgb24gcGFnZSAke3BhcmFtcy5wYWdlICsgMX1cbiAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGxhaW5UZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdFcnJvciBmZXRjaGluZyBVUkwnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH07XG59XG4iLCJpbXBvcnQgeyBXb3JrZmxvd0Jsb2NrVHlwZSB9IGZyb20gJ2ludGVyZmFjZXMvU2VydmljZXMvV29ya2Zsb3cnO1xuaW1wb3J0IHsgcHJvY2Vzc0FnZW50QmxvY2sgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvV29ya2Zsb3cvQWdlbnQnO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NOZXh0QmxvY2socGFyYW1ldGVycywgcmVzdWx0LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgZm9yIChjb25zdCBsaW5rIG9mIGJsb2NrLmxpbmtzIHx8IFtdKSB7XG4gICAgICAgIGNvbnN0IG5ld0Jsb2NrID0gYmxvY2tzLmZpbmQoKGIpID0+IGIudWlkID09PSBsaW5rLnVpZCk7XG4gICAgICAgIGlmICghbmV3QmxvY2spIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAobmV3QmxvY2sudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBXb3JrZmxvd0Jsb2NrVHlwZS5BZ2VudDpcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvY2Vzc0FnZW50QmxvY2socGFyYW1ldGVycywgcmVzdWx0LCBuZXdCbG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFuc3dlciBibG9jayBmb3VuZCcpO1xufVxuIiwiaW1wb3J0IHsgcHJvY2Vzc05leHRCbG9jayB9IGZyb20gJ3V0aWxzL0dlbmVyYXRpdmVBSS9Xb3JrZmxvdy9OZXh0QmxvY2snO1xuaW1wb3J0IHsgZ2V0QWdlbnRGdW5jdGlvbnMgfSBmcm9tICd1dGlscy9HZW5lcmF0aXZlQUkvV29ya2Zsb3cvQWdlbnRGdW5jdGlvbic7XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1dvcmtmbG93KHBhcmFtZXRlcnMsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIGNvbnRleHQ6IFtdLFxuICAgICAgICBpbnB1dFRva2VuczogMCxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiAwLFxuICAgIH07XG4gICAgY29uc3QgbGFzdEJsb2NrID0gYXdhaXQgcHJvY2Vzc05leHRCbG9jayhwYXJhbWV0ZXJzLCByZXN1bHQsIGJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpO1xuICAgIGNvbnN0IG1vZGVsID0gY29ubmVjdG9ycy5tb2RlbHMuZmluZCgobW9kZWwpID0+IG1vZGVsLmlkID09PSBsYXN0QmxvY2subW9kZWxJZCk7XG4gICAgaWYgKCFtb2RlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZGVsIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBjb25zdCBjb25uZWN0b3IgPSBjb25uZWN0b3JzLmdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnMuZmluZCgoY29ubmVjdG9yKSA9PiBjb25uZWN0b3IuZ2V0RW5naW5lVHlwZSgpID09PSBtb2RlbC5lbmdpbmVUeXBlKTtcbiAgICBpZiAoIWNvbm5lY3Rvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbm5lY3RvciBmb3VuZCBmb3IgbW9kZWwnKTtcbiAgICB9XG4gICAgY29uc3QgbGFzdFJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rvci5wcm9jZXNzSm9iKHtcbiAgICAgICAgcHJvbXB0OiBwYXJhbWV0ZXJzLnByb21wdCxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBgJHtsYXN0QmxvY2suaW5zdHJ1Y3Rpb25zfSR7cGFyYW1ldGVycy5pbnN0cnVjdGlvbnMgPz8gJyd9YCxcbiAgICAgICAgdGVtcGVyYXR1cmU6IGxhc3RCbG9jay50ZW1wZXJhdHVyZSxcbiAgICAgICAgbWF4VG9rZW5zOiBsYXN0QmxvY2subWF4VG9rZW5zLFxuICAgICAgICBoaXN0b3J5OiBwYXJhbWV0ZXJzLmhpc3RvcnksXG4gICAgICAgIGZ1bmN0aW9uczogZ2V0QWdlbnRGdW5jdGlvbnMocmVzdWx0LCBsYXN0QmxvY2ssIGJsb2NrcywgY29ubmVjdG9ycyksXG4gICAgfSwge1xuICAgICAgICBtb2RlbCxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBvdXRwdXQ6IGxhc3RSZXN1bHQub3V0cHV0LFxuICAgICAgICBjb250ZXh0OiByZXN1bHQuY29udGV4dCxcbiAgICAgICAgaW5wdXRUb2tlbnM6IChyZXN1bHQuaW5wdXRUb2tlbnMgPz8gMCkgKyAobGFzdFJlc3VsdC5pbnB1dFRva2VucyA/PyAwKSxcbiAgICAgICAgb3V0cHV0VG9rZW5zOiAocmVzdWx0Lm91dHB1dFRva2VucyA/PyAwKSArIChsYXN0UmVzdWx0Lm91dHB1dFRva2VucyA/PyAwKSxcbiAgICB9O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBzdHJlYW1Xb3JrZmxvdyhwYXJhbWV0ZXJzLCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBjb250ZXh0OiBbXSxcbiAgICAgICAgaW5wdXRUb2tlbnM6IDAsXG4gICAgICAgIG91dHB1dFRva2VuczogMCxcbiAgICB9O1xuICAgIGNvbnN0IGxhc3RCbG9jayA9IGF3YWl0IHByb2Nlc3NOZXh0QmxvY2socGFyYW1ldGVycywgcmVzdWx0LCBibG9jaywgYmxvY2tzLCBjb25uZWN0b3JzKTtcbiAgICBjb25zdCBtb2RlbCA9IGNvbm5lY3RvcnMubW9kZWxzLmZpbmQoKG1vZGVsKSA9PiBtb2RlbC5pZCA9PT0gbGFzdEJsb2NrLm1vZGVsSWQpO1xuICAgIGlmICghbW9kZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlbCBub3QgZm91bmQnKTtcbiAgICB9XG4gICAgY29uc3QgY29ubmVjdG9yID0gY29ubmVjdG9ycy5nZW5lcmF0aXZlQUlXb3JrZXJDb25uZWN0b3JzLmZpbmQoKGNvbm5lY3RvcikgPT4gY29ubmVjdG9yLmdldEVuZ2luZVR5cGUoKSA9PT0gbW9kZWwuZW5naW5lVHlwZSk7XG4gICAgaWYgKCFjb25uZWN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb25uZWN0b3IgZm91bmQgZm9yIG1vZGVsJyk7XG4gICAgfVxuICAgIGZvciBhd2FpdCAoY29uc3QgcGFydGlhbCBvZiBjb25uZWN0b3IucHJvY2Vzc0pvYlN0cmVhbSh7XG4gICAgICAgIHByb21wdDogcGFyYW1ldGVycy5wcm9tcHQsXG4gICAgICAgIGluc3RydWN0aW9uczogYCR7bGFzdEJsb2NrLmluc3RydWN0aW9uc30ke3BhcmFtZXRlcnMuaW5zdHJ1Y3Rpb25zID8/ICcnfWAsXG4gICAgICAgIHRlbXBlcmF0dXJlOiBsYXN0QmxvY2sudGVtcGVyYXR1cmUsXG4gICAgICAgIG1heFRva2VuczogbGFzdEJsb2NrLm1heFRva2VucyxcbiAgICAgICAgaGlzdG9yeTogcGFyYW1ldGVycy5oaXN0b3J5LFxuICAgICAgICBmdW5jdGlvbnM6IGdldEFnZW50RnVuY3Rpb25zKHJlc3VsdCwgbGFzdEJsb2NrLCBibG9ja3MsIGNvbm5lY3RvcnMpLFxuICAgIH0sIHtcbiAgICAgICAgbW9kZWwsXG4gICAgfSkpIHtcbiAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgb3V0cHV0OiBwYXJ0aWFsLm91dHB1dCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHJlc3VsdC5jb250ZXh0LFxuICAgICAgICAgICAgaW5wdXRUb2tlbnM6IChyZXN1bHQuaW5wdXRUb2tlbnMgPz8gMCkgKyAocGFydGlhbC5pbnB1dFRva2VucyA/PyAwKSxcbiAgICAgICAgICAgIG91dHB1dFRva2VuczogKHJlc3VsdC5vdXRwdXRUb2tlbnMgPz8gMCkgKyAocGFydGlhbC5vdXRwdXRUb2tlbnMgPz8gMCksXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSU5URVJWQUxfVElNRSB9IGZyb20gJ2NvbnN0YW50cy9JbnRlcnZhbCc7XG5jbGFzcyBJbnRlcnZhbCB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIHBhcmFtZXRlcnMgPSBbXTtcbiAgICBzb3VyY2U7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycy5mb3JFYWNoKChwKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSBwLmxhc3RFeGVjdXRlZCA+IHAuaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgICAgIHAubGFzdEV4ZWN1dGVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgSU5URVJWQUxfVElNRSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKCFJbnRlcnZhbC5pbnN0YW5jZSkge1xuICAgICAgICAgICAgSW50ZXJ2YWwuaW5zdGFuY2UgPSBuZXcgSW50ZXJ2YWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSW50ZXJ2YWwuaW5zdGFuY2U7XG4gICAgfVxuICAgIHN0YXJ0Tm9UaHJvdHRsaW5nSGFjayhhdWRpb0NvbnRleHQpIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5jcmVhdGVDb25zdGFudFNvdXJjZShhdWRpb0NvbnRleHQpO1xuICAgICAgICBjb25zdCBnYWluTm9kZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgICAgIGlmIChnYWluTm9kZSAmJiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGdhaW5Ob2RlLmdhaW4udmFsdWUgPSAwLjAwMTtcbiAgICAgICAgICAgIHNvdXJjZS5jb25uZWN0KGdhaW5Ob2RlKTtcbiAgICAgICAgICAgIGdhaW5Ob2RlLmNvbm5lY3QoYXVkaW9Db250ZXh0LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIHNvdXJjZS5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3BOb1Rocm90dGxpbmdIYWNrKCkge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdhaXQodGltZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRJbnRlcnZhbChjYWxsYmFjaywgaW50ZXJ2YWwpIHtcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnB1c2goe1xuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgICBpbnRlcnZhbCxcbiAgICAgICAgICAgIGxhc3RFeGVjdXRlZDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnMuZmlsdGVyKChwKSA9PiBwLmNhbGxiYWNrICE9PSBjYWxsYmFjayk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNyZWF0ZUNvbnN0YW50U291cmNlKGF1ZGlvQ29udGV4dCkge1xuICAgICAgICBpZiAoYXVkaW9Db250ZXh0LmNyZWF0ZUNvbnN0YW50U291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXVkaW9Db250ZXh0LmNyZWF0ZUNvbnN0YW50U291cmNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29uc3RhbnRTb3VyY2VOb2RlID0gYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgICAgICBjb25zdCBjb25zdGFudEJ1ZmZlciA9IGF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXIoMSwgMSwgYXVkaW9Db250ZXh0LnNhbXBsZVJhdGUpO1xuICAgICAgICBjb25zdCBidWZmZXJEYXRhID0gY29uc3RhbnRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoMCk7XG4gICAgICAgIGJ1ZmZlckRhdGFbMF0gPSAoMCAqIDEyMDApICsgMTA7XG4gICAgICAgIGNvbnN0YW50U291cmNlTm9kZS5idWZmZXIgPSBjb25zdGFudEJ1ZmZlcjtcbiAgICAgICAgY29uc3RhbnRTb3VyY2VOb2RlLmxvb3AgPSB0cnVlO1xuICAgICAgICByZXR1cm4gY29uc3RhbnRTb3VyY2VOb2RlO1xuICAgIH1cbn1cbmNvbnN0IGludGVydmFsID0gSW50ZXJ2YWwuZ2V0SW5zdGFuY2UoKTtcbmV4cG9ydCBkZWZhdWx0IGludGVydmFsO1xuIiwiaW1wb3J0IHsgU1lTVEVNX1RPUElDX0lOVEVSTkFMIH0gZnJvbSAnY29uc3RhbnRzL1N5c3RlbSc7XG5jb25zdCBzeXN0ZW1NZXNzYWdlVHlwZUxvb2t1cCA9IFtcbiAgICAnUGVlckNvbm5lY3Rpb24nLFxuICAgICdOb2RlJyxcbiAgICAnQ29udGVudCcsXG4gICAgJ1N1YnNjcmlwdGlvbicsXG4gICAgJ1N0YXRzJyxcbiAgICAnRGV0ZWN0aW9uJyxcbiAgICAnUmVtZWRpYXRpb24nLFxuXTtcbmNvbnN0IHN5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZUxvb2t1cCA9IFtcbiAgICBbXG4gICAgICAgICdPZmZlcicsXG4gICAgICAgICdBbnN3ZXInLFxuICAgICAgICAnSGFuZHNoYWtlJyxcbiAgICAgICAgJ1N1Y2Nlc3MnLFxuICAgICAgICAnTmVlZFJlc3RhcnQnLFxuICAgICAgICAnUmVzdGFydCcsXG4gICAgICAgICdEaXNjb25uZWN0JyxcbiAgICAgICAgJ1N0YXRzJyxcbiAgICAgICAgJ09wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzJyxcbiAgICBdLCBbXG4gICAgICAgICdOb2RlSm9pbicsXG4gICAgICAgICdOb2RlVXBkYXRlJyxcbiAgICAgICAgJ05vZGVDb25uZWN0aW9uc1VwZGF0ZScsXG4gICAgICAgICdOb2RlTGVhdmUnLFxuICAgIF0sIFtcbiAgICAgICAgJ1B1Ymxpc2hNZWRpYVN0cmVhbScsXG4gICAgICAgICdVbnB1Ymxpc2hNZWRpYVN0cmVhbScsXG4gICAgICAgICdTdWJzY3JpYmVNZWRpYVN0cmVhbScsXG4gICAgICAgICdVcGRhdGVNZWRpYVN0cmVhbScsXG4gICAgICAgICdVbnN1YnNjcmliZU1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ0Nsb3NlSm9iRGlzcGF0Y2hlcicsXG4gICAgICAgICdDbG9zZUpvYldvcmtlcicsXG4gICAgICAgICdDbG9zZU9iamVjdFN0b3JlQnVja2V0JyxcbiAgICAgICAgJ0Nsb3NlS2V5VmFsdWVEYXRhYmFzZScsXG4gICAgICAgICdDbG9zZVB1YlN1YlRvcGljJyxcbiAgICAgICAgJ0Nsb3NlTWVkaWFTdHJlYW0nLFxuICAgICAgICAnQ2xvc2VWZWN0b3JEYXRhYmFzZScsXG4gICAgICAgICdDbG9zZUdyYXBoRGF0YWJhc2UnLFxuICAgICAgICAnTG9jYWxNZWRpYVN0cmVhbVRyYWNrRmFpbCcsXG4gICAgICAgICdSZW1vdGVNZWRpYVN0cmVhbVRyYWNrRmFpbCcsXG4gICAgICAgICdSZXF1ZXN0U3luY0tleVZhbHVlRGF0YWJhc2UnLFxuICAgICAgICAnU2VuZFRyYW5zYWN0aW9uc0R1bXAnLFxuICAgICAgICAnUmVxdWVzdFRyYW5zYWN0aW9uc1ZhbHVlJyxcbiAgICAgICAgJ1B1YlN1YlRvcGljU3RhdHMnLFxuICAgICAgICAnT2JqZWN0U3RvcmVTdGF0cycsXG4gICAgICAgICdLZXlWYWx1ZURhdGFiYXNlU3RhdHMnLFxuICAgICAgICAnR2VuZXJhdGl2ZUFJQ29udGV4dFN0YXRzJyxcbiAgICAgICAgJ0dlbmVyYXRpdmVBSVdvcmtlclN0YXRzJyxcbiAgICAgICAgJ1ZlY3RvckRhdGFiYXNlU3RhdHMnLFxuICAgICAgICAnR3JhcGhEYXRhYmFzZVN0YXRzJyxcbiAgICBdLCBbXG4gICAgICAgICdTdWJzY3JpYmVNZWRpYVN0cmVhbScsXG4gICAgICAgICdVcGRhdGVNZWRpYVN0cmVhbScsXG4gICAgICAgICdVbnN1YnNjcmliZU1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ05lZWRNZWRpYVN0cmVhbScsXG4gICAgICAgICdSZXN0YXJ0TmVlZE1lZGlhU3RyZWFtJyxcbiAgICAgICAgJ0NhblByb3ZpZGVNZWRpYVN0cmVhbScsXG4gICAgICAgICdDYW5ub3RQcm92aWRlTWVkaWFTdHJlYW0nLFxuICAgICAgICAnTWVkaWFTdHJlYW1VbmF2YWlsYWJsZScsXG4gICAgXSwgW1xuICAgICAgICAnU3RyZWFtUmVwb3J0JyxcbiAgICAgICAgJ0xvY2FsUmVwb3J0JyxcbiAgICBdLCBbXG4gICAgICAgICdQcm9ibGVtJyxcbiAgICBdLCBbXG4gICAgICAgICdSZW1lZGlhdGlvbicsXG4gICAgICAgICdSZW1vdGVSZW1lZGlhdGlvbicsXG4gICAgXSxcbl07XG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9nZ2FibGVTeXN0ZW1NZXNzYWdlKGNvbnRlbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICBzeXN0ZW1NZXNzYWdlVHlwZTogc3lzdGVtTWVzc2FnZVR5cGVMb29rdXBbY29udGVudC5tZXNzYWdlVHlwZV0sXG4gICAgICAgIHN5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZTogc3lzdGVtQ29udGVudE1lc3NhZ2VUeXBlTG9va3VwW2NvbnRlbnQubWVzc2FnZVR5cGVdW2NvbnRlbnQuY29udGVudC50eXBlXSxcbiAgICB9O1xufVxuY29uc3Qgb3B0aW9ucyA9IHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0Jywgc2Vjb25kOiAnMi1kaWdpdCcgfTtcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDdXJyZW50RGF0ZSgpIHtcbiAgICBjb25zdCBkID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBtcyA9IGQuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IGQudG9Mb2NhbGVEYXRlU3RyaW5nKFwiZW4tVVNcIiwgb3B0aW9ucykubWF0Y2goL1xcZFxcZDpcXGRcXGQ6XFxkXFxkLyk/LlswXTtcbiAgICBjb25zdCBmb3JtYXR0ZWRNcyA9IG1zID4gMTAwID8gYCR7bXN9YCA6IChtcyA+IDEwID8gYDAke21zfWAgOiBgMDAke21zfWApO1xuICAgIHJldHVybiBgJHtmb3JtYXR0ZWRUaW1lfS4ke2Zvcm1hdHRlZE1zfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkU3l0ZW1Mb2coZXZlbnQsIGxvY2FsSWQpIHtcbiAgICBjb25zdCBkYXRlTG9nZ2VyID0gZm9ybWF0Q3VycmVudERhdGUoKTtcbiAgICBjb25zdCB7IHNvdXJjZUlkLCBkZXN0aW5hdGlvbklkcywgc3lzdGVtTWVzc2FnZVR5cGUsIHN5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZSB9ID0gZ2V0TG9nZ2FibGVTeXN0ZW1NZXNzYWdlKGV2ZW50KTtcbiAgICBjb25zdCBkZXN0aW5hdGlvbnMgPSBkZXN0aW5hdGlvbklkcyA/IGAke2Rlc3RpbmF0aW9uSWRzfWAgOiAnZXZlcnlvbmUnO1xuICAgIGNvbnN0IG1lc3NhZ2VTdHJpbmcgPSBzb3VyY2VJZCA9PT0gbG9jYWxJZFxuICAgICAgICA/IGBTZW5kaW5nICcke3N5c3RlbU1lc3NhZ2VUeXBlfScgdG8gJHtkZXN0aW5hdGlvbnN9YFxuICAgICAgICA6IGV2ZW50LnNvdXJjZUlkID09PSBTWVNURU1fVE9QSUNfSU5URVJOQUxcbiAgICAgICAgICAgID8gYEludGVybmFsIGV2ZW50ICcke3N5c3RlbU1lc3NhZ2VUeXBlfSdgXG4gICAgICAgICAgICA6IGAke2Rlc3RpbmF0aW9uSWRzID8gJycgOiAnRXZlcnlvbmUgJ31SZWNlaXZpbmcgJyR7c3lzdGVtTWVzc2FnZVR5cGV9JyBmcm9tICR7c291cmNlSWR9YDtcbiAgICByZXR1cm4gYCR7ZGF0ZUxvZ2dlcn0gLSAke2xvY2FsSWR9IC0gJHttZXNzYWdlU3RyaW5nfSB3aXRoICcke3N5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZX0nIHBheWxvYWQ6YDtcbn1cbiIsImltcG9ydCB7IGNvbGxlY3Rpb24sIGRvYywgc2VydmVyVGltZXN0YW1wLCBzZXREb2MsIHdyaXRlQmF0Y2ggfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tICdlbnZpcm9ubWVudHMvRW52aXJvbm1lbnQnO1xuaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IGZpcmViYXNlIGZyb20gJ3NlcnZpY2VzL0ZpcmViYXNlL0ZpcmViYXNlU2VydmljZSc7XG5jbGFzcyBMb2dnZXIge1xuICAgIHN0YXRpYyBpbnN0YW5jZTtcbiAgICBlbmFibGVkQ2hhbm5lbHMgPSBbTG9nZ2luZ0NoYW5uZWxzLkRlZmF1bHRdO1xuICAgIGRlYnVnRW5hYmxlZCA9IHRydWU7XG4gICAgbG9nZ2luZ0Nvbm5lY3RvcnM7XG4gICAgdmVuZG9ySWQgPSAnJztcbiAgICBnbG9iYWxPYmplY3Q7XG4gICAgYmF0Y2hRdWV1ZSA9IFtdO1xuICAgIGN1cnJlbnRCYXRjaDtcbiAgICBiYXRjaFRpbWVvdXQ7XG4gICAgcmV0cnlMaW1pdCA9IDEwO1xuICAgIHJldHJ5RGVsYXkgPSA1MDA7XG4gICAgYmF0Y2hTaXplID0gNDUwO1xuICAgIHRpbWVvdXRWYWx1ZSA9IDEwMDA7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5nbG9iYWxPYmplY3QgPSB3aW5kb3c7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsT2JqZWN0ID0gZ2xvYmFsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBnbG9iYWwgb2JqZWN0IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2FkRW5hYmxlZENoYW5uZWxzKCk7XG4gICAgICAgIHRoaXMuZ2xvYmFsT2JqZWN0LmNyZXdkbGVTREtFbmFibGVMb2dnaW5nID0gKGNoYW5uZWwpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGFubmVsID09PSBMb2dnaW5nQ2hhbm5lbHMuQWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkQ2hhbm5lbHMgPSBPYmplY3Qua2V5cyhMb2dnaW5nQ2hhbm5lbHMpLm1hcCgodW50eXBlZEtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB1bnR5cGVkS2V5O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTG9nZ2luZ0NoYW5uZWxzW2tleV07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoTG9nZ2luZ0NoYW5uZWxzKS5mb3JFYWNoKCh1bnR5cGVkS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHVudHlwZWRLZXk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBjcmV3ZGxlLXNkay1sb2dnaW5nLSR7TG9nZ2luZ0NoYW5uZWxzW2tleV19YCwgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZENoYW5uZWxzLmluY2x1ZGVzKGNoYW5uZWwpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkQ2hhbm5lbHMucHVzaChjaGFubmVsKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgY3Jld2RsZS1zZGstbG9nZ2luZy0ke2NoYW5uZWx9YCwgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nbG9iYWxPYmplY3QuY3Jld2RsZVNES0Rpc2FibGVMb2dnaW5nID0gKGNoYW5uZWwpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hhbm5lbCB8fCBjaGFubmVsID09PSBMb2dnaW5nQ2hhbm5lbHMuQWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkQ2hhbm5lbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhMb2dnaW5nQ2hhbm5lbHMpLmZvckVhY2goKHVudHlwZWRLZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdW50eXBlZEtleTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYGNyZXdkbGUtc2RrLWxvZ2dpbmctJHtMb2dnaW5nQ2hhbm5lbHNba2V5XX1gKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVkQ2hhbm5lbHMuaW5jbHVkZXMoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZWRDaGFubmVscyA9IHRoaXMuZW5hYmxlZENoYW5uZWxzLmZpbHRlcigoYykgPT4gYyAhPT0gY2hhbm5lbCk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYGNyZXdkbGUtc2RrLWxvZ2dpbmctJHtjaGFubmVsfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdsb2JhbE9iamVjdC5jcmV3ZGxlU0RLTG9nZ2luZ0NoYW5uZWxzID0gTG9nZ2luZ0NoYW5uZWxzO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIUxvZ2dlci5pbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIExvZ2dlci5pbnN0YW5jZSA9IG5ldyBMb2dnZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBMb2dnZXIuaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0xvZ2dlci5nZXRJbnN0YW5jZScsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsb2c6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICBsb2dSYXc6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICBkZWJ1ZzogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgIHNldFZlbmRvcklkOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgc2V0TG9nZ2luZ0Nvbm5lY3RvcnM6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgIGxvZ0V2ZW50OiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgbG9nU2VydmljZUV2ZW50OiAoKSA9PiB7IH0sXG4gICAgICAgICAgICAgICAgbG9nU3RvcmFnZTogKCkgPT4geyB9LFxuICAgICAgICAgICAgICAgIHdhcm5pbmc6ICgpID0+IHsgfSxcbiAgICAgICAgICAgICAgICBpc0NoYW5uZWxFbmFibGVkOiAoKSA9PiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcm9jZXNzQmF0Y2g6ICgpID0+IHsgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VmVuZG9ySWQodmVuZG9ySWQpIHtcbiAgICAgICAgdGhpcy52ZW5kb3JJZCA9IHZlbmRvcklkO1xuICAgICAgICB0aGlzLmJhdGNoUXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSB0aGlzLmNyZWF0ZU5ld0JhdGNoKCk7XG4gICAgICAgIGlmICh0aGlzLmJhdGNoVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYmF0Y2hUaW1lb3V0KTtcbiAgICAgICAgICAgIHRoaXMuYmF0Y2hUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldExvZ2dpbmdDb25uZWN0b3JzKGxvZ2dpbmdDb25uZWN0b3JzKSB7XG4gICAgICAgIHRoaXMubG9nZ2luZ0Nvbm5lY3RvcnMgPSBsb2dnaW5nQ29ubmVjdG9ycztcbiAgICB9XG4gICAgZGVidWcobWVzc2FnZSwgLi4uYXJncykge1xuICAgICAgICBpZiAodGhpcy5kZWJ1Z0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMubG9nKExvZ2dpbmdDaGFubmVscy5EZWZhdWx0LCBgREVCVUcgLSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9nKGNoYW5uZWwsIG1lc3NhZ2UsIC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKEVudmlyb25tZW50LmlzUHJvZHVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZWRDaGFubmVscy5pbmNsdWRlcyhjaGFubmVsKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYENoYW5uZWwgJyR7Y2hhbm5lbH0nXFxuYCwgbmV3IERhdGUoKSArICdcXG4nLCBtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgdGhpcy5sb2dnaW5nQ29ubmVjdG9ycy5mb3JFYWNoKChsb2dnaW5nQ29ubmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW50ZXJuYWxMb2dnaW5nQ29ubmVjdG9yKGxvZ2dpbmdDb25uZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvZ2dpbmdDb25uZWN0b3IuZ2V0RW5hYmxlZENoYW5uZWxzKCkuaW5jbHVkZXMoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci5sb2cobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXJnc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2dSYXcoY2hhbm5lbCwgbWVzc2FnZSwgLi4uYXJncykge1xuICAgICAgICBpZiAoRW52aXJvbm1lbnQuaXNQcm9kdWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZENoYW5uZWxzLmluY2x1ZGVzKGNoYW5uZWwpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgdGhpcy5sb2dnaW5nQ29ubmVjdG9ycy5mb3JFYWNoKChsb2dnaW5nQ29ubmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSW50ZXJuYWxMb2dnaW5nQ29ubmVjdG9yKGxvZ2dpbmdDb25uZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxvZ2dpbmdDb25uZWN0b3IuZ2V0RW5hYmxlZENoYW5uZWxzKCkuaW5jbHVkZXMoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci5sb2cobWVzc2FnZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXJnc1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2dFdmVudChtZXNzYWdlLCBldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMubG9nZ2luZ0Nvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25uZWN0b3JFdmVudCA9IHtcbiAgICAgICAgICAgIHZlbmRvcklkOiB0aGlzLnZlbmRvcklkLFxuICAgICAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubG9nZ2luZ0Nvbm5lY3RvcnMuZm9yRWFjaCgobG9nZ2luZ0Nvbm5lY3RvcikgPT4ge1xuICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci5sb2cobWVzc2FnZSwgY29ubmVjdG9yRXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gVE9ETyAtIHJldmlldyBpZiB3ZSBjYW4gbWVyZ2Ugd2l0aCBsb2dFdmVudFxuICAgIGxvZ1NlcnZpY2VFdmVudChzZXJ2aWNlLCBldmVudCkge1xuICAgICAgICB0aGlzLmNyZWF0ZUJhdGNoT3BlcmF0aW9uKHNlcnZpY2UsIGV2ZW50KTtcbiAgICAgICAgdGhpcy5sb2dCYXRjaCgpO1xuICAgIH1cbiAgICBsb2dTdG9yYWdlKHNlcnZpY2UsIG5hbWUsIHN0b3JhZ2UpIHtcbiAgICAgICAgc2V0RG9jKGRvYyhmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSwgYGRldmVsb3BlcnMvJHt0aGlzLnZlbmRvcklkfS8ke3NlcnZpY2V9LyR7bmFtZX1gKSwge1xuICAgICAgICAgICAgc3RvcmFnZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2dCYXRjaCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRCYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoLmNvdW50ZXIgKz0gMTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoLmNvdW50ZXIgPT09IHRoaXMuYmF0Y2hTaXplKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NCYXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmJhdGNoVGltZW91dCkge1xuICAgICAgICAgICAgdGhpcy5iYXRjaFRpbWVvdXQgPSB0aGlzLmdsb2JhbE9iamVjdC5zZXRUaW1lb3V0KCgpID0+IHRoaXMucHJvY2Vzc0JhdGNoKCksIHRoaXMudGltZW91dFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzQmF0Y2goKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50QmF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJhdGNoUXVldWUucHVzaCh0aGlzLmN1cnJlbnRCYXRjaCk7XG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gdGhpcy5jcmVhdGVOZXdCYXRjaCgpO1xuICAgICAgICB3aGlsZSAodGhpcy5iYXRjaFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoVG9Db21taXQgPSB0aGlzLmJhdGNoUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCB0aGlzLmNvbW1pdEJhdGNoKGJhdGNoVG9Db21taXQpO1xuICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuYmF0Y2hUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5iYXRjaFRpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVycm9yKG1lc3NhZ2UsIGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobmV3IERhdGUoKSwgbWVzc2FnZSwgZXZlbnQsIC4uLmFyZ3MpO1xuICAgICAgICBpZiAodGhpcy5sb2dnaW5nQ29ubmVjdG9ycykge1xuICAgICAgICAgICAgY29uc3QgY29ubmVjdG9yRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgdmVuZG9ySWQ6IHRoaXMudmVuZG9ySWQsXG4gICAgICAgICAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5sb2dnaW5nQ29ubmVjdG9ycy5mb3JFYWNoKChsb2dnaW5nQ29ubmVjdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2luZ0Nvbm5lY3Rvci5lcnJvcihtZXNzYWdlLCBjb25uZWN0b3JFdmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YXJuaW5nKG1lc3NhZ2UsIGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihuZXcgRGF0ZSgpLCBtZXNzYWdlLCBldmVudCwgYXJncyk7XG4gICAgICAgIGlmICh0aGlzLmxvZ2dpbmdDb25uZWN0b3JzKSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0b3JFdmVudCA9IHtcbiAgICAgICAgICAgICAgICB2ZW5kb3JJZDogdGhpcy52ZW5kb3JJZCxcbiAgICAgICAgICAgICAgICAuLi5ldmVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmxvZ2dpbmdDb25uZWN0b3JzLmZvckVhY2goKGxvZ2dpbmdDb25uZWN0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBsb2dnaW5nQ29ubmVjdG9yLndhcm4obWVzc2FnZSwgY29ubmVjdG9yRXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNDaGFubmVsRW5hYmxlZChjaGFubmVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZWRDaGFubmVscy5pbmNsdWRlcyhjaGFubmVsKTtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0QmF0Y2goYmF0Y2gsIHJldHJ5Q291bnQgPSAwKSB7XG4gICAgICAgIGlmIChiYXRjaC5jb3VudGVyID4gMCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBiYXRjaC5iYXRjaC5jb21taXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbW1pdHRpbmcgYmF0Y2g6JywgZXJyb3IsICdPcGVyYXRpb25zOicsIGJhdGNoLm9wZXJhdGlvbnMpO1xuICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgdGhpcy5yZXRyeUxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lZEJhdGNoID0gdGhpcy5jcmVhdGVCYXRjaChiYXRjaC5vcGVyYXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNvbW1pdEJhdGNoKGNsb25lZEJhdGNoLCByZXRyeUNvdW50ICsgMSksIHRoaXMucmV0cnlEZWxheSAqIE1hdGgucG93KDIsIHJldHJ5Q291bnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZUlkID0gJycsIG5vZGVUeXBlID0gJycsIGNsdXN0ZXJJZCA9ICcnIH0gPSBiYXRjaC5vcGVyYXRpb25zWzBdLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uczogYmF0Y2gub3BlcmF0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvcignRmFpbGVkIHRvIGNvbW1pdCBiYXRjaCBhZnRlciByZXRyaWVzOicsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2FkRW5hYmxlZENoYW5uZWxzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoTG9nZ2luZ0NoYW5uZWxzKS5mb3JFYWNoKCh1bnR5cGVkS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdW50eXBlZEtleTtcbiAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oYGNyZXdkbGUtc2RrLWxvZ2dpbmctJHtMb2dnaW5nQ2hhbm5lbHNba2V5XX1gKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTG9nZ2luZ1NlcnZpY2U6IGxvZ2dpbmcgZW5hYmxlZCBmb3InLCBMb2dnaW5nQ2hhbm5lbHNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZENoYW5uZWxzLnB1c2goTG9nZ2luZ0NoYW5uZWxzW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNJbnRlcm5hbExvZ2dpbmdDb25uZWN0b3IoY29ubmVjdG9yKSB7XG4gICAgICAgIHJldHVybiBjb25uZWN0b3IuZ2V0RW5hYmxlZENoYW5uZWxzICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNyZWF0ZU5ld0JhdGNoKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmF0Y2g6IHdyaXRlQmF0Y2goZmlyZWJhc2UuZ2V0RmlyZXN0b3JlKCkpLFxuICAgICAgICAgICAgb3BlcmF0aW9uczogW10sXG4gICAgICAgICAgICBjb3VudGVyOiAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNyZWF0ZUJhdGNoKG9wZXJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGZpcmViYXNlLmdldEZpcmVzdG9yZSgpKTtcbiAgICAgICAgb3BlcmF0aW9ucy5mb3JFYWNoKG9wID0+IHRoaXMuYWRkQmF0Y2hPcGVyYXRpb24oYmF0Y2gsIG9wKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiYXRjaCxcbiAgICAgICAgICAgIG9wZXJhdGlvbnMsXG4gICAgICAgICAgICBjb3VudGVyOiBvcGVyYXRpb25zLmxlbmd0aCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYWRkQmF0Y2hPcGVyYXRpb24oYmF0Y2gsIG9wZXJhdGlvbikge1xuICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdzZXQnOlxuICAgICAgICAgICAgICAgIGJhdGNoLnNldChvcGVyYXRpb24ucmVmLCBvcGVyYXRpb24uZGF0YSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd1cGRhdGUnOlxuICAgICAgICAgICAgICAgIGJhdGNoLnVwZGF0ZShvcGVyYXRpb24ucmVmLCBvcGVyYXRpb24uZGF0YSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgIGJhdGNoLmRlbGV0ZShvcGVyYXRpb24ucmVmKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVCYXRjaE9wZXJhdGlvbihzZXJ2aWNlLCBldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudEJhdGNoKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaCA9IHRoaXMuY3JlYXRlTmV3QmF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2dSZWYgPSBkb2MoY29sbGVjdGlvbihmaXJlYmFzZS5nZXRGaXJlc3RvcmUoKSwgYGRldmVsb3BlcnMvJHt0aGlzLnZlbmRvcklkfS9sb2dzYCkpO1xuICAgICAgICBjb25zdCBiYXRjaERhdGEgPSB7IC4uLmV2ZW50LCBzZXJ2aWNlLCB0aW1lc3RhbXA6IHNlcnZlclRpbWVzdGFtcCgpIH07XG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IHsgdHlwZTogJ3NldCcsIHBhdGg6IGxvZ1JlZi5wYXRoLCByZWY6IGxvZ1JlZiwgZGF0YTogYmF0Y2hEYXRhIH07XG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoLm9wZXJhdGlvbnMucHVzaChvcGVyYXRpb24pO1xuICAgICAgICB0aGlzLmFkZEJhdGNoT3BlcmF0aW9uKHRoaXMuY3VycmVudEJhdGNoLmJhdGNoLCBvcGVyYXRpb24pO1xuICAgICAgICByZXR1cm4gbG9nUmVmO1xuICAgIH1cbn1cbmNvbnN0IGxvZ2dlciA9IExvZ2dlci5nZXRJbnN0YW5jZSgpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuIiwiaW1wb3J0IHsgQ09OVEVOVF9DSEVDS1NVTV9DSFVOS19TSVpFLCBDT05URU5UX0ZJTEVfQ0hVTktfU0laRSB9IGZyb20gJ2NvbnN0YW50cy9Db250ZW50JztcbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXRoUGFydHMocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnNwbGl0KCcvJykuZmlsdGVyKChwYXJ0KSA9PiBwYXJ0Lmxlbmd0aCA+IDApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhOYW1lKHBhdGgsIG5hbWUpIHtcbiAgICByZXR1cm4gcGF0aCA9PT0gJy8nID8gcGF0aCArIG5hbWUgOiBwYXRoICsgJy8nICsgbmFtZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdFBhdGhOYW1lKHBhdGhOYW1lKSB7XG4gICAgY29uc3QgcGFydHMgPSBnZXRQYXRoUGFydHMocGF0aE5hbWUpO1xuICAgIGNvbnN0IG5hbWUgPSBwYXJ0cy5wb3AoKSB8fCAnJztcbiAgICBjb25zdCBwYXRoID0gcGFydHMuam9pbignLycpO1xuICAgIHJldHVybiBbcGF0aC5sZW5ndGggPT09IDAgPyAnLycgOiBwYXRoLCBuYW1lXTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaWxlQ2hlY2tzdW0oZmlsZSkge1xuICAgIGxldCBzYW1wbGVSYXRlO1xuICAgIGNvbnN0IGZpbGVTaXplTUIgPSBmaWxlLnNpemUgLyAoMTAyNCAqIDEwMjQpOyAvLyBGaWxlIHNpemUgaW4gTUJcbiAgICBpZiAoZmlsZVNpemVNQiA8PSAxMCkge1xuICAgICAgICBzYW1wbGVSYXRlID0gMTsgLy8gU2FtcGxlIDEwMCUgZm9yIGZpbGVzIDw9IDEwTUJcbiAgICB9XG4gICAgZWxzZSBpZiAoZmlsZVNpemVNQiA8PSAxMDApIHtcbiAgICAgICAgc2FtcGxlUmF0ZSA9IDAuNTsgLy8gU2FtcGxlIDUwJSBmb3IgZmlsZXMgYmV0d2VlbiAxME1CIGFuZCAxMDBNQlxuICAgIH1cbiAgICBlbHNlIGlmIChmaWxlU2l6ZU1CIDw9IDUwMCkge1xuICAgICAgICBzYW1wbGVSYXRlID0gMC4xOyAvLyBTYW1wbGUgMTAlIGZvciBmaWxlcyBiZXR3ZWVuIDEwME1CIGFuZCA1MDBNQlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2FtcGxlUmF0ZSA9IDAuMDU7IC8vIFNhbXBsZSA1JSBmb3IgZmlsZXMgbGFyZ2VyIHRoYW4gNTAwTUJcbiAgICB9XG4gICAgY29uc3QgdG90YWxDaHVua3MgPSBNYXRoLmNlaWwoZmlsZS5zaXplIC8gQ09OVEVOVF9DSEVDS1NVTV9DSFVOS19TSVpFKTtcbiAgICBjb25zdCBzYW1wbGVkQ2h1bmtzID0gTWF0aC5jZWlsKHRvdGFsQ2h1bmtzICogc2FtcGxlUmF0ZSk7XG4gICAgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBVaW50OEFycmF5IGZvciBoYXNoIGNvbnRleHRcbiAgICBsZXQgaW5jcmVtZW50YWxIYXNoID0gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZWRDaHVua3M7IGkrKykge1xuICAgICAgICBjb25zdCBzdGFydCA9IE1hdGguZmxvb3IoKGkgLyBzYW1wbGVkQ2h1bmtzKSAqIGZpbGUuc2l6ZSk7XG4gICAgICAgIGxldCBlbmQgPSBzdGFydCArIENPTlRFTlRfQ0hFQ0tTVU1fQ0hVTktfU0laRTtcbiAgICAgICAgaWYgKGVuZCA+IGZpbGUuc2l6ZSkge1xuICAgICAgICAgICAgZW5kID0gZmlsZS5zaXplO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rID0gZmlsZS5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgY2h1bmsuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgLy8gQ29uY2F0ZW5hdGUgdGhlIHByZXZpb3VzIGhhc2ggd2l0aCB0aGUgY3VycmVudCBjaHVua1xuICAgICAgICBjb25zdCBjb21iaW5lZEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KFsuLi5pbmNyZW1lbnRhbEhhc2gsIC4uLm5ldyBVaW50OEFycmF5KGJ1ZmZlcildKTtcbiAgICAgICAgaW5jcmVtZW50YWxIYXNoID0gbmV3IFVpbnQ4QXJyYXkoYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBjb21iaW5lZEJ1ZmZlcikpO1xuICAgIH1cbiAgICBjb25zdCBjaGVja3N1bSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaW5jcmVtZW50YWxIYXNoKSkubWFwKChieXRlKSA9PiBieXRlLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcbiAgICByZXR1cm4gY2hlY2tzdW07XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEZpbGVDb250ZW50KGZpbGUpIHtcbiAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJlYWRGaWxlSW5DaHVua3MoZmlsZSkpIHtcbiAgICAgICAgY2h1bmtzLnB1c2goY2h1bmspO1xuICAgIH1cbiAgICByZXR1cm4gY2h1bmtzO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiByZWFkRmlsZVN0cmVhbShmaWxlLCBzdGFydEluZGV4ID0gMCwgd2FpdEZvckFycmF5QnVmZmVyU2l6ZSkge1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgcmVhZEZpbGVJbkNodW5rcyhmaWxlLCBzdGFydEluZGV4LCB3YWl0Rm9yQXJyYXlCdWZmZXJTaXplKSkge1xuICAgICAgICB5aWVsZCBjaHVuaztcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUNvbnRlbnQoY29udGVudCwgbmFtZSwgdHlwZSkge1xuICAgIHJldHVybiBuZXcgRmlsZShjb250ZW50LCBuYW1lLCB7XG4gICAgICAgIHR5cGUsXG4gICAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiogcmVhZEZpbGVJbkNodW5rcyhmaWxlLCBzdGFydEluZGV4ID0gMCwgd2FpdEZvckFycmF5QnVmZmVyU2l6ZSkge1xuICAgIGxldCBzdGFydCA9IHN0YXJ0SW5kZXggKiBDT05URU5UX0ZJTEVfQ0hVTktfU0laRTtcbiAgICBjb25zdCBtYXhSZXRyaWVzID0gMjA7XG4gICAgbGV0IHN0cm9uZ0ZpbGVSZWYgPSBmaWxlO1xuICAgIHdoaWxlIChzdGFydCA8IHN0cm9uZ0ZpbGVSZWYuc2l6ZSkge1xuICAgICAgICBsZXQgZW5kID0gc3RhcnQgKyBDT05URU5UX0ZJTEVfQ0hVTktfU0laRTtcbiAgICAgICAgaWYgKGVuZCA+IHN0cm9uZ0ZpbGVSZWYuc2l6ZSkge1xuICAgICAgICAgICAgZW5kID0gc3Ryb25nRmlsZVJlZi5zaXplO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXRyaWVzID0gMDtcbiAgICAgICAgd2hpbGUgKHJldHJpZXMgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHdhaXRGb3JBcnJheUJ1ZmZlclNpemU/LigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rID0gc3Ryb25nRmlsZVJlZi5zbGljZShzdGFydCwgZW5kLCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgY2h1bmsuYXJyYXlCdWZmZXIoKTsgLy8gQFZpbmNlbnQgdGhpcyBpcyB3aGVyZSB0aGUgbGFzdCBjaHVuayBnZXRzIHN0dWNrXG4gICAgICAgICAgICAgICAgeWllbGQgYnVmZmVyO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gZW5kO1xuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcbiAgICAgICAgICAgICAgICAvLyBFeGl0IHJldHJ5IGxvb3Agb24gc3VjY2Vzc1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBmaWxlIGNodW5rIGFmdGVyICR7cmV0cmllcyArIDF9IGF0dGVtcHRzOmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXRyaWVzKys7XG4gICAgICAgICAgICAgICAgaWYgKHJldHJpZXMgPiBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmXG4gICAgICAgICAgICAgICAgbGV0IGRlbGF5ID0gTWF0aC5wb3coMiwgcmV0cmllcykgKiAxMDAwO1xuICAgICAgICAgICAgICAgIC8vIE5ldmVyIHdhaXQgbW9yZSB0aGFuIDMwIHNlY29uZHNcbiAgICAgICAgICAgICAgICBpZiAoZGVsYXkgPiAzMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxheSA9IDMwMDAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9ic2VydmVyKCkge1xuICAgIGxldCBsaXN0ZW5lcnMgPSBbXTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWJzY3JpYmU6IChsaXN0ZW5lcikgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuZmlsdGVyKGwgPT4gbCAhPT0gbGlzdGVuZXIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgcHVibGlzaDogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsID0+IGwoZXZlbnQpKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNpbmdsZU9ic2VydmVyKCkge1xuICAgIGxldCBsaXN0ZW5lciA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWJzY3JpYmU6IChuZXdMaXN0ZW5lcikgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIgPSBuZXdMaXN0ZW5lcjtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBwdWJsaXNoOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xufVxuIiwiaW1wb3J0IHsgUXVldWVFbGVtZW50UHJpb3JpdHkgfSBmcm9tICdpbnRlcmZhY2VzL1V0aWxzL1F1ZXVlJztcbmltcG9ydCBpbnRlcnZhbCBmcm9tICd1dGlscy9JbnRlcnZhbC9JbnRlcnZhbCc7XG5pbXBvcnQgeyBjcmVhdGVRdWV1ZSwgU3luY1F1ZXVlQ2FsbGJhY2ssIEFzeW5jUXVldWVDYWxsYmFjayB9IGZyb20gJ3V0aWxzL1F1ZXVlL1F1ZXVlJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcmlvcml0eVJldHJ5UXVldWUoY2FsbGJhY2ssIHByaW9yaXR5RW51bSA9IFF1ZXVlRWxlbWVudFByaW9yaXR5LCAvLyBOZWVkcyB0byBiZSBhbiBlbnVtIHdpdGggbm8gdmFsdWVzIG9yZGVyZWQgaW4gcHJpb3JpdHkgZnJvbSBoaWdoZXN0IHRvIGxvd2VzdFxucm91bmRSb2JpbiA9IGZhbHNlKSB7XG4gICAgbGV0IGlzUnVubmluZyA9IGZhbHNlO1xuICAgIGNvbnN0IHF1ZXVlcyA9IFtdO1xuICAgIE9iamVjdFxuICAgICAgICAudmFsdWVzKHByaW9yaXR5RW51bSlcbiAgICAgICAgLmZvckVhY2goKHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVzW3ZhbHVlXSA9IGNyZWF0ZVF1ZXVlKHByb2Nlc3NRdWV1ZSk7XG4gICAgfSk7XG4gICAgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICAgICAgICBpZiAoaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlcy5zb21lKChxdWV1ZSkgPT4gcXVldWUuaGVhZCkpIHtcbiAgICAgICAgICAgIGxldCBpdGVtID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgbGV0IHByaW9yaXR5ID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBxdWV1ZV0gb2YgcXVldWVzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHByaW9yaXR5ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIFN5bmNRdWV1ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIEFzeW5jUXVldWVDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjay5jYWxsKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocXVldWVzLnNsaWNlKC0xKS5zb21lKChxdWV1ZSkgPT4gcXVldWUuaGVhZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGxvd2VzdFByaW9yaXR5ID0gcXVldWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5ID09PSBsb3dlc3RQcmlvcml0eSAmJiBxdWV1ZXNbbG93ZXN0UHJpb3JpdHldLmhlYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaW50ZXJ2YWwud2FpdCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChyb3VuZFJvYmluKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlc1twcmlvcml0eV0ucHVzaChpdGVtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBxdWV1ZXNbcHJpb3JpdHldLnVuc2hpZnQoaXRlbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjay53YWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHF1ZXVlcyxcbiAgICB9O1xufVxuIiwiZXhwb3J0IGNsYXNzIFN5bmNRdWV1ZUNhbGxiYWNrIHtcbiAgICBjYWxsYmFjaztcbiAgICByZXRyeUNhbGxiYWNrO1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrLCByZXRyeUNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5yZXRyeUNhbGxiYWNrID0gcmV0cnlDYWxsYmFjaztcbiAgICB9XG4gICAgY2FsbChpdGVtKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2soaXRlbSk7XG4gICAgfVxuICAgIGFzeW5jIHdhaXQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmV0cnlDYWxsYmFjaygpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBc3luY1F1ZXVlQ2FsbGJhY2sge1xuICAgIGNhbGxiYWNrO1xuICAgIHJldHJ5Q2FsbGJhY2s7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHJldHJ5Q2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLnJldHJ5Q2FsbGJhY2sgPSByZXRyeUNhbGxiYWNrO1xuICAgIH1cbiAgICBhc3luYyBjYWxsKGl0ZW0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jYWxsYmFjayhpdGVtKTtcbiAgICB9XG4gICAgYXN5bmMgd2FpdCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZXRyeUNhbGxiYWNrKCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVF1ZXVlKHBvc3RJbnNlcnRIb29rID0gKCkgPT4geyB9LCBwcmVJbnNlcnRIb29rID0gKCkgPT4gZmFsc2UsIGNsZWFySG9vayA9ICgpID0+IHsgfSkge1xuICAgIGxldCBoZWFkID0gdW5kZWZpbmVkO1xuICAgIGxldCB0YWlsID0gdW5kZWZpbmVkO1xuICAgIGxldCBzaXplID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgaGVhZCgpIHtcbiAgICAgICAgICAgIHJldHVybiBoZWFkO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgdGFpbCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0YWlsO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgaGVhZCh2YWx1ZSkge1xuICAgICAgICAgICAgaGVhZCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQgdGFpbCh2YWx1ZSkge1xuICAgICAgICAgICAgdGFpbCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBwdXNoKGl0ZW0sIHJ1bkhvb2sgPSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdFbGVtZW50ID0geyB2YWx1ZTogaXRlbSB9O1xuICAgICAgICAgICAgaWYgKHJ1bkhvb2sgJiYgcHJlSW5zZXJ0SG9vayhuZXdFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIHBvc3RJbnNlcnRIb29rKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhaWwpIHtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50LnByZXZpb3VzID0gdGFpbDtcbiAgICAgICAgICAgICAgICB0YWlsLm5leHQgPSBuZXdFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFpbCA9IG5ld0VsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoIWhlYWQpIHtcbiAgICAgICAgICAgICAgICBoZWFkID0gbmV3RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNpemUgKz0gMTtcbiAgICAgICAgICAgIGlmIChydW5Ib29rKSB7XG4gICAgICAgICAgICAgICAgcG9zdEluc2VydEhvb2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcG9wKCkge1xuICAgICAgICAgICAgaWYgKCF0YWlsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0YWlsLnZhbHVlO1xuICAgICAgICAgICAgdGFpbCA9IHRhaWwucHJldmlvdXM7XG4gICAgICAgICAgICBpZiAodGFpbCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0YWlsLm5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRhaWwpIHtcbiAgICAgICAgICAgICAgICBoZWFkID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZSAtPSAxO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2hpZnQoaXRlbSwgcnVuSG9vayA9IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSB7IHZhbHVlOiBpdGVtIH07XG4gICAgICAgICAgICBpZiAocnVuSG9vayAmJiBwcmVJbnNlcnRIb29rKG5ld0VsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgcG9zdEluc2VydEhvb2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaGVhZCkge1xuICAgICAgICAgICAgICAgIGhlYWQucHJldmlvdXMgPSBuZXdFbGVtZW50O1xuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQubmV4dCA9IGhlYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFkID0gbmV3RWxlbWVudDtcbiAgICAgICAgICAgIGlmICghdGFpbCkge1xuICAgICAgICAgICAgICAgIHRhaWwgPSBuZXdFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZSArPSAxO1xuICAgICAgICAgICAgaWYgKHJ1bkhvb2spIHtcbiAgICAgICAgICAgICAgICBwb3N0SW5zZXJ0SG9vaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzaGlmdCgpIHtcbiAgICAgICAgICAgIGlmICghaGVhZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaGVhZC52YWx1ZTtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG4gICAgICAgICAgICBpZiAoaGVhZCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBoZWFkLnByZXZpb3VzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoZWFkKSB7XG4gICAgICAgICAgICAgICAgdGFpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNpemUgLT0gMTtcbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9LFxuICAgICAgICBjbGVhcigpIHtcbiAgICAgICAgICAgIGNsZWFySG9vaygpO1xuICAgICAgICAgICAgaGVhZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRhaWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBzaXplID0gMDtcbiAgICAgICAgfVxuICAgIH07XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVRdWV1ZSwgU3luY1F1ZXVlQ2FsbGJhY2ssIEFzeW5jUXVldWVDYWxsYmFjayB9IGZyb20gJ3V0aWxzL1F1ZXVlL1F1ZXVlJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXRyeVF1ZXVlKGNhbGxiYWNrLCByb3VuZFJvYmluID0gZmFsc2UsIHBvc3RQcm9jZXNzSG9vayA9ICgpID0+IHsgfSwgcHJlSW5zZXJ0SG9vayA9ICgpID0+IGZhbHNlLCBjbGVhckhvb2sgPSAoKSA9PiB7IH0pIHtcbiAgICBsZXQgaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgY29uc3QgcXVldWUgPSBjcmVhdGVRdWV1ZShwcm9jZXNzUXVldWUsIHByZUluc2VydEhvb2ssIGNsZWFySG9vayk7XG4gICAgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xuICAgICAgICBpZiAoaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgd2hpbGUgKHF1ZXVlLmhlYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIFN5bmNRdWV1ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayBpbnN0YW5jZW9mIEFzeW5jUXVldWVDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjYWxsYmFjay5jYWxsKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3N0UHJvY2Vzc0hvb2soaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChyb3VuZFJvYmluKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2goaXRlbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUudW5zaGlmdChpdGVtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IGNhbGxiYWNrLndhaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpc1J1bm5pbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXVlO1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlUmV0cnlRdWV1ZSB9IGZyb20gJ3V0aWxzL1F1ZXVlL1JldHJ5UXVldWUnO1xuLy8gQXN5bmMgcmV0cnkgdmVyc2lvbmVkIHF1ZXVlIGRvZXMgbm90IHdvcmssIGNyZWF0ZXMgaW5jb25zaXN0ZW50IGJlaGF2aW91ciB3aXRoIHRoZSBob29rc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVZlcnNpb25lZFJldHJ5UXVldWUoY2FsbGJhY2ssIHJvdW5kUm9iaW4gPSBmYWxzZSkge1xuICAgIGxldCB2ZXJzaW9ucyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBxdWV1ZSA9IGNyZWF0ZVJldHJ5UXVldWUoY2FsbGJhY2ssIHJvdW5kUm9iaW4sIHBvc3RQcm9jZXNzSG9vaywgcHJlSW5zZXJ0SG9vaywgY2xlYXJIb29rKTtcbiAgICBmdW5jdGlvbiBwcm9jZXNzVmVyc2lvbmVkRWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBlbGVtZW50LnZhbHVlO1xuICAgICAgICBpZiAoIWlzVmVyc2lvbmVkSXRlbShpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleSA9IGAke2l0ZW0uc291cmNlSWR9LSR7aXRlbS5kZXN0aW5hdGlvbklkcyA/PyBbXX0tJHtpdGVtLm1lc3NhZ2VUeXBlfS0ke2l0ZW0uY29udGVudC50eXBlfWA7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ID0geyB2ZXJzaW9uOiBpdGVtLmNvbnRlbnQudmVyc2lvbiwgZWxlbWVudCB9O1xuICAgICAgICBjb25zdCBpbmRleCA9IHZlcnNpb25zLmdldChrZXkpO1xuICAgICAgICBpZiAoIWluZGV4KSB7XG4gICAgICAgICAgICB2ZXJzaW9ucy5zZXQoa2V5LCBuZXdJbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4LnZlcnNpb24gPj0gaXRlbS5jb250ZW50LnZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleC5lbGVtZW50LnByZXZpb3VzKSB7XG4gICAgICAgICAgICBpbmRleC5lbGVtZW50LnByZXZpb3VzLm5leHQgPSBlbGVtZW50O1xuICAgICAgICAgICAgZWxlbWVudC5wcmV2aW91cyA9IGluZGV4LmVsZW1lbnQucHJldmlvdXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4LmVsZW1lbnQubmV4dCkge1xuICAgICAgICAgICAgaW5kZXguZWxlbWVudC5uZXh0LnByZXZpb3VzID0gZWxlbWVudDtcbiAgICAgICAgICAgIGVsZW1lbnQubmV4dCA9IGluZGV4LmVsZW1lbnQubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXguZWxlbWVudCA9PT0gcXVldWUuaGVhZCkge1xuICAgICAgICAgICAgcXVldWUuaGVhZCA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4LmVsZW1lbnQgPT09IHF1ZXVlLnRhaWwpIHtcbiAgICAgICAgICAgIHF1ZXVlLnRhaWwgPSBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHZlcnNpb25zLnNldChrZXksIG5ld0luZGV4KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzVmVyc2lvbmVkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtLmhhc093blByb3BlcnR5KCdjb250ZW50JykgJiYgaXRlbS5oYXNPd25Qcm9wZXJ0eSgnbWVzc2FnZVR5cGUnKSAmJiBpdGVtLmhhc093blByb3BlcnR5KCdzb3VyY2VJZCcpKSB7XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uZWRJdGVtID0gaXRlbTtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uZWRJdGVtLmNvbnRlbnQgJiYgdHlwZW9mIHZlcnNpb25lZEl0ZW0uY29udGVudCA9PT0gJ29iamVjdCcgJiYgdmVyc2lvbmVkSXRlbS5jb250ZW50Lmhhc093blByb3BlcnR5KCd2ZXJzaW9uJykgJiYgdmVyc2lvbmVkSXRlbS5jb250ZW50Lmhhc093blByb3BlcnR5KCd0eXBlJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHByZUluc2VydEhvb2soZWxlbWVudCkge1xuICAgICAgICBpZiAocHJvY2Vzc1ZlcnNpb25lZEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXJIb29rKCkge1xuICAgICAgICB2ZXJzaW9ucy5jbGVhcigpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb3N0UHJvY2Vzc0hvb2soaXRlbSkge1xuICAgICAgICBpZiAoaXNWZXJzaW9uZWRJdGVtKGl0ZW0pKSB7XG4gICAgICAgICAgICB2ZXJzaW9ucy5kZWxldGUoYCR7aXRlbS5zb3VyY2VJZH0tJHtpdGVtLmRlc3RpbmF0aW9uSWRzID8/IFtdfS0ke2l0ZW0ubWVzc2FnZVR5cGV9LSR7aXRlbS5jb250ZW50LnR5cGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHF1ZXVlO1xufVxuIiwiaW1wb3J0IHsgTG9nZ2luZ0NoYW5uZWxzIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9Mb2dnZXInO1xuaW1wb3J0IHsgU3VwcG9ydEZlYXR1cmVOYW1lIH0gZnJvbSAnaW50ZXJmYWNlcy9VdGlscy9TdXBwb3J0JztcbmltcG9ydCBsb2dnZXIgZnJvbSAndXRpbHMvTG9nZ2VyL0xvZ2dlcic7XG4vLyBFeHBvc2UgdmlhIFNES1xuY2xhc3MgU3VwcG9ydCB7XG4gICAgc3RhdGljIGluc3RhbmNlO1xuICAgIGZlYXR1cmVTdXBwb3J0ID0gW107XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIGlmICghU3VwcG9ydC5pbnN0YW5jZSkge1xuICAgICAgICAgICAgU3VwcG9ydC5pbnN0YW5jZSA9IG5ldyBTdXBwb3J0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFN1cHBvcnQuaW5zdGFuY2U7XG4gICAgfVxuICAgIGluaXRpYWxpemUoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tXZWJSVEMoKTtcbiAgICAgICAgdGhpcy5jaGVja01lZGlhU3RyZWFtKCk7XG4gICAgICAgIHRoaXMuY2hlY2tTY3JlZW5TaGFyaW5nKCk7XG4gICAgICAgIHRoaXMuY2hlY2tBdWRpb1ZvbHVtZSgpO1xuICAgICAgICB0aGlzLmNoZWNrRGV2aWNlQ29uZmlnKCk7XG4gICAgICAgIHRoaXMuY2hlY2tBdWRpb091dHB1dCgpO1xuICAgICAgICB0aGlzLmNoZWNrTWVkaWFSZWNvcmRpbmcoKTtcbiAgICAgICAgdGhpcy5jaGVja0JhY2tncm91bmRzKCk7XG4gICAgICAgIHRoaXMuY2hlY2tXZWJHTCgpO1xuICAgICAgICB0aGlzLmNoZWNrQXVkaW9Db250ZXh0KCk7XG4gICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsICdTdXBwb3J0OiBjdXJyZW50IGNvbmZpZycsIHtcbiAgICAgICAgICAgIGZlYXR1cmVTdXBwb3J0OiB0aGlzLmZlYXR1cmVTdXBwb3J0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNGZWF0dXJlU3VwcG9ydGVkKGZlYXR1cmVOYW1lKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmUgPSB0aGlzLmZlYXR1cmVTdXBwb3J0LmZpbmQoZiA9PiBmLm5hbWUgPT09IGZlYXR1cmVOYW1lKTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmUgPyBmZWF0dXJlLnN1cHBvcnRlZCA6IGZhbHNlO1xuICAgIH1cbiAgICBsb2dTdXBwb3J0KG5vZGUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZ0V2ZW50KCdzdXBwb3J0Jywge1xuICAgICAgICAgICAgbm9kZUlkOiBub2RlLmdldElkKCksXG4gICAgICAgICAgICBub2RlVHlwZTogbm9kZS50eXBlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGZlYXR1cmVTdXBwb3J0OiB0aGlzLmZlYXR1cmVTdXBwb3J0LFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2hlY2tXZWJSVEMoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLldlYlJUQztcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9uID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgUlRDSWNlQ2FuZGlkYXRlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja01lZGlhU3RyZWFtKCkge1xuICAgICAgICBjb25zdCBmZWF0dXJlTmFtZSA9IFN1cHBvcnRGZWF0dXJlTmFtZS5NZWRpYVN0cmVhbTtcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIE1lZGlhU3RyZWFtID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgTWVkaWFTdHJlYW1UcmFjayA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgdHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja1NjcmVlblNoYXJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLlNjcmVlblNoYXJpbmc7XG4gICAgICAgIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzWydnZXREaXNwbGF5TWVkaWEnXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICB9XG4gICAgY2hlY2tBdWRpb1ZvbHVtZSgpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuQXVkaW9Wb2x1bWU7XG4gICAgICAgIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBBdWRpb0NvbnRleHQgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgICh0eXBlb2YgU2NyaXB0UHJvY2Vzc29yTm9kZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBBdWRpb1dvcmtsZXROb2RlID09PSAnZnVuY3Rpb24nKSAmJlxuICAgICAgICAgICAgdHlwZW9mIE1lZGlhU3RyZWFtQXVkaW9Tb3VyY2VOb2RlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja0RldmljZUNvbmZpZygpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuRGV2aWNlQ29uZmlnO1xuICAgICAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMgPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICB0eXBlb2YgTWVkaWFEZXZpY2VJbmZvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVTdXBwb3J0LnB1c2goeyBuYW1lOiBmZWF0dXJlTmFtZSwgc3VwcG9ydGVkIH0pO1xuICAgIH1cbiAgICBjaGVja0F1ZGlvT3V0cHV0KCkge1xuICAgICAgICBjb25zdCBmZWF0dXJlTmFtZSA9IFN1cHBvcnRGZWF0dXJlTmFtZS5BdWRpb091dHB1dDtcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2aWRlby5zZXRTaW5rSWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICB9XG4gICAgYXN5bmMgY2hlY2tNZWRpYVJlY29yZGluZygpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuUmVjb3JkaW5nO1xuICAgICAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIGlmICghIU1lZGlhUmVjb3JkZXIgJiYgISFNZWRpYVNvdXJjZSAmJiBjYW52YXMuY2FwdHVyZVN0cmVhbSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGNhbnZhcy5jYXB0dXJlU3RyZWFtKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihzdHJlYW0pO1xuICAgICAgICAgICAgICAgIHJlY29yZGVyLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMDApKTtcbiAgICAgICAgICAgICAgICByZWNvcmRlci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkID0gcmVjb3JkZXIuc3RhdGUgPT09ICdpbmFjdGl2ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IGNoZWNrIGZhaWxlZGAsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICAgICAgaWYgKCFzdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tCYWNrZ3JvdW5kcygpIHtcbiAgICAgICAgY29uc3QgZmVhdHVyZU5hbWUgPSBTdXBwb3J0RmVhdHVyZU5hbWUuQmFja2dyb3VuZHM7XG4gICAgICAgIGxldCBzdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgaWYgKCEhY2FudmFzLmNhcHR1cmVTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBjaGVjayBmYWlsZWRgLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmVhdHVyZVN1cHBvcnQucHVzaCh7IG5hbWU6IGZlYXR1cmVOYW1lLCBzdXBwb3J0ZWQgfSk7XG4gICAgICAgIGlmICghc3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKExvZ2dpbmdDaGFubmVscy5TdXBwb3J0LCBgU3VwcG9ydDogJHtmZWF0dXJlTmFtZX0gbm90IHN1cHBvcnRlZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoZWNrV2ViR0woKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLldlYkdMO1xuICAgICAgICBsZXQgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIGlmICghIVdlYkdMUmVuZGVyaW5nQ29udGV4dCAmJiBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKSkge1xuICAgICAgICAgICAgICAgIHN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhMb2dnaW5nQ2hhbm5lbHMuU3VwcG9ydCwgYFN1cHBvcnQ6ICR7ZmVhdHVyZU5hbWV9IGNoZWNrIGZhaWxlZGAsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICAgICAgaWYgKCFzdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tBdWRpb0NvbnRleHQoKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gU3VwcG9ydEZlYXR1cmVOYW1lLkF1ZGlvQ29udGV4dDtcbiAgICAgICAgbGV0IHN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIEF1ZGlvQ29udGV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coTG9nZ2luZ0NoYW5uZWxzLlN1cHBvcnQsIGBTdXBwb3J0OiAke2ZlYXR1cmVOYW1lfSBub3Qgc3VwcG9ydGVkYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mZWF0dXJlU3VwcG9ydC5wdXNoKHsgbmFtZTogZmVhdHVyZU5hbWUsIHN1cHBvcnRlZCB9KTtcbiAgICB9XG59XG5jb25zdCBzdXBwb3J0ID0gU3VwcG9ydC5nZXRJbnN0YW5jZSgpO1xuZXhwb3J0IGRlZmF1bHQgc3VwcG9ydDtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBhd3MtYW1wbGlmeS9hcGlcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGF3cy1hbXBsaWZ5L2NvcmVcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGNyZXdkbGUvbWlzdC1jb25uZWN0b3ItaW5kZXhlZC1kYlwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAY3Jld2RsZS9taXN0LWNvbm5lY3Rvci1vcGZzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBjcmV3ZGxlL21pc3QtY29ubmVjdG9yLXdlYnJ0Yy1icm93c2VyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIkBjcmV3ZGxlL3dlYi1zZGstdHlwZXNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXdzLWFtcGxpZnlcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYXdzLWFtcGxpZnkvdXRpbHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UvYXBwXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZpcmViYXNlL2F1dGhcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UvZGF0YWJhc2VcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZmlyZWJhc2UvZmlyZXN0b3JlXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZpcmViYXNlL2Z1bmN0aW9uc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyeGpzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInV1aWRcIik7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsImEiLCJpIiwidGhpcyIsIkNPTk5FQ1RJT05fTUlOIiwiQ09OTkVDVElPTl9NQVgiLCJDT05ORUNUSU9OX0dST1VQX1JFVFJZX0RFTEFZIiwiQ09OTkVDVElPTl9NQVhfQlVGRkVSX1NJWkUiLCJDT05URU5UX0ZJTEVfQ0hVTktfU0laRSIsIkNPTlRFTlRfRlBTIiwiQ09OVEVOVF9NQVhfV0lEVEgiLCJDT05URU5UX01BWF9IRUlHSFQiLCJDT05URU5UX0JQUCIsIkNPTlRFTlRfVVBEQVRFX0RFQk9VTkNFIiwiQ09OVEVOVF9DSEVDS1NVTV9DSFVOS19TSVpFIiwiQ09OVEVOVF9GSUxFX0NIVU5LU19NQVhfQlVGRkVSX1NJWkUiLCJDT05URU5UX0ZJTEVfSEVBREVSX1NJWkUiLCJDT05URU5UX1BVQlNVQl9UT1BJQ19TVEFUU19ERUJPVU5DRSIsIkNPTlRFTlRfT0JKRUNUX1NUT1JFX0xBU1RfVFJBTlNBQ1RJT05fT0JKRUNUX05BTUUiLCJDT05URU5UX09CSkVDVF9TVE9SRV9QRU5ESU5HX0VYVEVOU0lPTiIsIkNPTlRFTlRfT0JKRUNUX1NUT1JFX1BFTkRJTkdfUkVUUllfREVMQVkiLCJDT05URU5UX09CSkVDVF9TVE9SRV9TVEFUU19ERUJPVU5DRSIsIkNPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1RSQU5TQUNUSU9OX1RBQkxFX05BTUUiLCJDT05URU5UX0tFWV9WQUxVRV9EQVRBQkFTRV9MQVlPVVRfVEFCTEVfTkFNRSIsIkNPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NZTkNfVElNRU9VVCIsIkNPTlRFTlRfS0VZX1ZBTFVFX0RBVEFCQVNFX1NUQVRTX0RFQk9VTkNFIiwiQ09OVEVOVF9WRUNUT1JfREFUQUJBU0VfU1RBVFNfREVCT1VOQ0UiLCJDT05URU5UX0dSQVBIX0RBVEFCQVNFX1NUQVRTX0RFQk9VTkNFIiwiQ09OVEVOVF9KT0JfU0VSVklDRV9GQUlMRURfUkVUUllfREVMQVkiLCJDT05URU5UX0pPQl9TRVJWSUNFX01BWF9SRVRSSUVTIiwiQ09OVEVOVF9KT0JfU0VSVklDRV9NQVhfQU5TV0VSX1RJTUVPVVQiLCJDT05URU5UX0dFTkVSQVRJVkVfQUlfQ09OVEVYVF9BTlNXRVJfVElNRU9VVCIsIkNPTlRFTlRfR0VORVJBVElWRV9BSV9DT05URVhUX1NUQVRTX0RFQk9VTkNFIiwiQ09OVEVOVF9HRU5FUkFUSVZFX0FJX1dPUktFUl9TVEFUU19ERUJPVU5DRSIsIkNPTlRFTlRfR0VORVJBVElWRV9BSV9NT0RFTF9FWFRFTlNJT04iLCJDT05URU5UX0dFTkVSQVRJVkVfQUlfTUFYX0NPTlRFWFRfTEVOR1RIIiwiREVURUNUSU9OX0lTU1VFX1RJTUVPVVQiLCJERVRFQ1RJT05fSVNTVUVfU1RfVEhSRVNIT0xEIiwiREVURUNUSU9OX0lTU1VFX0RUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9JU1NVRV9CSVRSQVRFX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9JU1NVRV9KSVRURVJfVEhSRVNIT0xEIiwiREVURUNUSU9OX0lTU1VFX1JUVF9USFJFU0hPTEQiLCJJbmZpbml0eSIsIkRFVEVDVElPTl9JU1NVRV9BVl9ERUxBWV9USFJFU0hPTEQiLCJERVRFQ1RJT05fSVNTVUVfVFBGX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9JU1NVRV9GUFNfVEhSRVNIT0xEIiwiREVURUNUSU9OX0NPUkVfSVNTVUVfUlVMRVMiLCJ0eXBlIiwiSXNzdWVUeXBlIiwiU1RWb2xhdGlsaXR5IiwicmVwb3J0TWV0cmljIiwicmVwb3J0IiwibWF4VGhyZXNob2xkIiwiRFRWb2xhdGlsaXR5IiwiREVURUNUSU9OX1ZJREVPX0lTU1VFX1JVTEVTIiwiVGltZVBlckZyYW1lIiwidGltZVBlckZyYW1lTGltaXQiLCJGUFMiLCJ0aW1lUGVyRnJhbWUiLCJCaXRyYXRlIiwidGFyZ2V0Qml0cmF0ZSIsImZyYW1lV2lkdGgiLCJmcmFtZUhlaWdodCIsImJpdHJhdGUiLCJtaW5UaHJlc2hvbGQiLCJKaXR0ZXIiLCJqaXR0ZXIiLCJGcmFtZVBlclNlY29uZCIsIkRFVEVDVElPTl9BVURJT19JU1NVRV9SVUxFUyIsIkRFVEVDVElPTl9TRU5ERVJfSVNTVUVfUlVMRVMiLCJSb3VuZFRyaXBUaW1lIiwicm91bmRUcmlwVGltZSIsIkRFVEVDVElPTl9SRUNFSVZFUl9JU1NVRV9SVUxFUyIsIkF1ZGlvVmlkZW9EZWxheSIsIkRFVEVDVElPTl9QUk9CTEVNX1NUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9QUk9CTEVNX0RUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9QUk9CTEVNX1RQRl9USFJFU0hPTEQiLCJERVRFQ1RJT05fUFJPQkxFTV9BVl9ERUxBWV9USFJFU0hPTEQiLCJERVRFQ1RJT05fUFJPQkxFTV9GUFNfVEhSRVNIT0xEIiwiREVURUNUSU9OX1BST0JMRU1fQklUUkFURV9USFJFU0hPTEQiLCJERVRFQ1RJT05fUFJPQkxFTV9KSVRURVJfVEhSRVNIT0xEIiwiREVURUNUSU9OX1BST0JMRU1fUlRUX1RIUkVTSE9MRCIsIkRFVEVDVElPTl9QUk9CTEVNX1JVTEVTIiwiUHJvYmxlbVR5cGUiLCJDUFVDeWNsZSIsImlzc3VlcyIsInRocmVzaG9sZCIsIklOVEVSVkFMX1RJTUUiLCJOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FIiwiTk9ERV9VUERBVEVfREVCT1VOQ0VfVElNRV9NQVgiLCJOT0RFX1VQREFURV9ERUJPVU5DRV9USU1FX0xJTUlUIiwiTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FIiwiTk9ERV9QUk9DRVNTX1JBTktfREVCT1VDRV9USU1FX01BWCIsIk5PREVfUFJPQ0VTU19SQU5LX0RFQk9VQ0VfVElNRV9MSU1JVCIsIk5PREVfRElTVEFOQ0VfSE9QIiwiTk9ERV9ESVNUQU5DRV9SRVNPTFVUSU9OIiwiTk9ERV9ESVNUQU5DRV9UUkFDS1MiLCJOT0RFX0RJU1RBTkNFX01BWCIsIk5PREVfQ0xFQU5fUkVNT1RFX05PREVTX0lOVEVSVkFMIiwiTk9ERV9DTEVBTl9SRU1PVEVfTk9ERVNfVEhSRVNIT0xEIiwiTk9ERV9BR0VOVF9DQVBBQ0lUWV9SRVBPUlRfSU5URVJWQUwiLCJQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BJTkciLCJQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX1BPTkciLCJQRUVSX0NPTk5FQ1RJT05fSEVBUlRCRUFUX0lOVEVSVkFMIiwiUEVFUl9DT05ORUNUSU9OX0hFQVJUQkVBVF9USFJFU0hPTEQiLCJQRUVSX0NPTk5FQ1RJT05fUkVDT05ORUNUX1RJTUVPVVQiLCJQRUVSX0NPTk5FQ1RJT05fVElNRU9VVCIsIlBFRVJfQ09OTkVDVElPTl9IRUFSVEJFQVRfVElNRU9VVCIsIlBFRVJfQ09OTkVDVElPTl9NRVNTQUdFX1JFVFJZIiwiUEVFUl9DT05ORUNUSU9OX0hBTkRTSEFLRV9ERUJPVU5DRSIsIlBFRVJfQ09OTkVDVElPTl9DSFVOS19JREVOVElGSUVSIiwiUEVFUl9DT05ORUNUSU9OX0NIVU5LX1NJWkUiLCJQRUVSX0NPTk5FQ1RJT05fQlVGRkVSX0xPV19USFJFU0hPTEQiLCJQRUVSX0NPTk5FQ1RJT05fQlVGRkVSX01BWF9USFJFU0hPTEQiLCJQRUVSX0NPTk5FQ1RJT05fREFUQUNIQU5ORUxfUkVUUllfREVMQVkiLCJQRUVSX0NPTk5FQ1RJT05fREFUQUNIQU5ORUxfRElTQ09OTkVDVF9IQU5ETEVSX0RFTEFZIiwiUkVNRURJQVRJT05fRE9XTkdSQURFX1dBSVRfVElNRSIsIlJFTUVESUFUSU9OX1VQR1JBREVfV0FJVF9USU1FIiwiUkVNRURJQVRJT05fTUlOX0ZQUyIsIlJFTUVESUFUSU9OX01BWF9SRVNPTFVUSU9OX1NDQUxFIiwiUkVNRURJQVRJT05fTUlOX0JJVFJBVEUiLCJSRU1FRElBVElPTl9SRVNPTFVUSU9OX1NDQUxFIiwiUkVNRURJQVRJT05fRlBTIiwiUkVNRURJQVRJT05fQklUUkFURSIsIlJFTUVESUFUSU9OX1JVTEVTIiwicHJvYmxlbVR5cGUiLCJyZW1lZGlhdGlvbnMiLCJSZW1lZGlhdGlvbk1lc3NhZ2VUeXBlIiwiUmVtZWRpYXRpb24iLCJjb21wb25lbnQiLCJSZW1lZGlhdGlvbkNvbXBvbmVudCIsIlJlc29sdXRpb24iLCJhY3Rpb24iLCJSZW1lZGlhdGlvbkFjdGlvbiIsIkRvd25ncmFkZSIsIlJlbW90ZVJlbWVkaWF0aW9uIiwiU0RLX1JFRlJFU0hfSU5URVJWQUwiLCJTREtfRklSRVNUT1JFX0FQUF9OQU1FIiwiTUVTU0FHRV9CVUZGRVJfUkVURU5USU9OX1RJTUUiLCJNRVNTQUdFX0JVRkZFUl9DTEVBTlVQX0lOVEVSVkFMIiwiVFJBTlNBQ1RJT05fUEVSX1BBR0UiLCJTVEFUU19DT0xMRUNUX0RFTEFZIiwiU1RBVFNfUkVQT1JUX0RFTEFZIiwiU1RBVFNfT1VUQk9VTkQiLCJTVEFUU19SRU1PVEVfSU5CT1VORCIsIlNUQVRTX0lOQk9VTkQiLCJTVEFUU19TRU5ERVJfRklMVEVSUyIsIlNUQVRTX1JFQ0VJVkVSX0ZJTFRFUlMiLCJTVUJTQ1JJUFRJT05fUkVRVUVTVF9USU1FT1VUIiwiU1VCU0NSSVBUSU9OX01BWF9SRVRSWV9DT1VOVCIsIlNVQlNDUklQVElPTl9NQVhfT1VUR09JTkciLCJTVUJTQ1JJUFRJT05fUkVUUllfREVMQVkiLCJTVUJTQ1JJUFRJT05fUkVRVUVTVF9SRVRSWV9ERUxBWSIsIlNZU1RFTV9UT1BJQyIsIlNZU1RFTV9UT1BJQ19JTlRFUk5BTCIsImVudmlyb25tZW50IiwiaXNPYmplY3QiLCJpdGVtIiwiQXJyYXkiLCJpc0FycmF5IiwibWVyZ2VEZWVwIiwidGFyZ2V0Iiwic291cmNlcyIsImxlbmd0aCIsInNvdXJjZSIsInNoaWZ0Iiwia2V5IiwiT2JqZWN0IiwiYXNzaWduIiwiRW52aXJvbm1lbnQiLCJ2ZXJzaW9uIiwiaXNQcm9kdWN0aW9uIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJhdXRoRG9tYWluIiwiZGF0YWJhc2VVUkwiLCJwcm9qZWN0SWQiLCJzdG9yYWdlQnVja2V0IiwiYXBwSWQiLCJmdW5jdGlvbnNSZWdpb24iLCJnb29nbGUiLCJzZWFyY2hFbmdpbmVJZCIsImF3cyIsImVuZHBvaW50IiwicmVnaW9uIiwibWVzc2FnaW5nU2VuZGVySWQiLCJtZWFzdXJlbWVudElkIiwiRWFybHlSZXR1cm5FcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJlcnJvciIsInN1cGVyIiwiU0RLSW50ZXJuYWxFcnJvckNvZGVzIiwibWVzc2FnZXMiLCJNYXAiLCJDb25uZWN0aW9uTm90aW5pdGlhbGl6ZWQiLCJDb25uZWN0aW9uTm90Q29ubmVjdGVkIiwiQ29ubmVjdGlvbk5vUmV0cnlRdWV1ZSIsIkNvbm5lY3Rpb25JbnZhbGlkRGF0YUV2ZW50IiwiR2VuZXJhdGl2ZUFJQ29udGV4dENyZWF0aW9uRmFpbGVkIiwiR2VuZXJhdGl2ZUFJQ29udGV4dEpvYkZhaWxlZCIsIkdlbmVyYXRpdmVBSUNvbnRleHRKb2JUaW1lb3V0IiwiR2VuZXJhdGl2ZUFJQ29udGV4dEludmFsaWRQYXJ0aWFsUmVzdWx0IiwiR2VuZXJhdGl2ZUFJV29ya2VyQ3JlYXRpb25GYWlsZWQiLCJHcmFwaERhdGFiYXNlQ3JlYXRpb25GYWlsZWQiLCJJbnZhbGlkRGF0YUNoYW5uZWwiLCJJbnZhbGlkUHVibGlzaGVyIiwiSW52YWxpZFN1YnNjcmliZXIiLCJJbnZhbGlkU3Vic2NyaXB0aW9uIiwiSm9iRGlzcGF0Y2hlckNyZWF0aW9uRmFpbGVkIiwiSm9iRGlzcGF0Y2hlckludmFsaWRQYXlsb2FkIiwiSm9iRGlzcGF0Y2hlckpvYk5vdEZvdW5kIiwiSm9iRGlzcGF0Y2hlck9ic2VydmVyTm90Rm91bmQiLCJKb2JXb3JrZXJDcmVhdGlvbkZhaWxlZCIsIkpvYldvcmtlckludmFsaWRUeXBlIiwiS2V5VmFsdWVEYXRhYmFzZUNyZWF0aW9uRmFpbGVkIiwiS2V5VmFsdWVEYXRhYmFzZVRhYmxlRG9lc05vdEV4aXN0IiwiS2V5VmFsdWVEYXRhYmFzZVRyYW5zYWN0aW9uVGFibGVOb3RJbml0aWFsaXplZCIsIktleVZhbHVlRGF0YWJhc2VUcmFuc2FjdGlvblZhbHVlTm90U2V0IiwiTG9jYWxNZWRpYVN0cmVhbURvZXNOb3RFeGlzdCIsIk1pc3NpbmdSZW1vdGVDb25uZWN0aW9uIiwiTWlzc2luZ1N5c3RlbVRvcGljIiwiTWlzdGxldENhcGFjaXR5UmVwb3J0Tm90U2V0IiwiT2JqZWN0U3RvcmVDYW5ub3RXcml0ZVRyYW5zYWN0aW9uIiwiT2JqZWN0U3RvcmVJbnZhbGlkU3luY01lc3NhZ2UiLCJPYmplY3RTdG9yZUludmFsaWRTdGF0ZSIsIk9iamVjdFN0b3JlTm90U3luY2VkIiwiT3V0Z29pbmdNZWRpYVN0cmVhbU5vVG9waWMiLCJSZW1vdGVNZWRpYVN0cmVhbURvZXNOb3RFeGlzdCIsIlJlbW90ZU1lZGlhU3RyZWFtTWlzc2luZ1Byb3ZpZGVySWQiLCJSZW1vdGVDb25uZWN0aW9uRXhpc3RzIiwiU3Vic2NyaXB0aW9uUmVxdWVzdERvZXNOb3RFeGlzdCIsIlN1YnNjcmlwdGlvblJlcXVlc3RGYWlsZWQiLCJTdWJzY3JpcHRpb25SZXF1ZXN0Tm9BbnN3ZXIiLCJOb2RlRG9lc05vdEV4aXN0IiwiTm9kZUFscmVhZHlFeGlzdCIsIlBlZXJDb25uZWN0aW9uSW52YWxpZERlc3RpbmF0aW9uIiwiVmVjdG9yRGF0YWJhc2VDcmVhdGlvbkZhaWxlZCIsIldvcmtmbG93RG9lc05vdEV4aXN0IiwiV29ya2Zsb3dJbnZhbGlkQmxvY2tUeXBlIiwiU0RLSW50ZXJuYWxFcnJvciIsImNvZGUiLCJzdGF0aWMiLCJkYXRhIiwiZ2V0IiwiSlNPTiIsInN0cmluZ2lmeSIsIlRyYWNlVHlwZSIsIkFJUmV0cmlldmVUcmFjZUJsb2NrIiwiQUlUcmFjZUxldmVsIiwiQUlUcmFjZVR5cGUiLCJBSUluZ2VzdFRyYWNlQmxvY2siLCJQZWVyQ29ubmVjdGlvblR5cGUiLCJQZWVyQ29ubmVjdGlvbk1lc3NhZ2VUeXBlIiwiUGVlckNvbm5lY3Rpb25PcmlnaW4iLCJDb250ZW50TWVzc2FnZVR5cGUiLCJJbnRlcm5hbE9iamVjdFN0b3JlUGF5bG9hZEFjdGlvbiIsIkludGVybmFsT2JqZWN0U3RvcmVQYXlsb2FkVHlwZSIsIkludGVybmFsRGF0YWJhc2VUYWJsZVdyaXRlQWN0aW9uIiwiSW50ZXJuYWxEYXRhYmFzZVRhYmxlUmVhZEFjdGlvbiIsIkludGVybmFsSm9iUGhhc2UiLCJEZXRlY3Rpb25NZXNzYWdlVHlwZSIsIk5vZGVTdGF0dXMiLCJOb2RlTWVzc2FnZVR5cGUiLCJJSW50ZXJuYWxGZWF0dXJlcyIsIldvcmtmbG93QmxvY2tUeXBlIiwiRGF0YUNvbGxlY3Rpb25CbG9ja1R5cGUiLCJCbG9ja0xpbmtUeXBlIiwiU3RhdHNNZXNzYWdlVHlwZSIsIk1lZGlhU3Vic2NyaXB0aW9uQWN0aW9uIiwiU3Vic2NyaXB0aW9uUmVxdWVzdFR5cGUiLCJTdWJzY3JpcHRpb25UeXBlIiwiU3Vic2NyaXB0aW9uTWVzc2FnZVR5cGUiLCJTeXN0ZW1NZXNzYWdlVHlwZSIsIkxvZ2dpbmdTZXJ2aWNlcyIsIkxvZ2dpbmdDaGFubmVscyIsIlF1ZXVlRWxlbWVudFByaW9yaXR5IiwiU3VwcG9ydEZlYXR1cmVOYW1lIiwiQ2x1c3RlciIsInZlbmRvcklkIiwiY2x1c3RlcklkIiwiYXV0aE5vZGUiLCJldmVudEVtaXR0ZXIiLCJvcmNoZXN0cmF0b3IiLCJhdXRoU2VydmljZSIsIm9wdGlvbnMiLCJjb25maWdzIiwiQ2x1c3RlckV2ZW50RW1pdHRlciIsIk9yY2hlc3RyYXRvciIsImpvaW4iLCJpbml0aWFsaXplIiwiTm9kZVR5cGUiLCJVc2VyIiwicmVnaXN0ZXJDbHVzdGVyIiwidXNlciIsInVwZGF0ZVVzZXIiLCJsZWF2ZSIsImNsb3NlIiwidW5yZWdpc3RlckNsdXN0ZXIiLCJlbWl0IiwidW5kZWZpbmVkIiwib3BlblB1YlN1YlRvcGljIiwibmFtZSIsInN0cmVhbSIsImdldE5hbWUiLCJiaW5kIiwiZ2V0T3duZXJJZCIsImdldENvbnRlbnRUeXBlIiwicHVibGlzaCIsInN1YnNjcmliZSIsInVuc3Vic2NyaWJlIiwib3Blbk9iamVjdFN0b3JlQnVja2V0IiwibGFiZWwiLCJ1bnB1Ymxpc2giLCJsaXN0IiwiZ2V0U2l6ZSIsIm9wZW5LZXlWYWx1ZURhdGFiYXNlIiwibGF5b3V0IiwiZGIiLCJnZXRUYWJsZSIsIm9wZW5Kb2JEaXNwYXRjaGVyIiwiam9iU2VydmljZSIsImNyZWF0ZUpvYiIsImdldEpvYiIsImdldEpvYnMiLCJvcGVuSm9iV29ya2VyIiwiam9iV29ya2VyIiwib3BlbkdlbmVyYXRpdmVBSUNvbnRleHQiLCJnZW5lcmF0aXZlQUlDb250ZXh0IiwicHJvbXB0IiwiZ2V0RGF0YUJ1Y2tldElkcyIsIm9wZW5HZW5lcmF0aXZlQUlXb3JrZXIiLCJhaVdvcmtlciIsIm9wZW5HcmFwaERhdGFiYXNlIiwiYWRkTm9kZSIsImFkZEVkZ2UiLCJnZXRDb250ZW50Iiwib3BlblZlY3RvckRhdGFiYXNlIiwic2VhcmNoIiwiaW5zZXJ0IiwicmVtb3ZlIiwiZ2V0UHViU3ViVG9waWNzIiwic3RyYXRlZ3kiLCJtYXAiLCJnZXRPYmplY3RTdG9yZUJ1Y2tldHMiLCJnZXRLZXlWYWx1ZURhdGFiYXNlcyIsImdldEdlbmVyYXRpdmVBSUNvbnRleHRzIiwiY29udGV4dCIsImdldEdlbmVyYXRpdmVBSVdvcmtlcnMiLCJ3b3JrZXIiLCJwdWJsaXNoTG9jYWxNZWRpYVN0cmVhbSIsIm1lZGlhU291cmNlIiwiY3JlYXRlTG9jYWxNZWRpYVN0cmVhbSIsImdldExhYmVsIiwiZ2V0TWVkaWFTdHJlYW0iLCJzZXRQcmlvcml0eSIsInB1Ymxpc2hMb2NhbER5bmFtaWNNZWRpYVN0cmVhbSIsImNyZWF0ZUxvY2FsRHluYW1pY01lZGlhU3RyZWFtIiwiYWRkVHJhY2siLCJyZW1vdmVUcmFjayIsInJlcGxhY2VUcmFjayIsInNldFRyYW5zZm9ybWF0aW9ucyIsImdldExvY2FsTWVkaWFTdHJlYW1zIiwiZ2V0UmVtb3RlTWVkaWFTdHJlYW1zIiwiZ2V0QXZhaWxhYmxlVHJhY2tLaW5kcyIsInVwZGF0ZSIsIm9uUHJvdmlkZXJDaGFuZ2UiLCJnZXRHcmFwaERhdGFiYXNlcyIsImdldFZlY3RvckRhdGFiYXNlcyIsImdldExvY2FsTm9kZSIsIm5vZGUiLCJnZXRJZCIsImdldERpc3BsYXlOYW1lIiwiZ2V0RW1haWwiLCJnZXRSZW1vdGVDb25uZWN0aW9ucyIsInNldERpc3BsYXlOYW1lIiwic2V0RW1haWwiLCJBZ2VudCIsImdldFJlbW90ZU5vZGVzIiwiU0RLQ2xpZW50RXJyb3IiLCJTREtDbGllbnRFcnJvckNvZGVzIiwiTm9kZUludmFsaWRUeXBlIiwib24iLCJhcmdzIiwib2ZmIiwicmVnaXN0ZXJlZExpc3RlbmVycyIsImJ1ZmZlcmVkRXZlbnRzIiwiZXZlbnRUYXJnZXQiLCJFdmVudFRhcmdldCIsImV2ZW50IiwiaGFzIiwibG9nIiwiRXZlbnRzIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiYnVmZmVyRXZlbnQiLCJsaXN0ZW5lciIsImV2ZW50VGFyZ2V0TGlzdGVuZXIiLCJzZXQiLCJhZGRFdmVudExpc3RlbmVyIiwiY29uc3VtZUJ1ZmZlcmVkRXZlbnRzIiwiZXZlbnRzIiwiZm9yRWFjaCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbGVhciIsInJlbW92ZUxpc3RlbmVyIiwiZGVsZXRlIiwiYnVmZmVyZWREYXRhIiwiQXBwU3luY1B1YlN1YkNvbm5lY3Rpb24iLCJCYXNlQ29ubmVjdGlvbiIsImNvbm5lY3Rpb25TdGF0ZSIsIkNvbm5lY3Rpb25TdGF0ZSIsIkRpc2Nvbm5lY3RlZCIsImNvbm5lY3Rpb25TdGF0ZUxpc3RlbmVyIiwiY3JlYXRlU2luZ2xlT2JzZXJ2ZXIiLCJtZXNzYWdlTGlzdGVuZXJzIiwiY3JlYXRlT2JzZXJ2ZXIiLCJzdWJzY3JpcHRpb24iLCJsaXN0ZW5VbnN1YnNjcmliZXIiLCJyZXRyeVF1ZXVlIiwiY3JlYXRlUmV0cnlRdWV1ZSIsIkFzeW5jUXVldWVDYWxsYmFjayIsInNlbmRBY3Rpb24iLCJ3YWl0Q29ubmVjdGVkIiwiY2xpZW50IiwibG9jYWxOb2RlIiwicmVtb3RlSWQiLCJjb25uZWN0IiwibXlUb2tlblByb3ZpZGVyIiwiZ2V0VG9rZW5zIiwiYXN5bmMiLCJhY2Nlc3NUb2tlbiIsImdldElkVG9rZW4iLCJkZWNvZGVKV1QiLCJpZFRva2VuIiwiQW1wbGlmeSIsImNvbmZpZ3VyZSIsIkFQSSIsIkdyYXBoUUwiLCJkZWZhdWx0QXV0aE1vZGUiLCJBdXRoIiwidG9rZW5Qcm92aWRlciIsImdlbmVyYXRlQ2xpZW50IiwiSHViIiwibGlzdGVuIiwicGF5bG9hZCIsIkNPTk5FQ1RJT05fU1RBVEVfQ0hBTkdFIiwibm9kZUlkIiwiZ2V0TG9jYWxJZCIsIm5vZGVUeXBlIiwiQ29ubmVjdGVkIiwid2FybmluZyIsInN0YXRlIiwiZSIsImlzQ29ubmVjdGVkIiwic2VuZCIsInB1c2giLCJvbk1lc3NhZ2UiLCJjYWxsYmFjayIsImdldFN1cHBvcnRlZENvbnRlbnRUeXBlcyIsIkNvbnRlbnRUeXBlIiwiRGF0YSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGVzdGluYXRpb25JZHMiLCJkZXN0aW5hdGlvbklkIiwiU2lnbmFsaW5nIiwiZ3JhcGhxbCIsInF1ZXJ5IiwidmFyaWFibGVzIiwiZ2V0SGFzaCIsImF1dGhUb2tlbiIsIkF1dGhvcml6YXRpb24iLCJuZXh0IiwibWVzc2FnZSIsInBhcnNlIiwiaXNTZW5kZXIiLCJpc1JlY2VpdmVyIiwiY29uc29sZSIsImhhc2hCdWZmZXIiLCJjcnlwdG8iLCJzdWJ0bGUiLCJkaWdlc3QiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsImZyb20iLCJVaW50OEFycmF5IiwiYiIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJnZXRSZW1vdGVJZCIsIkJhc2VQZWVyQ29ubmVjdGlvbiIsImljZVNlcnZlcnMiLCJjb25uZWN0aW9uVHlwZSIsImNvbm5lY3Rpb25Db25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJkYXRhQ2hhbm5lbCIsImN1cnJlbnRWZXJzaW9uIiwic3lzdGVtVG9waWMiLCJoYW5kc2hha2VDYW5kaWRhdGVzIiwicGVuZGluZ0hhbmRzaGFrZUNhbmRpZGF0ZXMiLCJoYW5kc2hha2VEZWJvdW5jZSIsImhhbmRzaGFrZVNlcnZlcnMiLCJzZXR1cENvbm5lY3Rpb25FdmVudHMiLCJzdG9wQ29ubmVjdGlvbiIsInNldENvbm5lY3Rpb25UeXBlIiwiaGFuZGxlSGFuZHNoYWtlIiwiY2FuZGlkYXRlcyIsImNhbmRpZGF0ZSIsImNhbkFkZENhbmRpZGF0ZXMiLCJhZGRQZW5kaW5nSGFuZHNoYWtlQ2FuZGlkYXRlIiwiYWRkQ2FuZGlkYXRlIiwibG9nQ29ubmVjdGlvblN0YXRlIiwiaW5jbHVkZXMiLCJoYW5kc2hha2VTdGF0ZSIsInNpZ25hbGluZ1N0YXRlIiwicmVnaXN0ZXJTeXN0ZW1QdWJsaXNoZXIiLCJwdWJsaXNoZXIiLCJ1bnJlZ2lzdGVyU3lzdGVtUHVibGlzaGVyIiwicmVzZXRDb25uZWN0aW9uIiwicHJvY2Vzc1BlbmRpbmdIYW5kc2hha2VDYW5kaWRhdGVzIiwicHVibGlzaFN5c3RlbU1lc3NhZ2UiLCJjb250ZW50IiwidXVpZCIsImNvZGVzIiwic291cmNlSWQiLCJwcm9wYWdhdGUiLCJDb3JlIiwicmV0cnkiLCJtZXNzYWdlVHlwZSIsIlBlZXJDb25uZWN0aW9uIiwib25HYXRoZXJpbmdTdGF0ZUNoYW5nZSIsImdhdGhlcmluZ1N0YXRlIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInNlbmRJY2VDYW5kaWRhdGVzIiwib25DYW5kaWRhdGUiLCJvbkNsb3NlIiwib25IYW5kc2hha2VTdGF0ZUNoYW5nZSIsIm9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlIiwib25UcmFjayIsIm9uRGF0YUNoYW5uZWwiLCJsb2NhbElkIiwiZGF0YUNoYW5uZWxTdGF0ZSIsIkNvbm5lY3Rpb25NYW5hZ2VyIiwiY29ubmVjdGlvbnMiLCJjb25uZWN0aW9uUG9vbCIsImNvbm5lY3Rpb25Hcm91cCIsInNpZ25hbGluZ1NlcnZlciIsIm1lc3NhZ2VCdWZmZXIiLCJncmFwaFNlcnZpY2UiLCJNZXNzYWdlQnVmZmVyU2VydmljZSIsIlBlZXJDb25uZWN0aW9uR3JvdXAiLCJQZWVyQ29ubmVjdGlvblBvb2wiLCJhZGRDb25uZWN0aW9uIiwibWVkaWF0b3IiLCJyZWdpc3RlclN5c3RlbVNvdXJjZSIsIl8iLCJjbG9zZUNvbm5lY3Rpb24iLCJ1bnJlZ2lzdGVyU3lzdGVtU291cmNlIiwicmVtb3ZlQ29ubmVjdGlvbiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJnZXRDb25uZWN0aW9uVHlwZSIsIk9wdGltaXphdGlvbiIsIm1heEZwcyIsIm1heEJwcCIsInBlZXJDb25uZWN0aW9uQ29ubmVjdG9yIiwicmVnaXN0ZXJSZW1vdGVOb2RlIiwiZ2V0Q29ubmVjdGlvbkdyb3VwIiwiZ2V0Q29ubmVjdGlvbiIsImdldENvbm5lY3Rpb25zIiwidmFsdWVzIiwiZmlsdGVyIiwiY29sbGVjdFN0YXRzIiwiaGFuZGxlT3V0Z29pbmdTeXN0ZW1FdmVudHMiLCJoYW5kbGVQZWVyQ29ubmVjdGlvblN5c3RlbUV2ZW50cyIsIkRpc2Nvbm5lY3QiLCJTdGF0cyIsIk9wdGltaXphdGlvbkNvbm5lY3Rpb25TdWNjZXNzIiwiaXNPZmZlciIsImlzSWNlQ2FuZGlkYXRlIiwiaXNOZWVkUmVzdGFydCIsImhhbmRsZVJlbWVkaWF0aW9uU3lzdGVtRXZlbnRzIiwidGFyZ2V0SWQiLCJoYW5kbGVOb2RlU3lzdGVtRXZlbnRzIiwiTm9kZUxlYXZlIiwiaWQiLCJ3YWl0Rm9yQXJyYXlCdWZmZXJTaXplIiwiYnVmZmVyU2l6ZSIsInJlZHVjZSIsImFjYyIsImNhbGN1bGF0ZUFycmF5QnVmZmVyU2l6ZSIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJuZXdCdWZmZXJTaXplIiwiY2xlYXJJbnRlcnZhbCIsImhhc0J1ZmZlcmVkRGF0YSIsImdldEJ1ZmZlcmVkQW1vdW50IiwidW5yZWdpc3RlclJlbW90ZU5vZGUiLCJPZmZlciIsIk5lZWRSZXN0YXJ0IiwiSGFuZHNoYWtlIiwic2VuZGVyQ29ubmVjdGlvbiIsInJlY2VpdmVyQ29ubmVjdGlvbiIsInJlY2VpdmVyVW5zdWJzY3JpYmVycyIsInRyYWNrTGlzdGVuZXJzIiwicmVtb3ZlVHJhY2tMaXN0ZW5lcnMiLCJsaXN0ZW5lclVuc3Vic2NyaWJlcnMiLCJkYXRhVG9waWNzIiwiZGF0YVVuc3Vic2NyaWJlcnMiLCJtZWRpYVRvcGljcyIsIm1lZGlhVW5zdWJzY3JpYmVycyIsInN1Y2Nlc3NOb3RpZmllZCIsInJlZ2lzdGVyUHVibGlzaGVyIiwiUHViU3ViIiwiT2JqZWN0U3RvcmUiLCJLZXlWYWx1ZURhdGFiYXNlIiwiSm9iIiwiVmVjdG9yRGF0YWJhc2UiLCJHcmFwaERhdGFiYXNlIiwiTWVkaWEiLCJ1bnJlZ2lzdGVyUHVibGlzaGVyIiwicmVnaXN0ZXJTdWJzY3JpYmVyIiwic3Vic2NyaWJlciIsIkFkZCIsInRyYWNrIiwicHJpb3JpdHkiLCJwYXJhbXMiLCJSZW1vdmUiLCJVcGRhdGUiLCJzZXRQYXJhbXMiLCJ1bnJlZ2lzdGVyU3Vic2NyaWJlciIsInNldHVwTGlzdGVuZXJzIiwiY3JlYXRlT2ZmZXIiLCJzZW5kZXJDb25uZWN0ZWQiLCJyZWNlaXZlckNvbm5lY3RlZCIsIm9uUmVtb3ZlVHJhY2siLCJDb25uZWN0aW9uIiwiaGFuZGxlT2ZmZXIiLCJBbnN3ZXIiLCJoYW5kbGVBbnN3ZXIiLCJTdWNjZXNzIiwiaGFuZGxlU3VjY2VzcyIsImhhbmRsZUljZUNhbmRpZGF0ZXMiLCJoYW5kbGVOZWVkUmVzdGFydCIsIlJlc3RhcnQiLCJhcHBseVJlbWVkaWF0aW9uIiwidG9waWNMYWJlbCIsImdldFRvcGljTGFiZWwiLCJjb250ZW50VHlwZSIsIlJlbW90ZUFkZCIsInByb3ZpZGVySWQiLCJSZW1vdGVSZW1vdmUiLCJvcmlnaW4iLCJTZW5kZXIiLCJjcmVhdGVSZWNlaXZlckNvbm5lY3Rpb24iLCJjcmVhdGVTZW5kZXJDb25uZWN0aW9uIiwib2ZmZXIiLCJhbnN3ZXIiLCJTZW5kZXJQZWVyQ29ubmVjdGlvbiIsIlJlY2VpdmVyUGVlckNvbm5lY3Rpb24iLCJtZXNzYWdlVW5zdWJzY3JpYmVyIiwicmV0cnlRdWV1ZXMiLCJoYXNNZXNzYWdlIiwiYWRkTWVzc2FnZSIsImNyZWF0ZVZlcnNpb25lZFJldHJ5UXVldWUiLCJTeW5jUXVldWVDYWxsYmFjayIsIndhaXQiLCJrZXlzIiwic2l6ZSIsImZpbmQiLCJleGlzdGluZ1JlY2lwaWVudHMiLCJyZWNpcGllbnRzIiwiZmlsdGVyZWREZXN0aW5hdGlvbklkcyIsImV4dGVuZGVkUmVjaXBpZW50cyIsInVwZGF0ZVByb3BhZ2F0aW9uUHJvcGVydGllcyIsInNob3VsZENvbnRpbnVlUHJvcGFnYXRpb24iLCJsb2dQcm9wYWdhdGVTeXN0ZW1FdmVudCIsImdldENvbm5lY3Rpb25EZXN0aW5hdGlvbnMiLCJuZXdQcm9wZXJ0aWVzIiwicmVjaXBpZW50IiwiU2V0IiwiZm9ybWF0dGVkU3lzdGVtTG9nIiwiZ2V0Rm9ybWF0dGVkU3l0ZW1Mb2ciLCJsb2dSYXciLCJTeXN0ZW0iLCJjb25uZWN0aW9uSWRzIiwibnVtYmVyT2ZDb25uZWN0aW9uc1RvQ2hvb3NlIiwibm9kZUlkcyIsImdldENsb3Nlc3ROb2RlcyIsIm5vZGVJZHNDb3VudCIsIm9wdGltaXphdGlvbkNvdW50IiwiYWRkIiwiZmlsdGVyQ29ubmVjdGlvbiIsImNvbm5lY3Rpb25JZCIsIlBvb2wiLCJtZXNzYWdlQ2FsbGJhY2siLCJ0cmFja0NhbGxiYWNrIiwicmVtb3ZlVHJhY2tDYWxsYmFjayIsInJlY2VpdmVycyIsImNodW5rcyIsIndhaXRTdWNjZXNzIiwibWVzc2FnZXNSZWNlaXZlZCIsInN5c3RlbU1lc3NhZ2VzUmVjZWl2ZWQiLCJ0b3RhbCIsImJ5dGVzUmVjZWl2ZWQiLCJ0aW1lUmVjZWl2aW5nIiwiY2xlYXJXYWl0U3VjY2VzcyIsImNyZWF0ZUFuc3dlciIsImNvbGxlY3RSZWNlaXZlcnNTdGF0cyIsInN0YXRzIiwic3RyZWFtSWQiLCJzZW5kU3RhdHMiLCJSZWNlaXZlciIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJzeXN0ZW1NZXNzYWdlcyIsInRyYWNrcyIsInN0cmVhbXMiLCJvbnJlbW92ZXRyYWNrIiwicmVtb3ZlRXZlbnQiLCJjaGFubmVsIiwiaGFuZGxlT25NZXNzYWdlIiwic3RhcnRzV2l0aCIsImhhbmRsZUNodW5rTWVzc2FnZSIsInN0YXJ0VGltZSIsIkFycmF5QnVmZmVyIiwiYnl0ZUxlbmd0aCIsImhlYWRlciIsInNwbGl0UGFydHMiLCJzeXN0ZW1NZXNzYWdlVHlwZSIsInN5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZSIsImdldExvZ2dhYmxlU3lzdGVtTWVzc2FnZSIsImluZm8iLCJzcGxpdCIsImNodW5rIiwicGFyc2VJbnQiLCJjaHVua0RhdGEiLCJyZXBsYWNlIiwiYXJyYXlCdWZmZXJUb09iamVjdCIsImJ1ZmZlciIsImpzb25TdHJpbmciLCJUZXh0RGVjb2RlciIsImRlY29kZSIsImhlYWRlclNpemVWaWV3Iiwic2xpY2UiLCJoZWFkZXJTaXplIiwiVWludDMyQXJyYXkiLCJoZWFkZXJWaWV3IiwiY29udGVudFZpZXciLCJzZW5kZXJzIiwiaGVhcnRiZWF0VW5zdWJzY3JpYmVyIiwid2FpdEFuc3dlciIsImxhc3RIZWFydGJlYXQiLCJpc1JlY29ubmVjdGluZyIsImNvbm5lY3Rpb25UaW1lb3V0IiwicmVzdGFydFRpbWVvdXQiLCJ1cGdyYWRlVGltZW91dCIsImNyZWF0ZVByaW9yaXR5UmV0cnlRdWV1ZSIsIndhaXRTZW5kQnVmZmVyIiwibWVzc2FnZXNTZW50IiwiYnl0ZXNTZW50IiwidGltZVNlbmRpbmciLCJvbmNsb3NlVGltZW91dCIsImNsZWFyVXBncmFkZVRpbWVvdXQiLCJjbGVhckhlYXJ0YmVhdCIsImNsZWFyUmVzdGFydFRpbWVvdXQiLCJjbGVhckNvbm5lY3Rpb25UaW1lb3V0IiwiY2xlYXJXYWl0QW5zd2VyIiwicXVldWVzIiwicXVldWUiLCJjbGVhck9uY2xvc2VUaW1lb3V0IiwiY29sbGVjdFNlbmRlcnNTdGF0cyIsImhhbmRsZURpc2Nvbm5lY3QiLCJjcmVhdGVEYXRhQ2hhbm5lbCIsImJ1ZmZlcmVkQW1vdW50TG93VGhyZXNob2xkIiwic3RhcnRIZWFydGJlYXQiLCJldmVudE1lc3NhZ2UiLCJlbmNvZGVkTWVzc2FnZSIsIm1lcmdlUGFydHMiLCJzZW5kQ2h1bmtlZCIsIlN1YnNjcmlwdGlvbiIsIkhpZ2giLCJMb3ciLCJNZWRpdW0iLCJzZW5kV2l0aFJldHJ5IiwibWF4Qml0cmF0ZSIsImdldE1heEJpdHJhdGUiLCJyZXNvbHV0aW9uU2NhbGUiLCJtaW5SZXNvbHV0aW9uU2NhbGUiLCJmcmFtZXJhdGUiLCJtYXhGcmFtZXJhdGUiLCJraW5kIiwic2VuZGVyIiwicmVzb2x1dGlvbiIsIm1heFJlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uU2NhbGUiLCJ2aWRlbyIsInNldEVuY29kaW5nUGFyYW1ldGVycyIsIk1hdGgiLCJmbG9vciIsInNldFVwZ3JhZGVUaW1lb3V0IiwicmVtZWRpYXRpb24iLCJmaW5kU2VuZGVyIiwidmlkZW9TZW5kZXIiLCJidWZmZXJlZEFtb3VudCIsImF1ZGlvIiwib25CdWZmZXJlZEFtb3VudExvdyIsIm1lc3NhZ2VTdHJpbmciLCJpbmRleE9mIiwiaGVhZCIsInZhbHVlIiwidW5zaGlmdCIsImluaXRpYWxQb25nIiwiaGFuZGxlTWlzc2luZ1NlbmRlcnMiLCJjYW5SZXN0YXJ0SGFuZHNoYWtlIiwicmVzdGFydEhhbmRzaGFrZSIsImhhbmRzaGFrZVJlc3RhcnQiLCJpY2VDb25uZWN0aW9uU3RhdGUiLCJyZWFkeVN0YXRlIiwiVXBncmFkZSIsInNjYWxlIiwibWF4Iiwid2lkdGgiLCJoZWlnaHQiLCJtaW4iLCJvYmplY3RUb0FycmF5QnVmZmVyIiwib2JqIiwiaGVhZGVyQnVmZmVyIiwibWVyZ2VkIiwiQmFzZURhdGFTdHJlYW0iLCJCYXNlU3RyZWFtIiwib3V0Z29pbmdUb3BpYyIsImluY29taW5nVG9waWMiLCJmaWxlQ2h1bmtzIiwib3duZXIiLCJnZXRJbnRlcm5hbFN0cmVhbUlkIiwidG9waWMiLCJEYXRhU3RyZWFtIiwiRmlsZSIsInJlYWRGaWxlQ29udGVudCIsImluZGV4IiwiY2h1bmtzUmVjZWl2ZWQiLCJjaGVja3N1bSIsImdldEZpbGVDb250ZW50IiwiQmFzZUxvY2FsTWVkaWFTdHJlYW0iLCJCYXNlTWVkaWFTdHJlYW0iLCJNZWRpYVN0cmVhbVByaW9yaXR5IiwiRGVmYXVsdCIsInRyYWNrRW5kZWRMaXN0ZW5lcnMiLCJvdXRnb2luZ1N0cmVhbXMiLCJNZWRpYVN0cmVhbSIsInNyY09iamVjdCIsImNhcHR1cmVTdHJlYW0iLCJtZWRpYVN0cmVhbSIsImdldFRyYWNrcyIsInNldHVwVHJhY2tFbmRlZExpc3RlbmVycyIsImxvZ1NlcnZpY2VFdmVudCIsInRyYWNrS2luZHMiLCJkZXN0cm95Iiwib3V0Z29pbmdTdHJlYW0iLCJDb250ZW50IiwiUHVibGlzaE1lZGlhU3RyZWFtIiwib3duZXJJZCIsImF2YWlsYWJsZVRyYWNrS2luZHMiLCJVbnB1Ymxpc2hNZWRpYVN0cmVhbSIsIkNsb3NlTWVkaWFTdHJlYW0iLCJnZXRQcmlvcml0eSIsImdldFNoYXJlYWJsZVN0cmVhbSIsIk91dGdvaW5nTWVkaWFTdHJlYW0iLCJvblVucmVnaXN0ZXJQdWJsaXNoZXIiLCJnZXRTaGFyZWFibGVTdHJlYW1JZCIsImhhbmRsZUxvY2FsVHJhY2tGYWlsdXJlIiwiTG9jYWxNZWRpYVN0cmVhbVRyYWNrRmFpbCIsIkNvbnRlbnRNYW5hZ2VyIiwic2VhcmNoQXBpS2V5IiwibG9jYWxNZWRpYVN0cmVhbXMiLCJyZW1vdGVNZWRpYVN0cmVhbXMiLCJwdWJTdWJUb3BpY3MiLCJvYmplY3RTdG9yZXMiLCJrZXlWYWx1ZURhdGFiYXNlcyIsInZlY3RvckRhdGFiYXNlcyIsImdyYXBoRGF0YWJhc2VzIiwiam9iRGlzcGF0Y2hlcnMiLCJqb2JXb3JrZXJzIiwidHJhbnNhY3Rpb25TZXJ2aWNlIiwiRmlyZWJhc2VSREJUcmFuc2FjdGlvblNlcnZpY2UiLCJyZXNldCIsInJlbW92ZVJlbW90ZU1lZGlhU3RyZWFtIiwicmVtb3ZlTG9jYWxNZWRpYVN0cmVhbSIsInJlbW92ZVB1YlN1YlRvcGljIiwicmVtb3ZlT2JqZWN0U3RvcmUiLCJyZW1vdmVLZXlWYWx1ZURhdGFiYXNlIiwicmVtb3ZlSm9iRGlzcGF0Y2hlciIsInJlbW92ZUpvYldvcmtlciIsInJlbW92ZVZlY3RvckRhdGFiYXNlIiwicmVtb3ZlR3JhcGhEYXRhYmFzZSIsImNyZWF0ZU9iamVjdFN0b3JlQnVja2V0IiwiY29ubmVjdG9yQ29uc3RydWN0b3IiLCJPYmplY3RTdG9yZUFscmVhZHlFeGlzdHMiLCJkYXRhU3RyZWFtIiwiY3JlYXRlS2V5VmFsdWVEYXRhYmFzZSIsIktleVZhbHVlRGF0YWJhc2VBbHJlYWR5RXhpc3RzIiwia2V5VmFsdWVEYXRhYmFzZSIsImNyZWF0ZUpvYkRpc3BhdGNoZXIiLCJKb2JEaXNwYXRjaGVyQWxyZWFkeUV4aXN0cyIsImpvYkRpc3BhdGNoZXIiLCJKb2JEaXNwYXRjaGVyIiwiY3JlYXRlSm9iV29ya2VyIiwiY2FwYWNpdHlSZXBvcnRlciIsIndvcmtlckNvbm5lY3RvciIsIkpvYldvcmtlckFscmVhZHlFeGlzdHMiLCJKb2JXb3JrZXIiLCJjcmVhdGVHZW5lcmF0aXZlQUlDb250ZXh0IiwiR2VuZXJhdGl2ZUFJQ29udGV4dEFscmVhZHlFeGlzdHMiLCJHZW5lcmF0aXZlQUlMYWJlbENvbmZsaWN0IiwiR2VuZXJhdGl2ZUFJQ29udGV4dCIsImNyZWF0ZUdlbmVyYXRpdmVBSVdvcmtlciIsImdlbmVyYXRpdmVBSVdvcmtlckNvbm5lY3RvcnMiLCJkb2N1bWVudFBhcnNlckNvbm5lY3RvciIsIm5scExpYnJhcnlDb25uZWN0b3IiLCJzZWFyY2hDb25uZWN0b3IiLCJHZW5lcmF0aXZlQUlXb3JrZXJBbHJlYWR5RXhpc3RzIiwiR2VuZXJhdGl2ZUFJV29ya2VyIiwiY3JlYXRlR3JhcGhEYXRhYmFzZSIsIkdyYXBoRGF0YWJhc2VBbHJlYWR5RXhpc3RzIiwiZ3JhcGhEYXRhYmFzZSIsIkxvY2FsTWVkaWFTdHJlYW1BbHJlYWR5RXhpc3RzIiwiYXVkaW9Db250ZXh0IiwiTG9jYWxNZWRpYVN0cmVhbU5vQXVkaW9Db250ZXh0IiwibG9jYWxNZWRpYVN0cmVhbSIsIkxvY2FsRHluYW1pY01lZGlhU3RyZWFtIiwiTG9jYWxNZWRpYVN0cmVhbSIsImNyZWF0ZVB1YlN1YlRvcGljIiwiUHViU3ViVG9waWNBbHJlYWR5RXhpc3RzIiwiUHViU3ViVG9waWMiLCJjcmVhdGVSZW1vdGVNZWRpYVN0cmVhbSIsImludGVybmFsSWQiLCJSZW1vdGVNZWRpYVN0cmVhbUFscmVhZHlFeGlzdHMiLCJyZW1vdGVOb2RlIiwicmVtb3RlTWVkaWFTdHJlYW0iLCJSZW1vdGVNZWRpYVN0cmVhbSIsImNyZWF0ZVZlY3RvckRhdGFiYXNlIiwiVmVjdG9yRGF0YWJhc2VBbHJlYWR5RXhpc3RzIiwidmVjdG9yRGF0YWJhc2UiLCJnZXRKb2JEaXNwYXRjaGVycyIsImdldEpvYldvcmtlcnMiLCJnZW5lcmF0aXZlQUlDb250ZXh0cyIsInJlbW90ZVN0cmVhbXMiLCJnZXRPYmplY3RTdG9yZUJ1Y2tldCIsIm9iamVjdFN0b3JlIiwiT2JqZWN0U3RvcmVEb2VzTm90RXhpc3QiLCJnZXRHcmFwaERhdGFiYXNlIiwiR3JhcGhEYXRhYmFzZURvZXNOb3RFeGlzdCIsImdldEtleVZhbHVlRGF0YWJhc2UiLCJLZXlWYWx1ZURhdGFiYXNlRG9lc05vdEV4aXN0IiwiZ2V0UHViU3ViVG9waWMiLCJwdWJTdWJUb3BpYyIsIlB1YlN1YlRvcGljRG9lc05vdEV4aXN0IiwiZ2V0VmVjdG9yRGF0YWJhc2UiLCJWZWN0b3JEYXRhYmFzZURvZXNOb3RFeGlzdCIsImhhbmRsZUNvbnRlbnRTeXN0ZW1FdmVudHMiLCJoYW5kbGVQdWJsaXNoTWVkaWFTdHJlYW0iLCJoYW5kbGVVbnB1Ymxpc2hNZWRpYVN0cmVhbSIsIkNsb3NlSm9iRGlzcGF0Y2hlciIsIkNsb3NlSm9iV29ya2VyIiwiQ2xvc2VQdWJTdWJUb3BpYyIsIkNsb3NlT2JqZWN0U3RvcmVCdWNrZXQiLCJDbG9zZUtleVZhbHVlRGF0YWJhc2UiLCJDbG9zZVZlY3RvckRhdGFiYXNlIiwiQ2xvc2VHcmFwaERhdGFiYXNlIiwiVW5zdWJzY3JpYmVNZWRpYVN0cmVhbSIsImhhbmRsZUNvbnRlbnRVbnN1YnNjcmliZU1lZGlhU3RyZWFtIiwiUmVxdWVzdFN5bmNLZXlWYWx1ZURhdGFiYXNlIiwic2VuZFRyYW5zYWN0aW9uc0R1bXAiLCJTZW5kVHJhbnNhY3Rpb25zRHVtcCIsInByb2Nlc3NUcmFuc2FjdGlvbnNEdW1wIiwidHJhbnNhY3Rpb25zIiwiUmVxdWVzdFRyYW5zYWN0aW9uc1ZhbHVlIiwic2VuZFRyYW5zYWN0aW9uc1ZhbHVlIiwidHJhbnNhY3Rpb25JZHMiLCJub3RpZnlDbHVzdGVyIiwiTm9kZUpvaW4iLCJoYW5kbGVOb2RlSm9pbk5lZWRQdWJsaXNoZWRTdHJlYW0iLCJub3RpZnlPYmplY3RTdG9yZU9mTm9kZUpvaW4iLCJoYW5kbGVOb2RlTGVhdmUiLCJub3RpZnlPYmplY3RTdG9yZU9mTm9kZUxlYXZlIiwiaGFuZGxlU3Vic2NyaXB0aW9uU3lzdGVtRXZlbnRzIiwiU3Vic2NyaWJlTWVkaWFTdHJlYW0iLCJoYW5kbGVTdWJzY3JpYmVNZWRpYVN0cmVhbSIsIlVwZGF0ZU1lZGlhU3RyZWFtIiwiaGFuZGxlVXBkYXRlTWVkaWFTdHJlYW0iLCJoYW5kbGVVbnN1YnNjcmliZU1lZGlhU3RyZWFtIiwicmVtYWluaW5nVHJhY2tzIiwidHJhY2tLaW5kIiwidW5zdWJzY3JpYmVUcmFja0VuZGVkTGlzdGVuZXIiLCJoYW5kbGVOb2RlSm9pbiIsIkpvYkRpc3BhdGNoZXJEb2VzTm90RXhpc3QiLCJKb2JXb3JrZXJEb2VzTm90RXhpc3QiLCJkYXRhYmFzZSIsInJlbW90ZVN0cmVhbSIsInByb21wdHMiLCJ0b2tlbnMiLCJkZWJvdW5jZVN0YXRzIiwiam9iT2JzZXJ2YWJsZSIsImdldEpvYk9ic2VydmFibGUiLCJKb2JUeXBlIiwicmVqZWN0IiwicmVzdWx0VGltZW91dCIsInVwZGF0ZWRKb2IiLCJzdGF0dXMiLCJKb2JTdGF0dXMiLCJDb21wbGV0ZWQiLCJpbnB1dFRva2VucyIsInJlc3VsdCIsIkZhaWxlZCIsImVyciIsIkpvYlN0cmVhbSIsImRvbmUiLCJuZXh0SW5kZXgiLCJ3YWl0UXVldWUiLCJwZW5kaW5nUmVzb2x2ZSIsInJlc29sdmVQcm9taXNlIiwiY2xvc2VMb29wIiwiUGFydGlhbCIsIm91dHB1dCIsInByb2Nlc3NXYWl0UXVldWUiLCJyZXNldFRpbWVvdXQiLCJ0aW1lb3V0RnVuY3Rpb24iLCJnZXRXb3JrZmxvdyIsImRhdGFCdWNrZXRJZHMiLCJ0b2tlbkNvdW50Iiwiam9iVHlwZSIsImpvYiIsInBhcmFtZXRlcnMiLCJQZW5kaW5nIiwiR2VuZXJhdGl2ZUFJQ29udGV4dFN0YXRzIiwic3RvcmFnZSIsIndyaXRlcyIsInJlYWRzIiwiY29udGVudE1lZGlhdG9yIiwid29ya2Zsb3ciLCJtb2RlbFN0b3JlIiwiZGF0YVN0b3JlcyIsIm1vZGVscyIsImlzT3BlbmVkIiwiY29ubmVjdG9yIiwiZGF0YVN0b3JlIiwib3BlbiIsInNraXBTeW5jIiwibW9kZWxzQnVja2V0SWQiLCJ3YWl0Rm9yU3luY0NvbXBsZXRlIiwibW9kZWwiLCJwYXRoTmFtZSIsImVuZ2luZVR5cGUiLCJHZW5lcmF0aXZlQUlFbmdpbmVUeXBlIiwiTGxhbWFjcHAiLCJnZXRNb2RlbCIsInRhc2tUeXBlIiwiaW5wdXRUeXBlIiwib3V0cHV0VHlwZSIsInNvdXJjZVVybCIsIlBheWxvYWRBY3Rpb24iLCJmaWxlIiwicGF0aCIsInNraXBFbmNyeXB0aW9uIiwiZmV0Y2hVcmwiLCJidWNrZXRJZCIsImxvYWRFeGlzdGluZ0NvbnRlbnQiLCJzdWJzY3JpYmVUb0NvbnRlbnQiLCJnZXRCaWQiLCJnZXRDb3Jlc0Zyb21DYXBhY2l0eVJlcG9ydCIsImNvbXBpbGVTdGF0cyIsImpvYlJlc3VsdCIsImVuZFRpbWUiLCJvdXRwdXRUb2tlbnMiLCJ0b2tlbnNQZXJTZWNvbmQiLCJhY2N1bXVsYXRlUmVzdWx0IiwiZmluYWxSZXN1bHQiLCJuZXdSZXN1bHQiLCJpbnRlcm5hbFByb2Nlc3NKb2IiLCJwcm9tcHRCbG9jayIsImJsb2NrcyIsIlByb21wdCIsInByb2Nlc3NXb3JrZmxvdyIsImludGVybmFsUHJvY2Vzc0pvYlN0cmVhbSIsInN0cmVhbVdvcmtmbG93Iiwic3RvcmUiLCJTdG9yYWdlRXZlbnRUeXBlIiwiU3luY0NvbXBsZXRlIiwicmVjdXJzaXZlIiwiaW5jbHVkZVN5bmNpbmdGaWxlcyIsIk9iamVjdEtpbmQiLCJhYnNvbHV0ZVBhdGhOYW1lIiwic3luY0ZvbGRlciIsImRhdGFTdG9yZUlkIiwiZW50cmllcyIsIkZvbGRlciIsImFkZENvbnRlbnQiLCJGaWxlV3JpdGUiLCJGaWxlRGVsZXRlIiwicmVtb3ZlQ29udGVudCIsImRhdGFDb2xsZWN0aW9ucyIsImJsb2NrIiwiRGF0YUNvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwiaW5nZXN0QmxvY2tzIiwic29tZSIsImluZ2VzdEJsb2NrIiwiT2JqZWN0U3RvcmFnZVVwbG9hZCIsImRhdGFDb2xsZWN0aW9uIiwic3RhcnQiLCJqb2JJZCIsInY0IiwicHJvY2Vzc0luZ2VzdCIsImdldENhcGFjaXR5UmVwb3J0IiwiZ3B1IiwiY29yZXMiLCJsb2FkIiwiSm9icyIsIkdlbmVyYXRpdmVBSVdvcmtlclN0YXRzIiwiR3JhcGhEYXRhYmFzZU5hbWVOb3RTdHJpbmciLCJ0byIsIm5vZGVzIiwibWF4RGVwdGgiLCJjb250ZW50U2l6ZSIsInJlc3VsdHMiLCJHcmFwaERhdGFiYXNlU3RhdHMiLCJsb2dTdG9yYWdlIiwiam9icyIsImpvYk9ic2VydmVycyIsImpvYkJpZHMiLCJ1bnN1YnNjcmliZUhhbmRsZXIiLCJpc0JpZFJlc3BvbnNlIiwiYWRkQmlkUmVzcG9uc2UiLCJpc1BhcnRpYWxSZXN1bHRSZXNwb25zZSIsImV2YWx1YXRlUGFydGlhbEpvYiIsImlzUmVzdWx0UmVzcG9uc2UiLCJldmFsdWF0ZVByb2NjZXNzZWRKb2IiLCJpc0ZhaWxlZFJlc3BvbnNlIiwiZmFpbEpvYiIsImpvYlRvRGlzcGF0Y2giLCJjcmVhdGVkIiwidXBkYXRlZCIsIkpvYkRpc3BhdGNoZXJKb2JFeGlzdHMiLCJzdWJqZWN0IiwiU3ViamVjdCIsImpvYlBoYXNlIiwiUmVxdWVzdCIsIm1heFJldHJpZXMiLCJhdHRlbXB0cyIsImF0dGVtcHRUb1NlbmRKb2IiLCJzdGFydEJpZFJlc3BvbnNlSGFuZGxpbmciLCJsb2dFdmVudCIsImFzT2JzZXJ2YWJsZSIsInVwZGF0ZUpvYiIsImRlbGV0ZUpvYiIsImNvbXBsZXRlIiwicmVzcG9uc2UiLCJyZXNwb25zZXMiLCJldmFsdWF0ZUJpZHNBbmRBdHRyaWJ1dGVKb2IiLCJyZXNwb25zZVRpbWVvdXQiLCJ0aW1lb3V0IiwibWlzdGxldHMiLCJldmFsdWF0ZUJpZHMiLCJQcm9jZXNzaW5nIiwiam9iQXR0cmlidXRpb24iLCJBdHRyaWJ1dGlvbiIsInNvcnRlZFJlc3BvbnNlcyIsInZhbGlkQmlkcyIsImJpZCIsImF2YWlsYWJsZSIsInNvcnQiLCJxdWV1ZUxlbmd0aCIsImJlc3RSZXNwb25zZXMiLCJtYXhCaWQiLCJmaW5kTWF4QmlkRnJvbVNvcnRlZCIsIm1pblF1ZXVlTGVuZ3RoIiwiZmluZE1pblF1ZXVlTGVuZ3RoRnJvbVNvcnRlZCIsImdldFRpbWUiLCJydHQiLCJtaW5SdHQiLCJiZXN0Tm9kZSIsInJlc3VsdFBheWxvYWQiLCJtaXN0bGV0SWRzIiwiQmlkIiwiUGFydGlhbFJlc3VsdCIsIlJlc3VsdCIsImpvYldvcmtlckNvbm5lY3RvcnMiLCJ1bnN1YnNjcmliZUxpc3RlbmVyIiwic3Vic2NyaWJlVG9Kb2JzIiwiaXNBdmFpbGFibGUiLCJwcm9jZXNzSm9iIiwicHJvY2Vzc0pvYlN0cmVhbSIsImlzSm9iUmVxdWVzdCIsInNlbmRCaWQiLCJzZW5kUmVqZWN0IiwiaXNKb2JBdHRyaWJ1dGlvbiIsImhhbmRsZUpvYkF0dHJpYnV0aW9uIiwic2VuZGVySWQiLCJqb2JQYXlsb2FkIiwiam9iRmFpbGVkIiwicGFydGlhbFJlc3VsdCIsInBhcnRpYWxKb2JSZXN1bHQiLCJkYktleSIsInRhYmxlcyIsInRhYmxlT2JzZXJ2ZXIiLCJ0cmFuc2FjdGlvblRhYmxlIiwidGFibGVVbnN1YnNjcmliZXIiLCJpc1N5bmMiLCJzeW5jUmVzb2x2ZSIsInRyYW5zYWN0aW9uc1RvU3luYyIsInRpbWVvdXRDYWxsYmFjayIsInN5bmNUaW1lb3V0IiwiZXZlbnRMaXN0ZW5lciIsImxpc3RlbmVyVW5zdWJzY3JpYmVyIiwic3luY1RyYW5zYWN0aW9uc1dyaXR0ZW4iLCJLZXlWYWx1ZURhdGFiYXNlTmFtZU5vdFN0cmluZyIsIkxheW91dEJ1aWxkZXIiLCJnZXRMYXlvdXQiLCJpc1ZhbGlkIiwicmVhc29uIiwidmFsaWRhdGVMYXlvdXQiLCJLZXlWYWx1ZURhdGFiYXNlSW52YWxpZExheW91dCIsImFkZFJlc2VydmVkVGFibGVzIiwidGFibGVOYW1lIiwidGFibGUiLCJoYXNUYWJsZSIsIktleVZhbHVlRGF0YWJhc2VUYWJsZU5vdEZvdW5kIiwibmV3VGFibGUiLCJEYXRhYmFzZVRhYmxlIiwiZ2V0VGFibGVDb25uZWN0b3IiLCJjb3VudCIsIktleVZhbHVlRGF0YWJhc2VOb3RPcGVuIiwicmVzZXJ2ZWRUYWJsZXMiLCJ0cmFuc2FjdGlvblRhYmxlc1RvRGVsZXRlIiwibGF5b3V0VGFibGUiLCJsYXlvdXRMaXN0IiwiaW5zdGFudGlhdGVUcmFuc2FjdGlvblRhYmxlIiwic2V0T25NZXNzYWdlSGFuZGxlciIsInNldE9uVGFibGVXcml0ZUhhbmRsZXIiLCJkZWxldGVUcmFuc2FjdGlvbnNGb3JUYWJsZSIsInN5bmMiLCJhbmNlc3RvcklkIiwiY2xlYXJTeW5jVGltZW91dCIsInB1Ymxpc2hTeW5jQ29tcGxldGVkIiwidHJhbnNhY3Rpb25zRHVtcCIsImxvY2FsVHJhbnNhY3Rpb25zIiwibG9jYWxUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uIiwidCIsImNvbXBhcmVUcmFuc2FjdGlvbnMiLCJEZWxldGUiLCJ0cmFuc2FjdGlvbklkIiwid3JpdGVUcmFuc2FjdGlvbiIsImdldFRyYW5zYWN0aW9uRnJvbVRhYmxlV3JpdGVFdmVudCIsInRyYW5zYWN0aW9uS2V5IiwiZ2V0RXN0aW1hdGVkVGltZXN0YW1wIiwicmFuZG9tIiwiUXVlcnlCdWlsZGVyIiwid2hlcmUiLCJnZXRRdWVyeSIsImNoZWNrU3luY0NvbXBsZXRlIiwid3JpdGVWYWx1ZSIsIkdldCIsIkxpc3QiLCJDb3VudCIsIkRhdGFiYXNlRXZlbnQiLCJwdWJsaXNoU3luY0NvbXBsZXRlZEFmdGVyV3JpdGVzIiwiYWxsIiwiY2FsY3VsYXRlU2l6ZSIsIktleVZhbHVlRGF0YWJhc2VTdGF0cyIsIktleVZhbHVlRGF0YWJhc2VUYWJsZU5hbWVSZXNlcnZlZCIsImluZGV4ZXMiLCJyZWFkRXZlbnQiLCJwdWJsaXNoV3JpdGVFdmVudCIsInZhbGlkYXRlVmFsdWUiLCJpc1VwZGF0ZSIsIndyaXRlRXZlbnQiLCJidWlsZFF1ZXJ5IiwiS2V5VmFsdWVEYXRhYmFzZUludmFsaWRRdWVyeSIsInRhYmxlQWN0aW9uIiwiYnVpbGRUYWJsZUV2ZW50IiwiS2V5VmFsdWVEYXRhYmFzZUludmFsaWRWYWx1ZSIsInByb3BlcnR5VmFsdWUiLCJ0cmFuc2Zvcm1hdGlvbnMiLCJjbGllbnRTdHJlYW0iLCJhdWRpb1NvdXJjZSIsImF1ZGlvRGVzdGluYXRpb24iLCJzb3VyY2VWaWRlbyIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImF1dG9wbGF5IiwibXV0ZWQiLCJvbmxvYWRlZGRhdGEiLCJwbGF5IiwiZ2V0Q29udGV4dCIsImNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24iLCJnZXRBdWRpb1RyYWNrcyIsImNyZWF0ZU1lZGlhU3RyZWFtU291cmNlIiwiYXVkaW9UcmFjayIsInZpZGVvV2lkdGgiLCJ2aWRlb0hlaWdodCIsImdldFZpZGVvVHJhY2tzIiwiZW5hYmxlZCIsImRyYXdJbWFnZSIsImNsZWFyUmVjdCIsImRpc2Nvbm5lY3QiLCJzdG9wIiwiZXhpc3RpbmdUcmFjayIsImdldFRyYWNrIiwiYWRkVmlkZW9UcmFjayIsImFkZEF1ZGlvVHJhY2siLCJwYXJhbSIsImdldFRyYWNrRnJvbVBhcmFtIiwicmVzdW1lIiwibGFzdFRyYW5zYWN0aW9uSWQiLCJwZW5kaW5nU3luY1RyYW5zYWN0aW9ucyIsIm9iamVjdFJlcXVlc3RzIiwicGVuZGluZ0ZpbGVzU3luY2luZyIsInBlbmRpbmdGaWxlc1RyYW5zYWN0aW9ucyIsInBlbmRpbmdGaWxlc1JlbmFtZSIsImZpbGVTZW5kaW5nTWFwIiwib2JqZWN0U3RvcmVDb25uZWN0b3IiLCJzeW5jQ29udGVudCIsImlzU3luY2luZyIsIm5vZGVzQ29ubmVjdGVkIiwiT2JqZWN0U3RvcmVOYW1lTm90U3RyaW5nIiwic3RvcmVLZXkiLCJ0ZXh0IiwicGF5bG9hZFR5cGUiLCJoYW5kbGVSZXF1ZXN0UGF5bG9hZCIsImhhbmRsZVRyYW5zYWN0aW9uUGF5bG9hZCIsInN5bmNUcmFuc2FjdGlvbnMiLCJzeW5jUGVuZGluZ0ZpbGVzIiwiY29tcGxldGVTeW5jIiwiT2JqZWN0U3RvcmVBbHJlYWR5U3Vic2NyaWJlZCIsInB1Ymxpc2hGaWxlIiwicHVibGlzaEZvbGRlciIsIk1vdmUiLCJwdWJsaXNoTW92ZSIsIm5ld1BhdGgiLCJPYmplY3RTdG9yZUludmFsaWRQYXlsb2FkIiwicGFyZW50SWQiLCJUcmFuc2FjdGlvbiIsInB1Ymxpc2hUcmFuc2FjdGlvbiIsImRlbGV0ZU9iamVjdCIsIk9iamVjdFN0b3JhZ2UiLCJPYmplY3RTdG9yZU5vdEluU3luYyIsIk9iamVjdFN0b3JlSW52YWxpZFBhdGgiLCJmaWxlT3B0aW9ucyIsInByb2Nlc3NMaXN0IiwicGVuZGluZ0ZpbGVzIiwic2VuZEZpbGVSZXF1ZXN0UGF5bG9hZCIsImZpbmFsTGlzdCIsImVudHJ5IiwiZW5kc1dpdGgiLCJzeW5jZWRGaWxlRXhpc3RzIiwiZiIsIkZpbGVTdGF0dXMiLCJTeW5jaW5nIiwiZ2V0RmlsZUNoZWNrc3VtIiwiZ2V0UGF0aE5hbWUiLCJzZW5kRmlsZSIsImFuc3dlcmVySWQiLCJwZW5kaW5nTmFtZSIsIndyaXRlRmlsZSIsImNyZWF0ZVBlbmRpbmdGaWxlV3JpdGUiLCJwcm9taXNlIiwiZmlsZU5hbWUiLCJmaWxlVHlwZSIsIkZvbGRlckNyZWF0ZSIsImNyZWF0ZUZvbGRlciIsIm1vdmVPYmplY3QiLCJpbml0aWFsU3luYyIsInByb2Nlc3NUcmFuc2FjdGlvblBheWxvYWQiLCJ1cGRhdGVMYXN0VHJhbnNhY3Rpb25JZCIsInByb2Nlc3NQZW5kaW5nU3luY1RyYW5zYWN0aW9ucyIsImhhbmRsZUZpbGVXcml0ZSIsImhhbmRsZUZvbGRlckNyZWF0ZSIsImhhbmRsZU9iamVjdE1vdmUiLCJoYW5kbGVPYmplY3REZWxldGUiLCJwZW5kaW5nUGF5bG9hZCIsIlJlcXVlc3RGaWxlIiwiaGFuZGxlRmlsZVJlcXVlc3QiLCJSZXF1ZXN0QWNjZXB0ZWQiLCJoYW5kbGVGaWxlUmVxdWVzdEFuc3dlciIsIlJlcXVlc3RGaWxlU3luYyIsImhhbmRsZUZpbGVTeW5jIiwiUmVxdWVzdEZpbGVXcml0ZSIsImNyZWF0ZVdyaXRhYmxlU3RyZWFtIiwic3RhcnRJbmRleCIsInNldFBlbmRpbmdGaWxlU3luY2luZ1BheWxvYWQiLCJleHBlY3RlZEluZGV4Iiwib3V0T2ZCb3VuZENodW5rcyIsImJ1ZmZlcmVkQ2h1bmtzIiwid3JpdGUiLCJtYW5hZ2VCdWZmZXJlZENodW5rcyIsImRlbGV0ZUZpbGVDaHVua3MiLCJkZWxldGVQZW5kaW5nRmlsZSIsIlN5bmNlZCIsIndyaXRhYmxlU3RyZWFtIiwibmV4dENodW5rIiwic3BsaXRQYXRoTmFtZSIsImZvbGRlciIsInNob3VsZFByb2Nlc3NUcmFuc2FjdGlvbiIsIkZvbGRlckRlbGV0ZSIsIm9sZFBhdGgiLCJvbGROYW1lIiwiRm9sZGVyTW92ZSIsIkZpbGVNb3ZlIiwib2xkUGF0aE5hbWUiLCJvcmlnaW5hbFBhdGgiLCJmb3VuZCIsIkJsb2IiLCJvYmplY3RSZXF1ZXN0IiwiZ2V0T3JSZXNldFBlbmRpbmdGaWxlVGltZW91dCIsImlzQ29udGVudEZpbGVWYWxpZCIsImNoZWNrRXhpc3RpbmdQZW5kaW5nRmlsZUNvbnRlbnQiLCJyZXF1ZXN0UGF5bG9hZCIsInJlc29sdmVQIiwicmVqZWN0UCIsInRvdGFsQ2h1bmtzIiwiY2VpbCIsInJlYWRGaWxlU3RyZWFtIiwiaW50ZXJydXB0IiwiZmlsZVBheWxvYWQiLCJ3YWl0Rm9yQnVmZmVyRW1wdHkiLCJzdGFydFN0cmVhbWluZ0ZpbGUiLCJnZXRUcmFuc2FjdGlvbnMiLCJvYmplY3RzIiwib2JqZWN0IiwicmVwb3NpdG9yeSIsImNyZWF0ZUZpbGVSZXF1ZXN0cyIsInBlbmRpbmdGaWxlIiwiZXhwZWN0ZWRDaGVja3N1bSIsInBlbmRpbmdQYXRoTmFtZSIsImlzQ2h1bmtpbmdWYWxpZCIsInJvdW5kIiwib2JqZWN0UmVxdWVzdFBheWxvYWQiLCJPYmplY3RTdG9yZVN0YXRzIiwidW5yZWdpc3RlclB1Ymxpc2hlckxpc3RlbmVyIiwiZ2V0SW50ZXJuYWxUcmFja1BhcmFtcyIsInRyYWNrUGFyYW1zIiwiZ2V0UmVzb2x1dGlvbiIsInZpZGVvVHJhY2tzIiwic2V0dGluZ3MiLCJnZXRTZXR0aW5ncyIsIlB1YlN1YlRvcGljTmFtZU5vdFN0cmluZyIsInJlbW90ZUlkcyIsIlB1YlN1YlRvcGljQWxyZWFkeVN1YnNjcmliZWQiLCJQdWJTdWJUb3BpY1N0YXRzIiwicmVzaXplSGFuZGxlciIsInVwZGF0ZURlYm91bmNlIiwicmVuZGVyRWxlbWVudCIsInN1YnNjcmliZWRUcmFja3MiLCJwcm92aWRlckxpc3RlbmVyIiwic2V0dXBSZW5kZXJFbGVtZW50IiwiYWN0aXZlIiwic2V0dXBSZXNpemVIYW5kbGVyIiwic2V0SW50ZXJuYWxJZCIsImhhc1RyYWNrcyIsImlzU3Vic2NyaWJlZCIsImdldFN1YnNjcmliZWRUcmFja3MiLCJIVE1MVmlkZW9FbGVtZW50IiwiaXNWYWxpZE1lZGlhU3Vic2NyaXB0aW9uUGFyYW1zIiwiUmVtb3RlTWVkaWFTdHJlYW1JbnZhbGlkU3Vic2NyaXB0aW9uUGFyYW1zIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJnZXRQcm92aWRlcklkIiwic2V0UHJvdmlkZXJJZCIsIlJlc2l6ZU9ic2VydmVyIiwiY3VycmVudFdpZHRoIiwiY3VycmVudEhlaWdodCIsInJlc2l6ZU9ic2VydmVyIiwiY29udGVudFJlY3QiLCJvYnNlcnZlIiwiaGFuZGxlUmVtb3RlVHJhY2tGYWlsdXJlIiwicmVtb3ZlZFRyYWNrcyIsInN1YnNjcmliZWRUcmFjayIsIlJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsIiwiVmVjdG9yRGF0YWJhc2VOYW1lTm90U3RyaW5nIiwidmVjdG9yIiwiayIsIm1pblJlbGV2YW5jZSIsInN0YXJ0aW5nSW5kZXgiLCJ2ZWN0b3JzIiwidiIsImdldEJ1ZmZlciIsIlZlY3RvckRhdGFiYXNlU3RhdHMiLCJEZXRlY3Rpb25NYW5hZ2VyIiwiaGFuZGxlU3RhdHNTeXN0ZW1FdmVudHMiLCJMb2NhbFJlcG9ydCIsImRldGVjdExvY2FsSXNzdWVzIiwiU3RyZWFtUmVwb3J0IiwiZGV0ZWN0U3RyZWFtSXNzdWVzIiwiZGV0ZWN0UHJvYmxlbXMiLCJpc3N1ZVR5cGUiLCJydWxlIiwiciIsImFkZFByb2JsZW0iLCJpc3N1ZSIsImFkZElzc3VlIiwicnVsZXMiLCJkZXRlY3RWaWRlb0lzc3VlcyIsImRldGVjdEF1ZGlvSXNzdWVzIiwiRGV0ZWN0aW9uIiwibmJJc3N1ZXMiLCJ1c2VySWQiLCJQcm9ibGVtIiwiTm9kZSIsIkF1dGhBZ2VudCIsImdyb3VwSWQiLCJhZ2VudENvbmZpZyIsImxhc3RDYXBhY2l0eVJlcG9ydCIsIm9uQ29uZmlndXJhdGlvbkNoYW5nZSIsIm9uU25hcHNob3QiLCJkb2MiLCJnZXRGaXJlc3RvcmUiLCJzbmFwc2hvdCIsImV4aXN0cyIsImlzRXF1YWwiLCJhZ2VudElkIiwib2xkQ29uZmlnIiwibmV3Q29uZmlnIiwic2V0UmVwb3J0Q2FwYWNpdHkiLCJyZXBvcnRDYXBhY2l0eSIsImNhcGFjaXR5IiwiYWRkRG9jIiwic2VydmVyVGltZXN0YW1wIiwiQXV0aFVzZXIiLCJkaXNwbGF5TmFtZSIsImVtYWlsIiwiam9pbmVkQ2x1c3RlcnMiLCJvYnNlcnZlciIsIkxvY2FsQWdlbnQiLCJ1cGRhdGVEZWJvdW5jZVRpbWVvdXQiLCJsYXN0VXBkYXRlZCIsImFuc3dlckpvaW4iLCJyYW5rIiwiTm9kZVVwZGF0ZSIsIm1ldGFEYXRhIiwiZ2V0UmFuayIsInJlbW90ZUNvbm5lY3Rpb25zIiwiYWRkUmVtb3RlQ29ubmVjdGlvbiIsImluY3JlbWVudFZlcnNpb24iLCJwdWJsaXNoVXNlclVwZGF0ZSIsInJlbW92ZVJlbW90ZUNvbm5lY3Rpb24iLCJnZXRDdXJyZW50VmVyc2lvbiIsInNldFJhbmsiLCJjb25uZWN0aW9uc1VwZGF0ZSIsIk5vZGVDb25uZWN0aW9uc1VwZGF0ZSIsIkxvY2FsVXNlciIsIk5vZGVNYW5hZ2VyIiwicmVtb3RlVW5zdWJzY3JpYmVyIiwiZGlzY292ZXJ5U2VydmljZSIsImRpc2NvdmVyeVVuc3Vic2NyaWJlciIsImFuY2VzdG9ycyIsIm9wdGltaXphdGlvbkxheWVycyIsImRlYm91bmNlUHJvY2Vzc1JhbmsiLCJsYXN0UHJvY2Vzc1JhbmsiLCJGaXJlYmFzZVJEQkRpc2NvdmVyeVNlcnZpY2UiLCJnZXRNaW5Db25uZWN0aW9ucyIsIm9uTm9kZURpc2Nvbm5lY3QiLCJoYW5kbGVOb2RlRGlzY29ubmVjdCIsImdldFN0YXR1cyIsIk9mZmxpbmUiLCJnZXRMYXN0VXBkYXRlZCIsImRlbGV0ZVJlbW90ZU5vZGUiLCJnZXRBbmNlc3RvcklkcyIsIk9ubGluZSIsImRpc2NvdmVyIiwicHJvY2Vzc1JhbmsiLCJnZXREaXN0YW5jZSIsInZpc2l0ZWQiLCJkaXN0YW5jZSIsImN1cnJlbnQiLCJnZXRSZW1vdGVOb2RlIiwicmVtb3RlQ29ubmVjdGlvbiIsImhhbmRsZU5vZGVVcGRhdGUiLCJyZW1vdmVOb2RlIiwiaGFuZGxlQ29ubmVjdGlvblN1Y2Nlc3MiLCJwdWJsaXNoTm9kZUxlYXZlIiwiY3JlYXRlUmVtb3RlTm9kZSIsIm5vdGlmeUpvaW4iLCJwdWJsaXNoTm9kZUpvaW4iLCJub3RpZnlDbHVzdGVyTm9kZUpvaW4iLCJzZXRSZW1vdGVDb25uZWN0aW9ucyIsInNldEN1cnJlbnRWZXJzaW9uIiwic2V0TG9jYWxSYW5rIiwic2V0U3RhdHVzIiwibm90aWZ5Q2x1c3Rlck5vZGVVcGRhdGUiLCJoYXNSZW1vdGVOb2RlIiwic2V0UmVtb3RlTm9kZSIsIlJlbW90ZVVzZXIiLCJSZW1vdGVBZ2VudCIsImZvcmNlIiwibWFuYWdlQW5jZXN0b3IiLCJtYW5hZ2VPcHRpbWl6YXRpb24iLCJsYXllciIsInJlbW90ZVJhbmsiLCJsb2NhbFJhbmsiLCJjdXJyZW50TWF4TGF5ZXIiLCJnZXRDdXJyZW50TWF4TGF5ZXIiLCJnZXRNYXhDb25uZWN0aW9ucyIsInRhcmdldFJhbmsiLCJnZXROZXh0VGFyZ2V0UmFuayIsInNwbGljZSIsIm5ld0FuY2VzdG9ySWRzIiwiZ2V0QW5jZXN0b3JzIiwibG9jYWxPcHRpbWl6YXRpb25Db25uZWN0aW9ucyIsImdldE91dGdvaW5nT3B0aW1pemF0aW9uQ29ubmVjdGlvbnMiLCJub2RlVG9Db25uZWN0IiwiZmluZEluZGV4IiwicmVtb3RlQ29ubmVjdGlvbklkIiwibmV3UmVtb3RlTm9kZSIsIm5vZGVSYW5rIiwicmFua0RpZmZlcmVuY2UiLCJyYW5rRGlmZmVyZW5jZUEiLCJyYW5rRGlmZmVyZW5jZUIiLCJ1cGRhdGVMYXN0VXBkYXRlZCIsImhhc0NoYW5nZWQiLCJjbHVzdGVyRXZlbnRFbWl0dGVyIiwiY29udGVudE1hbmFnZXIiLCJjb25uZWN0aW9uTWFuYWdlciIsInN1YnNjcmlwdGlvbk1hbmFnZXIiLCJzdGF0c01hbmFnZXIiLCJkZXRlY3Rpb25NYW5hZ2VyIiwicmVtZWRpYXRpb25NYW5hZ2VyIiwibm9kZU1hbmFnZXIiLCJTeXN0ZW1Ub3BpYyIsInN5c3RlbVRvcGljVW5zdWJzY3JpYmUiLCJtYW5hZ2VyQ29uZmlncyIsImdldENvbmZpZ3MiLCJHcmFwaFNlcnZpY2UiLCJTdWJzY3JpcHRpb25NYW5hZ2VyIiwibWF4T3V0Z29pbmdTdWJzY3JpcHRpb25zIiwiZ2V0TWF4RGlzdGFuY2UiLCJTdGF0c01hbmFnZXIiLCJSZW1lZGlhdGlvbk1hbmFnZXIiLCJpbml0aWFsaXplU3lzdGVtVG9waWMiLCJjcmVhdGVPdXRnb2luZ1N1YnNjcmlwdGlvbiIsImNyZWF0ZUluY29taW5nU3Vic2NyaXB0aW9uIiwiYnVja2V0Iiwic3luY0tleVZhbHVlRGF0YWJhc2UiLCJyZWdpc3RlclNvdXJjZSIsImhhbmRsZUVycm9yIiwidW5yZWdpc3RlclNvdXJjZSIsImdldFJlbW90ZU1lZGlhU3RyZWFtIiwiZ2V0TG9jYWxNZWRpYVN0cmVhbSIsImFkZFJlbW90ZU5vZGUiLCJyZW1vdmVSZW1vdGVOb2RlIiwiQ29ubmVjdGlvbkJ1ZmZlck5vdEVtcHR5IiwicHJvY2Vzc0JhdGNoIiwicHViU3ViRGF0YVRvcGljIiwia2V5VmFsdWVEYXRhYmFzZUNvbm5lY3RvciIsIkdlbmVyYXRpdmVBSVdvcmtlck1pc3NpbmdDb25uZWN0b3IiLCJhaVdvcmtlckNvbm5lY3RvcnMiLCJncmFwaERhdGFiYXNlQ29ubmVjdG9yIiwiR3JhcGhEYXRhYmFzZU1pc3NpbmdDb25uZWN0b3IiLCJ2ZWN0b3JEYXRhYmFzZUNvbm5lY3RvciIsIlZlY3RvckRhdGFiYXNlTWlzc2luZ0Nvbm5lY3RvciIsImZlYXR1cmVzIiwiRmVhdHVyZU5vdEVuYWJsZWQiLCJoYW5kbGVTeXN0ZW1FdmVudHMiLCJoYW5kbGVEZXRlY3Rpb25TeXN0ZW1FdmVudHMiLCJJbnRlcm5hbFNES0Vycm9yIiwibG9nZ2luZ0NsdXN0ZXIiLCJTeXN0ZW1TdGF0cyIsImNhdGNoIiwiYW5jZXN0b3IiLCJmaW5kTmV4dEFuY2VzdG9yIiwibmV3QW5jZXN0b3IiLCJzZW5kZXJNYXAiLCJjYW5SZW1lZGlhdGUiLCJnZXRGcmFtZXJhdGUiLCJnZXRCaXRyYXRlIiwiZnBzIiwiYnBwIiwibGFzdFJlbWVkaWF0aW9ucyIsImhhbmRsZVByb2JsZW0iLCJwcm9ibGVtIiwibGFzdFJlbWVkaWF0aW9uIiwiU0RLIiwiY2x1c3RlcnMiLCJhdXRoQ29udGV4dCIsIkZpcmViYXNlQXV0aFNlcnZpY2UiLCJpc0ZlYXR1cmVTdXBwb3J0ZWQiLCJBdWRpb0NvbnRleHQiLCJtaW5Db25uZWN0aW9ucyIsIm1heENvbm5lY3Rpb25zIiwibWF4RGlzdGFuY2UiLCJPUEZTT2JqZWN0U3RvcmVDb25uZWN0b3IiLCJJREJEYXRhYmFzZUNvbm5lY3RvciIsIldlYlJUQ0Jyb3dzZXJQZWVyQ29ubmVjdGlvbkNvbm5lY3RvciIsImRpc2FibGVJbnRlcnZhbEhhY2siLCJzdGFydE5vVGhyb3R0bGluZ0hhY2siLCJzZXRWZW5kb3JJZCIsImxvZ2dpbmdDb25uZWN0b3JzIiwic2V0TG9nZ2luZ0Nvbm5lY3RvcnMiLCJnZXRJbnN0YW5jZSIsInNlY3JldEtleSIsInZhbGlkYXRlQWNjZXNzIiwiaW5zdGFuY2UiLCJhdXRoZW50aWNhdGVVc2VyIiwiYXV0aGVudGljYXRlQWdlbnQiLCJqb2luQ2x1c3RlciIsImNsdXN0ZXIiLCJzdG9wTm9UaHJvdHRsaW5nSGFjayIsInNpZ25PdXQiLCJodHRwc0NhbGxhYmxlIiwiZ2V0RnVuY3Rpb25zIiwiSW52YWxpZEFjY2VzcyIsImlzSW50ZXJuYWxTREtDb25maWdzIiwibmV3RGF0YSIsImNyZWRlbnRpYWxzIiwic2lnbkluV2l0aENyZWRlbnRpYWwiLCJsb2dTdXBwb3J0IiwiYWdlbnREb2MiLCJnZXREb2MiLCJOb2RlTm90QXV0aGVudGljYXRlZCIsImFnZW50IiwiY29ubmVjdEFnZW50IiwiTm9kZVR5cGVOb3RTdXBwb3J0ZWQiLCJDbHVzdGVyQWxyZWFkeUpvaW5lZCIsImFkZENsdXN0ZXIiLCJjbHVzdGVyQ29uZmlnIiwidG9waWNJZCIsIm9iamVjdFN0b3JhZ2VCdWNrZXRzIiwiZGF0YWJhc2VJZCIsImFpQ29udGV4dElkIiwid2FybiIsInNjaGVkdWxlVGltZSIsImR1cmF0aW9uVGltZSIsInB1YnN1YlRvcGljcyIsImdlbmVyYXRpdmVBSVdvcmtlcnMiLCJzZW5kZXJUb3RhbE1lc3NhZ2VzIiwicmVjZWl2ZXJUb3RhbE1lc3NhZ2VzIiwic2VuZGVyVGltZVByb2Nlc3NpbmciLCJyZWNlaXZlclRpbWVQcm9jZXNzaW5nIiwiZ2V0UmVwb3J0IiwidGltZVByb2Nlc3NpbmciLCJzdWJ0eXBlIiwidG90YWxTdG9yYWdlU2l6ZSIsInRvdGFsTWVzc2FnZXNTZW50IiwidG90YWxNZXNzYWdlc1JlY2VpdmVkIiwidG90YWxCeXRlc1NlbnQiLCJ0b3RhbEJ5dGVzUmVjZWl2ZWQiLCJnZXRTVFZvbGF0aWxpdHkiLCJnZXREVFZvbGF0aWxpdHkiLCJzZW5kZXJCaXRyYXRlIiwiZ2V0U2VuZGVyQml0cmF0ZSIsInJlY2VpdmVyQml0cmF0ZSIsImdldFJlY2VpdmVyQml0cmF0ZSIsInRvdGFsTWVzc2FnZXMiLCJ0b3RhbEJ5dGVzIiwiZnJvbUVudHJpZXMiLCJTdGF0c05vZGUiLCJwcm9jZXNzUmVwb3J0cyIsInJlcG9ydHMiLCJwcm9jZXNzRGF0YUNoYW5uZWxSZXBvcnQiLCJwcm9jZXNzTG9jYWxSZXBvcnQiLCJzZXRTY2hlZHVsZVRpbWUiLCJzZWNoZWR1bGVUaW1lIiwic2V0RHVyYXRpb25UaW1lIiwicHJvY2Vzc1NlcnZpY2VSZXBvcnQiLCJ0aW1lIiwicHJvY2Vzc1NlbmRlclJlcG9ydCIsInByb2Nlc3NSZWNlaXZlclJlcG9ydCIsIlN0YXRzRGF0YUNoYW5uZWwiLCJzZW5kZXJDdXJyZW50VGltZXN0YW1wIiwic2VuZGVyUHJldmlvdXNUaW1lc3RhbXAiLCJyZWNlaXZlckN1cnJlbnRUaW1lc3RhbXAiLCJyZWNlaXZlclByZXZpb3VzVGltZXN0YW1wIiwic2VuZGVyQ3VycmVudEJ5dGVzIiwic2VuZGVyUHJldmlvdXNCeXRlcyIsInJlY2VpdmVyQ3VycmVudEJ5dGVzIiwicmVjZWl2ZXJQcmV2aW91c0J5dGVzIiwicHJvY2Vzc1JlcG9ydCIsImdldFRvdGFsQnl0ZXMiLCJzZW5kZXJUb3RhbEJ5dGVzIiwiZ2V0U2VuZGVyVG90YWxCeXRlcyIsInJlY2VpdmVyVG90YWxCeXRlcyIsImdldFJlY2VpdmVyVG90YWxCeXRlcyIsInNldFNlbmRlclRpbWVzdGFtcCIsInNldEJ5dGVzIiwic2V0UmVjZWl2ZXJUaW1lc3RhbXAiLCJzZXRSZWNlaXZlckJ5dGVzIiwiYnl0ZXMiLCJyZW1vdGVOb2RlcyIsIm5leHROb2RlSWQiLCJzdGF0c0NvbGxlY3Rpb24iLCJzdGF0c1JlcG9ydGluZyIsInN0YXRzUmVwb3J0Iiwic2V0dXBTdGF0c0NvbGxlY3Rpb24iLCJzZXR1cFN0YXRzUmVwb3J0aW5nIiwicnVubmluZyIsImxhc3RSdW4iLCJmaW5kTmV4dE5vZGVJZCIsImZpcnN0Tm9kZUlkIiwic2VuZGVyU3RyZWFtcyIsInJlY2VpdmVyU3RyZWFtcyIsImluYm91bmRSZXBvcnRzIiwib3V0Ym91bmRSZXBvcnRzIiwicHJvY2Vzc0luYm91bmRSZXBvcnRzIiwicHJvY2Vzc091dGJvdW5kUmVwb3J0cyIsIlN0YXRzU3RyZWFtIiwiU3RhdHNUcmFja0F1ZGlvIiwiU3RhdHNUcmFja1ZpZGVvIiwiZ2V0Um91bmRUcmlwVGltZSIsImdldEF1ZGlvVmlkZW9EZWxheSIsImVzdGltYXRlZFBsYXlvdXRUaW1lc3RhbXAiLCJTdGF0c1RyYWNrIiwicGFja2V0c0xvc3QiLCJwYWNrZXRzIiwiY3VycmVudFRpbWVzdGFtcCIsInByZXZpb3VzVGltZXN0YW1wIiwiY3VycmVudEJ5dGVzIiwicHJldmlvdXNCeXRlcyIsInByb2Nlc3NJbmJvdW5kUmVwb3J0IiwicHJvY2Vzc091dGJvdW5kUmVwb3J0IiwicHJvY2Vzc1JlbW90ZUluYm91bmRSZXBvcnQiLCJwYWNrZXRzTG9zdFBlcmMiLCJnZXRQYWNrZXRzTG9zdFBlcmMiLCJzZXRUaW1lc3RhbXAiLCJwYWNrZXRzUmVjZWl2ZWQiLCJwYWNrZXRzU2VudCIsImZyYW1lVGltZSIsImN1cnJlbnRGcmFtZXMiLCJwcmV2aW91c0ZyYW1lcyIsImZyYW1lcyIsInRvdGFsRGVjb2RlVGltZSIsImZyYW1lc0RlY29kZWQiLCJ0b3RhbEVuY29kZVRpbWUiLCJmcmFtZXNFbmNvZGVkIiwiaXNCcm9hZGNhc3QiLCJnZXRTdWJzY3JpcHRpb25MYWJlbCIsInN1YnNjcmlwdGlvblR5cGUiLCJnZXRQcmVmaXgiLCJzdWJUeXBlIiwiSW5jb21pbmciLCJnZXRQYXJ0cyIsInN1cHBvcnRzQ29udGVudFR5cGUiLCJJbmNvbWluZ1N1YnNjcmlwdGlvbiIsImRlc3RpbmF0aW9uIiwiSW5jb21pbmdNZWRpYVN1YnNjcmlwdGlvbiIsIkluY29taW5nU3Vic2NyaXB0aW9uTWFuYWdlciIsInN1YnNjcmlwdGlvblJlcXVlc3RzIiwic3Vic2NyaXB0aW9uUmVxdWVzdHNRdWV1ZSIsInJlcXVlc3RTdWJzY3JpcHRpb25BY3Rpb24iLCJzdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dHMiLCJtYXBzIiwiY2hvc2VuQW5zd2VycyIsIlN1YnNjcmlwdGlvbk1hcHMiLCJjcmVhdGVTdWJzY3JpcHRpb24iLCJpc01lZGlhU291cmNlIiwiaXNNZWRpYURlc3RpbmF0aW9uIiwicmVtb3ZlU3Vic2NyaXB0aW9uIiwicGFydHMiLCJzdWJzY3JpcHRpb25MYWJlbCIsInN1YnNjcmlwdGlvbnMiLCJjbG9zZVN1YnNjcmlwdGlvbiIsImhhbmRsZUNvbnRlbnRVbnB1Ymxpc2hNZWRpYVN0cmVhbSIsInJlbW92ZVJlbW90ZVN0cmVhbVN1YnNjcmlwdGlvbiIsImhhbmRsZUNvbnRlbnRTdWJzY3JpYmVNZWRpYVN0cmVhbSIsInJlcXVlc3RTdWJzY3JpcHRpb24iLCJoYW5kbGVDb250ZW50VXBkYXRlTWVkaWFTdHJlYW0iLCJnZXRNZWRpYVN1YnNjcmlwdGlvbiIsInJlcXVlc3RMYWJlbCIsImNsZWFyU3Vic2NyaXB0aW9uUmVxdWVzdFRpbWVvdXQiLCJyZXF1ZXN0IiwiaGFuZGxlU3Vic2NyaXB0aW9uUmVzdGFydE5lZWRNZWRpYVN0cmVhbSIsImhhbmRsZVN1YnNjcmlwdGlvblByb3ZpZGVNZWRpYVN0cmVhbSIsInJlcXVlc3RzIiwic3Vic2NyaXB0aW9uUmVxdWVzdCIsImV2ZXJ5IiwiY2hvc2VuQW5zd2VyIiwiaGFuZGxlTm9BbnN3ZXIiLCJoYW5kbGVTdWJzY3JpcHRpb25NZWRpYVN0cmVhbVVuYXZhaWxhYmxlIiwiZmluZE5ld01lZGlhU3Vic2NyaXB0aW9uIiwiaGFuZGxlQ29udGVudFJlbW90ZU1lZGlhU3RyZWFtVHJhY2tGYWlsIiwiaGFuZGxlT3B0aW1pemF0aW9uQ29ubmVjdGlvblN1Y2Nlc3MiLCJzdHJlYW1MYWJlbCIsInJlbW92ZVN1YnNjcmlwdGlvbnNGb3JOb2RlIiwiTWVkaWFTdHJlYW1VbmF2YWlsYWJsZSIsImNsZWFuT2xkU3Vic2NyaXB0aW9uIiwiY3VycmVudERpc3RhbmNlIiwic2VuZFJlcXVlc3QiLCJzZXRTdWJzY3JpcHRpb25SZXF1ZXN0VGltZW91dCIsIm93bmVyTm9kZSIsIm93bmVyUmFuayIsImNob3NlbkFuc3dlck5vZGUiLCJjaG9zZW5BbnN3ZXJSYW5rIiwiYWJzIiwicHJldmlvdXNUcmFja3MiLCJjb25jYXQiLCJTdWJzY3JpcHRpb25SZXF1ZXN0IiwiY2hvb3NlQW5zd2VyIiwib2xkU3Vic2NyaXB0aW9uIiwib3JpZ2luYWxQYXJhbXMiLCJnZXRQYXJ0c0ZvclN1YnNjcmlwdGlvbkxhYmVsIiwib2xkUHJvdmlkZXJJZCIsIk91dGdvaW5nU3Vic2NyaXB0aW9uTWFuYWdlciIsIk91dGdvaW5nIiwiaGFuZGxlU3Vic2NyaXB0aW9uU3Vic2NyaWJlTWVkaWFTdHJlYW0iLCJudW1iZXJPdXRnb2luZ1N1YnNjcmlwdGlvbnMiLCJnZXROdW1iZXJPdXRnb2luZ1N1YnNjcmlwdGlvbnMiLCJSZXN0YXJ0TmVlZE1lZGlhU3RyZWFtIiwiaGFuZGxlU3Vic2NyaXB0aW9uVW5zdWJzY3JpYmVNZWRpYVN0cmVhbSIsImhhbmRsZVN1YnNjcmlwdGlvbk5lZWRNZWRpYVN0cmVhbSIsImhhc1Jlc29sdXRpb24iLCJnZXRTdWJzY3JpcHRpb25JbmZvIiwiQ2FuUHJvdmlkZU1lZGlhU3RyZWFtIiwiQ2Fubm90UHJvdmlkZU1lZGlhU3RyZWFtIiwiY29tcHV0ZWREaXN0YW5jZSIsImNvc3QiLCJoYW5kbGVDb250ZW50Q2xvc2VNZWRpYVN0cmVhbSIsInJlbW90ZVNvdXJjZSIsImNhblByb3ZpZGVSZXNvbHV0aW9uIiwibG9jYWxTb3VyY2UiLCJpbmNvbWluZ01hbmFnZXIiLCJvdXRnb2luZ01hbmFnZXIiLCJyZW1vdmVJbmNvbWluZ1N1YnNjcmlwdGlvbiIsInJlbW92ZU91dGdvaW5nU3Vic2NyaXB0aW9uIiwiTmVlZE1lZGlhU3RyZWFtIiwiaGFuZGxlQ2xvc2VDb250ZW50IiwiZXZlbnRDb250ZW50IiwidG9waWNzIiwiZ2V0UGFydHNGcm9tU3Vic2NyaXB0aW9uIiwic3ViUHJlZml4Iiwic3Vic2NyaXB0b25QYXJ0cyIsImNyZWF0ZVRvcGljIiwicmVtb3ZlVG9waWMiLCJUb3BpYyIsInJlZ2lzdGVyRGVzdGluYXRpb24iLCJjbG9zZVRvcGljIiwidW5yZWdpc3RlckRlc3RpbmF0aW9uIiwiYW5zd2VycyIsInJldHJ5Q291bnQiLCJXYWl0aW5nIiwiY2FuQWNjZXB0IiwiQWNjZXB0ZWQiLCJSZWplY3RlZCIsImNhbkNob29zZUFuc3dlciIsInRhYmxlS2V5Iiwia2V5UGF0aCIsImJ1aWxkZXIiLCJUYWJsZUJ1aWxkZXIiLCJ0YWJsZUxheW91dCIsIm9yZGVyQnkiLCJkaXJlY3Rpb24iLCJRdWVyeUJ1aWxkZXJJbnZhbGlkQXJndW1lbnQiLCJ2YWxpZGF0ZVF1ZXJ5IiwicXVlcnlCdWlsZGVyIiwiaXNXaGVyZVZhbHVlIiwiaXNXaGVyZVZhbHVlcyIsImlzV2hlcmVCZXR3ZWVuIiwib3BlcmF0b3IiLCJsaW1pdCIsIm9mZnNldCIsIm9yZGVyIiwidG9rZW4iLCJ1aWQiLCJ1c2VyQ3JlZGVudGlhbCIsInNpZ25JbldpdGhDdXN0b21Ub2tlbiIsImdldEF1dGgiLCJkaXNjb25uZWN0Q2FsbGJhY2siLCJmaXJlYmFzZVVuc3Vic2NyaWJlciIsImNoaWxkUmVtb3ZlZFVuc3Vic2NyaWJlciIsIm9uRGlzY29ubmVjdEhhbmRsZXIiLCJjb25uZWN0ZWQiLCJjbHVzdGVyS2V5Iiwibm9kZUtleSIsIm9uVmFsdWUiLCJyZWYiLCJnZXREYXRhYmFzZSIsInZhbCIsInNldE9uRGlzY29ubmVjdEhhbmRsZXIiLCJvbkNoaWxkUmVtb3ZlZCIsImNhbmNlbCIsImZiRW50aXRpZXMiLCJhbGxOb2RlcyIsImpvaW5lZEF0IiwiYW5jZXN0b3JJZHMiLCJvbkRpc2Nvbm5lY3QiLCJGaXJlYmFzZVNlcnZpY2UiLCJhcHAiLCJhdXRoIiwiZnVuY3Rpb25zIiwiZmlyZXN0b3JlIiwiY2xvY2tTa2V3IiwiZ2V0QXBwIiwid2luZG93IiwiaW5pdGlhbGl6ZUFwcCIsImNvbm5lY3RlZFJlZiIsInNuYXAiLCJvZmZzZXRSZWYiLCJyYW5nZXMiLCJtYXhMYXllciIsImVuZCIsImZhY3RvciIsImxheWVyQWRqdXN0bWVudCIsIm5iTm9kZXMiLCJkZXN0aW5hdGlvblJhbmsiLCJKb2JRdWV1ZVNlcnZpY2UiLCJqb2JRdWV1ZSIsImlzUnVubmluZyIsInJ1bkpvYlF1ZXVlIiwibmV3VHJhbnNhY3Rpb25SZWYiLCJydW5UcmFuc2FjdGlvbiIsImNvbW1pdHRlZCIsImxhc3RLbm93blRyYW5zYWN0aW9uSWQiLCJ0cmFuc2FjdGlvbnNSZWYiLCJsaW1pdFRvRmlyc3QiLCJvcmRlckJ5S2V5IiwidHJhbnNhY3Rpb25zTWFwIiwic3RhcnRBdCIsInNvcnRlZFRyYW5zYWN0aW9ucyIsIm5leHRUcmFuc2FjdGlvbiIsIldvcmtmbG93U2VydmljZSIsIndvcmtmbG93SWQiLCJ3b3JrZmxvd0RvYyIsImFnZW50cyIsImdldEFnZW50cyIsImdldERhdGFDb2xsZWN0aW9ucyIsImdldE1vZGVscyIsInBhcnNlV29ya2Zsb3dEb2N1bWVudCIsInBhcnNlV29ya2Zsb3dCbG9ja3MiLCJnZXRXb3JrZmxvd01vZGVscyIsImdldFdvcmtmbG93T2JqZWN0U3RvcmFnZUJ1Y2tldHMiLCJ3b3JrZmxvd01vZGVscyIsIm1vZGVsSWQiLCJjb2xsZWN0aW9uQmxvY2siLCJyZXRyaWV2ZUJsb2NrcyIsIk1vZGVsIiwid29ya2Zsb3dNb2RlbCIsImJ1Y2tldHMiLCJpbnN0cnVjdGlvbnMiLCJ0ZW1wZXJhdHVyZSIsIm1heFRva2VucyIsImxpbmtzIiwiZGVzY3JpcHRpb24iLCJUaW1lIiwiQ29kZSIsIlNlYXJjaCIsIldlYlNjcmFwZXIiLCJnZXREb2NzIiwiZG9jcyIsIm1vZGVsTmFtZSIsImVuZ2luZSIsInRhc2siLCJHZW5lcmF0aXZlQUlNb2RlbElucHV0VHlwZSIsIlRleHQiLCJHZW5lcmF0aXZlQUlNb2RlbE91dHB1dFR5cGUiLCJ1cmwiLCJwcm9jZXNzQ2h1bmtTcGxpdHRlckJsb2NrIiwiY29ubmVjdG9ycyIsInByb2Nlc3NDaHVua1NwbGl0dGVyQmxvY2tIZWxwZXIiLCJ0cmFjZSIsIkluZ2VzdCIsIkNodW5rU3BsaXR0ZXIiLCJ0cmFjZUxldmVsIiwiRGVidWciLCJibG9ja0lkIiwidHJhY2VJZCIsImNodW5rU2l6ZSIsImF0dHJpYnV0ZXMiLCJwcm9jZXNzTmV4dEJsb2NrIiwib3ZlcmxhcCIsInN1YnN0cmluZyIsInByb2Nlc3NEb2N1bWVudFBhcnNlckJsb2NrIiwibmV3Q29udGVudCIsIm1hdGNoRXh0ZW5zaW9uIiwicGxhaW5UZXh0Q29kZUZpbGVzIiwic3VwcG9ydHMiLCJEb2N1bWVudFBhcnNlciIsImRvY3VtZW50VHlwZSIsImRvY3VtZW50TmFtZSIsImV4dHJhY3Rpb25NZXRob2QiLCJzdXBwb3J0ZWRFeHRlbnNpb25zIiwicG9wIiwidG9Mb3dlckNhc2UiLCJwcm9jZXNzRW50aXR5RXh0cmFjdG9yQmxvY2siLCJlbnRpdGllcyIsInByb2Nlc3NFbnRpdHlFeHRyYWN0b3JCbG9ja0hlbHBlciIsIkVudGl0eUV4dHJhY3RvciIsImVudGl0aWVzRXh0cmFjdGVkIiwidG90YWxFbnRpdGllcyIsIm5ld0VudGl0aWVzIiwiZ2V0RW50aXRpZXMiLCJuZXIiLCJub3VuIiwicHJvcG4iLCJ2ZXJiIiwiZW50aXR5IiwicHJvY2Vzc0dyYXBoRGF0YWJhc2VCbG9jayIsImFjY3VtdWxhdGVkIiwicmVsYXRpb25zIiwidGltZXNDYWxsZWQiLCJnZXRJbmNvbWluZ0xpbmtzIiwiZW50aXR5Q29udGVudCIsImMiLCJ0YXJnZXRzIiwicHJvY2Vzc01vZGVsQmxvY2siLCJnZXRFbmdpbmVUeXBlIiwiZ2VuZXJhdGl2ZUFJV29ya2VyQ29ubmVjdG9yIiwicHJvY2Vzc01vZGVsQmxvY2tUZXh0SGVscGVyIiwicHJvY2Vzc01vZGVsQmxvY2tUZXh0IiwiVmVjdG9yIiwicHJvY2Vzc01vZGVsQmxvY2tWZWN0b3JIZWxwZXIiLCJwcm9jZXNzTW9kZWxCbG9ja1ZlY3RvciIsImxpbmsiLCJuZXdCbG9jayIsIlJlbGF0aW9uRXh0cmFjdG9yIiwicHJvY2Vzc1JlbGF0aW9uRXh0cmFjdG9yQmxvY2siLCJTZW50ZW5jZVNwbGl0dGVyIiwicHJvY2Vzc1NlbnRlbmNlU3BsaXR0ZXJCbG9jayIsInByb2Nlc3NWZWN0b3JEYXRhYmFzZUJsb2NrIiwiV29yZFNwbGl0dGVyIiwicHJvY2Vzc1dvcmRTcGxpdHRlckJsb2NrIiwibCIsInByb2Nlc3NSZWxhdGlvbkV4dHJhY3RvckJsb2NrSGVscGVyIiwidG90YWxSZWxhdGlvbnMiLCJvdGhlckVudGl0eSIsImVudGl0eUluZGV4Iiwib3RoZXJFbnRpdHlJbmRleCIsInNlbnRlbmNlcyIsImdldFNlbnRlbmNlcyIsInNlbnRlbmNlIiwidG90YWxTZW50ZW5jZXMiLCJhdmVyYWdlU2VudGVuY2VMZW5ndGgiLCJhcnIiLCJmaWxlUGF0aE5hbWUiLCJwcm9jZXNzV29yZFNwbGl0dGVyQmxvY2tIZWxwZXIiLCJhdmVyYWdlQ2h1bmtMZW5ndGgiLCJ3b3JkcyIsInByZXZpb3VzSW5kZXgiLCJjdXJyZW50SW5kZXgiLCJ3b3JkIiwiaiIsInByZUNodW5rIiwicG9zdENodW5rIiwidHJpbSIsInN0cnVjdHVyZWRDbG9uZSIsIlJldHJpZXZlIiwic2VhcmNoUmVzdWx0IiwicmVsZXZhbmNlIiwiZ2V0U2ltaWxhcml0eSIsInRvcEsiLCJHcmFwaFNlYXJjaCIsInRvcFJlc3VsdHMiLCJudW1SZXN1bHRzIiwidGVtcENvbnRlbnQiLCJuZXdQcm9tcHQiLCJUZXh0TW9kZWwiLCJDb250ZXh0IiwiUmVyYW5rZXIiLCJwcm9jZXNzUmVyYW5rZXJCbG9jayIsImlucHV0UmVzdWx0cyIsInJlcmFua2VkUmVzdWx0cyIsIlZlY3RvclNlYXJjaCIsInByb2Nlc3NSZXRyaWV2ZSIsIkdlbmVyYXRpdmVBSVRyYWNpbmciLCJsb2dMZXZlbCIsInByb2Nlc3NBZ2VudEJsb2NrIiwiYWdlbnRSZXN1bHQiLCJoaXN0b3J5IiwiZ2V0QWdlbnRGdW5jdGlvbnMiLCJsaW5raW5nQmxvY2siLCJLbm93bGVkZ2UiLCJTa2lsbCIsImdldENvbnRleHRGdW5jdGlvbiIsImdldFNraWxsTmFtZSIsImdldFNraWxsRnVuY3Rpb24iLCJyZXRyaWV2ZSIsInRvTG9jYWxlU3RyaW5nIiwiRnVuY3Rpb24iLCJzZWFyY2hSZXN1bHRzIiwidGl0bGUiLCJzbmlwcGV0IiwiZ2V0U2VhcmNoRnVuY3Rpb24iLCJwYWdlIiwiZmV0Y2giLCJodG1sU3RyaW5nIiwiYm9keU1hdGNoIiwibWF0Y2giLCJjb250ZW50V2l0aE5ld2xpbmVzIiwicGxhaW5UZXh0IiwibGFzdEJsb2NrIiwibGFzdFJlc3VsdCIsInBhcnRpYWwiLCJJbnRlcnZhbCIsInAiLCJsYXN0RXhlY3V0ZWQiLCJjcmVhdGVDb25zdGFudFNvdXJjZSIsImdhaW5Ob2RlIiwiY3JlYXRlR2FpbiIsImdhaW4iLCJjb25zdGFudFNvdXJjZU5vZGUiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJjb25zdGFudEJ1ZmZlciIsImNyZWF0ZUJ1ZmZlciIsInNhbXBsZVJhdGUiLCJnZXRDaGFubmVsRGF0YSIsImxvb3AiLCJzeXN0ZW1NZXNzYWdlVHlwZUxvb2t1cCIsInN5c3RlbUNvbnRlbnRNZXNzYWdlVHlwZUxvb2t1cCIsImhvdXIiLCJtaW51dGUiLCJzZWNvbmQiLCJmb3JtYXRDdXJyZW50RGF0ZSIsImQiLCJtcyIsImdldE1pbGxpc2Vjb25kcyIsImZvcm1hdHRlZFRpbWUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJkYXRlTG9nZ2VyIiwiTG9nZ2VyIiwiZW5hYmxlZENoYW5uZWxzIiwiZGVidWdFbmFibGVkIiwiZ2xvYmFsT2JqZWN0IiwiYmF0Y2hRdWV1ZSIsImN1cnJlbnRCYXRjaCIsImJhdGNoVGltZW91dCIsInJldHJ5TGltaXQiLCJyZXRyeURlbGF5IiwiYmF0Y2hTaXplIiwidGltZW91dFZhbHVlIiwiZyIsImxvYWRFbmFibGVkQ2hhbm5lbHMiLCJjcmV3ZGxlU0RLRW5hYmxlTG9nZ2luZyIsIkFsbCIsInVudHlwZWRLZXkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiY3Jld2RsZVNES0Rpc2FibGVMb2dnaW5nIiwicmVtb3ZlSXRlbSIsImNyZXdkbGVTREtMb2dnaW5nQ2hhbm5lbHMiLCJkZWJ1ZyIsImlzQ2hhbm5lbEVuYWJsZWQiLCJjcmVhdGVOZXdCYXRjaCIsImxvZ2dpbmdDb25uZWN0b3IiLCJpc0ludGVybmFsTG9nZ2luZ0Nvbm5lY3RvciIsImdldEVuYWJsZWRDaGFubmVscyIsImNvbm5lY3RvckV2ZW50Iiwic2VydmljZSIsImNyZWF0ZUJhdGNoT3BlcmF0aW9uIiwibG9nQmF0Y2giLCJzZXREb2MiLCJjb3VudGVyIiwiYmF0Y2hUb0NvbW1pdCIsImNvbW1pdEJhdGNoIiwiYmF0Y2giLCJjb21taXQiLCJvcGVyYXRpb25zIiwiY2xvbmVkQmF0Y2giLCJjcmVhdGVCYXRjaCIsInBvdyIsImdldEl0ZW0iLCJ3cml0ZUJhdGNoIiwib3AiLCJhZGRCYXRjaE9wZXJhdGlvbiIsIm9wZXJhdGlvbiIsImxvZ1JlZiIsImJhdGNoRGF0YSIsImdldFBhdGhQYXJ0cyIsInBhcnQiLCJmaWxlU2l6ZU1CIiwic2FtcGxlZENodW5rcyIsImluY3JlbWVudGFsSGFzaCIsImFycmF5QnVmZmVyIiwiY29tYmluZWRCdWZmZXIiLCJieXRlIiwicmVhZEZpbGVJbkNodW5rcyIsInN0cm9uZ0ZpbGVSZWYiLCJyZXRyaWVzIiwiZGVsYXkiLCJsaXN0ZW5lcnMiLCJuZXdMaXN0ZW5lciIsInByaW9yaXR5RW51bSIsInJvdW5kUm9iaW4iLCJwcm9jZXNzUXVldWUiLCJjYWxsIiwibG93ZXN0UHJpb3JpdHkiLCJjcmVhdGVRdWV1ZSIsInJldHJ5Q2FsbGJhY2siLCJwb3N0SW5zZXJ0SG9vayIsInByZUluc2VydEhvb2siLCJjbGVhckhvb2siLCJ0YWlsIiwicnVuSG9vayIsIm5ld0VsZW1lbnQiLCJwcmV2aW91cyIsInBvc3RQcm9jZXNzSG9vayIsInZlcnNpb25zIiwiaXNWZXJzaW9uZWRJdGVtIiwiZWxlbWVudCIsIm5ld0luZGV4IiwicHJvY2Vzc1ZlcnNpb25lZEVsZW1lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsInZlcnNpb25lZEl0ZW0iLCJTdXBwb3J0IiwiZmVhdHVyZVN1cHBvcnQiLCJjaGVja1dlYlJUQyIsImNoZWNrTWVkaWFTdHJlYW0iLCJjaGVja1NjcmVlblNoYXJpbmciLCJjaGVja0F1ZGlvVm9sdW1lIiwiY2hlY2tEZXZpY2VDb25maWciLCJjaGVja0F1ZGlvT3V0cHV0IiwiY2hlY2tNZWRpYVJlY29yZGluZyIsImNoZWNrQmFja2dyb3VuZHMiLCJjaGVja1dlYkdMIiwiY2hlY2tBdWRpb0NvbnRleHQiLCJmZWF0dXJlTmFtZSIsImZlYXR1cmUiLCJzdXBwb3J0ZWQiLCJXZWJSVEMiLCJSVENQZWVyQ29ubmVjdGlvbiIsIlJUQ0ljZUNhbmRpZGF0ZSIsIlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiIsIk1lZGlhU3RyZWFtVHJhY2siLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJTY3JlZW5TaGFyaW5nIiwiQXVkaW9Wb2x1bWUiLCJTY3JpcHRQcm9jZXNzb3JOb2RlIiwiQXVkaW9Xb3JrbGV0Tm9kZSIsIk1lZGlhU3RyZWFtQXVkaW9Tb3VyY2VOb2RlIiwiRGV2aWNlQ29uZmlnIiwiZW51bWVyYXRlRGV2aWNlcyIsIk1lZGlhRGV2aWNlSW5mbyIsIkF1ZGlvT3V0cHV0Iiwic2V0U2lua0lkIiwiUmVjb3JkaW5nIiwiTWVkaWFSZWNvcmRlciIsIk1lZGlhU291cmNlIiwicmVjb3JkZXIiLCJCYWNrZ3JvdW5kcyIsIldlYkdMIiwiV2ViR0xSZW5kZXJpbmdDb250ZXh0IiwicmVxdWlyZSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImRlZmluaXRpb24iLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2xvYmFsVGhpcyIsInByb3AiLCJwcm90b3R5cGUiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyJdLCJzb3VyY2VSb290IjoiIn0=